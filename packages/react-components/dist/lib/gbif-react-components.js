var gbifReactComponents=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=458)}([function(t,e){t.exports=React},function(t,e){function n(){return t.exports=n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},t.exports.__esModule=!0,t.exports.default=t.exports,n.apply(this,arguments)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(288);t.exports=function(t,e){if(null==t)return{};var n,i,o=r(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(289),i=n(290),o=n(199),a=n(291);t.exports=function(t,e){return r(t)||i(t,e)||o(t,e)||a()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return l})),n.d(e,"e",(function(){return c})),n.d(e,"f",(function(){return u})),n.d(e,"g",(function(){return h})),n.d(e,"h",(function(){return d})),n.d(e,"i",(function(){return p})),n.d(e,"j",(function(){return f})),n.d(e,"k",(function(){return m})),n.d(e,"l",(function(){return g})),n.d(e,"m",(function(){return y})),n.d(e,"n",(function(){return v})),n.d(e,"o",(function(){return _})),n.d(e,"p",(function(){return b})),n.d(e,"q",(function(){return x})),n.d(e,"r",(function(){return E})),n.d(e,"s",(function(){return C})),n.d(e,"t",(function(){return S})),n.d(e,"u",(function(){return T})),n.d(e,"v",(function(){return O})),n.d(e,"w",(function(){return I})),n.d(e,"x",(function(){return A})),n.d(e,"y",(function(){return M})),n.d(e,"z",(function(){return k})),n.d(e,"A",(function(){return P})),n.d(e,"B",(function(){return D})),n.d(e,"C",(function(){return R})),n.d(e,"E",(function(){return L})),n.d(e,"F",(function(){return N})),n.d(e,"D",(function(){return j})),n.d(e,"a",(function(){return F}));var r=n(96),i=n(40),o=n(16);function a(t){for(var e=f(),n=0,r=t.length;n<r;++n)b(e,t[n]);return e}function s(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function l(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function c(t,e,n){var r,i;return(r=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*r+(i=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0)*i}function u(t,e){return d(t,e[0],e[1])}function h(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function d(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function p(t,e){var n=t[0],r=t[1],o=t[2],a=t[3],s=e[0],l=e[1],c=i.a.UNKNOWN;return s<n?c|=i.a.LEFT:s>o&&(c|=i.a.RIGHT),l<r?c|=i.a.BELOW:l>a&&(c|=i.a.ABOVE),c===i.a.UNKNOWN&&(c=i.a.INTERSECTING),c}function f(){return[1/0,1/0,-1/0,-1/0]}function m(t,e,n,r,i){return i?(i[0]=t,i[1]=e,i[2]=n,i[3]=r,i):[t,e,n,r]}function g(t){return m(1/0,1/0,-1/0,-1/0,t)}function y(t,e){var n=t[0],r=t[1];return m(n,r,n,r,e)}function v(t,e,n,r,i){return x(g(i),t,e,n,r)}function _(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function b(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function x(t,e,n,r,i){for(;n<r;n+=i)w(t,e[n],e[n+1]);return t}function w(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function E(t,e){var n;return(n=e(C(t)))||(n=e(S(t)))||(n=e(P(t)))?n:(n=e(k(t)))||!1}function C(t){return[t[0],t[1]]}function S(t){return[t[2],t[1]]}function T(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function O(t,e){var n;return e===r.a.BOTTOM_LEFT?n=C(t):e===r.a.BOTTOM_RIGHT?n=S(t):e===r.a.TOP_LEFT?n=k(t):e===r.a.TOP_RIGHT?n=P(t):Object(o.a)(!1,13),n}function I(t,e,n,r,i){var o=e*r[0]/2,a=e*r[1]/2,s=Math.cos(n),l=Math.sin(n),c=o*s,u=o*l,h=a*s,d=a*l,p=t[0],f=t[1],g=p-c+d,y=p-c-d,v=p+c-d,_=p+c+d,b=f-u-h,x=f-u+h,w=f+u+h,E=f+u-h;return m(Math.min(g,y,v,_),Math.min(b,x,w,E),Math.max(g,y,v,_),Math.max(b,x,w,E),i)}function A(t){return t[3]-t[1]}function M(t,e,n){var r=n||[1/0,1/0,-1/0,-1/0];return R(t,e)?(t[0]>e[0]?r[0]=t[0]:r[0]=e[0],t[1]>e[1]?r[1]=t[1]:r[1]=e[1],t[2]<e[2]?r[2]=t[2]:r[2]=e[2],t[3]<e[3]?r[3]=t[3]:r[3]=e[3]):g(r),r}function k(t){return[t[0],t[3]]}function P(t){return[t[2],t[3]]}function D(t){return t[2]-t[0]}function R(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function L(t){return t[2]<t[0]||t[3]<t[1]}function N(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function j(t,e,n){var r=!1,o=p(t,e),a=p(t,n);if(o===i.a.INTERSECTING||a===i.a.INTERSECTING)r=!0;else{var s=t[0],l=t[1],c=t[2],u=t[3],h=e[0],d=e[1],f=n[0],m=n[1],g=(m-d)/(f-h),y=void 0,v=void 0;a&i.a.ABOVE&&!(o&i.a.ABOVE)&&(r=(y=f-(m-u)/g)>=s&&y<=c),r||!(a&i.a.RIGHT)||o&i.a.RIGHT||(r=(v=m-(f-c)*g)>=l&&v<=u),r||!(a&i.a.BELOW)||o&i.a.BELOW||(r=(y=f-(m-l)/g)>=s&&y<=c),r||!(a&i.a.LEFT)||o&i.a.LEFT||(r=(v=m-(f-s)*g)>=l&&v<=u)}return r}function F(t,e,n,r){var i=[];if(r>1)for(var o=t[2]-t[0],a=t[3]-t[1],s=0;s<r;++s)i.push(t[0]+o*s/r,t[1],t[2],t[1]+a*s/r,t[2]-o*s/r,t[3],t[0],t[3]-a*s/r);else i=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(i,i,2);for(var l=[],c=[],u=(s=0,i.length);s<u;s+=2)l.push(i[s]),c.push(i[s+1]);return function(t,e,n){return m(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),n)}(l,c,n)}},function(t,e,n){t.exports=n(295)()},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return s}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}Object.create;function s(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create},function(t,e,n){"use strict";e.a={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"}},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";function r(){return function(){throw new Error("Unimplemented abstract method.")}()}n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var i=0;function o(t){return t.ol_uid||(t.ol_uid=String(++i))}var a="6.12.0"},function(t,e,n){"use strict";function r(t,e,n){return Math.min(Math.max(t,e),n)}n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"h",(function(){return o})),n.d(e,"g",(function(){return a})),n.d(e,"i",(function(){return s})),n.d(e,"j",(function(){return l})),n.d(e,"f",(function(){return c})),n.d(e,"e",(function(){return u})),n.d(e,"d",(function(){return d})),n.d(e,"a",(function(){return p}));var i="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2};"log2"in Math&&Math.log2;function o(t,e,n,r,i,o){var s=i-n,l=o-r;if(0!==s||0!==l){var c=((t-n)*s+(e-r)*l)/(s*s+l*l);c>1?(n=i,r=o):c>0&&(n+=s*c,r+=l*c)}return a(t,e,n,r)}function a(t,e,n,r){var i=n-t,o=r-e;return i*i+o*o}function s(t){return 180*t/Math.PI}function l(t){return t*Math.PI/180}function c(t,e){var n=t%e;return n*e<0?n+e:n}function u(t,e,n){return t+n*(e-t)}function h(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}function d(t,e){return Math.floor(h(t,e))}function p(t,e){return Math.ceil(h(t,e))}},function(t,e,n){"use strict";n.d(e,"c",(function(){return c})),n.d(e,"b",(function(){return u})),n.d(e,"d",(function(){return h})),n.d(e,"e",(function(){return d})),n.d(e,"f",(function(){return p})),n.d(e,"g",(function(){return f})),n.d(e,"i",(function(){return m})),n.d(e,"k",(function(){return g})),n.d(e,"l",(function(){return y})),n.d(e,"m",(function(){return v})),n.d(e,"j",(function(){return _})),n.d(e,"h",(function(){return b})),n.d(e,"a",(function(){return x})),n.d(e,"r",(function(){return T})),n.d(e,"p",(function(){return O})),n.d(e,"o",(function(){return M})),n.d(e,"q",(function(){return k})),n.d(e,"n",(function(){return P}));var r=n(46),i=n(65),o=n(34),a=n(20),s=n(29),l=n(35),c="10px sans-serif",u="#000",h="round",d=[],p=0,f="round",m=10,g="#000",y="center",v="middle",_=[0,0,0,0],b=1,x=new r.a;(new i.a).setSize=function(){console.warn("labelCache is deprecated.")};var w,E,C=null,S={},T=function(){var t,e,n=["monospace","serif"],r=n.length,i="wmytzilWMYTZIL@#/&?$%10";function o(t,o,a){for(var s=!0,l=0;l<r;++l){var c=n[l];if(e=A(t+" "+o+" 32px "+c,i),a!=c){var u=A(t+" "+o+" 32px "+a+","+c,i);s=s&&u!=e}}return!!s}function s(){for(var e=!0,n=x.getKeys(),r=0,i=n.length;r<i;++r){var s=n[r];x.get(s)<100&&(o.apply(this,s.split("\n"))?(Object(a.b)(S),C=null,w=void 0,x.set(s,100)):(x.set(s,x.get(s)+1,!0),e=!1))}e&&(clearInterval(t),t=void 0)}return function(e){var n=Object(l.f)(e);if(n)for(var r=n.families,i=0,a=r.length;i<a;++i){var c=r[i],u=n.style+"\n"+n.weight+"\n"+c;void 0===x.get(u)&&(x.set(u,100,!0),o(n.style,n.weight,c)||(x.set(u,0,!0),void 0===t&&(t=setInterval(s,32))))}}}(),O=function(t){var e=S[t];if(null==e){if(o.g){var n=Object(l.f)(t),r=I(t,"Žg");e=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else E||((E=document.createElement("div")).innerHTML="M",E.style.minHeight="0",E.style.maxHeight="none",E.style.height="auto",E.style.padding="0",E.style.border="none",E.style.position="absolute",E.style.display="block",E.style.left="-99999px"),E.style.font=t,document.body.appendChild(E),e=E.offsetHeight,document.body.removeChild(E);S[t]=e}return e};function I(t,e){return C||(C=Object(s.a)(1,1)),t!=w&&(C.font=t,w=C.font),C.measureText(e)}function A(t,e){return I(t,e).width}function M(t,e,n){if(e in n)return n[e];var r=A(t,e);return n[e]=r,r}function k(t,e,n){for(var r=e.length,i=0,o=0;o<r;++o){var a=A(t,e[o]);i=Math.max(i,a),n.push(a)}return i}function P(t,e,n,r,i,o,a,s,l,c,u){t.save(),1!==n&&(t.globalAlpha*=n),e&&t.setTransform.apply(t,e),r.contextInstructions?(t.translate(l,c),t.scale(u[0],u[1]),function(t,e){for(var n=t.contextInstructions,r=0,i=n.length;r<i;r+=2)Array.isArray(n[r+1])?e[n[r]].apply(e,n[r+1]):e[n[r]]=n[r+1]}(r,t)):u[0]<0||u[1]<0?(t.translate(l,c),t.scale(u[0],u[1]),t.drawImage(r,i,o,a,s,0,0,a,s)):t.drawImage(r,i,o,a,s,l,c,a*u[0],s*u[1]),t.restore()}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i.a})),n.d(e,"d",(function(){return O})),n.d(e,"k",(function(){return I})),n.d(e,"c",(function(){return A})),n.d(e,"e",(function(){return M})),n.d(e,"b",(function(){return P})),n.d(e,"h",(function(){return D})),n.d(e,"g",(function(){return R})),n.d(e,"l",(function(){return N})),n.d(e,"p",(function(){return F})),n.d(e,"m",(function(){return V})),n.d(e,"n",(function(){return q})),n.d(e,"i",(function(){return H})),n.d(e,"o",(function(){return W})),n.d(e,"j",(function(){return Z})),n.d(e,"f",(function(){return $}));var r,i=n(28),o=n(75),a=n(10),s=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=6378137*Math.PI,c=[-l,-l,l,l],u=[-180,-85,180,85],h=6378137*Math.log(Math.tan(Math.PI/2)),d=function(t){function e(e){return t.call(this,{code:e,units:i.b.METERS,extent:c,global:!0,worldExtent:u,getPointResolution:function(t,e){return t/Object(a.c)(e[1]/6378137)}})||this}return s(e,t),e}(o.a),p=[new d("EPSG:3857"),new d("EPSG:102100"),new d("EPSG:102113"),new d("EPSG:900913"),new d("http://www.opengis.net/def/crs/EPSG/0/3857"),new d("http://www.opengis.net/gml/srs/epsg.xml#3857")];function f(t,e,n){var r=t.length,i=n>1?n:2,o=e;void 0===o&&(o=i>2?t.slice():new Array(r));for(var a=0;a<r;a+=i){o[a]=l*t[a]/180;var s=6378137*Math.log(Math.tan(Math.PI*(+t[a+1]+90)/360));s>h?s=h:s<-h&&(s=-h),o[a+1]=s}return o}function m(t,e,n){var r=t.length,i=n>1?n:2,o=e;void 0===o&&(o=i>2?t.slice():new Array(r));for(var a=0;a<r;a+=i)o[a]=180*t[a]/l,o[a+1]=360*Math.atan(Math.exp(t[a+1]/6378137))/Math.PI-90;return o}var g=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),y=[-180,-90,180,90],v=6378137*Math.PI/180,_=function(t){function e(e,n){return t.call(this,{code:e,units:i.b.DEGREES,extent:y,axisOrientation:n,global:!0,metersPerUnit:v,worldExtent:y})||this}return g(e,t),e}(o.a),b=[new _("CRS:84"),new _("EPSG:4326","neu"),new _("urn:ogc:def:crs:OGC:1.3:CRS84"),new _("urn:ogc:def:crs:OGC:2:84"),new _("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new _("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new _("http://www.opengis.net/def/crs/EPSG/0/4326","neu")],x={};var w=n(72),E=n(4),C=(n(123),n(47));function S(t,e,n){var r;if(void 0!==e){for(var i=0,o=t.length;i<o;++i)e[i]=t[i];r=e}else r=t.slice();return r}function T(t,e,n){if(void 0!==e&&t!==e){for(var r=0,i=t.length;r<i;++r)e[r]=t[r];t=e}return t}function O(t){!function(t,e){x[t]=e}(t.getCode(),t),Object(w.a)(t,t,S)}function I(t){return"string"==typeof t?x[e=t]||x[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:t||null;var e}function A(t){!function(t){t.forEach(O)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&Object(w.a)(e,t,S)}))}))}function M(t,e){return t?"string"==typeof t?I(t):t:I(e)}function k(t){return function(e,n,r){for(var i=e.length,o=void 0!==r?r:2,a=void 0!==n?n:new Array(i),s=0;s<i;s+=o){var l=t([e[s],e[s+1]]);a[s]=l[0],a[s+1]=l[1];for(var c=o-1;c>=2;--c)a[s+c]=e[s+c]}return a}}function P(t,e,n,r){var i=I(t),o=I(e);Object(w.a)(i,o,k(n)),Object(w.a)(o,i,k(r))}function D(t,e){return j(t,"EPSG:4326",void 0!==e?e:"EPSG:3857")}function R(t,e){if(t===e)return!0;var n=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||L(t,e)===S)&&n}function L(t,e){var n=t.getCode(),r=e.getCode(),i=Object(w.c)(n,r);return i||(i=T),i}function N(t,e){return L(I(t),I(e))}function j(t,e,n){return N(e,n)(t,void 0,t.length)}function F(t,e,n,r){var i=N(e,n);return Object(E.a)(t,i,void 0,r)}var z,B,U,G=null;function V(){return G}function q(t,e){return G?j(t,e,G):t}function H(t,e){return G?j(t,G,e):t}function W(t,e){return G?F(t,e,G):t}function Z(t,e){return G?F(t,G,e):t}function $(t,e,n){return function(r){var i,o,s=r[0],l=r[1];if(t.canWrapX()){var c=t.getExtent(),u=Object(E.B)(c);(o=Object(C.c)(r,t,u))&&(s-=o*u),s=Object(a.b)(s,c[0],c[2]),l=Object(a.b)(l,c[1],c[3]),i=n([s,l])}else i=n(r);return o&&e.canWrapX()&&(i[0]+=o*Object(E.B)(e.getExtent())),i}}A(p),A(b),z=p,B=f,U=m,b.forEach((function(t){z.forEach((function(e){Object(w.a)(t,e,B),Object(w.a)(e,t,U)}))}))},function(t,e,n){"use strict";n.d(e,"c",(function(){return s})),n.d(e,"f",(function(){return l})),n.d(e,"e",(function(){return c})),n.d(e,"h",(function(){return h})),n.d(e,"a",(function(){return d})),n.d(e,"g",(function(){return p})),n.d(e,"j",(function(){return f})),n.d(e,"b",(function(){return m})),n.d(e,"d",(function(){return g})),n.d(e,"i",(function(){return y}));var r,i=n(34),o=n(16),a=new Array(6);function s(){return[1,0,0,1,0,0]}function l(t){return u(t,1,0,0,1,0,0)}function c(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=e[0],c=e[1],u=e[2],h=e[3],d=e[4],p=e[5];return t[0]=n*l+i*c,t[1]=r*l+o*c,t[2]=n*u+i*h,t[3]=r*u+o*h,t[4]=n*d+i*p+a,t[5]=r*d+o*p+s,t}function u(t,e,n,r,i,o,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t}function h(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function d(t,e){var n=e[0],r=e[1];return e[0]=t[0]*n+t[2]*r+t[4],e[1]=t[1]*n+t[3]*r+t[5],e}function p(t,e,n){return c(t,u(a,e,0,0,n,0,0))}function f(t,e,n){return c(t,u(a,1,0,0,1,e,n))}function m(t,e,n,r,i,o,a,s){var l=Math.sin(o),c=Math.cos(o);return t[0]=r*c,t[1]=i*l,t[2]=-r*l,t[3]=i*c,t[4]=a*r*c-s*r*l+e,t[5]=a*i*l+s*i*c+n,t}function g(t,e){var n,r=(n=e)[0]*n[3]-n[1]*n[2];Object(o.a)(0!==r,32);var i=e[0],a=e[1],s=e[2],l=e[3],c=e[4],u=e[5];return t[0]=l/r,t[1]=-a/r,t[2]=-s/r,t[3]=i/r,t[4]=(s*u-l*c)/r,t[5]=-(i*u-a*c)/r,t}function y(t){var e="matrix("+t.join(", ")+")";if(i.g)return e;var n=r||(r=document.createElement("div"));return n.style.transform=e,n.style.transform}},function(t,e,n){"use strict";e.a={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a}));var r=n(20);function i(t,e,n,r,i){if(r&&r!==t&&(n=n.bind(r)),i){var o=n;n=function(){t.removeEventListener(e,n),o.apply(this,arguments)}}var a={target:t,type:e,listener:n};return t.addEventListener(e,n),a}function o(t,e,n,r){return i(t,e,n,r,!0)}function a(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),Object(r.b)(t))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(151);function i(t,e){if(!t)throw new r.a(e)}},function(t,e,n){"use strict";e.a={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},function(t,e,n){var r=n(132);t.exports=function(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}},function(t,e,n){"use strict";function r(t,e,n){for(var r,o,a=n||i,s=0,l=t.length,c=!1;s<l;)(o=+a(t[r=s+(l-s>>1)],e))<0?s=r+1:(l=r,c=!o);return c?s:~s}function i(t,e){return t>e?1:t<e?-1:0}function o(t,e,n){var r=t.length;if(t[0]<=e)return 0;if(e<=t[r-1])return r-1;var i=void 0;if(n>0){for(i=1;i<r;++i)if(t[i]<e)return i-1}else if(n<0){for(i=1;i<r;++i)if(t[i]<=e)return i}else for(i=1;i<r;++i){if(t[i]==e)return i;if(t[i]<e)return"function"==typeof n?n(e,t[i-1],t[i])>0?i-1:i:t[i-1]-e<e-t[i]?i-1:i}return r-1}function a(t,e,n){for(;e<n;){var r=t[e];t[e]=t[n],t[n]=r,++e,--n}}function s(t,e){for(var n=Array.isArray(e)?e:[e],r=n.length,i=0;i<r;i++)t[t.length]=n[i]}function l(t,e){var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function c(t,e,n){var r=e||i;return t.every((function(e,i){if(0===i)return!0;var o=r(t[i-1],e);return!(o>0||n&&0===o)}))}n.d(e,"a",(function(){return r})),n.d(e,"f",(function(){return i})),n.d(e,"e",(function(){return o})),n.d(e,"g",(function(){return a})),n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return l})),n.d(e,"d",(function(){return c}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return a}));var r="function"==typeof Object.assign?Object.assign:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),r=1,i=arguments.length;r<i;++r){var o=arguments[r];if(null!=o)for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])}return n};function i(t){for(var e in t)delete t[e]}var o="function"==typeof Object.values?Object.values:function(t){var e=[];for(var n in t)e.push(t[n]);return e};function a(t){var e;for(e in t)return!1;return!e}},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";e.a={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"}},function(t,e,n){"use strict";var r=n(14);e.a={SINGLECLICK:"singleclick",CLICK:r.a.CLICK,DBLCLICK:r.a.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},function(t){t.exports=JSON.parse('{"API_V1":"https://api.gbif.org/v1","API_V2":"https://api.gbif.org/v2","GRAPH_API":"https://graphql.gbif-staging.org/graphql","TILE_API":"https://hp-maps.gbif-staging.org","MAPBOX_KEY":"pk.eyJ1IjoiZ2JpZiIsImEiOiJja3VmZm50Z3kxcm1vMnBtdnBmeGd5cm9hIn0.M2z2n9QP9fRHZUCw9vbgOA","DOMAIN":"react-components.gbif-staging.org","GBIF_ORG":"https://www.gbif.org","BASEMAPS":"https://tile.gbif-uat.org","TRANSLATIONS":"https://react-components.gbif-staging.org/lib/translations","LOCALES":["en-developer","en-pseudo","en","da","ar","da","de","es","fa","fj","fr","ja","la","niu","nl","pis","pt","ru","sm","sw","tkl","to","tvl","uk","zh","zh-tw"]}')},function(t,e,n){"use strict";e.a={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},function(t,e,n){"use strict";e.a={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"}},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return s}));var r=n(19);function i(){return!0}function o(){return!1}function a(){}function s(t){var e,n,i,o=!1;return function(){var a=Array.prototype.slice.call(arguments);return o&&this===i&&Object(r.b)(a,n)||(o=!0,i=this,n=a,e=t.apply(this,arguments)),e}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"};var i={};i[r.RADIANS]=6370997/(2*Math.PI),i[r.DEGREES]=2*Math.PI*6370997/360,i[r.FEET]=.3048,i[r.METERS]=1,i[r.USFEET]=1200/3937,e.b=r},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"e",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"b",(function(){return s})),n.d(e,"d",(function(){return l}));var r=n(34);function i(t,e,n,i){var o;return o=n&&n.length?n.shift():r.g?new OffscreenCanvas(t||300,e||300):document.createElement("canvas"),t&&(o.width=t),e&&(o.height=e),o.getContext("2d",i)}function o(t,e){var n=e.parentNode;n&&n.replaceChild(t,e)}function a(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function s(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function l(t,e){for(var n=t.childNodes,r=0;;++r){var i=n[r],o=e[r];if(!i&&!o)break;i!==o&&(i?o?t.insertBefore(o,i):(t.removeChild(i),--r):t.appendChild(o))}}},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.__esModule=!0,t.exports.default=t.exports,n(e)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){t.exports=n(393)},function(t,e,n){"use strict";function r(t){return t[0]>0&&t[1]>0}function i(t,e,n){return void 0===n&&(n=[0,0]),n[0]=t[0]*e+.5|0,n[1]=t[1]*e+.5|0,n}function o(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o}))},function(t,e,n){"use strict";const r=n(340),i=n(341),o=n(342),a=n(343),s=Symbol("encodeFragmentIdentifier");function l(t){if("string"!=typeof t||1!==t.length)throw new TypeError("arrayFormatSeparator must be single character string")}function c(t,e){return e.encode?e.strict?r(t):encodeURIComponent(t):t}function u(t,e){return e.decode?i(t):t}function h(t){const e=t.indexOf("#");return-1!==e&&(t=t.slice(0,e)),t}function d(t){const e=(t=h(t)).indexOf("?");return-1===e?"":t.slice(e+1)}function p(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&"string"==typeof t&&""!==t.trim()?t=Number(t):!e.parseBooleans||null===t||"true"!==t.toLowerCase()&&"false"!==t.toLowerCase()||(t="true"===t.toLowerCase()),t}function f(t,e){l((e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e)).arrayFormatSeparator);const n=function(t){let e;switch(t.arrayFormat){case"index":return(t,n,r)=>{e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===r[t]&&(r[t]={}),r[t][e[1]]=n):r[t]=n};case"bracket":return(t,n,r)=>{e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0!==r[t]?r[t]=[].concat(r[t],n):r[t]=[n]:r[t]=n};case"colon-list-separator":return(t,n,r)=>{e=/(:list)$/.exec(t),t=t.replace(/:list$/,""),e?void 0!==r[t]?r[t]=[].concat(r[t],n):r[t]=[n]:r[t]=n};case"comma":case"separator":return(e,n,r)=>{const i="string"==typeof n&&n.includes(t.arrayFormatSeparator),o="string"==typeof n&&!i&&u(n,t).includes(t.arrayFormatSeparator);n=o?u(n,t):n;const a=i||o?n.split(t.arrayFormatSeparator).map(e=>u(e,t)):null===n?n:u(n,t);r[e]=a};case"bracket-separator":return(e,n,r)=>{const i=/(\[\])$/.test(e);if(e=e.replace(/\[\]$/,""),!i)return void(r[e]=n?u(n,t):n);const o=null===n?[]:n.split(t.arrayFormatSeparator).map(e=>u(e,t));void 0!==r[e]?r[e]=[].concat(r[e],o):r[e]=o};default:return(t,e,n)=>{void 0!==n[t]?n[t]=[].concat(n[t],e):n[t]=e}}}(e),r=Object.create(null);if("string"!=typeof t)return r;if(!(t=t.trim().replace(/^[?#&]/,"")))return r;for(const i of t.split("&")){if(""===i)continue;let[t,a]=o(e.decode?i.replace(/\+/g," "):i,"=");a=void 0===a?null:["comma","separator","bracket-separator"].includes(e.arrayFormat)?a:u(a,e),n(u(t,e),a,r)}for(const t of Object.keys(r)){const n=r[t];if("object"==typeof n&&null!==n)for(const t of Object.keys(n))n[t]=p(n[t],e);else r[t]=p(n,e)}return!1===e.sort?r:(!0===e.sort?Object.keys(r).sort():Object.keys(r).sort(e.sort)).reduce((t,e)=>{const n=r[e];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?t[e]=function t(e){return Array.isArray(e)?e.sort():"object"==typeof e?t(Object.keys(e)).sort((t,e)=>Number(t)-Number(e)).map(t=>e[t]):e}(n):t[e]=n,t},Object.create(null))}e.extract=d,e.parse=f,e.stringify=(t,e)=>{if(!t)return"";l((e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e)).arrayFormatSeparator);const n=n=>e.skipNull&&null==t[n]||e.skipEmptyString&&""===t[n],r=function(t){switch(t.arrayFormat){case"index":return e=>(n,r)=>{const i=n.length;return void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:null===r?[...n,[c(e,t),"[",i,"]"].join("")]:[...n,[c(e,t),"[",c(i,t),"]=",c(r,t)].join("")]};case"bracket":return e=>(n,r)=>void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:null===r?[...n,[c(e,t),"[]"].join("")]:[...n,[c(e,t),"[]=",c(r,t)].join("")];case"colon-list-separator":return e=>(n,r)=>void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:null===r?[...n,[c(e,t),":list="].join("")]:[...n,[c(e,t),":list=",c(r,t)].join("")];case"comma":case"separator":case"bracket-separator":{const e="bracket-separator"===t.arrayFormat?"[]=":"=";return n=>(r,i)=>void 0===i||t.skipNull&&null===i||t.skipEmptyString&&""===i?r:(i=null===i?"":i,0===r.length?[[c(n,t),e,c(i,t)].join("")]:[[r,c(i,t)].join(t.arrayFormatSeparator)])}default:return e=>(n,r)=>void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:null===r?[...n,c(e,t)]:[...n,[c(e,t),"=",c(r,t)].join("")]}}(e),i={};for(const e of Object.keys(t))n(e)||(i[e]=t[e]);const o=Object.keys(i);return!1!==e.sort&&o.sort(e.sort),o.map(n=>{const i=t[n];return void 0===i?"":null===i?c(n,e):Array.isArray(i)?0===i.length&&"bracket-separator"===e.arrayFormat?c(n,e)+"[]":i.reduce(r(n),[]).join("&"):c(n,e)+"="+c(i,e)}).filter(t=>t.length>0).join("&")},e.parseUrl=(t,e)=>{e=Object.assign({decode:!0},e);const[n,r]=o(t,"#");return Object.assign({url:n.split("?")[0]||"",query:f(d(t),e)},e&&e.parseFragmentIdentifier&&r?{fragmentIdentifier:u(r,e)}:{})},e.stringifyUrl=(t,n)=>{n=Object.assign({encode:!0,strict:!0,[s]:!0},n);const r=h(t.url).split("?")[0]||"",i=e.extract(t.url),o=e.parse(i,{sort:!1}),a=Object.assign(o,t.query);let l=e.stringify(a,n);l&&(l="?"+l);let u=function(t){let e="";const n=t.indexOf("#");return-1!==n&&(e=t.slice(n)),e}(t.url);return t.fragmentIdentifier&&(u="#"+(n[s]?c(t.fragmentIdentifier,n):t.fragmentIdentifier)),`${r}${l}${u}`},e.pick=(t,n,r)=>{r=Object.assign({parseFragmentIdentifier:!0,[s]:!1},r);const{url:i,query:o,fragmentIdentifier:l}=e.parseUrl(t,r);return e.stringifyUrl({url:i,query:a(o,n),fragmentIdentifier:l},r)},e.exclude=(t,n,r)=>{const i=Array.isArray(n)?t=>!n.includes(t):(t,e)=>!n(t,e);return e.pick(t,i,r)}},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"f",(function(){return o})),n.d(e,"d",(function(){return a})),n.d(e,"a",(function(){return s})),n.d(e,"g",(function(){return l})),n.d(e,"c",(function(){return c})),n.d(e,"e",(function(){return u}));var r="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",i=-1!==r.indexOf("firefox"),o=(-1!==r.indexOf("safari")&&r.indexOf("chrom"),-1!==r.indexOf("webkit")&&-1==r.indexOf("edge")),a=-1!==r.indexOf("macintosh"),s="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,l="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,c="undefined"!=typeof Image&&Image.prototype.decode,u=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}return t}()},function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"d",(function(){return i})),n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return a})),n.d(e,"f",(function(){return c})),n.d(e,"e",(function(){return u}));var r="ol-hidden",i="ol-unselectable",o="ol-control",a="ol-collapsed",s=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),l=["style","variant","weight","size","lineHeight","family"],c=function(t){var e=t.match(s);if(!e)return null;for(var n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},r=0,i=l.length;r<i;++r){var o=e[r+1];void 0!==o&&(n[l[r]]=o)}return n.families=n.family.split(/,\s?/),n};function u(t){return 1===t?"":String(Math.round(100*t)/100)}},function(t,e,n){"use strict";function r(t,e,n,r,i){for(var o=void 0!==i?i:[],a=0,s=e;s<n;s+=r)o[a++]=t.slice(s,s+r);return o.length=a,o}function i(t,e,n,i,o){for(var a=void 0!==o?o:[],s=0,l=0,c=n.length;l<c;++l){var u=n[l];a[s++]=r(t,e,u,i,a[s]),e=u}return a.length=s,a}function o(t,e,n,r,o){for(var a=void 0!==o?o:[],s=0,l=0,c=n.length;l<c;++l){var u=n[l];a[s++]=i(t,e,u,r,a[s]),e=u[u.length-1]}return a.length=s,a}n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o}))},function(t,e,n){"use strict";e.a={ANIMATING:0,INTERACTING:1}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";e.a={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}},function(t,e,n){var r=n(390),i=n(391),o=n(199),a=n(392);t.exports=function(t){return r(t)||i(t)||o(t)||a()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";function r(t,e,n,r,i,o){for(var a=o||[],s=0,l=e;l<n;l+=r){var c=t[l],u=t[l+1];a[s++]=i[0]*c+i[2]*u+i[4],a[s++]=i[1]*c+i[3]*u+i[5]}return o&&a.length!=s&&(a.length=s),a}function i(t,e,n,r,i,o,a){for(var s=a||[],l=Math.cos(i),c=Math.sin(i),u=o[0],h=o[1],d=0,p=e;p<n;p+=r){var f=t[p]-u,m=t[p+1]-h;s[d++]=u+f*l-m*c,s[d++]=h+f*c+m*l;for(var g=p+2;g<p+r;++g)s[d++]=t[g]}return a&&s.length!=d&&(s.length=d),s}function o(t,e,n,r,i,o,a,s){for(var l=s||[],c=a[0],u=a[1],h=0,d=e;d<n;d+=r){var p=t[d]-c,f=t[d+1]-u;l[h++]=c+i*p,l[h++]=u+o*f;for(var m=d+2;m<d+r;++m)l[h++]=t[m]}return s&&l.length!=h&&(l.length=h),l}function a(t,e,n,r,i,o,a){for(var s=a||[],l=0,c=e;c<n;c+=r){s[l++]=t[c]+i,s[l++]=t[c+1]+o;for(var u=c+2;u<c+r;++u)s[l++]=t[u]}return a&&s.length!=l&&(s.length=l),s}n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o})),n.d(e,"d",(function(){return a}))},function(t,e,n){var r=n(169);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&r(t,e)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(45).default,i=n(21);t.exports=function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return i(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){function n(e){return t.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,n(e)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";var r,i=n(52),o=n(81),a=n(152),s=n(20),l=n(9),c=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.key=n,i.oldValue=r,i}return c(e,t),e}(i.a),h=function(t){function e(e){var n=t.call(this)||this;return n.on,n.once,n.un,Object(l.c)(n),n.values_=null,void 0!==e&&n.setProperties(e),n}return c(e,t),e.prototype.get=function(t){var e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},e.prototype.getProperties=function(){return this.values_&&Object(s.a)({},this.values_)||{}},e.prototype.hasProperties=function(){return!!this.values_},e.prototype.notify=function(t,e){var n;n="change:"+t,this.dispatchEvent(new u(n,t,e)),n=o.a.PROPERTYCHANGE,this.dispatchEvent(new u(n,t,e))},e.prototype.addChangeListener=function(t,e){this.addEventListener("change:"+t,e)},e.prototype.removeChangeListener=function(t,e){this.removeEventListener("change:"+t,e)},e.prototype.set=function(t,e,n){var r=this.values_||(this.values_={});if(n)r[t]=e;else{var i=r[t];r[t]=e,i!==e&&this.notify(t,i)}},e.prototype.setProperties=function(t,e){for(var n in t)this.set(n,t[n],e)},e.prototype.applyProperties=function(t){t.values_&&Object(s.a)(this.values_||(this.values_={}),t.values_)},e.prototype.unset=function(t,e){if(this.values_&&t in this.values_){var n=this.values_[t];delete this.values_[t],Object(s.d)(this.values_)&&(this.values_=null),e||this.notify(t,n)}},e}(a.a);e.a=h},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o})),n.d(e,"d",(function(){return a})),n.d(e,"e",(function(){return s})),n.d(e,"f",(function(){return l})),n.d(e,"c",(function(){return c}));var r=n(4);n(10);function i(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function o(t,e){for(var n=!0,r=t.length-1;r>=0;--r)if(t[r]!=e[r]){n=!1;break}return n}function a(t,e){var n=Math.cos(e),r=Math.sin(e),i=t[0]*n-t[1]*r,o=t[1]*n+t[0]*r;return t[0]=i,t[1]=o,t}function s(t,e){return t[0]*=e,t[1]*=e,t}function l(t,e){if(e.canWrapX()){var n=Object(r.B)(e.getExtent()),i=c(t,e,n);i&&(t[0]-=i*n)}return t}function c(t,e,n){var i=e.getExtent(),o=0;if(e.canWrapX()&&(t[0]<i[0]||t[0]>i[2])){var a=n||Object(r.B)(i);o=Math.floor((t[0]-i[0])/a)}return o}},function(t,e,n){"use strict";function r(t){return Math.pow(t,3)}function i(t){return 1-r(1-t)}function o(t){return 3*t*t-2*t*t*t}function a(t){return t}n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return a}))},function(t,e,n){"use strict";function r(t,e,n,r){return void 0!==r?(r[0]=t,r[1]=e,r[2]=n,r):[t,e,n]}function i(t,e,n){return t+"/"+e+"/"+n}function o(t){return i(t[0],t[1],t[2])}function a(t){var e=t.substring(t.lastIndexOf("/")+1,t.length).split(",").map(Number);return i(e[0],e[1],e[2])}function s(t){return t.split("/").map(Number)}function l(t){return(t[1]<<t[0])+t[2]}function c(t,e){var n=t[0],r=t[1],i=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;var o=e.getFullTileRange(n);return!o||o.containsXY(r,i)}n.d(e,"a",(function(){return r})),n.d(e,"e",(function(){return i})),n.d(e,"d",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"b",(function(){return s})),n.d(e,"f",(function(){return l})),n.d(e,"g",(function(){return c}))},function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,r(t,e)}n.d(e,"a",(function(){return i}))},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){"use strict";var r=function(){function t(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.defaultPrevented=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}();e.a=r},function(t,e,n){"use strict";n.d(e,"b",(function(){return _}));var r,i=n(46),o=n(28),a=n(9),s=n(13),l=n(4),c=n(12),u=n(27),h=n(42),d=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),p=Object(s.c)(),f=function(t){function e(){var e=t.call(this)||this;return e.extent_=Object(l.j)(),e.extentRevision_=-1,e.simplifiedGeometryMaxMinSquaredTolerance=0,e.simplifiedGeometryRevision=0,e.simplifyTransformedInternal=Object(u.d)((function(t,e,n){if(!n)return this.getSimplifiedGeometry(e);var r=this.clone();return r.applyTransform(n),r.getSimplifiedGeometry(e)})),e}return d(e,t),e.prototype.simplifyTransformed=function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)},e.prototype.clone=function(){return Object(a.b)()},e.prototype.closestPointXY=function(t,e,n,r){return Object(a.b)()},e.prototype.containsXY=function(t,e){var n=this.getClosestPoint([t,e]);return n[0]===t&&n[1]===e},e.prototype.getClosestPoint=function(t,e){var n=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],n,1/0),n},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return Object(a.b)()},e.prototype.getExtent=function(t){if(this.extentRevision_!=this.getRevision()){var e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&Object(l.l)(e),this.extentRevision_=this.getRevision()}return Object(l.F)(this.extent_,t)},e.prototype.rotate=function(t,e){Object(a.b)()},e.prototype.scale=function(t,e,n){Object(a.b)()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return Object(a.b)()},e.prototype.getType=function(){return Object(a.b)()},e.prototype.applyTransform=function(t){Object(a.b)()},e.prototype.intersectsExtent=function(t){return Object(a.b)()},e.prototype.translate=function(t,e){Object(a.b)()},e.prototype.transform=function(t,e){var n=Object(c.k)(t),r=n.getUnits()==o.b.TILE_PIXELS?function(t,r,i){var o=n.getExtent(),a=n.getWorldExtent(),u=Object(l.x)(a)/Object(l.x)(o);return Object(s.b)(p,a[0],a[3],u,-u,0,0,0),Object(h.c)(t,0,t.length,i,p,r),Object(c.l)(n,e)(t,r,i)}:Object(c.l)(n,e);return this.applyTransform(r),this},e}(i.a),m=n(22),g=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),y=function(t){function e(){var e=t.call(this)||this;return e.layout=m.a.XY,e.stride=2,e.flatCoordinates=null,e}return g(e,t),e.prototype.computeExtent=function(t){return Object(l.n)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinates=function(){return Object(a.b)()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=v(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){Object(a.b)()},e.prototype.setLayout=function(t,e,n){var r;if(t)r=v(t);else{for(var i=0;i<n;++i){if(0===e.length)return this.layout=m.a.XY,void(this.stride=2);e=e[0]}t=function(t){var e;2==t?e=m.a.XY:3==t?e=m.a.XYZ:4==t&&(e=m.a.XYZM);return e}(r=e.length)}this.layout=t,this.stride=r},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var n=this.getFlatCoordinates();if(n){var r=this.getStride();Object(h.a)(n,0,n.length,r,t,e,n),this.changed()}},e.prototype.scale=function(t,e,n){var r=e;void 0===r&&(r=t);var i=n;i||(i=Object(l.u)(this.getExtent()));var o=this.getFlatCoordinates();if(o){var a=this.getStride();Object(h.b)(o,0,o.length,a,t,r,i,o),this.changed()}},e.prototype.translate=function(t,e){var n=this.getFlatCoordinates();if(n){var r=this.getStride();Object(h.d)(n,0,n.length,r,t,e,n),this.changed()}},e}(f);function v(t){var e;return t==m.a.XY?e=2:t==m.a.XYZ||t==m.a.XYM?e=3:t==m.a.XYZM&&(e=4),e}function _(t,e,n){var r=t.getFlatCoordinates();if(r){var i=t.getStride();return Object(h.c)(r,0,r.length,i,e,n)}return null}e.a=y},function(t,e,n){"use strict";n.d(e,"e",(function(){return o})),n.d(e,"a",(function(){return a})),n.d(e,"f",(function(){return s})),n.d(e,"d",(function(){return l})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return u}));var r=n(10);function i(t,e,n,i,o,a,s){var l,c=t[e],u=t[e+1],h=t[n]-c,d=t[n+1]-u;if(0===h&&0===d)l=e;else{var p=((o-c)*h+(a-u)*d)/(h*h+d*d);if(p>1)l=n;else{if(p>0){for(var f=0;f<i;++f)s[f]=Object(r.e)(t[e+f],t[n+f],p);return void(s.length=i)}l=e}}for(f=0;f<i;++f)s[f]=t[l+f];s.length=i}function o(t,e,n,i,o){var a=t[e],s=t[e+1];for(e+=i;e<n;e+=i){var l=t[e],c=t[e+1],u=Object(r.g)(a,s,l,c);u>o&&(o=u),a=l,s=c}return o}function a(t,e,n,r,i){for(var a=0,s=n.length;a<s;++a){var l=n[a];i=o(t,e,l,r,i),e=l}return i}function s(t,e,n,r,i){for(var o=0,s=n.length;o<s;++o){var l=n[o];i=a(t,e,l,r,i),e=l[l.length-1]}return i}function l(t,e,n,o,a,s,l,c,u,h,d){if(e==n)return h;var p,f;if(0===a){if((f=Object(r.g)(l,c,t[e],t[e+1]))<h){for(p=0;p<o;++p)u[p]=t[e+p];return u.length=o,f}return h}for(var m=d||[NaN,NaN],g=e+o;g<n;)if(i(t,g-o,g,o,l,c,m),(f=Object(r.g)(l,c,m[0],m[1]))<h){for(h=f,p=0;p<o;++p)u[p]=m[p];u.length=o,g+=o}else g+=o*Math.max((Math.sqrt(f)-Math.sqrt(h))/a|0,1);if(s&&(i(t,n-o,e,o,l,c,m),(f=Object(r.g)(l,c,m[0],m[1]))<h)){for(h=f,p=0;p<o;++p)u[p]=m[p];u.length=o}return h}function c(t,e,n,r,i,o,a,s,c,u,h){for(var d=h||[NaN,NaN],p=0,f=n.length;p<f;++p){var m=n[p];u=l(t,e,m,r,i,o,a,s,c,u,d),e=m}return u}function u(t,e,n,r,i,o,a,s,l,u,h){for(var d=h||[NaN,NaN],p=0,f=n.length;p<f;++p){var m=n[p];u=c(t,e,m,r,i,o,a,s,l,u,d),e=m[m.length-1]}return u}},function(t,e){function n(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise((function(i,o){var a=t.apply(e,r);function s(t){n(a,i,o,s,l,"next",t)}function l(t){n(a,i,o,s,l,"throw",t)}s(void 0)}))}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";var r,i=n(151),o=n(46),a=n(57),s=n(52),l=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),c="length",u=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.element=n,i.index=r,i}return l(e,t),e}(s.a),h=function(t){function e(e,n){var r=t.call(this)||this;r.on,r.once,r.un;var i=n||{};if(r.unique_=!!i.unique,r.array_=e||[],r.unique_)for(var o=0,a=r.array_.length;o<a;++o)r.assertUnique_(r.array_[o],o);return r.updateLength_(),r}return l(e,t),e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,n=t.length;e<n;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,n=0,r=e.length;n<r;++n)t(e[n],n,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(c)},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new u(a.a.ADD,e,t))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,n=0,r=e.length;n<r;++n)if(e[n]===t)return this.removeAt(n)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new u(a.a.REMOVE,e,t)),e},e.prototype.setAt=function(t,e){var n=this.getLength();if(t<n){this.unique_&&this.assertUnique_(e,t);var r=this.array_[t];this.array_[t]=e,this.dispatchEvent(new u(a.a.REMOVE,r,t)),this.dispatchEvent(new u(a.a.ADD,e,t))}else{for(var i=n;i<t;++i)this.insertAt(i,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set(c,this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var n=0,r=this.array_.length;n<r;++n)if(this.array_[n]===t&&n!==e)throw new i.a(58)},e}(o.a);e.a=h},function(t,e,n){"use strict";e.a={ADD:"add",REMOVE:"remove"}},function(t,e,n){"use strict";function r(t,e,n,r){for(var i=0,o=n.length;i<o;++i)t[e++]=n[i];return e}function i(t,e,n,r){for(var i=0,o=n.length;i<o;++i)for(var a=n[i],s=0;s<r;++s)t[e++]=a[s];return e}function o(t,e,n,r,o){for(var a=o||[],s=0,l=0,c=n.length;l<c;++l){var u=i(t,e,n[l],r);a[s++]=u,e=u}return a.length=s,a}function a(t,e,n,r,i){for(var a=i||[],s=0,l=0,c=n.length;l<c;++l){var u=o(t,e,n[l],r,a[s]);a[s++]=u,e=u[u.length-1]}return a.length=s,a}n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return a}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(62);function i(t){return Array.isArray(t)?Object(r.c)(t):t}},function(t,e,n){t.exports=n(320)},function(t,e,n){"use strict";var r=n(203),i=Object.prototype.toString;function o(t){return"[object Array]"===i.call(t)}function a(t){return void 0===t}function s(t){return null!==t&&"object"==typeof t}function l(t){if("[object Object]"!==i.call(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}function c(t){return"[object Function]"===i.call(t)}function u(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),o(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}t.exports={isArray:o,isArrayBuffer:function(t){return"[object ArrayBuffer]"===i.call(t)},isBuffer:function(t){return null!==t&&!a(t)&&null!==t.constructor&&!a(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:s,isPlainObject:l,isUndefined:a,isDate:function(t){return"[object Date]"===i.call(t)},isFile:function(t){return"[object File]"===i.call(t)},isBlob:function(t){return"[object Blob]"===i.call(t)},isFunction:c,isStream:function(t){return s(t)&&c(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:u,merge:function t(){var e={};function n(n,r){l(e[r])&&l(n)?e[r]=t(e[r],n):l(n)?e[r]=t({},n):o(n)?e[r]=n.slice():e[r]=n}for(var r=0,i=arguments.length;r<i;r++)u(arguments[r],n);return e},extend:function(t,e,n){return u(e,(function(e,i){t[i]=n&&"function"==typeof e?r(e,n):e})),t},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t}}},function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return d})),n.d(e,"c",(function(){return f}));var r=n(16),i=n(10),o=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,a=/^([a-z]*)$|^hsla?\(.*\)$/i;function s(t){return"string"==typeof t?t:f(t)}function l(t){var e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);var n=getComputedStyle(e).color;return document.body.removeChild(e),n}return""}var c,u,h=(c={},u=0,function(t){var e;if(c.hasOwnProperty(t))e=c[t];else{if(u>=1024){var n=0;for(var i in c)0==(3&n++)&&(delete c[i],--u)}e=function(t){var e,n,i,s,c;if(a.exec(t)&&(t=l(t)),o.exec(t)){var u=t.length-1,h=void 0;h=u<=4?1:2;var d=4===u||8===u;e=parseInt(t.substr(1+0*h,h),16),n=parseInt(t.substr(1+1*h,h),16),i=parseInt(t.substr(1+2*h,h),16),s=d?parseInt(t.substr(1+3*h,h),16):255,1==h&&(e=(e<<4)+e,n=(n<<4)+n,i=(i<<4)+i,d&&(s=(s<<4)+s)),c=[e,n,i,s/255]}else 0==t.indexOf("rgba(")?p(c=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((c=t.slice(4,-1).split(",").map(Number)).push(1),p(c)):Object(r.a)(!1,14);return c}(t),c[t]=e,++u}return e});function d(t){return Array.isArray(t)?t:h(t)}function p(t){return t[0]=Object(i.b)(t[0]+.5|0,0,255),t[1]=Object(i.b)(t[1]+.5|0,0,255),t[2]=Object(i.b)(t[2]+.5|0,0,255),t[3]=Object(i.b)(t[3],0,1),t}function f(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var n=t[1];n!=(0|n)&&(n=n+.5|0);var r=t[2];return r!=(0|r)&&(r=r+.5|0),"rgba("+e+","+n+","+r+","+(void 0===t[3]?1:Math.round(100*t[3])/100)+")"}},function(t,e,n){"use strict";var r=n(46),i=n(7),o=n(28),a=n(37),s={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},l=n(93),c=n(12),u=n(27),h=n(47),d=n(16),p=n(20),f=n(10);function m(t,e,n){return function(r,i,o,a,s){if(r){var l=e?0:o[0]*i,c=e?0:o[1]*i,u=s?s[0]:0,h=s?s[1]:0,d=t[0]+l/2+u,p=t[2]-l/2+u,m=t[1]+c/2+h,g=t[3]-c/2+h;d>p&&(p=d=(p+d)/2),m>g&&(g=m=(g+m)/2);var y=Object(f.b)(r[0],d,p),v=Object(f.b)(r[1],m,g),_=30*i;return a&&n&&(y+=-_*Math.log(1+Math.max(0,d-r[0])/_)+_*Math.log(1+Math.max(0,r[0]-p)/_),v+=-_*Math.log(1+Math.max(0,m-r[1])/_)+_*Math.log(1+Math.max(0,r[1]-g)/_)),[y,v]}}}function g(t){return t}var y=n(4),v=n(19);function _(t,e,n,r){var i=Object(y.B)(e)/n[0],o=Object(y.x)(e)/n[1];return r?Math.min(t,Math.max(i,o)):Math.min(t,Math.min(i,o))}function b(t,e,n){var r=Math.min(t,e);return r*=Math.log(1+50*Math.max(0,t/e-1))/50+1,n&&(r=Math.max(r,n),r/=Math.log(1+50*Math.max(0,n/t-1))/50+1),Object(f.b)(r,n/2,2*e)}function x(t,e,n,r,i){return function(o,a,s,l){if(void 0!==o){var c=r?_(t,r,s,i):t;return(void 0===n||n)&&l?b(o,c,e):Object(f.b)(o,e,c)}}}var w,E=n(77),C=n(48),S=n(71),T=(w=function(t,e){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}w(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),O=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var r=Object(p.a)({},e);return n.hints_=[0,0],n.animations_=[],n.updateAnimationKey_,n.projection_=Object(c.e)(r.projection,"EPSG:3857"),n.viewportSize_=[100,100],n.targetCenter_=null,n.targetResolution_,n.targetRotation_,n.nextCenter_=null,n.nextResolution_,n.nextRotation_,n.cancelAnchor_=void 0,r.center&&(r.center=Object(c.i)(r.center,n.projection_)),r.extent&&(r.extent=Object(c.j)(r.extent,n.projection_)),n.applyOptions_(r),n}return T(e,t),e.prototype.applyOptions_=function(t){var e=Object(p.a)({},t);for(var n in s)delete e[n];this.setProperties(e,!0);var r=function(t){var e,n,r,i=void 0!==t.minZoom?t.minZoom:0,a=void 0!==t.maxZoom?t.maxZoom:28,s=void 0!==t.zoomFactor?t.zoomFactor:2,u=void 0!==t.multiWorld&&t.multiWorld,h=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,d=void 0!==t.showFullExtent&&t.showFullExtent,p=Object(c.e)(t.projection,"EPSG:3857"),m=p.getExtent(),g=t.constrainOnlyCenter,w=t.extent;u||w||!p.isGlobal()||(g=!1,w=m);if(void 0!==t.resolutions){var E=t.resolutions;n=E[i],r=void 0!==E[a]?E[a]:E[E.length-1],e=t.constrainResolution?function(t,e,n,r){return function(i,o,a,s){if(void 0!==i){var l=t[0],c=t[t.length-1],u=n?_(l,n,a,r):l;if(s)return void 0===e||e?b(i,u,c):Object(f.b)(i,c,u);var h=Math.min(u,i),d=Math.floor(Object(v.e)(t,h,o));return t[d]>u&&d<t.length-1?t[d+1]:t[d]}}}(E,h,!g&&w,d):x(n,r,h,!g&&w,d)}else{var C=(m?Math.max(Object(y.B)(m),Object(y.x)(m)):360*c.a[o.b.DEGREES]/p.getMetersPerUnit())/l.b/Math.pow(2,0),S=C/Math.pow(2,28);void 0!==(n=t.maxResolution)?i=0:n=C/Math.pow(s,i),void 0===(r=t.minResolution)&&(r=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(s,a):C/Math.pow(s,a):S),a=i+Math.floor(Math.log(n/r)/Math.log(s)),r=n/Math.pow(s,a-i),e=t.constrainResolution?function(t,e,n,r,i,o){return function(a,s,l,c){if(void 0!==a){var u=i?_(e,i,l,o):e,h=void 0!==n?n:0;if(c)return void 0===r||r?b(a,u,h):Object(f.b)(a,h,u);var d=Math.ceil(Math.log(e/u)/Math.log(t)-1e-9),p=-s*(.5-1e-9)+.5,m=Math.min(u,a),g=Math.floor(Math.log(e/m)/Math.log(t)+p),y=Math.max(d,g),v=e/Math.pow(t,y);return Object(f.b)(v,h,u)}}}(s,n,r,h,!g&&w,d):x(n,r,h,!g&&w,d)}return{constraint:e,maxResolution:n,minResolution:r,minZoom:i,zoomFactor:s}}(t);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=r.minZoom;var i=function(t){if(void 0!==t.extent){var e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return m(t.extent,t.constrainOnlyCenter,e)}var n=Object(c.e)(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&n.isGlobal()){var r=n.getExtent().slice();return r[0]=-1/0,r[2]=1/0,m(r,!1,!1)}return g}(t),a=r.constraint,u=function(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?Object(E.b)():!1===e?E.d:"number"==typeof e?Object(E.a)(e):E.d}return E.c}(t);this.constraints_={center:i,resolution:a,rotation:u},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)},Object.defineProperty(e.prototype,"padding",{get:function(){return this.padding_},set:function(t){var e=this.padding_;this.padding_=t;var n=this.getCenter();if(n){var r=t||[0,0,0,0];e=e||[0,0,0,0];var i=this.getResolution(),o=i/2*(r[3]-e[3]+e[1]-r[1]),a=i/2*(r[0]-e[0]+e[2]-r[2]);this.setCenterInternal([n[0]+o,n[1]-a])}},enumerable:!1,configurable:!0}),e.prototype.getUpdatedOptions_=function(t){var e=this.getProperties();return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object(p.a)({},e,t)},e.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var e=new Array(arguments.length),n=0;n<e.length;++n){var r=arguments[n];r.center&&((r=Object(p.a)({},r)).center=Object(c.i)(r.center,this.getProjection())),r.anchor&&((r=Object(p.a)({},r)).anchor=Object(c.i)(r.anchor,this.getProjection())),e[n]=r}this.animateInternal.apply(this,e)},e.prototype.animateInternal=function(t){var e,n=arguments.length;n>1&&"function"==typeof arguments[n-1]&&(e=arguments[n-1],--n);for(var r=0;r<n&&!this.isDef();++r){var i=arguments[r];i.center&&this.setCenterInternal(i.center),void 0!==i.zoom?this.setZoom(i.zoom):i.resolution&&this.setResolution(i.resolution),void 0!==i.rotation&&this.setRotation(i.rotation)}if(r!==n){for(var o=Date.now(),s=this.targetCenter_.slice(),l=this.targetResolution_,c=this.targetRotation_,u=[];r<n;++r){var h=arguments[r],d={start:o,complete:!1,anchor:h.anchor,duration:void 0!==h.duration?h.duration:1e3,easing:h.easing||C.c,callback:e};if(h.center&&(d.sourceCenter=s,d.targetCenter=h.center.slice(),s=d.targetCenter),void 0!==h.zoom?(d.sourceResolution=l,d.targetResolution=this.getResolutionForZoom(h.zoom),l=d.targetResolution):h.resolution&&(d.sourceResolution=l,d.targetResolution=h.resolution,l=d.targetResolution),void 0!==h.rotation){d.sourceRotation=c;var p=Object(f.f)(h.rotation-c+Math.PI,2*Math.PI)-Math.PI;d.targetRotation=c+p,c=d.targetRotation}A(d)?d.complete=!0:o+=d.duration,u.push(d)}this.animations_.push(u),this.setHint(a.a.ANIMATING,1),this.updateAnimations_()}else e&&I(e,!0)},e.prototype.getAnimating=function(){return this.hints_[a.a.ANIMATING]>0},e.prototype.getInteracting=function(){return this.hints_[a.a.INTERACTING]>0},e.prototype.cancelAnimations=function(){var t;this.setHint(a.a.ANIMATING,-this.hints_[a.a.ANIMATING]);for(var e=0,n=this.animations_.length;e<n;++e){var r=this.animations_[e];if(r[0].callback&&I(r[0].callback,!1),!t)for(var i=0,o=r.length;i<o;++i){var s=r[i];if(!s.complete){t=s.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN},e.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,n=this.animations_.length-1;n>=0;--n){for(var r=this.animations_[n],i=!0,o=0,s=r.length;o<s;++o){var l=r[o];if(!l.complete){var c=t-l.start,u=l.duration>0?c/l.duration:1;u>=1?(l.complete=!0,u=1):i=!1;var h=l.easing(u);if(l.sourceCenter){var d=l.sourceCenter[0],p=l.sourceCenter[1],m=l.targetCenter[0],g=l.targetCenter[1];this.nextCenter_=l.targetCenter;var y=d+h*(m-d),v=p+h*(g-p);this.targetCenter_=[y,v]}if(l.sourceResolution&&l.targetResolution){var _=1===h?l.targetResolution:l.sourceResolution+h*(l.targetResolution-l.sourceResolution);if(l.anchor){var b=this.getViewportSize_(this.getRotation()),x=this.constraints_.resolution(_,0,b,!0);this.targetCenter_=this.calculateCenterZoom(x,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=_,this.applyTargetState_(!0)}if(void 0!==l.sourceRotation&&void 0!==l.targetRotation){var w=1===h?Object(f.f)(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+h*(l.targetRotation-l.sourceRotation);if(l.anchor){var E=this.constraints_.rotation(w,!0);this.targetCenter_=this.calculateCenterRotate(E,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=w}if(this.applyTargetState_(!0),e=!0,!l.complete)break}}if(i){this.animations_[n]=null,this.setHint(a.a.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var C=r[0].callback;C&&I(C,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},e.prototype.calculateCenterRotate=function(t,e){var n,r=this.getCenterInternal();return void 0!==r&&(n=[r[0]-e[0],r[1]-e[1]],Object(h.d)(n,t-this.getRotation()),Object(h.a)(n,e)),n},e.prototype.calculateCenterZoom=function(t,e){var n,r=this.getCenterInternal(),i=this.getResolution();void 0!==r&&void 0!==i&&(n=[e[0]-t*(e[0]-r[0])/i,e[1]-t*(e[1]-r[1])/i]);return n},e.prototype.getViewportSize_=function(t){var e=this.viewportSize_;if(t){var n=e[0],r=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(r*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(r*Math.cos(t))]}return e},e.prototype.setViewportSize=function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},e.prototype.getCenter=function(){var t=this.getCenterInternal();return t?Object(c.n)(t,this.getProjection()):t},e.prototype.getCenterInternal=function(){return this.get(s.CENTER)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getConstrainResolution=function(){return this.get("constrainResolution")},e.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){var e=this.calculateExtentInternal(t);return Object(c.o)(e,this.getProjection())},e.prototype.calculateExtentInternal=function(t){var e=t||this.getViewportSizeMinusPadding_(),n=this.getCenterInternal();Object(d.a)(n,1);var r=this.getResolution();Object(d.a)(void 0!==r,2);var i=this.getRotation();return Object(d.a)(void 0!==i,3),Object(y.w)(n,r,i,e)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(s.RESOLUTION)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,e){return this.getResolutionForExtentInternal(Object(c.j)(t,this.getProjection()),e)},e.prototype.getResolutionForExtentInternal=function(t,e){var n=e||this.getViewportSizeMinusPadding_(),r=Object(y.B)(t)/n[0],i=Object(y.x)(t)/n[1];return Math.max(r,i)},e.prototype.getResolutionForValueFunction=function(t){var e=t||2,n=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,i=Math.log(n/r)/Math.log(e);return function(t){return n/Math.pow(e,t*i)}},e.prototype.getRotation=function(){return this.get(s.ROTATION)},e.prototype.getValueForResolutionFunction=function(t){var e=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,i=Math.log(n/r)/e;return function(t){return Math.log(n/t)/e/i}},e.prototype.getViewportSizeMinusPadding_=function(t){var e=this.getViewportSize_(t),n=this.padding_;return n&&(e=[e[0]-n[1]-n[3],e[1]-n[0]-n[2]]),e},e.prototype.getState=function(){var t=this.getProjection(),e=this.getResolution(),n=this.getRotation(),r=this.getCenterInternal(),i=this.padding_;if(i){var o=this.getViewportSizeMinusPadding_();r=M(r,this.getViewportSize_(),[o[0]/2+i[3],o[1]/2+i[0]],e,n)}return{center:r.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},e.prototype.getZoomForResolution=function(t){var e,n,r=this.minZoom_||0;if(this.resolutions_){var i=Object(v.e)(this.resolutions_,t,1);r=i,e=this.resolutions_[i],n=i==this.resolutions_.length-1?2:e/this.resolutions_[i+1]}else e=this.maxResolution_,n=this.zoomFactor_;return r+Math.log(e/t)/Math.log(n)},e.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var e=Object(f.b)(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(n,Object(f.b)(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},e.prototype.fit=function(t,e){var n;if(Object(d.a)(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t)){Object(d.a)(!Object(y.E)(t),25);var r=Object(c.j)(t,this.getProjection());n=Object(S.b)(r)}else if(t.getType()===i.a.CIRCLE){r=Object(c.j)(t.getExtent(),this.getProjection());(n=Object(S.b)(r)).rotate(this.getRotation(),Object(y.u)(r))}else{var o=Object(c.m)();n=o?t.clone().transform(o,this.getProjection()):t}this.fitInternal(n,e)},e.prototype.rotatedExtentForGeometry=function(t){for(var e=this.getRotation(),n=Math.cos(e),r=Math.sin(-e),i=t.getFlatCoordinates(),o=t.getStride(),a=1/0,s=1/0,l=-1/0,c=-1/0,u=0,h=i.length;u<h;u+=o){var d=i[u]*n-i[u+1]*r,p=i[u]*r+i[u+1]*n;a=Math.min(a,d),s=Math.min(s,p),l=Math.max(l,d),c=Math.max(c,p)}return[a,s,l,c]},e.prototype.fitInternal=function(t,e){var n=e||{},r=n.size;r||(r=this.getViewportSizeMinusPadding_());var i,o=void 0!==n.padding?n.padding:[0,0,0,0],a=void 0!==n.nearest&&n.nearest;i=void 0!==n.minResolution?n.minResolution:void 0!==n.maxZoom?this.getResolutionForZoom(n.maxZoom):0;var s=this.rotatedExtentForGeometry(t),l=this.getResolutionForExtentInternal(s,[r[0]-o[1]-o[3],r[1]-o[0]-o[2]]);l=isNaN(l)?i:Math.max(l,i),l=this.getConstrainedResolution(l,a?0:1);var c=this.getRotation(),h=Math.sin(c),d=Math.cos(c),p=Object(y.u)(s);p[0]+=(o[1]-o[3])/2*l,p[1]+=(o[0]-o[2])/2*l;var f=p[0]*d-p[1]*h,m=p[1]*d+p[0]*h,g=this.getConstrainedCenter([f,m],l),v=n.callback?n.callback:u.c;void 0!==n.duration?this.animateInternal({resolution:l,center:g,duration:n.duration,easing:n.easing},v):(this.targetResolution_=l,this.targetCenter_=g,this.applyTargetState_(!1,!0),I(v,!0))},e.prototype.centerOn=function(t,e,n){this.centerOnInternal(Object(c.i)(t,this.getProjection()),e,n)},e.prototype.centerOnInternal=function(t,e,n){this.setCenterInternal(M(t,e,n,this.getResolution(),this.getRotation()))},e.prototype.calculateCenterShift=function(t,e,n,r){var i,o=this.padding_;if(o&&t){var a=this.getViewportSizeMinusPadding_(-n),s=M(t,r,[a[0]/2+o[3],a[1]/2+o[0]],e,n);i=[t[0]-s[0],t[1]-s[1]]}return i},e.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},e.prototype.adjustCenter=function(t){var e=Object(c.n)(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustCenterInternal=function(t){var e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustResolution=function(t,e){var n=e&&Object(c.i)(e,this.getProjection());this.adjustResolutionInternal(t,n)},e.prototype.adjustResolutionInternal=function(t,e){var n=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),i=this.constraints_.resolution(this.targetResolution_*t,0,r,n);e&&(this.targetCenter_=this.calculateCenterZoom(i,e)),this.targetResolution_*=t,this.applyTargetState_()},e.prototype.adjustZoom=function(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)},e.prototype.adjustRotation=function(t,e){e&&(e=Object(c.i)(e,this.getProjection())),this.adjustRotationInternal(t,e)},e.prototype.adjustRotationInternal=function(t,e){var n=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+t,n);e&&(this.targetCenter_=this.calculateCenterRotate(r,e)),this.targetRotation_+=t,this.applyTargetState_()},e.prototype.setCenter=function(t){this.setCenterInternal(Object(c.i)(t,this.getProjection()))},e.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},e.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},e.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e.prototype.applyTargetState_=function(t,e){var n=this.getAnimating()||this.getInteracting()||e,r=this.constraints_.rotation(this.targetRotation_,n),i=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,0,i,n),a=this.constraints_.center(this.targetCenter_,o,i,n,this.calculateCenterShift(this.targetCenter_,o,r,i));this.get(s.ROTATION)!==r&&this.set(s.ROTATION,r),this.get(s.RESOLUTION)!==o&&(this.set(s.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),a&&this.get(s.CENTER)&&Object(h.b)(this.get(s.CENTER),a)||this.set(s.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0},e.prototype.resolveConstraints=function(t,e,n){var r=void 0!==t?t:200,i=e||0,o=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(o),s=this.constraints_.resolution(this.targetResolution_,i,a),l=this.constraints_.center(this.targetCenter_,s,a,!1,this.calculateCenterShift(this.targetCenter_,s,o,a));if(0===r&&!this.cancelAnchor_)return this.targetResolution_=s,this.targetRotation_=o,this.targetCenter_=l,void this.applyTargetState_();var c=n||(0===r?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,this.getResolution()===s&&this.getRotation()===o&&this.getCenterInternal()&&Object(h.b)(this.getCenterInternal(),l)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:l,resolution:s,duration:r,easing:C.b,anchor:c}))},e.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(a.a.INTERACTING,1)},e.prototype.endInteraction=function(t,e,n){var r=n&&Object(c.i)(n,this.getProjection());this.endInteractionInternal(t,e,r)},e.prototype.endInteractionInternal=function(t,e,n){this.setHint(a.a.INTERACTING,-1),this.resolveConstraints(t,e,n)},e.prototype.getConstrainedCenter=function(t,e){var n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)},e.prototype.getConstrainedZoom=function(t,e){var n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))},e.prototype.getConstrainedResolution=function(t,e){var n=e||0,r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,n,r)},e}(r.a);function I(t,e){setTimeout((function(){t(e)}),0)}function A(t){return!(t.sourceCenter&&t.targetCenter&&!Object(h.b)(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}function M(t,e,n,r,i){var o=Math.cos(-i),a=Math.sin(-i),s=t[0]*o-t[1]*a,l=t[1]*o+t[0]*a;return[(s+=(e[0]/2-n[0])*r)*o-(l+=(n[1]-e[1]/2)*r)*(a=-a),l*o+s*a]}e.a=O},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){"use strict";var r,i=n(106),o=n(52),a=n(27),s=n(20),l=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),c=function(t){function e(e){var n=t.call(this)||this;return n.eventTarget_=e,n.pendingRemovals_=null,n.dispatching_=null,n.listeners_=null,n}return l(e,t),e.prototype.addEventListener=function(t,e){if(t&&e){var n=this.listeners_||(this.listeners_={}),r=n[t]||(n[t]=[]);-1===r.indexOf(e)&&r.push(e)}},e.prototype.dispatchEvent=function(t){var e="string"==typeof t?new o.a(t):t,n=e.type;e.target||(e.target=this.eventTarget_||this);var r,i=this.listeners_&&this.listeners_[n];if(i){var s=this.dispatching_||(this.dispatching_={}),l=this.pendingRemovals_||(this.pendingRemovals_={});n in s||(s[n]=0,l[n]=0),++s[n];for(var c=0,u=i.length;c<u;++c)if(!1===(r="handleEvent"in i[c]?i[c].handleEvent(e):i[c].call(this,e))||e.propagationStopped){r=!1;break}if(--s[n],0===s[n]){var h=l[n];for(delete l[n];h--;)this.removeEventListener(n,a.c);delete s[n]}return r}},e.prototype.disposeInternal=function(){this.listeners_&&Object(s.b)(this.listeners_)},e.prototype.getListeners=function(t){return this.listeners_&&this.listeners_[t]||void 0},e.prototype.hasListener=function(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)},e.prototype.removeEventListener=function(t,e){var n=this.listeners_&&this.listeners_[t];if(n){var r=n.indexOf(e);-1!==r&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[r]=a.c,++this.pendingRemovals_[t]):(n.splice(r,1),0===n.length&&delete this.listeners_[t]))}},e}(i.a);e.a=c},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o})),n.d(e,"e",(function(){return a})),n.d(e,"c",(function(){return l})),n.d(e,"d",(function(){return c}));var r=n(10);function i(t,e,n,i,o,a,s){var l=(n-e)/i;if(l<3){for(;e<n;e+=i)a[s++]=t[e],a[s++]=t[e+1];return s}var c=new Array(l);c[0]=1,c[l-1]=1;for(var u=[e,n-i],h=0;u.length>0;){for(var d=u.pop(),p=u.pop(),f=0,m=t[p],g=t[p+1],y=t[d],v=t[d+1],_=p+i;_<d;_+=i){var b=t[_],x=t[_+1],w=Object(r.h)(b,x,m,g,y,v);w>f&&(h=_,f=w)}f>o&&(c[(h-e)/i]=1,p+i<h&&u.push(p,h),h+i<d&&u.push(h,d))}for(_=0;_<l;++_)c[_]&&(a[s++]=t[e+_*i],a[s++]=t[e+_*i+1]);return s}function o(t,e,n,r,o,a,s,l){for(var c=0,u=n.length;c<u;++c){var h=n[c];s=i(t,e,h,r,o,a,s),l.push(s),e=h}return s}function a(t,e){return e*Math.round(t/e)}function s(t,e,n,r,i,o,s){if(e==n)return s;var l,c,u=a(t[e],i),h=a(t[e+1],i);e+=r,o[s++]=u,o[s++]=h;do{if(l=a(t[e],i),c=a(t[e+1],i),(e+=r)==n)return o[s++]=l,o[s++]=c,s}while(l==u&&c==h);for(;e<n;){var d=a(t[e],i),p=a(t[e+1],i);if(e+=r,d!=l||p!=c){var f=l-u,m=c-h,g=d-u,y=p-h;f*y==m*g&&(f<0&&g<f||f==g||f>0&&g>f)&&(m<0&&y<m||m==y||m>0&&y>m)?(l=d,c=p):(o[s++]=l,o[s++]=c,u=l,h=c,l=d,c=p)}}return o[s++]=l,o[s++]=c,s}function l(t,e,n,r,i,o,a,l){for(var c=0,u=n.length;c<u;++c){var h=n[c];a=s(t,e,h,r,i,o,a),l.push(a),e=h}return a}function c(t,e,n,r,i,o,a,s){for(var c=0,u=n.length;c<u;++c){var h=n[c],d=[];a=l(t,e,h,r,i,o,a,d),s.push(d),e=h[h.length-1]}return a}},function(t,e,n){"use strict";n.d(e,"b",(function(){return f}));var r,i=n(159),o=n(14),a=n(26),s=n(70),l=n(69),c=n(16),u=n(20),h=n(15),d=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),p=function(t){function e(e){var n=this,r=Object(u.a)({},e);delete r.source,(n=t.call(this,r)||this).on,n.once,n.un,n.mapPrecomposeKey_=null,n.mapRenderKey_=null,n.sourceChangeKey_=null,n.renderer_=null,e.render&&(n.render=e.render),e.map&&n.setMap(e.map),n.addChangeListener(a.a.SOURCE,n.handleSourcePropertyChange_);var i=e.source?e.source:null;return n.setSource(i),n}return d(e,t),e.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},e.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},e.prototype.getSource=function(){return this.get(a.a.SOURCE)||null},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():l.a.UNDEFINED},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(Object(h.c)(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=Object(h.a)(t,o.a.CHANGE,this.handleSourceChange_,this)),this.changed()},e.prototype.getFeatures=function(t){return this.renderer_?this.renderer_.getFeatures(t):new Promise((function(t){return t([])}))},e.prototype.render=function(t,e){var n=this.getRenderer();if(n.prepareFrame(t))return n.renderFrame(t,e)},e.prototype.setMapInternal=function(t){this.set(a.a.MAP,t)},e.prototype.getMapInternal=function(){return this.get(a.a.MAP)},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&(Object(h.c)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Object(h.c)(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Object(h.a)(t,s.a.PRECOMPOSE,(function(t){var e=t.frameState.layerStatesArray,n=this.getLayerState(!1);Object(c.a)(!e.some((function(t){return t.layer===n.layer})),67),e.push(n)}),this),this.mapRenderKey_=Object(h.a)(this,o.a.CHANGE,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(a.a.SOURCE,t)},e.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},e.prototype.hasRenderer=function(){return!!this.renderer_},e.prototype.createRenderer=function(){return null},e.prototype.disposeInternal=function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),t.prototype.disposeInternal.call(this)},e}(i.a);function f(t,e){if(!t.visible)return!1;var n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;var r=e.zoom;return r>t.minZoom&&r<=t.maxZoom}e.a=p},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return s}));var r=n(4);function i(t,e,n,i,a){return!Object(r.r)(a,(function(r){return!o(t,e,n,i,r[0],r[1])}))}function o(t,e,n,r,i,o){for(var a=0,s=t[n-r],l=t[n-r+1];e<n;e+=r){var c=t[e],u=t[e+1];l<=o?u>o&&(c-s)*(o-l)-(i-s)*(u-l)>0&&a++:u<=o&&(c-s)*(o-l)-(i-s)*(u-l)<0&&a--,s=c,l=u}return 0!==a}function a(t,e,n,r,i,a){if(0===n.length)return!1;if(!o(t,e,n[0],r,i,a))return!1;for(var s=1,l=n.length;s<l;++s)if(o(t,n[s-1],n[s],r,i,a))return!1;return!0}function s(t,e,n,r,i,o){if(0===n.length)return!1;for(var s=0,l=n.length;s<l;++s){var c=n[s];if(a(t,e,c,r,i,o))return!0;e=c[c.length-1]}return!1}},function(t,e,n){"use strict";e.a={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"}},function(t,e,n){"use strict";e.a={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"}},function(t,e,n){"use strict";n.d(e,"b",(function(){return E}));var r,i=n(22),o=n(7),a=n(53),s=n(54),l=n(4),c=n(58),u=n(66),h=n(36),d=n(107),p=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),f=function(t){function e(e,n){var r=t.call(this)||this;return r.maxDelta_=-1,r.maxDeltaRevision_=-1,void 0===n||Array.isArray(e[0])?r.setCoordinates(e,n):r.setFlatCoordinates(n,e),r}return p(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,n,r){return r<Object(l.e)(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(s.e)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(s.d)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,r))},e.prototype.getArea=function(){return Object(d.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return Object(h.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[];return n.length=Object(u.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,i.a.XY)},e.prototype.getType=function(){return o.a.LINEAR_RING},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(c.b)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(a.a),m=n(95),g=n(19),y=n(94),v=n(86),_=n(78),b=n(68),x=(n(10),n(123),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),w=function(t){function e(e,n,r){var i=t.call(this)||this;return i.ends_=[],i.flatInteriorPointRevision_=-1,i.flatInteriorPoint_=null,i.maxDelta_=-1,i.maxDeltaRevision_=-1,i.orientedRevision_=-1,i.orientedFlatCoordinates_=null,void 0!==n&&r?(i.setFlatCoordinates(n,e),i.ends_=r):i.setCoordinates(e,n),i}return x(e,t),e.prototype.appendLinearRing=function(t){this.flatCoordinates?Object(g.c)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,r){return r<Object(l.e)(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(s.a)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(s.b)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,r))},e.prototype.containsXY=function(t,e){return Object(b.c)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return Object(d.b)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),Object(_.d)(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,Object(h.b)(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=Object(l.u)(this.getExtent());this.flatInteriorPoint_=Object(y.a)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new m.a(this.getFlatInteriorPoint(),i.a.XYM)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new f(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,n=this.ends_,r=[],i=0,o=0,a=n.length;o<a;++o){var s=n[o],l=new f(e.slice(i,s),t);r.push(l),i=s}return r},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Object(_.b)(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Object(_.d)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],r=[];return n.length=Object(u.c)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),n,0,r),new e(n,i.a.XY,r)},e.prototype.getType=function(){return o.a.POLYGON},e.prototype.intersectsExtent=function(t){return Object(v.c)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=Object(c.c)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()},e}(a.a);e.a=w;function E(t){var e=t[0],n=t[1],r=t[2],o=t[3],a=[e,n,e,o,r,o,r,n,e,n];return new w(a,i.a.XY,[a.length])}},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return a}));n(20);var r={};function i(){r={}}function o(t,e,n){var i=t.getCode(),o=e.getCode();i in r||(r[i]={}),r[i][o]=n}function a(t,e){var n;return t in r&&e in r[t]&&(n=r[t][e]),n}},function(t,e,n){var r=n(201),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,n){"use strict";var r=n(28),i=function(){function t(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.canWrapX_},t.prototype.getCode=function(){return this.code_},t.prototype.getExtent=function(){return this.extent_},t.prototype.getUnits=function(){return this.units_},t.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||r.a[this.units_]},t.prototype.getWorldExtent=function(){return this.worldExtent_},t.prototype.getAxisOrientation=function(){return this.axisOrientation_},t.prototype.isGlobal=function(){return this.global_},t.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},t.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},t.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},t.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},t.prototype.setWorldExtent=function(t){this.worldExtent_=t},t.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},t.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},t}();e.a=i},function(t,e,n){var r=n(227),i=n(122),o=n(116),a=n(51),s=n(90),l=n(118),c=n(140),u=n(141),h=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(s(t)&&(a(t)||"string"==typeof t||"function"==typeof t.splice||l(t)||u(t)||o(t)))return!t.length;var e=i(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(c(t))return!r(t).length;for(var n in t)if(h.call(t,n))return!1;return!0}},function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return o})),n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return s}));var r=n(10);function i(t){return void 0!==t?0:void 0}function o(t){return void 0!==t?t:void 0}function a(t){var e=2*Math.PI/t;return function(t,n){return n?t:void 0!==t?t=Math.floor(t/e+.5)*e:void 0}}function s(t){var e=t||Object(r.j)(5);return function(t,n){return n?t:void 0!==t?Math.abs(t)<=e?0:t:void 0}}},function(t,e,n){"use strict";function r(t,e,n,r){for(;e<n-r;){for(var i=0;i<r;++i){var o=t[e+i];t[e+i]=t[n-r+i],t[n-r+i]=o}e+=r,n-=r}}function i(t,e,n,r){for(var i=0,o=t[n-r],a=t[n-r+1];e<n;e+=r){var s=t[e],l=t[e+1];i+=(s-o)*(l+a),o=s,a=l}return 0===i?void 0:i>0}function o(t,e,n,r,o){for(var a=void 0!==o&&o,s=0,l=n.length;s<l;++s){var c=n[s],u=i(t,e,c,r);if(0===s){if(a&&u||!a&&!u)return!1}else if(a&&!u||!a&&u)return!1;e=c}return!0}function a(t,e,n,r,i){for(var a=0,s=n.length;a<s;++a){var l=n[a];if(!o(t,e,l,r,i))return!1;l.length&&(e=l[l.length-1])}return!0}function s(t,e,n,o,a){for(var s=void 0!==a&&a,l=0,c=n.length;l<c;++l){var u=n[l],h=i(t,e,u,o);(0===l?s&&h||!s&&!h:s&&!h||!s&&h)&&r(t,e,u,o),e=u}return e}function l(t,e,n,r,i){for(var o=0,a=n.length;o<a;++o)e=s(t,e,n[o],r,i);return e}n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return s})),n.d(e,"e",(function(){return l}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=function(){function t(t,e,n,r){this.minX=t,this.maxX=e,this.minY=n,this.maxY=r}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},t}();function i(t,e,n,i,o){return void 0!==o?(o.minX=t,o.maxX=e,o.minY=n,o.maxY=i,o):new r(t,e,n,i)}e.b=r},function(t,e,n){"use strict";e.a={FRACTION:"fraction",PIXELS:"pixels"}},function(t,e,n){"use strict";e.a={PROPERTYCHANGE:"propertychange"}},function(t,e,n){"use strict";n.d(e,"d",(function(){return u})),n.d(e,"e",(function(){return h})),n.d(e,"b",(function(){return d})),n.d(e,"a",(function(){return f})),n.d(e,"c",(function(){return m}));var r=n(96),i=n(97),o=n(28),a=n(93),s=n(12),l=n(4),c=n(32);function u(t){var e=t.getDefaultTileGrid();return e||(e=f(t),t.setDefaultTileGrid(e)),e}function h(t,e,n){var r=e[0],i=t.getTileCoordCenter(e),o=m(n);if(Object(l.f)(o,i))return e;var a=Object(l.B)(o),s=Math.ceil((o[0]-i[0])/a);return i[0]+=a*s,t.getTileCoordForCoordAndZ(i,r)}function d(t){var e=t||{},n=e.extent||Object(s.k)("EPSG:3857").getExtent(),r={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:p(n,e.maxZoom,e.tileSize,e.maxResolution)};return new i.a(r)}function p(t,e,n,r){for(var i=void 0!==e?e:a.a,o=Object(l.x)(t),s=Object(l.B)(t),u=Object(c.c)(void 0!==n?n:a.b),h=r>0?r:Math.max(s/u[0],o/u[1]),d=i+1,p=new Array(d),f=0;f<d;++f)p[f]=h/Math.pow(2,f);return p}function f(t,e,n,o){return function(t,e,n,o){var a=void 0!==o?o:r.a.TOP_LEFT,s=p(t,e,n);return new i.a({extent:t,origin:Object(l.v)(t,a),resolutions:s,tileSize:n})}(m(t),e,n,o)}function m(t){var e=(t=Object(s.k)(t)).getExtent();if(!e){var n=180*s.a[o.b.DEGREES]/t.getMetersPerUnit();e=Object(l.k)(-n,-n,n,n)}return e}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return s}));var r=n(19),i=n(10);function o(t,e,n,o,a,s,l){var c,u,h=(n-e)/o;if(1===h)c=e;else if(2===h)c=e,u=a;else if(0!==h){for(var d=t[e],p=t[e+1],f=0,m=[0],g=e+o;g<n;g+=o){var y=t[g],v=t[g+1];f+=Math.sqrt((y-d)*(y-d)+(v-p)*(v-p)),m.push(f),d=y,p=v}var _=a*f,b=Object(r.a)(m,_);b<0?(u=(_-m[-b-2])/(m[-b-1]-m[-b-2]),c=e+(-b-2)*o):c=e+b*o}var x=l>1?l:2,w=s||new Array(x);for(g=0;g<x;++g)w[g]=void 0===c?NaN:void 0===u?t[c+g]:Object(i.e)(t[c+g],t[c+o+g],u);return w}function a(t,e,n,r,o,a){if(n==e)return null;var s;if(o<t[e+r-1])return a?((s=t.slice(e,e+r))[r-1]=o,s):null;if(t[n-1]<o)return a?((s=t.slice(n-r,n))[r-1]=o,s):null;if(o==t[e+r-1])return t.slice(e,e+r);for(var l=e/r,c=n/r;l<c;){var u=l+c>>1;o<t[(u+1)*r-1]?c=u:l=u+1}var h=t[l*r-1];if(o==h)return t.slice((l-1)*r,(l-1)*r+r);var d=(o-h)/(t[(l+1)*r-1]-h);s=[];for(var p=0;p<r-1;++p)s.push(Object(i.e)(t[(l-1)*r+p],t[l*r+p],d));return s.push(o),s}function s(t,e,n,r,i,o,s){if(s)return a(t,e,n[n.length-1],r,i,o);var l;if(i<t[r-1])return o?((l=t.slice(0,r))[r-1]=i,l):null;if(t[t.length-1]<i)return o?((l=t.slice(t.length-r))[r-1]=i,l):null;for(var c=0,u=n.length;c<u;++c){var h=n[c];if(e!=h){if(i<t[e+r-1])return null;if(i<=t[h-1])return a(t,e,h,r,i,!1);e=h}}return null}},function(t,e){t.exports=ReactDOM},function(t,e,n){"use strict";var r=n(292),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(t){return r.isMemo(t)?a:s[t.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var c=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;t.exports=function t(e,n,r){if("string"!=typeof n){if(f){var i=p(n);i&&i!==f&&t(e,i,r)}var a=u(n);h&&(a=a.concat(h(n)));for(var s=l(e),m=l(n),g=0;g<a.length;++g){var y=a[g];if(!(o[y]||r&&r[y]||m&&m[y]||s&&s[y])){var v=d(n,y);try{c(e,y,v)}catch(t){}}}}return e}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return l})),n.d(e,"d",(function(){return c}));var r=n(4),i=n(154),o=n(68);function a(t,e,n,o,a){var s=Object(r.q)(Object(r.j)(),t,e,n,o);return!!Object(r.C)(a,s)&&(!!Object(r.g)(a,s)||(s[0]>=a[0]&&s[2]<=a[2]||(s[1]>=a[1]&&s[3]<=a[3]||Object(i.a)(t,e,n,o,(function(t,e){return Object(r.D)(a,t,e)})))))}function s(t,e,n,r,i){for(var o=0,s=n.length;o<s;++o){if(a(t,e,n[o],r,i))return!0;e=n[o]}return!1}function l(t,e,n,r,i){if(!function(t,e,n,r,i){return!!a(t,e,n,r,i)||(!!Object(o.b)(t,e,n,r,i[0],i[1])||(!!Object(o.b)(t,e,n,r,i[0],i[3])||(!!Object(o.b)(t,e,n,r,i[2],i[1])||!!Object(o.b)(t,e,n,r,i[2],i[3]))))}(t,e,n[0],r,i))return!1;if(1===n.length)return!0;for(var s=1,l=n.length;s<l;++s)if(Object(o.a)(t,n[s-1],n[s],r,i)&&!a(t,n[s-1],n[s],r,i))return!1;return!0}function c(t,e,n,r,i){for(var o=0,a=n.length;o<a;++o){var s=n[o];if(l(t,e,s,r,i))return!0;e=s[s.length-1]}return!1}},function(t,e,n){(function(e){t.exports=function(){"use strict";var t,n,r;function i(e,i){if(t)if(n){var o="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+t+")(sharedChunk); ("+n+")(sharedChunk); self.onerror = null;",a={};t(a),r=i(a),"undefined"!=typeof window&&(r.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}else n=i;else t=i}return i(0,(function(t){var n="2.6.1",r=i;function i(t,e,n,r){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=n,this.p2y=r}i.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},i.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},i.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},i.prototype.solveCurveX=function(t,e){var n,r,i,o,a;for(void 0===e&&(e=1e-6),i=t,a=0;a<8;a++){if(o=this.sampleCurveX(i)-t,Math.abs(o)<e)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if((i=t)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){if(o=this.sampleCurveX(i),Math.abs(o-t)<e)return i;t>o?n=i:r=i,i=.5*(r-n)+n}return i},i.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var o=a;function a(t,e){this.x=t,this.y=e}a.prototype={clone:function(){return new a(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=n*this.x+e*this.y;return this.x=e*this.x-n*this.y,this.y=r,this},_rotateAround:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=e.x+n*(this.x-e.x)-r*(this.y-e.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},a.convert=function(t){return t instanceof a?t:Array.isArray(t)?new a(t[0],t[1]):t};var s="undefined"!=typeof self?self:{};const l=Math.pow(2,53)-1,c=Math.PI/180,u=180/Math.PI;function h(t){return t*c}function d(t){return t*u}const p=[[0,0],[1,0],[1,1],[0,1]];function f(t){if(t<=0)return 0;if(t>=1)return 1;const e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function m(t,e,n,i){const o=new r(t,e,n,i);return function(t){return o.solve(t)}}const g=m(.25,.1,.25,1);function y(t,e,n){return Math.min(n,Math.max(e,t))}function v(t,e,n){const r=n-e,i=((t-e)%r+r)%r+e;return i===e?n:i}function _(t,e,n){if(!t.length)return n(null,[]);let r=t.length;const i=new Array(t.length);let o=null;t.forEach((t,a)=>{e(t,(t,e)=>{t&&(o=t),i[a]=e,0==--r&&n(o,i)})})}function b(t){const e=[];for(const n in t)e.push(t[n]);return e}function x(t,...e){for(const n of e)for(const e in n)t[e]=n[e];return t}let w=1;function E(){return w++}function C(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function S(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function T(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function O(t,e){t.forEach(t=>{e[t]&&(e[t]=e[t].bind(e))})}function I(t,e){return-1!==t.indexOf(e,t.length-e.length)}function A(t,e,n){const r={};for(const i in t)r[i]=e.call(n||this,t[i],i,t);return r}function M(t,e,n){const r={};for(const i in t)e.call(n||this,t[i],i,t)&&(r[i]=t[i]);return r}function k(t){return Array.isArray(t)?t.map(k):"object"==typeof t&&t?A(t,k):t}const P={};function D(t){P[t]||("undefined"!=typeof console&&console.warn(t),P[t]=!0)}function R(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function L(t){let e=0;for(let n,r,i=0,o=t.length,a=o-1;i<o;a=i++)n=t[i],r=t[a],e+=(r.x-n.x)*(n.y+r.y);return e}function N(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function j(t){const e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(t,n,r,i)=>{const o=r||i;return e[n]=!o||o.toLowerCase(),""}),e["max-age"]){const t=parseInt(e["max-age"],10);isNaN(t)?delete e["max-age"]:e["max-age"]=t}return e}let F,z,B,U=null;function G(t){if(null==U){const e=t.navigator?t.navigator.userAgent:null;U=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return U}function V(t){try{const e=s[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}}const q={now:()=>void 0!==B?B:s.performance.now(),setNow(t){B=t},restoreNow(){B=void 0},frame(t){const e=s.requestAnimationFrame(t);return{cancel:()=>s.cancelAnimationFrame(e)}},getImageData(t,e=0){const n=s.document.createElement("canvas"),r=n.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return n.width=t.width,n.height=t.height,r.drawImage(t,0,0,t.width,t.height),r.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:t=>(F||(F=s.document.createElement("a")),F.href=t,F.href),get devicePixelRatio(){return s.devicePixelRatio},get prefersReducedMotion(){return!!s.matchMedia&&(null==z&&(z=s.matchMedia("(prefers-reduced-motion: reduce)")),z.matches)}};let H;const W={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==H){const t=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{H=null!=e.env.API_URL_REGEX?new RegExp(e.env.API_URL_REGEX):t}catch(e){H=t}}return H},get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Z={supported:!1,testSupport:function(t){!Y&&K&&(X?J(t):$=t)}};let $,K,Y=!1,X=!1;function J(t){const e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,K),t.isContextLost())return;Z.supported=!0}catch(t){}t.deleteTexture(e),Y=!0}s.document&&(K=s.document.createElement("img"),K.onload=function(){$&&J($),$=null,X=!0},K.onerror=function(){Y=!0,$=null},K.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Q="01",tt="NO_ACCESS_TOKEN";function et(t){return 0===t.indexOf("mapbox:")}function nt(t){return W.API_URL_REGEX.test(t)}const rt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function it(t){const e=t.match(rt);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function ot(t){const e=t.params.length?"?"+t.params.join("&"):"";return`${t.protocol}://${t.authority}${t.path}${e}`}function at(t){if(!t)return null;const e=t.split(".");if(!e||3!==e.length)return null;try{return JSON.parse(decodeURIComponent(s.atob(e[1]).split("").map(t=>"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch(t){return null}}class st{constructor(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(t){const e=at(W.ACCESS_TOKEN);let n="";return n=e&&e.u?s.btoa(encodeURIComponent(e.u).replace(/%([0-9A-F]{2})/g,(t,e)=>String.fromCharCode(Number("0x"+e)))):W.ACCESS_TOKEN||"",t?`mapbox.eventData.${t}:${n}`:"mapbox.eventData:"+n}fetchEventData(){const t=V("localStorage"),e=this.getStorageKey(),n=this.getStorageKey("uuid");if(t)try{const t=s.localStorage.getItem(e);t&&(this.eventData=JSON.parse(t));const r=s.localStorage.getItem(n);r&&(this.anonId=r)}catch(t){D("Unable to read from LocalStorage")}}saveEventData(){const t=V("localStorage"),e=this.getStorageKey(),n=this.getStorageKey("uuid");if(t)try{s.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&s.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(t){D("Unable to write to LocalStorage")}}processRequests(t){}postEvent(t,e,r,i){if(!W.EVENTS_URL)return;const o=it(W.EVENTS_URL);o.params.push("access_token="+(i||W.ACCESS_TOKEN||""));const a={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:n,skuId:Q,userId:this.anonId},s=e?x(a,e):a,l={url:ot(o),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=It(l,t=>{this.pendingRequest=null,r(t),this.saveEventData(),this.processRequests(i)})}queueRequest(t,e){this.queue.push(t),this.processRequests(e)}}const lt=new class extends st{constructor(t){super("appUserTurnstile"),this._customAccessToken=t}postTurnstileEvent(t,e){W.EVENTS_URL&&W.ACCESS_TOKEN&&Array.isArray(t)&&t.some(t=>et(t)||nt(t))&&this.queueRequest(Date.now(),e)}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const e=at(W.ACCESS_TOKEN),n=e?e.u:W.ACCESS_TOKEN;let r=n!==this.eventData.tokenU;T(this.anonId)||(this.anonId=C(),r=!0);const i=this.queue.shift();if(this.eventData.lastSuccess){const t=new Date(this.eventData.lastSuccess),e=new Date(i),n=(i-this.eventData.lastSuccess)/864e5;r=r||n>=1||n<-1||t.getDate()!==e.getDate()}else r=!0;if(!r)return this.processRequests();this.postEvent(i,{"enabled.telemetry":!1},t=>{t||(this.eventData.lastSuccess=i,this.eventData.tokenU=n)},t)}},ct=lt.postTurnstileEvent.bind(lt),ut=new class extends st{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(t,e,n,r){this.skuToken=e,this.errorCb=r,W.EVENTS_URL&&(n||W.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},n):this.errorCb(new Error(tt)))}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:n}=this.queue.shift();e&&this.success[e]||(this.anonId||this.fetchEventData(),T(this.anonId)||(this.anonId=C()),this.postEvent(n,{skuToken:this.skuToken},t=>{t?this.errorCb(t):e&&(this.success[e]=!0)},t))}},ht=ut.postMapLoadEvent.bind(ut),dt=new class extends st{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(t,e,n,r){if(!W.API_URL||!W.SESSION_PATH)return;const i=it(W.API_URL+W.SESSION_PATH);i.params.push("sku="+(e||"")),i.params.push("access_token="+(r||W.ACCESS_TOKEN||""));const o={url:ot(i),headers:{"Content-Type":"text/plain"}};this.pendingRequest=At(o,t=>{this.pendingRequest=null,n(t),this.saveEventData(),this.processRequests(r)})}getSessionAPI(t,e,n,r){this.skuToken=e,this.errorCb=r,W.SESSION_PATH&&W.API_URL&&(n||W.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},n):this.errorCb(new Error(tt)))}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:n}=this.queue.shift();e&&this.success[e]||this.getSession(n,this.skuToken,t=>{t?this.errorCb(t):e&&(this.success[e]=!0)},t)}},pt=dt.getSessionAPI.bind(dt),ft=new Set,mt="mapbox-tiles";let gt,yt,vt=500,_t=50;function bt(){s.caches&&!gt&&(gt=s.caches.open(mt))}function xt(t){const e=t.indexOf("?");return e<0?t:t.slice(0,e)}let wt=1/0;const Et={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(Et);class Ct extends Error{constructor(t,e,n){401===e&&nt(n)&&(t+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),super(t),this.status=e,this.url=n}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const St=N()?()=>self.worker&&self.worker.referrer:()=>("blob:"===s.location.protocol?s.parent:s).location.href,Tt=function(t,e){if(!(/^file:/.test(n=t.url)||/^file:/.test(St())&&!/^\w+:/.test(n))){if(s.fetch&&s.Request&&s.AbortController&&s.Request.prototype.hasOwnProperty("signal"))return function(t,e){const n=new s.AbortController,r=new s.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:St(),signal:n.signal});let i=!1,o=!1;const a=(l=r.url).indexOf("sku=")>0&&nt(l);var l;"json"===t.type&&r.headers.set("Accept","application/json");const c=(n,i,l)=>{if(o)return;if(n&&"SecurityError"!==n.message&&D(n),i&&l)return u(i);const c=Date.now();s.fetch(r).then(n=>{if(n.ok){const t=a?n.clone():null;return u(n,t,c)}return e(new Ct(n.statusText,n.status,t.url))}).catch(t=>{20!==t.code&&e(new Error(t.message))})},u=(n,a,l)=>{("arrayBuffer"===t.type?n.arrayBuffer():"json"===t.type?n.json():n.text()).then(t=>{o||(a&&l&&function(t,e,n){if(bt(),!gt)return;const r={status:e.status,statusText:e.statusText,headers:new s.Headers};e.headers.forEach((t,e)=>r.headers.set(e,t));const i=j(e.headers.get("Cache-Control")||"");i["no-store"]||(i["max-age"]&&r.headers.set("Expires",new Date(n+1e3*i["max-age"]).toUTCString()),new Date(r.headers.get("Expires")).getTime()-n<42e4||function(t,e){if(void 0===yt)try{new Response(new ReadableStream),yt=!0}catch(t){yt=!1}yt?e(t.body):t.blob().then(e)}(e,e=>{const n=new s.Response(e,r);bt(),gt&&gt.then(e=>e.put(xt(t.url),n)).catch(t=>D(t.message))}))}(r,a,l),i=!0,e(null,t,n.headers.get("Cache-Control"),n.headers.get("Expires")))}).catch(t=>{o||e(new Error(t.message))})};return a?function(t,e){if(bt(),!gt)return e(null);const n=xt(t.url);gt.then(t=>{t.match(n).then(r=>{const i=function(t){if(!t)return!1;const e=new Date(t.headers.get("Expires")||0),n=j(t.headers.get("Cache-Control")||"");return e>Date.now()&&!n["no-cache"]}(r);t.delete(n),i&&t.put(n,r.clone()),e(null,r,i)}).catch(e)}).catch(e)}(r,c):c(null,null),{cancel:()=>{o=!0,i||n.abort()}}}(t,e);if(N()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var n;return function(t,e){const n=new s.XMLHttpRequest;n.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(n.responseType="arraybuffer");for(const e in t.headers)n.setRequestHeader(e,t.headers[e]);return"json"===t.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===t.credentials,n.onerror=()=>{e(new Error(n.statusText))},n.onload=()=>{if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){let r=n.response;if("json"===t.type)try{r=JSON.parse(n.response)}catch(t){return e(t)}e(null,r,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else e(new Ct(n.statusText,n.status,t.url))},n.send(t.body),{cancel:()=>n.abort()}}(t,e)},Ot=function(t,e){return Tt(x(t,{type:"arrayBuffer"}),e)},It=function(t,e){return Tt(x(t,{method:"POST"}),e)},At=function(t,e){return Tt(x(t,{method:"GET"}),e)};function Mt(t){const e=s.document.createElement("a");return e.href=t,e.protocol===s.document.location.protocol&&e.host===s.document.location.host}const kt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Pt,Dt;Pt=[],Dt=0;const Rt=function(t,e){if(Z.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),Dt>=W.MAX_PARALLEL_IMAGE_REQUESTS){const n={requestParameters:t,callback:e,cancelled:!1,cancel(){this.cancelled=!0}};return Pt.push(n),n}Dt++;let n=!1;const r=()=>{if(!n)for(n=!0,Dt--;Pt.length&&Dt<W.MAX_PARALLEL_IMAGE_REQUESTS;){const t=Pt.shift(),{requestParameters:e,callback:n,cancelled:r}=t;r||(t.cancel=Rt(e,n).cancel)}},i=Ot(t,(t,n,i,o)=>{r(),t?e(t):n&&(s.createImageBitmap?function(t,e){const n=new s.Blob([new Uint8Array(t)],{type:"image/png"});s.createImageBitmap(n).then(t=>{e(null,t)}).catch(t=>{e(new Error(`Could not load image because of ${t.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(n,(t,n)=>e(t,n,i,o)):function(t,e){const n=new s.Image,r=s.URL;n.onload=()=>{e(null,n),r.revokeObjectURL(n.src),n.onload=null,s.requestAnimationFrame(()=>{n.src=kt})},n.onerror=()=>e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const i=new s.Blob([new Uint8Array(t)],{type:"image/png"});n.src=t.byteLength?r.createObjectURL(i):kt}(n,(t,n)=>e(t,n,i,o)))});return{cancel:()=>{i.cancel(),r()}}};function Lt(t,e,n){n[t]&&-1!==n[t].indexOf(e)||(n[t]=n[t]||[],n[t].push(e))}function Nt(t,e,n){if(n&&n[t]){const r=n[t].indexOf(e);-1!==r&&n[t].splice(r,1)}}class jt{constructor(t,e={}){x(this,e),this.type=t}}class Ft extends jt{constructor(t,e={}){super("error",x({error:t},e))}}class zt{on(t,e){return this._listeners=this._listeners||{},Lt(t,e,this._listeners),this}off(t,e){return Nt(t,e,this._listeners),Nt(t,e,this._oneTimeListeners),this}once(t,e){return e?(this._oneTimeListeners=this._oneTimeListeners||{},Lt(t,e,this._oneTimeListeners),this):new Promise(e=>this.once(t,e))}fire(t,e){"string"==typeof t&&(t=new jt(t,e||{}));const n=t.type;if(this.listens(n)){t.target=this;const e=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];for(const n of e)n.call(this,t);const r=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];for(const e of r)Nt(n,e,this._oneTimeListeners),e.call(this,t);const i=this._eventedParent;i&&(x(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),i.fire(t))}else t instanceof Ft&&console.error(t.error);return this}listens(t){return!!(this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t))}setEventedParent(t,e){return this._eventedParent=t,this._eventedParentData=e,this}}var Bt=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":0.1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":true,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"cross-faded"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"cross-faded":{"type":"property-type"},"cross-faded-data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');class Ut{constructor(t,e,n,r){this.message=(t?t+": ":"")+n,r&&(this.identifier=r),null!=e&&e.__line__&&(this.line=e.__line__)}}function Gt(t){const e=t.value;return e?[new Ut(t.key,e,"constants have been deprecated as of v8")]:[]}function Vt(t,...e){for(const n of e)for(const e in n)t[e]=n[e];return t}function qt(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function Ht(t){if(Array.isArray(t))return t.map(Ht);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){const e={};for(const n in t)e[n]=Ht(t[n]);return e}return qt(t)}class Wt extends Error{constructor(t,e){super(e),this.message=e,this.key=t}}class Zt{constructor(t,e=[]){this.parent=t,this.bindings={};for(const[t,n]of e)this.bindings[t]=n}concat(t){return new Zt(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const $t={kind:"null"},Kt={kind:"number"},Yt={kind:"string"},Xt={kind:"boolean"},Jt={kind:"color"},Qt={kind:"object"},te={kind:"value"},ee={kind:"collator"},ne={kind:"formatted"},re={kind:"resolvedImage"};function ie(t,e){return{kind:"array",itemType:t,N:e}}function oe(t){if("array"===t.kind){const e=oe(t.itemType);return"number"==typeof t.N?`array<${e}, ${t.N}>`:"value"===t.itemType.kind?"array":`array<${e}>`}return t.kind}const ae=[$t,Kt,Yt,Xt,Jt,ne,Qt,ie(te),re];function se(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!se(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(const t of ae)if(!se(t,e))return null}return`Expected ${oe(t)} but found ${oe(e)} instead.`}function le(t,e){return e.some(e=>e.kind===t.kind)}function ce(t,e){return e.some(e=>"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t)}function ue(t){var e={exports:{}};return t(e,e.exports),e.exports}var he=ue((function(t,e){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(t){return(t=Math.round(t))<0?0:t>255?255:t}function i(t){return r("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function o(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function a(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}try{e.parseCSSColor=function(t){var e,s=t.replace(/ /g,"").toLowerCase();if(s in n)return n[s].slice();if("#"===s[0])return 4===s.length?(e=parseInt(s.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===s.length&&(e=parseInt(s.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var l=s.indexOf("("),c=s.indexOf(")");if(-1!==l&&c+1===s.length){var u=s.substr(0,l),h=s.substr(l+1,c-(l+1)).split(","),d=1;switch(u){case"rgba":if(4!==h.length)return null;d=o(h.pop());case"rgb":return 3!==h.length?null:[i(h[0]),i(h[1]),i(h[2]),d];case"hsla":if(4!==h.length)return null;d=o(h.pop());case"hsl":if(3!==h.length)return null;var p=(parseFloat(h[0])%360+360)%360/360,f=o(h[1]),m=o(h[2]),g=m<=.5?m*(f+1):m+f-m*f,y=2*m-g;return[r(255*a(y,g,p+1/3)),r(255*a(y,g,p)),r(255*a(y,g,p-1/3)),d];default:return null}}return null}}catch(t){}}));class de{constructor(t,e,n,r=1){this.r=t,this.g=e,this.b=n,this.a=r}static parse(t){if(!t)return;if(t instanceof de)return t;if("string"!=typeof t)return;const e=he.parseCSSColor(t);return e?new de(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3]):void 0}toString(){const[t,e,n,r]=this.toArray();return`rgba(${Math.round(t)},${Math.round(e)},${Math.round(n)},${r})`}toArray(){const{r:t,g:e,b:n,a:r}=this;return 0===r?[0,0,0,0]:[255*t/r,255*e/r,255*n/r,r]}}de.black=new de(0,0,0,1),de.white=new de(1,1,1,1),de.transparent=new de(0,0,0,0),de.red=new de(1,0,0,1),de.blue=new de(0,0,1,1);class pe{constructor(t,e,n){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,e){return this.collator.compare(t,e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class fe{constructor(t,e,n,r,i){this.text=t,this.image=e,this.scale=n,this.fontStack=r,this.textColor=i}}class me{constructor(t){this.sections=t}static fromString(t){return new me([new fe(t,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(t=>0!==t.text.length||t.image&&0!==t.image.name.length)}static factory(t){return t instanceof me?t:me.fromString(t)}toString(){return 0===this.sections.length?"":this.sections.map(t=>t.text).join("")}serialize(){const t=["format"];for(const e of this.sections){if(e.image){t.push(["image",e.image.name]);continue}t.push(e.text);const n={};e.fontStack&&(n["text-font"]=["literal",e.fontStack.split(",")]),e.scale&&(n["font-scale"]=e.scale),e.textColor&&(n["text-color"]=["rgba"].concat(e.textColor.toArray())),t.push(n)}return t}}class ge{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new ge({name:t,available:!1}):null}serialize(){return["image",this.name]}}function ye(t,e,n,r){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:`Invalid rgba value [${[t,e,n,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof r?[t,e,n,r]:[t,e,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ve(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof de)return!0;if(t instanceof pe)return!0;if(t instanceof me)return!0;if(t instanceof ge)return!0;if(Array.isArray(t)){for(const e of t)if(!ve(e))return!1;return!0}if("object"==typeof t){for(const e in t)if(!ve(t[e]))return!1;return!0}return!1}function _e(t){if(null===t)return $t;if("string"==typeof t)return Yt;if("boolean"==typeof t)return Xt;if("number"==typeof t)return Kt;if(t instanceof de)return Jt;if(t instanceof pe)return ee;if(t instanceof me)return ne;if(t instanceof ge)return re;if(Array.isArray(t)){const e=t.length;let n;for(const e of t){const t=_e(e);if(n){if(n===t)continue;n=te;break}n=t}return ie(n||te,e)}return Qt}function be(t){const e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof de||t instanceof me||t instanceof ge?t.toString():JSON.stringify(t)}class xe{constructor(t,e){this.type=t,this.value=e}static parse(t,e){if(2!==t.length)return e.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!ve(t[1]))return e.error("invalid value");const n=t[1];let r=_e(n);const i=e.expectedType;return"array"!==r.kind||0!==r.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(r=i),new xe(r,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof de?["rgba"].concat(this.value.toArray()):this.value instanceof me?this.value.serialize():this.value}}class we{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const Ee={string:Yt,number:Kt,boolean:Xt,object:Qt};class Ce{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let n,r=1;const i=t[0];if("array"===i){let i,o;if(t.length>2){const n=t[1];if("string"!=typeof n||!(n in Ee)||"object"===n)return e.error('The item type argument of "array" must be one of string, number, boolean',1);i=Ee[n],r++}else i=te;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);o=t[2],r++}n=ie(i,o)}else n=Ee[i];const o=[];for(;r<t.length;r++){const n=e.parse(t[r],r,te);if(!n)return null;o.push(n)}return new Ce(n,o)}evaluate(t){for(let e=0;e<this.args.length;e++){const n=this.args[e].evaluate(t);if(!se(this.type,_e(n)))return n;if(e===this.args.length-1)throw new we(`Expected value to be of type ${oe(this.type)}, but found ${oe(_e(n))} instead.`)}return null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=this.type,e=[t.kind];if("array"===t.kind){const n=t.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){e.push(n.kind);const r=t.N;("number"==typeof r||this.args.length>1)&&e.push(r)}}return e.concat(this.args.map(t=>t.serialize()))}}class Se{constructor(t){this.type=ne,this.sections=t}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const n=t[1];if(!Array.isArray(n)&&"object"==typeof n)return e.error("First argument must be an image or text section.");const r=[];let i=!1;for(let n=1;n<=t.length-1;++n){const o=t[n];if(i&&"object"==typeof o&&!Array.isArray(o)){i=!1;let t=null;if(o["font-scale"]&&(t=e.parse(o["font-scale"],1,Kt),!t))return null;let n=null;if(o["text-font"]&&(n=e.parse(o["text-font"],1,ie(Yt)),!n))return null;let a=null;if(o["text-color"]&&(a=e.parse(o["text-color"],1,Jt),!a))return null;const s=r[r.length-1];s.scale=t,s.font=n,s.textColor=a}else{const o=e.parse(t[n],1,te);if(!o)return null;const a=o.type.kind;if("string"!==a&&"value"!==a&&"null"!==a&&"resolvedImage"!==a)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,r.push({content:o,scale:null,font:null,textColor:null})}}return new Se(r)}evaluate(t){return new me(this.sections.map(e=>{const n=e.content.evaluate(t);return _e(n)===re?new fe("",n,null,null,null):new fe(be(n),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)}))}eachChild(t){for(const e of this.sections)t(e.content),e.scale&&t(e.scale),e.font&&t(e.font),e.textColor&&t(e.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const e of this.sections){t.push(e.content.serialize());const n={};e.scale&&(n["font-scale"]=e.scale.serialize()),e.font&&(n["text-font"]=e.font.serialize()),e.textColor&&(n["text-color"]=e.textColor.serialize()),t.push(n)}return t}}class Te{constructor(t){this.type=re,this.input=t}static parse(t,e){if(2!==t.length)return e.error("Expected two arguments.");const n=e.parse(t[1],1,Yt);return n?new Te(n):e.error("No image name provided.")}evaluate(t){const e=this.input.evaluate(t),n=ge.fromString(e);return n&&t.availableImages&&(n.available=t.availableImages.indexOf(e)>-1),n}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Oe={"to-boolean":Xt,"to-color":Jt,"to-number":Kt,"to-string":Yt};class Ie{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const n=t[0];if(("to-boolean"===n||"to-string"===n)&&2!==t.length)return e.error("Expected one argument.");const r=Oe[n],i=[];for(let n=1;n<t.length;n++){const r=e.parse(t[n],n,te);if(!r)return null;i.push(r)}return new Ie(r,i)}evaluate(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){let e,n;for(const r of this.args){if(e=r.evaluate(t),n=null,e instanceof de)return e;if("string"==typeof e){const n=t.parseColor(e);if(n)return n}else if(Array.isArray(e)&&(n=e.length<3||e.length>4?`Invalid rbga value ${JSON.stringify(e)}: expected an array containing either three or four numeric values.`:ye(e[0],e[1],e[2],e[3]),!n))return new de(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new we(n||`Could not parse color from value '${"string"==typeof e?e:String(JSON.stringify(e))}'`)}if("number"===this.type.kind){let e=null;for(const n of this.args){if(e=n.evaluate(t),null===e)return 0;const r=Number(e);if(!isNaN(r))return r}throw new we(`Could not convert ${JSON.stringify(e)} to number.`)}return"formatted"===this.type.kind?me.fromString(be(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?ge.fromString(be(this.args[0].evaluate(t))):be(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){if("formatted"===this.type.kind)return new Se([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Te(this.args[0]).serialize();const t=["to-"+this.type.kind];return this.eachChild(e=>{t.push(e.serialize())}),t}}const Ae=["Unknown","Point","LineString","Polygon"];class Me{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Ae[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const t=this.featureDistanceData.center,e=this.featureDistanceData.scale,{x:n,y:r}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(n*e-t[0])+this.featureDistanceData.bearing[1]*(r*e-t[1])}return 0}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=de.parse(t)),e}}class ke{constructor(t,e,n,r){this.name=t,this.type=e,this._evaluate=n,this.args=r}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(t=>t.serialize()))}static parse(t,e){const n=t[0],r=ke.definitions[n];if(!r)return e.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0);const i=Array.isArray(r)?r[0]:r.type,o=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=o.filter(([e])=>!Array.isArray(e)||e.length===t.length-1);let s=null;for(const[r,o]of a){s=new tn(e.registry,e.path,null,e.scope);const a=[];let l=!1;for(let e=1;e<t.length;e++){const n=t[e],i=Array.isArray(r)?r[e-1]:r.type,o=s.parse(n,1+a.length,i);if(!o){l=!0;break}a.push(o)}if(!l)if(Array.isArray(r)&&r.length!==a.length)s.error(`Expected ${r.length} arguments, but found ${a.length} instead.`);else{for(let t=0;t<a.length;t++){const e=Array.isArray(r)?r[t]:r.type,n=a[t];s.concat(t+1).checkSubtype(e,n.type)}if(0===s.errors.length)return new ke(n,i,o,a)}}if(1===a.length)e.errors.push(...s.errors);else{const n=(a.length?a:o).map(([t])=>{return e=t,Array.isArray(e)?`(${e.map(oe).join(", ")})`:`(${oe(e.type)}...)`;var e}).join(" | "),r=[];for(let n=1;n<t.length;n++){const i=e.parse(t[n],1+r.length);if(!i)return null;r.push(oe(i.type))}e.error(`Expected arguments of type ${n}, but found (${r.join(", ")}) instead.`)}return null}static register(t,e){ke.definitions=e;for(const n in e)t[n]=ke}}class Pe{constructor(t,e,n){this.type=ee,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=e}static parse(t,e){if(2!==t.length)return e.error("Expected one argument.");const n=t[1];if("object"!=typeof n||Array.isArray(n))return e.error("Collator options argument must be an object.");const r=e.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,Xt);if(!r)return null;const i=e.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,Xt);if(!i)return null;let o=null;return n.locale&&(o=e.parse(n.locale,1,Yt),!o)?null:new Pe(r,i,o)}evaluate(t){return new pe(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}const De=8192;function Re(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function Le(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function Ne(t,e){const n=(180+t[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,i=Math.pow(2,e.z);return[Math.round(n*i*De),Math.round(r*i*De)]}function je(t,e,n){const r=t[0]-e[0],i=t[1]-e[1],o=t[0]-n[0],a=t[1]-n[1];return r*a-o*i==0&&r*o<=0&&i*a<=0}function Fe(t,e){let n=!1;for(let a=0,s=e.length;a<s;a++){const s=e[a];for(let e=0,a=s.length;e<a-1;e++){if(je(t,s[e],s[e+1]))return!1;(i=s[e])[1]>(r=t)[1]!=(o=s[e+1])[1]>r[1]&&r[0]<(o[0]-i[0])*(r[1]-i[1])/(o[1]-i[1])+i[0]&&(n=!n)}}var r,i,o;return n}function ze(t,e){for(let n=0;n<e.length;n++)if(Fe(t,e[n]))return!0;return!1}function Be(t,e,n,r){const i=r[0]-n[0],o=r[1]-n[1],a=(t[0]-n[0])*o-i*(t[1]-n[1]),s=(e[0]-n[0])*o-i*(e[1]-n[1]);return a>0&&s<0||a<0&&s>0}function Ue(t,e,n){for(const c of n)for(let n=0;n<c.length-1;++n)if(0!=(s=[(a=c[n+1])[0]-(o=c[n])[0],a[1]-o[1]])[0]*(l=[(i=e)[0]-(r=t)[0],i[1]-r[1]])[1]-s[1]*l[0]&&Be(r,i,o,a)&&Be(o,a,r,i))return!0;var r,i,o,a,s,l;return!1}function Ge(t,e){for(let n=0;n<t.length;++n)if(!Fe(t[n],e))return!1;for(let n=0;n<t.length-1;++n)if(Ue(t[n],t[n+1],e))return!1;return!0}function Ve(t,e){for(let n=0;n<e.length;n++)if(Ge(t,e[n]))return!0;return!1}function qe(t,e,n){const r=[];for(let i=0;i<t.length;i++){const o=[];for(let r=0;r<t[i].length;r++){const a=Ne(t[i][r],n);Re(e,a),o.push(a)}r.push(o)}return r}function He(t,e,n){const r=[];for(let i=0;i<t.length;i++){const o=qe(t[i],e,n);r.push(o)}return r}function We(t,e,n,r){if(t[0]<n[0]||t[0]>n[2]){const e=.5*r;let i=t[0]-n[0]>e?-r:n[0]-t[0]>e?r:0;0===i&&(i=t[0]-n[2]>e?-r:n[2]-t[0]>e?r:0),t[0]+=i}Re(e,t)}function Ze(t,e,n,r){const i=Math.pow(2,r.z)*De,o=[r.x*De,r.y*De],a=[];for(const r of t)for(const t of r){const r=[t.x+o[0],t.y+o[1]];We(r,e,n,i),a.push(r)}return a}function $e(t,e,n,r){const i=Math.pow(2,r.z)*De,o=[r.x*De,r.y*De],a=[];for(const n of t){const t=[];for(const r of n){const n=[r.x+o[0],r.y+o[1]];Re(e,n),t.push(n)}a.push(t)}if(e[2]-e[0]<=i/2){(s=e)[0]=s[1]=1/0,s[2]=s[3]=-1/0;for(const t of a)for(const r of t)We(r,e,n,i)}var s;return a}class Ke{constructor(t,e){this.type=Xt,this.geojson=t,this.geometries=e}static parse(t,e){if(2!==t.length)return e.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(ve(t[1])){const e=t[1];if("FeatureCollection"===e.type)for(let t=0;t<e.features.length;++t){const n=e.features[t].geometry.type;if("Polygon"===n||"MultiPolygon"===n)return new Ke(e,e.features[t].geometry)}else if("Feature"===e.type){const t=e.geometry.type;if("Polygon"===t||"MultiPolygon"===t)return new Ke(e,e.geometry)}else if("Polygon"===e.type||"MultiPolygon"===e.type)return new Ke(e,e)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if("Polygon"===e.type){const o=qe(e.coordinates,r,i),a=Ze(t.geometry(),n,r,i);if(!Le(n,r))return!1;for(const t of a)if(!Fe(t,o))return!1}if("MultiPolygon"===e.type){const o=He(e.coordinates,r,i),a=Ze(t.geometry(),n,r,i);if(!Le(n,r))return!1;for(const t of a)if(!ze(t,o))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if("Polygon"===e.type){const o=qe(e.coordinates,r,i),a=$e(t.geometry(),n,r,i);if(!Le(n,r))return!1;for(const t of a)if(!Ge(t,o))return!1}if("MultiPolygon"===e.type){const o=He(e.coordinates,r,i),a=$e(t.geometry(),n,r,i);if(!Le(n,r))return!1;for(const t of a)if(!Ve(t,o))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function Ye(t){if(t instanceof ke){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof Ke)return!1;let e=!0;return t.eachChild(t=>{e&&!Ye(t)&&(e=!1)}),e}function Xe(t){if(t instanceof ke&&"feature-state"===t.name)return!1;let e=!0;return t.eachChild(t=>{e&&!Xe(t)&&(e=!1)}),e}function Je(t,e){if(t instanceof ke&&e.indexOf(t.name)>=0)return!1;let n=!0;return t.eachChild(t=>{n&&!Je(t,e)&&(n=!1)}),n}class Qe{constructor(t,e){this.type=e.type,this.name=t,this.boundExpression=e}static parse(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");const n=t[1];return e.scope.has(n)?new Qe(n,e.scope.get(n)):e.error(`Unknown variable "${n}". Make sure "${n}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class tn{constructor(t,e=[],n,r=new Zt,i=[]){this.registry=t,this.path=e,this.key=e.map(t=>`[${t}]`).join(""),this.scope=r,this.errors=i,this.expectedType=n}parse(t,e,n,r,i={}){return e?this.concat(e,n,r)._parse(t,i):this._parse(t,i)}_parse(t,e){function n(t,e,n){return"assert"===n?new Ce(e,[t]):"coerce"===n?new Ie(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=t[0];if("string"!=typeof r)return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const i=this.registry[r];if(i){let r=i.parse(t,this);if(!r)return null;if(this.expectedType){const t=this.expectedType,i=r.type;if("string"!==t.kind&&"number"!==t.kind&&"boolean"!==t.kind&&"object"!==t.kind&&"array"!==t.kind||"value"!==i.kind)if("color"!==t.kind&&"formatted"!==t.kind&&"resolvedImage"!==t.kind||"value"!==i.kind&&"string"!==i.kind){if(this.checkSubtype(t,i))return null}else r=n(r,t,e.typeAnnotation||"coerce");else r=n(r,t,e.typeAnnotation||"assert")}if(!(r instanceof xe)&&"resolvedImage"!==r.type.kind&&function t(e){if(e instanceof Qe)return t(e.boundExpression);if(e instanceof ke&&"error"===e.name)return!1;if(e instanceof Pe)return!1;if(e instanceof Ke)return!1;const n=e instanceof Ie||e instanceof Ce;let r=!0;return e.eachChild(e=>{r=n?r&&t(e):r&&e instanceof xe}),!!r&&Ye(e)&&Je(e,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}(r)){const e=new Me;try{r=new xe(r.type,r.evaluate(e))}catch(t){return this.error(t.message),null}}return r}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,e,n){const r="number"==typeof t?this.path.concat(t):this.path,i=n?this.scope.concat(n):this.scope;return new tn(this.registry,r,e||null,i,this.errors)}error(t,...e){const n=`${this.key}${e.map(t=>`[${t}]`).join("")}`;this.errors.push(new Wt(n,t))}checkSubtype(t,e){const n=se(t,e);return n&&this.error(n),n}}function en(t,e){const n=t.length-1;let r,i,o=0,a=n,s=0;for(;o<=a;)if(s=Math.floor((o+a)/2),r=t[s],i=t[s+1],r<=e){if(s===n||e<i)return s;o=s+1}else{if(!(r>e))throw new we("Input is not a number.");a=s-1}return 0}class nn{constructor(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(const[t,e]of n)this.labels.push(t),this.outputs.push(e)}static parse(t,e){if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");const n=e.parse(t[1],1,Kt);if(!n)return null;const r=[];let i=null;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(let n=1;n<t.length;n+=2){const o=1===n?-1/0:t[n],a=t[n+1],s=n,l=n+1;if("number"!=typeof o)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(r.length&&r[r.length-1][0]>=o)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);const c=e.parse(a,l,i);if(!c)return null;i=i||c.type,r.push([o,c])}return new nn(i,n,r)}evaluate(t){const e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);const r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);const i=e.length;return r>=e[i-1]?n[i-1].evaluate(t):n[en(e,r)].evaluate(t)}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){const t=["step",this.input.serialize()];for(let e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t}}function rn(t,e,n){return t*(1-n)+e*n}var on=Object.freeze({__proto__:null,number:rn,color:function(t,e,n){return new de(rn(t.r,e.r,n),rn(t.g,e.g,n),rn(t.b,e.b,n),rn(t.a,e.a,n))},array:function(t,e,n){return t.map((t,r)=>rn(t,e[r],n))}});const an=6/29*3*(6/29),sn=Math.PI/180,ln=180/Math.PI;function cn(t){return t>.008856451679035631?Math.pow(t,1/3):t/an+4/29}function un(t){return t>6/29?t*t*t:an*(t-4/29)}function hn(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function dn(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function pn(t){const e=dn(t.r),n=dn(t.g),r=dn(t.b),i=cn((.4124564*e+.3575761*n+.1804375*r)/.95047),o=cn((.2126729*e+.7151522*n+.072175*r)/1);return{l:116*o-16,a:500*(i-o),b:200*(o-cn((.0193339*e+.119192*n+.9503041*r)/1.08883)),alpha:t.a}}function fn(t){let e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,r=isNaN(t.b)?e:e-t.b/200;return e=1*un(e),n=.95047*un(n),r=1.08883*un(r),new de(hn(3.2404542*n-1.5371385*e-.4985314*r),hn(-.969266*n+1.8760108*e+.041556*r),hn(.0556434*n-.2040259*e+1.0572252*r),t.alpha)}function mn(t,e,n){const r=e-t;return t+n*(r>180||r<-180?r-360*Math.round(r/360):r)}const gn={forward:pn,reverse:fn,interpolate:function(t,e,n){return{l:rn(t.l,e.l,n),a:rn(t.a,e.a,n),b:rn(t.b,e.b,n),alpha:rn(t.alpha,e.alpha,n)}}},yn={forward:function(t){const{l:e,a:n,b:r}=pn(t),i=Math.atan2(r,n)*ln;return{h:i<0?i+360:i,c:Math.sqrt(n*n+r*r),l:e,alpha:t.a}},reverse:function(t){const e=t.h*sn,n=t.c;return fn({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:mn(t.h,e.h,n),c:rn(t.c,e.c,n),l:rn(t.l,e.l,n),alpha:rn(t.alpha,e.alpha,n)}}};var vn=Object.freeze({__proto__:null,lab:gn,hcl:yn});class _n{constructor(t,e,n,r,i){this.type=t,this.operator=e,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(const[t,e]of i)this.labels.push(t),this.outputs.push(e)}static interpolationFactor(t,e,n,i){let o=0;if("exponential"===t.name)o=bn(e,t.base,n,i);else if("linear"===t.name)o=bn(e,1,n,i);else if("cubic-bezier"===t.name){const a=t.controlPoints;o=new r(a[0],a[1],a[2],a[3]).solve(bn(e,1,n,i))}return o}static parse(t,e){let[n,r,i,...o]=t;if(!Array.isArray(r)||0===r.length)return e.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){const t=r[1];if("number"!=typeof t)return e.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:t}}else{if("cubic-bezier"!==r[0])return e.error("Unknown interpolation type "+String(r[0]),1,0);{const t=r.slice(1);if(4!==t.length||t.some(t=>"number"!=typeof t||t<0||t>1))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:t}}}if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(i=e.parse(i,2,Kt),!i)return null;const a=[];let s=null;"interpolate-hcl"===n||"interpolate-lab"===n?s=Jt:e.expectedType&&"value"!==e.expectedType.kind&&(s=e.expectedType);for(let t=0;t<o.length;t+=2){const n=o[t],r=o[t+1],i=t+3,l=t+4;if("number"!=typeof n)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',i);if(a.length&&a[a.length-1][0]>=n)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',i);const c=e.parse(r,l,s);if(!c)return null;s=s||c.type,a.push([n,c])}return"number"===s.kind||"color"===s.kind||"array"===s.kind&&"number"===s.itemType.kind&&"number"==typeof s.N?new _n(s,n,r,i,a):e.error(`Type ${oe(s)} is not interpolatable.`)}evaluate(t){const e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);const r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);const i=e.length;if(r>=e[i-1])return n[i-1].evaluate(t);const o=en(e,r),a=_n.interpolationFactor(this.interpolation,r,e[o],e[o+1]),s=n[o].evaluate(t),l=n[o+1].evaluate(t);return"interpolate"===this.operator?on[this.type.kind.toLowerCase()](s,l,a):"interpolate-hcl"===this.operator?yn.reverse(yn.interpolate(yn.forward(s),yn.forward(l),a)):gn.reverse(gn.interpolate(gn.forward(s),gn.forward(l),a))}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){let t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const e=[this.operator,t,this.input.serialize()];for(let t=0;t<this.labels.length;t++)e.push(this.labels[t],this.outputs[t].serialize());return e}}function bn(t,e,n,r){const i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}class xn{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expectected at least one argument.");let n=null;const r=e.expectedType;r&&"value"!==r.kind&&(n=r);const i=[];for(const r of t.slice(1)){const t=e.parse(r,1+i.length,n,void 0,{typeAnnotation:"omit"});if(!t)return null;n=n||t.type,i.push(t)}const o=r&&i.some(t=>se(r,t.type));return new xn(o?te:n,i)}evaluate(t){let e,n=null,r=0;for(const i of this.args)if(r++,n=i.evaluate(t),n&&n instanceof ge&&!n.available&&(e||(e=n.name),n=null,r===this.args.length&&(n=e)),null!==n)break;return n}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=["coalesce"];return this.eachChild(e=>{t.push(e.serialize())}),t}}class wn{constructor(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const e of this.bindings)t(e[1]);t(this.result)}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const n=[];for(let r=1;r<t.length-1;r+=2){const i=t[r];if("string"!=typeof i)return e.error(`Expected string, but found ${typeof i} instead.`,r);if(/[^a-zA-Z0-9_]/.test(i))return e.error("Variable names must contain only alphanumeric characters or '_'.",r);const o=e.parse(t[r+1],r+1);if(!o)return null;n.push([i,o])}const r=e.parse(t[t.length-1],t.length-1,e.expectedType,n);return r?new wn(n,r):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[e,n]of this.bindings)t.push(e,n.serialize());return t.push(this.result.serialize()),t}}class En{constructor(t,e,n){this.type=t,this.index=e,this.input=n}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,Kt),r=e.parse(t[2],2,ie(e.expectedType||te));return n&&r?new En(r.type.itemType,n,r):null}evaluate(t){const e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new we(`Array index out of bounds: ${e} < 0.`);if(e>=n.length)throw new we(`Array index out of bounds: ${e} > ${n.length-1}.`);if(e!==Math.floor(e))throw new we(`Array index must be an integer, but found ${e} instead.`);return n[e]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class Cn{constructor(t,e){this.type=Xt,this.needle=t,this.haystack=e}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,te),r=e.parse(t[2],2,te);return n&&r?le(n.type,[Xt,Yt,Kt,$t,te])?new Cn(n,r):e.error(`Expected first argument to be of type boolean, string, number or null, but found ${oe(n.type)} instead`):null}evaluate(t){const e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!n)return!1;if(!ce(e,["boolean","string","number","null"]))throw new we(`Expected first argument to be of type boolean, string, number or null, but found ${oe(_e(e))} instead.`);if(!ce(n,["string","array"]))throw new we(`Expected second argument to be of type array or string, but found ${oe(_e(n))} instead.`);return n.indexOf(e)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class Sn{constructor(t,e,n){this.type=Kt,this.needle=t,this.haystack=e,this.fromIndex=n}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,te),r=e.parse(t[2],2,te);if(!n||!r)return null;if(!le(n.type,[Xt,Yt,Kt,$t,te]))return e.error(`Expected first argument to be of type boolean, string, number or null, but found ${oe(n.type)} instead`);if(4===t.length){const i=e.parse(t[3],3,Kt);return i?new Sn(n,r,i):null}return new Sn(n,r)}evaluate(t){const e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!ce(e,["boolean","string","number","null"]))throw new we(`Expected first argument to be of type boolean, string, number or null, but found ${oe(_e(e))} instead.`);if(!ce(n,["string","array"]))throw new we(`Expected second argument to be of type array or string, but found ${oe(_e(n))} instead.`);if(this.fromIndex){const r=this.fromIndex.evaluate(t);return n.indexOf(e,r)}return n.indexOf(e)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Tn{constructor(t,e,n,r,i,o){this.inputType=t,this.type=e,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o}static parse(t,e){if(t.length<5)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return e.error("Expected an even number of arguments.");let n,r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);const i={},o=[];for(let a=2;a<t.length-1;a+=2){let s=t[a];const l=t[a+1];Array.isArray(s)||(s=[s]);const c=e.concat(a);if(0===s.length)return c.error("Expected at least one branch label.");for(const t of s){if("number"!=typeof t&&"string"!=typeof t)return c.error("Branch labels must be numbers or strings.");if("number"==typeof t&&Math.abs(t)>Number.MAX_SAFE_INTEGER)return c.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof t&&Math.floor(t)!==t)return c.error("Numeric branch labels must be integer values.");if(n){if(c.checkSubtype(n,_e(t)))return null}else n=_e(t);if(void 0!==i[String(t)])return c.error("Branch labels must be unique.");i[String(t)]=o.length}const u=e.parse(l,a,r);if(!u)return null;r=r||u.type,o.push(u)}const a=e.parse(t[1],1,te);if(!a)return null;const s=e.parse(t[t.length-1],t.length-1,r);return s?"value"!==a.type.kind&&e.concat(1).checkSubtype(n,a.type)?null:new Tn(n,r,a,i,o,s):null}evaluate(t){const e=this.input.evaluate(t);return(_e(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],e=Object.keys(this.cases).sort(),n=[],r={};for(const t of e){const e=r[this.cases[t]];void 0===e?(r[this.cases[t]]=n.length,n.push([this.cases[t],[t]])):n[e][1].push(t)}const i=t=>"number"===this.inputType.kind?Number(t):t;for(const[e,r]of n)t.push(1===r.length?i(r[0]):r.map(i)),t.push(this.outputs[e].serialize());return t.push(this.otherwise.serialize()),t}}class On{constructor(t,e,n){this.type=t,this.branches=e,this.otherwise=n}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return e.error("Expected an odd number of arguments.");let n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);const r=[];for(let i=1;i<t.length-1;i+=2){const o=e.parse(t[i],i,Xt);if(!o)return null;const a=e.parse(t[i+1],i+1,n);if(!a)return null;r.push([o,a]),n=n||a.type}const i=e.parse(t[t.length-1],t.length-1,n);return i?new On(n,r,i):null}evaluate(t){for(const[e,n]of this.branches)if(e.evaluate(t))return n.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[e,n]of this.branches)t(e),t(n);t(this.otherwise)}outputDefined(){return this.branches.every(([t,e])=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild(e=>{t.push(e.serialize())}),t}}class In{constructor(t,e,n,r){this.type=t,this.input=e,this.beginIndex=n,this.endIndex=r}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,te),r=e.parse(t[2],2,Kt);if(!n||!r)return null;if(!le(n.type,[ie(te),Yt,te]))return e.error(`Expected first argument to be of type array or string, but found ${oe(n.type)} instead`);if(4===t.length){const i=e.parse(t[3],3,Kt);return i?new In(n.type,n,r,i):null}return new In(n.type,n,r)}evaluate(t){const e=this.input.evaluate(t),n=this.beginIndex.evaluate(t);if(!ce(e,["string","array"]))throw new we(`Expected first argument to be of type array or string, but found ${oe(_e(e))} instead.`);if(this.endIndex){const r=this.endIndex.evaluate(t);return e.slice(n,r)}return e.slice(n)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function An(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function Mn(t,e,n,r){return 0===r.compare(e,n)}function kn(t,e,n){const r="=="!==t&&"!="!==t;return class i{constructor(t,e,n){this.type=Xt,this.lhs=t,this.rhs=e,this.collator=n,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}static parse(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");const n=t[0];let o=e.parse(t[1],1,te);if(!o)return null;if(!An(n,o.type))return e.concat(1).error(`"${n}" comparisons are not supported for type '${oe(o.type)}'.`);let a=e.parse(t[2],2,te);if(!a)return null;if(!An(n,a.type))return e.concat(2).error(`"${n}" comparisons are not supported for type '${oe(a.type)}'.`);if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error(`Cannot compare types '${oe(o.type)}' and '${oe(a.type)}'.`);r&&("value"===o.type.kind&&"value"!==a.type.kind?o=new Ce(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new Ce(o.type,[a])));let s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(s=e.parse(t[3],3,ee),!s)return null}return new i(o,a,s)}evaluate(i){const o=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){const e=_e(o),n=_e(a);if(e.kind!==n.kind||"string"!==e.kind&&"number"!==e.kind)throw new we(`Expected arguments for "${t}" to be (string, string) or (number, number), but found (${e.kind}, ${n.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const t=_e(o),n=_e(a);if("string"!==t.kind||"string"!==n.kind)return e(i,o,a)}return this.collator?n(i,o,a,this.collator.evaluate(i)):e(i,o,a)}eachChild(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)}outputDefined(){return!0}serialize(){const e=[t];return this.eachChild(t=>{e.push(t.serialize())}),e}}}const Pn=kn("==",(function(t,e,n){return e===n}),Mn),Dn=kn("!=",(function(t,e,n){return e!==n}),(function(t,e,n,r){return!Mn(0,e,n,r)})),Rn=kn("<",(function(t,e,n){return e<n}),(function(t,e,n,r){return r.compare(e,n)<0})),Ln=kn(">",(function(t,e,n){return e>n}),(function(t,e,n,r){return r.compare(e,n)>0})),Nn=kn("<=",(function(t,e,n){return e<=n}),(function(t,e,n,r){return r.compare(e,n)<=0})),jn=kn(">=",(function(t,e,n){return e>=n}),(function(t,e,n,r){return r.compare(e,n)>=0}));class Fn{constructor(t,e,n,r,i){this.type=Yt,this.number=t,this.locale=e,this.currency=n,this.minFractionDigits=r,this.maxFractionDigits=i}static parse(t,e){if(3!==t.length)return e.error("Expected two arguments.");const n=e.parse(t[1],1,Kt);if(!n)return null;const r=t[2];if("object"!=typeof r||Array.isArray(r))return e.error("NumberFormat options argument must be an object.");let i=null;if(r.locale&&(i=e.parse(r.locale,1,Yt),!i))return null;let o=null;if(r.currency&&(o=e.parse(r.currency,1,Yt),!o))return null;let a=null;if(r["min-fraction-digits"]&&(a=e.parse(r["min-fraction-digits"],1,Kt),!a))return null;let s=null;return r["max-fraction-digits"]&&(s=e.parse(r["max-fraction-digits"],1,Kt),!s)?null:new Fn(n,i,o,a,s)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}class zn{constructor(t){this.type=Kt,this.input=t}static parse(t,e){if(2!==t.length)return e.error(`Expected 1 argument, but found ${t.length-1} instead.`);const n=e.parse(t[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?e.error(`Expected argument of type string or array, but found ${oe(n.type)} instead.`):new zn(n):null}evaluate(t){const e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new we(`Expected value to be of type string or array, but found ${oe(_e(e))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){const t=["length"];return this.eachChild(e=>{t.push(e.serialize())}),t}}const Bn={"==":Pn,"!=":Dn,">":Ln,"<":Rn,">=":jn,"<=":Nn,array:Ce,at:En,boolean:Ce,case:On,coalesce:xn,collator:Pe,format:Se,image:Te,in:Cn,"index-of":Sn,interpolate:_n,"interpolate-hcl":_n,"interpolate-lab":_n,length:zn,let:wn,literal:xe,match:Tn,number:Ce,"number-format":Fn,object:Ce,slice:In,step:nn,string:Ce,"to-boolean":Ie,"to-color":Ie,"to-number":Ie,"to-string":Ie,var:Qe,within:Ke};function Un(t,[e,n,r,i]){e=e.evaluate(t),n=n.evaluate(t),r=r.evaluate(t);const o=i?i.evaluate(t):1,a=ye(e,n,r,o);if(a)throw new we(a);return new de(e/255*o,n/255*o,r/255*o,o)}function Gn(t,e){return t in e}function Vn(t,e){const n=e[t];return void 0===n?null:n}function qn(t){return{type:t}}function Hn(t){return{result:"success",value:t}}function Wn(t){return{result:"error",value:t}}function Zn(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function $n(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function Kn(t){return!!t.expression&&t.expression.interpolated}function Yn(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function Xn(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function Jn(t){return t}function Qn(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function tr(t,e,n,r,i){return Qn(typeof n===i?r[n]:void 0,t.default,e.default)}function er(t,e,n){if("number"!==Yn(n))return Qn(t.default,e.default);const r=t.stops.length;if(1===r)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[r-1][0])return t.stops[r-1][1];const i=en(t.stops.map(t=>t[0]),n);return t.stops[i][1]}function nr(t,e,n){const r=void 0!==t.base?t.base:1;if("number"!==Yn(n))return Qn(t.default,e.default);const i=t.stops.length;if(1===i)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[i-1][0])return t.stops[i-1][1];const o=en(t.stops.map(t=>t[0]),n),a=function(t,e,n,r){const i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}(n,r,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],l=t.stops[o+1][1];let c=on[e.type]||Jn;if(t.colorSpace&&"rgb"!==t.colorSpace){const e=vn[t.colorSpace];c=(t,n)=>e.reverse(e.interpolate(e.forward(t),e.forward(n),a))}return"function"==typeof s.evaluate?{evaluate(...t){const e=s.evaluate.apply(void 0,t),n=l.evaluate.apply(void 0,t);if(void 0!==e&&void 0!==n)return c(e,n,a)}}:c(s,l,a)}function rr(t,e,n){return"color"===e.type?n=de.parse(n):"formatted"===e.type?n=me.fromString(n.toString()):"resolvedImage"===e.type?n=ge.fromString(n.toString()):Yn(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0),Qn(n,t.default,e.default)}ke.register(Bn,{error:[{kind:"error"},[Yt],(t,[e])=>{throw new we(e.evaluate(t))}],typeof:[Yt,[te],(t,[e])=>oe(_e(e.evaluate(t)))],"to-rgba":[ie(Kt,4),[Jt],(t,[e])=>e.evaluate(t).toArray()],rgb:[Jt,[Kt,Kt,Kt],Un],rgba:[Jt,[Kt,Kt,Kt,Kt],Un],has:{type:Xt,overloads:[[[Yt],(t,[e])=>Gn(e.evaluate(t),t.properties())],[[Yt,Qt],(t,[e,n])=>Gn(e.evaluate(t),n.evaluate(t))]]},get:{type:te,overloads:[[[Yt],(t,[e])=>Vn(e.evaluate(t),t.properties())],[[Yt,Qt],(t,[e,n])=>Vn(e.evaluate(t),n.evaluate(t))]]},"feature-state":[te,[Yt],(t,[e])=>Vn(e.evaluate(t),t.featureState||{})],properties:[Qt,[],t=>t.properties()],"geometry-type":[Yt,[],t=>t.geometryType()],id:[te,[],t=>t.id()],zoom:[Kt,[],t=>t.globals.zoom],pitch:[Kt,[],t=>t.globals.pitch||0],"distance-from-center":[Kt,[],t=>t.distanceFromCenter()],"heatmap-density":[Kt,[],t=>t.globals.heatmapDensity||0],"line-progress":[Kt,[],t=>t.globals.lineProgress||0],"sky-radial-progress":[Kt,[],t=>t.globals.skyRadialProgress||0],accumulated:[te,[],t=>void 0===t.globals.accumulated?null:t.globals.accumulated],"+":[Kt,qn(Kt),(t,e)=>{let n=0;for(const r of e)n+=r.evaluate(t);return n}],"*":[Kt,qn(Kt),(t,e)=>{let n=1;for(const r of e)n*=r.evaluate(t);return n}],"-":{type:Kt,overloads:[[[Kt,Kt],(t,[e,n])=>e.evaluate(t)-n.evaluate(t)],[[Kt],(t,[e])=>-e.evaluate(t)]]},"/":[Kt,[Kt,Kt],(t,[e,n])=>e.evaluate(t)/n.evaluate(t)],"%":[Kt,[Kt,Kt],(t,[e,n])=>e.evaluate(t)%n.evaluate(t)],ln2:[Kt,[],()=>Math.LN2],pi:[Kt,[],()=>Math.PI],e:[Kt,[],()=>Math.E],"^":[Kt,[Kt,Kt],(t,[e,n])=>Math.pow(e.evaluate(t),n.evaluate(t))],sqrt:[Kt,[Kt],(t,[e])=>Math.sqrt(e.evaluate(t))],log10:[Kt,[Kt],(t,[e])=>Math.log(e.evaluate(t))/Math.LN10],ln:[Kt,[Kt],(t,[e])=>Math.log(e.evaluate(t))],log2:[Kt,[Kt],(t,[e])=>Math.log(e.evaluate(t))/Math.LN2],sin:[Kt,[Kt],(t,[e])=>Math.sin(e.evaluate(t))],cos:[Kt,[Kt],(t,[e])=>Math.cos(e.evaluate(t))],tan:[Kt,[Kt],(t,[e])=>Math.tan(e.evaluate(t))],asin:[Kt,[Kt],(t,[e])=>Math.asin(e.evaluate(t))],acos:[Kt,[Kt],(t,[e])=>Math.acos(e.evaluate(t))],atan:[Kt,[Kt],(t,[e])=>Math.atan(e.evaluate(t))],min:[Kt,qn(Kt),(t,e)=>Math.min(...e.map(e=>e.evaluate(t)))],max:[Kt,qn(Kt),(t,e)=>Math.max(...e.map(e=>e.evaluate(t)))],abs:[Kt,[Kt],(t,[e])=>Math.abs(e.evaluate(t))],round:[Kt,[Kt],(t,[e])=>{const n=e.evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[Kt,[Kt],(t,[e])=>Math.floor(e.evaluate(t))],ceil:[Kt,[Kt],(t,[e])=>Math.ceil(e.evaluate(t))],"filter-==":[Xt,[Yt,te],(t,[e,n])=>t.properties()[e.value]===n.value],"filter-id-==":[Xt,[te],(t,[e])=>t.id()===e.value],"filter-type-==":[Xt,[Yt],(t,[e])=>t.geometryType()===e.value],"filter-<":[Xt,[Yt,te],(t,[e,n])=>{const r=t.properties()[e.value],i=n.value;return typeof r==typeof i&&r<i}],"filter-id-<":[Xt,[te],(t,[e])=>{const n=t.id(),r=e.value;return typeof n==typeof r&&n<r}],"filter->":[Xt,[Yt,te],(t,[e,n])=>{const r=t.properties()[e.value],i=n.value;return typeof r==typeof i&&r>i}],"filter-id->":[Xt,[te],(t,[e])=>{const n=t.id(),r=e.value;return typeof n==typeof r&&n>r}],"filter-<=":[Xt,[Yt,te],(t,[e,n])=>{const r=t.properties()[e.value],i=n.value;return typeof r==typeof i&&r<=i}],"filter-id-<=":[Xt,[te],(t,[e])=>{const n=t.id(),r=e.value;return typeof n==typeof r&&n<=r}],"filter->=":[Xt,[Yt,te],(t,[e,n])=>{const r=t.properties()[e.value],i=n.value;return typeof r==typeof i&&r>=i}],"filter-id->=":[Xt,[te],(t,[e])=>{const n=t.id(),r=e.value;return typeof n==typeof r&&n>=r}],"filter-has":[Xt,[te],(t,[e])=>e.value in t.properties()],"filter-has-id":[Xt,[],t=>null!==t.id()&&void 0!==t.id()],"filter-type-in":[Xt,[ie(Yt)],(t,[e])=>e.value.indexOf(t.geometryType())>=0],"filter-id-in":[Xt,[ie(te)],(t,[e])=>e.value.indexOf(t.id())>=0],"filter-in-small":[Xt,[Yt,ie(te)],(t,[e,n])=>n.value.indexOf(t.properties()[e.value])>=0],"filter-in-large":[Xt,[Yt,ie(te)],(t,[e,n])=>function(t,e,n,r){for(;n<=r;){const i=n+r>>1;if(e[i]===t)return!0;e[i]>t?r=i-1:n=i+1}return!1}(t.properties()[e.value],n.value,0,n.value.length-1)],all:{type:Xt,overloads:[[[Xt,Xt],(t,[e,n])=>e.evaluate(t)&&n.evaluate(t)],[qn(Xt),(t,e)=>{for(const n of e)if(!n.evaluate(t))return!1;return!0}]]},any:{type:Xt,overloads:[[[Xt,Xt],(t,[e,n])=>e.evaluate(t)||n.evaluate(t)],[qn(Xt),(t,e)=>{for(const n of e)if(n.evaluate(t))return!0;return!1}]]},"!":[Xt,[Xt],(t,[e])=>!e.evaluate(t)],"is-supported-script":[Xt,[Yt],(t,[e])=>{const n=t.globals&&t.globals.isSupportedScript;return!n||n(e.evaluate(t))}],upcase:[Yt,[Yt],(t,[e])=>e.evaluate(t).toUpperCase()],downcase:[Yt,[Yt],(t,[e])=>e.evaluate(t).toLowerCase()],concat:[Yt,qn(te),(t,e)=>e.map(e=>be(e.evaluate(t))).join("")],"resolved-locale":[Yt,[ee],(t,[e])=>e.evaluate(t).resolvedLocale()]});class ir{constructor(t,e){this.expression=t,this._warningHistory={},this._evaluator=new Me,this._defaultValue=e?function(t){return"color"===t.type&&Xn(t.default)?new de(0,0,0,0):"color"===t.type?de.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null}evaluateWithoutErrorHandling(t,e,n,r,i,o,a,s){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=s||null,this.expression.evaluate(this._evaluator)}evaluate(t,e,n,r,i,o,a,s){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o||null,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=s||null;try{const t=this.expression.evaluate(this._evaluator);if(null==t||"number"==typeof t&&t!=t)return this._defaultValue;if(this._enumValues&&!(t in this._enumValues))throw new we(`Expected value to be one of ${Object.keys(this._enumValues).map(t=>JSON.stringify(t)).join(", ")}, but found ${JSON.stringify(t)} instead.`);return t}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}}}function or(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in Bn}function ar(t,e){const n=new tn(Bn,[],e?function(t){const e={color:Jt,string:Yt,number:Kt,enum:Yt,boolean:Xt,formatted:ne,resolvedImage:re};return"array"===t.type?ie(e[t.value]||te,t.length):e[t.type]}(e):void 0),r=n.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return r?Hn(new ir(r,e)):Wn(n.errors)}class sr{constructor(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!Xe(e.expression)}evaluateWithoutErrorHandling(t,e,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,o)}evaluate(t,e,n,r,i,o){return this._styleExpression.evaluate(t,e,n,r,i,o)}}class lr{constructor(t,e,n,r){this.kind=t,this.zoomStops=n,this._styleExpression=e,this.isStateDependent="camera"!==t&&!Xe(e.expression),this.interpolationType=r}evaluateWithoutErrorHandling(t,e,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,o)}evaluate(t,e,n,r,i,o){return this._styleExpression.evaluate(t,e,n,r,i,o)}interpolationFactor(t,e,n){return this.interpolationType?_n.interpolationFactor(this.interpolationType,t,e,n):0}}function cr(t,e){if("error"===(t=ar(t,e)).result)return t;const n=t.value.expression,r=Ye(n);if(!r&&!Zn(e))return Wn([new Wt("","data expressions not supported")]);const i=Je(n,["zoom","pitch","distance-from-center"]);if(!i&&!$n(e))return Wn([new Wt("","zoom expressions not supported")]);const o=function t(e){let n=null;if(e instanceof wn)n=t(e.result);else if(e instanceof xn){for(const r of e.args)if(n=t(r),n)break}else(e instanceof nn||e instanceof _n)&&e.input instanceof ke&&"zoom"===e.input.name&&(n=e);return n instanceof Wt||e.eachChild(e=>{const r=t(e);r instanceof Wt?n=r:!n&&r?n=new Wt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&r&&n!==r&&(n=new Wt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}(n);return o||i?o instanceof Wt?Wn([o]):o instanceof _n&&!Kn(e)?Wn([new Wt("",'"interpolate" expressions cannot be used with this property')]):Hn(o?new lr(r?"camera":"composite",t.value,o.labels,o instanceof _n?o.interpolation:void 0):new sr(r?"constant":"source",t.value)):Wn([new Wt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class ur{constructor(t,e){this._parameters=t,this._specification=e,Vt(this,function t(e,n){const r="color"===n.type,i=e.stops&&"object"==typeof e.stops[0][0],o=i||!(i||void 0!==e.property),a=e.type||(Kn(n)?"exponential":"interval");if(r&&((e=Vt({},e)).stops&&(e.stops=e.stops.map(t=>[t[0],de.parse(t[1])])),e.default=de.parse(e.default?e.default:n.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!vn[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);let s,l,c;if("exponential"===a)s=nr;else if("interval"===a)s=er;else if("categorical"===a){s=tr,l=Object.create(null);for(const t of e.stops)l[t[0]]=t[1];c=typeof e.stops[0][0]}else{if("identity"!==a)throw new Error(`Unknown function type "${a}"`);s=rr}if(i){const r={},i=[];for(let t=0;t<e.stops.length;t++){const n=e.stops[t],o=n[0].zoom;void 0===r[o]&&(r[o]={zoom:o,type:e.type,property:e.property,default:e.default,stops:[]},i.push(o)),r[o].stops.push([n[0].value,n[1]])}const o=[];for(const e of i)o.push([r[e].zoom,t(r[e],n)]);const a={name:"linear"};return{kind:"composite",interpolationType:a,interpolationFactor:_n.interpolationFactor.bind(void 0,a),zoomStops:o.map(t=>t[0]),evaluate:({zoom:t},r)=>nr({stops:o,base:e.base},n,t).evaluate(t,r)}}if(o){const t="exponential"===a?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:t,interpolationFactor:_n.interpolationFactor.bind(void 0,t),zoomStops:e.stops.map(t=>t[0]),evaluate:({zoom:t})=>s(e,n,t,l,c)}}return{kind:"source",evaluate(t,r){const i=r&&r.properties?r.properties[e.property]:void 0;return void 0===i?Qn(e.default,n.default):s(e,n,i,l,c)}}}(this._parameters,this._specification))}static deserialize(t){return new ur(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function hr(t){const e=t.key,n=t.value,r=t.valueSpec||{},i=t.objectElementValidators||{},o=t.style,a=t.styleSpec;let s=[];const l=Yn(n);if("object"!==l)return[new Ut(e,n,`object expected, ${l} found`)];for(const t in n){const l=t.split(".")[0],c=r[l]||r["*"];let u;if(i[l])u=i[l];else if(r[l])u=Br;else if(i["*"])u=i["*"];else{if(!r["*"]){s.push(new Ut(e,n[t],`unknown property "${t}"`));continue}u=Br}s=s.concat(u({key:(e?e+".":e)+t,value:n[t],valueSpec:c,style:o,styleSpec:a,object:n,objectKey:t},n))}for(const t in r)i[t]||r[t].required&&void 0===r[t].default&&void 0===n[t]&&s.push(new Ut(e,n,`missing required property "${t}"`));return s}function dr(t){const e=t.value,n=t.valueSpec,r=t.style,i=t.styleSpec,o=t.key,a=t.arrayElementValidator||Br;if("array"!==Yn(e))return[new Ut(o,e,`array expected, ${Yn(e)} found`)];if(n.length&&e.length!==n.length)return[new Ut(o,e,`array length ${n.length} expected, length ${e.length} found`)];if(n["min-length"]&&e.length<n["min-length"])return[new Ut(o,e,`array length at least ${n["min-length"]} expected, length ${e.length} found`)];let s={type:n.value,values:n.values,minimum:n.minimum,maximum:n.maximum};i.$version<7&&(s.function=n.function),"object"===Yn(n.value)&&(s=n.value);let l=[];for(let t=0;t<e.length;t++)l=l.concat(a({array:e,arrayIndex:t,value:e[t],valueSpec:s,style:r,styleSpec:i,key:`${o}[${t}]`}));return l}function pr(t){const e=t.key,n=t.value,r=t.valueSpec;let i=Yn(n);if("number"===i&&n!=n&&(i="NaN"),"number"!==i)return[new Ut(e,n,`number expected, ${i} found`)];if("minimum"in r){let i=r.minimum;if("array"===Yn(r.minimum)&&(i=r.minimum[t.arrayIndex]),n<i)return[new Ut(e,n,`${n} is less than the minimum value ${i}`)]}if("maximum"in r){let i=r.maximum;if("array"===Yn(r.maximum)&&(i=r.maximum[t.arrayIndex]),n>i)return[new Ut(e,n,`${n} is greater than the maximum value ${i}`)]}return[]}function fr(t){const e=t.valueSpec,n=qt(t.value.type);let r,i,o,a={};const s="categorical"!==n&&void 0===t.value.property,l=!s,c="array"===Yn(t.value.stops)&&"array"===Yn(t.value.stops[0])&&"object"===Yn(t.value.stops[0][0]),u=hr({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===n)return[new Ut(t.key,t.value,'identity function may not have a "stops" property')];let e=[];const r=t.value;return e=e.concat(dr({key:t.key,value:r,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:h})),"array"===Yn(r)&&0===r.length&&e.push(new Ut(t.key,r,"array must have at least one stop")),e},default:function(t){return Br({key:t.key,value:t.value,valueSpec:e,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===n&&s&&u.push(new Ut(t.key,t.value,'missing required property "property"')),"identity"===n||t.value.stops||u.push(new Ut(t.key,t.value,'missing required property "stops"')),"exponential"===n&&t.valueSpec.expression&&!Kn(t.valueSpec)&&u.push(new Ut(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(l&&!Zn(t.valueSpec)?u.push(new Ut(t.key,t.value,"property functions not supported")):s&&!$n(t.valueSpec)&&u.push(new Ut(t.key,t.value,"zoom functions not supported"))),"categorical"!==n&&!c||void 0!==t.value.property||u.push(new Ut(t.key,t.value,'"property" property is required')),u;function h(t){let n=[];const r=t.value,s=t.key;if("array"!==Yn(r))return[new Ut(s,r,`array expected, ${Yn(r)} found`)];if(2!==r.length)return[new Ut(s,r,`array length 2 expected, length ${r.length} found`)];if(c){if("object"!==Yn(r[0]))return[new Ut(s,r,`object expected, ${Yn(r[0])} found`)];if(void 0===r[0].zoom)return[new Ut(s,r,"object stop key must have zoom")];if(void 0===r[0].value)return[new Ut(s,r,"object stop key must have value")];if(o&&o>qt(r[0].zoom))return[new Ut(s,r[0].zoom,"stop zoom values must appear in ascending order")];qt(r[0].zoom)!==o&&(o=qt(r[0].zoom),i=void 0,a={}),n=n.concat(hr({key:s+"[0]",value:r[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:pr,value:d}}))}else n=n.concat(d({key:s+"[0]",value:r[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},r));return or(Ht(r[1]))?n.concat([new Ut(s+"[1]",r[1],"expressions are not allowed in function stops.")]):n.concat(Br({key:s+"[1]",value:r[1],valueSpec:e,style:t.style,styleSpec:t.styleSpec}))}function d(t,o){const s=Yn(t.value),l=qt(t.value),c=null!==t.value?t.value:o;if(r){if(s!==r)return[new Ut(t.key,c,`${s} stop domain type must match previous stop domain type ${r}`)]}else r=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new Ut(t.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==n){let r=`number expected, ${s} found`;return Zn(e)&&void 0===n&&(r+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ut(t.key,c,r)]}return"categorical"!==n||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==n&&"number"===s&&void 0!==i&&l<i?[new Ut(t.key,c,"stop domain values must appear in ascending order")]:(i=l,"categorical"===n&&l in a?[new Ut(t.key,c,"stop domain values must be unique")]:(a[l]=!0,[])):[new Ut(t.key,c,"integer expected, found "+l)]}}function mr(t){const e=("property"===t.expressionContext?cr:ar)(Ht(t.value),t.valueSpec);if("error"===e.result)return e.value.map(e=>new Ut(`${t.key}${e.key}`,t.value,e.message));const n=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!n.outputDefined())return[new Ut(t.key,t.value,`Invalid data expression for "${t.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===t.expressionContext&&"layout"===t.propertyType&&!Xe(n))return[new Ut(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext)return function t(e,n){const r=new Set(["zoom","feature-state","pitch","distance-from-center"]);for(const t of n.valueSpec.expression.parameters)r.delete(t);if(0===r.size)return[];const i=[];return e instanceof ke&&r.has(e.name)?[new Ut(n.key,n.value,`["${e.name}"] expression is not supported in a filter for a ${n.object.type} layer with id: ${n.object.id}`)]:(e.eachChild(e=>{i.push(...t(e,n))}),i)}(n,t);if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!Je(n,["zoom","feature-state"]))return[new Ut(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!Ye(n))return[new Ut(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function gr(t){const e=t.key,n=t.value,r=t.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(qt(n))&&i.push(new Ut(e,n,`expected one of [${r.values.join(", ")}], ${JSON.stringify(n)} found`)):-1===Object.keys(r.values).indexOf(qt(n))&&i.push(new Ut(e,n,`expected one of [${Object.keys(r.values).join(", ")}], ${JSON.stringify(n)} found`)),i}function yr(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!yr(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}function vr(t,e="fill"){if(null==t)return{filter:()=>!0,needGeometry:!1,needFeature:!1};yr(t)||(t=Er(t));const n=t;let r=!0;try{r=function(t){if(!_r(t))return t;let e=Ht(t);return function t(e){let n=!1;const r=[];if("case"===e[0]){for(let t=1;t<e.length-1;t+=2)n=n||_r(e[t]),r.push(e[t+1]);r.push(e[e.length-1])}else if("match"===e[0]){n=n||_r(e[1]);for(let t=2;t<e.length-1;t+=2)r.push(e[t+1]);r.push(e[e.length-1])}else if("step"===e[0]){n=n||_r(e[1]);for(let t=1;t<e.length-1;t+=2)r.push(e[t+1])}n&&(e.length=0,e.push("any",...r));for(let n=1;n<e.length;n++)t(e[n])}(e),e=function t(e){if(!Array.isArray(e))return e;const n=function(t){if(br.has(t[0]))for(let e=1;e<t.length;e++)if(_r(t[e]))return!0;return t}(e);return!0===n?n:n.map(e=>t(e))}(e),e}(n)}catch(t){console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(n,null,2)}\n        `)}const i=Bt["filter_"+e],o=ar(r,i);let a=null;if("error"===o.result)throw new Error(o.value.map(t=>`${t.key}: ${t.message}`).join(", "));a=(t,e,n)=>o.value.evaluate(t,e,{},n);let s=null,l=null;if(r!==n){const t=ar(n,i);if("error"===t.result)throw new Error(t.value.map(t=>`${t.key}: ${t.message}`).join(", "));s=(e,n,r,i,o)=>t.value.evaluate(e,n,{},r,void 0,void 0,i,o),l=!Ye(t.value.expression)}return a=a,{filter:a,dynamicFilter:s||void 0,needGeometry:wr(r),needFeature:!!l}}function _r(t){if(!Array.isArray(t))return!1;if("pitch"===(e=t[0])||"distance-from-center"===e)return!0;var e;for(let e=1;e<t.length;e++)if(_r(t[e]))return!0;return!1}const br=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function xr(t,e){return t<e?-1:t>e?1:0}function wr(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(let e=1;e<t.length;e++)if(wr(t[e]))return!0;return!1}function Er(t){if(!t)return!0;const e=t[0];return t.length<=1?"any"!==e:"=="===e?Cr(t[1],t[2],"=="):"!="===e?Or(Cr(t[1],t[2],"==")):"<"===e||">"===e||"<="===e||">="===e?Cr(t[1],t[2],e):"any"===e?(n=t.slice(1),["any"].concat(n.map(Er))):"all"===e?["all"].concat(t.slice(1).map(Er)):"none"===e?["all"].concat(t.slice(1).map(Er).map(Or)):"in"===e?Sr(t[1],t.slice(2)):"!in"===e?Or(Sr(t[1],t.slice(2))):"has"===e?Tr(t[1]):"!has"===e?Or(Tr(t[1])):"within"!==e||t;var n}function Cr(t,e,n){switch(t){case"$type":return["filter-type-"+n,e];case"$id":return["filter-id-"+n,e];default:return["filter-"+n,t,e]}}function Sr(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(t=>typeof t!=typeof e[0])?["filter-in-large",t,["literal",e.sort(xr)]]:["filter-in-small",t,["literal",e]]}}function Tr(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function Or(t){return["!",t]}function Ir(t){if(yr(Ht(t.value))){const e=Ht(t.layerType);return mr(Vt({},t,{expressionContext:"filter",valueSpec:t.styleSpec["filter_"+(e||"fill")]}))}return function t(e){const n=e.value,r=e.key;if("array"!==Yn(n))return[new Ut(r,n,`array expected, ${Yn(n)} found`)];const i=e.styleSpec;let o,a=[];if(n.length<1)return[new Ut(r,n,"filter array must have at least 1 element")];switch(a=a.concat(gr({key:r+"[0]",value:n[0],valueSpec:i.filter_operator,style:e.style,styleSpec:e.styleSpec})),qt(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&"$type"===qt(n[1])&&a.push(new Ut(r,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":3!==n.length&&a.push(new Ut(r,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(o=Yn(n[1]),"string"!==o&&a.push(new Ut(r+"[1]",n[1],`string expected, ${o} found`)));for(let t=2;t<n.length;t++)o=Yn(n[t]),"$type"===qt(n[1])?a=a.concat(gr({key:`${r}[${t}]`,value:n[t],valueSpec:i.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==o&&"number"!==o&&"boolean"!==o&&a.push(new Ut(`${r}[${t}]`,n[t],`string, number, or boolean expected, ${o} found`));break;case"any":case"all":case"none":for(let i=1;i<n.length;i++)a=a.concat(t({key:`${r}[${i}]`,value:n[i],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":o=Yn(n[1]),2!==n.length?a.push(new Ut(r,n,`filter array for "${n[0]}" operator must have 2 elements`)):"string"!==o&&a.push(new Ut(r+"[1]",n[1],`string expected, ${o} found`));break;case"within":o=Yn(n[1]),2!==n.length?a.push(new Ut(r,n,`filter array for "${n[0]}" operator must have 2 elements`)):"object"!==o&&a.push(new Ut(r+"[1]",n[1],`object expected, ${o} found`))}return a}(t)}function Ar(t,e){const n=t.key,r=t.style,i=t.styleSpec,o=t.value,a=t.objectKey,s=i[`${e}_${t.layerType}`];if(!s)return[];const l=a.match(/^(.*)-transition$/);if("paint"===e&&l&&s[l[1]]&&s[l[1]].transition)return Br({key:n,value:o,valueSpec:i.transition,style:r,styleSpec:i});const c=t.valueSpec||s[a];if(!c)return[new Ut(n,o,`unknown property "${a}"`)];let u;if("string"===Yn(o)&&Zn(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(o)))return[new Ut(n,o,`"${a}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(u[1])} }\`.`)];const h=[];return"symbol"===t.layerType&&("text-field"===a&&r&&!r.glyphs&&h.push(new Ut(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&Xn(Ht(o))&&"identity"===qt(o.type)&&h.push(new Ut(n,o,'"text-font" does not support identity functions'))),h.concat(Br({key:t.key,value:o,valueSpec:c,style:r,styleSpec:i,expressionContext:"property",propertyType:e,propertyKey:a}))}function Mr(t){return Ar(t,"paint")}function kr(t){return Ar(t,"layout")}function Pr(t){let e=[];const n=t.value,r=t.key,i=t.style,o=t.styleSpec;n.type||n.ref||e.push(new Ut(r,n,'either "type" or "ref" is required'));let a=qt(n.type);const s=qt(n.ref);if(n.id){const o=qt(n.id);for(let a=0;a<t.arrayIndex;a++){const t=i.layers[a];qt(t.id)===o&&e.push(new Ut(r,n.id,`duplicate layer id "${n.id}", previously used at line ${t.id.__line__}`))}}if("ref"in n){let t;["type","source","source-layer","filter","layout"].forEach(t=>{t in n&&e.push(new Ut(r,n[t],`"${t}" is prohibited for ref layers`))}),i.layers.forEach(e=>{qt(e.id)===s&&(t=e)}),t?t.ref?e.push(new Ut(r,n.ref,"ref cannot reference another ref layer")):a=qt(t.type):e.push(new Ut(r,n.ref,`ref layer "${s}" not found`))}else if("background"!==a&&"sky"!==a)if(n.source){const t=i.sources&&i.sources[n.source],o=t&&qt(t.type);t?"vector"===o&&"raster"===a?e.push(new Ut(r,n.source,`layer "${n.id}" requires a raster source`)):"raster"===o&&"raster"!==a?e.push(new Ut(r,n.source,`layer "${n.id}" requires a vector source`)):"vector"!==o||n["source-layer"]?"raster-dem"===o&&"hillshade"!==a?e.push(new Ut(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==a||!n.paint||!n.paint["line-gradient"]||"geojson"===o&&t.lineMetrics||e.push(new Ut(r,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new Ut(r,n,`layer "${n.id}" must specify a "source-layer"`)):e.push(new Ut(r,n.source,`source "${n.source}" not found`))}else e.push(new Ut(r,n,'missing required property "source"'));return e=e.concat(hr({key:r,value:n,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Br({key:r+".type",value:n.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"}),filter:t=>Ir(Vt({layerType:a},t)),layout:t=>hr({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>kr(Vt({layerType:a},t))}}),paint:t=>hr({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>Mr(Vt({layerType:a},t))}})}})),e}function Dr(t){const e=t.value,n=t.key,r=Yn(e);return"string"!==r?[new Ut(n,e,`string expected, ${r} found`)]:[]}const Rr={promoteId:function({key:t,value:e}){if("string"===Yn(e))return Dr({key:t,value:e});{const n=[];for(const r in e)n.push(...Dr({key:`${t}.${r}`,value:e[r]}));return n}}};function Lr(t){const e=t.value,n=t.key,r=t.styleSpec,i=t.style;if(!e.type)return[new Ut(n,e,'"type" is required')];const o=qt(e.type);let a;switch(o){case"vector":case"raster":case"raster-dem":return a=hr({key:n,value:e,valueSpec:r["source_"+o.replace("-","_")],style:t.style,styleSpec:r,objectElementValidators:Rr}),a;case"geojson":if(a=hr({key:n,value:e,valueSpec:r.source_geojson,style:i,styleSpec:r,objectElementValidators:Rr}),e.cluster)for(const t in e.clusterProperties){const[r,i]=e.clusterProperties[t],o="string"==typeof r?[r,["accumulated"],["get",t]]:r;a.push(...mr({key:`${n}.${t}.map`,value:i,expressionContext:"cluster-map"})),a.push(...mr({key:`${n}.${t}.reduce`,value:o,expressionContext:"cluster-reduce"}))}return a;case"video":return hr({key:n,value:e,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return hr({key:n,value:e,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new Ut(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return gr({key:n+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:r})}}function Nr(t){const e=t.value,n=t.styleSpec,r=n.light,i=t.style;let o=[];const a=Yn(e);if(void 0===e)return o;if("object"!==a)return o=o.concat([new Ut("light",e,`object expected, ${a} found`)]),o;for(const t in e){const a=t.match(/^(.*)-transition$/);o=o.concat(a&&r[a[1]]&&r[a[1]].transition?Br({key:t,value:e[t],valueSpec:n.transition,style:i,styleSpec:n}):r[t]?Br({key:t,value:e[t],valueSpec:r[t],style:i,styleSpec:n}):[new Ut(t,e[t],`unknown property "${t}"`)])}return o}function jr(t){const e=t.value,n=t.key,r=t.style,i=t.styleSpec,o=i.terrain;let a=[];const s=Yn(e);if(void 0===e)return a;if("object"!==s)return a=a.concat([new Ut("terrain",e,`object expected, ${s} found`)]),a;for(const t in e){const n=t.match(/^(.*)-transition$/);a=a.concat(n&&o[n[1]]&&o[n[1]].transition?Br({key:t,value:e[t],valueSpec:i.transition,style:r,styleSpec:i}):o[t]?Br({key:t,value:e[t],valueSpec:o[t],style:r,styleSpec:i}):[new Ut(t,e[t],`unknown property "${t}"`)])}if(e.source){const t=r.sources&&r.sources[e.source],i=t&&qt(t.type);t?"raster-dem"!==i&&a.push(new Ut(n,e.source,`terrain cannot be used with a source of type ${i}, it only be used with a "raster-dem" source type`)):a.push(new Ut(n,e.source,`source "${e.source}" not found`))}else a.push(new Ut(n,e,'terrain is missing required property "source"'));return a}function Fr(t){const e=t.value,n=t.style,r=t.styleSpec,i=r.fog;let o=[];const a=Yn(e);if(void 0===e)return o;if("object"!==a)return o=o.concat([new Ut("fog",e,`object expected, ${a} found`)]),o;for(const t in e){const a=t.match(/^(.*)-transition$/);o=o.concat(a&&i[a[1]]&&i[a[1]].transition?Br({key:t,value:e[t],valueSpec:r.transition,style:n,styleSpec:r}):i[t]?Br({key:t,value:e[t],valueSpec:i[t],style:n,styleSpec:r}):[new Ut(t,e[t],`unknown property "${t}"`)])}return o}const zr={"*":()=>[],array:dr,boolean:function(t){const e=t.value,n=t.key,r=Yn(e);return"boolean"!==r?[new Ut(n,e,`boolean expected, ${r} found`)]:[]},number:pr,color:function(t){const e=t.key,n=t.value,r=Yn(n);return"string"!==r?[new Ut(e,n,`color expected, ${r} found`)]:null===he.parseCSSColor(n)?[new Ut(e,n,`color expected, "${n}" found`)]:[]},constants:Gt,enum:gr,filter:Ir,function:fr,layer:Pr,object:hr,source:Lr,light:Nr,terrain:jr,fog:Fr,string:Dr,formatted:function(t){return 0===Dr(t).length?[]:mr(t)},resolvedImage:function(t){return 0===Dr(t).length?[]:mr(t)},projection:function(t){const e=t.value,n=t.styleSpec,r=n.projection,i=t.style;let o=[];const a=Yn(e);if("object"===a)for(const t in e)o=o.concat(Br({key:t,value:e[t],valueSpec:r[t],style:i,styleSpec:n}));else"string"!==a&&(o=o.concat([new Ut("projection",e,`object or string expected, ${a} found`)]));return o}};function Br(t){const e=t.value,n=t.valueSpec,r=t.styleSpec;return n.expression&&Xn(qt(e))?fr(t):n.expression&&or(Ht(e))?mr(t):n.type&&zr[n.type]?zr[n.type](t):hr(Vt({},t,{valueSpec:n.type?r[n.type]:n}))}function Ur(t){const e=t.value,n=t.key,r=Dr(t);return r.length||(-1===e.indexOf("{fontstack}")&&r.push(new Ut(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&r.push(new Ut(n,e,'"glyphs" url must include a "{range}" token'))),r}function Gr(t,e=Bt){let n=[];return n=n.concat(Br({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:Ur,"*":()=>[]}})),t.constants&&(n=n.concat(Gt({key:"constants",value:t.constants,style:t,styleSpec:e}))),Vr(n)}function Vr(t){return[].concat(t).sort((t,e)=>t.line-e.line)}function qr(t){return function(...e){return Vr(t.apply(this,e))}}Gr.source=qr(Lr),Gr.light=qr(Nr),Gr.terrain=qr(jr),Gr.fog=qr(Fr),Gr.layer=qr(Pr),Gr.filter=qr(Ir),Gr.paintProperty=qr(Mr),Gr.layoutProperty=qr(kr);const Hr=Gr,Wr=Hr.light,Zr=Hr.fog,$r=Hr.paintProperty,Kr=Hr.layoutProperty;function Yr(t,e){let n=!1;if(e&&e.length)for(const r of e)t.fire(new Ft(new Error(r.message))),n=!0;return n}var Xr=Jr;function Jr(t,e,n){var r=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var i=new Int32Array(this.arrayBuffer);t=i[0],this.d=(e=i[1])+2*(n=i[2]);for(var o=0;o<this.d*this.d;o++){var a=i[3+o],s=i[3+o+1];r.push(a===s?null:i.subarray(a,s))}var l=i[3+r.length+1];this.keys=i.subarray(i[3+r.length],l),this.bboxes=i.subarray(l),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var c=0;c<this.d*this.d;c++)r.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var u=n/e*t;this.min=-u,this.max=t+u}Jr.prototype.insert=function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},Jr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Jr.prototype._insertCell=function(t,e,n,r,i,o){this.cells[i].push(o)},Jr.prototype.query=function(t,e,n,r,i){var o=this.min,a=this.max;if(t<=o&&e<=o&&a<=n&&a<=r&&!i)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(t,e,n,r,this._queryCell,s,{},i),s},Jr.prototype._queryCell=function(t,e,n,r,i,o,a,s){var l=this.cells[i];if(null!==l)for(var c=this.keys,u=this.bboxes,h=0;h<l.length;h++){var d=l[h];if(void 0===a[d]){var p=4*d;(s?s(u[p+0],u[p+1],u[p+2],u[p+3]):t<=u[p+2]&&e<=u[p+3]&&n>=u[p+0]&&r>=u[p+1])?(a[d]=!0,o.push(c[d])):a[d]=!1}}},Jr.prototype._forEachCell=function(t,e,n,r,i,o,a,s){for(var l=this._convertToCellCoord(t),c=this._convertToCellCoord(e),u=this._convertToCellCoord(n),h=this._convertToCellCoord(r),d=l;d<=u;d++)for(var p=c;p<=h;p++){var f=this.d*p+d;if((!s||s(this._convertFromCellCoord(d),this._convertFromCellCoord(p),this._convertFromCellCoord(d+1),this._convertFromCellCoord(p+1)))&&i.call(this,t,e,n,r,f,o,a,s))return}},Jr.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},Jr.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},Jr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=3+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(e+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var o=e,a=0;a<t.length;a++){var s=t[a];i[3+a]=o,i.set(s,o),o+=s.length}return i[3+t.length]=o,i.set(this.keys,o),i[3+t.length+1]=o+=this.keys.length,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer};const{ImageData:Qr,ImageBitmap:ti}=s,ei={};function ni(t,e,n={}){Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),ei[t]={klass:e,omit:n.omit||[],shallow:n.shallow||[]}}ni("Object",Object),Xr.serialize=function(t,e){const n=t.toArrayBuffer();return e&&e.push(n),{buffer:n}},Xr.deserialize=function(t){return new Xr(t.buffer)},ni("Grid",Xr),ni("Color",de),ni("Error",Error),ni("ResolvedImage",ge),ni("StylePropertyFunction",ur),ni("StyleExpression",ir,{omit:["_evaluator"]}),ni("ZoomDependentExpression",lr),ni("ZoomConstantExpression",sr),ni("CompoundExpression",ke,{omit:["_evaluate"]});for(const t in Bn)Bn[t]._classRegistryKey||ni("Expression_"+t,Bn[t]);function ri(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function ii(t){return ti&&t instanceof ti}function oi(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(ri(t)||ii(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){const n=t;return e&&e.push(n.buffer),n}if(t instanceof Qr)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){const n=[];for(const r of t)n.push(oi(r,e));return n}if("object"==typeof t){const n=t.constructor,r=n._classRegistryKey;if(!r)throw new Error("can't serialize object of unregistered class");const i=n.serialize?n.serialize(t,e):{};if(!n.serialize){for(const n in t){if(!t.hasOwnProperty(n))continue;if(ei[r].omit.indexOf(n)>=0)continue;const o=t[n];i[n]=ei[r].shallow.indexOf(n)>=0?o:oi(o,e)}t instanceof Error&&(i.message=t.message)}if(i.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==r&&(i.$name=r),i}throw new Error("can't serialize object of type "+typeof t)}function ai(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||ri(t)||ii(t)||ArrayBuffer.isView(t)||t instanceof Qr)return t;if(Array.isArray(t))return t.map(ai);if("object"==typeof t){const e=t.$name||"Object",{klass:n}=ei[e];if(!n)throw new Error("can't deserialize unregistered class "+e);if(n.deserialize)return n.deserialize(t);const r=Object.create(n.prototype);for(const n of Object.keys(t)){if("$name"===n)continue;const i=t[n];r[n]=ei[e].shallow.indexOf(n)>=0?i:ai(i)}return r}throw new Error("can't deserialize object of type "+typeof t)}class si{constructor(){this.first=!0}update(t,e){const n=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=n,!0))}}const li=t=>t>=1536&&t<=1791,ci=t=>t>=1872&&t<=1919,ui=t=>t>=2208&&t<=2303,hi=t=>t>=11904&&t<=12031,di=t=>t>=12032&&t<=12255,pi=t=>t>=12272&&t<=12287,fi=t=>t>=12288&&t<=12351,mi=t=>t>=12352&&t<=12447,gi=t=>t>=12448&&t<=12543,yi=t=>t>=12544&&t<=12591,vi=t=>t>=12704&&t<=12735,_i=t=>t>=12736&&t<=12783,bi=t=>t>=12784&&t<=12799,xi=t=>t>=12800&&t<=13055,wi=t=>t>=13056&&t<=13311,Ei=t=>t>=13312&&t<=19903,Ci=t=>t>=19968&&t<=40959,Si=t=>t>=40960&&t<=42127,Ti=t=>t>=42128&&t<=42191,Oi=t=>t>=44032&&t<=55215,Ii=t=>t>=63744&&t<=64255,Ai=t=>t>=64336&&t<=65023,Mi=t=>t>=65040&&t<=65055,ki=t=>t>=65072&&t<=65103,Pi=t=>t>=65104&&t<=65135,Di=t=>t>=65136&&t<=65279,Ri=t=>t>=65280&&t<=65519;function Li(t){for(const e of t)if(Fi(e.charCodeAt(0)))return!0;return!1}function Ni(t){for(const e of t)if(!ji(e.charCodeAt(0)))return!1;return!0}function ji(t){return!(li(t)||ci(t)||ui(t)||Ai(t)||Di(t))}function Fi(t){return!(746!==t&&747!==t&&(t<4352||!(vi(t)||yi(t)||ki(t)&&!(t>=65097&&t<=65103)||Ii(t)||wi(t)||hi(t)||_i(t)||!(!fi(t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||Ei(t)||Ci(t)||xi(t)||(t=>t>=12592&&t<=12687)(t)||(t=>t>=43360&&t<=43391)(t)||(t=>t>=55216&&t<=55295)(t)||(t=>t>=4352&&t<=4607)(t)||Oi(t)||mi(t)||pi(t)||(t=>t>=12688&&t<=12703)(t)||di(t)||bi(t)||gi(t)&&12540!==t||!(!Ri(t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!Pi(t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||(t=>t>=5120&&t<=5759)(t)||(t=>t>=6320&&t<=6399)(t)||Mi(t)||(t=>t>=19904&&t<=19967)(t)||Si(t)||Ti(t))))}function zi(t){return!(Fi(t)||function(t){return!!((t=>t>=128&&t<=255)(t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||(t=>t>=8192&&t<=8303)(t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||(t=>t>=8448&&t<=8527)(t)||(t=>t>=8528&&t<=8591)(t)||(t=>t>=8960&&t<=9215)(t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||(t=>t>=9216&&t<=9279)(t)&&9251!==t||(t=>t>=9280&&t<=9311)(t)||(t=>t>=9312&&t<=9471)(t)||(t=>t>=9632&&t<=9727)(t)||(t=>t>=9728&&t<=9983)(t)&&!(t>=9754&&t<=9759)||(t=>t>=11008&&t<=11263)(t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||fi(t)||gi(t)||(t=>t>=57344&&t<=63743)(t)||ki(t)||Pi(t)||Ri(t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function Bi(t){return t>=1424&&t<=2303||Ai(t)||Di(t)}function Ui(t,e){return!(!e&&Bi(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||(t=>t>=6016&&t<=6143)(t))}function Gi(t){for(const e of t)if(Bi(e.charCodeAt(0)))return!0;return!1}const Vi="deferred",qi="loading",Hi="loaded";let Wi=null,Zi="unavailable",$i=null;const Ki=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&(Zi="error"),Wi&&Wi(t)};function Yi(){Xi.fire(new jt("pluginStateChange",{pluginStatus:Zi,pluginURL:$i}))}const Xi=new zt,Ji=function(){return Zi},Qi=function(){if(Zi!==Vi||!$i)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Zi=qi,Yi(),$i&&Ot({url:$i},t=>{t?Ki(t):(Zi=Hi,Yi())})},to={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Zi===Hi||null!=to.applyArabicShaping,isLoading:()=>Zi===qi,setState(t){Zi=t.pluginStatus,$i=t.pluginURL},isParsed:()=>null!=to.applyArabicShaping&&null!=to.processBidirectionalText&&null!=to.processStyledBidirectionalText,getPluginURL:()=>$i};class eo{constructor(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition,this.pitch=e.pitch):(this.now=0,this.fadeDuration=0,this.zoomHistory=new si,this.transition={},this.pitch=0)}isSupportedScript(t){return function(t,e){for(const n of t)if(!Ui(n.charCodeAt(0),e))return!1;return!0}(t,to.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,e=t-Math.floor(t),n=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*e}}}class no{constructor(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(Xn(t))return new ur(t,e);if(or(t)){const n=cr(t,e);if("error"===n.result)throw new Error(n.value.map(t=>`${t.key}: ${t.message}`).join(", "));return n.value}{let n=t;return"string"==typeof t&&"color"===e.type&&(n=de.parse(t)),{kind:"constant",evaluate:()=>n}}}(void 0===e?t.specification.default:e,t.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(t,e,n){return this.property.possiblyEvaluate(this,t,e,n)}}class ro{constructor(t){this.property=t,this.value=new no(t,void 0)}transitioned(t,e){return new oo(this.property,this.value,e,x({},t.transition,this.transition),t.now)}untransitioned(){return new oo(this.property,this.value,null,{},0)}}class io{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return k(this._values[t].value.value)}setValue(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new ro(this._values[t].property)),this._values[t].value=new no(this._values[t].property,null===e?void 0:k(e))}getTransition(t){return k(this._values[t].transition)}setTransition(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new ro(this._values[t].property)),this._values[t].transition=k(e)||void 0}serialize(){const t={};for(const e of Object.keys(this._values)){const n=this.getValue(e);void 0!==n&&(t[e]=n);const r=this.getTransition(e);void 0!==r&&(t[e+"-transition"]=r)}return t}transitioned(t,e){const n=new ao(this._properties);for(const r of Object.keys(this._values))n._values[r]=this._values[r].transitioned(t,e._values[r]);return n}untransitioned(){const t=new ao(this._properties);for(const e of Object.keys(this._values))t._values[e]=this._values[e].untransitioned();return t}}class oo{constructor(t,e,n,r,i){const o=r.delay||0,a=r.duration||0;i=i||0,this.property=t,this.value=e,this.begin=i+o,this.end=this.begin+a,t.specification.transition&&(r.delay||r.duration)&&(this.prior=n)}possiblyEvaluate(t,e,n){const r=t.now||0,i=this.value.possiblyEvaluate(t,e,n),o=this.prior;if(o){if(r>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(r<this.begin)return o.possiblyEvaluate(t,e,n);{const a=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(t,e,n),i,f(a))}}return i}}class ao{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,e,n){const r=new co(this._properties);for(const i of Object.keys(this._values))r._values[i]=this._values[i].possiblyEvaluate(t,e,n);return r}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class so{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}getValue(t){return k(this._values[t].value)}setValue(t,e){this._values[t]=new no(this._values[t].property,null===e?void 0:k(e))}serialize(){const t={};for(const e of Object.keys(this._values)){const n=this.getValue(e);void 0!==n&&(t[e]=n)}return t}possiblyEvaluate(t,e,n){const r=new co(this._properties);for(const i of Object.keys(this._values))r._values[i]=this._values[i].possiblyEvaluate(t,e,n);return r}}class lo{constructor(t,e,n){this.property=t,this.value=e,this.parameters=n}isConstant(){return"constant"===this.value.kind}constantOr(t){return"constant"===this.value.kind?this.value.value:t}evaluate(t,e,n,r){return this.property.evaluate(this.value,this.parameters,t,e,n,r)}}class co{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class uo{constructor(t){this.specification=t}possiblyEvaluate(t,e){return t.expression.evaluate(e)}interpolate(t,e,n){const r=on[this.specification.type];return r?r(t,e,n):t}}class ho{constructor(t,e){this.specification=t,this.overrides=e}possiblyEvaluate(t,e,n,r){return new lo(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},n,r)}:t.expression,e)}interpolate(t,e,n){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new lo(this,{kind:"constant",value:void 0},t.parameters);const r=on[this.specification.type];return r?new lo(this,{kind:"constant",value:r(t.value.value,e.value.value,n)},t.parameters):t}evaluate(t,e,n,r,i,o){return"constant"===t.kind?t.value:t.evaluate(e,n,r,i,o)}}class po extends ho{possiblyEvaluate(t,e,n,r){if(void 0===t.value)return new lo(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){const i=t.expression.evaluate(e,null,{},n,r),o="resolvedImage"===t.property.specification.type&&"string"!=typeof i?i.name:i,a=this._calculate(o,o,o,e);return new lo(this,{kind:"constant",value:a},e)}if("camera"===t.expression.kind){const n=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new lo(this,{kind:"constant",value:n},e)}return new lo(this,t.expression,e)}evaluate(t,e,n,r,i,o){if("source"===t.kind){const a=t.evaluate(e,n,r,i,o);return this._calculate(a,a,a,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},n,r),t.evaluate({zoom:Math.floor(e.zoom)},n,r),t.evaluate({zoom:Math.floor(e.zoom)+1},n,r),e):t.value}_calculate(t,e,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e,other:n}:{from:n,to:e,other:t}}interpolate(t){return t}}class fo{constructor(t){this.specification=t}possiblyEvaluate(t,e,n,r){if(void 0!==t.value){if("constant"===t.expression.kind){const i=t.expression.evaluate(e,null,{},n,r);return this._calculate(i,i,i,e)}return this._calculate(t.expression.evaluate(new eo(Math.floor(e.zoom-1),e)),t.expression.evaluate(new eo(Math.floor(e.zoom),e)),t.expression.evaluate(new eo(Math.floor(e.zoom+1),e)),e)}}_calculate(t,e,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}}interpolate(t){return t}}class mo{constructor(t){this.specification=t}possiblyEvaluate(t,e,n,r){return!!t.expression.evaluate(e,null,{},n,r)}interpolate(){return!1}}class go{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const e in t){const n=t[e];n.specification.overridable&&this.overridableProperties.push(e);const r=this.defaultPropertyValues[e]=new no(n,void 0),i=this.defaultTransitionablePropertyValues[e]=new ro(n);this.defaultTransitioningPropertyValues[e]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=r.possiblyEvaluate({})}}}function yo(t,e){return 256*(t=y(Math.floor(t),0,255))+y(Math.floor(e),0,255)}ni("DataDrivenProperty",ho),ni("DataConstantProperty",uo),ni("CrossFadedDataDrivenProperty",po),ni("CrossFadedProperty",fo),ni("ColorRampProperty",mo);const vo={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class _o{constructor(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class bo{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function xo(t,e=1){let n=0,r=0;return{members:t.map(t=>{const i=vo[t.type].BYTES_PER_ELEMENT,o=n=wo(n,Math.max(e,i)),a=t.components||1;return r=Math.max(r,i),n+=i*a,{name:t.name,type:t.type,components:a,offset:o}}),size:wo(n,Math.max(r,e)),alignment:e}}function wo(t,e){return Math.ceil(t/e)*e}class Eo extends bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const r=2*t;return this.int16[r+0]=e,this.int16[r+1]=n,t}}Eo.prototype.bytesPerElement=4,ni("StructArrayLayout2i4",Eo);class Co extends bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}emplace(t,e,n,r,i){const o=4*t;return this.int16[o+0]=e,this.int16[o+1]=n,this.int16[o+2]=r,this.int16[o+3]=i,t}}Co.prototype.bytesPerElement=8,ni("StructArrayLayout4i8",Co);class So extends bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,a){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,n,r,i,o,a)}emplace(t,e,n,r,i,o,a,s){const l=6*t,c=12*t,u=3*t;return this.int16[l+0]=e,this.int16[l+1]=n,this.uint8[c+4]=r,this.uint8[c+5]=i,this.uint8[c+6]=o,this.uint8[c+7]=a,this.float32[u+2]=s,t}}So.prototype.bytesPerElement=12,ni("StructArrayLayout2i4ub1f12",So);class To extends bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)}emplace(t,e,n,r){const i=3*t;return this.float32[i+0]=e,this.float32[i+1]=n,this.float32[i+2]=r,t}}To.prototype.bytesPerElement=12,ni("StructArrayLayout3f12",To);class Oo extends bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,a,s,l,c){const u=this.length;return this.resize(u+1),this.emplace(u,t,e,n,r,i,o,a,s,l,c)}emplace(t,e,n,r,i,o,a,s,l,c,u){const h=10*t;return this.uint16[h+0]=e,this.uint16[h+1]=n,this.uint16[h+2]=r,this.uint16[h+3]=i,this.uint16[h+4]=o,this.uint16[h+5]=a,this.uint16[h+6]=s,this.uint16[h+7]=l,this.uint16[h+8]=c,this.uint16[h+9]=u,t}}Oo.prototype.bytesPerElement=20,ni("StructArrayLayout10ui20",Oo);class Io extends bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,a,s){const l=this.length;return this.resize(l+1),this.emplace(l,t,e,n,r,i,o,a,s)}emplace(t,e,n,r,i,o,a,s,l){const c=8*t;return this.uint16[c+0]=e,this.uint16[c+1]=n,this.uint16[c+2]=r,this.uint16[c+3]=i,this.uint16[c+4]=o,this.uint16[c+5]=a,this.uint16[c+6]=s,this.uint16[c+7]=l,t}}Io.prototype.bytesPerElement=16,ni("StructArrayLayout8ui16",Io);class Ao extends bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,a,s,l,c,u,h,d,p,f,m){const g=this.length;return this.resize(g+1),this.emplace(g,t,e,n,r,i,o,a,s,l,c,u,h,d,p,f,m)}emplace(t,e,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g){const y=16*t;return this.int16[y+0]=e,this.int16[y+1]=n,this.int16[y+2]=r,this.int16[y+3]=i,this.uint16[y+4]=o,this.uint16[y+5]=a,this.uint16[y+6]=s,this.uint16[y+7]=l,this.int16[y+8]=c,this.int16[y+9]=u,this.int16[y+10]=h,this.int16[y+11]=d,this.int16[y+12]=p,this.int16[y+13]=f,this.int16[y+14]=m,this.int16[y+15]=g,t}}Ao.prototype.bytesPerElement=32,ni("StructArrayLayout4i4ui4i4i32",Ao);class Mo extends bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint32[1*t+0]=e,t}}Mo.prototype.bytesPerElement=4,ni("StructArrayLayout1ul4",Mo);class ko extends bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,a,s,l,c,u,h,d){const p=this.length;return this.resize(p+1),this.emplace(p,t,e,n,r,i,o,a,s,l,c,u,h,d)}emplace(t,e,n,r,i,o,a,s,l,c,u,h,d,p){const f=20*t,m=10*t;return this.int16[f+0]=e,this.int16[f+1]=n,this.int16[f+2]=r,this.int16[f+3]=i,this.int16[f+4]=o,this.float32[m+3]=a,this.float32[m+4]=s,this.float32[m+5]=l,this.float32[m+6]=c,this.int16[f+14]=u,this.uint32[m+8]=h,this.uint16[f+18]=d,this.uint16[f+19]=p,t}}ko.prototype.bytesPerElement=40,ni("StructArrayLayout5i4f1i1ul2ui40",ko);class Po extends bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,a){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,n,r,i,o,a)}emplace(t,e,n,r,i,o,a,s){const l=8*t;return this.int16[l+0]=e,this.int16[l+1]=n,this.int16[l+2]=r,this.int16[l+4]=i,this.int16[l+5]=o,this.int16[l+6]=a,this.int16[l+7]=s,t}}Po.prototype.bytesPerElement=16,ni("StructArrayLayout3i2i2i16",Po);class Do extends bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i){const o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,r,i)}emplace(t,e,n,r,i,o){const a=4*t,s=8*t;return this.float32[a+0]=e,this.float32[a+1]=n,this.float32[a+2]=r,this.int16[s+6]=i,this.int16[s+7]=o,t}}Do.prototype.bytesPerElement=16,ni("StructArrayLayout2f1f2i16",Do);class Ro extends bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}emplace(t,e,n,r,i){const o=12*t,a=3*t;return this.uint8[o+0]=e,this.uint8[o+1]=n,this.float32[a+1]=r,this.float32[a+2]=i,t}}Ro.prototype.bytesPerElement=12,ni("StructArrayLayout2ub2f12",Ro);class Lo extends bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)}emplace(t,e,n,r){const i=3*t;return this.uint16[i+0]=e,this.uint16[i+1]=n,this.uint16[i+2]=r,t}}Lo.prototype.bytesPerElement=6,ni("StructArrayLayout3ui6",Lo);class No extends bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,y,v,_,b){const x=this.length;return this.resize(x+1),this.emplace(x,t,e,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,y,v,_,b)}emplace(t,e,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,y,v,_,b,x){const w=30*t,E=15*t,C=60*t;return this.int16[w+0]=e,this.int16[w+1]=n,this.int16[w+2]=r,this.float32[E+2]=i,this.float32[E+3]=o,this.uint16[w+8]=a,this.uint16[w+9]=s,this.uint32[E+5]=l,this.uint32[E+6]=c,this.uint32[E+7]=u,this.uint16[w+16]=h,this.uint16[w+17]=d,this.uint16[w+18]=p,this.float32[E+10]=f,this.float32[E+11]=m,this.uint8[C+48]=g,this.uint8[C+49]=y,this.uint8[C+50]=v,this.uint32[E+13]=_,this.int16[w+28]=b,this.uint8[C+58]=x,t}}No.prototype.bytesPerElement=60,ni("StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60",No);class jo extends bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,y,v,_,b,x,w,E,C,S,T,O,I,A){const M=this.length;return this.resize(M+1),this.emplace(M,t,e,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,y,v,_,b,x,w,E,C,S,T,O,I,A)}emplace(t,e,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,y,v,_,b,x,w,E,C,S,T,O,I,A,M){const k=38*t,P=19*t;return this.int16[k+0]=e,this.int16[k+1]=n,this.int16[k+2]=r,this.float32[P+2]=i,this.float32[P+3]=o,this.int16[k+8]=a,this.int16[k+9]=s,this.int16[k+10]=l,this.int16[k+11]=c,this.int16[k+12]=u,this.int16[k+13]=h,this.uint16[k+14]=d,this.uint16[k+15]=p,this.uint16[k+16]=f,this.uint16[k+17]=m,this.uint16[k+18]=g,this.uint16[k+19]=y,this.uint16[k+20]=v,this.uint16[k+21]=_,this.uint16[k+22]=b,this.uint16[k+23]=x,this.uint16[k+24]=w,this.uint16[k+25]=E,this.uint16[k+26]=C,this.uint16[k+27]=S,this.uint16[k+28]=T,this.uint32[P+15]=O,this.float32[P+16]=I,this.float32[P+17]=A,this.float32[P+18]=M,t}}jo.prototype.bytesPerElement=76,ni("StructArrayLayout3i2f6i15ui1ul3f76",jo);class Fo extends bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.float32[1*t+0]=e,t}}Fo.prototype.bytesPerElement=4,ni("StructArrayLayout1f4",Fo);class zo extends bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)}emplace(t,e,n,r){const i=3*t;return this.int16[i+0]=e,this.int16[i+1]=n,this.int16[i+2]=r,t}}zo.prototype.bytesPerElement=6,ni("StructArrayLayout3i6",zo);class Bo extends bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}emplace(t,e,n,r,i){const o=6*t;return this.uint32[3*t+0]=e,this.uint16[o+2]=n,this.uint16[o+3]=r,this.uint16[o+4]=i,t}}Bo.prototype.bytesPerElement=12,ni("StructArrayLayout1ul3ui12",Bo);class Uo extends bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const r=2*t;return this.uint16[r+0]=e,this.uint16[r+1]=n,t}}Uo.prototype.bytesPerElement=4,ni("StructArrayLayout2ui4",Uo);class Go extends bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint16[1*t+0]=e,t}}Go.prototype.bytesPerElement=2,ni("StructArrayLayout1ui2",Go);class Vo extends bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const r=2*t;return this.float32[r+0]=e,this.float32[r+1]=n,t}}Vo.prototype.bytesPerElement=8,ni("StructArrayLayout2f8",Vo);class qo extends bo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}emplace(t,e,n,r,i){const o=4*t;return this.float32[o+0]=e,this.float32[o+1]=n,this.float32[o+2]=r,this.float32[o+3]=i,t}}qo.prototype.bytesPerElement=16,ni("StructArrayLayout4f16",qo);class Ho extends _o{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Ho.prototype.size=40;class Wo extends ko{get(t){return new Ho(this,t)}}ni("CollisionBoxArray",Wo);class Zo extends _o{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(t){this._structArray.uint8[this._pos1+49]=t}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(t){this._structArray.uint8[this._pos1+50]=t}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(t){this._structArray.uint32[this._pos4+13]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(t){this._structArray.uint8[this._pos1+58]=t}}Zo.prototype.size=60;class $o extends No{get(t){return new Zo(this,t)}}ni("PlacedSymbolArray",$o);class Ko extends _o{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(t){this._structArray.uint32[this._pos4+15]=t}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Ko.prototype.size=76;class Yo extends jo{get(t){return new Ko(this,t)}}ni("SymbolInstanceArray",Yo);class Xo extends Fo{getoffsetX(t){return this.float32[1*t+0]}}ni("GlyphOffsetArray",Xo);class Jo extends zo{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}ni("SymbolLineVertexArray",Jo);class Qo extends _o{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Qo.prototype.size=12;class ta extends Bo{get(t){return new Qo(this,t)}}ni("FeatureIndexArray",ta);class ea extends _o{get a_centroid_pos0(){return this._structArray.uint16[this._pos2+0]}get a_centroid_pos1(){return this._structArray.uint16[this._pos2+1]}}ea.prototype.size=4;class na extends Uo{get(t){return new ea(this,t)}}ni("FillExtrusionCentroidArray",na);const ra=xo([{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"}]),ia=xo([{name:"a_dash_to",components:4,type:"Uint16"},{name:"a_dash_from",components:4,type:"Uint16"}]);var oa=ue((function(t){t.exports=function(t,e){var n,r,i,o,a,s,l,c;for(r=t.length-(n=3&t.length),i=e,a=3432918353,s=461845907,c=0;c<r;)l=255&t.charCodeAt(c)|(255&t.charCodeAt(++c))<<8|(255&t.charCodeAt(++c))<<16|(255&t.charCodeAt(++c))<<24,++c,i=27492+(65535&(o=5*(65535&(i=(i^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,n){case 3:l^=(255&t.charCodeAt(c+2))<<16;case 2:l^=(255&t.charCodeAt(c+1))<<8;case 1:i^=l=(65535&(l=(l=(65535&(l^=255&t.charCodeAt(c)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return i^=t.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}})),aa=ue((function(t){t.exports=function(t,e){for(var n,r=t.length,i=e^r,o=0;r>=4;)n=1540483477*(65535&(n=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:i^=(255&t.charCodeAt(o+2))<<16;case 2:i^=(255&t.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&t.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0}})),sa=oa,la=aa;sa.murmur3=oa,sa.murmur2=la;class ca{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,e,n,r){this.ids.push(ua(t)),this.positions.push(e,n,r)}getPositions(t){const e=ua(t);let n=0,r=this.ids.length-1;for(;n<r;){const t=n+r>>1;this.ids[t]>=e?r=t:n=t+1}const i=[];for(;this.ids[n]===e;)i.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return i}static serialize(t,e){const n=new Float64Array(t.ids),r=new Uint32Array(t.positions);return function t(e,n,r,i){for(;r<i;){const o=e[r+i>>1];let a=r-1,s=i+1;for(;;){do{a++}while(e[a]<o);do{s--}while(e[s]>o);if(a>=s)break;ha(e,a,s),ha(n,3*a,3*s),ha(n,3*a+1,3*s+1),ha(n,3*a+2,3*s+2)}s-r<i-s?(t(e,n,r,s),r=s+1):(t(e,n,s+1,i),i=s)}}(n,r,0,n.length-1),e&&e.push(n.buffer,r.buffer),{ids:n,positions:r}}static deserialize(t){const e=new ca;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e}}function ua(t){const e=+t;return!isNaN(e)&&e<=l?e:sa(String(t))}function ha(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}ni("FeaturePositionMap",ca);class da{constructor(t,e){this.gl=t.gl,this.location=e}}class pa extends da{constructor(t,e){super(t,e),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class fa extends da{constructor(t,e){super(t,e),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class ma extends da{constructor(t,e){super(t,e),this.current=de.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const ga=new Float32Array(16),ya=new Float32Array(9),va=new Float32Array(4);function _a(t){return[yo(255*t.r,255*t.g),yo(255*t.b,255*t.a)]}class ba{constructor(t,e,n){this.value=t,this.uniformNames=e.map(t=>"u_"+t),this.type=n}setUniform(t,e,n){t.set(n.constantOr(this.value))}getBinding(t,e,n){return"color"===this.type?new ma(t,e):new pa(t,e)}}class xa{constructor(t,e){this.uniformNames=e.map(t=>"u_"+t),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,e){this.pixelRatioFrom=e.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=e.tl.concat(e.br),this.patternTo=t.tl.concat(t.br)}setUniform(t,e,n,r){const i="u_pattern_to"===r||"u_dash_to"===r?this.patternTo:"u_pattern_from"===r||"u_dash_from"===r?this.patternFrom:"u_pixel_ratio_to"===r?this.pixelRatioTo:"u_pixel_ratio_from"===r?this.pixelRatioFrom:null;i&&t.set(i)}getBinding(t,e,n){return"u_pattern_from"===n||"u_pattern_to"===n||"u_dash_from"===n||"u_dash_to"===n?new fa(t,e):new pa(t,e)}}class wa{constructor(t,e,n,r){this.expression=t,this.type=n,this.maxValue=0,this.paintVertexAttributes=e.map(t=>({name:"a_"+t,type:"Float32",components:"color"===n?2:1,offset:0})),this.paintVertexArray=new r}populatePaintArray(t,e,n,r,i,o){const a=this.paintVertexArray.length,s=this.expression.evaluate(new eo(0),e,{},i,r,o);this.paintVertexArray.resize(t),this._setPaintValue(a,t,s)}updatePaintArray(t,e,n,r,i){const o=this.expression.evaluate({zoom:0},n,r,void 0,i);this._setPaintValue(t,e,o)}_setPaintValue(t,e,n){if("color"===this.type){const r=_a(n);for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,r[0],r[1])}else{for(let r=t;r<e;r++)this.paintVertexArray.emplace(r,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ea{constructor(t,e,n,r,i,o){this.expression=t,this.uniformNames=e.map(t=>`u_${t}_t`),this.type=n,this.useIntegerZoom=r,this.zoom=i,this.maxValue=0,this.paintVertexAttributes=e.map(t=>({name:"a_"+t,type:"Float32",components:"color"===n?4:2,offset:0})),this.paintVertexArray=new o}populatePaintArray(t,e,n,r,i,o){const a=this.expression.evaluate(new eo(this.zoom),e,{},i,r,o),s=this.expression.evaluate(new eo(this.zoom+1),e,{},i,r,o),l=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(l,t,a,s)}updatePaintArray(t,e,n,r,i){const o=this.expression.evaluate({zoom:this.zoom},n,r,void 0,i),a=this.expression.evaluate({zoom:this.zoom+1},n,r,void 0,i);this._setPaintValue(t,e,o,a)}_setPaintValue(t,e,n,r){if("color"===this.type){const i=_a(n),o=_a(r);for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,i[0],i[1],o[0],o[1])}else{for(let i=t;i<e;i++)this.paintVertexArray.emplace(i,n,r);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(r))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,e){const n=this.useIntegerZoom?Math.floor(e.zoom):e.zoom,r=y(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);t.set(r)}getBinding(t,e,n){return new pa(t,e)}}class Ca{constructor(t,e,n,r,i,o,a){this.expression=t,this.type=n,this.useIntegerZoom=r,this.zoom=i,this.layerId=a,this.paintVertexAttributes=("array"===n?ia:ra).members;for(let t=0;t<e.length;++t);this.zoomInPaintVertexArray=new o,this.zoomOutPaintVertexArray=new o}populatePaintArray(t,e,n){const r=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(r,t,e.patterns&&e.patterns[this.layerId],n)}updatePaintArray(t,e,n,r,i,o){this._setPaintValues(t,e,n.patterns&&n.patterns[this.layerId],o)}_setPaintValues(t,e,n,r){if(!r||!n)return;const{min:i,mid:o,max:a}=n,s=r[i],l=r[o],c=r[a];if(s&&l&&c)for(let n=t;n<e;n++)this._setPaintValue(this.zoomInPaintVertexArray,n,l,s),this._setPaintValue(this.zoomOutPaintVertexArray,n,l,c)}_setPaintValue(t,e,n,r){t.emplace(e,n.tl[0],n.tl[1],n.br[0],n.br[1],r.tl[0],r.tl[1],r.br[0],r.br[1],n.pixelRatio,r.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Sa{constructor(t,e,n=(()=>!0)){this.binders={},this._buffers=[];const r=[];for(const i in t.paint._values){if(!n(i))continue;const o=t.paint.get(i);if(!(o instanceof lo&&Zn(o.property.specification)))continue;const a=Ia(i,t.type),s=o.value,l=o.property.specification.type,c=o.property.useIntegerZoom,u=o.property.specification["property-type"],h="cross-faded"===u||"cross-faded-data-driven"===u,d="line-dasharray"===String(i)&&"constant"!==t.layout.get("line-cap").value.kind;if("constant"!==s.kind||d)if("source"===s.kind||d||h){const n=ka(i,l,"source");this.binders[i]=h?new Ca(s,a,l,c,e,n,t.id):new wa(s,a,l,n),r.push("/a_"+i)}else{const t=ka(i,l,"composite");this.binders[i]=new Ea(s,a,l,c,e,t),r.push("/z_"+i)}else this.binders[i]=h?new xa(s.value,a):new ba(s.value,a,l),r.push("/u_"+i)}this.cacheKey=r.sort().join("")}getMaxValue(t){const e=this.binders[t];return e instanceof wa||e instanceof Ea?e.maxValue:0}populatePaintArrays(t,e,n,r,i,o){for(const a in this.binders){const s=this.binders[a];(s instanceof wa||s instanceof Ea||s instanceof Ca)&&s.populatePaintArray(t,e,n,r,i,o)}}setConstantPatternPositions(t,e){for(const n in this.binders){const r=this.binders[n];r instanceof xa&&r.setConstantPatternPositions(t,e)}}updatePaintArrays(t,e,n,r,i,o){let a=!1;for(const s in t){const l=e.getPositions(s);for(const e of l){const l=n.feature(e.index);for(const n in this.binders){const c=this.binders[n];if((c instanceof wa||c instanceof Ea||c instanceof Ca)&&!0===c.expression.isStateDependent){const u=r.paint.get(n);c.expression=u.value,c.updatePaintArray(e.start,e.end,l,t[s],i,o),a=!0}}}}return a}defines(){const t=[];for(const e in this.binders){const n=this.binders[e];(n instanceof ba||n instanceof xa)&&t.push(...n.uniformNames.map(t=>"#define HAS_UNIFORM_"+t))}return t}getBinderAttributes(){const t=[];for(const e in this.binders){const n=this.binders[e];if(n instanceof wa||n instanceof Ea||n instanceof Ca)for(let e=0;e<n.paintVertexAttributes.length;e++)t.push(n.paintVertexAttributes[e].name)}return t}getBinderUniforms(){const t=[];for(const e in this.binders){const n=this.binders[e];if(n instanceof ba||n instanceof xa||n instanceof Ea)for(const e of n.uniformNames)t.push(e)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,e){const n=[];for(const r in this.binders){const i=this.binders[r];if(i instanceof ba||i instanceof xa||i instanceof Ea)for(const o of i.uniformNames)if(e[o]){const a=i.getBinding(t,e[o],o);n.push({name:o,property:r,binding:a})}}return n}setUniforms(t,e,n,r){for(const{name:t,property:i,binding:o}of e)this.binders[i].setUniform(o,r,n.get(i),t)}updatePaintBuffers(t){this._buffers=[];for(const e in this.binders){const n=this.binders[e];if(t&&n instanceof Ca){const e=2===t.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;e&&this._buffers.push(e)}else(n instanceof wa||n instanceof Ea)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}}upload(t){for(const e in this.binders){const n=this.binders[e];(n instanceof wa||n instanceof Ea||n instanceof Ca)&&n.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const e=this.binders[t];(e instanceof wa||e instanceof Ea||e instanceof Ca)&&e.destroy()}}}class Ta{constructor(t,e,n=(()=>!0)){this.programConfigurations={};for(const r of t)this.programConfigurations[r.id]=new Sa(r,e,n);this.needsUpload=!1,this._featureMap=new ca,this._bufferOffset=0}populatePaintArrays(t,e,n,r,i,o,a){for(const n in this.programConfigurations)this.programConfigurations[n].populatePaintArrays(t,e,r,i,o,a);void 0!==e.id&&this._featureMap.add(e.id,n,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,e,n,r,i){for(const o of n)this.needsUpload=this.programConfigurations[o.id].updatePaintArrays(t,this._featureMap,e,o,r,i)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}const Oa={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"line-dasharray":["dash_to","dash_from"]};function Ia(t,e){return Oa[t]||[t.replace(e+"-","").replace(/-/g,"_")]}const Aa={"line-pattern":{source:Oo,composite:Oo},"fill-pattern":{source:Oo,composite:Oo},"fill-extrusion-pattern":{source:Oo,composite:Oo},"line-dasharray":{source:Io,composite:Io}},Ma={color:{source:Vo,composite:qo},number:{source:Fo,composite:Vo}};function ka(t,e,n){const r=Aa[t];return r&&r[n]||Ma[e][n]}ni("ConstantBinder",ba),ni("CrossFadedConstantBinder",xa),ni("SourceExpressionBinder",wa),ni("CrossFadedCompositeBinder",Ca),ni("CompositeExpressionBinder",Ea),ni("ProgramConfiguration",Sa,{omit:["_buffers"]}),ni("ProgramConfigurationSet",Ta);const Pa="-transition";class Da extends zt{constructor(t,e){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==t.type&&(this.metadata=(t=t).metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&"sky"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),e.layout&&(this._unevaluatedLayout=new so(e.layout)),e.paint)){this._transitionablePaint=new io(e.paint);for(const e in t.paint)this.setPaintProperty(e,t.paint[e],{validate:!1});for(const e in t.layout)this.setLayoutProperty(e,t.layout[e],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new co(e.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,e,n={}){null!=e&&this._validate(Kr,`layers.${this.id}.layout.${t}`,t,e,n)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)}getPaintProperty(t){return I(t,Pa)?this._transitionablePaint.getTransition(t.slice(0,-Pa.length)):this._transitionablePaint.getValue(t)}setPaintProperty(t,e,n={}){if(null!=e&&this._validate($r,`layers.${this.id}.paint.${t}`,t,e,n))return!1;if(I(t,Pa))return this._transitionablePaint.setTransition(t.slice(0,-Pa.length),e||void 0),!1;{const n=this._transitionablePaint._values[t],r="cross-faded-data-driven"===n.property.specification["property-type"],i=n.value.isDataDriven(),o=n.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);const a=this._transitionablePaint._values[t].value;return a.isDataDriven()||i||r||this._handleOverridablePaintPropertyUpdate(t,o,a)}}_handleSpecialPaintPropertyUpdate(t){}getProgramIds(){return null}getProgramConfiguration(t){return null}_handleOverridablePaintPropertyUpdate(t,e,n){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),M(t,(t,e)=>!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length))}_validate(t,e,n,r,i={}){return(!i||!1!==i.validate)&&Yr(this,t.call(Hr,{key:e,layerType:this.type,objectKey:n,value:r,styleSpec:Bt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const e=this.paint.get(t);if(e instanceof lo&&Zn(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=vr(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const Ra=xo([{name:"a_pos",components:2,type:"Int16"}],4),{members:La}=Ra;class Na{constructor(t=[]){this.segments=t}prepareSegment(t,e,n,r){let i=this.segments[this.segments.length-1];return t>Na.MAX_VERTEX_ARRAY_LENGTH&&D(`Max vertices per segment is ${Na.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!i||i.vertexLength+t>Na.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==r)&&(i={vertexOffset:e.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==r&&(i.sortKey=r),this.segments.push(i)),i}get(){return this.segments}destroy(){for(const t of this.segments)for(const e in t.vaos)t.vaos[e].destroy()}static simpleSegment(t,e,n,r){return new Na([{vertexOffset:t,primitiveOffset:e,vertexLength:n,primitiveLength:r,vaos:{},sortKey:0}])}}Na.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ni("SegmentVector",Na);var ja=8192;class Fa{constructor(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}setNorthEast(t){return this._ne=t instanceof Ba?new Ba(t.lng,t.lat):Ba.convert(t),this}setSouthWest(t){return this._sw=t instanceof Ba?new Ba(t.lng,t.lat):Ba.convert(t),this}extend(t){const e=this._sw,n=this._ne;let r,i;if(t instanceof Ba)r=t,i=t;else{if(!(t instanceof Fa))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(Fa.convert(t)):this.extend(Ba.convert(t)):this;if(r=t._sw,i=t._ne,!r||!i)return this}return e||n?(e.lng=Math.min(r.lng,e.lng),e.lat=Math.min(r.lat,e.lat),n.lng=Math.max(i.lng,n.lng),n.lat=Math.max(i.lat,n.lat)):(this._sw=new Ba(r.lng,r.lat),this._ne=new Ba(i.lng,i.lat)),this}getCenter(){return new Ba((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Ba(this.getWest(),this.getNorth())}getSouthEast(){return new Ba(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:e,lat:n}=Ba.convert(t);let r=this._sw.lng<=e&&e<=this._ne.lng;return this._sw.lng>this._ne.lng&&(r=this._sw.lng>=e&&e>=this._ne.lng),this._sw.lat<=n&&n<=this._ne.lat&&r}static convert(t){return!t||t instanceof Fa?t:new Fa(t)}}const za=6371008.8;class Ba{constructor(t,e){if(isNaN(t)||isNaN(e))throw new Error(`Invalid LngLat object: (${t}, ${e})`);if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ba(v(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const e=Math.PI/180,n=this.lat*e,r=t.lat*e,i=Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos((t.lng-this.lng)*e);return za*Math.acos(Math.min(i,1))}toBounds(t=0){const e=360*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return new Fa(new Ba(this.lng-n,this.lat-e),new Ba(this.lng+n,this.lat+e))}static convert(t){if(t instanceof Ba)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Ba(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Ba(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Ua=2*Math.PI*za;function Ga(t){return Ua*Math.cos(t*Math.PI/180)}function Va(t){return(180+t)/360}function qa(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function Ha(t,e){return t/Ga(e)}function Wa(t){return 360*t-180}function Za(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}function $a(t,e){return t*Ga(Za(e))}const Ka=85.051129;class Ya{constructor(t,e,n=0){this.x=+t,this.y=+e,this.z=+n}static fromLngLat(t,e=0){const n=Ba.convert(t);return new Ya(Va(n.lng),qa(n.lat),Ha(e,n.lat))}toLngLat(){return new Ba(Wa(this.x),Za(this.y))}toAltitude(){return $a(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Ua*(t=Za(this.y),1/Math.cos(t*Math.PI/180));var t}}function Xa(t,e,n,r,i,a,s,l,c){const u=(e+r)/2,h=(n+i)/2,d=new o(u,h);l(d),function(t,e,n,r,i,o){const a=n-i,s=r-o;return Math.abs((r-e)*a-(n-t)*s)/Math.hypot(a,s)}(d.x,d.y,a.x,a.y,s.x,s.y)>=c?(Xa(t,e,n,u,h,a,d,l,c),Xa(t,u,h,r,i,d,s,l,c)):t.push(s)}function Ja(t,e,n){const r=[];let i,o,a;for(const s of t){const{x:t,y:l}=s;e(s),a?Xa(r,i,o,t,l,a,s,e,n):r.push(s),i=t,o=l,a=s}return r}const Qa=Math.pow(2,14)-1,ts=-Qa-1;function es(t,e){const n=Math.round(t.x*e),r=Math.round(t.y*e);return t.x=y(n,ts,Qa),t.y=y(r,ts,Qa),(n<t.x||n>t.x+1||r<t.y||r>t.y+1)&&D("Geometry exceeds allowed extent, reduce your vector tile buffer size"),t}function ns(t,e,n){const r=t.loadGeometry(),i=t.extent,o=ja/i;if(e&&n&&"mercator"!==n.projection.name){const o=1<<e.z,{scale:a,x:s,y:l,projection:c}=n,u=t=>{const n=Wa((e.x+t.x/i)/o),r=Za((e.y+t.y/i)/o),u=c.project(n,r);t.x=(u.x*a-s)*i,t.y=(u.y*a-l)*i};for(let e=0;e<r.length;e++)if(1!==t.type)r[e]=Ja(r[e],u,1);else{const t=[];for(const n of r[e])n.x<0||n.x>=i||n.y<0||n.y>=i||(u(n),t.push(n));r[e]=t}}for(const t of r)for(const e of t)es(e,o);return r}function rs(t,e){return{type:t.type,id:t.id,properties:t.properties,geometry:e?ns(t):[]}}function is(t,e,n,r,i){t.emplaceBack(2*e+(r+1)/2,2*n+(i+1)/2)}class os{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(t=>t.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Eo,this.indexArray=new Lo,this.segments=new Na,this.programConfigurations=new Ta(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(t=>t.isStateDependent()).map(t=>t.id)}populate(t,e,n,r){const i=this.layers[0],o=[];let a=null;"circle"===i.type&&(a=i.layout.get("circle-sort-key"));for(const{feature:e,id:i,index:s,sourceLayerIndex:l}of t){const t=this.layers[0]._featureFilter.needGeometry,c=rs(e,t);if(!this.layers[0]._featureFilter.filter(new eo(this.zoom),c,n))continue;const u=a?a.evaluate(c,{},n):void 0,h={id:i,properties:e.properties,type:e.type,sourceLayerIndex:l,index:s,geometry:t?c.geometry:ns(e,n,r),patterns:{},sortKey:u};o.push(h)}a&&o.sort((t,e)=>t.sortKey-e.sortKey);for(const r of o){const{geometry:i,index:o,sourceLayerIndex:a}=r,s=t[o].feature;this.addFeature(r,i,o,e.availableImages,n),e.featureIndex.insert(s,i,o,a,this.index)}}update(t,e,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,La),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,e,n,r,i){for(const n of e)for(const e of n){const n=e.x,r=e.y;if(n<0||n>=ja||r<0||r>=ja)continue;const i=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),o=i.vertexLength;is(this.layoutVertexArray,n,r,-1,-1),is(this.layoutVertexArray,n,r,1,-1),is(this.layoutVertexArray,n,r,1,1),is(this.layoutVertexArray,n,r,-1,1),this.indexArray.emplaceBack(o,o+1,o+2),this.indexArray.emplaceBack(o,o+3,o+2),i.vertexLength+=4,i.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,{},r,i)}}function as(t,e){for(let n=0;n<t.length;n++)if(ms(e,t[n]))return!0;for(let n=0;n<e.length;n++)if(ms(t,e[n]))return!0;return!!us(t,e)}function ss(t,e,n){return!!ms(t,e)||!!ds(e,t,n)}function ls(t,e){if(1===t.length)return fs(e,t[0]);for(let n=0;n<e.length;n++){const r=e[n];for(let e=0;e<r.length;e++)if(ms(t,r[e]))return!0}for(let n=0;n<t.length;n++)if(fs(e,t[n]))return!0;for(let n=0;n<e.length;n++)if(us(t,e[n]))return!0;return!1}function cs(t,e,n){if(t.length>1){if(us(t,e))return!0;for(let r=0;r<e.length;r++)if(ds(e[r],t,n))return!0}for(let r=0;r<t.length;r++)if(ds(t[r],e,n))return!0;return!1}function us(t,e){if(0===t.length||0===e.length)return!1;for(let n=0;n<t.length-1;n++){const r=t[n],i=t[n+1];for(let t=0;t<e.length-1;t++)if(hs(r,i,e[t],e[t+1]))return!0}return!1}function hs(t,e,n,r){return R(t,n,r)!==R(e,n,r)&&R(t,e,n)!==R(t,e,r)}function ds(t,e,n){const r=n*n;if(1===e.length)return t.distSqr(e[0])<r;for(let n=1;n<e.length;n++)if(ps(t,e[n-1],e[n])<r)return!0;return!1}function ps(t,e,n){const r=e.distSqr(n);if(0===r)return t.distSqr(e);const i=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/r;return t.distSqr(i<0?e:i>1?n:n.sub(e)._mult(i)._add(e))}function fs(t,e){let n,r,i,o=!1;for(let a=0;a<t.length;a++){n=t[a];for(let t=0,a=n.length-1;t<n.length;a=t++)r=n[t],i=n[a],r.y>e.y!=i.y>e.y&&e.x<(i.x-r.x)*(e.y-r.y)/(i.y-r.y)+r.x&&(o=!o)}return o}function ms(t,e){let n=!1;for(let r=0,i=t.length-1;r<t.length;i=r++){const o=t[r],a=t[i];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function gs(t,e,n,r,i){for(const o of t)if(e<=o.x&&n<=o.y&&r>=o.x&&i>=o.y)return!0;const a=[new o(e,n),new o(e,i),new o(r,i),new o(r,n)];if(t.length>2)for(const e of a)if(ms(t,e))return!0;for(let e=0;e<t.length-1;e++)if(ys(t[e],t[e+1],a))return!0;return!1}function ys(t,e,n){const r=n[0],i=n[2];if(t.x<r.x&&e.x<r.x||t.x>i.x&&e.x>i.x||t.y<r.y&&e.y<r.y||t.y>i.y&&e.y>i.y)return!1;const o=R(t,e,n[0]);return o!==R(t,e,n[1])||o!==R(t,e,n[2])||o!==R(t,e,n[3])}function vs(t,e,n){const r=e.paint.get(t).value;return"constant"===r.kind?r.value:n.programConfigurations.get(e.id).getMaxValue(t)}function _s(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function bs(t,e,n,r,i){if(!e[0]&&!e[1])return t;const a=o.convert(e)._mult(i);"viewport"===n&&a._rotate(-r);const s=[];for(let e=0;e<t.length;e++)s.push(t[e].sub(a));return s}function xs(t,e,n,r){const i=o.convert(t)._mult(r);return"viewport"===e&&i._rotate(-n),i}ni("CircleBucket",os,{omit:["layers"]});const ws=new go({"circle-sort-key":new ho(Bt.layout_circle["circle-sort-key"])});var Es={paint:new go({"circle-radius":new ho(Bt.paint_circle["circle-radius"]),"circle-color":new ho(Bt.paint_circle["circle-color"]),"circle-blur":new ho(Bt.paint_circle["circle-blur"]),"circle-opacity":new ho(Bt.paint_circle["circle-opacity"]),"circle-translate":new uo(Bt.paint_circle["circle-translate"]),"circle-translate-anchor":new uo(Bt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new uo(Bt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new uo(Bt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ho(Bt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ho(Bt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ho(Bt.paint_circle["circle-stroke-opacity"])}),layout:ws},Cs="undefined"!=typeof Float32Array?Float32Array:Array;function Ss(){var t=new Cs(9);return Cs!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function Ts(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Os(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=e[9],p=e[10],f=e[11],m=e[12],g=e[13],y=e[14],v=e[15],_=n[0],b=n[1],x=n[2],w=n[3];return t[0]=_*r+b*s+x*h+w*m,t[1]=_*i+b*l+x*d+w*g,t[2]=_*o+b*c+x*p+w*y,t[3]=_*a+b*u+x*f+w*v,t[4]=(_=n[4])*r+(b=n[5])*s+(x=n[6])*h+(w=n[7])*m,t[5]=_*i+b*l+x*d+w*g,t[6]=_*o+b*c+x*p+w*y,t[7]=_*a+b*u+x*f+w*v,t[8]=(_=n[8])*r+(b=n[9])*s+(x=n[10])*h+(w=n[11])*m,t[9]=_*i+b*l+x*d+w*g,t[10]=_*o+b*c+x*p+w*y,t[11]=_*a+b*u+x*f+w*v,t[12]=(_=n[12])*r+(b=n[13])*s+(x=n[14])*h+(w=n[15])*m,t[13]=_*i+b*l+x*d+w*g,t[14]=_*o+b*c+x*p+w*y,t[15]=_*a+b*u+x*f+w*v,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var Is=Os;function As(){var t=new Cs(3);return Cs!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Ms(t){return Math.hypot(t[0],t[1],t[2])}function ks(t,e,n){var r=new Cs(3);return r[0]=t,r[1]=e,r[2]=n,r}function Ps(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Ds(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function Rs(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function Ls(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function Ns(t,e,n){var r=n[0],i=n[1],o=n[2],a=e[0],s=e[1],l=e[2],c=i*l-o*s,u=o*a-r*l,h=r*s-i*a,d=i*h-o*u,p=o*c-r*h,f=r*u-i*c,m=2*n[3];return u*=m,h*=m,p*=2,f*=2,t[0]=a+(c*=m)+(d*=2),t[1]=s+u+p,t[2]=l+h+f,t}var js,Fs=Ps,zs=Ds,Bs=Ms;function Us(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}function Gs(){var t=new Cs(4);return Cs!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Vs(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function qs(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=r*l+a*s,t[1]=i*l+o*s,t[2]=o*l-i*s,t[3]=a*l-r*s,t}function Hs(t,e){return t[0]===e[0]&&t[1]===e[1]}function Ws(t,e,n,r,i,o,a,s,l){if(o&&t.queryGeometry.isAboveHorizon)return!1;o&&(l*=t.pixelToTileUnitsFactor);for(const c of e)for(const e of c){const c=e.add(s),u=i&&n.elevation?n.elevation.exaggeration()*i.getElevationAt(c.x,c.y,!0):0,h=o?c:Zs(c,u,r),d=o?t.tilespaceRays.map(t=>Ys(t,u)):t.queryGeometry.screenGeometry,p=Us([],[e.x,e.y,u,1],r);if(!a&&o?l*=p[3]/n.cameraToCenterDistance:a&&!o&&(l*=n.cameraToCenterDistance/p[3]),ss(d,h,l))return!0}return!1}function Zs(t,e,n){const r=Us([],[t.x,t.y,e,1],n);return new o(r[0]/r[3],r[1]/r[3])}As(),js=new Cs(4),Cs!=Float32Array&&(js[0]=0,js[1]=0,js[2]=0,js[3]=0),As(),ks(1,0,0),ks(0,1,0),Gs(),Gs(),Ss(),function(){var t;t=new Cs(2),Cs!=Float32Array&&(t[0]=0,t[1]=0)}();const $s=ks(0,0,0),Ks=ks(0,0,1);function Ys(t,e){const n=As();return $s[2]=e,t.intersectsPlane($s,Ks,n),new o(n[0],n[1])}class Xs extends os{}function Js(t,{width:e,height:n},r,i){if(i){if(i instanceof Uint8ClampedArray)i=new Uint8Array(i.buffer);else if(i.length!==e*n*r)throw new RangeError("mismatched image size")}else i=new Uint8Array(e*n*r);return t.width=e,t.height=n,t.data=i,t}function Qs(t,{width:e,height:n},r){if(e===t.width&&n===t.height)return;const i=Js({},{width:e,height:n},r);tl(t,i,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,e),height:Math.min(t.height,n)},r),t.width=e,t.height=n,t.data=i.data}function tl(t,e,n,r,i,o){if(0===i.width||0===i.height)return e;if(i.width>t.width||i.height>t.height||n.x>t.width-i.width||n.y>t.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>e.width||i.height>e.height||r.x>e.width-i.width||r.y>e.height-i.height)throw new RangeError("out of range destination coordinates for image copy");const a=t.data,s=e.data;for(let l=0;l<i.height;l++){const c=((n.y+l)*t.width+n.x)*o,u=((r.y+l)*e.width+r.x)*o;for(let t=0;t<i.width*o;t++)s[u+t]=a[c+t]}return e}ni("HeatmapBucket",Xs,{omit:["layers"]});class el{constructor(t,e){Js(this,t,1,e)}resize(t){Qs(this,t,1)}clone(){return new el({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,n,r,i){tl(t,e,n,r,i,1)}}class nl{constructor(t,e){Js(this,t,4,e)}resize(t){Qs(this,t,4)}replace(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new nl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,n,r,i){tl(t,e,n,r,i,4)}}ni("AlphaImage",el),ni("RGBAImage",nl);var rl={paint:new go({"heatmap-radius":new ho(Bt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ho(Bt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new uo(Bt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new mo(Bt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new uo(Bt.paint_heatmap["heatmap-opacity"])})};function il(t){const e={},n=t.resolution||256,r=t.clips?t.clips.length:1,i=t.image||new nl({width:n,height:r}),o=(n,r,o)=>{e[t.evaluationKey]=o;const a=t.expression.evaluate(e);i.data[n+r+0]=Math.floor(255*a.r/a.a),i.data[n+r+1]=Math.floor(255*a.g/a.a),i.data[n+r+2]=Math.floor(255*a.b/a.a),i.data[n+r+3]=Math.floor(255*a.a)};if(t.clips)for(let e=0,i=0;e<r;++e,i+=4*n)for(let r=0,a=0;r<n;r++,a+=4){const s=r/(n-1),{start:l,end:c}=t.clips[e];o(i,a,l*(1-s)+c*s)}else for(let t=0,e=0;t<n;t++,e+=4)o(0,e,t/(n-1));return i}var ol={paint:new go({"hillshade-illumination-direction":new uo(Bt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new uo(Bt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new uo(Bt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new uo(Bt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new uo(Bt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new uo(Bt.paint_hillshade["hillshade-accent-color"])})};const al=xo([{name:"a_pos",components:2,type:"Int16"}],4),{members:sl}=al;var ll=ul,cl=ul;function ul(t,e,n){n=n||2;var r,i,o,a,s,l,c,u=e&&e.length,h=u?e[0]*n:t.length,d=hl(t,0,h,n,!0),p=[];if(!d||d.next===d.prev)return p;if(u&&(d=function(t,e,n,r){var i,o,a,s=[];for(i=0,o=e.length;i<o;i++)(a=hl(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),s.push(wl(a));for(s.sort(vl),i=0;i<s.length;i++)n=dl(n=_l(s[i],n),n.next);return n}(t,e,d,n)),t.length>80*n){r=o=t[0],i=a=t[1];for(var f=n;f<h;f+=n)(s=t[f])<r&&(r=s),(l=t[f+1])<i&&(i=l),s>o&&(o=s),l>a&&(a=l);c=0!==(c=Math.max(o-r,a-i))?1/c:0}return pl(d,p,n,r,i,c),p}function hl(t,e,n,r,i){var o,a;if(i===Ll(t,e,n,r)>0)for(o=e;o<n;o+=r)a=Pl(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=Pl(o,t[o],t[o+1],a);return a&&Tl(a,a.next)&&(Dl(a),a=a.next),a}function dl(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!Tl(r,r.next)&&0!==Sl(r.prev,r,r.next))r=r.next;else{if(Dl(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function pl(t,e,n,r,i,o,a){if(t){!a&&o&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=xl(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,l,c=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<c&&(s++,r=r.nextZ);e++);for(l=c;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1)}(i)}(t,r,i,o);for(var s,l,c=t;t.prev!==t.next;)if(s=t.prev,l=t.next,o?ml(t,r,i,o):fl(t))e.push(s.i/n),e.push(t.i/n),e.push(l.i/n),Dl(t),t=l.next,c=l.next;else if((t=l)===c){a?1===a?pl(t=gl(dl(t),e,n),e,n,r,i,o,2):2===a&&yl(t,e,n,r,i,o):pl(dl(t),e,n,r,i,o,1);break}}}function fl(t){var e=t.prev,n=t,r=t.next;if(Sl(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(El(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Sl(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function ml(t,e,n,r){var i=t.prev,o=t,a=t.next;if(Sl(i,o,a)>=0)return!1;for(var s=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,l=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,c=xl(i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,e,n,r),u=xl(s,l,e,n,r),h=t.prevZ,d=t.nextZ;h&&h.z>=c&&d&&d.z<=u;){if(h!==t.prev&&h!==t.next&&El(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&Sl(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,d!==t.prev&&d!==t.next&&El(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Sl(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;h&&h.z>=c;){if(h!==t.prev&&h!==t.next&&El(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&Sl(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;d&&d.z<=u;){if(d!==t.prev&&d!==t.next&&El(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Sl(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function gl(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!Tl(i,o)&&Ol(i,r,r.next,o)&&Ml(i,o)&&Ml(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),Dl(r),Dl(r.next),r=t=o),r=r.next}while(r!==t);return dl(r)}function yl(t,e,n,r,i,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Cl(a,s)){var l=kl(a,s);return a=dl(a,a.next),l=dl(l,l.next),pl(a,e,n,r,i,o),void pl(l,e,n,r,i,o)}s=s.next}a=a.next}while(a!==t)}function vl(t,e){return t.x-e.x}function _l(t,e){var n=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n;var l,c=n,u=n.x,h=n.y,d=1/0;r=n;do{i>=r.x&&r.x>=u&&i!==r.x&&El(o<h?i:a,o,u,h,o<h?a:i,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(i-r.x),Ml(r,t)&&(l<d||l===d&&(r.x>n.x||r.x===n.x&&bl(n,r)))&&(n=r,d=l)),r=r.next}while(r!==c);return n}(t,e);if(!n)return e;var r=kl(n,t),i=dl(n,n.next);return dl(r,r.next),e===n?i:e}function bl(t,e){return Sl(t.prev,t,e.prev)<0&&Sl(e.next,t,t.next)<0}function xl(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function wl(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function El(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function Cl(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Ol(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(Ml(t,e)&&Ml(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(Sl(t.prev,t,e.prev)||Sl(t,e.prev,e))||Tl(t,e)&&Sl(t.prev,t,t.next)>0&&Sl(e.prev,e,e.next)>0)}function Sl(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Tl(t,e){return t.x===e.x&&t.y===e.y}function Ol(t,e,n,r){var i=Al(Sl(t,e,n)),o=Al(Sl(t,e,r)),a=Al(Sl(n,r,t)),s=Al(Sl(n,r,e));return i!==o&&a!==s||!(0!==i||!Il(t,n,e))||!(0!==o||!Il(t,r,e))||!(0!==a||!Il(n,t,r))||!(0!==s||!Il(n,e,r))}function Il(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Al(t){return t>0?1:t<0?-1:0}function Ml(t,e){return Sl(t.prev,t,t.next)<0?Sl(t,e,t.next)>=0&&Sl(t,t.prev,e)>=0:Sl(t,e,t.prev)<0||Sl(t,t.next,e)<0}function kl(t,e){var n=new Rl(t.i,t.x,t.y),r=new Rl(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Pl(t,e,n,r){var i=new Rl(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Dl(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Rl(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ll(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}function Nl(t,e,n,r,i){!function t(e,n,r,i,o){for(;i>r;){if(i-r>600){var a=i-r+1,s=n-r+1,l=Math.log(a),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(a-c)/a)*(s-a/2<0?-1:1);t(e,n,Math.max(r,Math.floor(n-s*c/a+u)),Math.min(i,Math.floor(n+(a-s)*c/a+u)),o)}var h=e[n],d=r,p=i;for(jl(e,r,n),o(e[i],h)>0&&jl(e,r,i);d<p;){for(jl(e,d,p),d++,p--;o(e[d],h)<0;)d++;for(;o(e[p],h)>0;)p--}0===o(e[r],h)?jl(e,r,p):jl(e,++p,i),p<=n&&(r=p+1),n<=p&&(i=p-1)}}(t,e,n||0,r||t.length-1,i||Fl)}function jl(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function Fl(t,e){return t<e?-1:t>e?1:0}function zl(t,e){const n=t.length;if(n<=1)return[t];const r=[];let i,o;for(let e=0;e<n;e++){const n=L(t[e]);0!==n&&(t[e].area=Math.abs(n),void 0===o&&(o=n<0),o===n<0?(i&&r.push(i),i=[t[e]]):i.push(t[e]))}if(i&&r.push(i),e>1)for(let t=0;t<r.length;t++)r[t].length<=e||(Nl(r[t],e,1,r[t].length-1,Bl),r[t]=r[t].slice(0,e));return r}function Bl(t,e){return e.area-t.area}function Ul(t,e,n){const r=n.patternDependencies;let i=!1;for(const n of e){const e=n.paint.get(t+"-pattern");e.isConstant()||(i=!0);const o=e.constantOr(null);o&&(i=!0,r[o.to]=!0,r[o.from]=!0)}return i}function Gl(t,e,n,r,i){const o=i.patternDependencies;for(const a of e){const e=a.paint.get(t+"-pattern").value;if("constant"!==e.kind){let t=e.evaluate({zoom:r-1},n,{},i.availableImages),s=e.evaluate({zoom:r},n,{},i.availableImages),l=e.evaluate({zoom:r+1},n,{},i.availableImages);t=t&&t.name?t.name:t,s=s&&s.name?s.name:s,l=l&&l.name?l.name:l,o[t]=!0,o[s]=!0,o[l]=!0,n.patterns[a.id]={min:t,mid:s,max:l}}}return n}ul.deviation=function(t,e,n,r){var i=e&&e.length,o=Math.abs(Ll(t,0,i?e[0]*n:t.length,n));if(i)for(var a=0,s=e.length;a<s;a++)o-=Math.abs(Ll(t,e[a]*n,a<s-1?e[a+1]*n:t.length,n));var l=0;for(a=0;a<r.length;a+=3){var c=r[a]*n,u=r[a+1]*n,h=r[a+2]*n;l+=Math.abs((t[c]-t[h])*(t[u+1]-t[c+1])-(t[c]-t[u])*(t[h+1]-t[c+1]))}return 0===o&&0===l?0:Math.abs((l-o)/o)},ul.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&n.holes.push(r+=t[i-1].length)}return n},ll.default=cl;class Vl{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(t=>t.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Eo,this.indexArray=new Lo,this.indexArray2=new Uo,this.programConfigurations=new Ta(t.layers,t.zoom),this.segments=new Na,this.segments2=new Na,this.stateDependentLayerIds=this.layers.filter(t=>t.isStateDependent()).map(t=>t.id)}populate(t,e,n,r){this.hasPattern=Ul("fill",this.layers,e);const i=this.layers[0].layout.get("fill-sort-key"),o=[];for(const{feature:a,id:s,index:l,sourceLayerIndex:c}of t){const t=this.layers[0]._featureFilter.needGeometry,u=rs(a,t);if(!this.layers[0]._featureFilter.filter(new eo(this.zoom),u,n))continue;const h=i?i.evaluate(u,{},n,e.availableImages):void 0,d={id:s,properties:a.properties,type:a.type,sourceLayerIndex:c,index:l,geometry:t?u.geometry:ns(a,n,r),patterns:{},sortKey:h};o.push(d)}i&&o.sort((t,e)=>t.sortKey-e.sortKey);for(const r of o){const{geometry:i,index:o,sourceLayerIndex:a}=r;if(this.hasPattern){const t=Gl("fill",this.layers,r,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(r,i,o,n,{},e.availableImages);e.featureIndex.insert(t[o].feature,i,o,a,this.index)}}update(t,e,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n,r)}addFeatures(t,e,n,r){for(const t of this.patternFeatures)this.addFeature(t,t.geometry,t.index,e,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,sl),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,e,n,r,i,o=[]){for(const t of zl(e,500)){let e=0;for(const n of t)e+=n.length;const n=this.segments.prepareSegment(e,this.layoutVertexArray,this.indexArray),r=n.vertexLength,i=[],o=[];for(const e of t){if(0===e.length)continue;e!==t[0]&&o.push(i.length/2);const n=this.segments2.prepareSegment(e.length,this.layoutVertexArray,this.indexArray2),r=n.vertexLength;this.layoutVertexArray.emplaceBack(e[0].x,e[0].y),this.indexArray2.emplaceBack(r+e.length-1,r),i.push(e[0].x),i.push(e[0].y);for(let t=1;t<e.length;t++)this.layoutVertexArray.emplaceBack(e[t].x,e[t].y),this.indexArray2.emplaceBack(r+t-1,r+t),i.push(e[t].x),i.push(e[t].y);n.vertexLength+=e.length,n.primitiveLength+=e.length}const a=ll(i,o);for(let t=0;t<a.length;t+=3)this.indexArray.emplaceBack(r+a[t],r+a[t+1],r+a[t+2]);n.vertexLength+=e,n.primitiveLength+=a.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,o,r)}}ni("FillBucket",Vl,{omit:["layers","patternFeatures"]});const ql=new go({"fill-sort-key":new ho(Bt.layout_fill["fill-sort-key"])});var Hl={paint:new go({"fill-antialias":new uo(Bt.paint_fill["fill-antialias"]),"fill-opacity":new ho(Bt.paint_fill["fill-opacity"]),"fill-color":new ho(Bt.paint_fill["fill-color"]),"fill-outline-color":new ho(Bt.paint_fill["fill-outline-color"]),"fill-translate":new uo(Bt.paint_fill["fill-translate"]),"fill-translate-anchor":new uo(Bt.paint_fill["fill-translate-anchor"]),"fill-pattern":new po(Bt.paint_fill["fill-pattern"])}),layout:ql};const Wl=xo([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Zl=xo([{name:"a_centroid_pos",components:2,type:"Uint16"}]),{members:$l}=Wl;var Kl=Yl;function Yl(t,e,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=i,t.readFields(Xl,this,e)}function Xl(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function Jl(t){for(var e,n,r=0,i=0,o=t.length,a=o-1;i<o;a=i++)r+=((n=t[a]).x-(e=t[i]).x)*(e.y+n.y);return r}Yl.types=["Unknown","Point","LineString","Polygon"],Yl.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,r=1,i=0,a=0,s=0,l=[];t.pos<n;){if(i<=0){var c=t.readVarint();r=7&c,i=c>>3}if(i--,1===r||2===r)a+=t.readSVarint(),s+=t.readSVarint(),1===r&&(e&&l.push(e),e=[]),e.push(new o(a,s));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&l.push(e),l},Yl.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,l=1/0,c=-1/0;t.pos<e;){if(r<=0){var u=t.readVarint();n=7&u,r=u>>3}if(r--,1===n||2===n)(i+=t.readSVarint())<a&&(a=i),i>s&&(s=i),(o+=t.readSVarint())<l&&(l=o),o>c&&(c=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,l,s,c]},Yl.prototype.toGeoJSON=function(t,e,n){var r,i,o=this.extent*Math.pow(2,n),a=this.extent*t,s=this.extent*e,l=this.loadGeometry(),c=Yl.types[this.type];function u(t){for(var e=0;e<t.length;e++){var n=t[e];t[e]=[360*(n.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(r=0;r<l.length;r++)h[r]=l[r][0];u(l=h);break;case 2:for(r=0;r<l.length;r++)u(l[r]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var n,r,i=[],o=0;o<e;o++){var a=Jl(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[t[o]]):n.push(t[o]))}return n&&i.push(n),i}(l),r=0;r<l.length;r++)for(i=0;i<l[r].length;i++)u(l[r][i])}1===l.length?l=l[0]:c="Multi"+c;var d={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(d.id=this.id),d};var Ql=tc;function tc(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(ec,this,e),this.length=this._features.length}function ec(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}(n))}function nc(t,e,n){if(3===t){var r=new Ql(n,n.readVarint()+n.pos);r.length&&(e[r.name]=r)}}tc.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new Kl(this._pbf,e,this.extent,this._keys,this._values)};var rc={VectorTile:function(t,e){this.layers=t.readFields(nc,{},e)},VectorTileFeature:Kl,VectorTileLayer:Ql};const ic=rc.VectorTileFeature.types,oc=Math.pow(2,13);function ac(t,e,n,r,i,o,a,s){t.emplaceBack((e<<1)+a,(n<<1)+o,(Math.floor(r*oc)<<1)+i,Math.round(s))}class sc{constructor(){this.acc=new o(0,0),this.polyCount=[]}startRing(t){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new o(t.x,t.y),this.max=new o(t.x,t.y))}append(t,e){this.currentPolyCount.edges++,this.acc._add(t);let n=!!this.borders;const r=this.min,i=this.max;t.x<r.x?(r.x=t.x,n=!0):t.x>i.x&&(i.x=t.x,n=!0),t.y<r.y?(r.y=t.y,n=!0):t.y>i.y&&(i.y=t.y,n=!0),((0===t.x||t.x===ja)&&t.x===e.x)!=((0===t.y||t.y===ja)&&t.y===e.y)&&this.processBorderOverlap(t,e),n&&this.checkBorderIntersection(t,e)}checkBorderIntersection(t,e){e.x<0!=t.x<0&&this.addBorderIntersection(0,rn(e.y,t.y,(0-e.x)/(t.x-e.x))),e.x>ja!=t.x>ja&&this.addBorderIntersection(1,rn(e.y,t.y,(ja-e.x)/(t.x-e.x))),e.y<0!=t.y<0&&this.addBorderIntersection(2,rn(e.x,t.x,(0-e.y)/(t.y-e.y))),e.y>ja!=t.y>ja&&this.addBorderIntersection(3,rn(e.x,t.x,(ja-e.y)/(t.y-e.y)))}addBorderIntersection(t,e){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const n=this.borders[t];e<n[0]&&(n[0]=e),e>n[1]&&(n[1]=e)}processBorderOverlap(t,e){if(t.x===e.x){if(t.y===e.y)return;const n=0===t.x?0:1;this.addBorderIntersection(n,e.y),this.addBorderIntersection(n,t.y)}else{const n=0===t.y?2:3;this.addBorderIntersection(n,e.x),this.addBorderIntersection(n,t.x)}}centroid(){const t=this.polyCount.reduce((t,e)=>t+e.edges,0);return 0!==t?this.acc.div(t)._round():new o(0,0)}span(){return new o(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((t,e)=>t+ +(e[0]!==Number.MAX_VALUE),0)}}class lc{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(t=>t.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Co,this.centroidVertexArray=new na,this.indexArray=new Lo,this.programConfigurations=new Ta(t.layers,t.zoom),this.segments=new Na,this.stateDependentLayerIds=this.layers.filter(t=>t.isStateDependent()).map(t=>t.id),this.enableTerrain=t.enableTerrain}populate(t,e,n,r){this.features=[],this.hasPattern=Ul("fill-extrusion",this.layers,e),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDone=[!1,!1,!1,!1],this.tileToMeter=function(t){const e=Math.exp(Math.PI*(1-t.y/(1<<t.z)*2));return 80150034*e/(e*e+1)/ja/(1<<t.z)}(n);for(const{feature:i,id:o,index:a,sourceLayerIndex:s}of t){const t=this.layers[0]._featureFilter.needGeometry,l=rs(i,t);if(!this.layers[0]._featureFilter.filter(new eo(this.zoom),l,n))continue;const c={id:o,sourceLayerIndex:s,index:a,geometry:t?l.geometry:ns(i,n,r),properties:i.properties,type:i.type,patterns:{}},u=this.layoutVertexArray.length;this.hasPattern?this.features.push(Gl("fill-extrusion",this.layers,c,this.zoom,e)):this.addFeature(c,c.geometry,a,n,{},e.availableImages),e.featureIndex.insert(i,c.geometry,a,s,this.index,u)}this.sortBorders()}addFeatures(t,e,n,r){for(const t of this.features){const{geometry:i}=t;this.addFeature(t,i,t.index,e,n,r)}this.sortBorders()}update(t,e,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,$l),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}uploadCentroid(t){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,Zl.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,e,n,r,i,o){const a=this.enableTerrain?new sc:null;for(const n of zl(e,500)){let e=0,r=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);if(0===n.length||(s=n[0]).every(t=>t.x<=0)||s.every(t=>t.x>=ja)||s.every(t=>t.y<=0)||s.every(t=>t.y>=ja))continue;for(let t=0;t<n.length;t++){const i=n[t];if(0===i.length)continue;e+=i.length;let o=0;a&&a.startRing(i[0]);for(let t=0;t<i.length;t++){const e=i[t];if(t>=1){const n=i[t-1];if(!cc(e,n)){a&&a.append(e,n),r.vertexLength+4>Na.MAX_VERTEX_ARRAY_LENGTH&&(r=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const t=e.sub(n)._perp(),i=t.x/(Math.abs(t.x)+Math.abs(t.y)),s=t.y>0?1:0,l=n.dist(e);o+l>32768&&(o=0),ac(this.layoutVertexArray,e.x,e.y,i,s,0,0,o),ac(this.layoutVertexArray,e.x,e.y,i,s,0,1,o),o+=l,ac(this.layoutVertexArray,n.x,n.y,i,s,0,0,o),ac(this.layoutVertexArray,n.x,n.y,i,s,0,1,o);const c=r.vertexLength;this.indexArray.emplaceBack(c,c+2,c+1),this.indexArray.emplaceBack(c+1,c+2,c+3),r.vertexLength+=4,r.primitiveLength+=2}}}}if(r.vertexLength+e>Na.MAX_VERTEX_ARRAY_LENGTH&&(r=this.segments.prepareSegment(e,this.layoutVertexArray,this.indexArray)),"Polygon"!==ic[t.type])continue;const i=[],o=[],l=r.vertexLength;for(let t=0;t<n.length;t++){const e=n[t];if(0!==e.length){e!==n[0]&&o.push(i.length/2);for(let t=0;t<e.length;t++){const n=e[t];ac(this.layoutVertexArray,n.x,n.y,0,0,1,1,0),i.push(n.x),i.push(n.y),a&&a.currentPolyCount.top++}}}const c=ll(i,o);for(let t=0;t<c.length;t+=3)this.indexArray.emplaceBack(l+c[t],l+c[t+2],l+c[t+1]);r.primitiveLength+=c.length/3,r.vertexLength+=e}var s;if(a&&a.polyCount.length>0){if(a.borders){a.vertexArrayOffset=this.centroidVertexArray.length;const t=a.borders,e=this.featuresOnBorder.push(a)-1;for(let n=0;n<4;n++)t[n][0]!==Number.MAX_VALUE&&this.borders[n].push(e)}this.encodeCentroid(a.borders?void 0:a.centroid(),a)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,o,r)}sortBorders(){for(let t=0;t<4;t++)this.borders[t].sort((e,n)=>this.featuresOnBorder[e].borders[t][0]-this.featuresOnBorder[n].borders[t][0])}encodeCentroid(t,e,n=!0){let r,i;if(t)if(0!==t.y){const n=e.span()._mult(this.tileToMeter);r=(Math.max(t.x,1)<<3)+Math.min(7,Math.round(n.x/10)),i=(Math.max(t.y,1)<<3)+Math.min(7,Math.round(n.y/10))}else r=Math.ceil(7*(t.x+450)),i=0;else r=0,i=+n;let o=n?this.centroidVertexArray.length:e.vertexArrayOffset;for(const t of e.polyCount){n&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*t.edges+t.top);for(let e=0;e<2*t.edges;e++)this.centroidVertexArray.emplace(o++,0,i),this.centroidVertexArray.emplace(o++,r,i);for(let e=0;e<t.top;e++)this.centroidVertexArray.emplace(o++,r,i)}}}function cc(t,e){return t.x===e.x&&(t.x<0||t.x>ja)||t.y===e.y&&(t.y<0||t.y>ja)}ni("FillExtrusionBucket",lc,{omit:["layers","features"]}),ni("PartMetadata",sc);var uc={paint:new go({"fill-extrusion-opacity":new uo(Bt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ho(Bt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new uo(Bt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new uo(Bt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new po(Bt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ho(Bt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ho(Bt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new uo(Bt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function hc(t,e){return t.x*e.x+t.y*e.y}function dc(t,e){if(1===t.length){let n=0;const r=e[n++];let i;for(;!i||r.equals(i);)if(i=e[n++],!i)return 1/0;for(;n<e.length;n++){const o=e[n],a=t[0],s=i.sub(r),l=o.sub(r),c=a.sub(r),u=hc(s,s),h=hc(s,l),d=hc(l,l),p=hc(c,s),f=hc(c,l),m=u*d-h*h,g=(d*p-h*f)/m,y=(u*f-h*p)/m,v=r.z*(1-g-y)+i.z*g+o.z*y;if(isFinite(v))return v}return 1/0}{let t=1/0;for(const n of e)t=Math.min(t,n.z);return t}}function pc(t){const e=new o(t[0],t[1]);return e.z=t[2],e}function fc(t,e,n,r,i,o,a,s){const l=a*i.getElevationAt(t,e,!0,!0),c=0!==o[0],u=c?0===o[1]?a*(o[0]/7-450):a*function(t,e,n){const r=Math.floor(e[0]/8),i=Math.floor(e[1]/8),o=10*(e[0]-8*r),a=10*(e[1]-8*i),s=t.getElevationAt(r,i,!0,!0),l=t.getMeterToDEM(n),c=Math.floor(.5*(o*l-1)),u=Math.floor(.5*(a*l-1)),h=t.tileCoordToPixel(r,i),d=2*c+1,p=2*u+1,f=function(t,e,n,r,i){return[t.getElevationAtPixel(e,n,!0),t.getElevationAtPixel(e+i,n,!0),t.getElevationAtPixel(e,n+i,!0),t.getElevationAtPixel(e+r,n+i,!0)]}(t,h.x-c,h.y-u,d,p),m=Math.abs(f[0]-f[1]),g=Math.abs(f[2]-f[3]),y=Math.abs(f[0]-f[2])+Math.abs(f[1]-f[3]),v=Math.min(.25,.5*l*(m+g)/d),_=Math.min(.25,.5*l*y/p);return s+Math.max(v*o,_*a)}(i,o,s):l;return{base:l+(0===n)?-1:n,top:c?Math.max(u+r,l+n+2):l+r}}const mc=xo([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:gc}=mc,yc=xo([{name:"a_packed",components:3,type:"Float32"}]),{members:vc}=yc,_c=rc.VectorTileFeature.types,bc=Math.cos(Math.PI/180*37.5);class xc{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(t=>t.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(t=>{this.gradients[t.id]={}}),this.layoutVertexArray=new So,this.layoutVertexArray2=new To,this.indexArray=new Lo,this.programConfigurations=new Ta(t.layers,t.zoom),this.segments=new Na,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(t=>t.isStateDependent()).map(t=>t.id)}populate(t,e,n,r){this.hasPattern=Ul("line",this.layers,e);const i=this.layers[0].layout.get("line-sort-key"),o=[];for(const{feature:e,id:a,index:s,sourceLayerIndex:l}of t){const t=this.layers[0]._featureFilter.needGeometry,c=rs(e,t);if(!this.layers[0]._featureFilter.filter(new eo(this.zoom),c,n))continue;const u=i?i.evaluate(c,{},n):void 0,h={id:a,properties:e.properties,type:e.type,sourceLayerIndex:l,index:s,geometry:t?c.geometry:ns(e,n,r),patterns:{},sortKey:u};o.push(h)}i&&o.sort((t,e)=>t.sortKey-e.sortKey);const{lineAtlas:a,featureIndex:s}=e,l=this.addConstantDashes(a);for(const r of o){const{geometry:i,index:o,sourceLayerIndex:c}=r;if(l&&this.addFeatureDashes(r,a),this.hasPattern){const t=Gl("line",this.layers,r,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(r,i,o,n,a.positions,e.availableImages);s.insert(t[o].feature,i,o,c,this.index)}}addConstantDashes(t){let e=!1;for(const n of this.layers){const r=n.paint.get("line-dasharray").value,i=n.layout.get("line-cap").value;if("constant"!==r.kind||"constant"!==i.kind)e=!0;else{const e=i.value,n=r.value;if(!n)continue;t.addDash(n.from,e),t.addDash(n.to,e),n.other&&t.addDash(n.other,e)}}return e}addFeatureDashes(t,e){const n=this.zoom;for(const r of this.layers){const i=r.paint.get("line-dasharray").value,o=r.layout.get("line-cap").value;if("constant"===i.kind&&"constant"===o.kind)continue;let a,s,l,c,u,h;if("constant"===i.kind){const t=i.value;if(!t)continue;a=t.other||t.to,s=t.to,l=t.from}else a=i.evaluate({zoom:n-1},t),s=i.evaluate({zoom:n},t),l=i.evaluate({zoom:n+1},t);"constant"===o.kind?c=u=h=o.value:(c=o.evaluate({zoom:n-1},t),u=o.evaluate({zoom:n},t),h=o.evaluate({zoom:n+1},t)),e.addDash(a,c),e.addDash(s,u),e.addDash(l,h);const d=e.getKey(a,c),p=e.getKey(s,u),f=e.getKey(l,h);t.patterns[r.id]={min:d,mid:p,max:f}}}update(t,e,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n,r)}addFeatures(t,e,n,r){for(const t of this.patternFeatures)this.addFeature(t,t.geometry,t.index,e,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,vc)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,gc),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,e,n,r,i,o){const a=this.layers[0].layout,s=a.get("line-join").evaluate(t,{}),l=a.get("line-cap").evaluate(t,{}),c=a.get("line-miter-limit"),u=a.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const n of e)this.addLine(n,t,s,l,c,u);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,o,r)}addLine(t,e,n,r,i,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let e=0;e<t.length-1;e++)this.totalDistance+=t[e].dist(t[e+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const a="Polygon"===_c[e.type];let s=t.length;for(;s>=2&&t[s-1].equals(t[s-2]);)s--;let l=0;for(;l<s-1&&t[l].equals(t[l+1]);)l++;if(s<(a?3:2))return;"bevel"===n&&(i=1.05);const c=this.overscaling<=16?122880/(512*this.overscaling):0,u=this.segments.prepareSegment(10*s,this.layoutVertexArray,this.indexArray);let h,d,p,f,m;this.e1=this.e2=-1,a&&(h=t[s-2],m=t[l].sub(h)._unit()._perp());for(let e=l;e<s;e++){if(p=e===s-1?a?t[l+1]:void 0:t[e+1],p&&t[e].equals(p))continue;m&&(f=m),h&&(d=h),h=t[e],m=p?p.sub(h)._unit()._perp():f,f=f||m;let g=f.add(m);0===g.x&&0===g.y||g._unit();const y=f.x*m.x+f.y*m.y,v=g.x*m.x+g.y*m.y,_=0!==v?1/v:1/0,b=2*Math.sqrt(2-2*v),x=v<bc&&d&&p,w=f.x*m.y-f.y*m.x>0;if(x&&e>l){const t=h.dist(d);if(t>2*c){const e=h.sub(h.sub(d)._mult(c/t)._round());this.updateDistance(d,e),this.addCurrentVertex(e,f,0,0,u),d=e}}const E=d&&p;let C=E?n:a?"butt":r;if(E&&"round"===C&&(_<o?C="miter":_<=2&&(C="fakeround")),"miter"===C&&_>i&&(C="bevel"),"bevel"===C&&(_>2&&(C="flipbevel"),_<i&&(C="miter")),d&&this.updateDistance(d,h),"miter"===C)g._mult(_),this.addCurrentVertex(h,g,0,0,u);else if("flipbevel"===C){if(_>100)g=m.mult(-1);else{const t=_*f.add(m).mag()/f.sub(m).mag();g._perp()._mult(t*(w?-1:1))}this.addCurrentVertex(h,g,0,0,u),this.addCurrentVertex(h,g.mult(-1),0,0,u)}else if("bevel"===C||"fakeround"===C){const t=-Math.sqrt(_*_-1),e=w?t:0,n=w?0:t;if(d&&this.addCurrentVertex(h,f,e,n,u),"fakeround"===C){const t=Math.round(180*b/Math.PI/20);for(let e=1;e<t;e++){let n=e/t;if(.5!==n){const t=n-.5;n+=n*t*(n-1)*((1.0904+y*(y*(3.55645-1.43519*y)-3.2452))*t*t+(.848013+y*(.215638*y-1.06021)))}const r=m.sub(f)._mult(n)._add(f)._unit()._mult(w?-1:1);this.addHalfVertex(h,r.x,r.y,!1,w,0,u)}}p&&this.addCurrentVertex(h,m,-e,-n,u)}else if("butt"===C)this.addCurrentVertex(h,g,0,0,u);else if("square"===C){const t=d?1:-1;d||this.addCurrentVertex(h,g,t,t,u),this.addCurrentVertex(h,g,0,0,u),d&&this.addCurrentVertex(h,g,t,t,u)}else"round"===C&&(d&&(this.addCurrentVertex(h,f,0,0,u),this.addCurrentVertex(h,f,1,1,u,!0)),p&&(this.addCurrentVertex(h,m,-1,-1,u,!0),this.addCurrentVertex(h,m,0,0,u)));if(x&&e<s-1){const t=h.dist(p);if(t>2*c){const e=h.add(p.sub(h)._mult(c/t)._round());this.updateDistance(h,e),this.addCurrentVertex(e,m,0,0,u),h=e}}}}addCurrentVertex(t,e,n,r,i,o=!1){const a=e.y*r-e.x,s=-e.y-e.x*r;this.addHalfVertex(t,e.x+e.y*n,e.y-e.x*n,o,!1,n,i),this.addHalfVertex(t,a,s,o,!0,-r,i)}addHalfVertex({x:t,y:e},n,r,i,o,a,s){this.layoutVertexArray.emplaceBack((t<<1)+(i?1:0),(e<<1)+(o?1:0),Math.round(63*n)+128,Math.round(63*r)+128,1+(0===a?0:a<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineSoFar);const l=s.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,l),s.primitiveLength++),o?this.e2=l:this.e1=l}updateScaledDistance(){if(this.lineClips){const t=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=t*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(t,e){this.distance+=t.dist(e),this.updateScaledDistance()}}ni("LineBucket",xc,{omit:["layers","patternFeatures"]});const wc=new go({"line-cap":new ho(Bt.layout_line["line-cap"]),"line-join":new ho(Bt.layout_line["line-join"]),"line-miter-limit":new uo(Bt.layout_line["line-miter-limit"]),"line-round-limit":new uo(Bt.layout_line["line-round-limit"]),"line-sort-key":new ho(Bt.layout_line["line-sort-key"])});var Ec={paint:new go({"line-opacity":new ho(Bt.paint_line["line-opacity"]),"line-color":new ho(Bt.paint_line["line-color"]),"line-translate":new uo(Bt.paint_line["line-translate"]),"line-translate-anchor":new uo(Bt.paint_line["line-translate-anchor"]),"line-width":new ho(Bt.paint_line["line-width"]),"line-gap-width":new ho(Bt.paint_line["line-gap-width"]),"line-offset":new ho(Bt.paint_line["line-offset"]),"line-blur":new ho(Bt.paint_line["line-blur"]),"line-dasharray":new po(Bt.paint_line["line-dasharray"]),"line-pattern":new po(Bt.paint_line["line-pattern"]),"line-gradient":new mo(Bt.paint_line["line-gradient"])}),layout:wc};const Cc=new class extends ho{possiblyEvaluate(t,e){return e=new eo(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),super.possiblyEvaluate(t,e)}evaluate(t,e,n,r){return e=x({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(t,e,n,r)}}(Ec.paint.properties["line-width"].specification);function Sc(t,e){return e>0?e+2*t:t}Cc.useIntegerZoom=!0;const Tc=xo([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"},{name:"a_z_tile_anchor",components:4,type:"Int16"}],4),Oc=xo([{name:"a_projected_pos",components:3,type:"Float32"}],4);xo([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Ic=xo([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Ac=xo([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);xo([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Mc=xo([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),kc=xo([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);xo([{name:"triangle",components:3,type:"Uint16"}]),xo([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),xo([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),xo([{type:"Float32",name:"offsetX"}]),xo([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const Pc=128;function Dc(t,e){const{expression:n}=e;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new eo(t+1))};if("source"===n.kind)return{kind:"source"};{const{zoomStops:e,interpolationType:r}=n;let i=0;for(;i<e.length&&e[i]<=t;)i++;i=Math.max(0,i-1);let o=i;for(;o<e.length&&e[o]<t+1;)o++;o=Math.min(e.length-1,o);const a=e[i],s=e[o];return"composite"===n.kind?{kind:"composite",minZoom:a,maxZoom:s,interpolationType:r}:{kind:"camera",minZoom:a,maxZoom:s,minSize:n.evaluate(new eo(a)),maxSize:n.evaluate(new eo(s)),interpolationType:r}}}function Rc(t,{uSize:e,uSizeT:n},{lowerSize:r,upperSize:i}){return"source"===t.kind?r/Pc:"composite"===t.kind?rn(r/Pc,i/Pc,n):e}function Lc(t,e){let n=0,r=0;if("constant"===t.kind)r=t.layoutSize;else if("source"!==t.kind){const{interpolationType:i,minZoom:o,maxZoom:a}=t,s=i?y(_n.interpolationFactor(i,e,o,a),0,1):0;"camera"===t.kind?r=rn(t.minSize,t.maxSize,s):n=s}return{uSizeT:n,uSize:r}}var Nc=Object.freeze({__proto__:null,getSizeData:Dc,evaluateSizeForFeature:Rc,evaluateSizeForZoom:Lc,SIZE_PACK_FACTOR:Pc});function jc(t,e,n){return t.sections.forEach(t=>{t.text=function(t,e,n){const r=e.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?t=t.toLocaleUpperCase():"lowercase"===r&&(t=t.toLocaleLowerCase()),to.applyArabicShaping&&(t=to.applyArabicShaping(t)),t}(t.text,e,n)}),t}const Fc={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};function zc(t){return"︶"===t||"﹈"===t||"︸"===t||"﹄"===t||"﹂"===t||"︾"===t||"︼"===t||"︺"===t||"︘"===t||"﹀"===t||"︐"===t||"︓"===t||"︔"===t||"｀"===t||"￣"===t||"︑"===t||"︒"===t}function Bc(t){return"︵"===t||"﹇"===t||"︷"===t||"﹃"===t||"﹁"===t||"︽"===t||"︻"===t||"︹"===t||"︗"===t||"︿"===t}var Uc=function(t,e,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,c=l>>1,u=-7,h=n?i-1:0,d=n?-1:1,p=t[e+h];for(h+=d,o=p&(1<<-u)-1,p>>=-u,u+=s;u>0;o=256*o+t[e+h],h+=d,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;u>0;a=256*a+t[e+h],h+=d,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=c}return(p?-1:1)*a*Math.pow(2,o-r)},Gc=function(t,e,n,r,i,o){var a,s,l,c=8*o-i-1,u=(1<<c)-1,h=u>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,f=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(e*l-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[n+p]=255&s,p+=f,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[n+p]=255&a,p+=f,a/=256,c-=8);t[n+p-f]|=128*m},Vc=qc;function qc(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}qc.Varint=0,qc.Fixed64=1,qc.Bytes=2,qc.Fixed32=5;var Hc=4294967296,Wc=1/Hc,Zc="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function $c(t){return t.type===qc.Bytes?t.readVarint()+t.pos:t.pos+1}function Kc(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function Yc(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function Xc(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function Jc(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function Qc(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function tu(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function eu(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function nu(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function ru(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function iu(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function ou(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function au(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function su(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function lu(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function cu(t,e,n){e.glyphs=[],1===t&&n.readMessage(uu,e)}function uu(t,e,n){if(3===t){const{id:t,bitmap:r,width:i,height:o,left:a,top:s,advance:l}=n.readMessage(hu,{});e.glyphs.push({id:t,bitmap:new el({width:i+6,height:o+6},r),metrics:{width:i,height:o,left:a,top:s,advance:l}})}else 4===t?e.ascender=n.readSVarint():5===t&&(e.descender=n.readSVarint())}function hu(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}function du(t){let e=0,n=0;for(const r of t)e+=r.w*r.h,n=Math.max(n,r.w);t.sort((t,e)=>e.h-t.h);const r=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),n),h:1/0}];let i=0,o=0;for(const e of t)for(let t=r.length-1;t>=0;t--){const n=r[t];if(!(e.w>n.w||e.h>n.h)){if(e.x=n.x,e.y=n.y,o=Math.max(o,e.y+e.h),i=Math.max(i,e.x+e.w),e.w===n.w&&e.h===n.h){const e=r.pop();t<r.length&&(r[t]=e)}else e.h===n.h?(n.x+=e.w,n.w-=e.w):e.w===n.w?(n.y+=e.h,n.h-=e.h):(r.push({x:n.x+e.w,y:n.y,w:n.w-e.w,h:e.h}),n.y+=e.h,n.h-=e.h);break}}return{w:i,h:o,fill:e/(i*o)||0}}qc.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,t(i,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=au(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=lu(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=au(this.buf,this.pos)+au(this.buf,this.pos+4)*Hc;return this.pos+=8,t},readSFixed64:function(){var t=au(this.buf,this.pos)+lu(this.buf,this.pos+4)*Hc;return this.pos+=8,t},readFloat:function(){var t=Uc(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Uc(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,r=this.buf;return e=127&(n=r[this.pos++]),n<128?e:(e|=(127&(n=r[this.pos++]))<<7,n<128?e:(e|=(127&(n=r[this.pos++]))<<14,n<128?e:(e|=(127&(n=r[this.pos++]))<<21,n<128?e:function(t,e,n){var r,i,o=n.buf;if(r=(112&(i=o[n.pos++]))>>4,i<128)return Kc(t,r,e);if(r|=(127&(i=o[n.pos++]))<<3,i<128)return Kc(t,r,e);if(r|=(127&(i=o[n.pos++]))<<10,i<128)return Kc(t,r,e);if(r|=(127&(i=o[n.pos++]))<<17,i<128)return Kc(t,r,e);if(r|=(127&(i=o[n.pos++]))<<24,i<128)return Kc(t,r,e);if(r|=(1&(i=o[n.pos++]))<<31,i<128)return Kc(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&Zc?function(t,e,n){return Zc.decode(t.subarray(e,n))}(this.buf,e,t):function(t,e,n){for(var r="",i=e;i<n;){var o,a,s,l=t[i],c=null,u=l>239?4:l>223?3:l>191?2:1;if(i+u>n)break;1===u?l<128&&(c=l):2===u?128==(192&(o=t[i+1]))&&(c=(31&l)<<6|63&o)<=127&&(c=null):3===u?(a=t[i+2],128==(192&(o=t[i+1]))&&128==(192&a)&&((c=(15&l)<<12|(63&o)<<6|63&a)<=2047||c>=55296&&c<=57343)&&(c=null)):4===u&&(a=t[i+2],s=t[i+3],128==(192&(o=t[i+1]))&&128==(192&a)&&128==(192&s)&&((c=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,u=1):c>65535&&(c-=65536,r+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),r+=String.fromCharCode(c),i+=u}return r}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==qc.Bytes)return t.push(this.readVarint(e));var n=$c(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==qc.Bytes)return t.push(this.readSVarint());var e=$c(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==qc.Bytes)return t.push(this.readBoolean());var e=$c(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==qc.Bytes)return t.push(this.readFloat());var e=$c(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==qc.Bytes)return t.push(this.readDouble());var e=$c(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==qc.Bytes)return t.push(this.readFixed32());var e=$c(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==qc.Bytes)return t.push(this.readSFixed32());var e=$c(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==qc.Bytes)return t.push(this.readFixed64());var e=$c(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==qc.Bytes)return t.push(this.readSFixed64());var e=$c(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===qc.Varint)for(;this.buf[this.pos++]>127;);else if(e===qc.Bytes)this.pos=this.readVarint()+this.pos;else if(e===qc.Fixed32)this.pos+=4;else{if(e!==qc.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),su(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),su(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),su(this.buf,-1&t,this.pos),su(this.buf,Math.floor(t*Wc),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),su(this.buf,-1&t,this.pos),su(this.buf,Math.floor(t*Wc),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,r;if(t>=0?(n=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,n.buf[n.pos]=127&(t>>>=7)}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var r,i,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):i=r;continue}if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(t[n++]=239,t[n++]=191,t[n++]=189,i=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&Yc(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),Gc(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Gc(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;r>=128&&Yc(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,qc.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,Xc,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,Jc,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,eu,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,Qc,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,tu,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,nu,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,ru,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,iu,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,ou,e)},writeBytesField:function(t,e){this.writeTag(t,qc.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,qc.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,qc.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,qc.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,qc.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,qc.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,qc.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,qc.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,qc.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,qc.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};class pu{constructor(t,{pixelRatio:e,version:n,stretchX:r,stretchY:i,content:o}){this.paddedRect=t,this.pixelRatio=e,this.stretchX=r,this.stretchY=i,this.content=o,this.version=n}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class fu{constructor(t,e){const n={},r={};this.haveRenderCallbacks=[];const i=[];this.addImages(t,n,i),this.addImages(e,r,i);const{w:o,h:a}=du(i),s=new nl({width:o||1,height:a||1});for(const e in t){const r=t[e],i=n[e].paddedRect;nl.copy(r.data,s,{x:0,y:0},{x:i.x+1,y:i.y+1},r.data)}for(const t in e){const n=e[t],i=r[t].paddedRect,o=i.x+1,a=i.y+1,l=n.data.width,c=n.data.height;nl.copy(n.data,s,{x:0,y:0},{x:o,y:a},n.data),nl.copy(n.data,s,{x:0,y:c-1},{x:o,y:a-1},{width:l,height:1}),nl.copy(n.data,s,{x:0,y:0},{x:o,y:a+c},{width:l,height:1}),nl.copy(n.data,s,{x:l-1,y:0},{x:o-1,y:a},{width:1,height:c}),nl.copy(n.data,s,{x:0,y:0},{x:o+l,y:a},{width:1,height:c})}this.image=s,this.iconPositions=n,this.patternPositions=r}addImages(t,e,n){for(const r in t){const i=t[r],o={x:0,y:0,w:i.data.width+2,h:i.data.height+2};n.push(o),e[r]=new pu(o,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(r)}}patchUpdatedImages(t,e){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const n in t.updatedImages)this.patchUpdatedImage(this.iconPositions[n],t.getImage(n),e),this.patchUpdatedImage(this.patternPositions[n],t.getImage(n),e)}patchUpdatedImage(t,e,n){if(!t||!e)return;if(t.version===e.version)return;t.version=e.version;const[r,i]=t.tl;n.update(e.data,void 0,{x:r,y:i})}}ni("ImagePosition",pu),ni("ImageAtlas",fu);const mu={horizontal:1,vertical:2,horizontalOnly:3};class gu{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,e){const n=new gu;return n.scale=t||1,n.fontStack=e,n}static forImage(t){const e=new gu;return e.imageName=t,e}}class yu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,e){const n=new yu;for(let r=0;r<t.sections.length;r++){const i=t.sections[r];i.image?n.addImageSection(i):n.addTextSection(i,e)}return n}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSections(){return this.sections}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(t){this.text=function(t,e){let n="";for(let r=0;r<t.length;r++){const i=t.charCodeAt(r+1)||null,o=t.charCodeAt(r-1)||null;n+=!e&&(i&&zi(i)&&!Fc[t[r+1]]||o&&zi(o)&&!Fc[t[r-1]])||!Fc[t[r]]?t[r]:Fc[t[r]]}return n}(this.text,t)}trim(){let t=0;for(let e=0;e<this.text.length&&_u[this.text.charCodeAt(e)];e++)t++;let e=this.text.length;for(let n=this.text.length-1;n>=0&&n>=t&&_u[this.text.charCodeAt(n)];n--)e--;this.text=this.text.substring(t,e),this.sectionIndex=this.sectionIndex.slice(t,e)}substring(t,e){const n=new yu;return n.text=this.text.substring(t,e),n.sectionIndex=this.sectionIndex.slice(t,e),n.sections=this.sections,n}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((t,e)=>Math.max(t,this.sections[e].scale),0)}addTextSection(t,e){this.text+=t.text,this.sections.push(gu.forText(t.scale,t.fontStack||e));const n=this.sections.length-1;for(let e=0;e<t.text.length;++e)this.sectionIndex.push(n)}addImageSection(t){const e=t.image?t.image.name:"";if(0===e.length)return void D("Can't add FormattedSection with an empty image.");const n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(gu.forImage(e)),this.sectionIndex.push(this.sections.length-1)):D("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function vu(t,e,n,r,i,o,a,s,l,c,u,h,d,p,f,m){const g=yu.fromFeature(t,i);let y;h===mu.vertical&&g.verticalizePunctuation(d);const{processBidirectionalText:v,processStyledBidirectionalText:_}=to;if(v&&1===g.sections.length){y=[];const t=v(g.toString(),Su(g,c,o,e,r,p,f));for(const e of t){const t=new yu;t.text=e,t.sections=g.sections;for(let n=0;n<e.length;n++)t.sectionIndex.push(0);y.push(t)}}else if(_){y=[];const t=_(g.text,g.sectionIndex,Su(g,c,o,e,r,p,f));for(const e of t){const t=new yu;t.text=e[0],t.sectionIndex=e[1],t.sections=g.sections,y.push(t)}}else y=function(t,e){const n=[],r=t.text;let i=0;for(const r of e)n.push(t.substring(i,r)),i=r;return i<r.length&&n.push(t.substring(i,r.length)),n}(g,Su(g,c,o,e,r,p,f));const b=[],x={positionedLines:b,text:g.toString(),top:u[1],bottom:u[1],left:u[0],right:u[0],writingMode:h,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(t,e,n,r,i,o,a,s,l,c,u,h){let d=0,p=0,f=0;const m="right"===s?1:"left"===s?0:.5;let g=!1;for(const t of i){const n=t.getSections();for(const t of n){if(t.imageName)continue;const n=e[t.fontStack];if(n&&(g=void 0!==n.ascender&&void 0!==n.descender,!g))break}if(!g)break}let y=0;for(const a of i){a.trim();const i=a.getMaxScale(),s=24*(i-1),_={positionedGlyphs:[],lineOffset:0};t.positionedLines[y]=_;const b=_.positionedGlyphs;let x=0;if(!a.length()){p+=o,++y;continue}let w=0,E=0;for(let o=0;o<a.length();o++){const s=a.getSection(o),f=a.getSectionIndex(o),m=a.getCharCode(o);let y=s.scale,_=null,C=null,S=null,T=24,O=0;const I=!(l===mu.horizontal||!u&&!Fi(m)||u&&(_u[m]||(v=m,li(v)||ci(v)||ui(v)||Ai(v)||Di(v))));if(s.imageName){const e=r[s.imageName];if(!e)continue;S=s.imageName,t.iconsInText=t.iconsInText||!0,C=e.paddedRect;const n=e.displaySize;y=24*y/h,_={width:n[0],height:n[1],left:1,top:-3,advance:I?n[1]:n[0],localGlyph:!1},O=g?-_.height*y:24*i-17-n[1]*y,T=_.advance;const o=(I?n[0]:n[1])*y-24*i;o>0&&o>x&&(x=o)}else{const t=n[s.fontStack];if(!t)continue;t[m]&&(C=t[m]);const r=e[s.fontStack];if(!r)continue;const o=r.glyphs[m];if(!o)continue;if(_=o.metrics,T=8203!==m?24:0,g){const t=void 0!==r.ascender?Math.abs(r.ascender):0,e=void 0!==r.descender?Math.abs(r.descender):0,n=(t+e)*y;w<n&&(w=n,E=(t-e)/2*y),O=-t*y}else O=24*(i-y)-17}I?(t.verticalizable=!0,b.push({glyph:m,imageName:S,x:d,y:p+O,vertical:I,scale:y,localGlyph:_.localGlyph,fontStack:s.fontStack,sectionIndex:f,metrics:_,rect:C}),d+=T*y+c):(b.push({glyph:m,imageName:S,x:d,y:p+O,vertical:I,scale:y,localGlyph:_.localGlyph,fontStack:s.fontStack,sectionIndex:f,metrics:_,rect:C}),d+=_.advance*y+c)}0!==b.length&&(f=Math.max(d-c,f),g?Ou(b,m,x,E,o*i/2):Ou(b,m,x,0,o/2)),d=0;const C=o*i+x;_.lineOffset=Math.max(x,s),p+=C,++y}var v;const _=p,{horizontalAlign:b,verticalAlign:x}=Tu(a);(function(t,e,n,r,i,o){const a=(e-n)*i,s=-o*r;for(const e of t)for(const t of e.positionedGlyphs)t.x+=a,t.y+=s})(t.positionedLines,m,b,x,f,_),t.top+=-x*_,t.bottom=t.top+_,t.left+=-b*f,t.right=t.left+f,t.hasBaseline=g}(x,e,n,r,y,a,s,l,h,c,d,m),!function(t){for(const e of t)if(0!==e.positionedGlyphs.length)return!1;return!0}(b)&&x}const _u={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},bu={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function xu(t,e,n,r,i,o){if(e.imageName){const t=r[e.imageName];return t?t.displaySize[0]*e.scale*24/o+i:0}{const r=n[e.fontStack],o=r&&r.glyphs[t];return o?o.metrics.advance*e.scale+i:0}}function wu(t,e,n,r){const i=Math.pow(t-e,2);return r?t<e?i/2:2*i:i+Math.abs(n)*n}function Eu(t,e,n){let r=0;return 10===t&&(r-=1e4),n&&(r+=150),40!==t&&65288!==t||(r+=50),41!==e&&65289!==e||(r+=50),r}function Cu(t,e,n,r,i,o){let a=null,s=wu(e,n,i,o);for(const t of r){const r=wu(e-t.x,n,i,o)+t.badness;r<=s&&(a=t,s=r)}return{index:t,x:e,priorBreak:a,badness:s}}function Su(t,e,n,r,i,o,a){if("point"!==o)return[];if(!t)return[];const s=[],l=function(t,e,n,r,i,o){let a=0;for(let n=0;n<t.length();n++){const s=t.getSection(n);a+=xu(t.getCharCode(n),s,r,i,e,o)}return a/Math.max(1,Math.ceil(a/n))}(t,e,n,r,i,a),c=t.text.indexOf("​")>=0;let u=0;for(let n=0;n<t.length();n++){const o=t.getSection(n),d=t.getCharCode(n);if(_u[d]||(u+=xu(d,o,r,i,e,a)),n<t.length()-1){const e=!((h=d)<11904||!(vi(h)||yi(h)||ki(h)||Ii(h)||wi(h)||hi(h)||_i(h)||fi(h)||Ei(h)||Ci(h)||xi(h)||Ri(h)||mi(h)||pi(h)||di(h)||bi(h)||gi(h)||Mi(h)||Ti(h)||Si(h)));(bu[d]||e||o.imageName)&&s.push(Cu(n+1,u,l,s,Eu(d,t.getCharCode(n+1),e&&c),!1))}}var h;return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(Cu(t.length(),u,l,s,0,!0))}function Tu(t){let e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function Ou(t,e,n,r,i){if(!(e||n||r||i))return;const o=t.length-1,a=t[o],s=(a.x+a.metrics.advance*a.scale)*e;for(let e=0;e<=o;e++)t[e].x-=s,t[e].y+=n+r+i}function Iu(t,e,n){const{horizontalAlign:r,verticalAlign:i}=Tu(n),o=e[0]-t.displaySize[0]*r,a=e[1]-t.displaySize[1]*i;return{image:t,top:a,bottom:a+t.displaySize[1],left:o,right:o+t.displaySize[0]}}function Au(t,e,n,r,i,o){const a=t.image;let s;if(a.content){const t=a.content,e=a.pixelRatio||1;s=[t[0]/e,t[1]/e,a.displaySize[0]-t[2]/e,a.displaySize[1]-t[3]/e]}const l=e.left*o,c=e.right*o;let u,h,d,p;"width"===n||"both"===n?(p=i[0]+l-r[3],h=i[0]+c+r[1]):(p=i[0]+(l+c-a.displaySize[0])/2,h=p+a.displaySize[0]);const f=e.top*o,m=e.bottom*o;return"height"===n||"both"===n?(u=i[1]+f-r[0],d=i[1]+m+r[2]):(u=i[1]+(f+m-a.displaySize[1])/2,d=u+a.displaySize[1]),{image:a,top:u,right:h,bottom:d,left:p,collisionPadding:s}}class Mu extends o{constructor(t,e,n,r,i){super(t,e),this.angle=r,this.z=n,void 0!==i&&(this.segment=i)}clone(){return new Mu(this.x,this.y,this.z,this.angle,this.segment)}}function ku(t,e,n,r,i){if(void 0===e.segment)return!0;let o=e,a=e.segment+1,s=0;for(;s>-n/2;){if(a--,a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;const l=[];let c=0;for(;s<n/2;){const e=t[a],n=t[a+1];if(!n)return!1;let o=t[a-1].angleTo(e)-e.angleTo(n);for(o=Math.abs((o+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:o}),c+=o;s-l[0].distance>r;)c-=l.shift().angleDelta;if(c>i)return!1;a++,s+=e.dist(n)}return!0}function Pu(t){let e=0;for(let n=0;n<t.length-1;n++)e+=t[n].dist(t[n+1]);return e}function Du(t,e,n){return t?.6*e*n:0}function Ru(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function Lu(t,e,n,r,i,o){const a=Du(n,i,o),s=Ru(n,r)*o;let l=0;const c=Pu(t)/2;for(let n=0;n<t.length-1;n++){const r=t[n],i=t[n+1],o=r.dist(i);if(l+o>c){const u=(c-l)/o,h=rn(r.x,i.x,u),d=rn(r.y,i.y,u),p=new Mu(h,d,0,i.angleTo(r),n);return!a||ku(t,p,s,a,e)?p:void 0}l+=o}}function Nu(t,e,n,r,i,o,a,s,l){const c=Du(r,o,a),u=Ru(r,i),h=u*a,d=0===t[0].x||t[0].x===l||0===t[0].y||t[0].y===l;return e-h<e/4&&(e=h+e/4),function t(e,n,r,i,o,a,s,l,c){const u=a/2,h=Pu(e);let d=0,p=n-r,f=[];for(let t=0;t<e.length-1;t++){const n=e[t],s=e[t+1],l=n.dist(s),m=s.angleTo(n);for(;p+r<d+l;){p+=r;const g=(p-d)/l,y=rn(n.x,s.x,g),v=rn(n.y,s.y,g);if(y>=0&&y<c&&v>=0&&v<c&&p-u>=0&&p+u<=h){const n=new Mu(y,v,0,m,t);n._round(),i&&!ku(e,n,a,i,o)||f.push(n)}}d+=l}return l||f.length||s||(f=t(e,d/2,r,i,o,a,s,!0,c)),f}(t,d?e/2*s%e:(u/2+2*o)*a*s%e,e,c,n,h,d,!1,l)}function ju(t,e,n,r,i){const a=[];for(let s=0;s<t.length;s++){const l=t[s];let c;for(let t=0;t<l.length-1;t++){let s=l[t],u=l[t+1];s.x<e&&u.x<e||(s.x<e?s=new o(e,s.y+(e-s.x)/(u.x-s.x)*(u.y-s.y))._round():u.x<e&&(u=new o(e,s.y+(e-s.x)/(u.x-s.x)*(u.y-s.y))._round()),s.y<n&&u.y<n||(s.y<n?s=new o(s.x+(n-s.y)/(u.y-s.y)*(u.x-s.x),n)._round():u.y<n&&(u=new o(s.x+(n-s.y)/(u.y-s.y)*(u.x-s.x),n)._round()),s.x>=r&&u.x>=r||(s.x>=r?s=new o(r,s.y+(r-s.x)/(u.x-s.x)*(u.y-s.y))._round():u.x>=r&&(u=new o(r,s.y+(r-s.x)/(u.x-s.x)*(u.y-s.y))._round()),s.y>=i&&u.y>=i||(s.y>=i?s=new o(s.x+(i-s.y)/(u.y-s.y)*(u.x-s.x),i)._round():u.y>=i&&(u=new o(s.x+(i-s.y)/(u.y-s.y)*(u.x-s.x),i)._round()),c&&s.equals(c[c.length-1])||(c=[s],a.push(c)),c.push(u)))))}}return a}ni("Anchor",Mu);const Fu=1e20;function zu(t,e,n,r,i,o,a,s,l){for(let c=e;c<e+r;c++)Bu(t,n*o+c,o,i,a,s,l);for(let c=n;c<n+i;c++)Bu(t,c*o+e,1,r,a,s,l)}function Bu(t,e,n,r,i,o,a){o[0]=0,a[0]=-Fu,a[1]=Fu,i[0]=t[e];for(let s=1,l=0,c=0;s<r;s++){i[s]=t[e+s*n];const r=s*s;do{const t=o[l];c=(i[s]-i[t]+r-t*t)/(s-t)/2}while(c<=a[l]&&--l>-1);l++,o[l]=s,a[l]=c,a[l+1]=Fu}for(let s=0,l=0;s<r;s++){for(;a[l+1]<s;)l++;const r=o[l],c=s-r;t[e+s*n]=i[r]+c*c}}const Uu={none:0,ideographs:1,all:2};class Gu{constructor(t,e,n){this.requestManager=t,this.localGlyphMode=e,this.localFontFamily=n,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(t){this.url=t}getGlyphs(t,e){const n=[];for(const e in t)for(const r of t[e])n.push({stack:e,id:r});_(n,({stack:t,id:e},n)=>{let r=this.entries[t];r||(r=this.entries[t]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let i=r.glyphs[e];if(void 0!==i)return void n(null,{stack:t,id:e,glyph:i});if(i=this._tinySDF(r,t,e),i)return r.glyphs[e]=i,void n(null,{stack:t,id:e,glyph:i});const o=Math.floor(e/256);if(256*o>65535)return void n(new Error("glyphs > 65535 not supported"));if(r.ranges[o])return void n(null,{stack:t,id:e,glyph:i});let a=r.requests[o];a||(a=r.requests[o]=[],Gu.loadGlyphRange(t,o,this.url,this.requestManager,(t,e)=>{if(e){r.ascender=e.ascender,r.descender=e.descender;for(const t in e.glyphs)this._doesCharSupportLocalGlyph(+t)||(r.glyphs[+t]=e.glyphs[+t]);r.ranges[o]=!0}for(const n of a)n(t,e);delete r.requests[o]})),a.push((r,i)=>{r?n(r):i&&n(null,{stack:t,id:e,glyph:i.glyphs[e]||null})})},(t,n)=>{if(t)e(t);else if(n){const t={};for(const{stack:e,id:r,glyph:i}of n)void 0===t[e]&&(t[e]={}),void 0===t[e].glyphs&&(t[e].glyphs={}),t[e].glyphs[r]=i&&{id:i.id,bitmap:i.bitmap.clone(),metrics:i.metrics},t[e].ascender=this.entries[e].ascender,t[e].descender=this.entries[e].descender;e(null,t)}})}_doesCharSupportLocalGlyph(t){return this.localGlyphMode!==Uu.none&&(this.localGlyphMode===Uu.all?!!this.localFontFamily:!!this.localFontFamily&&(Ci(t)||Oi(t)||mi(t)||gi(t))||fi(t))}_tinySDF(t,e,n){const r=this.localFontFamily;if(!r||!this._doesCharSupportLocalGlyph(n))return;let i=t.tinySDF;if(!i){let n="400";/bold/i.test(e)?n="900":/medium/i.test(e)?n="500":/light/i.test(e)&&(n="200"),i=t.tinySDF=new Gu.TinySDF({fontFamily:r,fontWeight:n,fontSize:48,buffer:6,radius:16}),i.fontWeight=n}if(this.localGlyphs[i.fontWeight][n])return this.localGlyphs[i.fontWeight][n];const o=String.fromCharCode(n),{data:a,width:s,height:l,glyphWidth:c,glyphHeight:u,glyphLeft:h,glyphTop:d,glyphAdvance:p}=i.draw(o);return this.localGlyphs[i.fontWeight][n]={id:n,bitmap:new el({width:s,height:l},a),metrics:{width:c/2,height:u/2,left:h/2,top:d/2-27,advance:p/2,localGlyph:!0}}}}function Vu(t,e,n,r){const i=[],a=t.image,s=a.pixelRatio,l=a.paddedRect.w-2,c=a.paddedRect.h-2,u=t.right-t.left,h=t.bottom-t.top,d=a.stretchX||[[0,l]],p=a.stretchY||[[0,c]],f=(t,e)=>t+e[1]-e[0],m=d.reduce(f,0),g=p.reduce(f,0),y=l-m,v=c-g;let _=0,b=m,x=0,w=g,E=0,C=y,S=0,T=v;if(a.content&&r){const t=a.content;_=qu(d,0,t[0]),x=qu(p,0,t[1]),b=qu(d,t[0],t[2]),w=qu(p,t[1],t[3]),E=t[0]-_,S=t[1]-x,C=t[2]-t[0]-b,T=t[3]-t[1]-w}const O=(r,i,l,c)=>{const d=Wu(r.stretch-_,b,u,t.left),p=Zu(r.fixed-E,C,r.stretch,m),f=Wu(i.stretch-x,w,h,t.top),y=Zu(i.fixed-S,T,i.stretch,g),v=Wu(l.stretch-_,b,u,t.left),O=Zu(l.fixed-E,C,l.stretch,m),I=Wu(c.stretch-x,w,h,t.top),A=Zu(c.fixed-S,T,c.stretch,g),M=new o(d,f),k=new o(v,f),P=new o(v,I),D=new o(d,I),R=new o(p/s,y/s),L=new o(O/s,A/s),N=e*Math.PI/180;if(N){const t=Math.sin(N),e=Math.cos(N),n=[e,-t,t,e];M._matMult(n),k._matMult(n),D._matMult(n),P._matMult(n)}const j=r.stretch+r.fixed,F=i.stretch+i.fixed;return{tl:M,tr:k,bl:D,br:P,tex:{x:a.paddedRect.x+1+j,y:a.paddedRect.y+1+F,w:l.stretch+l.fixed-j,h:c.stretch+c.fixed-F},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:R,pixelOffsetBR:L,minFontScaleX:C/s/u,minFontScaleY:T/s/h,isSDF:n}};if(r&&(a.stretchX||a.stretchY)){const t=Hu(d,y,m),e=Hu(p,v,g);for(let n=0;n<t.length-1;n++){const r=t[n],o=t[n+1];for(let t=0;t<e.length-1;t++)i.push(O(r,e[t],o,e[t+1]))}}else i.push(O({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:l+1},{fixed:0,stretch:c+1}));return i}function qu(t,e,n){let r=0;for(const i of t)r+=Math.max(e,Math.min(n,i[1]))-Math.max(e,Math.min(n,i[0]));return r}function Hu(t,e,n){const r=[{fixed:-1,stretch:0}];for(const[e,n]of t){const t=r[r.length-1];r.push({fixed:e-t.stretch,stretch:t.stretch}),r.push({fixed:e-t.stretch,stretch:t.stretch+(n-e)})}return r.push({fixed:e+1,stretch:n}),r}function Wu(t,e,n,r){return t/e*n+r}function Zu(t,e,n,r){return t-e*n/r}function $u(t,e,n,r){const i=e+t.positionedLines[r].lineOffset;return 0===r?n+i/2:n+(i+(e+t.positionedLines[r-1].lineOffset))/2}Gu.loadGlyphRange=function(t,e,n,r,i){const o=256*e,a=o+255,s=r.transformRequest(r.normalizeGlyphsURL(n).replace("{fontstack}",t).replace("{range}",`${o}-${a}`),Et.Glyphs);Ot(s,(t,e)=>{if(t)i(t);else if(e){const t={},n=function(t){return new Vc(t).readFields(cu,{})}(e);for(const e of n.glyphs)t[e.id]=e;i(null,{glyphs:t,ascender:n.ascender,descender:n.descender})}})},Gu.TinySDF=class{constructor({fontSize:t=24,buffer:e=3,radius:n=8,cutoff:r=.25,fontFamily:i="sans-serif",fontWeight:o="normal",fontStyle:a="normal"}){this.buffer=e,this.cutoff=r,this.radius=n;const s=this.size=t+4*e,l=this._createCanvas(s),c=this.ctx=l.getContext("2d",{willReadFrequently:!0});c.font=`${a} ${o} ${t}px ${i}`,c.textBaseline="alphabetic",c.textAlign="left",c.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s)}_createCanvas(t){const e=document.createElement("canvas");return e.width=e.height=t,e}draw(t){const{width:e,actualBoundingBoxAscent:n,actualBoundingBoxDescent:r,actualBoundingBoxLeft:i,actualBoundingBoxRight:o}=this.ctx.measureText(t),a=Math.floor(n),s=Math.min(this.size-this.buffer,Math.ceil(o-i)),l=Math.min(this.size-this.buffer,Math.ceil(n)+Math.ceil(r)),c=s+2*this.buffer,u=l+2*this.buffer,h=c*u,d=new Uint8ClampedArray(h),p={data:d,width:c,height:u,glyphWidth:s,glyphHeight:l,glyphTop:a,glyphLeft:0,glyphAdvance:e};if(0===s||0===l)return p;const{ctx:f,buffer:m,gridInner:g,gridOuter:y}=this;f.clearRect(m,m,s,l),f.fillText(t,m,m+a+1);const v=f.getImageData(m,m,s,l);y.fill(Fu,0,h),g.fill(0,0,h);for(let t=0;t<l;t++)for(let e=0;e<s;e++){const n=v.data[4*(t*s+e)+3]/255;if(0===n)continue;const r=(t+m)*c+e+m;if(1===n)y[r]=0,g[r]=Fu;else{const t=.5-n;y[r]=t>0?t*t:0,g[r]=t<0?t*t:0}}zu(y,0,0,c,u,c,this.f,this.v,this.z),zu(g,m,m,s,l,c,this.f,this.v,this.z);for(let t=0;t<h;t++){const e=Math.sqrt(y[t])-Math.sqrt(g[t]);d[t]=Math.round(255-255*(e/this.radius+this.cutoff))}return p}};class Ku{constructor(t=[],e=Yu){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let t=(this.length>>1)-1;t>=0;t--)this._down(t)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:n}=this,r=e[t];for(;t>0;){const i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r}_down(t){const{data:e,compare:n}=this,r=this.length>>1,i=e[t];for(;t<r;){let r=1+(t<<1),o=e[r];const a=r+1;if(a<this.length&&n(e[a],o)<0&&(r=a,o=e[a]),n(o,i)>=0)break;e[t]=o,t=r}e[t]=i}}function Yu(t,e){return t<e?-1:t>e?1:0}function Xu(t,e=1,n=!1){let r=1/0,i=1/0,a=-1/0,s=-1/0;const l=t[0];for(let t=0;t<l.length;t++){const e=l[t];(!t||e.x<r)&&(r=e.x),(!t||e.y<i)&&(i=e.y),(!t||e.x>a)&&(a=e.x),(!t||e.y>s)&&(s=e.y)}const c=Math.min(a-r,s-i);let u=c/2;const h=new Ku([],Ju);if(0===c)return new o(r,i);for(let e=r;e<a;e+=c)for(let n=i;n<s;n+=c)h.push(new Qu(e+u,n+u,u,t));let d=function(t){let e=0,n=0,r=0;const i=t[0];for(let t=0,o=i.length,a=o-1;t<o;a=t++){const o=i[t],s=i[a],l=o.x*s.y-s.x*o.y;n+=(o.x+s.x)*l,r+=(o.y+s.y)*l,e+=3*l}return new Qu(n/e,r/e,0,t)}(t),p=h.length;for(;h.length;){const r=h.pop();(r.d>d.d||!d.d)&&(d=r,n&&console.log("found best %d after %d probes",Math.round(1e4*r.d)/1e4,p)),r.max-d.d<=e||(u=r.h/2,h.push(new Qu(r.p.x-u,r.p.y-u,u,t)),h.push(new Qu(r.p.x+u,r.p.y-u,u,t)),h.push(new Qu(r.p.x-u,r.p.y+u,u,t)),h.push(new Qu(r.p.x+u,r.p.y+u,u,t)),p+=4)}return n&&(console.log("num probes: "+p),console.log("best distance: "+d.d)),d.p}function Ju(t,e){return e.max-t.max}function Qu(t,e,n,r){this.p=new o(t,e),this.h=n,this.d=function(t,e){let n=!1,r=1/0;for(let i=0;i<e.length;i++){const o=e[i];for(let e=0,i=o.length,a=i-1;e<i;a=e++){const i=o[e],s=o[a];i.y>t.y!=s.y>t.y&&t.x<(s.x-i.x)*(t.y-i.y)/(s.y-i.y)+i.x&&(n=!n),r=Math.min(r,ps(t,i,s))}}return(n?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}const th=Number.POSITIVE_INFINITY,eh=Math.sqrt(2);function nh(t,e){return e[1]!==th?function(t,e,n){let r=0,i=0;switch(e=Math.abs(e),n=Math.abs(n),t){case"top-right":case"top-left":case"top":i=n-7;break;case"bottom-right":case"bottom-left":case"bottom":i=7-n}switch(t){case"top-right":case"bottom-right":case"right":r=-e;break;case"top-left":case"bottom-left":case"left":r=e}return[r,i]}(t,e[0],e[1]):function(t,e){let n=0,r=0;e<0&&(e=0);const i=e/eh;switch(t){case"top-right":case"top-left":r=i-7;break;case"bottom-right":case"bottom-left":r=7-i;break;case"bottom":r=7-e;break;case"top":r=e-7}switch(t){case"top-right":case"bottom-right":n=-i;break;case"top-left":case"bottom-left":n=i;break;case"left":n=e;break;case"right":n=-e}return[n,r]}(t,e[0])}function rh(t,e,n,r,i,o,a,s,l){t.createArrays(),t.tilePixelRatio=ja/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;const c=t.layers[0].layout,u=t.layers[0]._unevaluatedLayout._values,h={};if("composite"===t.textSizeData.kind){const{minZoom:e,maxZoom:n}=t.textSizeData;h.compositeTextSizes=[u["text-size"].possiblyEvaluate(new eo(e),s),u["text-size"].possiblyEvaluate(new eo(n),s)]}if("composite"===t.iconSizeData.kind){const{minZoom:e,maxZoom:n}=t.iconSizeData;h.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new eo(e),s),u["icon-size"].possiblyEvaluate(new eo(n),s)]}h.layoutTextSize=u["text-size"].possiblyEvaluate(new eo(l+1),s),h.layoutIconSize=u["icon-size"].possiblyEvaluate(new eo(l+1),s),h.textMaxSize=u["text-size"].possiblyEvaluate(new eo(18),s);const d="map"===c.get("text-rotation-alignment")&&"point"!==c.get("symbol-placement"),p=c.get("text-size");for(const o of t.features){const l=c.get("text-font").evaluate(o,{},s).join(","),u=p.evaluate(o,{},s),f=h.layoutTextSize.evaluate(o,{},s),m=(h.layoutIconSize.evaluate(o,{},s),{horizontal:{},vertical:void 0}),g=o.text;let y,v=[0,0];if(g){const r=g.toString(),a=24*c.get("text-letter-spacing").evaluate(o,{},s),h=24*c.get("text-line-height").evaluate(o,{},s),p=Ni(r)?a:0,y=c.get("text-anchor").evaluate(o,{},s),_=c.get("text-variable-anchor");if(!_){const t=c.get("text-radial-offset").evaluate(o,{},s);v=t?nh(y,[24*t,th]):c.get("text-offset").evaluate(o,{},s).map(t=>24*t)}let b=d?"center":c.get("text-justify").evaluate(o,{},s);const x=c.get("symbol-placement"),w="point"===x,E="point"===x?24*c.get("text-max-width").evaluate(o,{},s):0,C=o=>{t.allowVerticalPlacement&&Li(r)&&(m.vertical=vu(g,e,n,i,l,E,h,y,o,p,v,mu.vertical,!0,x,f,u))};if(!d&&_){const t="auto"===b?_.map(t=>ih(t)):[b];let r=!1;for(let o=0;o<t.length;o++){const a=t[o];if(!m.horizontal[a])if(r)m.horizontal[a]=m.horizontal[0];else{const t=vu(g,e,n,i,l,E,h,"center",a,p,v,mu.horizontal,!1,x,f,u);t&&(m.horizontal[a]=t,r=1===t.positionedLines.length)}}C("left")}else{if("auto"===b&&(b=ih(y)),w||c.get("text-writing-mode").indexOf("horizontal")>=0||!Li(r)){const t=vu(g,e,n,i,l,E,h,y,b,p,v,mu.horizontal,!1,x,f,u);t&&(m.horizontal[b]=t)}C("point"===x?"left":b)}}let _=!1;if(o.icon&&o.icon.name){const e=r[o.icon.name];e&&(y=Iu(i[o.icon.name],c.get("icon-offset").evaluate(o,{},s),c.get("icon-anchor").evaluate(o,{},s)),_=e.sdf,void 0===t.sdfIcons?t.sdfIcons=e.sdf:t.sdfIcons!==e.sdf&&D("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(e.pixelRatio!==t.pixelRatio||0!==c.get("icon-rotate").constantOr(1))&&(t.iconsNeedLinear=!0))}const b=lh(m.horizontal)||m.vertical;t.iconsInText||(t.iconsInText=!!b&&b.iconsInText),(b||y)&&oh(t,o,m,y,r,h,f,0,v,_,a,s)}o&&t.generateCollisionDebugBuffers(l,t.collisionBoxArray)}function ih(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function oh(t,e,n,r,i,o,a,s,l,c,u,d){let p=o.textMaxSize.evaluate(e,{},d);void 0===p&&(p=a);const f=t.layers[0].layout,m=f.get("icon-offset").evaluate(e,{},d),g=lh(n.horizontal)||n.vertical,y=a/24,v=t.tilePixelRatio*p/24,_=t.tilePixelRatio*f.get("symbol-spacing"),b=f.get("text-padding")*t.tilePixelRatio,x=f.get("icon-padding")*t.tilePixelRatio,w=h(f.get("text-max-angle")),E="map"===f.get("text-rotation-alignment")&&"point"!==f.get("symbol-placement"),C="map"===f.get("icon-rotation-alignment")&&"point"!==f.get("symbol-placement"),S=f.get("symbol-placement"),T=_/2,O=f.get("icon-text-fit");let I;r&&"none"!==O&&(t.allowVerticalPlacement&&n.vertical&&(I=Au(r,n.vertical,O,f.get("icon-text-fit-padding"),m,y)),g&&(r=Au(r,g,O,f.get("icon-text-fit-padding"),m,y)));const A=(a,s)=>{s.x<0||s.x>=ja||s.y<0||s.y>=ja||function(t,e,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,y,v,_,b,x,w,E,C){const S=t.addToLineVertexArray(e,r);let T,O,I,A,M,k,P,R=0,L=0,N=0,j=0,F=-1,z=-1;const B={};let U=sa(""),G=0,V=0;if(void 0===l._unevaluatedLayout.getValue("text-radial-offset")?[G,V]=l.layout.get("text-offset").evaluate(b,{},C).map(t=>24*t):(G=24*l.layout.get("text-radial-offset").evaluate(b,{},C),V=th),t.allowVerticalPlacement&&i.vertical){const t=i.vertical;if(f)k=uh(t),s&&(P=uh(s));else{const r=l.layout.get("text-rotate").evaluate(b,{},C)+90;I=ch(c,n,e,u,h,d,t,p,r,m),s&&(A=ch(c,n,e,u,h,d,s,y,r))}}if(o){const r=l.layout.get("icon-rotate").evaluate(b,{},C),i="none"!==l.layout.get("icon-text-fit"),a=Vu(o,r,w,i),p=s?Vu(s,r,w,i):void 0;O=ch(c,n,e,u,h,d,o,y,r),R=4*a.length;const f=t.iconSizeData;let m=null;"source"===f.kind?(m=[Pc*l.layout.get("icon-size").evaluate(b,{},C)],m[0]>ah&&D(t.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".')):"composite"===f.kind&&(m=[Pc*x.compositeIconSizes[0].evaluate(b,{},C),Pc*x.compositeIconSizes[1].evaluate(b,{},C)],(m[0]>ah||m[1]>ah)&&D(t.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".')),t.addSymbols(t.icon,a,m,_,v,b,!1,n,e,S.lineStartIndex,S.lineLength,-1,E,C),F=t.icon.placedSymbolArray.length-1,p&&(L=4*p.length,t.addSymbols(t.icon,p,m,_,v,b,mu.vertical,n,e,S.lineStartIndex,S.lineLength,-1,E,C),z=t.icon.placedSymbolArray.length-1)}for(const r in i.horizontal){const o=i.horizontal[r];T||(U=sa(o.text),f?M=uh(o):T=ch(c,n,e,u,h,d,o,p,l.layout.get("text-rotate").evaluate(b,{},C),m));const s=1===o.positionedLines.length;if(N+=sh(t,n,e,o,a,l,f,b,m,S,i.vertical?mu.horizontal:mu.horizontalOnly,s?Object.keys(i.horizontal):[r],B,F,x,E,C),s)break}i.vertical&&(j+=sh(t,n,e,i.vertical,a,l,f,b,m,S,mu.vertical,["vertical"],B,z,x,E,C));let q=-1;const H=(t,e)=>t?Math.max(t,e):e;q=H(M,q),q=H(k,q),q=H(P,q);const W=q>-1?1:0;t.glyphOffsetArray.length>=_h.MAX_GLYPHS&&D("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==b.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,b.sortKey),t.symbolInstances.emplaceBack(n.x,n.y,n.z,e.x,e.y,B.right>=0?B.right:-1,B.center>=0?B.center:-1,B.left>=0?B.left:-1,B.vertical>=0?B.vertical:-1,F,z,U,void 0!==T?T:t.collisionBoxArray.length,void 0!==T?T+1:t.collisionBoxArray.length,void 0!==I?I:t.collisionBoxArray.length,void 0!==I?I+1:t.collisionBoxArray.length,void 0!==O?O:t.collisionBoxArray.length,void 0!==O?O+1:t.collisionBoxArray.length,A||t.collisionBoxArray.length,A?A+1:t.collisionBoxArray.length,u,N,j,R,L,W,0,G,V,q)}(t,s,s,a,n,r,i,I,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,b,E,l,0,x,C,m,e,o,c,u,d)};if("line"===S)for(const i of ju(e.geometry,0,0,ja,ja)){const e=Nu(i,_,w,n.vertical||g,r,24,v,t.overscaling,ja);for(const n of e){const e=g;e&&hh(t,e.text,T,n)||A(i,n)}}else if("line-center"===S){for(const t of e.geometry)if(t.length>1){const e=Lu(t,w,n.vertical||g,r,24,v);e&&A(t,e)}}else if("Polygon"===e.type)for(const t of zl(e.geometry,0)){const e=Xu(t,16);A(t[0],new Mu(e.x,e.y,0,0,void 0))}else if("LineString"===e.type)for(const t of e.geometry)A(t,new Mu(t[0].x,t[0].y,0,0,void 0));else if("Point"===e.type)for(const t of e.geometry)for(const e of t)A([e],new Mu(e.x,e.y,0,0,void 0))}const ah=32640;function sh(t,e,n,r,i,a,s,l,c,u,h,d,p,f,m,g,y){const v=function(t,e,n,r,i,a,s,l){const c=[];if(0===e.positionedLines.length)return c;const u=r.layout.get("text-rotate").evaluate(a,{})*Math.PI/180,h=function(t){const e=t[0],n=t[1],r=e*n;return r>0?[e,-n]:r<0?[-e,n]:0===e?[n,e]:[n,-e]}(n);let d=Math.abs(e.top-e.bottom);for(const t of e.positionedLines)d-=t.lineOffset;const p=e.positionedLines.length,f=d/p;let m=e.top-n[1];for(let t=0;t<p;++t){const r=e.positionedLines[t];m=$u(e,f,m,t);for(const t of r.positionedGlyphs){if(!t.rect)continue;const r=t.rect||{};let a=4,d=!0,p=1,f=0;if(t.imageName){const e=s[t.imageName];if(!e)continue;if(e.sdf){D("SDF images are not supported in formatted text and will be ignored.");continue}d=!1,p=e.pixelRatio,a=1/p}const g=(i||l)&&t.vertical,y=t.metrics.advance*t.scale/2,v=t.metrics,_=t.rect;if(null===_)continue;l&&e.verticalizable&&(f=t.imageName?y-t.metrics.width*t.scale/2:0);const b=i?[t.x+y,t.y]:[0,0];let x=[0,0],w=[0,0],E=!1;i||(g?(w=[t.x+y+h[0],t.y+h[1]-f],E=!0):x=[t.x+y+n[0],t.y+n[1]-f]);const C=_.w*t.scale/(p*(t.localGlyph?2:1)),S=_.h*t.scale/(p*(t.localGlyph?2:1));let T,O,I,A;if(g){const e=t.y-m,n=new o(-y,y-e),r=-Math.PI/2,i=new o(...w);T=new o(-y+x[0],x[1]),T._rotateAround(r,n)._add(i),T.x+=-e+y,T.y-=(v.left-a)*t.scale;const s=t.imageName?v.advance*t.scale:24*t.scale,l=String.fromCharCode(t.glyph);zc(l)?T.x+=(1-a)*t.scale:Bc(l)?T.x+=s-v.height*t.scale+(-a-1)*t.scale:T.x+=t.imageName||v.width+2*a===_.w&&v.height+2*a===_.h?(s-S)/2:(s-(v.height+2*a)*t.scale)/2,O=new o(T.x,T.y-C),I=new o(T.x+S,T.y),A=new o(T.x+S,T.y-C)}else{const e=(v.left-a)*t.scale-y+x[0],n=(-v.top-a)*t.scale+x[1],r=e+C,i=n+S;T=new o(e,n),O=new o(r,n),I=new o(e,i),A=new o(r,i)}if(u){let t;t=i?new o(0,0):E?new o(h[0],h[1]):new o(n[0],n[1]),T._rotateAround(u,t),O._rotateAround(u,t),I._rotateAround(u,t),A._rotateAround(u,t)}const M=new o(0,0),k=new o(0,0);c.push({tl:T,tr:O,bl:I,br:A,tex:r,writingMode:e.writingMode,glyphOffset:b,sectionIndex:t.sectionIndex,isSDF:d,pixelOffsetTL:M,pixelOffsetBR:k,minFontScaleX:0,minFontScaleY:0})}}return c}(0,r,c,a,s,l,i,t.allowVerticalPlacement),_=t.textSizeData;let b=null;"source"===_.kind?(b=[Pc*a.layout.get("text-size").evaluate(l,{},y)],b[0]>ah&&D(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".')):"composite"===_.kind&&(b=[Pc*m.compositeTextSizes[0].evaluate(l,{},y),Pc*m.compositeTextSizes[1].evaluate(l,{},y)],(b[0]>ah||b[1]>ah)&&D(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".')),t.addSymbols(t.text,v,b,c,s,l,h,e,n,u.lineStartIndex,u.lineLength,f,g,y);for(const e of d)p[e]=t.text.placedSymbolArray.length-1;return 4*v.length}function lh(t){for(const e in t)return t[e];return null}function ch(t,e,n,r,i,a,s,l,c,u){let d=s.top,p=s.bottom,f=s.left,m=s.right;const g=s.collisionPadding;if(g&&(f-=g[0],d-=g[1],m+=g[2],p+=g[3]),c){const t=new o(f,d),e=new o(m,d),n=new o(f,p),r=new o(m,p),i=h(c);let a=new o(0,0);u&&(a=new o(u[0],u[1])),t._rotateAround(i,a),e._rotateAround(i,a),n._rotateAround(i,a),r._rotateAround(i,a),f=Math.min(t.x,e.x,n.x,r.x),m=Math.max(t.x,e.x,n.x,r.x),d=Math.min(t.y,e.y,n.y,r.y),p=Math.max(t.y,e.y,n.y,r.y)}return t.emplaceBack(e.x,e.y,e.z,n.x,n.y,f,d,m,p,l,r,i,a),t.length-1}function uh(t){t.collisionPadding&&(t.top-=t.collisionPadding[1],t.bottom+=t.collisionPadding[3]);const e=t.bottom-t.top;return e>0?Math.max(10,e):null}function hh(t,e,n,r){const i=t.compareText;if(e in i){const t=i[e];for(let e=t.length-1;e>=0;e--)if(r.dist(t[e])<n)return!0}else i[e]=[];return i[e].push(r),!1}const dh=rc.VectorTileFeature.types,ph=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function fh(t,e,n,r,i,o,a,s,l,c,u,h,d,p,f,m){const g=u?Math.min(ah,Math.round(u[0])):0,y=u?Math.min(ah,Math.round(u[1])):0;t.emplaceBack(e,n,Math.round(32*a),Math.round(32*s),l,c,(g<<1)+(h?1:0),y,16*d,16*p,256*f,256*m,r,i,o,0)}function mh(t,e,n){t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n)}function gh(t){for(const e of t.sections)if(Gi(e.text))return!0;return!1}class yh{constructor(t){this.layoutVertexArray=new Ao,this.indexArray=new Lo,this.programConfigurations=t,this.segments=new Na,this.dynamicLayoutVertexArray=new To,this.opacityVertexArray=new Mo,this.placedSymbolArray=new $o}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(t,e,n,r){this.isEmpty()||(n&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Tc.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Oc.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,ph,!0),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}ni("SymbolBuffers",yh);class vh{constructor(t,e,n){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new n,this.segments=new Na,this.collisionVertexArray=new Ro,this.collisionVertexArrayExt=new To}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Ic.members,!0),this.collisionVertexBufferExt=t.createVertexBuffer(this.collisionVertexArrayExt,Ac.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}ni("CollisionBuffers",vh);class _h{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(t=>t.id),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ts([]),this.placementViewportMatrix=Ts([]);const e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Dc(this.zoom,e["text-size"]),this.iconSizeData=Dc(this.zoom,e["icon-size"]);const n=this.layers[0].layout,r=n.get("symbol-sort-key"),i=n.get("symbol-z-order");this.canOverlap=n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==i&&void 0!==r.constantOr(1),this.sortFeaturesByY=("viewport-y"===i||"auto"===i&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=n.get("text-writing-mode").map(t=>mu[t]),this.stateDependentLayerIds=this.layers.filter(t=>t.isStateDependent()).map(t=>t.id),this.sourceID=t.sourceID}createArrays(){this.text=new yh(new Ta(this.layers,this.zoom,t=>/^text/.test(t))),this.icon=new yh(new Ta(this.layers,this.zoom,t=>/^icon/.test(t))),this.glyphOffsetArray=new Xo,this.lineVertexArray=new Jo,this.symbolInstances=new Yo}calculateGlyphDependencies(t,e,n,r,i){for(let n=0;n<t.length;n++)if(e[t.charCodeAt(n)]=!0,r&&i){const r=Fc[t.charAt(n)];r&&(e[r.charCodeAt(0)]=!0)}}populate(t,e,n,r){const i=this.layers[0],o=i.layout,a=o.get("text-font"),s=o.get("text-field"),l=o.get("icon-image"),c=("constant"!==s.value.kind||s.value.value instanceof me&&!s.value.value.isEmpty()||s.value.value.toString().length>0)&&("constant"!==a.value.kind||a.value.value.length>0),u="constant"!==l.value.kind||!!l.value.value||Object.keys(l.parameters).length>0,h=o.get("symbol-sort-key");if(this.features=[],!c&&!u)return;const d=e.iconDependencies,p=e.glyphDependencies,f=e.availableImages,m=new eo(this.zoom);for(const{feature:e,id:s,index:l,sourceLayerIndex:g}of t){const t=i._featureFilter.needGeometry,y=rs(e,t);if(!i._featureFilter.filter(m,y,n))continue;let v,_;if(t||(y.geometry=ns(e,n,r)),c){const t=i.getValueAndResolveTokens("text-field",y,n,f),e=me.factory(t);gh(e)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Ji()||this.hasRTLText&&to.isParsed())&&(v=jc(e,i,y))}if(u){const t=i.getValueAndResolveTokens("icon-image",y,n,f);_=t instanceof ge?t:ge.fromString(t)}if(!v&&!_)continue;const b=this.sortFeaturesByKey?h.evaluate(y,{},n):void 0;if(this.features.push({id:s,text:v,icon:_,index:l,sourceLayerIndex:g,geometry:y.geometry,properties:e.properties,type:dh[e.type],sortKey:b}),_&&(d[_.name]=!0),v){const t=a.evaluate(y,{},n).join(","),e="map"===o.get("text-rotation-alignment")&&"point"!==o.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(mu.vertical)>=0;for(const n of v.sections)if(n.image)d[n.image.name]=!0;else{const r=Li(v.toString()),i=n.fontStack||t,o=p[i]=p[i]||{};this.calculateGlyphDependencies(n.text,o,e,this.allowVerticalPlacement,r)}}}"line"===o.get("symbol-placement")&&(this.features=function(t){const e={},n={},r=[];let i=0;function o(e){r.push(t[e]),i++}function a(t,e,i){const o=n[t];return delete n[t],n[e]=o,r[o].geometry[0].pop(),r[o].geometry[0]=r[o].geometry[0].concat(i[0]),o}function s(t,n,i){const o=e[n];return delete e[n],e[t]=o,r[o].geometry[0].shift(),r[o].geometry[0]=i[0].concat(r[o].geometry[0]),o}function l(t,e,n){const r=n?e[0][e[0].length-1]:e[0][0];return`${t}:${r.x}:${r.y}`}for(let c=0;c<t.length;c++){const u=t[c],h=u.geometry,d=u.text?u.text.toString():null;if(!d){o(c);continue}const p=l(d,h),f=l(d,h,!0);if(p in n&&f in e&&n[p]!==e[f]){const t=s(p,f,h),i=a(p,f,r[t].geometry);delete e[p],delete n[f],n[l(d,r[i].geometry,!0)]=i,r[t].geometry=null}else p in n?a(p,f,h):f in e?s(p,f,h):(o(c),e[p]=i-1,n[f]=i-1)}return r.filter(t=>t.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((t,e)=>t.sortKey-e.sortKey)}update(t,e,n,r){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,n,r),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,n,r))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,e){const n=this.lineVertexArray.length;if(void 0!==t.segment){let n=t.dist(e[t.segment+1]),r=t.dist(e[t.segment]);const i={};for(let r=t.segment+1;r<e.length;r++)i[r]={x:e[r].x,y:e[r].y,tileUnitDistanceFromAnchor:n},r<e.length-1&&(n+=e[r+1].dist(e[r]));for(let n=t.segment||0;n>=0;n--)i[n]={x:e[n].x,y:e[n].y,tileUnitDistanceFromAnchor:r},n>0&&(r+=e[n-1].dist(e[n]));for(let t=0;t<e.length;t++){const e=i[t];this.lineVertexArray.emplaceBack(e.x,e.y,e.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}addSymbols(t,e,n,r,i,o,a,s,l,c,u,h,d,p){const f=t.indexArray,m=t.layoutVertexArray,g=t.segments.prepareSegment(4*e.length,m,f,this.canOverlap?o.sortKey:void 0),y=this.glyphOffsetArray.length,v=g.vertexLength,_=this.allowVerticalPlacement&&a===mu.vertical?Math.PI/2:0,b=o.text&&o.text.sections;for(let r=0;r<e.length;r++){const{tl:i,tr:a,bl:c,br:u,tex:h,pixelOffsetTL:y,pixelOffsetBR:v,minFontScaleX:x,minFontScaleY:w,glyphOffset:E,isSDF:C,sectionIndex:S}=e[r],T=g.vertexLength,O=E[1];fh(m,s.x,s.y,s.z,l.x,l.y,i.x,O+i.y,h.x,h.y,n,C,y.x,y.y,x,w),fh(m,s.x,s.y,s.z,l.x,l.y,a.x,O+a.y,h.x+h.w,h.y,n,C,v.x,y.y,x,w),fh(m,s.x,s.y,s.z,l.x,l.y,c.x,O+c.y,h.x,h.y+h.h,n,C,y.x,v.y,x,w),fh(m,s.x,s.y,s.z,l.x,l.y,u.x,O+u.y,h.x+h.w,h.y+h.h,n,C,v.x,v.y,x,w),mh(t.dynamicLayoutVertexArray,s,_),f.emplaceBack(T,T+1,T+2),f.emplaceBack(T+1,T+2,T+3),g.vertexLength+=4,g.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(E[0]),r!==e.length-1&&S===e[r+1].sectionIndex||t.programConfigurations.populatePaintArrays(m.length,o,o.index,{},d,p,b&&b[S])}t.placedSymbolArray.emplaceBack(s.x,s.y,s.z,l.x,l.y,y,this.glyphOffsetArray.length-y,v,c,u,l.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],a,0,!1,0,h,0)}_commitLayoutVertex(t,e,n,r,i,o,a){t.emplaceBack(e,n,r,i,o,Math.round(a.x),Math.round(a.y))}_addCollisionDebugVertices(t,e,n,r,i,a,s){const l=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),c=l.vertexLength,u=s.tileAnchorX,h=s.tileAnchorY;for(let t=0;t<4;t++)n.collisionVertexArray.emplaceBack(0,0,0,0);n.collisionVertexArrayExt.emplaceBack(e,-t.padding,-t.padding),n.collisionVertexArrayExt.emplaceBack(e,t.padding,-t.padding),n.collisionVertexArrayExt.emplaceBack(e,t.padding,t.padding),n.collisionVertexArrayExt.emplaceBack(e,-t.padding,t.padding),this._commitLayoutVertex(n.layoutVertexArray,r,i,a,u,h,new o(t.x1,t.y1)),this._commitLayoutVertex(n.layoutVertexArray,r,i,a,u,h,new o(t.x2,t.y1)),this._commitLayoutVertex(n.layoutVertexArray,r,i,a,u,h,new o(t.x2,t.y2)),this._commitLayoutVertex(n.layoutVertexArray,r,i,a,u,h,new o(t.x1,t.y2)),l.vertexLength+=4;const d=n.indexArray;d.emplaceBack(c,c+1),d.emplaceBack(c+1,c+2),d.emplaceBack(c+2,c+3),d.emplaceBack(c+3,c),l.primitiveLength+=4}_addTextDebugCollisionBoxes(t,e,n,r,i,o){for(let a=r;a<i;a++){const r=n.get(a),i=this.getSymbolInstanceTextSize(t,o,e,a);this._addCollisionDebugVertices(r,i,this.textCollisionBox,r.projectedAnchorX,r.projectedAnchorY,r.projectedAnchorZ,o)}}_addIconDebugCollisionBoxes(t,e,n,r,i,o){for(let a=r;a<i;a++){const r=n.get(a),i=this.getSymbolInstanceIconSize(t,e,a);this._addCollisionDebugVertices(r,i,this.iconCollisionBox,r.projectedAnchorX,r.projectedAnchorY,r.projectedAnchorZ,o)}}generateCollisionDebugBuffers(t,e){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new vh(Po,Mc.members,Uo),this.iconCollisionBox=new vh(Po,Mc.members,Uo);const n=Lc(this.iconSizeData,t),r=Lc(this.textSizeData,t);for(let i=0;i<this.symbolInstances.length;i++){const o=this.symbolInstances.get(i);this._addTextDebugCollisionBoxes(r,t,e,o.textBoxStartIndex,o.textBoxEndIndex,o),this._addTextDebugCollisionBoxes(r,t,e,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._addIconDebugCollisionBoxes(n,t,e,o.iconBoxStartIndex,o.iconBoxEndIndex,o),this._addIconDebugCollisionBoxes(n,t,e,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o)}}getSymbolInstanceTextSize(t,e,n,r){const i=this.text.placedSymbolArray.get(e.rightJustifiedTextSymbolIndex>=0?e.rightJustifiedTextSymbolIndex:e.centerJustifiedTextSymbolIndex>=0?e.centerJustifiedTextSymbolIndex:e.leftJustifiedTextSymbolIndex>=0?e.leftJustifiedTextSymbolIndex:e.verticalPlacedTextSymbolIndex>=0?e.verticalPlacedTextSymbolIndex:r),o=Rc(this.textSizeData,t,i)/24;return this.tilePixelRatio*o}getSymbolInstanceIconSize(t,e,n){const r=this.icon.placedSymbolArray.get(n),i=Rc(this.iconSizeData,t,r);return this.tilePixelRatio*i}_commitDebugCollisionVertexUpdate(t,e,n){t.emplaceBack(e,-n,-n),t.emplaceBack(e,n,-n),t.emplaceBack(e,n,n),t.emplaceBack(e,-n,n)}_updateTextDebugCollisionBoxes(t,e,n,r,i,o){for(let a=r;a<i;a++){const r=n.get(a),i=this.getSymbolInstanceTextSize(t,o,e,a);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,i,r.padding)}}_updateIconDebugCollisionBoxes(t,e,n,r,i){for(let o=r;o<i;o++){const r=n.get(o),i=this.getSymbolInstanceIconSize(t,e,o);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,i,r.padding)}}updateCollisionDebugBuffers(t,e){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const n=Lc(this.iconSizeData,t),r=Lc(this.textSizeData,t);for(let i=0;i<this.symbolInstances.length;i++){const o=this.symbolInstances.get(i);this._updateTextDebugCollisionBoxes(r,t,e,o.textBoxStartIndex,o.textBoxEndIndex,o),this._updateTextDebugCollisionBoxes(r,t,e,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._updateIconDebugCollisionBoxes(n,t,e,o.iconBoxStartIndex,o.iconBoxEndIndex),this._updateIconDebugCollisionBoxes(n,t,e,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(t,e,n,r,i,o,a,s,l){const c={};for(let r=e;r<n;r++){const e=t.get(r);c.textBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,padding:e.padding,projectedAnchorX:e.projectedAnchorX,projectedAnchorY:e.projectedAnchorY,projectedAnchorZ:e.projectedAnchorZ,tileAnchorX:e.tileAnchorX,tileAnchorY:e.tileAnchorY},c.textFeatureIndex=e.featureIndex;break}for(let e=r;e<i;e++){const n=t.get(e);c.verticalTextBox={x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2,padding:n.padding,projectedAnchorX:n.projectedAnchorX,projectedAnchorY:n.projectedAnchorY,projectedAnchorZ:n.projectedAnchorZ,tileAnchorX:n.tileAnchorX,tileAnchorY:n.tileAnchorY},c.verticalTextFeatureIndex=n.featureIndex;break}for(let e=o;e<a;e++){const n=t.get(e);c.iconBox={x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2,padding:n.padding,projectedAnchorX:n.projectedAnchorX,projectedAnchorY:n.projectedAnchorY,projectedAnchorZ:n.projectedAnchorZ,tileAnchorX:n.tileAnchorX,tileAnchorY:n.tileAnchorY},c.iconFeatureIndex=n.featureIndex;break}for(let e=s;e<l;e++){const n=t.get(e);c.verticalIconBox={x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2,padding:n.padding,projectedAnchorX:n.projectedAnchorX,projectedAnchorY:n.projectedAnchorY,projectedAnchorZ:n.projectedAnchorZ,tileAnchorX:n.tileAnchorX,tileAnchorY:n.tileAnchorY},c.verticalIconFeatureIndex=n.featureIndex;break}return c}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let e=0;e<this.symbolInstances.length;e++){const n=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,e){const n=t.placedSymbolArray.get(e),r=n.vertexStartIndex+4*n.numGlyphs;for(let e=n.vertexStartIndex;e<r;e+=4)t.indexArray.emplaceBack(e,e+1,e+2),t.indexArray.emplaceBack(e+1,e+2,e+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const e=Math.sin(t),n=Math.cos(t),r=[],i=[],o=[];for(let t=0;t<this.symbolInstances.length;++t){o.push(t);const a=this.symbolInstances.get(t);r.push(0|Math.round(e*a.tileAnchorX+n*a.tileAnchorY)),i.push(a.featureIndex)}return o.sort((t,e)=>r[t]-r[e]||i[e]-i[t]),o}addToSortKeyRanges(t,e){const n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===e?n.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const t of this.symbolInstanceIndexes){const e=this.symbolInstances.get(t);this.featureSortOrder.push(e.featureIndex),[e.rightJustifiedTextSymbolIndex,e.centerJustifiedTextSymbolIndex,e.leftJustifiedTextSymbolIndex].forEach((t,e,n)=>{t>=0&&n.indexOf(t)===e&&this.addIndicesForPlacedSymbol(this.text,t)}),e.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,e.verticalPlacedTextSymbolIndex),e.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,e.placedIconSymbolIndex),e.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,e.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}ni("SymbolBucket",_h,{omit:["layers","collisionBoxArray","features","compareText"]}),_h.MAX_GLYPHS=65535,_h.addDynamicAttributes=mh;const bh=new go({"symbol-placement":new uo(Bt.layout_symbol["symbol-placement"]),"symbol-spacing":new uo(Bt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new uo(Bt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ho(Bt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new uo(Bt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new uo(Bt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new uo(Bt.layout_symbol["icon-ignore-placement"]),"icon-optional":new uo(Bt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new uo(Bt.layout_symbol["icon-rotation-alignment"]),"icon-size":new ho(Bt.layout_symbol["icon-size"]),"icon-text-fit":new uo(Bt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new uo(Bt.layout_symbol["icon-text-fit-padding"]),"icon-image":new ho(Bt.layout_symbol["icon-image"]),"icon-rotate":new ho(Bt.layout_symbol["icon-rotate"]),"icon-padding":new uo(Bt.layout_symbol["icon-padding"]),"icon-keep-upright":new uo(Bt.layout_symbol["icon-keep-upright"]),"icon-offset":new ho(Bt.layout_symbol["icon-offset"]),"icon-anchor":new ho(Bt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new uo(Bt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new uo(Bt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new uo(Bt.layout_symbol["text-rotation-alignment"]),"text-field":new ho(Bt.layout_symbol["text-field"]),"text-font":new ho(Bt.layout_symbol["text-font"]),"text-size":new ho(Bt.layout_symbol["text-size"]),"text-max-width":new ho(Bt.layout_symbol["text-max-width"]),"text-line-height":new ho(Bt.layout_symbol["text-line-height"]),"text-letter-spacing":new ho(Bt.layout_symbol["text-letter-spacing"]),"text-justify":new ho(Bt.layout_symbol["text-justify"]),"text-radial-offset":new ho(Bt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new uo(Bt.layout_symbol["text-variable-anchor"]),"text-anchor":new ho(Bt.layout_symbol["text-anchor"]),"text-max-angle":new uo(Bt.layout_symbol["text-max-angle"]),"text-writing-mode":new uo(Bt.layout_symbol["text-writing-mode"]),"text-rotate":new ho(Bt.layout_symbol["text-rotate"]),"text-padding":new uo(Bt.layout_symbol["text-padding"]),"text-keep-upright":new uo(Bt.layout_symbol["text-keep-upright"]),"text-transform":new ho(Bt.layout_symbol["text-transform"]),"text-offset":new ho(Bt.layout_symbol["text-offset"]),"text-allow-overlap":new uo(Bt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new uo(Bt.layout_symbol["text-ignore-placement"]),"text-optional":new uo(Bt.layout_symbol["text-optional"])});var xh={paint:new go({"icon-opacity":new ho(Bt.paint_symbol["icon-opacity"]),"icon-color":new ho(Bt.paint_symbol["icon-color"]),"icon-halo-color":new ho(Bt.paint_symbol["icon-halo-color"]),"icon-halo-width":new ho(Bt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ho(Bt.paint_symbol["icon-halo-blur"]),"icon-translate":new uo(Bt.paint_symbol["icon-translate"]),"icon-translate-anchor":new uo(Bt.paint_symbol["icon-translate-anchor"]),"text-opacity":new ho(Bt.paint_symbol["text-opacity"]),"text-color":new ho(Bt.paint_symbol["text-color"],{runtimeType:Jt,getOverride:t=>t.textColor,hasOverride:t=>!!t.textColor}),"text-halo-color":new ho(Bt.paint_symbol["text-halo-color"]),"text-halo-width":new ho(Bt.paint_symbol["text-halo-width"]),"text-halo-blur":new ho(Bt.paint_symbol["text-halo-blur"]),"text-translate":new uo(Bt.paint_symbol["text-translate"]),"text-translate-anchor":new uo(Bt.paint_symbol["text-translate-anchor"])}),layout:bh};class wh{constructor(t){this.type=t.property.overrides?t.property.overrides.runtimeType:$t,this.defaultValue=t}evaluate(t){if(t.formattedSection){const e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}ni("FormatSectionOverride",wh,{omit:["defaultValue"]});class Eh extends Da{constructor(t){super(t,xh)}recalculate(t,e){super.recalculate(t,e),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const n=this.layout.get("text-writing-mode");if(n){const t=[];for(const e of n)t.indexOf(e)<0&&t.push(e);this.layout._values["text-writing-mode"]=t}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(t,e,n,r){const i=this.layout.get(t).evaluate(e,{},n,r),o=this._unevaluatedLayout._values[t];return o.isDataDriven()||or(o.value)||!i?i:function(t,e){return e.replace(/{([^{}]+)}/g,(e,n)=>n in t?String(t[n]):"")}(e.properties,i)}createBucket(t){return new _h(t)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const t of xh.paint.overridableProperties){if(!Eh.hasPaintOverride(this.layout,t))continue;const e=this.paint.get(t),n=new wh(e),r=new ir(n,e.property.specification);let i=null;i="constant"===e.value.kind||"source"===e.value.kind?new sr("source",r):new lr("composite",r,e.value.zoomStops,e.value._interpolationType),this.paint._values[t]=new lo(e.property,i,e.parameters)}}_handleOverridablePaintPropertyUpdate(t,e,n){return!(!this.layout||e.isDataDriven()||n.isDataDriven())&&Eh.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,e){const n=t.get("text-field"),r=xh.paint.properties[e];let i=!1;const o=t=>{for(const e of t)if(r.overrides&&r.overrides.hasOverride(e))return void(i=!0)};if("constant"===n.value.kind&&n.value.value instanceof me)o(n.value.value.sections);else if("source"===n.value.kind){const t=e=>{i||(e instanceof xe&&_e(e.value)===ne?o(e.value.sections):e instanceof Se?o(e.sections):e.eachChild(t))},e=n.value;e._styleExpression&&t(e._styleExpression.expression)}return i}getProgramConfiguration(t){return new Sa(this,t)}}var Ch={paint:new go({"background-color":new uo(Bt.paint_background["background-color"]),"background-pattern":new fo(Bt.paint_background["background-pattern"]),"background-opacity":new uo(Bt.paint_background["background-opacity"])})},Sh={paint:new go({"raster-opacity":new uo(Bt.paint_raster["raster-opacity"]),"raster-hue-rotate":new uo(Bt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new uo(Bt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new uo(Bt.paint_raster["raster-brightness-max"]),"raster-saturation":new uo(Bt.paint_raster["raster-saturation"]),"raster-contrast":new uo(Bt.paint_raster["raster-contrast"]),"raster-resampling":new uo(Bt.paint_raster["raster-resampling"]),"raster-fade-duration":new uo(Bt.paint_raster["raster-fade-duration"])})};class Th extends Da{constructor(t){super(t,{}),this.implementation=t}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){}serialize(){}onAdd(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)}onRemove(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)}}var Oh={paint:new go({"sky-type":new uo(Bt.paint_sky["sky-type"]),"sky-atmosphere-sun":new uo(Bt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new uo(Bt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new uo(Bt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new uo(Bt.paint_sky["sky-gradient-radius"]),"sky-gradient":new mo(Bt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new uo(Bt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new uo(Bt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new uo(Bt.paint_sky["sky-opacity"])})};function Ih(t,e,n){const r=ks(0,0,1),i=Vs(Gs());return function(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);t[0]=r*l-o*s,t[1]=i*l+a*s,t[2]=o*l+r*s,t[3]=a*l-i*s}(i,i,n?-h(t)+Math.PI:h(t)),qs(i,i,-h(e)),Ns(r,r,i),Ls(r,r)}const Ah={circle:class extends Da{constructor(t){super(t,Es)}createBucket(t){return new os(t)}queryRadius(t){const e=t;return vs("circle-radius",this,e)+vs("circle-stroke-width",this,e)+_s(this.paint.get("circle-translate"))}queryIntersectsFeature(t,e,n,r,i,o,a,s){const l=xs(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,t.pixelToTileUnitsFactor),c=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n);return Ws(t,r,o,a,s,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),l,c)}getProgramIds(){return["circle"]}getProgramConfiguration(t){return new Sa(this,t)}},heatmap:class extends Da{createBucket(t){return new Xs(t)}constructor(t){super(t,rl),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){"heatmap-color"===t&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=il({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(t){return vs("heatmap-radius",this,t)}queryIntersectsFeature(t,e,n,r,i,a,s,l){const c=this.paint.get("heatmap-radius").evaluate(e,n);return Ws(t,r,a,s,l,!0,!0,new o(0,0),c)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(t){return new Sa(this,t)}},hillshade:class extends Da{constructor(t){super(t,ol)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}getProgramConfiguration(t){return new Sa(this,t)}},fill:class extends Da{constructor(t){super(t,Hl)}getProgramIds(){const t=this.paint.get("fill-pattern"),e=t&&t.constantOr(1),n=[e?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&n.push(e&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),n}getProgramConfiguration(t){return new Sa(this,t)}recalculate(t,e){super.recalculate(t,e);const n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new Vl(t)}queryRadius(){return _s(this.paint.get("fill-translate"))}queryIntersectsFeature(t,e,n,r,i,o){return!t.queryGeometry.isAboveHorizon&&ls(bs(t.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,t.pixelToTileUnitsFactor),r)}isTileClipped(){return!0}},"fill-extrusion":class extends Da{constructor(t){super(t,uc)}createBucket(t){return new lc(t)}queryRadius(){return _s(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(t){return new Sa(this,t)}queryIntersectsFeature(t,e,n,r,i,a,s,l,c){const u=xs(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,t.pixelToTileUnitsFactor),h=this.paint.get("fill-extrusion-height").evaluate(e,n),d=this.paint.get("fill-extrusion-base").evaluate(e,n),p=[0,0],f=l&&a.elevation,m=a.elevation?a.elevation.exaggeration():1;if(f){const e=t.tile.getBucket(this).centroidVertexArray,n=c+1;if(n<e.length){const t=e.get(n);p[0]=t.a_centroid_pos0,p[1]=t.a_centroid_pos1}}if(0===p[0]&&1===p[1])return!1;const g=function(t,e,n,r,i,a,s,l,c){return a?function(t,e,n,r,i,o,a,s,l){const c=[],u=[],h=[0,0,0,1];for(const d of t){const t=[],p=[];for(const c of d){const u=c.x+r.x,d=c.y+r.y,f=fc(u,d,e,n,o,a,s,l);h[0]=u,h[1]=d,h[2]=f.base,h[3]=1,Us(h,h,i),h[3]=Math.max(h[3],1e-5);const m=pc([h[0]/h[3],h[1]/h[3],h[2]/h[3]]);h[0]=u,h[1]=d,h[2]=f.top,h[3]=1,Us(h,h,i),h[3]=Math.max(h[3],1e-5);const g=pc([h[0]/h[3],h[1]/h[3],h[2]/h[3]]);t.push(m),p.push(g)}c.push(t),u.push(p)}return[c,u]}(t,e,n,r,i,a,s,l,c):function(t,e,n,r,i){const a=[],s=[],l=i[8]*e,c=i[9]*e,u=i[10]*e,h=i[11]*e,d=i[8]*n,p=i[9]*n,f=i[10]*n,m=i[11]*n;for(const e of t){const t=[],n=[];for(const a of e){const e=a.x+r.x,s=a.y+r.y,g=i[0]*e+i[4]*s+i[12],y=i[1]*e+i[5]*s+i[13],v=i[2]*e+i[6]*s+i[14],_=i[3]*e+i[7]*s+i[15],b=g+l,x=y+c,w=v+u,E=Math.max(_+h,1e-5),C=g+d,S=y+p,T=v+f,O=Math.max(_+m,1e-5),I=new o(b/E,x/E);I.z=w/E,t.push(I);const A=new o(C/O,S/O);A.z=T/O,n.push(A)}a.push(t),s.push(n)}return[a,s]}(t,e,n,r,i)}(r,d,h,u,s,f?l:null,p,m,a.center.lat),y=t.queryGeometry;return function(t,e,n){let r=1/0;ls(n,e)&&(r=dc(n,e[0]));for(let i=0;i<e.length;i++){const o=e[i],a=t[i];for(let t=0;t<o.length-1;t++){const e=o[t],i=[e,o[t+1],a[t+1],a[t],e];as(n,i)&&(r=Math.min(r,dc(n,i)))}}return r!==1/0&&r}(g[0],g[1],y.isPointQuery()?y.screenBounds:y.screenGeometry)}},line:class extends Da{constructor(t){super(t,Ec),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(t){if("line-gradient"===t){const t=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=t._styleExpression&&t._styleExpression.expression instanceof nn,this.gradientVersion=(this.gradientVersion+1)%l}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,e){super.recalculate(t,e),this.paint._values["line-floorwidth"]=Cc.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new xc(t)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(t){return new Sa(this,t)}queryRadius(t){const e=t,n=Sc(vs("line-width",this,e),vs("line-gap-width",this,e)),r=vs("line-offset",this,e);return n/2+Math.abs(r)+_s(this.paint.get("line-translate"))}queryIntersectsFeature(t,e,n,r,i,a){if(t.queryGeometry.isAboveHorizon)return!1;const s=bs(t.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,t.pixelToTileUnitsFactor),l=t.pixelToTileUnitsFactor/2*Sc(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),c=this.paint.get("line-offset").evaluate(e,n);return c&&(r=function(t,e){const n=[],r=new o(0,0);for(let i=0;i<t.length;i++){const o=t[i],a=[];for(let t=0;t<o.length;t++){const n=o[t-1],i=o[t],s=o[t+1],l=0===t?r:i.sub(n)._unit()._perp(),c=t===o.length-1?r:s.sub(i)._unit()._perp(),u=l._add(c)._unit();u._mult(1/(u.x*c.x+u.y*c.y)),a.push(u._mult(e)._add(i))}n.push(a)}return n}(r,c*t.pixelToTileUnitsFactor)),function(t,e,n){for(let r=0;r<e.length;r++){const i=e[r];if(t.length>=3)for(let e=0;e<i.length;e++)if(ms(t,i[e]))return!0;if(cs(t,i,n))return!0}return!1}(s,r,l)}isTileClipped(){return!0}},symbol:Eh,background:class extends Da{constructor(t){super(t,Ch)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Da{constructor(t){super(t,Sh)}getProgramIds(){return["raster"]}},sky:class extends Da{constructor(t){super(t,Oh),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){"sky-gradient"===t?this._updateColorRamp():"sky-atmosphere-sun"!==t&&"sky-atmosphere-halo-color"!==t&&"sky-atmosphere-color"!==t&&"sky-atmosphere-sun-intensity"!==t||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=il({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(t){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const e=t.style.light.properties.get("position");return this._lightPosition.azimuthal!==e.azimuthal||this._lightPosition.polar!==e.polar}}getCenter(t,e){const n=this.paint.get("sky-type");if("atmosphere"===n){const n=this.paint.get("sky-atmosphere-sun"),r=!n,i=t.style.light,o=i.properties.get("position");return r&&"viewport"===i.properties.get("anchor")&&D("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),r?Ih(o.azimuthal,90-o.polar,e):Ih(n[0],90-n[1],e)}if("gradient"===n){const t=this.paint.get("sky-gradient-center");return Ih(t[0],90-t[1],e)}}is3D(){return!1}isSky(){return!0}markSkyboxValid(t){this._skyboxInvalidated=!1,this._lightPosition=t.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const t=this.paint.get("sky-type");return"atmosphere"===t?["skyboxCapture","skybox"]:"gradient"===t?["skyboxGradient"]:null}}},{HTMLImageElement:Mh,HTMLCanvasElement:kh,HTMLVideoElement:Ph,ImageData:Dh,ImageBitmap:Rh}=s;class Lh{constructor(t,e,n,r){this.context=t,this.format=n,this.texture=t.gl.createTexture(),this.update(e,r)}update(t,e,n){const{width:r,height:i}=t,{context:o}=this,{gl:a}=o;if(a.bindTexture(a.TEXTURE_2D,this.texture),o.pixelStoreUnpackFlipY.set(!1),o.pixelStoreUnpack.set(1),o.pixelStoreUnpackPremultiplyAlpha.set(this.format===a.RGBA&&(!e||!1!==e.premultiply)),n||this.size&&this.size[0]===r&&this.size[1]===i){const{x:e,y:o}=n||{x:0,y:0};t instanceof Mh||t instanceof kh||t instanceof Ph||t instanceof Dh||Rh&&t instanceof Rh?a.texSubImage2D(a.TEXTURE_2D,0,e,o,a.RGBA,a.UNSIGNED_BYTE,t):a.texSubImage2D(a.TEXTURE_2D,0,e,o,r,i,a.RGBA,a.UNSIGNED_BYTE,t.data)}else this.size=[r,i],t instanceof Mh||t instanceof kh||t instanceof Ph||t instanceof Dh||Rh&&t instanceof Rh?a.texImage2D(a.TEXTURE_2D,0,this.format,this.format,a.UNSIGNED_BYTE,t):a.texImage2D(a.TEXTURE_2D,0,this.format,r,i,0,this.format,a.UNSIGNED_BYTE,t.data);this.useMipmap=Boolean(e&&e.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&a.generateMipmap(a.TEXTURE_2D)}bind(t,e){const{context:n}=this,{gl:r}=n;r.bindTexture(r.TEXTURE_2D,this.texture),t!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,this.useMipmap?t===r.NEAREST?r.NEAREST_MIPMAP_NEAREST:r.LINEAR_MIPMAP_NEAREST:t),this.filter=t),e!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,e),this.wrap=e)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}class Nh{constructor(t,e){this.width=t,this.height=e,this.nextRow=0,this.image=new el({width:t,height:e}),this.positions={},this.uploaded=!1}getDash(t,e){const n=this.getKey(t,e);return this.positions[n]}trim(){const t=this.width,e=this.height=S(this.nextRow);this.image.resize({width:t,height:e})}getKey(t,e){return t.join(",")+e}getDashRanges(t,e,n){const r=[];let i=t.length%2==1?-t[t.length-1]*n:0,o=t[0]*n,a=!0;r.push({left:i,right:o,isDash:a,zeroLength:0===t[0]});let s=t[0];for(let e=1;e<t.length;e++){a=!a;const l=t[e];i=s*n,s+=l,o=s*n,r.push({left:i,right:o,isDash:a,zeroLength:0===l})}return r}addRoundDash(t,e,n){const r=e/2;for(let e=-n;e<=n;e++){const i=this.width*(this.nextRow+n+e);let o=0,a=t[o];for(let s=0;s<this.width;s++){s/a.right>1&&(a=t[++o]);const l=Math.abs(s-a.left),c=Math.abs(s-a.right),u=Math.min(l,c);let h;const d=e/n*(r+1);if(a.isDash){const t=r-Math.abs(d);h=Math.sqrt(u*u+t*t)}else h=r-Math.sqrt(u*u+d*d);this.image.data[i+s]=Math.max(0,Math.min(255,h+128))}}}addRegularDash(t,e){for(let e=t.length-1;e>=0;--e){const n=t[e],r=t[e+1];n.zeroLength?t.splice(e,1):r&&r.isDash===n.isDash&&(r.left=n.left,t.splice(e,1))}const n=t[0],r=t[t.length-1];n.isDash===r.isDash&&(n.left=r.left-this.width,r.right=n.right+this.width);const i=this.width*this.nextRow;let o=0,a=t[o];for(let n=0;n<this.width;n++){n/a.right>1&&(a=t[++o]);const r=Math.abs(n-a.left),s=Math.abs(n-a.right),l=Math.min(r,s);this.image.data[i+n]=Math.max(0,Math.min(255,(a.isDash?l:-l)+e+128))}}addDash(t,e){const n=this.getKey(t,e);if(this.positions[n])return this.positions[n];const r="round"===e,i=r?7:0,o=2*i+1;if(this.nextRow+o>this.height)return D("LineAtlas out of space"),null;0===t.length&&t.push(1);let a=0;for(let e=0;e<t.length;e++)t[e]<0&&(D("Negative value is found in line dasharray, replacing values with 0"),t[e]=0),a+=t[e];if(0!==a){const n=this.width/a,o=this.getDashRanges(t,this.width,n);r?this.addRoundDash(o,n,i):this.addRegularDash(o,"square"===e?.5*n:0)}const s=this.nextRow+i;this.nextRow+=o;const l={tl:[s,i],br:[a,0]};return this.positions[n]=l,l}}ni("LineAtlas",Nh);class jh{constructor(t){this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Fh=s.performance;function zh(t){const e=t?t.url.toString():void 0;return Fh.getEntriesByName(e)}class Bh{constructor(){this.tasks={},this.taskQueue=[],O(["process"],this),this.invoker=new jh(this.process),this.nextId=0}add(t,e){const n=this.nextId++,r=function({type:t,isSymbolTile:e,zoom:n}){return n=n||0,"message"===t?0:"maybePrepare"!==t||e?"parseTile"!==t||e?"parseTile"===t&&e?300-n:"maybePrepare"===t&&e?400-n:500:200-n:100-n}(e);if(0===r){N();try{t()}finally{}return{cancel:()=>{}}}return this.tasks[n]={fn:t,metadata:e,priority:r,id:n},this.taskQueue.push(n),this.invoker.trigger(),{cancel:()=>{delete this.tasks[n]}}}process(){N();try{if(this.taskQueue=this.taskQueue.filter(t=>!!this.tasks[t]),!this.taskQueue.length)return;const t=this.pick();if(null===t)return;const e=this.tasks[t];if(delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),!e)return;e.fn()}finally{}}pick(){let t=null,e=1/0;for(let n=0;n<this.taskQueue.length;n++){const r=this.tasks[this.taskQueue[n]];r.priority<e&&(e=r.priority,t=n)}if(null===t)return null;const n=this.taskQueue[t];return this.taskQueue.splice(t,1),n}remove(){this.invoker.remove()}}function Uh(t,e){const n=Math.pow(2,-t.z),r=t.x*n,i=(t.x+1)*n,o=t.y*n,a=(t.y+1)*n;if("mercator"===e.name)return{scale:1<<t.z,x:t.x,y:t.y,x2:t.x+1,y2:t.y+1,projection:e};const s=Wa(r),l=Wa(i),c=Za(o),u=Za(a),h=e.project(s,c),d=e.project(l,c),p=e.project(l,u),f=e.project(s,u);let m=Math.min(h.x,d.x,p.x,f.x),g=Math.min(h.y,d.y,p.y,f.y),y=Math.max(h.x,d.x,p.x,f.x),v=Math.max(h.y,d.y,p.y,f.y);const _=n/16;function b(t,n,r,i,o,a){const s=(r+o)/2,l=(i+a)/2,c=e.project(Wa(s),Za(l)),u=Math.max(0,m-c.x,g-c.y,c.x-y,c.y-v);m=Math.min(m,c.x),y=Math.max(y,c.x),g=Math.min(g,c.y),v=Math.max(v,c.y),u>_&&(b(t,c,r,i,s,l),b(c,n,s,l,o,a))}b(h,d,r,o,i,o),b(d,p,i,o,i,a),b(p,f,i,a,r,a),b(f,h,r,a,r,o),m-=_,g-=_,y+=_,v+=_;const x=1/Math.max(y-m,v-g);return{scale:x,x:m*x,y:g*x,x2:y*x,y2:v*x,projection:e}}function Gh(t,e,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[t*r-2*Math.PI*6378137/2,e*r-2*Math.PI*6378137/2]}class Vh{constructor(t,e,n){this.z=t,this.x=e,this.y=n,this.key=Wh(0,t,t,e,n)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,e){const n=(i=this.y,o=this.z,a=Gh(256*(r=this.x),256*(i=Math.pow(2,o)-i-1),o),s=Gh(256*(r+1),256*(i+1),o),a[0]+","+a[1]+","+s[0]+","+s[1]);var r,i,o,a,s;const l=function(t,e,n){let r,i="";for(let o=t;o>0;o--)r=1<<o-1,i+=(e&r?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",l).replace("{bbox-epsg-3857}",n)}toString(){return`${this.z}/${this.x}/${this.y}`}}class qh{constructor(t,e){this.wrap=t,this.canonical=e,this.key=Wh(t,e.z,e.z,e.x,e.y)}}class Hh{constructor(t,e,n,r,i){this.overscaledZ=t,this.wrap=e,this.canonical=new Vh(n,+r,+i),this.key=0===e&&t===n?this.canonical.key:Wh(e,t,n,r,i)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){const e=this.canonical.z-t;return t>this.canonical.z?new Hh(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Hh(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)}calculateScaledKey(t,e=!0){if(this.overscaledZ===t&&e)return this.key;if(t>this.canonical.z)return Wh(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y);{const n=this.canonical.z-t;return Wh(this.wrap*+e,t,t,this.canonical.x>>n,this.canonical.y>>n)}}isChildOf(t){if(t.wrap!==this.wrap)return!1;const e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e}children(t){if(this.overscaledZ>=t)return[new Hh(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const e=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new Hh(e,this.wrap,e,n,r),new Hh(e,this.wrap,e,n+1,r),new Hh(e,this.wrap,e,n,r+1),new Hh(e,this.wrap,e,n+1,r+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new Hh(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new Hh(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new qh(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Wh(t,e,n,r,i){const o=1<<Math.min(n,22);let a=o*(i%o)+r%o;return t&&n<22&&(a+=o*o*((t<0?-2*t-1:2*t)%(1<<2*(22-n)))),16*(32*a+n)+(e-n)}ni("CanonicalTileID",Vh),ni("OverscaledTileID",Hh,{omit:["projMatrix"]});class Zh{constructor(t){this._stringToNumber={},this._numberToString=[];for(let e=0;e<t.length;e++){const n=t[e];this._stringToNumber[n]=e,this._numberToString[e]=n}}encode(t){return this._stringToNumber[t]}decode(t){return this._numberToString[t]}}class $h{constructor(t,e,n,r,i){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=n,t._y=r,this.properties=t.properties,this.id=i}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t}}var Kh=xo([{name:"a_pos",type:"Int16",components:2}]);const Yh=new Uint16Array(8184);for(let t=0;t<2046;t++){let e=t+2,n=0,r=0,i=0,o=0,a=0,s=0;for(1&e?i=o=a=32:n=r=s=32;(e>>=1)>1;){const t=n+i>>1,l=r+o>>1;1&e?(i=n,o=r,n=a,r=s):(n=i,r=o,i=a,o=s),a=t,s=l}const l=4*t;Yh[l+0]=n,Yh[l+1]=r,Yh[l+2]=i,Yh[l+3]=o}const Xh=new Uint16Array(2178),Jh=new Uint8Array(1089),Qh=new Uint16Array(1089);function td(t){return 0===t?-.03125:32===t?.03125:0}var ed=xo([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const nd={type:2,extent:ja,loadGeometry:()=>[[new o(0,0),new o(8193,0),new o(8193,8193),new o(0,8193),new o(0,0)]]};class rd{constructor(t,e,n,r,i){this.tileID=t,this.uid=E(),this.uses=0,this.tileSize=e,this.tileZoom=n,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=i,this.expiredRequestCount=0,this.state="loading",r&&r.transform&&(this.projection=r.transform.projection)}registerFadeDuration(t){const e=t+this.timeAdded;e<q.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=Uh(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(t,e,n){if(this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){const n={};if(!e)return n;for(const r of t){const t=r.layerIds.map(t=>e.getLayer(t)).filter(Boolean);if(0!==t.length){r.layers=t,r.stateDependentLayerIds&&(r.stateDependentLayers=r.stateDependentLayerIds.map(e=>t.filter(t=>t.id===e)[0]));for(const e of t)n[e.id]=r}}return n}(t.buckets,e.style),this.hasSymbolBuckets=!1;for(const t in this.buckets){const e=this.buckets[t];if(e instanceof _h){if(this.hasSymbolBuckets=!0,!n)break;e.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const t in this.buckets){const e=this.buckets[t];if(e instanceof _h&&e.hasRTLText){this.hasRTLText=!0,to.isLoading()||to.isLoaded()||"deferred"!==Ji()||Qi();break}}this.queryPadding=0;for(const t in this.buckets){const n=this.buckets[t];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(t).queryRadius(n))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage),t.lineAtlas&&(this.lineAtlas=t.lineAtlas)}else this.collisionBoxArray=new Wo}unloadVectorData(){if(this.hasData()){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugIndexBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(t){return this.buckets[t.id]}upload(t){for(const e in this.buckets){const n=this.buckets[e];n.uploadPending()&&n.upload(t)}const e=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Lh(t,this.imageAtlas.image,e.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Lh(t,this.glyphAtlasImage,e.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Lh(t,this.lineAtlas.image,e.ALPHA),this.lineAtlas.uploaded=!0)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,e,n,r,i,o,a,s){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:r,pixelPosMatrix:a,transform:o,params:i,tileTransform:this.tileTransform},t,e,n):{}}querySourceFeatures(t,e){const n=this.latestFeatureIndex;if(!n||!n.rawTileData)return;const r=n.loadVTLayers(),i=e?e.sourceLayer:"",o=r._geojsonTileLayer||r[i];if(!o)return;const a=vr(e&&e.filter),{z:s,x:l,y:c}=this.tileID.canonical,u={z:s,x:l,y:c};for(let e=0;e<o.length;e++){const r=o.feature(e);if(a.needGeometry){const t=rs(r,!0);if(!a.filter(new eo(this.tileID.overscaledZ),t,this.tileID.canonical))continue}else if(!a.filter(new eo(this.tileID.overscaledZ),r))continue;const h=n.getId(r,i),d=new $h(r,s,l,c,h);d.tile=u,t.push(d)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const e=this.expirationTime;if(t.cacheControl){const e=j(t.cacheControl);e["max-age"]&&(this.expirationTime=Date.now()+1e3*e["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const t=Date.now();let n=!1;if(this.expirationTime>t)n=!1;else if(e)if(this.expirationTime<e)n=!0;else{const r=this.expirationTime-e;r?this.expirationTime=t+Math.max(r,3e4):n=!0}else n=!0;n?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(t,e){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(t).length||!e)return;const n=this.latestFeatureIndex.loadVTLayers(),r=e.style.listImages();for(const i in this.buckets){if(!e.style.hasLayer(i))continue;const o=this.buckets[i],a=o.layers[0].sourceLayer||"_geojsonTileLayer",s=n[a],l=t[a];if(!s||!l||0===Object.keys(l).length)continue;if(o.update(l,s,r,this.imageAtlas&&this.imageAtlas.patternPositions||{}),o instanceof xc||o instanceof Vl){const t=e.style._getSourceCache(o.layers[0].source);e._terrain&&e._terrain.enabled&&t&&o.programConfigurations.needsUpload&&e._terrain._clearRenderCacheForTile(t.id,this.tileID)}const c=e&&e.style&&e.style.getLayer(i);c&&(this.queryPadding=Math.max(this.queryPadding,c.queryRadius(o)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<q.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=q.now()+t}setDependencies(t,e){const n={};for(const t of e)n[t]=!0;this.dependencies[t]=n}hasDependency(t,e){for(const n of t){const t=this.dependencies[n];if(t)for(const n of e)if(t[n])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(t,e){if(!e||"mercator"===e.name||this._tileDebugBuffer)return;const n=ns(nd,this.tileID.canonical,this.tileTransform)[0],r=new Eo,i=new Go;for(let t=0;t<n.length;t++){const{x:e,y:o}=n[t];r.emplaceBack(e,o),i.emplaceBack(t)}i.emplaceBack(0),this._tileDebugIndexBuffer=t.createIndexBuffer(i),this._tileDebugBuffer=t.createVertexBuffer(r,ed.members),this._tileDebugSegments=Na.simpleSegment(0,0,r.length,i.length)}_makeTileBoundsBuffers(t,e){if(this._tileBoundsBuffer||!e||"mercator"===e.name)return;const n=ns(nd,this.tileID.canonical,this.tileTransform)[0];let r,i;if(this.isRaster){const t=function(t,e){const n=Uh(t,e),r=Math.pow(2,t.z);for(let i=0;i<33;i++)for(let o=0;o<33;o++){const a=Wa((t.x+(o+td(o))/32)/r),s=Za((t.y+(i+td(i))/32)/r),l=e.project(a,s),c=33*i+o;Xh[2*c+0]=Math.round((l.x*n.scale-n.x)*ja),Xh[2*c+1]=Math.round((l.y*n.scale-n.y)*ja)}Jh.fill(0),Qh.fill(0);for(let t=2045;t>=0;t--){const e=4*t,n=Yh[e+0],r=Yh[e+1],i=Yh[e+2],o=Yh[e+3],a=n+i>>1,s=r+o>>1,l=a+s-r,c=s+n-a,u=33*r+n,h=33*o+i,d=33*s+a,p=Math.hypot((Xh[2*u+0]+Xh[2*h+0])/2-Xh[2*d+0],(Xh[2*u+1]+Xh[2*h+1])/2-Xh[2*d+1])>=16;if(Jh[d]=Jh[d]||(p?1:0),t<1022){const t=33*(r+c>>1)+(n+l>>1),e=33*(o+c>>1)+(i+l>>1);Jh[d]=Jh[d]||Jh[t]||Jh[e]}}const i=new Co,o=new Lo;let a=0;function s(t,e){const n=33*e+t;return 0===Qh[n]&&(i.emplaceBack(Xh[2*n+0],Xh[2*n+1],t*ja/32,e*ja/32),Qh[n]=++a),Qh[n]-1}function l(t,e,n,r,i,a){const c=t+n>>1,u=e+r>>1;if(Math.abs(t-i)+Math.abs(e-a)>1&&Jh[33*u+c])l(i,a,t,e,c,u),l(n,r,i,a,c,u);else{const l=s(t,e),c=s(n,r),u=s(i,a);o.emplaceBack(l,c,u)}}return l(0,0,32,32,32,0),l(32,32,0,0,0,32),{vertices:i,indices:o}}(this.tileID.canonical,e);r=t.vertices,i=t.indices}else{r=new Co,i=new Lo;for(const{x:t,y:e}of n)r.emplaceBack(t,e,0,0);const t=ll(r.int16,void 0,4);for(let e=0;e<t.length;e+=3)i.emplaceBack(t[e],t[e+1],t[e+2])}this._tileBoundsBuffer=t.createVertexBuffer(r,ed.members),this._tileBoundsIndexBuffer=t.createIndexBuffer(i),this._tileBoundsSegments=Na.simpleSegment(0,0,r.length,i.length)}}class id{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,e,n){const r=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][r]=this.stateChanges[t][r]||{},x(this.stateChanges[t][r],n),null===this.deletedStates[t]){this.deletedStates[t]={};for(const e in this.state[t])e!==r&&(this.deletedStates[t][e]=null)}else if(this.deletedStates[t]&&null===this.deletedStates[t][r]){this.deletedStates[t][r]={};for(const e in this.state[t][r])n[e]||(this.deletedStates[t][r][e]=null)}else for(const e in n)this.deletedStates[t]&&this.deletedStates[t][r]&&null===this.deletedStates[t][r][e]&&delete this.deletedStates[t][r][e]}removeFeatureState(t,e,n){if(null===this.deletedStates[t])return;const r=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},n&&void 0!==e)null!==this.deletedStates[t][r]&&(this.deletedStates[t][r]=this.deletedStates[t][r]||{},this.deletedStates[t][r][n]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][r])for(n in this.deletedStates[t][r]={},this.stateChanges[t][r])this.deletedStates[t][r][n]=null;else this.deletedStates[t][r]=null;else this.deletedStates[t]=null}getState(t,e){const n=String(e),r=x({},(this.state[t]||{})[n],(this.stateChanges[t]||{})[n]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){const n=this.deletedStates[t][e];if(null===n)return{};for(const t in n)delete r[t]}return r}initializeTileState(t,e){t.setFeatureState(this.state,e)}coalesceChanges(t,e){const n={};for(const t in this.stateChanges){this.state[t]=this.state[t]||{};const e={};for(const n in this.stateChanges[t])this.state[t][n]||(this.state[t][n]={}),x(this.state[t][n],this.stateChanges[t][n]),e[n]=this.state[t][n];n[t]=e}for(const t in this.deletedStates){this.state[t]=this.state[t]||{};const e={};if(null===this.deletedStates[t])for(const n in this.state[t])e[n]={},this.state[t][n]={};else for(const n in this.deletedStates[t]){if(null===this.deletedStates[t][n])this.state[t][n]={};else for(const e of Object.keys(this.deletedStates[t][n]))delete this.state[t][n][e];e[n]=this.state[t][n]}n[t]=n[t]||{},x(n[t],e)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(const r in t)t[r].setFeatureState(n,e)}}class od{constructor(t){this.size=t,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(t,e){const n=this.toIdx(t,e);return{min:this.minimums[n],max:this.maximums[n]}}isLeaf(t,e){return this.leaves[this.toIdx(t,e)]}toIdx(t,e){return e*this.size+t}}function ad(t,e,n,r){let i=0,o=Number.MAX_VALUE;for(let a=0;a<3;a++)if(Math.abs(r[a])<1e-15){if(n[a]<t[a]||n[a]>e[a])return null}else{const s=1/r[a];let l=(t[a]-n[a])*s,c=(e[a]-n[a])*s;if(l>c){const t=l;l=c,c=t}if(l>i&&(i=l),c<o&&(o=c),i>o)return null}return i}function sd(t,e,n,r,i,o,a,s,l,c,u){const h=r-t,d=i-e,p=o-n,f=a-t,m=s-e,g=l-n,y=u[1]*g-u[2]*m,v=u[2]*f-u[0]*g,_=u[0]*m-u[1]*f,b=h*y+d*v+p*_;if(Math.abs(b)<1e-15)return null;const x=1/b,w=c[0]-t,E=c[1]-e,C=c[2]-n,S=(w*y+E*v+C*_)*x;if(S<0||S>1)return null;const T=E*p-C*d,O=C*h-w*p,I=w*d-E*h,A=(u[0]*T+u[1]*O+u[2]*I)*x;return A<0||S+A>1?null:(f*T+m*O+g*I)*x}function ld(t,e,n){return(t-e)/(n-e)}function cd(t,e,n,r,i,o,a,s,l){const c=1<<n,u=o-r,h=a-i,d=(t+1)/c*u+r,p=(e+0)/c*h+i,f=(e+1)/c*h+i;s[0]=(t+0)/c*u+r,s[1]=p,l[0]=d,l[1]=f}class ud{constructor(t){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=t,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const e=function(t){const e=Math.ceil(Math.log2(t.dim/8)),n=[];let r=Math.ceil(Math.pow(2,e));const i=1/r,o=(t,e,n,r,i)=>{const o=r?1:0,a=(t+1)*n-o,s=e*n,l=(e+1)*n-o;i[0]=t*n,i[1]=s,i[2]=a,i[3]=l};let a=new od(r);const s=[];for(let e=0;e<r*r;e++){o(e%r,Math.floor(e/r),i,!1,s);const n=dd(s[0],s[1],t),l=dd(s[2],s[1],t),c=dd(s[2],s[3],t),u=dd(s[0],s[3],t);a.minimums.push(Math.min(n,l,c,u)),a.maximums.push(Math.max(n,l,c,u)),a.leaves.push(1)}for(n.push(a),r/=2;r>=1;r/=2){const t=n[n.length-1];a=new od(r);for(let e=0;e<r*r;e++){o(e%r,Math.floor(e/r),2,!0,s);const n=t.getElevation(s[0],s[1]),i=t.getElevation(s[2],s[1]),l=t.getElevation(s[2],s[3]),c=t.getElevation(s[0],s[3]),u=t.isLeaf(s[0],s[1]),h=t.isLeaf(s[2],s[1]),d=t.isLeaf(s[2],s[3]),p=t.isLeaf(s[0],s[3]),f=Math.min(n.min,i.min,l.min,c.min),m=Math.max(n.max,i.max,l.max,c.max),g=u&&h&&d&&p;a.maximums.push(m),a.minimums.push(f),a.leaves.push(m-f<=5&&g?1:0)}n.push(a)}return n}(this.dem),n=e.length-1,r=e[n];this._addNode(r.minimums[0],r.maximums[0],r.leaves[0]),this._construct(e,0,0,n,0)}raycastRoot(t,e,n,r,i,o,a=1){return ad([t,e,-100],[n,r,this.maximums[0]*a],i,o)}raycast(t,e,n,r,i,o,a=1){if(!this.nodeCount)return null;const s=this.raycastRoot(t,e,n,r,i,o,a);if(null==s)return null;const l=[],c=[],u=[],h=[],d=[{idx:0,t:s,nodex:0,nodey:0,depth:0}];for(;d.length>0;){const{idx:s,t:p,nodex:f,nodey:m,depth:g}=d.pop();if(this.leaves[s]){cd(f,m,g,t,e,n,r,u,h);const s=1<<g,l=(f+0)/s,c=(f+1)/s,d=(m+0)/s,y=(m+1)/s,v=dd(l,d,this.dem)*a,_=dd(c,d,this.dem)*a,b=dd(c,y,this.dem)*a,x=dd(l,y,this.dem)*a,w=sd(u[0],u[1],v,h[0],u[1],_,h[0],h[1],b,i,o),E=sd(h[0],h[1],b,u[0],h[1],x,u[0],u[1],v,i,o),C=Math.min(null!==w?w:Number.MAX_VALUE,null!==E?E:Number.MAX_VALUE);if(C!==Number.MAX_VALUE)return C;{const t=Rs([],i,o,p);if(hd(v,_,x,b,ld(t[0],u[0],h[0]),ld(t[1],u[1],h[1]))>=t[2])return p}continue}let y=0;for(let d=0;d<this._siblingOffset.length;d++){cd((f<<1)+this._siblingOffset[d][0],(m<<1)+this._siblingOffset[d][1],g+1,t,e,n,r,u,h),u[2]=-100,h[2]=this.maximums[this.childOffsets[s]+d]*a;const p=ad(u,h,i,o);if(null!=p){const t=p;l[d]=t;let e=!1;for(let n=0;n<y&&!e;n++)t>=l[c[n]]&&(c.splice(n,0,d),e=!0);e||(c[y]=d),y++}}for(let t=0;t<y;t++){const e=c[t];d.push({idx:this.childOffsets[s]+e,t:l[e],nodex:(f<<1)+this._siblingOffset[e][0],nodey:(m<<1)+this._siblingOffset[e][1],depth:g+1})}}return null}_addNode(t,e,n){return this.minimums.push(t),this.maximums.push(e),this.leaves.push(n),this.childOffsets.push(0),this.nodeCount++}_construct(t,e,n,r,i){if(1===t[r].isLeaf(e,n))return;this.childOffsets[i]||(this.childOffsets[i]=this.nodeCount);const o=r-1,a=t[o];let s,l=0;for(let t=0;t<this._siblingOffset.length;t++){const r=2*e+this._siblingOffset[t][0],i=2*n+this._siblingOffset[t][1],o=a.getElevation(r,i),c=a.isLeaf(r,i),u=this._addNode(o.min,o.max,c);c&&(l|=1<<t),s||(s=u)}for(let r=0;r<this._siblingOffset.length;r++)l&1<<r||this._construct(t,2*e+this._siblingOffset[r][0],2*n+this._siblingOffset[r][1],o,s+r)}}function hd(t,e,n,r,i,o){return rn(rn(t,n,o),rn(e,r,o),i)}function dd(t,e,n){const r=n.dim,i=y(t*r-.5,0,r-1),o=y(e*r-.5,0,r-1),a=Math.floor(i),s=Math.floor(o),l=Math.min(a+1,r-1),c=Math.min(s+1,r-1);return hd(n.get(a,s),n.get(l,s),n.get(a,c),n.get(l,c),i-a,o-s)}const pd={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class fd{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(t,e,n,r=!1,i=!1){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return D(`"${n}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=e.height;const o=this.dim=e.height-2;if(this.data=new Uint32Array(e.data.buffer),this.encoding=n||"mapbox",this.borderReady=r,!r){for(let t=0;t<o;t++)this.data[this._idx(-1,t)]=this.data[this._idx(0,t)],this.data[this._idx(o,t)]=this.data[this._idx(o-1,t)],this.data[this._idx(t,-1)]=this.data[this._idx(t,0)],this.data[this._idx(t,o)]=this.data[this._idx(t,o-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(o,-1)]=this.data[this._idx(o-1,0)],this.data[this._idx(-1,o)]=this.data[this._idx(0,o-1)],this.data[this._idx(o,o)]=this.data[this._idx(o-1,o-1)],i&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new ud(this)}get(t,e,n=!1){const r=new Uint8Array(this.data.buffer);n&&(t=y(t,-1,this.dim),e=y(e,-1,this.dim));const i=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(r[i],r[i+1],r[i+2])}static getUnpackVector(t){return pd[t]}get unpackVector(){return pd[this.encoding]}_idx(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)}_unpackMapbox(t,e,n){return(256*t*256+256*e+n)/10-1e4}_unpackTerrarium(t,e,n){return 256*t+e+n/256-32768}static pack(t,e){const n=[0,0,0,0],r=fd.getUnpackVector(e);let i=Math.floor((t+r[3])/r[2]);return n[2]=i%256,i=Math.floor(i/256),n[1]=i%256,i=Math.floor(i/256),n[0]=i,n}getPixels(){return new nl({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,e,n){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let r=e*this.dim,i=e*this.dim+this.dim,o=n*this.dim,a=n*this.dim+this.dim;switch(e){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:o=a-1;break;case 1:a=o+1}const s=-e*this.dim,l=-n*this.dim;for(let e=o;e<a;e++)for(let n=r;n<i;n++)this.data[this._idx(n,e)]=t.data[this._idx(n+s,e+l)]}onDeserialize(){this._tree&&(this._tree.dem=this)}}ni("DEMData",fd),ni("DemMinMaxQuadTree",ud,{omit:["dem"]});class md{constructor(t,e){this.max=t,this.onRemove=e,this.reset()}reset(){for(const t in this.data)for(const e of this.data[t])e.timeout&&clearTimeout(e.timeout),this.onRemove(e.value);return this.data={},this.order=[],this}add(t,e,n){const r=t.wrapped().key;void 0===this.data[r]&&(this.data[r]=[]);const i={value:e,timeout:void 0};if(void 0!==n&&(i.timeout=setTimeout(()=>{this.remove(t,i)},n)),this.data[r].push(i),this.order.push(r),this.order.length>this.max){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value}getByKey(t){const e=this.data[t];return e?e[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,e){if(!this.has(t))return this;const n=t.wrapped().key,r=void 0===e?0:this.data[n].indexOf(e),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}filter(t){const e=[];for(const n in this.data)for(const r of this.data[n])t(r.value)||e.push(r);for(const t of e)this.remove(t.value.tileID,t)}}class gd{constructor(t,e,n){this.func=t,this.mask=e,this.range=n}}gd.ReadOnly=!1,gd.ReadWrite=!0,gd.disabled=new gd(519,gd.ReadOnly,[0,1]);class yd{constructor(t,e,n,r,i,o){this.test=t,this.ref=e,this.mask=n,this.fail=r,this.depthFail=i,this.pass=o}}yd.disabled=new yd({func:519,mask:0},0,0,7680,7680,7680);class vd{constructor(t,e,n){this.blendFunction=t,this.blendColor=e,this.mask=n}}vd.Replace=[1,0],vd.disabled=new vd(vd.Replace,de.transparent,[!1,!1,!1,!1]),vd.unblended=new vd(vd.Replace,de.transparent,[!0,!0,!0,!0]),vd.alphaBlended=new vd([1,771],de.transparent,[!0,!0,!0,!0]);class _d{constructor(t,e,n){this.enable=t,this.mode=e,this.frontFace=n}}_d.disabled=new _d(!1,1029,2305),_d.backCCW=new _d(!0,1029,2305),_d.backCW=new _d(!0,1029,2304),_d.frontCW=new _d(!0,1028,2304),_d.frontCCW=new _d(!0,1028,2305);class bd extends zt{constructor(t,e,n){super(),this.id=t,this._onlySymbols=n,e.on("data",t=>{"source"===t.dataType&&"metadata"===t.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))}),e.on("error",()=>{this._sourceErrored=!0}),this._source=e,this._tiles={},this._cache=new md(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new id}onAdd(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(const t in this._tiles){const e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(t,e){return t.isSymbolTile=this._onlySymbols,this._source.loadTile(t,e)}_unloadTile(t){if(this._source.unloadTile)return this._source.unloadTile(t,()=>{})}_abortTile(t){if(this._source.abortTile)return this._source.abortTile(t,()=>{})}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const e in this._tiles){const n=this._tiles[e];n.upload(t),n.prepare(this.map.style.imageManager)}}getIds(){return b(this._tiles).map(t=>t.tileID).sort(xd).map(t=>t.key)}getRenderableIds(t){const e=[];for(const n in this._tiles)this._isIdRenderable(+n,t)&&e.push(this._tiles[n]);return t?e.sort((t,e)=>{const n=t.tileID,r=e.tileID,i=new o(n.canonical.x,n.canonical.y)._rotate(this.transform.angle),a=new o(r.canonical.x,r.canonical.y)._rotate(this.transform.angle);return n.overscaledZ-r.overscaledZ||a.y-i.y||a.x-i.x}).map(t=>t.tileID.key):e.map(t=>t.tileID).sort(xd).map(t=>t.key)}hasRenderableParent(t){const e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)}_isIdRenderable(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const t in this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(+t,"reloading")}}_reloadTile(t,e){const n=this._tiles[t];n&&("loading"!==n.state&&(n.state=e),this._loadTile(n,this._tileLoaded.bind(this,n,t,e)))}_tileLoaded(t,e,n,r){if(r)return t.state="errored",void(404!==r.status?this._source.fire(new Ft(r,{tile:t})):this.update(this.transform));t.timeAdded=q.now(),"expired"===n&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(e,t),"raster-dem"===this.getSource().type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),this._source.fire(new jt("data",{dataType:"source",tile:t,coord:t.tileID,sourceCacheId:this.id}))}_backfillDEM(t){const e=this.getRenderableIds();for(let r=0;r<e.length;r++){const i=e[r];if(t.neighboringTiles&&t.neighboringTiles[i]){const e=this.getTileByID(i);n(t,e),n(e,t)}}function n(t,e){if(!t.dem||t.dem.borderReady)return;t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0;let n=e.tileID.canonical.x-t.tileID.canonical.x;const r=e.tileID.canonical.y-t.tileID.canonical.y,i=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,n,r),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,e,n,r){for(const i in this._tiles){let o=this._tiles[i];if(r[i]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>n)continue;let a=o.tileID;for(;o&&o.tileID.overscaledZ>e+1;){const t=o.tileID.scaledTo(o.tileID.overscaledZ-1);o=this._tiles[t.key],o&&o.hasData()&&(a=t)}let s=a;for(;s.overscaledZ>e;)if(s=s.scaledTo(s.overscaledZ-1),t[s.key]){r[a.key]=a;break}}}findLoadedParent(t,e){if(t.key in this._loadedParentTiles){const n=this._loadedParentTiles[t.key];return n&&n.tileID.overscaledZ>=e?n:null}for(let n=t.overscaledZ-1;n>=e;n--){const e=t.scaledTo(n),r=this._getLoadedTile(e);if(r)return r}}_getLoadedTile(t){const e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(this._source.reparseOverscaled?t.wrapped().key:t.canonical.key)}updateCacheSize(t,e){e=e||this._source.tileSize;const n=Math.ceil(t.width/e)+1,r=Math.ceil(t.height/e)+1,i=Math.floor(n*r*5),o="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,i):i;this._cache.setMaxSize(o)}handleWrapJump(t){const e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){const t={};for(const n in this._tiles){const r=this._tiles[n];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+e),t[r.tileID.key]=r}this._tiles=t;for(const t in this._timers)clearTimeout(this._timers[t]),delete this._timers[t];for(const t in this._tiles)this._setTileReloadTimer(+t,this._tiles[t])}}update(t,e,n){if(this.transform=t,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage)return;if(this.usedForTerrain&&!n)return;let r;this.updateCacheSize(t,e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?r=t.getVisibleUnwrappedCoordinates(this._source.tileID).map(t=>new Hh(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y)):(r=t.coveringTiles({tileSize:e||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!n,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(r=r.filter(t=>this._source.hasTile(t)))):r=[];const i=this._updateRetainedTiles(r);if(wd(this._source.type)&&0!==r.length){const t={},e={},n=Object.keys(i);for(const r of n){const n=i[r],o=this._tiles[r];if(!o||o.fadeEndTime&&o.fadeEndTime<=q.now())continue;const a=this.findLoadedParent(n,Math.max(n.overscaledZ-bd.maxOverzooming,this._source.minzoom));a&&(this._addTile(a.tileID),t[a.tileID.key]=a.tileID),e[r]=n}const o=r[r.length-1].overscaledZ;for(const t in this._tiles){const n=this._tiles[t];if(i[t]||!n.hasData())continue;let r=n.tileID;for(;r.overscaledZ>o;){r=r.scaledTo(r.overscaledZ-1);const o=this._tiles[r.key];if(o&&o.hasData()&&e[r.key]){i[t]=n.tileID;break}}}for(const e in t)i[e]||(this._coveredTiles[e]=!0,i[e]=t[e])}for(const t in i)this._tiles[t].clearFadeHold();const o=function(t,e){const n=[];for(const r in t)r in e||n.push(r);return n}(this._tiles,i);for(const t of o){const e=this._tiles[t];e.hasSymbolBuckets&&!e.holdingForFade()?e.setHoldDuration(this.map._fadeDuration):e.hasSymbolBuckets&&!e.symbolFadeFinished()||this._removeTile(+t)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(+t)}_updateRetainedTiles(t){const e={};if(0===t.length)return e;const n={},r=t.reduce((t,e)=>Math.min(t,e.overscaledZ),1/0),i=t[0].overscaledZ,o=Math.max(i-bd.maxOverzooming,this._source.minzoom),a=Math.max(i+bd.maxUnderzooming,this._source.minzoom),s={};for(const n of t){const t=this._addTile(n);e[n.key]=n,t.hasData()||r<this._source.maxzoom&&(s[n.key]=n)}this._retainLoadedChildren(s,r,a,e);for(const r of t){let t=this._tiles[r.key];if(t.hasData())continue;if(r.canonical.z>=this._source.maxzoom){const t=r.children(this._source.maxzoom)[0],n=this.getTile(t);if(n&&n.hasData()){e[t.key]=t;continue}}else{const t=r.children(this._source.maxzoom);if(e[t[0].key]&&e[t[1].key]&&e[t[2].key]&&e[t[3].key])continue}let i=t.wasRequested();for(let a=r.overscaledZ-1;a>=o;--a){const o=r.scaledTo(a);if(n[o.key])break;if(n[o.key]=!0,t=this.getTile(o),!t&&i&&(t=this._addTile(o)),t&&(e[o.key]=o,i=t.wasRequested(),t.hasData()))break}}return e}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const e=[];let n,r=this._tiles[t].tileID;for(;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){n=this._loadedParentTiles[r.key];break}e.push(r.key);const t=r.scaledTo(r.overscaledZ-1);if(n=this._getLoadedTile(t),n)break;r=t}for(const t of e)this._loadedParentTiles[t]=n}}_addTile(t){let e=this._tiles[t.key];if(e)return e;e=this._cache.getAndRemove(t),e&&(this._setTileReloadTimer(t.key,e),e.tileID=t,this._state.initializeTileState(e,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,e)));const n=Boolean(e);if(!n){const n=this.map?this.map.painter:null;e=new rd(t,this._source.tileSize*t.overscaleFactor(),this.transform.tileZoom,n,"raster"===this._source.type||"raster-dem"===this._source.type),this._loadTile(e,this._tileLoaded.bind(this,e,t.key,e.state))}return e?(e.uses++,this._tiles[t.key]=e,n||this._source.fire(new jt("dataloading",{tile:e,coord:e.tileID,dataType:"source"})),e):null}_setTileReloadTimer(t,e){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const n=e.getExpiryTimeout();n&&(this._timers[t]=setTimeout(()=>{this._reloadTile(t,"expired"),delete this._timers[t]},n))}_removeTile(t){const e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(+t);this._source._clear&&this._source._clear(),this._cache.reset()}tilesIn(t,e,n){const r=[],i=this.transform;if(!i)return r;for(const o in this._tiles){const a=this._tiles[o];if(n&&a.clearQueryDebugViz(),a.holdingForFade())continue;const s=t.containsTile(a,i,e);s&&r.push(s)}return r}getVisibleCoordinates(t){const e=this.getRenderableIds(t).map(t=>this._tiles[t].tileID);for(const t of e)t.projMatrix=this.transform.calculateProjMatrix(t.toUnwrapped());return e}hasTransition(){if(this._source.hasTransition())return!0;if(wd(this._source.type))for(const t in this._tiles){const e=this._tiles[t];if(void 0!==e.fadeEndTime&&e.fadeEndTime>=q.now())return!0}return!1}setFeatureState(t,e,n){this._state.updateState(t=t||"_geojsonTileLayer",e,n)}removeFeatureState(t,e,n){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,n)}getFeatureState(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)}setDependencies(t,e,n){const r=this._tiles[t];r&&r.setDependencies(e,n)}reloadTilesForDependencies(t,e){for(const n in this._tiles)this._tiles[n].hasDependency(t,e)&&this._reloadTile(+n,"reloading");this._cache.filter(n=>!n.hasDependency(t,e))}}function xd(t,e){const n=Math.abs(2*t.wrap)-+(t.wrap<0),r=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||r-n||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function wd(t){return"raster"===t||"image"===t||"video"===t}bd.maxOverzooming=10,bd.maxUnderzooming=3;class Ed{constructor(t,e,n){this._demTile=t,this._dem=this._demTile.dem,this._scale=e,this._offset=n}static create(t,e,n){const r=n||t.findDEMTileFor(e);if(!r||!r.dem)return;const i=r.dem,o=r.tileID,a=1<<e.canonical.z-o.canonical.z;return new Ed(r,r.tileSize/ja/a,[(e.canonical.x/a-o.canonical.x)*i.dim,(e.canonical.y/a-o.canonical.y)*i.dim])}tileCoordToPixel(t,e){const n=e*this._scale+this._offset[1],r=Math.floor(t*this._scale+this._offset[0]),i=Math.floor(n);return new o(r,i)}getElevationAt(t,e,n,r){const i=t*this._scale+this._offset[0],o=e*this._scale+this._offset[1],a=Math.floor(i),s=Math.floor(o),l=this._dem;return r=!!r,n?rn(rn(l.get(a,s,r),l.get(a,s+1,r),o-s),rn(l.get(a+1,s,r),l.get(a+1,s+1,r),o-s),i-a):l.get(a,s,r)}getElevationAtPixel(t,e,n){return this._dem.get(t,e,!!n)}getMeterToDEM(t){return(1<<this._demTile.tileID.canonical.z)*Ha(1,t)*this._dem.stride}}class Cd{constructor(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Xr(ja,16,0),this.featureIndexArray=new ta,this.promoteId=e}insert(t,e,n,r,i,o=0){const a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i,o);const s=this.grid;for(let t=0;t<e.length;t++){const n=e[t],r=[1/0,1/0,-1/0,-1/0];for(let t=0;t<n.length;t++){const e=n[t];r[0]=Math.min(r[0],e.x),r[1]=Math.min(r[1],e.y),r[2]=Math.max(r[2],e.x),r[3]=Math.max(r[3],e.y)}r[0]<ja&&r[1]<ja&&r[2]>=0&&r[3]>=0&&s.insert(a,r[0],r[1],r[2],r[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new rc.VectorTile(new Vc(this.rawTileData)).layers,this.sourceLayerCoder=new Zh(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const t in this.vtLayers)this.vtFeatures[t]=[]}return this.vtLayers}query(t,e,n,r){this.loadVTLayers();const i=t.params||{},o=vr(i.filter),a=t.tileResult,s=t.transform,l=a.bufferedTilespaceBounds,c=this.grid.query(l.min.x,l.min.y,l.max.x,l.max.y,(t,e,n,r)=>gs(a.bufferedTilespaceGeometry,t,e,n,r));c.sort(Td);let u=null;s.elevation&&c.length>0&&(u=Ed.create(s.elevation,this.tileID));const h={};let d;for(let s=0;s<c.length;s++){const l=c[s];if(l===d)continue;d=l;const p=this.featureIndexArray.get(l);let f=null;this.loadMatchingFeature(h,p,o,i.layers,i.availableImages,e,n,r,(e,n,r,i=0)=>(f||(f=ns(e,this.tileID.canonical,t.tileTransform)),n.queryIntersectsFeature(a,e,r,f,this.z,t.transform,t.pixelPosMatrix,u,i)))}return h}loadMatchingFeature(t,e,n,r,i,o,a,s,l){const{featureIndex:c,bucketIndex:u,sourceLayerIndex:h,layoutVertexArrayOffset:d}=e,p=this.bucketLayerIDs[u];if(r&&!function(t,e){for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1}(r,p))return;const f=this.sourceLayerCoder.decode(h),m=this.vtLayers[f].feature(c);if(n.needGeometry){const t=rs(m,!0);if(!n.filter(new eo(this.tileID.overscaledZ),t,this.tileID.canonical))return}else if(!n.filter(new eo(this.tileID.overscaledZ),m))return;const g=this.getId(m,f);for(let e=0;e<p.length;e++){const n=p[e];if(r&&r.indexOf(n)<0)continue;const u=o[n];if(!u)continue;let h={};void 0!==g&&s&&(h=s.getState(u.sourceLayer||"_geojsonTileLayer",g));const f=x({},a[n]);f.paint=Sd(f.paint,u.paint,m,h,i),f.layout=Sd(f.layout,u.layout,m,h,i);const y=!l||l(m,u,h,d);if(!y)continue;const v=new $h(m,this.z,this.x,this.y,g);v.layer=f;let _=t[n];void 0===_&&(_=t[n]=[]),_.push({featureIndex:c,feature:v,intersectionZ:y})}}lookupSymbolFeatures(t,e,n,r,i,o,a,s){const l={};this.loadVTLayers();const c=vr(i);for(const i of t)this.loadMatchingFeature(l,{bucketIndex:n,sourceLayerIndex:r,featureIndex:i,layoutVertexArrayOffset:0},c,o,a,s,e);return l}loadFeature(t){const{featureIndex:e,sourceLayerIndex:n}=t;this.loadVTLayers();const r=this.sourceLayerCoder.decode(n),i=this.vtFeatures[r];if(i[e])return i[e];const o=this.vtLayers[r].feature(e);return i[e]=o,o}hasLayer(t){for(const e of this.bucketLayerIDs)for(const n of e)if(t===n)return!0;return!1}getId(t,e){let n=t.id;return this.promoteId&&(n=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]],"boolean"==typeof n&&(n=Number(n))),n}}function Sd(t,e,n,r,i){return A(t,(t,o)=>{const a=e instanceof co?e.get(o):null;return a&&a.evaluate?a.evaluate(n,r,i):a})}function Td(t,e){return e-t}ni("FeatureIndex",Cd,{omit:["rawTileData","sourceLayerCoder"]});class Od{constructor(t){const e={},n=[];for(const r in t){const i=t[r],o=e[r]={};for(const t in i.glyphs){const e=i.glyphs[+t];if(!e||0===e.bitmap.width||0===e.bitmap.height)continue;const r=e.metrics.localGlyph?2:1,a={x:0,y:0,w:e.bitmap.width+2*r,h:e.bitmap.height+2*r};n.push(a),o[t]=a}}const{w:r,h:i}=du(n),o=new el({width:r||1,height:i||1});for(const n in t){const r=t[n];for(const t in r.glyphs){const i=r.glyphs[+t];if(!i||0===i.bitmap.width||0===i.bitmap.height)continue;const a=e[n][t],s=i.metrics.localGlyph?2:1;el.copy(i.bitmap,o,{x:0,y:0},{x:a.x+s,y:a.y+s},i.bitmap)}}this.image=o,this.positions=e}}ni("GlyphAtlas",Od);class Id{constructor(t){this.tileID=new Hh(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.tileZoom=t.tileZoom,this.uid=t.uid,this.zoom=t.zoom,this.canonical=t.tileID.canonical,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId,this.enableTerrain=!!t.enableTerrain,this.isSymbolTile=t.isSymbolTile,t.projection&&(this.tileTransform=Uh(t.tileID.canonical,t.projection))}parse(t,e,n,r,i){this.status="parsing",this.data=t,this.collisionBoxArray=new Wo;const o=new Zh(Object.keys(t.layers).sort()),a=new Cd(this.tileID,this.promoteId);a.bucketLayerIDs=[];const s={},l=new Nh(256,256),c={featureIndex:a,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:l,availableImages:n},u=e.familiesBySource[this.source];for(const e in u){const r=t.layers[e];if(!r)continue;let i=!1,l=!1;for(const t of u[e])"symbol"===t[0].type?i=!0:l=!0;if(!0===this.isSymbolTile&&!i)continue;if(!1===this.isSymbolTile&&!l)continue;1===r.version&&D(`Vector tile source "${this.source}" layer "${e}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const h=o.encode(e),d=[];for(let t=0;t<r.length;t++){const n=r.feature(t),i=a.getId(n,e);d.push({feature:n,id:i,index:t,sourceLayerIndex:h})}for(const t of u[e]){const e=t[0];void 0!==this.isSymbolTile&&"symbol"===e.type!==this.isSymbolTile||e.minzoom&&this.zoom<Math.floor(e.minzoom)||e.maxzoom&&this.zoom>=e.maxzoom||"none"!==e.visibility&&(Ad(t,this.zoom,n),(s[e.id]=e.createBucket({index:a.bucketLayerIDs.length,layers:t,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:h,sourceID:this.source,enableTerrain:this.enableTerrain,availableImages:n})).populate(d,c,this.tileID.canonical,this.tileTransform),a.bucketLayerIDs.push(t.map(t=>t.id)))}}let h,d,p,f;l.trim();const m={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},g=A(c.glyphDependencies,t=>Object.keys(t).map(Number));Object.keys(g).length?r.send("getGlyphs",{uid:this.uid,stacks:g},(t,e)=>{h||(h=t,d=e,_.call(this))},void 0,!1,m):d={};const y=Object.keys(c.iconDependencies);y.length?r.send("getImages",{icons:y,source:this.source,tileID:this.tileID,type:"icons"},(t,e)=>{h||(h=t,p=e,_.call(this))},void 0,!1,m):p={};const v=Object.keys(c.patternDependencies);function _(){if(h)return i(h);if(d&&p&&f){const t=new Od(d),e=new fu(p,f);for(const r in s){const i=s[r];i instanceof _h?(Ad(i.layers,this.zoom,n),rh(i,d,t.positions,p,e.iconPositions,this.showCollisionBoxes,n,this.tileID.canonical,this.tileZoom)):i.hasPattern&&(i instanceof xc||i instanceof Vl||i instanceof lc)&&(Ad(i.layers,this.zoom,n),i.addFeatures(c,this.tileID.canonical,e.patternPositions,n))}this.status="done",i(null,{buckets:b(s).filter(t=>!t.isEmpty()),featureIndex:a,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,lineAtlas:l,imageAtlas:e,glyphMap:this.returnDependencies?d:null,iconMap:this.returnDependencies?p:null,glyphPositions:this.returnDependencies?t.positions:null})}}v.length?r.send("getImages",{icons:v,source:this.source,tileID:this.tileID,type:"patterns"},(t,e)=>{h||(h=t,f=e,_.call(this))},void 0,!1,m):f={},_.call(this)}}function Ad(t,e,n){const r=new eo(e);for(const e of t)e.recalculate(r,n)}class Md{constructor(t){this.entries={},this.scheduler=t}request(t,e,n,r){const i=this.entries[t]=this.entries[t]||{callbacks:[]};if(i.result){const[t,n]=i.result;return this.scheduler?this.scheduler.add(()=>{r(t,n)},e):r(t,n),()=>{}}return i.callbacks.push(r),i.cancel||(i.cancel=n((n,r)=>{i.result=[n,r];for(const t of i.callbacks)this.scheduler?this.scheduler.add(()=>{t(n,r)},e):t(n,r);setTimeout(()=>delete this.entries[t],3e3)})),()=>{i.result||(i.callbacks=i.callbacks.filter(t=>t!==r),i.callbacks.length||(i.cancel(),delete this.entries[t]))}}}function kd(t,e,n){const r=JSON.stringify(t.request);return t.data&&(this.deduped.entries[r]={result:[null,t.data]}),this.deduped.request(r,{type:"parseTile",isSymbolTile:t.isSymbolTile,zoom:t.tileZoom},e=>{const r=Ot(t.request,(t,r,i,o)=>{t?e(t):r&&e(null,{vectorTile:n?void 0:new rc.VectorTile(new Vc(r)),rawData:r,cacheControl:i,expires:o})});return()=>{r.cancel(),e()}},e)}var Pd={name:"albers",range:[4,7],center:[-96,37.5],parallels:[29.5,45.5],conic:!0,initializeConstants(){if(this.constants&&Hs(this.parallels,this.constants.parallels))return;const t=Math.sin(h(this.parallels[0])),e=(t+Math.sin(h(this.parallels[1])))/2,n=1+t*(2*e-t),r=Math.sqrt(n)/e;this.constants={n:e,c:n,r0:r,parallels:this.parallels}},project(t,e){this.initializeConstants();const n=h(t-this.center[0]),r=h(e),{n:i,c:o,r0:a}=this.constants,s=Math.sqrt(o-2*i*Math.sin(r))/i;return{x:s*Math.sin(n*i),y:s*Math.cos(n*i)-a}},unproject(t,e){this.initializeConstants();const{n:n,c:r,r0:i}=this.constants,o=i+e;let a=Math.atan2(t,Math.abs(o))*Math.sign(o);o*n<0&&(a-=Math.PI*Math.sign(t)*Math.sign(o));const s=h(this.center[0])*n;a=v(a,-Math.PI-s,Math.PI-s);const l=d(a/n)+this.center[0],c=Math.asin(y((r-(t*t+o*o)*n*n)/(2*n),-1,1)),u=y(d(c),-85.051129,Ka);return new Ba(l,u)}};const Dd=1.340264,Rd=-.081106,Ld=893e-6,Nd=.003796,jd=Math.sqrt(3)/2;var Fd={name:"equalEarth",center:[0,0],range:[3.5,7],project(t,e){e=e/180*Math.PI,t=t/180*Math.PI;const n=Math.asin(jd*Math.sin(e)),r=n*n,i=r*r*r;return{x:.5*(t*Math.cos(n)/(jd*(Dd+3*Rd*r+i*(7*Ld+9*Nd*r)))/Math.PI+.5),y:1-.5*(n*(Dd+Rd*r+i*(Ld+Nd*r))/Math.PI+1)}},unproject(t,e){t=(2*t-.5)*Math.PI;let n=e=(2*(1-e)-1)*Math.PI,r=n*n,i=r*r*r;for(let t,o,a,s=0;s<12&&(o=n*(Dd+Rd*r+i*(Ld+Nd*r))-e,a=Dd+3*Rd*r+i*(7*Ld+9*Nd*r),t=o/a,n=y(n-t,-Math.PI/3,Math.PI/3),r=n*n,i=r*r*r,!(Math.abs(t)<1e-12));++s);const o=jd*t*(Dd+3*Rd*r+i*(7*Ld+9*Nd*r))/Math.cos(n),a=Math.asin(Math.sin(n)/jd),s=y(180*o/Math.PI,-180,180),l=y(180*a/Math.PI,-85.051129,Ka);return new Ba(s,l)}},zd={name:"equirectangular",wrap:!0,center:[0,0],range:[3.5,7],project:(t,e)=>({x:.5+t/360,y:.5-e/360}),unproject(t,e){const n=360*(t-.5),r=y(360*(.5-e),-85.051129,Ka);return new Ba(n,r)}};const Bd=Math.PI/2;function Ud(t){return Math.tan((Bd+t)/2)}var Gd={name:"lambertConformalConic",range:[3.5,7],center:[0,30],parallels:[30,30],conic:!0,initializeConstants(){if(this.constants&&Hs(this.parallels,this.constants.parallels))return;const t=h(this.parallels[0]),e=h(this.parallels[1]),n=Math.cos(t),r=t===e?Math.sin(t):Math.log(n/Math.cos(e))/Math.log(Ud(e)/Ud(t)),i=n*Math.pow(Ud(t),r)/r;this.constants={n:r,f:i,parallels:this.parallels}},project(t,e){this.initializeConstants(),e=h(e),t=h(t-this.center[0]);const n=1e-6,{n:r,f:i}=this.constants;i>0?e<-Bd+n&&(e=-Bd+n):e>Bd-n&&(e=Bd-n);const o=i/Math.pow(Ud(e),r),a=o*Math.sin(r*t),s=i-o*Math.cos(r*t);return{x:.5*(a/Math.PI+.5),y:1-.5*(s/Math.PI+.5)}},unproject(t,e){this.initializeConstants(),t=(2*t-.5)*Math.PI,e=(2*(1-e)-.5)*Math.PI;const{n:n,f:r}=this.constants,i=r-e,o=Math.sign(i),a=Math.sign(n)*Math.sqrt(t*t+i*i);let s=Math.atan2(t,Math.abs(i))*o;i*n<0&&(s-=Math.PI*Math.sign(t)*o);const l=y(d(s/n)+this.center[0],-180,180),c=y(d(2*Math.atan(Math.pow(r/a,1/n))-Bd),-85.051129,Ka);return new Ba(l,c)}},Vd={name:"mercator",wrap:!0,center:[0,0],project:(t,e)=>({x:Va(t),y:qa(e)}),unproject(t,e){const n=Wa(t),r=Za(e);return new Ba(n,r)}};const qd=h(Ka);var Hd={name:"naturalEarth",center:[0,0],range:[3.5,7],project(t,e){const n=(e=h(e))*e,r=n*n;return{x:.5*((t=h(t))*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791))/Math.PI+.5),y:1-.5*(e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))/Math.PI+1)}},unproject(t,e){t=(2*t-.5)*Math.PI;let n=e=(2*(1-e)-1)*Math.PI,r=25,i=0,o=n*n;do{o=n*n;const t=o*o;i=(n*(1.007226+o*(.015085+t*(.028874*o-.044475-.005916*t)))-e)/(1.007226+o*(.045255+t*(.259866*o-.311325-.005916*11*t))),n=y(n-i,-qd,qd)}while(Math.abs(i)>1e-6&&--r>0);o=n*n;const a=y(d(t/(.8707+o*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979))),-180,180),s=d(n);return new Ba(a,s)}};const Wd=h(Ka),Zd={albers:Pd,equalEarth:Fd,equirectangular:zd,lambertConformalConic:Gd,mercator:Vd,naturalEarth:Hd,winkelTripel:{name:"winkelTripel",center:[0,0],range:[3.5,7],project(t,e){e=h(e),t=h(t);const n=Math.cos(e),r=2/Math.PI,i=Math.acos(n*Math.cos(t/2)),o=Math.sin(i)/i,a=.5*(t*r+2*n*Math.sin(t/2)/o)||0,s=.5*(e+Math.sin(e)/o)||0;return{x:.5*(a/Math.PI+.5),y:1-.5*(s/Math.PI+1)}},unproject(t,e){let n=t=(2*t-.5)*Math.PI,r=e=(2*(1-e)-1)*Math.PI,i=25;const o=1e-6;let a=0,s=0;do{const i=Math.cos(r),o=Math.sin(r),l=2*o*i,c=o*o,u=i*i,h=Math.cos(n/2),d=Math.sin(n/2),p=2*h*d,f=d*d,m=1-u*h*h,g=m?1/m:0,v=m?Math.acos(i*h)*Math.sqrt(1/m):0,_=.5*(2*v*i*d+2*n/Math.PI)-t,b=.5*(v*o+r)-e,x=.5*g*(u*f+v*i*h*c)+1/Math.PI,w=g*(p*l/4-v*o*d),E=.125*g*(l*d-v*o*u*p),C=.5*g*(c*h+v*f*i)+.5,S=w*E-C*x;a=(b*w-_*C)/S,s=(_*E-b*x)/S,n=y(n-a,-Math.PI,Math.PI),r=y(r-s,-Wd,Wd)}while((Math.abs(a)>o||Math.abs(s)>o)&&--i>0);return new Ba(d(n),d(r))}}};t.ARRAY_TYPE=Cs,t.AUTH_ERR_MSG=tt,t.Actor=class{constructor(t,e,n){this.target=t,this.parent=e,this.mapId=n,this.callbacks={},this.cancelCallbacks={},O(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=N()?t:s,this.scheduler=new Bh}send(t,e,n,r,i=!1,o){const a=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(n.metadata=o,this.callbacks[a]=n);const s=G(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:t,hasCallback:!!n,targetMapId:r,mustQueue:i,sourceMapId:this.mapId,data:oi(e,s)},s),{cancel:()=>{n&&delete this.callbacks[a],this.target.postMessage({id:a,type:"<cancel>",targetMapId:r,sourceMapId:this.mapId})}}}receive(t){const e=t.data,n=e.id;if(n&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){const t=this.cancelCallbacks[n];delete this.cancelCallbacks[n],t&&t.cancel()}else if(e.mustQueue||N()){const t=this.callbacks[n];this.cancelCallbacks[n]=this.scheduler.add(()=>this.processTask(n,e),t&&t.metadata||{type:"message"})}else this.processTask(n,e)}processTask(t,e){if("<response>"===e.type){const n=this.callbacks[t];delete this.callbacks[t],n&&(e.error?n(ai(e.error)):n(null,ai(e.data)))}else{const n=G(this.globalScope)?void 0:[],r=e.hasCallback?(e,r)=>{delete this.cancelCallbacks[t],this.target.postMessage({id:t,type:"<response>",sourceMapId:this.mapId,error:e?oi(e):null,data:oi(r,n)},n)}:t=>{},i=ai(e.data);if(this.parent[e.type])this.parent[e.type](e.sourceMapId,i,r);else if(this.parent.getWorkerSource){const t=e.type.split(".");this.parent.getWorkerSource(e.sourceMapId,t[0],i.source)[t[1]](i,r)}else r(new Error("Could not find function "+e.type))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},t.CanonicalTileID=Vh,t.Color=de,t.ColorMode=vd,t.CullFaceMode=_d,t.DEMData=fd,t.DataConstantProperty=uo,t.DedupedRequest=Md,t.DepthMode=gd,t.EXTENT=ja,t.Elevation=class{getAtPointOrZero(t,e=0){return this.getAtPoint(t,e)||0}getAtPoint(t,e,n=!0){null==e&&(e=null);const r=this._source();if(!r)return e;if(t.y<0||t.y>1)return e;const i=r.getSource().maxzoom,o=1<<i,a=Math.floor(t.x),s=t.x-a,l=new Hh(i,a,i,Math.floor(s*o),Math.floor(t.y*o)),c=this.findDEMTileFor(l);if(!c||!c.dem)return e;const u=c.dem,h=1<<c.tileID.canonical.z,d=(s*h-c.tileID.canonical.x)*u.dim,p=(t.y*h-c.tileID.canonical.y)*u.dim,f=Math.floor(d),m=Math.floor(p);return(n?this.exaggeration():1)*rn(rn(u.get(f,m),u.get(f,m+1),p-m),rn(u.get(f+1,m),u.get(f+1,m+1),p-m),d-f)}getAtTileOffset(t,e,n){const r=1<<t.canonical.z;return this.getAtPointOrZero(new Ya(t.wrap+(t.canonical.x+e/ja)/r,(t.canonical.y+n/ja)/r))}getForTilePoints(t,e,n,r){const i=Ed.create(this,t,r);return!!i&&(e.forEach(t=>{t[2]=this.exaggeration()*i.getElevationAt(t[0],t[1],n)}),!0)}getMinMaxForTile(t){const e=this.findDEMTileFor(t);if(!e||!e.dem)return null;const n=e.dem.tree,r=e.tileID,i=1<<t.canonical.z-r.canonical.z;let o=t.canonical.x/i-r.canonical.x,a=t.canonical.y/i-r.canonical.y,s=0;for(let e=0;e<t.canonical.z-r.canonical.z&&!n.leaves[s];e++){o*=2,a*=2;const t=2*Math.floor(a)+Math.floor(o);s=n.childOffsets[s]+t,o%=1,a%=1}return{min:this.exaggeration()*n.minimums[s],max:this.exaggeration()*n.maximums[s]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(t,e,n){throw new Error("Pure virtual method called.")}pointCoordinate(t){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(t){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},t.ErrorEvent=Ft,t.EvaluationParameters=eo,t.Event=jt,t.Evented=zt,t.GlyphManager=Gu,t.ImagePosition=pu,t.LineAtlas=Nh,t.LngLat=Ba,t.LngLatBounds=Fa,t.LocalGlyphMode=Uu,t.MAX_MERCATOR_LATITUDE=Ka,t.MAX_SAFE_INTEGER=l,t.MercatorCoordinate=Ya,t.ONE_EM=24,t.OverscaledTileID=Hh,t.Properties=go,t.RGBAImage=nl,t.RequestManager=class{constructor(t,e,n){this._transformRequestFn=t,this._customAccessToken=e,this._silenceAuthErrors=!!n,this._createSkuToken()}_createSkuToken(){const t=function(){let t="";for(let e=0;e<10;e++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Q,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}}normalizeStyleURL(t,e){if(!et(t))return t;const n=it(t);return n.path="/styles/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||e)}normalizeGlyphsURL(t,e){if(!et(t))return t;const n=it(t);return n.path="/fonts/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||e)}normalizeSourceURL(t,e){if(!et(t))return t;const n=it(t);return n.path=`/v4/${n.authority}.json`,n.params.push("secure"),this._makeAPIURL(n,this._customAccessToken||e)}normalizeSpriteURL(t,e,n,r){const i=it(t);return et(t)?(i.path=`/styles/v1${i.path}/sprite${e}${n}`,this._makeAPIURL(i,this._customAccessToken||r)):(i.path+=`${e}${n}`,ot(i))}normalizeTileURL(t,e,n){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!et(t))return t;const r=it(t);r.path=r.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${e||n&&"raster"!==r.authority&&512===n?"@2x":""}${Z.supported?".webp":"$1"}`),"raster"===r.authority?r.path=`/${W.RASTER_URL_PREFIX}${r.path}`:(r.path=r.path.replace(/^.+\/v4\//,"/"),r.path=`/${W.TILE_URL_VERSION}${r.path}`);const i=this._customAccessToken||function(t){for(const e of t){const t=e.match(/^access_token=(.*)$/);if(t)return t[1]}return null}(r.params)||W.ACCESS_TOKEN;return W.REQUIRE_ACCESS_TOKEN&&i&&this._skuToken&&r.params.push("sku="+this._skuToken),this._makeAPIURL(r,i)}canonicalizeTileURL(t,e){const n=it(t);if(!n.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!n.path.match(/\.[\w]+$/))return t;let r="mapbox://";n.path.match(/^\/raster\/v1\//)?r+="raster/"+n.path.replace(`/${W.RASTER_URL_PREFIX}/`,""):r+="tiles/"+n.path.replace(`/${W.TILE_URL_VERSION}/`,"");let i=n.params;return e&&(i=i.filter(t=>!t.match(/^access_token=/))),i.length&&(r+="?"+i.join("&")),r}canonicalizeTileset(t,e){const n=!!e&&et(e),r=[];for(const e of t.tiles||[])nt(e)?r.push(this.canonicalizeTileURL(e,n)):r.push(e);return r}_makeAPIURL(t,e){const n="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",r=it(W.API_URL);if(t.protocol=r.protocol,t.authority=r.authority,"http"===t.protocol){const e=t.params.indexOf("secure");e>=0&&t.params.splice(e,1)}if("/"!==r.path&&(t.path=`${r.path}${t.path}`),!W.REQUIRE_ACCESS_TOKEN)return ot(t);if(e=e||W.ACCESS_TOKEN,!this._silenceAuthErrors){if(!e)throw new Error("An API access token is required to use Mapbox GL. "+n);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+n)}return t.params=t.params.filter(t=>-1===t.indexOf("access_token")),t.params.push("access_token="+(e||"")),ot(t)}},t.ResourceType=Et,t.SegmentVector=Na,t.SourceCache=bd,t.StencilMode=yd,t.StructArrayLayout1ui2=Go,t.StructArrayLayout2f1f2i16=Do,t.StructArrayLayout2i4=Eo,t.StructArrayLayout2ui4=Uo,t.StructArrayLayout3f12=To,t.StructArrayLayout3ui6=Lo,t.StructArrayLayout4i8=Co,t.Texture=Lh,t.Tile=rd,t.Transitionable=io,t.Uniform1f=pa,t.Uniform1i=class extends da{constructor(t,e){super(t,e),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))}},t.Uniform2f=class extends da{constructor(t,e){super(t,e),this.current=[0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))}},t.Uniform3f=class extends da{constructor(t,e){super(t,e),this.current=[0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))}},t.Uniform4f=fa,t.UniformColor=ma,t.UniformMatrix2f=class extends da{constructor(t,e){super(t,e),this.current=va}set(t){for(let e=0;e<4;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix2fv(this.location,!1,t);break}}},t.UniformMatrix3f=class extends da{constructor(t,e){super(t,e),this.current=ya}set(t){for(let e=0;e<9;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix3fv(this.location,!1,t);break}}},t.UniformMatrix4f=class extends da{constructor(t,e){super(t,e),this.current=ga}set(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(let e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}}},t.UnwrappedTileID=qh,t.ValidationError=Ut,t.VectorTileWorkerSource=class extends zt{constructor(t,e,n,r,i){super(),this.actor=t,this.layerIndex=e,this.availableImages=n,this.loadVectorData=i||kd,this.loading={},this.loaded={},this.deduped=new Md(t.scheduler),this.isSpriteLoaded=r,this.scheduler=t.scheduler}loadTile(t,e){const n=t.uid,r=t&&t.request,i=r&&r.collectResourceTiming,o=this.loading[n]=new Id(t);o.abort=this.loadVectorData(t,(a,s)=>{const l=!this.loading[n];if(delete this.loading[n],l||a||!s)return o.status="done",l||(this.loaded[n]=o),e(a);const c=s.rawData,u={};s.expires&&(u.expires=s.expires),s.cacheControl&&(u.cacheControl=s.cacheControl),o.vectorTile=s.vectorTile||new rc.VectorTile(new Vc(c));const h=()=>{o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,(t,n)=>{if(t||!n)return e(t);const o={};if(i){const t=zh(r);t.length>0&&(o.resourceTiming=JSON.parse(JSON.stringify(t)))}e(null,x({rawTileData:c.slice(0)},n,u,o))})};this.isSpriteLoaded?h():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(h,{type:"parseTile",isSymbolTile:t.isSymbolTile,zoom:t.tileZoom}):h()}),this.loaded=this.loaded||{},this.loaded[n]=o})}reloadTile(t,e){const n=this.loaded,r=t.uid,i=this;if(n&&n[r]){const o=n[r];o.showCollisionBoxes=t.showCollisionBoxes,o.enableTerrain=!!t.enableTerrain;const a=(t,n)=>{const r=o.reloadCallback;r&&(delete o.reloadCallback,o.parse(o.vectorTile,i.layerIndex,this.availableImages,i.actor,r)),e(t,n)};"parsing"===o.status?o.reloadCallback=a:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,a):a())}}abortTile(t,e){const n=t.uid,r=this.loading[n];r&&(r.abort&&r.abort(),delete this.loading[n]),e()}removeTile(t,e){const n=this.loaded,r=t.uid;n&&n[r]&&delete n[r],e()}},t.WritingMode=mu,t.ZoomHistory=si,t.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},t.addDynamicAttributes=mh,t.altitudeFromMercatorZ=$a,t.asyncAll=_,t.bezier=m,t.bindAll=O,t.boundsAttributes=ed,t.bufferConvexPolygon=function(t,e){const n=[];for(let r=0;r<t.length;r++){const i=v(r-1,-1,t.length-1),o=v(r+1,-1,t.length-1),a=t[r],s=t[o],l=t[i].sub(a).unit(),c=s.sub(a).unit(),u=c.angleWithSep(l.x,l.y),h=l.add(c).unit().mult(-1*e/Math.sin(u/2));n.push(a.add(h))}return n},t.cacheEntryPossiblyAdded=function(t){wt++,wt>_t&&(t.getActor().send("enforceCacheSizeLimit",vt),wt=0)},t.clamp=y,t.clearTileCache=function(t){const e=s.caches.delete(mt);t&&e.catch(t).then(()=>t())},t.clipLine=ju,t.clone=function(t){var e=new Cs(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},t.clone$1=function(t){var e=new Cs(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$2=k,t.collisionCircleLayout=kc,t.config=W,t.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},t.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},t.create=As,t.create$1=function(){var t=new Cs(16);return Cs!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$2=Ss,t.createExpression=ar,t.createLayout=xo,t.createStyleLayer=function(t){return"custom"===t.type?new Th(t):new Ah[t.type](t)},t.cross=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],l=n[2];return t[0]=i*l-o*s,t[1]=o*a-r*l,t[2]=r*s-i*a,t},t.degToRad=h,t.div=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t},t.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},t.dot$1=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},t.ease=g,t.easeCubicInOut=f,t.emitValidationErrors=Yr,t.endsWith=I,t.enforceCacheSizeLimit=function(t){bt(),gt&&gt.then(e=>{e.keys().then(n=>{for(let r=0;r<n.length-t;r++)e.delete(n[r])})})},t.evaluateSizeForFeature=Rc,t.evaluateSizeForZoom=Lc,t.evaluateVariableOffset=nh,t.evented=Xi,t.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},t.exactEquals$1=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},t.exported=q,t.exported$1=Z,t.extend=x,t.filterObject=M,t.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},t.fromQuat=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,l=i+i,c=n*a,u=r*a,h=r*s,d=i*a,p=i*s,f=i*l,m=o*a,g=o*s,y=o*l;return t[0]=1-h-f,t[1]=u+y,t[2]=d-g,t[3]=0,t[4]=u-y,t[5]=1-c-f,t[6]=p+m,t[7]=0,t[8]=d+g,t[9]=p-m,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.furthestTileCorner=function(t){const e=Math.round((t+45+360)%360/90)%4;return p[e]},t.getAABBPointSquareDist=function(t,e,n){let r=0;for(let i=0;i<2;++i){const o=n?n[i]:0;t[i]>o&&(r+=(t[i]-o)*(t[i]-o)),e[i]<o&&(r+=(o-e[i])*(o-e[i]))}return r},t.getAnchorAlignment=Tu,t.getAnchorJustification=ih,t.getBounds=function(t){let e=1/0,n=1/0,r=-1/0,i=-1/0;for(const o of t)e=Math.min(e,o.x),n=Math.min(n,o.y),r=Math.max(r,o.x),i=Math.max(i,o.y);return{min:new o(e,n),max:new o(r,i)}},t.getImage=Rt,t.getJSON=function(t,e){return Tt(x(t,{type:"json"}),e)},t.getMapSessionAPI=pt,t.getPerformanceMeasurement=zh,t.getProjection=function(t){const e=Zd[t.name];if(!e)throw new Error("Invalid projection name: "+t.name);return e.conic?function(t,e){if(e.parallels&&Math.abs(e.parallels[0]+e.parallels[1])<.01){let n=function(t){const e=Math.max(.01,Math.cos(h(t))),n=1/(2*Math.max(Math.PI*e,1/e));return{wrap:!0,project(t,r){const i=h(t)*e,o=Math.sin(h(r))/e;return{x:i*n+.5,y:-o*n+.5}},unproject(t,r){const i=-(r-.5)/n,o=y(d((t-.5)/n)/e,-180,180),a=Math.asin(y(i*e,-1,1)),s=y(d(a),-85.051129,Ka);return new Ba(o,s)}}}(e.parallels[0]);if("lambertConformalConic"===e.name){const{project:t,unproject:e}=Zd.mercator;n={wrap:!0,project:t,unproject:e}}return x({},t,e,n)}return x({},t,e)}(e,t):e},t.getRTLTextPluginStatus=Ji,t.getReferrer=St,t.getTilePoint=function(t,{x:e,y:n},r=0){return new o(((e-r)*t.scale-t.x)*ja,(n*t.scale-t.y)*ja)},t.getTileVec3=function(t,e,n=0){return ks(((e.x-n)*t.scale-t.x)*ja,(e.y*t.scale-t.y)*ja,$a(e.z,e.y))},t.getVideo=function(t,e){const n=s.document.createElement("video");n.muted=!0,n.onloadstart=function(){e(null,n)};for(let e=0;e<t.length;e++){const r=s.document.createElement("source");Mt(t[e])||(n.crossOrigin="Anonymous"),r.src=t[e],n.appendChild(r)}return{cancel:()=>{}}},t.identity=Ts,t.identity$1=Vs,t.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],p=e[11],f=e[12],m=e[13],g=e[14],y=e[15],v=n*s-r*a,_=n*l-i*a,b=n*c-o*a,x=r*l-i*s,w=r*c-o*s,E=i*c-o*l,C=u*m-h*f,S=u*g-d*f,T=u*y-p*f,O=h*g-d*m,I=h*y-p*m,A=d*y-p*g,M=v*A-_*I+b*O+x*T-w*S+E*C;return M?(t[0]=(s*A-l*I+c*O)*(M=1/M),t[1]=(i*I-r*A-o*O)*M,t[2]=(m*E-g*w+y*x)*M,t[3]=(d*w-h*E-p*x)*M,t[4]=(l*T-a*A-c*S)*M,t[5]=(n*A-i*T+o*S)*M,t[6]=(g*b-f*E-y*_)*M,t[7]=(u*E-d*b+p*_)*M,t[8]=(a*I-s*T+c*C)*M,t[9]=(r*T-n*I-o*C)*M,t[10]=(f*w-m*b+y*v)*M,t[11]=(h*b-u*w-p*v)*M,t[12]=(s*S-a*O-l*C)*M,t[13]=(n*O-r*S+i*C)*M,t[14]=(m*_-f*x-g*v)*M,t[15]=(u*x-h*_+d*v)*M,t):null},t.isMapAuthenticated=function(t){return ft.has(t)},t.isMapboxURL=et,t.latFromMercatorY=Za,t.len=Bs,t.length=Ms,t.length$1=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},t.loadVectorTile=kd,t.makeRequest=Tt,t.mercatorXfromLng=Va,t.mercatorYfromLat=qa,t.mercatorZfromAltitude=Ha,t.mul=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t},t.mul$1=Is,t.mul$2=zs,t.multiply=Os,t.multiply$1=Ds,t.nextPowerOfTwo=S,t.normalize=Ls,t.normalize$1=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a,t},t.number=rn,t.ortho=function(t,e,n,r,i,o,a){var s=1/(e-n),l=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*l,t[14]=(a+o)*c,t[15]=1,t},t.pbf=Vc,t.perspective=function(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(t[10]=(i+r)*(o=1/(r-i)),t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t},t.pick=function(t,e){const n={};for(let r=0;r<e.length;r++){const i=e[r];i in t&&(n[i]=t[i])}return n},t.plugin=to,t.pointGeometry=o,t.polygonIntersectsBox=gs,t.polygonIntersectsPolygon=as,t.polygonizeBounds=function(t,e,n=0,r=!0){const i=new o(n,n),a=t.sub(i),s=e.add(i),l=[a,new o(s.x,a.y),s,new o(a.x,s.y)];return r&&l.push(a),l},t.posAttributes=Kh,t.postMapLoadEvent=ht,t.postTurnstileEvent=ct,t.potpack=du,t.prevPowerOfTwo=function(t){return t<=1?1:Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},t.radToDeg=d,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.registerForPluginStateChange=function(t){return t({pluginStatus:Zi,pluginURL:$i}),Xi.on("pluginStateChange",t),t},t.removeAuthState=function(t){ft.delete(t)},t.renderColorRamp=il,t.rotateX=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+c*r,t[5]=a*i+u*r,t[6]=s*i+h*r,t[7]=l*i+d*r,t[8]=c*i-o*r,t[9]=u*i-a*r,t[10]=h*i-s*r,t[11]=d*i-l*r,t},t.rotateX$1=qs,t.rotateY=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],l=e[3],c=e[8],u=e[9],h=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-c*r,t[1]=a*i-u*r,t[2]=s*i-h*r,t[3]=l*i-d*r,t[8]=o*r+c*i,t[9]=a*r+u*i,t[10]=s*r+h*i,t[11]=l*r+d*i,t},t.rotateZ=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],l=e[3],c=e[4],u=e[5],h=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+c*r,t[1]=a*i+u*r,t[2]=s*i+h*r,t[3]=l*i+d*r,t[4]=c*i-o*r,t[5]=u*i-a*r,t[6]=h*i-s*r,t[7]=d*i-l*r,t},t.rotateZ$1=function(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=r*l+i*s,t[1]=i*l-r*s,t[2]=o*l+a*s,t[3]=a*l-o*s,t},t.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},t.scale$1=function(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.scale$2=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},t.scaleAndAdd=Rs,t.setCacheLimits=function(t,e){vt=t,_t=e},t.setRTLTextPlugin=function(t,e,n=!1){if(Zi===Vi||Zi===qi||Zi===Hi)throw new Error("setRTLTextPlugin cannot be called multiple times.");$i=q.resolveURL(t),Zi=Vi,Wi=e,Yi(),n||Qi()},t.smoothstep=function(t,e,n){return(n=y((n-t)/(e-t),0,1))*n*(3-2*n)},t.spec=Bt,t.storeAuthState=function(t,e){e?ft.add(t):ft.delete(t)},t.sub=Fs,t.subtract=Ps,t.symbolSize=Nc,t.tileTransform=Uh,t.transformMat3=function(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t},t.transformMat4=Us,t.transformMat4$1=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/(a=a||1),t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t},t.transformQuat=Ns,t.translate=function(t,e,n){var r,i,o,a,s,l,c,u,h,d,p,f,m=n[0],g=n[1],y=n[2];return e===t?(t[12]=e[0]*m+e[4]*g+e[8]*y+e[12],t[13]=e[1]*m+e[5]*g+e[9]*y+e[13],t[14]=e[2]*m+e[6]*g+e[10]*y+e[14],t[15]=e[3]*m+e[7]*g+e[11]*y+e[15]):(i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=e[9],p=e[10],f=e[11],t[0]=r=e[0],t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=c,t[7]=u,t[8]=h,t[9]=d,t[10]=p,t[11]=f,t[12]=r*m+s*g+h*y+e[12],t[13]=i*m+l*g+d*y+e[13],t[14]=o*m+c*g+p*y+e[14],t[15]=a*m+u*g+f*y+e[15]),t},t.triggerPluginCompletionEvent=Ki,t.uniqueId=E,t.validateCustomStyleLayer=function(t){const e=[],n=t.id;return void 0===n&&e.push({message:`layers.${n}: missing required property "id"`}),void 0===t.render&&e.push({message:`layers.${n}: missing required method "render"`}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:`layers.${n}: property "renderingMode" must be either "2d" or "3d"`}),e},t.validateFog=Zr,t.validateLight=Wr,t.validateStyle=Hr,t.values=b,t.vectorTile=rc,t.version=n,t.warnOnce=D,t.window=s,t.wrap=v})),i(0,(function(t){function e(t){const n=typeof t;if("number"===n||"boolean"===n||"string"===n||null==t)return JSON.stringify(t);if(Array.isArray(t)){let n="[";for(const r of t)n+=e(r)+",";return n+"]"}const r=Object.keys(t).sort();let i="{";for(let n=0;n<r.length;n++)i+=`${JSON.stringify(r[n])}:${e(t[r[n]])},`;return i+"}"}function n(n){let r="";for(const i of t.refProperties)r+="/"+e(n[i]);return r}class r{constructor(t){this.keyCache={},t&&this.replace(t)}replace(t){this._layerConfigs={},this._layers={},this.update(t,[])}update(e,r){for(const n of e)this._layerConfigs[n.id]=n,(this._layers[n.id]=t.createStyleLayer(n)).compileFilter(),this.keyCache[n.id]&&delete this.keyCache[n.id];for(const t of r)delete this.keyCache[t],delete this._layerConfigs[t],delete this._layers[t];this.familiesBySource={};const i=function(t,e){const r={};for(let i=0;i<t.length;i++){const o=e&&e[t[i].id]||n(t[i]);e&&(e[t[i].id]=o);let a=r[o];a||(a=r[o]=[]),a.push(t[i])}const i=[];for(const t in r)i.push(r[t]);return i}(t.values(this._layerConfigs),this.keyCache);for(const t of i){const e=t.map(t=>this._layers[t.id]),n=e[0];if("none"===n.visibility)continue;const r=n.source||"";let i=this.familiesBySource[r];i||(i=this.familiesBySource[r]={});const o=n.sourceLayer||"_geojsonTileLayer";let a=i[o];a||(a=i[o]=[]),a.push(e)}}}const{ImageBitmap:i}=t.window;class o{loadTile(e,n){const{uid:r,encoding:o,rawImageData:a,padding:s,buildQuadTree:l}=e,c=i&&a instanceof i?this.getImageData(a,s):a;n(null,new t.DEMData(r,c,o,s<1,l))}getImageData(e,n){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);const r=this.offscreenCanvasContext.getImageData(-n,-n,e.width+2*n,e.height+2*n);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:r.width,height:r.height},r.data)}}var a=function t(e,n){var r,i=e&&e.type;if("FeatureCollection"===i)for(r=0;r<e.features.length;r++)t(e.features[r],n);else if("GeometryCollection"===i)for(r=0;r<e.geometries.length;r++)t(e.geometries[r],n);else if("Feature"===i)t(e.geometry,n);else if("Polygon"===i)s(e.coordinates,n);else if("MultiPolygon"===i)for(r=0;r<e.coordinates.length;r++)s(e.coordinates[r],n);return e};function s(t,e){if(0!==t.length){l(t[0],e);for(var n=1;n<t.length;n++)l(t[n],!e)}}function l(t,e){for(var n=0,r=0,i=0,o=t.length,a=o-1;i<o;a=i++){var s=(t[i][0]-t[a][0])*(t[a][1]+t[i][1]),l=n+s;r+=Math.abs(n)>=Math.abs(s)?n-l+s:s-l+n,n=l}n+r>=0!=!!e&&t.reverse()}const c=t.vectorTile.VectorTileFeature.prototype.toGeoJSON;class u{constructor(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))}loadGeometry(){if(1===this._feature.type){const e=[];for(const n of this._feature.geometry)e.push([new t.pointGeometry(n[0],n[1])]);return e}{const e=[];for(const n of this._feature.geometry){const r=[];for(const e of n)r.push(new t.pointGeometry(e[0],e[1]));e.push(r)}return e}}toGeoJSON(t,e,n){return c.call(this,t,e,n)}}class h{constructor(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e}feature(t){return new u(this._features[t])}}var d=t.vectorTile.VectorTileFeature,p=f;function f(t,e){this.options=e||{},this.features=t,this.length=t.length}function m(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}f.prototype.feature=function(t){return new m(this.features[t],this.options.extent)},m.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var n=0;n<e.length;n++){for(var r=e[n],i=[],o=0;o<r.length;o++)i.push(new t.pointGeometry(r[o][0],r[o][1]));this.geometry.push(i)}return this.geometry},m.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var l=a[s];e=Math.min(e,l.x),n=Math.max(n,l.x),r=Math.min(r,l.y),i=Math.max(i,l.y)}return[e,r,n,i]},m.prototype.toGeoJSON=d.prototype.toGeoJSON;var g=v,y=p;function v(e){var n=new t.pbf;return function(t,e){for(var n in t.layers)e.writeMessage(3,_,t.layers[n])}(e,n),n.finish()}function _(t,e){var n;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<t.length;n++)r.feature=t.feature(n),e.writeMessage(2,b,r);var i=r.keys;for(n=0;n<i.length;n++)e.writeStringField(3,i[n]);var o=r.values;for(n=0;n<o.length;n++)e.writeMessage(4,S,o[n])}function b(t,e){var n=t.feature;void 0!==n.id&&e.writeVarintField(1,n.id),e.writeMessage(2,x,t),e.writeVarintField(3,n.type),e.writeMessage(4,C,n)}function x(t,e){var n=t.feature,r=t.keys,i=t.values,o=t.keycache,a=t.valuecache;for(var s in n.properties){var l=n.properties[s],c=o[s];if(null!==l){void 0===c&&(r.push(s),o[s]=c=r.length-1),e.writeVarint(c);var u=typeof l;"string"!==u&&"boolean"!==u&&"number"!==u&&(l=JSON.stringify(l));var h=u+":"+l,d=a[h];void 0===d&&(i.push(l),a[h]=d=i.length-1),e.writeVarint(d)}}}function w(t,e){return(e<<3)+(7&t)}function E(t){return t<<1^t>>31}function C(t,e){for(var n=t.loadGeometry(),r=t.type,i=0,o=0,a=n.length,s=0;s<a;s++){var l=n[s],c=1;1===r&&(c=l.length),e.writeVarint(w(1,c));for(var u=3===r?l.length-1:l.length,h=0;h<u;h++){1===h&&1!==r&&e.writeVarint(w(2,u-1));var d=l[h].x-i,p=l[h].y-o;e.writeVarint(E(d)),e.writeVarint(E(p)),i+=d,o+=p}3===r&&e.writeVarint(w(7,1))}}function S(t,e){var n=typeof t;"string"===n?e.writeStringField(1,t):"boolean"===n?e.writeBooleanField(7,t):"number"===n&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function T(t,e,n,r,i,o){if(i-r<=n)return;const a=r+i>>1;(function t(e,n,r,i,o,a){for(;o>i;){if(o-i>600){const s=o-i+1,l=r-i+1,c=Math.log(s),u=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*u*(s-u)/s)*(l-s/2<0?-1:1);t(e,n,r,Math.max(i,Math.floor(r-l*u/s+h)),Math.min(o,Math.floor(r+(s-l)*u/s+h)),a)}const s=n[2*r+a];let l=i,c=o;for(O(e,n,i,r),n[2*o+a]>s&&O(e,n,i,o);l<c;){for(O(e,n,l,c),l++,c--;n[2*l+a]<s;)l++;for(;n[2*c+a]>s;)c--}n[2*i+a]===s?O(e,n,i,c):(c++,O(e,n,c,o)),c<=r&&(i=c+1),r<=c&&(o=c-1)}})(t,e,a,r,i,o%2),T(t,e,n,r,a-1,o+1),T(t,e,n,a+1,i,o+1)}function O(t,e,n,r){I(t,n,r),I(e,2*n,2*r),I(e,2*n+1,2*r+1)}function I(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function A(t,e,n,r){const i=t-n,o=e-r;return i*i+o*o}g.fromVectorTileJs=v,g.fromGeojsonVt=function(t,e){e=e||{};var n={};for(var r in t)n[r]=new p(t[r].features,e),n[r].name=r,n[r].version=e.version,n[r].extent=e.extent;return v({layers:n})},g.GeoJSONWrapper=y;const M=t=>t[0],k=t=>t[1];class P{constructor(t,e=M,n=k,r=64,i=Float64Array){this.nodeSize=r,this.points=t;const o=t.length<65536?Uint16Array:Uint32Array,a=this.ids=new o(t.length),s=this.coords=new i(2*t.length);for(let r=0;r<t.length;r++)a[r]=r,s[2*r]=e(t[r]),s[2*r+1]=n(t[r]);T(a,s,r,0,a.length-1,0)}range(t,e,n,r){return function(t,e,n,r,i,o,a){const s=[0,t.length-1,0],l=[];let c,u;for(;s.length;){const h=s.pop(),d=s.pop(),p=s.pop();if(d-p<=a){for(let a=p;a<=d;a++)c=e[2*a],u=e[2*a+1],c>=n&&c<=i&&u>=r&&u<=o&&l.push(t[a]);continue}const f=Math.floor((p+d)/2);c=e[2*f],u=e[2*f+1],c>=n&&c<=i&&u>=r&&u<=o&&l.push(t[f]);const m=(h+1)%2;(0===h?n<=c:r<=u)&&(s.push(p),s.push(f-1),s.push(m)),(0===h?i>=c:o>=u)&&(s.push(f+1),s.push(d),s.push(m))}return l}(this.ids,this.coords,t,e,n,r,this.nodeSize)}within(t,e,n){return function(t,e,n,r,i,o){const a=[0,t.length-1,0],s=[],l=i*i;for(;a.length;){const c=a.pop(),u=a.pop(),h=a.pop();if(u-h<=o){for(let i=h;i<=u;i++)A(e[2*i],e[2*i+1],n,r)<=l&&s.push(t[i]);continue}const d=Math.floor((h+u)/2),p=e[2*d],f=e[2*d+1];A(p,f,n,r)<=l&&s.push(t[d]);const m=(c+1)%2;(0===c?n-i<=p:r-i<=f)&&(a.push(h),a.push(d-1),a.push(m)),(0===c?n+i>=p:r+i>=f)&&(a.push(d+1),a.push(u),a.push(m))}return s}(this.ids,this.coords,t,e,n,this.nodeSize)}}const D={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},R=Math.fround||(L=new Float32Array(1),t=>(L[0]=+t,L[0]));var L;class N{constructor(t){this.options=q(Object.create(D),t),this.trees=new Array(this.options.maxZoom+1)}load(t){const{log:e,minZoom:n,maxZoom:r,nodeSize:i}=this.options;e&&console.time("total time");const o=`prepare ${t.length} points`;e&&console.time(o),this.points=t;let a=[];for(let e=0;e<t.length;e++)t[e].geometry&&a.push(F(t[e],e));this.trees[r+1]=new P(a,H,W,i,Float32Array),e&&console.timeEnd(o);for(let t=r;t>=n;t--){const n=+Date.now();a=this._cluster(a,t),this.trees[t]=new P(a,H,W,i,Float32Array),e&&console.log("z%d: %d clusters in %dms",t,a.length,+Date.now()-n)}return e&&console.timeEnd("total time"),this}getClusters(t,e){let n=((t[0]+180)%360+360)%360-180;const r=Math.max(-90,Math.min(90,t[1]));let i=180===t[2]?180:((t[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,i=180;else if(n>i){const t=this.getClusters([n,r,180,o],e),a=this.getClusters([-180,r,i,o],e);return t.concat(a)}const a=this.trees[this._limitZoom(e)],s=a.range(U(n),G(o),U(i),G(r)),l=[];for(const t of s){const e=a.points[t];l.push(e.numPoints?z(e):this.points[e.index])}return l}getChildren(t){const e=this._getOriginId(t),n=this._getOriginZoom(t),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);const o=i.points[e];if(!o)throw new Error(r);const a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=i.within(o.x,o.y,a),l=[];for(const e of s){const n=i.points[e];n.parentId===t&&l.push(n.numPoints?z(n):this.points[n.index])}if(0===l.length)throw new Error(r);return l}getLeaves(t,e,n){const r=[];return this._appendLeaves(r,t,e=e||10,n=n||0,0),r}getTile(t,e,n){const r=this.trees[this._limitZoom(t)],i=Math.pow(2,t),{extent:o,radius:a}=this.options,s=a/o,l=(n-s)/i,c=(n+1+s)/i,u={features:[]};return this._addTileFeatures(r.range((e-s)/i,l,(e+1+s)/i,c),r.points,e,n,i,u),0===e&&this._addTileFeatures(r.range(1-s/i,l,1,c),r.points,i,n,i,u),e===i-1&&this._addTileFeatures(r.range(0,l,s/i,c),r.points,-1,n,i,u),u.features.length?u:null}getClusterExpansionZoom(t){let e=this._getOriginZoom(t)-1;for(;e<=this.options.maxZoom;){const n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e}_appendLeaves(t,e,n,r,i){const o=this.getChildren(e);for(const e of o){const o=e.properties;if(o&&o.cluster?i+o.point_count<=r?i+=o.point_count:i=this._appendLeaves(t,o.cluster_id,n,r,i):i<r?i++:t.push(e),t.length===n)break}return i}_addTileFeatures(t,e,n,r,i,o){for(const a of t){const t=e[a],s=t.numPoints;let l,c,u;if(s)l=B(t),c=t.x,u=t.y;else{const e=this.points[t.index];l=e.properties,c=U(e.geometry.coordinates[0]),u=G(e.geometry.coordinates[1])}const h={type:1,geometry:[[Math.round(this.options.extent*(c*i-n)),Math.round(this.options.extent*(u*i-r))]],tags:l};let d;s?d=t.id:this.options.generateId?d=t.index:this.points[t.index].id&&(d=this.points[t.index].id),void 0!==d&&(h.id=d),o.features.push(h)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(+t,this.options.maxZoom+1))}_cluster(t,e){const n=[],{radius:r,extent:i,reduce:o,minPoints:a}=this.options,s=r/(i*Math.pow(2,e));for(let r=0;r<t.length;r++){const i=t[r];if(i.zoom<=e)continue;i.zoom=e;const l=this.trees[e+1],c=l.within(i.x,i.y,s),u=i.numPoints||1;let h=u;for(const t of c){const n=l.points[t];n.zoom>e&&(h+=n.numPoints||1)}if(h>u&&h>=a){let t=i.x*u,a=i.y*u,s=o&&u>1?this._map(i,!0):null;const d=(r<<5)+(e+1)+this.points.length;for(const n of c){const r=l.points[n];if(r.zoom<=e)continue;r.zoom=e;const c=r.numPoints||1;t+=r.x*c,a+=r.y*c,r.parentId=d,o&&(s||(s=this._map(i,!0)),o(s,this._map(r)))}i.parentId=d,n.push(j(t/h,a/h,d,h,s))}else if(n.push(i),h>1)for(const t of c){const r=l.points[t];r.zoom<=e||(r.zoom=e,n.push(r))}}return n}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,e){if(t.numPoints)return e?q({},t.properties):t.properties;const n=this.points[t.index].properties,r=this.options.map(n);return e&&r===n?q({},r):r}}function j(t,e,n,r,i){return{x:R(t),y:R(e),zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}}function F(t,e){const[n,r]=t.geometry.coordinates;return{x:R(U(n)),y:R(G(r)),zoom:1/0,index:e,parentId:-1}}function z(t){return{type:"Feature",id:t.id,properties:B(t),geometry:{type:"Point",coordinates:[(e=t.x,360*(e-.5)),V(t.y)]}};var e}function B(t){const e=t.numPoints,n=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return q(q({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function U(t){return t/360+.5}function G(t){const e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function V(t){const e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function q(t,e){for(const n in e)t[n]=e[n];return t}function H(t){return t.x}function W(t){return t.y}function Z(t,e,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var l=((t-n)*a+(e-r)*s)/(a*a+s*s);l>1?(n=i,r=o):l>0&&(n+=a*l,r+=s*l)}return(a=t-n)*a+(s=e-r)*s}function $(t,e,n,r){var i={id:void 0===t?null:t,type:e,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)K(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<e.length;r++)K(t,e[r]);else if("MultiPolygon"===n)for(r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++)K(t,e[r][i])}(i),i}function K(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function Y(t,e,n,r){if(e.geometry){var i=e.geometry.coordinates,o=e.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],l=e.id;if(n.promoteId?l=e.properties[n.promoteId]:n.generateId&&(l=r||0),"Point"===o)X(i,s);else if("MultiPoint"===o)for(var c=0;c<i.length;c++)X(i[c],s);else if("LineString"===o)J(i,s,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(c=0;c<i.length;c++)J(i[c],s=[],a,!1),t.push($(l,"LineString",s,e.properties));return}Q(i,s,a,!1)}else if("Polygon"===o)Q(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(c=0;c<e.geometry.geometries.length;c++)Y(t,{id:l,geometry:e.geometry.geometries[c],properties:e.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(c=0;c<i.length;c++){var u=[];Q(i[c],u,a,!0),s.push(u)}}t.push($(l,o,s,e.properties))}}function X(t,e){e.push(tt(t[0])),e.push(et(t[1])),e.push(0)}function J(t,e,n,r){for(var i,o,a=0,s=0;s<t.length;s++){var l=tt(t[s][0]),c=et(t[s][1]);e.push(l),e.push(c),e.push(0),s>0&&(a+=r?(i*c-l*o)/2:Math.sqrt(Math.pow(l-i,2)+Math.pow(c-o,2))),i=l,o=c}var u=e.length-3;e[2]=1,function t(e,n,r,i){for(var o,a=i,s=r-n>>1,l=r-n,c=e[n],u=e[n+1],h=e[r],d=e[r+1],p=n+3;p<r;p+=3){var f=Z(e[p],e[p+1],c,u,h,d);if(f>a)o=p,a=f;else if(f===a){var m=Math.abs(p-s);m<l&&(o=p,l=m)}}a>i&&(o-n>3&&t(e,n,o,i),e[o+2]=a,r-o>3&&t(e,o,r,i))}(e,0,u,n),e[u+2]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function Q(t,e,n,r){for(var i=0;i<t.length;i++){var o=[];J(t[i],o,n,r),e.push(o)}}function tt(t){return t/360+.5}function et(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function nt(t,e,n,r,i,o,a,s){if(r/=e,o>=(n/=e)&&a<r)return t;if(a<n||o>=r)return null;for(var l=[],c=0;c<t.length;c++){var u=t[c],h=u.geometry,d=u.type,p=0===i?u.minX:u.minY,f=0===i?u.maxX:u.maxY;if(p>=n&&f<r)l.push(u);else if(!(f<n||p>=r)){var m=[];if("Point"===d||"MultiPoint"===d)rt(h,m,n,r,i);else if("LineString"===d)it(h,m,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===d)at(h,m,n,r,i,!1);else if("Polygon"===d)at(h,m,n,r,i,!0);else if("MultiPolygon"===d)for(var g=0;g<h.length;g++){var y=[];at(h[g],y,n,r,i,!0),y.length&&m.push(y)}if(m.length){if(s.lineMetrics&&"LineString"===d){for(g=0;g<m.length;g++)l.push($(u.id,d,m[g],u.tags));continue}"LineString"!==d&&"MultiLineString"!==d||(1===m.length?(d="LineString",m=m[0]):d="MultiLineString"),"Point"!==d&&"MultiPoint"!==d||(d=3===m.length?"Point":"MultiPoint"),l.push($(u.id,d,m,u.tags))}}}return l.length?l:null}function rt(t,e,n,r,i){for(var o=0;o<t.length;o+=3){var a=t[o+i];a>=n&&a<=r&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function it(t,e,n,r,i,o,a){for(var s,l,c=ot(t),u=0===i?lt:ct,h=t.start,d=0;d<t.length-3;d+=3){var p=t[d],f=t[d+1],m=t[d+2],g=t[d+3],y=t[d+4],v=0===i?p:f,_=0===i?g:y,b=!1;a&&(s=Math.sqrt(Math.pow(p-g,2)+Math.pow(f-y,2))),v<n?_>n&&(l=u(c,p,f,g,y,n),a&&(c.start=h+s*l)):v>r?_<r&&(l=u(c,p,f,g,y,r),a&&(c.start=h+s*l)):st(c,p,f,m),_<n&&v>=n&&(l=u(c,p,f,g,y,n),b=!0),_>r&&v<=r&&(l=u(c,p,f,g,y,r),b=!0),!o&&b&&(a&&(c.end=h+s*l),e.push(c),c=ot(t)),a&&(h+=s)}var x=t.length-3;p=t[x],f=t[x+1],m=t[x+2],(v=0===i?p:f)>=n&&v<=r&&st(c,p,f,m),x=c.length-3,o&&x>=3&&(c[x]!==c[0]||c[x+1]!==c[1])&&st(c,c[0],c[1],c[2]),c.length&&e.push(c)}function ot(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function at(t,e,n,r,i,o){for(var a=0;a<t.length;a++)it(t[a],e,n,r,i,o,!1)}function st(t,e,n,r){t.push(e),t.push(n),t.push(r)}function lt(t,e,n,r,i,o){var a=(o-e)/(r-e);return t.push(o),t.push(n+(i-n)*a),t.push(1),a}function ct(t,e,n,r,i,o){var a=(o-n)/(i-n);return t.push(e+(r-e)*a),t.push(o),t.push(1),a}function ut(t,e){for(var n=[],r=0;r<t.length;r++){var i,o=t[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=ht(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(ht(o.geometry[s],e))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var l=[],c=0;c<o.geometry[s].length;c++)l.push(ht(o.geometry[s][c],e));i.push(l)}n.push($(o.id,a,i,o.tags))}return n}function ht(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var r=0;r<t.length;r+=3)n.push(t[r]+e,t[r+1],t[r+2]);return n}function dt(t,e){if(t.transformed)return t;var n,r,i,o=1<<t.z,a=t.x,s=t.y;for(n=0;n<t.features.length;n++){var l=t.features[n],c=l.geometry,u=l.type;if(l.geometry=[],1===u)for(r=0;r<c.length;r+=2)l.geometry.push(pt(c[r],c[r+1],e,o,a,s));else for(r=0;r<c.length;r++){var h=[];for(i=0;i<c[r].length;i+=2)h.push(pt(c[r][i],c[r][i+1],e,o,a,s));l.geometry.push(h)}}return t.transformed=!0,t}function pt(t,e,n,r,i,o){return[Math.round(n*(t*r-i)),Math.round(n*(e*r-o))]}function ft(t,e,n,r,i){for(var o=e===i.maxZoom?0:i.tolerance/((1<<e)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,mt(a,t[s],o,i);var l=t[s].minX,c=t[s].minY,u=t[s].maxX,h=t[s].maxY;l<a.minX&&(a.minX=l),c<a.minY&&(a.minY=c),u>a.maxX&&(a.maxX=u),h>a.maxY&&(a.maxY=h)}return a}function mt(t,e,n,r){var i=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)gt(a,i,t,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)gt(a,i[s],t,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<i.length;l++){var c=i[l];for(s=0;s<c.length;s++)gt(a,c[s],t,n,!0,0===s)}if(a.length){var u=e.tags||null;if("LineString"===o&&r.lineMetrics){for(var h in u={},e.tags)u[h]=e.tags[h];u.mapbox_clip_start=i.start/i.size,u.mapbox_clip_end=i.end/i.size}var d={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:u};null!==e.id&&(d.id=e.id),t.features.push(d)}}function gt(t,e,n,r,i,o){var a=r*r;if(r>0&&e.size<(i?a:r))n.numPoints+=e.length/3;else{for(var s=[],l=0;l<e.length;l+=3)(0===r||e[l+2]>a)&&(n.numSimplified++,s.push(e[l]),s.push(e[l+1])),n.numPoints++;i&&function(t,e){for(var n=0,r=0,i=t.length,o=i-2;r<i;o=r,r+=2)n+=(t[r]-t[o])*(t[r+1]+t[o+1]);if(n>0===e)for(r=0,i=t.length;r<i/2;r+=2){var a=t[r],s=t[r+1];t[r]=t[i-2-r],t[r+1]=t[i-1-r],t[i-2-r]=a,t[i-1-r]=s}}(s,o),t.push(s)}}function yt(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(t,e){var n=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)Y(n,t.features[r],e,r);else Y(n,"Feature"===t.type?t:{geometry:t},e);return n}(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(r=function(t,e){var n=e.buffer/e.extent,r=t,i=nt(t,1,-1-n,n,0,-1,2,e),o=nt(t,1,1-n,2+n,0,-1,2,e);return(i||o)&&(r=nt(t,1,-n,1+n,0,-1,2,e)||[],i&&(r=ut(i,1).concat(r)),o&&(r=r.concat(ut(o,-1)))),r}(r,e)).length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function vt(t,e,n){return 32*((1<<t)*n+e)+t}function _t(t,e){const n=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);const r=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!r)return e(null,null);const i=new h(r.features);let o=g(i);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),e(null,{vectorTile:i,rawData:o.buffer})}yt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},yt.prototype.splitTile=function(t,e,n,r,i,o,a){for(var s=[t,e,n,r],l=this.options,c=l.debug;s.length;){r=s.pop(),n=s.pop(),e=s.pop(),t=s.pop();var u=1<<e,h=vt(e,n,r),d=this.tiles[h];if(!d&&(c>1&&console.time("creation"),d=this.tiles[h]=ft(t,e,n,r,l),this.tileCoords.push({z:e,x:n,y:r}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,r,d.numFeatures,d.numPoints,d.numSimplified),console.timeEnd("creation"));var p="z"+e;this.stats[p]=(this.stats[p]||0)+1,this.total++}if(d.source=t,i){if(e===l.maxZoom||e===i)continue;var f=1<<i-e;if(n!==Math.floor(o/f)||r!==Math.floor(a/f))continue}else if(e===l.indexMaxZoom||d.numPoints<=l.indexMaxPoints)continue;if(d.source=null,0!==t.length){c>1&&console.time("clipping");var m,g,y,v,_,b,x=.5*l.buffer/l.extent,w=.5-x,E=.5+x,C=1+x;m=g=y=v=null,_=nt(t,u,n-x,n+E,0,d.minX,d.maxX,l),b=nt(t,u,n+w,n+C,0,d.minX,d.maxX,l),t=null,_&&(m=nt(_,u,r-x,r+E,1,d.minY,d.maxY,l),g=nt(_,u,r+w,r+C,1,d.minY,d.maxY,l),_=null),b&&(y=nt(b,u,r-x,r+E,1,d.minY,d.maxY,l),v=nt(b,u,r+w,r+C,1,d.minY,d.maxY,l),b=null),c>1&&console.timeEnd("clipping"),s.push(m||[],e+1,2*n,2*r),s.push(g||[],e+1,2*n,2*r+1),s.push(y||[],e+1,2*n+1,2*r),s.push(v||[],e+1,2*n+1,2*r+1)}}},yt.prototype.getTile=function(t,e,n){var r=this.options,i=r.extent,o=r.debug;if(t<0||t>24)return null;var a=1<<t,s=vt(t,e=(e%a+a)%a,n);if(this.tiles[s])return dt(this.tiles[s],i);o>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var l,c=t,u=e,h=n;!l&&c>0;)c--,u=Math.floor(u/2),h=Math.floor(h/2),l=this.tiles[vt(c,u,h)];return l&&l.source?(o>1&&console.log("found parent tile z%d-%d-%d",c,u,h),o>1&&console.time("drilling down"),this.splitTile(l.source,c,u,h,t,e,n),o>1&&console.timeEnd("drilling down"),this.tiles[s]?dt(this.tiles[s],i):null):null};class bt extends t.VectorTileWorkerSource{constructor(t,e,n,r,i){super(t,e,n,r,_t),i&&(this.loadGeoJSON=i)}loadData(e,n){const r=e&&e.request,i=r&&r.collectResourceTiming;this.loadGeoJSON(e,(o,s)=>{if(o||!s)return n(o);if("object"!=typeof s)return n(new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`));{a(s,!0);try{if(e.filter){const n=t.createExpression(e.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===n.result)throw new Error(n.value.map(t=>`${t.key}: ${t.message}`).join(", "));const r=s.features.filter(t=>n.value.evaluate({zoom:0},t));s={type:"FeatureCollection",features:r}}this._geoJSONIndex=e.cluster?new N(function({superclusterOptions:e,clusterProperties:n}){if(!n||!e)return e;const r={},i={},o={accumulated:null,zoom:0},a={properties:null},s=Object.keys(n);for(const e of s){const[o,a]=n[e],s=t.createExpression(a),l=t.createExpression("string"==typeof o?[o,["accumulated"],["get",e]]:o);r[e]=s.value,i[e]=l.value}return e.map=t=>{a.properties=t;const e={};for(const t of s)e[t]=r[t].evaluate(o,a);return e},e.reduce=(t,e)=>{a.properties=e;for(const e of s)o.accumulated=t[e],t[e]=i[e].evaluate(o,a)},e}(e)).load(s.features):function(t,e){return new yt(t,e)}(s,e.geojsonVtOptions)}catch(o){return n(o)}this.loaded={};const l={};if(i){const n=t.getPerformanceMeasurement(r);n&&(l.resourceTiming={},l.resourceTiming[e.source]=JSON.parse(JSON.stringify(n)))}n(null,l)}})}reloadTile(t,e){const n=this.loaded;return n&&n[t.uid]?super.reloadTile(t,e):this.loadTile(t,e)}loadGeoJSON(e,n){if(e.request)t.getJSON(e.request,n);else{if("string"!=typeof e.data)return n(new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`));try{return n(null,JSON.parse(e.data))}catch(t){return n(new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(t,e){try{e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))}catch(t){e(t)}}getClusterChildren(t,e){try{e(null,this._geoJSONIndex.getChildren(t.clusterId))}catch(t){e(t)}}getClusterLeaves(t,e){try{e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))}catch(t){e(t)}}}class xt{constructor(e){this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=t.getProjection({name:"mercator"}),this.workerSourceTypes={vector:t.VectorTileWorkerSource,geojson:bt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(t,e)=>{if(this.workerSourceTypes[t])throw new Error(`Worker source with name "${t}" already registered.`);this.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=e=>{if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}}clearCaches(t,e,n){delete this.layerIndexes[t],delete this.availableImages[t],delete this.workerSources[t],delete this.demWorkerSources[t],n()}checkIfReady(t,e,n){n()}setReferrer(t,e){this.referrer=e}spriteLoaded(e,n){this.isSpriteLoaded[e]=n;for(const r in this.workerSources[e]){const i=this.workerSources[e][r];for(const e in i)i[e]instanceof t.VectorTileWorkerSource&&(i[e].isSpriteLoaded=n,i[e].fire(new t.Event("isSpriteLoaded")))}}setImages(t,e,n){this.availableImages[t]=e;for(const n in this.workerSources[t]){const r=this.workerSources[t][n];for(const t in r)r[t].availableImages=e}n()}enableTerrain(t,e,n){this.terrain=e,n()}setProjection(e,n){this.projections[e]=t.getProjection(n)}setLayers(t,e,n){this.getLayerIndex(t).replace(e),n()}updateLayers(t,e,n){this.getLayerIndex(t).update(e.layers,e.removedIds),n()}loadTile(e,n,r){const i=this.enableTerrain?t.extend({enableTerrain:this.terrain},n):n;i.projection=this.projections[e]||this.defaultProjection,this.getWorkerSource(e,n.type,n.source).loadTile(i,r)}loadDEMTile(e,n,r){const i=this.enableTerrain?t.extend({buildQuadTree:this.terrain},n):n;this.getDEMWorkerSource(e,n.source).loadTile(i,r)}reloadTile(e,n,r){const i=this.enableTerrain?t.extend({enableTerrain:this.terrain},n):n;i.projection=this.projections[e]||this.defaultProjection,this.getWorkerSource(e,n.type,n.source).reloadTile(i,r)}abortTile(t,e,n){this.getWorkerSource(t,e.type,e.source).abortTile(e,n)}removeTile(t,e,n){this.getWorkerSource(t,e.type,e.source).removeTile(e,n)}removeSource(t,e,n){if(!this.workerSources[t]||!this.workerSources[t][e.type]||!this.workerSources[t][e.type][e.source])return;const r=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==r.removeSource?r.removeSource(e,n):n()}loadWorkerSource(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t.toString())}}syncRTLPluginState(e,n,r){try{t.plugin.setState(n);const e=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=e){this.self.importScripts(e);const n=t.plugin.isParsed();r(n?void 0:new Error("RTL Text Plugin failed to import scripts from "+e),n)}}catch(t){r(t.toString())}}getAvailableImages(t){let e=this.availableImages[t];return e||(e=[]),e}getLayerIndex(t){let e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new r),e}getWorkerSource(t,e,n){return this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),this.workerSources[t][e][n]||(this.workerSources[t][e][n]=new this.workerSourceTypes[e]({send:(e,n,r,i,o,a)=>{this.actor.send(e,n,r,t,o,a)},scheduler:this.actor.scheduler},this.getLayerIndex(t),this.getAvailableImages(t),this.isSpriteLoaded[t])),this.workerSources[t][e][n]}getDEMWorkerSource(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new o),this.demWorkerSources[t][e]}enforceCacheSizeLimit(e,n){t.enforceCacheSizeLimit(n)}getWorkerPerformanceMetrics(t,e,n){n(void 0,void 0)}}return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new xt(self)),xt})),i(0,(function(t){var e=n;function n(t){return!function(t){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{e=new Worker(r),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(r),t}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var t=document.createElement("canvas");t.width=t.height=1;var e=t.getContext("2d");if(!e)return!1;var n=e.getImageData(0,0,1,1);return n&&n.width===t.width}()?(void 0===r[e=t&&t.failIfMajorPerformanceCaveat]&&(r[e]=function(t){var e,r=function(t){var e=document.createElement("canvas"),r=Object.create(n.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=t,e.getContext("webgl",r)||e.getContext("experimental-webgl",r)}(t);if(!r)return!1;try{e=r.createShader(r.VERTEX_SHADER)}catch(t){return!1}return!(!e||r.isContextLost())&&(r.shaderSource(e,"void main() {}"),r.compileShader(e),!0===r.getShaderParameter(e,r.COMPILE_STATUS))}(e)),r[e]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var e}(t)}var r={};function i(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!i(t[n],e[n]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!i(t[n],e[n]))return!1;return!0}return t===e}n.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const o={create:function(e,n,r){const i=t.window.document.createElement(e);return void 0!==n&&(i.className=n),r&&r.appendChild(i),i},createNS:function(e,n){return t.window.document.createElementNS(e,n)}},a=t.window.document&&t.window.document.documentElement.style,s=a&&void 0!==a.userSelect?"userSelect":"WebkitUserSelect";let l;o.disableDrag=function(){a&&s&&(l=a[s],a[s]="none")},o.enableDrag=function(){a&&s&&(a[s]=l)},o.setTransform=function(t,e){t.style.transform=e};let c=!1;try{const e=Object.defineProperty({},"passive",{get(){c=!0}});t.window.addEventListener("test",e,e),t.window.removeEventListener("test",e,e)}catch(t){c=!1}o.addEventListener=function(t,e,n,r={}){t.addEventListener(e,n,"passive"in r&&c?r:r.capture)},o.removeEventListener=function(t,e,n,r={}){t.removeEventListener(e,n,"passive"in r&&c?r:r.capture)};const u=function(e){e.preventDefault(),e.stopPropagation(),t.window.removeEventListener("click",u,!0)};function h(e,n,r){const i=e.offsetWidth===n.width?1:e.offsetWidth/n.width;return new t.pointGeometry((r.clientX-n.left)*i,(r.clientY-n.top)*i)}function d(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*o-i*r;return a?(t[0]=o*(a=1/a),t[1]=-r*a,t[2]=-i*a,t[3]=n*a,t):null}o.suppressClick=function(){t.window.addEventListener("click",u,!0),t.window.setTimeout(()=>{t.window.removeEventListener("click",u,!0)},0)},o.mousePos=function(t,e){const n=t.getBoundingClientRect();return h(t,n,e)},o.touchPos=function(t,e){const n=t.getBoundingClientRect(),r=[];for(let i=0;i<e.length;i++)r.push(h(t,n,e[i]));return r},o.mouseButton=function(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},o.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};class p{constructor(t,e){this.pos=t,this.dir=e}intersectsPlane(e,n,r){const i=t.dot(n,this.dir);if(Math.abs(i)<1e-6)return!1;const o=t.dot(t.sub(t.create(),e,this.pos),n)/i,a=t.scaleAndAdd(t.create(),this.pos,this.dir,o);return t.copy(r,a),!0}}class f{constructor(t,e){this.points=t,this.planes=e}static fromInvProjectionMatrix(e,n,r){const i=Math.pow(2,r),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(r=>{const o=t.transformMat4([],r,e),a=1/o[3]/n*i;return t.mul(o,o,[a,a,1/o[3],a])}),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(e=>{const n=t.sub([],o[e[0]],o[e[1]]),r=t.sub([],o[e[2]],o[e[1]]),i=t.normalize([],t.cross([],n,r)),a=-t.dot(i,o[e[1]]);return i.concat(a)});return new f(o,a)}}class m{constructor(e,n){this.min=e,this.max=n,this.center=t.scale([],t.add([],this.min,this.max),.5)}quadrant(e){const n=[e%2==0,e<2],r=t.clone(this.min),i=t.clone(this.max);for(let t=0;t<n.length;t++)r[t]=n[t]?this.min[t]:this.center[t],i[t]=n[t]?this.center[t]:this.max[t];return i[2]=this.max[2],new m(r,i)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}distanceZ(t){return Math.max(Math.min(this.max[2],t[2]),this.min[2])-t[2]}intersects(e){const n=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let r=!0;for(let i=0;i<e.planes.length;i++){const o=e.planes[i];let a=0;for(let e=0;e<n.length;e++)a+=t.dot$1(o,n[e])>=0;if(0===a)return 0;a!==n.length&&(r=!1)}if(r)return 2;for(let t=0;t<3;t++){let n=Number.MAX_VALUE,r=-Number.MAX_VALUE;for(let i=0;i<e.points.length;i++){const o=e.points[i][t]-this.min[t];n=Math.min(n,o),r=Math.max(r,o)}if(r<0||n>this.max[t]-this.min[t])return 0}return 1}}function g(t){const{userImage:e}=t;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}class y extends t.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:t,callback:e}of this.requestors)this._notify(t,e);this.requestors=[]}}getImage(t){return this.images[t]}addImage(t,e){this._validate(t,e)&&(this.images[t]=e)}_validate(e,n){let r=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "stretchX" value`))),r=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "stretchY" value`))),r=!1),this._validateContent(n.content,n)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "content" value`))),r=!1),r}_validateStretch(t,e){if(!t)return!0;let n=0;for(const r of t){if(r[0]<n||r[1]<r[0]||e<r[1])return!1;n=r[1]}return!0}_validateContent(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))}updateImage(t,e){e.version=this.images[t].version+1,this.images[t]=e,this.updatedImages[t]=!0}removeImage(t){const e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t,e){let n=!0;if(!this.isLoaded())for(const e of t)this.images[e]||(n=!1);this.isLoaded()||n?this._notify(t,e):this.requestors.push({ids:t,callback:e})}_notify(e,n){const r={};for(const n of e){this.images[n]||this.fire(new t.Event("styleimagemissing",{id:n}));const e=this.images[n];e?r[n]={data:e.data.clone(),pixelRatio:e.pixelRatio,sdf:e.sdf,version:e.version,stretchX:e.stretchX,stretchY:e.stretchY,content:e.content,hasRenderCallback:Boolean(e.userImage&&e.userImage.render)}:t.warnOnce(`Image "${n}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}n(null,r)}getPixelSize(){const{width:t,height:e}=this.atlasImage;return{width:t,height:e}}getPattern(e){const n=this.patterns[e],r=this.getImage(e);if(!r)return null;if(n&&n.position.version===r.version)return n.position;if(n)n.position.version=r.version;else{const n={w:r.data.width+2,h:r.data.height+2,x:0,y:0},i=new t.ImagePosition(n,r);this.patterns[e]={bin:n,position:i}}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){const n=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const t in this.patterns)e.push(this.patterns[t].bin);const{w:n,h:r}=t.potpack(e),i=this.atlasImage;i.resize({width:n||1,height:r||1});for(const e in this.patterns){const{bin:n}=this.patterns[e],r=n.x+1,o=n.y+1,a=this.images[e].data,s=a.width,l=a.height;t.RGBAImage.copy(a,i,{x:0,y:0},{x:r,y:o},{width:s,height:l}),t.RGBAImage.copy(a,i,{x:0,y:l-1},{x:r,y:o-1},{width:s,height:1}),t.RGBAImage.copy(a,i,{x:0,y:0},{x:r,y:o+l},{width:s,height:1}),t.RGBAImage.copy(a,i,{x:s-1,y:0},{x:r-1,y:o},{width:1,height:l}),t.RGBAImage.copy(a,i,{x:0,y:0},{x:r+s,y:o},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(const e of t){if(this.callbackDispatchedThisFrame[e])continue;this.callbackDispatchedThisFrame[e]=!0;const t=this.images[e];g(t)&&this.updateImage(e,t)}}}const v=new t.Properties({anchor:new t.DataConstantProperty(t.spec.light.anchor),position:new class{constructor(){this.specification=t.spec.light.position}possiblyEvaluate(e,n){return function([e,n,r]){const i=t.degToRad(n+90),o=t.degToRad(r);return{x:e*Math.cos(i)*Math.sin(o),y:e*Math.sin(i)*Math.sin(o),z:e*Math.cos(o),azimuthal:n,polar:r}}(e.expression.evaluate(n))}interpolate(e,n,r){return{x:t.number(e.x,n.x,r),y:t.number(e.y,n.y,r),z:t.number(e.z,n.z,r),azimuthal:t.number(e.azimuthal,n.azimuthal,r),polar:t.number(e.polar,n.polar,r)}}},color:new t.DataConstantProperty(t.spec.light.color),intensity:new t.DataConstantProperty(t.spec.light.intensity)}),_="-transition";class b extends t.Evented{constructor(e){super(),this._transitionable=new t.Transitionable(v),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e,n={}){if(!this._validate(t.validateLight,e,n))for(const n in e){const r=e[n];t.endsWith(n,_)?this._transitionable.setTransition(n.slice(0,-_.length),r):this._transitionable.setValue(n,r)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(e,n,r){return(!r||!1!==r.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.spec})))}}const x=new t.Properties({source:new t.DataConstantProperty(t.spec.terrain.source),exaggeration:new t.DataConstantProperty(t.spec.terrain.exaggeration)}),w="-transition";class E extends t.Evented{constructor(e){super(),this._transitionable=new t.Transitionable(x),this.set(e),this._transitioning=this._transitionable.untransitioned()}get(){return this._transitionable.serialize()}set(e){for(const n in e){const r=e[n];t.endsWith(n,w)?this._transitionable.setTransition(n.slice(0,-w.length),r):this._transitionable.setValue(n,r)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}}function C(e,n,r,i){const o=t.smoothstep(45,65,r),[a,s]=S(e,i),l=t.length(n);let c=1-Math.min(1,Math.exp((l-a)/(s-a)*-6));return c*=c*c,c=Math.min(1,1.00747*c),c*o*e.alpha}function S(t,e){const n=.5/Math.tan(.5*e);return[t.range[0]+n,t.range[1]+n]}const T=new t.Properties({range:new t.DataConstantProperty(t.spec.fog.range),color:new t.DataConstantProperty(t.spec.fog.color),"horizon-blend":new t.DataConstantProperty(t.spec.fog["horizon-blend"])}),O="-transition";class I extends t.Evented{constructor(e,n){super(),this._transitionable=new t.Transitionable(T),this.set(e),this._transitioning=this._transitionable.untransitioned(),this._transform=n}isSoftDisabled(){return"mercator"!==this._transform.projection.name}get state(){return{range:this.properties.get("range"),horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(e,n={}){if(!this._validate(t.validateFog,e,n))for(const n in e){const r=e[n];t.endsWith(n,O)?this._transitionable.setTransition(n.slice(0,-O.length),r):this._transitionable.setValue(n,r)}}getOpacity(e){if(this.isSoftDisabled())return 0;const n=this.properties&&this.properties.get("color")||1;return t.smoothstep(45,65,e)*n.a}getOpacityAtLatLng(e,n){return this.isSoftDisabled()?0:function(e,n,r){const i=t.MercatorCoordinate.fromLngLat(n),o=r.elevation?r.elevation.getAtPointOrZero(i):0,a=[i.x,i.y,o];return t.transformMat4$1(a,a,r.mercatorFogMatrix),C(e,a,r.pitch,r._fov)}(this.state,e,n)}getFovAdjustedRange(t){return this.isSoftDisabled()?[0,1]:S(this.state,t)}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(e,n,r){return(!r||!1!==r.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.spec})))}}class A{constructor(e,n){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=t.uniqueId();const r=this.workerPool.acquire(this.id);for(let t=0;t<r.length;t++){const e=new A.Actor(r[t],n,this.id);e.name="Worker "+t,this.actors.push(e)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(e,n,r){t.asyncAll(this.actors,(t,r)=>{t.send(e,n,r)},r=r||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(t=>{t.remove()}),this.actors=[],this.workerPool.release(this.id)}}function M(e,n,r){return n*(t.EXTENT/(e.tileSize*Math.pow(2,r-e.tileID.overscaledZ)))}A.Actor=t.Actor;class k{constructor(t,e,n,r){this.screenBounds=t,this.cameraPoint=e,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=n,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this.screenGeometry.map(t=>r.pointCoordinate3D(t)),this.cameraGeometry=this.bufferedCameraGeometry(0)}static createFromScreenPoints(e,n){let r,i;if(e instanceof t.pointGeometry||"number"==typeof e[0]){const o=t.pointGeometry.convert(e);r=[t.pointGeometry.convert(e)],i=n.isPointAboveHorizon(o)}else{const o=t.pointGeometry.convert(e[0]),a=t.pointGeometry.convert(e[1]);r=[o,a],i=t.polygonizeBounds(o,a).every(t=>n.isPointAboveHorizon(t))}return new k(r,n.getCameraPoint(),i,n)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(e){return t.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],e)}bufferedCameraGeometry(e){const n=this.screenBounds[0],r=1===this.screenBounds.length?this.screenBounds[0].add(new t.pointGeometry(1,1)):this.screenBounds[1],i=t.polygonizeBounds(n,r,0,!1);return this.cameraPoint.y>r.y&&(this.cameraPoint.x>n.x&&this.cameraPoint.x<r.x?i.splice(3,0,this.cameraPoint):this.cameraPoint.x>=r.x?i[2]=this.cameraPoint:this.cameraPoint.x<=n.x&&(i[3]=this.cameraPoint)),t.bufferConvexPolygon(i,e)}containsTile(e,n,r){const i=e.queryPadding+1,o=e.tileID.wrap,a=r?this._bufferedCameraMercator(i,n).map(n=>t.getTilePoint(e.tileTransform,n,o)):this._bufferedScreenMercator(i,n).map(n=>t.getTilePoint(e.tileTransform,n,o)),s=this.screenGeometryMercator.map(n=>t.getTileVec3(e.tileTransform,n,o)),l=s.map(e=>new t.pointGeometry(e[0],e[1])),c=n.getFreeCameraOptions().position||new t.MercatorCoordinate(0,0,0),u=t.getTileVec3(e.tileTransform,c,o),h=s.map(e=>{const n=t.sub(e,e,u);return t.normalize(n,n),new p(u,n)}),d=M(e,1,n.zoom);if(t.polygonIntersectsBox(a,0,0,t.EXTENT,t.EXTENT))return{queryGeometry:this,tilespaceGeometry:l,tilespaceRays:h,bufferedTilespaceGeometry:a,bufferedTilespaceBounds:(f=t.getBounds(a),f.min.x=t.clamp(f.min.x,0,t.EXTENT),f.min.y=t.clamp(f.min.y,0,t.EXTENT),f.max.x=t.clamp(f.max.x,0,t.EXTENT),f.max.y=t.clamp(f.max.y,0,t.EXTENT),f),tile:e,tileID:e.tileID,pixelToTileUnitsFactor:d};var f}_bufferedScreenMercator(t,e){const n=P(t);if(this._screenRaycastCache[n])return this._screenRaycastCache[n];{const r=this.bufferedScreenGeometry(t).map(t=>e.pointCoordinate3D(t));return this._screenRaycastCache[n]=r,r}}_bufferedCameraMercator(t,e){const n=P(t);if(this._cameraRaycastCache[n])return this._cameraRaycastCache[n];{const r=this.bufferedCameraGeometry(t).map(t=>e.pointCoordinate3D(t));return this._cameraRaycastCache[n]=r,r}}}function P(t){return 100*t|0}function D(e,n,r){const i=function(i,o){if(i)return r(i);if(o){const i=t.pick(t.extend(o,e),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);o.vector_layers&&(i.vectorLayers=o.vector_layers,i.vectorLayerIds=i.vectorLayers.map(t=>t.id)),i.tiles=n.canonicalizeTileset(i,e.url),r(null,i)}};return e.url?t.getJSON(n.transformRequest(n.normalizeSourceURL(e.url),t.ResourceType.Source),i):t.exported.frame(()=>i(null,e))}class R{constructor(e,n,r){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=n||0,this.maxzoom=r||24}validateBounds(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(e){const n=Math.pow(2,e.z),r=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*n),i=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*n),o=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*n),a=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*n);return e.x>=r&&e.x<o&&e.y>=i&&e.y<a}}class L{constructor(t,e,n){this.context=t;const r=t.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const N={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class j{constructor(t,e,n,r){this.length=e.length,this.attributes=n,this.itemSize=e.bytesPerElement,this.dynamicDraw=r,this.context=t;const i=t.gl;this.buffer=i.createBuffer(),t.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){const e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,e){for(let n=0;n<this.attributes.length;n++){const r=e.attributes[this.attributes[n].name];void 0!==r&&t.enableVertexAttribArray(r)}}setVertexAttribPointers(t,e,n){for(let r=0;r<this.attributes.length;r++){const i=this.attributes[r],o=e.attributes[i.name];void 0!==o&&t.vertexAttribPointer(o,i.components,t[N[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class F{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class z extends F{getDefault(){return t.Color.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class B extends F{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class U extends F{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class G extends F{getDefault(){return[!0,!0,!0,!0]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class V extends F{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class q extends F{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class H extends F{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class W extends F{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class Z extends F{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}}class $ extends F{getDefault(){return[0,1]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class K extends F{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}}class Y extends F{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class X extends F{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}}class J extends F{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class Q extends F{getDefault(){return t.Color.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class tt extends F{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class et extends F{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}}class nt extends F{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class rt extends F{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class it extends F{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class ot extends F{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class at extends F{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class st extends F{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class lt extends F{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class ct extends F{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class ut extends F{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class ht extends F{getDefault(){return null}set(t){const e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class dt extends F{constructor(t){super(t),this.vao=t.extVertexArrayObject}getDefault(){return null}set(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)}}class pt extends F{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class ft extends F{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class mt extends F{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class gt extends F{constructor(t,e){super(t),this.context=t,this.parent=e}getDefault(){return null}}class yt extends gt{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class vt extends gt{attachment(){return this.gl.DEPTH_ATTACHMENT}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,this.attachment(),e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class _t extends vt{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class bt{constructor(t,e,n,r){this.context=t,this.width=e,this.height=n;const i=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new yt(t,i),r&&(this.depthAttachment=new vt(t,i))}destroy(){const t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){const e=this.depthAttachment.get();e&&t.deleteRenderbuffer(e)}t.deleteFramebuffer(this.framebuffer)}}class xt{constructor(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new z(this),this.clearDepth=new B(this),this.clearStencil=new U(this),this.colorMask=new G(this),this.depthMask=new V(this),this.stencilMask=new q(this),this.stencilFunc=new H(this),this.stencilOp=new W(this),this.stencilTest=new Z(this),this.depthRange=new $(this),this.depthTest=new K(this),this.depthFunc=new Y(this),this.blend=new X(this),this.blendFunc=new J(this),this.blendColor=new Q(this),this.blendEquation=new tt(this),this.cullFace=new et(this),this.cullFaceSide=new nt(this),this.frontFace=new rt(this),this.program=new it(this),this.activeTexture=new ot(this),this.viewport=new at(this),this.bindFramebuffer=new st(this),this.bindRenderbuffer=new lt(this),this.bindTexture=new ct(this),this.bindVertexBuffer=new ut(this),this.bindElementBuffer=new ht(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new dt(this),this.pixelStoreUnpack=new pt(this),this.pixelStoreUnpackPremultiplyAlpha=new ft(this),this.pixelStoreUnpackFlipY=new mt(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(t.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,e){return new L(this,t,e)}createVertexBuffer(t,e,n){return new j(this,t,e,n)}createRenderbuffer(t,e,n){const r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,t,e,n),this.bindRenderbuffer.set(null),i}createFramebuffer(t,e,n){return new bt(this,t,e,n)}clear({color:t,depth:e,stencil:n}){const r=this.gl;let i=0;t&&(i|=r.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==e&&(i|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(e),this.depthMask.set(!0)),void 0!==n&&(i|=r.STENCIL_BUFFER_BIT,this.clearStencil.set(n),this.stencilMask.set(255)),r.clear(i)}setCullFace(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(e){i(e.blendFunction,t.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class wt extends t.Evented{constructor(e,n,r,i){super(),this.id=e,this.dispatcher=r,this.setEventedParent(i),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},n),t.extend(this,t.pick(n,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=D(this._options,this.map._requestManager,(e,n)=>{this._tileJSONRequest=null,this._loaded=!0,e?this.fire(new t.ErrorEvent(e)):n&&(t.extend(this,n),n.bounds&&(this.tileBounds=new R(n.bounds,this.minzoom,this.maxzoom)),t.postTurnstileEvent(n.tiles),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return t.extend({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(e,n){const r=t.exported.devicePixelRatio>=2,i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),r,this.tileSize);e.request=t.getImage(this.map._requestManager.transformRequest(i,t.ResourceType.Tile),(r,i,o,a)=>{if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(r)e.state="errored",n(r);else if(i){this.map._refreshExpiredTiles&&e.setExpiryData({cacheControl:o,expires:a});const r=this.map.painter.context,s=r.gl;e.texture=this.map.painter.getTileTexture(i.width),e.texture?e.texture.update(i,{useMipmap:!0}):(e.texture=new t.Texture(r,i,s.RGBA,{useMipmap:!0}),e.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE),r.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,r.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,r.extTextureFilterAnisotropicMax)),e.state="loaded",t.cacheEntryPossiblyAdded(this.dispatcher),n(null)}})}abortTile(t,e){t.request&&(t.request.cancel(),delete t.request),e()}unloadTile(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()}hasTransition(){return!1}}let Et;class Ct extends t.Evented{constructor(t,e,n,r){super(),this.id=t,this.dispatcher=n,this.coordinates=e.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(r),this.options=e}load(e,n){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),(r,i)=>{this._loaded=!0,r?this.fire(new t.ErrorEvent(r)):i&&(this.image=t.exported.getImageData(i),e&&(this.coordinates=e),n&&n(),this._finishLoading())})}loaded(){return this._loaded}updateImage(t){return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}setCoordinates(e){this.coordinates=e,delete this._boundsArray;const n=e.map(t.MercatorCoordinate.fromLngLat);return this.tileID=function(e){let n=1/0,r=1/0,i=-1/0,o=-1/0;for(const t of e)n=Math.min(n,t.x),r=Math.min(r,t.y),i=Math.max(i,t.x),o=Math.max(o,t.y);const a=Math.max(i-n,o-r),s=Math.max(0,Math.floor(-Math.log(a)/Math.LN2)),l=Math.pow(2,s);return new t.CanonicalTileID(s,Math.floor((n+i)/2*l),Math.floor((r+o)/2*l))}(n),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){delete this._boundsArray}_makeBoundsArray(){const e=t.tileTransform(this.tileID,this.map.transform.projection),n=this.coordinates.map(n=>{const r=e.projection.project(n[0],n[1]);return t.getTilePoint(e,r)._round()});return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(n[0].x,n[0].y,0,0),this._boundsArray.emplaceBack(n[1].x,n[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(n[3].x,n[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(n[2].x,n[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const e=this.map.painter.context,n=e.gl;this._boundsArray||this._makeBoundsArray(),this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,t.boundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}loadTile(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const St={vector:class extends t.Evented{constructor(e,n,r,i){if(super(),this.id=e,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(n,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(i),this._tileWorkers={},this._deduped=new t.DedupedRequest}load(){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=D(this._options,this.map._requestManager,(e,n)=>{this._tileJSONRequest=null,this._loaded=!0,e?this.fire(new t.ErrorEvent(e)):n&&(t.extend(this,n),n.bounds&&(this.tileBounds=new R(n.bounds,this.minzoom,this.maxzoom)),t.postTurnstileEvent(n.tiles,this.map._requestManager._customAccessToken),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}setSourceProperty(t){this._tileJSONRequest&&this._tileJSONRequest.cancel(),t();const e=this.map.style._getSourceCaches(this.id);for(const t of e)t.clearTiles();this.load()}setTiles(t){return this.setSourceProperty(()=>{this._options.tiles=t}),this}setUrl(t){return this.setSourceProperty(()=>{this.url=t,this._options.url=t}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return t.extend({},this._options)}loadTile(e,n){const r=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme)),i={request:this.map._requestManager.transformRequest(r,t.ResourceType.Tile),data:void 0,uid:e.uid,tileID:e.tileID,tileZoom:e.tileZoom,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:e.isSymbolTile};if(i.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state)"loading"===e.state?e.reloadCallback=n:e.request=e.actor.send("reloadTile",i,o.bind(this));else if(e.actor=this._tileWorkers[r]=this._tileWorkers[r]||this.dispatcher.getActor(),this.dispatcher.ready)e.request=e.actor.send("loadTile",i,o.bind(this),void 0,!0);else{const n=t.loadVectorTile.call({deduped:this._deduped},i,(t,n)=>{t||!n?o.call(this,t):(i.data={cacheControl:n.cacheControl,expires:n.expires,rawData:n.rawData.slice(0)},e.actor&&e.actor.send("loadTile",i,o.bind(this),void 0,!0))},!0);e.request={cancel:n}}function o(r,i){return delete e.request,e.aborted?n(null):r&&404!==r.status?n(r):(i&&i.resourceTiming&&(e.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&i&&e.setExpiryData(i),e.loadVectorData(i,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id})}unloadTile(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}},raster:wt,"raster-dem":class extends wt{constructor(e,n,r,i){super(e,n,r,i),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},n),this.encoding=n.encoding||"mapbox"}loadTile(e,n){const r=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function i(t,r){t&&(e.state="errored",n(t)),r&&(e.dem=r,e.dem.onDeserialize(),e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0,e.state="loaded",n(null))}e.request=t.getImage(this.map._requestManager.transformRequest(r,t.ResourceType.Tile),function(r,o,a,s){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(r)e.state="errored",n(r);else if(o){this.map._refreshExpiredTiles&&e.setExpiryData({cacheControl:a,expires:s});const n=t.window.ImageBitmap&&o instanceof t.window.ImageBitmap&&(null==Et&&(Et=t.window.OffscreenCanvas&&new t.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof t.window.createImageBitmap),Et),r=1-(o.width-t.prevPowerOfTwo(o.width))/2;r<1||e.neighboringTiles||(e.neighboringTiles=this._getNeighboringTiles(e.tileID));const l=n?o:t.exported.getImageData(o,r),c={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:l,encoding:this.encoding,padding:r};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",c,i.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(e){const n=e.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,o=0===n.x?e.wrap-1:e.wrap,a=(n.x+1+r)%r,s=n.x+1===r?e.wrap+1:e.wrap,l={};return l[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y).key]={backfilled:!1},n.y>0&&(l[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y-1).key]={backfilled:!1}),n.y+1<r&&(l[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y+1).key]={backfilled:!1}),l}unloadTile(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded"}},geojson:class extends t.Evented{constructor(e,n,r,i){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=r.getActor(),this.setEventedParent(i),this._data=n.data,this._options=t.extend({},n),this._collectResourceTiming=n.collectResourceTiming,void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution),this.promoteId=n.promoteId;const o=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*o,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*o,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?n.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,n.clusterMinPoints||2),extent:t.EXTENT,radius:(void 0!==n.clusterRadius?n.clusterRadius:50)*o,log:!1,generateId:n.generateId||!1},clusterProperties:n.clusterProperties,filter:n.filter},n.workerOptions)}onAdd(t){this.map=t,this.setData(this._data)}setData(t){return this._data=t,this._updateWorkerData(),this}getClusterExpansionZoom(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this}getClusterChildren(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this}getClusterLeaves(t,e,n,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:n},r),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new t.Event("dataloading",{dataType:"source"})),this._loaded=!1;const e=t.extend({},this.workerOptions),n=this._data;"string"==typeof n?(e.request=this.map._requestManager.transformRequest(t.exported.resolveURL(n),t.ResourceType.Source),e.request.collectResourceTiming=this._collectResourceTiming):e.data=JSON.stringify(n),this._pendingLoad=this.actor.send(this.type+".loadData",e,(e,n)=>{if(this._loaded=!0,this._pendingLoad=null,e)this.fire(new t.ErrorEvent(e));else{const e={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&n&&n.resourceTiming&&n.resourceTiming[this.id]&&(e.resourceTiming=n.resourceTiming[this.id]),this.fire(new t.Event("data",e)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(e,n){const r=e.actor?"reloadTile":"loadTile";e.actor=this.actor,e.request=this.actor.send(r,{type:this.type,uid:e.uid,tileID:e.tileID,tileZoom:e.tileZoom,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(t,i)=>(delete e.request,e.unloadVectorData(),e.aborted?n(null):t?n(t):(e.loadVectorData(i,this.map.painter,"reloadTile"===r),n(null))),void 0,"loadTile"===r)}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0}unloadTile(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return t.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Ct{constructor(t,e,n,r){super(t,e,n,r),this.roundZoom=!0,this.type="video",this.options=e}load(){this._loaded=!1;const e=this.options;this.urls=[];for(const n of e.urls)this.urls.push(this.map._requestManager.transformRequest(n,t.ResourceType.Source).url);t.getVideo(this.urls,(e,n)=>{this._loaded=!0,e?this.fire(new t.ErrorEvent(e)):n&&(this.video=n,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const n=this.video.seekable;e<n.start(0)||e>n.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("sources."+this.id,null,`Playback for this video can be set only between the ${n.start(0)} and ${n.end(0)}-second mark.`))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const e=this.map.painter.context,n=e.gl;this._boundsArray||this._makeBoundsArray(),this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,t.boundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Ct,canvas:class extends Ct{constructor(e,n,r,i){super(e,n,r,i),n.coordinates?Array.isArray(n.coordinates)&&4===n.coordinates.length&&!n.coordinates.some(t=>!Array.isArray(t)||2!==t.length||t.some(t=>"number"!=typeof t))||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+e,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+e,null,'missing required property "coordinates"'))),n.animate&&"boolean"!=typeof n.animate&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+e,null,'optional "animate" property must be a boolean value'))),n.canvas?"string"==typeof n.canvas||n.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+e,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+e,null,'missing required property "canvas"'))),this.options=n,this.animate=void 0===n.animate||n.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const n=this.map.painter.context,r=n.gl;this._boundsArray||this._makeBoundsArray(),this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,t.boundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(n,this.canvas,r.RGBA,{premultiply:!0});for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}}},Tt=function(e,n,r,i){const o=new St[n.type](e,n,r,i);if(o.id!==e)throw new Error(`Expected Source id to be ${e} instead of ${o.id}`);return t.bindAll(["load","abort","unload","serialize","prepare"],o),o};function Ot(e,n){const r=t.identity([]);return t.scale$1(r,r,[.5*e.width,.5*-e.height,1]),t.translate(r,r,[1,-1,0]),t.multiply(r,r,e.calculateProjMatrix(n.toUnwrapped()))}function It(t,e,n,r,i,o,a,s=!1){const l=t.tilesIn(r,a,s);l.sort(Mt);const c=[];for(const r of l)c.push({wrappedTileID:r.tile.tileID.wrapped().key,queryResults:r.tile.queryRenderedFeatures(e,n,t._state,r,i,o,Ot(t.transform,r.tile.tileID),s)});const u=function(t){const e={},n={};for(const r of t){const t=r.queryResults,i=r.wrappedTileID,o=n[i]=n[i]||{};for(const n in t){const r=t[n],i=o[n]=o[n]||{},a=e[n]=e[n]||[];for(const t of r)i[t.featureIndex]||(i[t.featureIndex]=!0,a.push(t))}}return e}(c);for(const e in u)u[e].forEach(e=>{const n=e.feature,r=t.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=r});return u}function At(t,e){const n=t.getRenderableIds().map(e=>t.getTileByID(e)),r=[],i={};for(let t=0;t<n.length;t++){const o=n[t],a=o.tileID.canonical.key;i[a]||(i[a]=!0,o.querySourceFeatures(r,e))}return r}function Mt(t,e){const n=t.tileID,r=e.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}function kt(){return null!=Qi.workerClass?new Qi.workerClass:new t.window.Worker(Qi.workerUrl)}const Pt="mapboxgl_preloaded_worker_pool";class Dt{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<Dt.workerCount;)this.workers.push(new kt);return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach(t=>{t.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Pt]}numActive(){return Object.keys(this.active).length}}let Rt;function Lt(){return Rt||(Rt=new Dt),Rt}function Nt(e,n){const r={};for(const t in e)"ref"!==t&&(r[t]=e[t]);return t.refProperties.forEach(t=>{t in n&&(r[t]=n[t])}),r}function jt(t){t=t.slice();const e=Object.create(null);for(let n=0;n<t.length;n++)e[t[n].id]=t[n];for(let n=0;n<t.length;n++)"ref"in t[n]&&(t[n]=Nt(t[n],e[t[n].ref]));return t}Dt.workerCount=2;const Ft={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function zt(t,e,n){n.push({command:Ft.addSource,args:[t,e[t]]})}function Bt(t,e,n){e.push({command:Ft.removeSource,args:[t]}),n[t]=!0}function Ut(t,e,n,r){Bt(t,n,r),zt(t,e,n)}function Gt(t,e,n){let r;for(r in t[n])if(t[n].hasOwnProperty(r)&&"data"!==r&&!i(t[n][r],e[n][r]))return!1;for(r in e[n])if(e[n].hasOwnProperty(r)&&"data"!==r&&!i(t[n][r],e[n][r]))return!1;return!0}function Vt(t,e,n,r,o,a){let s;for(s in e=e||{},t=t||{})t.hasOwnProperty(s)&&(i(t[s],e[s])||n.push({command:a,args:[r,s,e[s],o]}));for(s in e)e.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(i(t[s],e[s])||n.push({command:a,args:[r,s,e[s],o]}))}function qt(t){return t.id}function Ht(t,e){return t[e.id]=e,t}class Wt{constructor(t,e){this.reset(t,e)}reset(t,e){this.points=t||[],this._distances=[0];for(let t=1;t<this.points.length;t++)this._distances[t]=this._distances[t-1]+this.points[t].dist(this.points[t-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(1===this.points.length)return this.points[0];e=t.clamp(e,0,1);let n=1,r=this._distances[n];const i=e*this.paddedLength+this.padding;for(;r<i&&n<this._distances.length;)r=this._distances[++n];const o=n-1,a=this._distances[o],s=r-a,l=s>0?(i-a)/s:0;return this.points[o].mult(1-l).add(this.points[n].mult(l))}}class Zt{constructor(t,e,n){const r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(e/n);for(let t=0;t<this.xCellCount*this.yCellCount;t++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)}insertCircle(t,e,n,r){this._forEachCell(e-r,n-r,e+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(n),this.circles.push(r)}_insertBoxCell(t,e,n,r,i,o){this.boxCells[i].push(o)}_insertCircleCell(t,e,n,r,i,o){this.circleCells[i].push(o)}_query(t,e,n,r,i,o){if(n<0||t>this.width||r<0||e>this.height)return!i&&[];const a=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(let t=0;t<this.boxKeys.length;t++)a.push({key:this.boxKeys[t],x1:this.bboxes[4*t],y1:this.bboxes[4*t+1],x2:this.bboxes[4*t+2],y2:this.bboxes[4*t+3]});for(let t=0;t<this.circleKeys.length;t++){const e=this.circles[3*t],n=this.circles[3*t+1],r=this.circles[3*t+2];a.push({key:this.circleKeys[t],x1:e-r,y1:n-r,x2:e+r,y2:n+r})}return o?a.filter(o):a}return this._forEachCell(t,e,n,r,this._queryCell,a,{hitTest:i,seenUids:{box:{},circle:{}}},o),i?a.length>0:a}_queryCircle(t,e,n,r,i){const o=t-n,a=t+n,s=e-n,l=e+n;if(a<0||o>this.width||l<0||s>this.height)return!r&&[];const c=[];return this._forEachCell(o,s,a,l,this._queryCellCircle,c,{hitTest:r,circle:{x:t,y:e,radius:n},seenUids:{box:{},circle:{}}},i),r?c.length>0:c}query(t,e,n,r,i){return this._query(t,e,n,r,!1,i)}hitTest(t,e,n,r,i){return this._query(t,e,n,r,!0,i)}hitTestCircle(t,e,n,r){return this._queryCircle(t,e,n,!0,r)}_queryCell(t,e,n,r,i,o,a,s){const l=a.seenUids,c=this.boxCells[i];if(null!==c){const i=this.bboxes;for(const u of c)if(!l.box[u]){l.box[u]=!0;const c=4*u;if(t<=i[c+2]&&e<=i[c+3]&&n>=i[c+0]&&r>=i[c+1]&&(!s||s(this.boxKeys[u]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[u],x1:i[c],y1:i[c+1],x2:i[c+2],y2:i[c+3]})}}}const u=this.circleCells[i];if(null!==u){const i=this.circles;for(const c of u)if(!l.circle[c]){l.circle[c]=!0;const u=3*c;if(this._circleAndRectCollide(i[u],i[u+1],i[u+2],t,e,n,r)&&(!s||s(this.circleKeys[c]))){if(a.hitTest)return o.push(!0),!0;{const t=i[u],e=i[u+1],n=i[u+2];o.push({key:this.circleKeys[c],x1:t-n,y1:e-n,x2:t+n,y2:e+n})}}}}}_queryCellCircle(t,e,n,r,i,o,a,s){const l=a.circle,c=a.seenUids,u=this.boxCells[i];if(null!==u){const t=this.bboxes;for(const e of u)if(!c.box[e]){c.box[e]=!0;const n=4*e;if(this._circleAndRectCollide(l.x,l.y,l.radius,t[n+0],t[n+1],t[n+2],t[n+3])&&(!s||s(this.boxKeys[e])))return o.push(!0),!0}}const h=this.circleCells[i];if(null!==h){const t=this.circles;for(const e of h)if(!c.circle[e]){c.circle[e]=!0;const n=3*e;if(this._circlesCollide(t[n],t[n+1],t[n+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[e])))return o.push(!0),!0}}}_forEachCell(t,e,n,r,i,o,a,s){const l=this._convertToXCellCoord(t),c=this._convertToYCellCoord(e),u=this._convertToXCellCoord(n),h=this._convertToYCellCoord(r);for(let d=l;d<=u;d++)for(let l=c;l<=h;l++)if(i.call(this,t,e,n,r,this.xCellCount*l+d,o,a,s))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,e,n,r,i,o){const a=r-t,s=i-e,l=n+o;return l*l>a*a+s*s}_circleAndRectCollide(t,e,n,r,i,o,a){const s=(o-r)/2,l=Math.abs(t-(r+s));if(l>s+n)return!1;const c=(a-i)/2,u=Math.abs(e-(i+c));if(u>c+n)return!1;if(l<=s||u<=c)return!0;const h=l-s,d=u-c;return h*h+d*d<=n*n}}const $t=Math.tan(85*Math.PI/180);function Kt(e,n,r,i,o){const a=t.create$1();if(n){const e=d([],o);a[0]=e[0],a[1]=e[1],a[4]=e[2],a[5]=e[3],r||t.rotateZ(a,a,i.angle)}else t.multiply(a,i.labelPlaneMatrix,e);return a}function Yt(e,n,r,i,o){if(n){const n=t.clone$1(e),a=t.identity([]);return a[0]=o[0],a[1]=o[1],a[4]=o[2],a[5]=o[3],t.multiply(n,n,a),r||t.rotateZ(n,n,-i.angle),n}return i.glCoordMatrix}function Xt(e,n,r=0){const i=[e.x,e.y,r,1];r?t.transformMat4(i,i,n):ce(i,i,n);const o=i[3];return{point:new t.pointGeometry(i[0]/o,i[1]/o),signedDistanceFromCamera:o}}function Jt(t,e){return Math.min(.5+t/e*.5,1.5)}function Qt(t,e){const n=t[0]/t[3],r=t[1]/t[3];return n>=-e[0]&&n<=e[0]&&r>=-e[1]&&r<=e[1]}function te(e,n,r,i,o,a,s,l,c){const u=i?e.textSizeData:e.iconSizeData,h=t.evaluateSizeForZoom(u,r.transform.zoom),d=[256/r.width*2+1,256/r.height*2+1],p=i?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;p.clear();const f=e.lineVertexArray,m=i?e.text.placedSymbolArray:e.icon.placedSymbolArray,g=r.transform.width/r.transform.height;let y=!1;for(let i=0;i<m.length;i++){const v=m.get(i);if(v.writingMode!==t.WritingMode.vertical||y||0!==i&&m.get(i-1).writingMode===t.WritingMode.horizontal||(y=!0),v.hidden||v.writingMode===t.WritingMode.vertical&&!y){le(v.numGlyphs,p);continue}y=!1;const _=new t.pointGeometry(v.tileAnchorX,v.tileAnchorY),b=c?c(_):0,x=[_.x,_.y,b],w=[...x,1];if(t.transformMat4(w,w,n),!Qt(w,d)){le(v.numGlyphs,p);continue}const E=Jt(r.transform.cameraToCenterDistance,w[3]),C=t.evaluateSizeForFeature(u,h,v),S=s?C/E:C*E,T=Xt(new t.pointGeometry(x[0],x[1]),o,x[2]);if(T.signedDistanceFromCamera<=0){le(v.numGlyphs,p);continue}let O={};const I=s?null:c,A=re(v,S,!1,l,n,o,a,e.glyphOffsetArray,f,p,T.point,_,O,g,I);y=A.useVertical,I&&A.needsFlipping&&(O={}),(A.notEnoughRoom||y||A.needsFlipping&&re(v,S,!0,l,n,o,a,e.glyphOffsetArray,f,p,T.point,_,O,g,I).notEnoughRoom)&&le(v.numGlyphs,p)}i?e.text.dynamicLayoutVertexBuffer.updateData(p):e.icon.dynamicLayoutVertexBuffer.updateData(p)}function ee(t,e,n,r,i,o,a,s,l,c,u,h,d){const p=s.glyphStartIndex+s.numGlyphs,f=s.lineStartIndex,m=s.lineStartIndex+s.lineLength,g=e.getoffsetX(s.glyphStartIndex),y=e.getoffsetX(p-1),v=ae(t*g,n,r,i,o,a,s.segment,f,m,l,c,u,h,d,!0);if(!v)return null;const _=ae(t*y,n,r,i,o,a,s.segment,f,m,l,c,u,h,d,!0);return _?{first:v,last:_}:null}function ne(e,n,r,i){return e.writingMode===t.WritingMode.horizontal&&Math.abs(r.y-n.y)>Math.abs(r.x-n.x)*i?{useVertical:!0}:e.writingMode===t.WritingMode.vertical?n.y<r.y?{needsFlipping:!0}:null:0!==e.flipState&&function(t,e,n){const r=(e.x-t.x)*n;return 0===r||Math.abs((e.y-t.y)/r)>$t}(n,r,i)?1===e.flipState?{needsFlipping:!0}:null:n.x>r.x?{needsFlipping:!0}:null}function re(e,n,r,i,o,a,s,l,c,u,h,d,p,f,m){const g=n/24,y=e.lineOffsetX*g,v=e.lineOffsetY*g;let _;if(e.numGlyphs>1){const t=e.glyphStartIndex+e.numGlyphs,n=e.lineStartIndex,o=e.lineStartIndex+e.lineLength,u=ee(g,l,y,v,r,h,d,e,c,a,p,m,!1);if(!u)return{notEnoughRoom:!0};const b=Xt(u.first.point,s).point,x=Xt(u.last.point,s).point;if(i&&!r){const t=ne(e,b,x,f);if(e.flipState=t&&t.needsFlipping?1:2,t)return t}_=[u.first];for(let i=e.glyphStartIndex+1;i<t-1;i++)_.push(ae(g*l.getoffsetX(i),y,v,r,h,d,e.segment,n,o,c,a,p,m,!1,!1));_.push(u.last)}else{if(i&&!r){const n=Xt(d,o).point,r=e.lineStartIndex+e.segment+1,i=new t.pointGeometry(c.getx(r),c.gety(r)),a=Xt(i,o),s=ne(e,n,a.signedDistanceFromCamera>0?a.point:oe(d,i,n,1,o,void 0),f);if(e.flipState=s&&s.needsFlipping?1:2,s)return s}const n=ae(g*l.getoffsetX(e.glyphStartIndex),y,v,r,h,d,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,c,a,p,m,!1,!1);if(!n)return{notEnoughRoom:!0};_=[n]}for(const e of _)t.addDynamicAttributes(u,e.point,e.angle);return{}}function ie(e,n,r){const i={x:e.x,y:e.y,z:0};if(!r)return Xt(i,n,i.z);const o=r(e);return Xt(new t.pointGeometry(i.x,i.y),n,i.z+o)}function oe(t,e,n,r,i,o){const a=ie(t.add(t.sub(e)._unit()),i,o).point,s=n.sub(a);return n.add(s._mult(r/s.mag()))}function ae(e,n,r,i,o,a,s,l,c,u,h,d,p,f,m){const g=i?e-n:e+n;let y=g>0?1:-1,v=0;i&&(y*=-1,v=Math.PI),y<0&&(v+=Math.PI);let _=y>0?l+s:l+s+1,b=o,x=o,w=0,E=0;const C=Math.abs(g),S=[],T=[];let O=a;const I=()=>{const e=_-y;return 0===w?a:new t.pointGeometry(u.getx(e),u.gety(e))},A=()=>oe(I(),O,x,C-w+1,h,p);for(;w+E<=C;){if(_+=y,_<l||_>=c)return null;if(x=b,S.push(b),f&&T.push(O||I()),b=d[_],void 0===b){O=new t.pointGeometry(u.getx(_),u.gety(_));const e=ie(O,h,p);b=e.signedDistanceFromCamera>0?d[_]=e.point:A()}else O=null;w+=E,E=x.dist(b)}m&&p&&(O=O||new t.pointGeometry(u.getx(_),u.gety(_)),d[_]=b=void 0===d[_]?b:A(),E=x.dist(b));const M=(C-w)/E,k=b.sub(x),P=k.mult(M)._add(x);r&&P._add(k._unit()._perp()._mult(r*y));const D=v+Math.atan2(b.y-x.y,b.x-x.x);return S.push(P),f&&(O=O||new t.pointGeometry(u.getx(_),u.gety(_)),T.push(function(e,n,r){const i=1-r;return new t.pointGeometry(e.x*i+n.x*r,e.y*i+n.y*r)}(T.length>0?T[T.length-1]:O,O,M))),{point:P,angle:D,path:S,tilePath:T}}const se=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function le(t,e){for(let n=0;n<t;n++){const t=e.length;e.resize(t+4),e.float32.set(se,3*t)}}function ce(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t[3]=n[3]*r+n[7]*i+n[15],t}const ue=100;class he{constructor(t,e,n=new Zt(t.width+200,t.height+200,25),r=new Zt(t.width+200,t.height+200,25)){this.transform=t,this.grid=n,this.ignoredGrid=r,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+ue,this.screenBottomBoundary=t.height+ue,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.fogState=e}placeCollisionBox(t,e,n,r,i,o,a){let s=e.projectedAnchorZ;e.elevation&&(s+=e.elevation);const l=this.projectAndGetPerspectiveRatio(o,e.projectedAnchorX,e.projectedAnchorY,s,e.tileID),c=i*l.perspectiveRatio,u=(e.x1*t+n.x-e.padding)*c+l.point.x,h=(e.y1*t+n.y-e.padding)*c+l.point.y,d=(e.x2*t+n.x+e.padding)*c+l.point.x,p=(e.y2*t+n.y+e.padding)*c+l.point.y,f=l.perspectiveRatio<=.55||l.aboveHorizon;return!this.isInsideGrid(u,h,d,p)||!r&&this.grid.hitTest(u,h,d,p,a)||f?{box:[],offscreen:!1}:{box:[u,h,d,p],offscreen:this.isOffscreen(u,h,d,p)}}placeCollisionCircles(e,n,r,i,o,a,s,l,c,u,h,d,p,f){const m=[],g=this.transform.elevation,y=g?t=>g.getAtTileOffset(f,t.x,t.y):t=>0,v=new t.pointGeometry(n.tileAnchorX,n.tileAnchorY),_=y(v),b=this.projectAndGetPerspectiveRatio(a,v.x,v.y,_,f),{perspectiveRatio:x}=b,w=(u?o/x:o*x)/t.ONE_EM,E=Xt(v,s,_).point,C=b.signedDistanceFromCamera>0?ee(w,i,n.lineOffsetX*w,n.lineOffsetY*w,!1,E,v,n,r,s,{},g&&!u?y:null,u&&!!g):null;let S=!1,T=!1,O=!0;if(C&&!b.aboveHorizon){const n=.5*d*x+p,r=new t.pointGeometry(-100,-100),i=new t.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),o=new Wt,a=C.first,s=C.last;let u=[];for(let t=a.path.length-1;t>=1;t--)u.push(a.path[t]);for(let t=1;t<s.path.length;t++)u.push(s.path[t]);const f=2.5*n;if(l){const t=u.map(g?(t,e)=>{const n=y(e<a.path.length-1?a.tilePath[a.path.length-1-e]:s.tilePath[e-a.path.length+2]);return Xt(t,l,n)}:t=>Xt(t,l));u=t.some(t=>t.signedDistanceFromCamera<=0)?[]:t.map(t=>t.point)}let v=[];if(u.length>0){const e=u[0].clone(),n=u[0].clone();for(let t=1;t<u.length;t++)e.x=Math.min(e.x,u[t].x),e.y=Math.min(e.y,u[t].y),n.x=Math.max(n.x,u[t].x),n.y=Math.max(n.y,u[t].y);v=e.x>=r.x&&n.x<=i.x&&e.y>=r.y&&n.y<=i.y?[u]:n.x<r.x||e.x>i.x||n.y<r.y||e.y>i.y?[]:t.clipLine([u],r.x,r.y,i.x,i.y)}for(const t of v){o.reset(t,.25*n);let r=0;r=o.length<=.5*n?1:Math.ceil(o.paddedLength/f)+1;for(let t=0;t<r;t++){const i=t/Math.max(r-1,1),a=o.lerp(i),s=a.x+ue,l=a.y+ue;m.push(s,l,n,0);const u=s-n,d=l-n,p=s+n,f=l+n;if(O=O&&this.isOffscreen(u,d,p,f),T=T||this.isInsideGrid(u,d,p,f),!e&&this.grid.hitTestCircle(s,l,n,h)&&(S=!0,!c))return{circles:[],offscreen:!1,collisionDetected:S}}}}return{circles:!c&&S||!T?[]:m,offscreen:O,collisionDetected:S}}queryRenderedSymbols(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const n=[];let r=1/0,i=1/0,o=-1/0,a=-1/0;for(const s of e){const e=new t.pointGeometry(s.x+ue,s.y+ue);r=Math.min(r,e.x),i=Math.min(i,e.y),o=Math.max(o,e.x),a=Math.max(a,e.y),n.push(e)}const s=this.grid.query(r,i,o,a).concat(this.ignoredGrid.query(r,i,o,a)),l={},c={};for(const e of s){const r=e.key;if(void 0===l[r.bucketInstanceId]&&(l[r.bucketInstanceId]={}),l[r.bucketInstanceId][r.featureIndex])continue;const i=[new t.pointGeometry(e.x1,e.y1),new t.pointGeometry(e.x2,e.y1),new t.pointGeometry(e.x2,e.y2),new t.pointGeometry(e.x1,e.y2)];t.polygonIntersectsPolygon(n,i)&&(l[r.bucketInstanceId][r.featureIndex]=!0,void 0===c[r.bucketInstanceId]&&(c[r.bucketInstanceId]=[]),c[r.bucketInstanceId].push(r.featureIndex))}return c}insertCollisionBox(t,e,n,r,i){(e?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:r,collisionGroupID:i},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,e,n,r,i){const o=e?this.ignoredGrid:this.grid,a={bucketInstanceId:n,featureIndex:r,collisionGroupID:i};for(let e=0;e<t.length;e+=4)o.insertCircle(a,t[e],t[e+1],t[e+2])}projectAndGetPerspectiveRatio(e,n,r,i,o){const a=[n,r,i||0,1];let s=!1;if(i||this.transform.pitch>0){t.transformMat4(a,a,e);let l=!1;this.fogState&&o&&(l=function(e,n,r,i,o,a){const s=a.calculateFogTileMatrix(o),l=[n,r,i];return t.transformMat4$1(l,l,s),C(e,l,a.pitch,a._fov)}(this.fogState,n,r,i||0,o.toUnwrapped(),this.transform)>.9),s=a[2]>a[3]||l}else ce(a,a,e);return{point:new t.pointGeometry((a[0]/a[3]+1)/2*this.transform.width+ue,(-a[1]/a[3]+1)/2*this.transform.height+ue),perspectiveRatio:Math.min(.5+this.transform.cameraToCenterDistance/a[3]*.5,1.5),signedDistanceFromCamera:a[3],aboveHorizon:s}}isOffscreen(t,e,n,r){return n<ue||t>=this.screenRightBoundary||r<ue||e>this.screenBottomBoundary}isInsideGrid(t,e,n,r){return n>=0&&t<this.gridRightBoundary&&r>=0&&e<this.gridBottomBoundary}getViewportMatrix(){const e=t.identity([]);return t.translate(e,e,[-100,-100,0]),e}}class de{constructor(t,e,n,r){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):r&&n?1:0,this.placed=n}isHidden(){return 0===this.opacity&&!this.placed}}class pe{constructor(t,e,n,r,i,o=!1){this.text=new de(t?t.text:null,e,n,i),this.icon=new de(t?t.icon:null,e,r,i),this.clipped=o}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class fe{constructor(t,e,n,r=!1){this.text=t,this.icon=e,this.skipFade=n,this.clipped=r}}class me{constructor(){this.invProjMatrix=t.create$1(),this.viewportMatrix=t.create$1(),this.circles=[]}}class ge{constructor(t,e,n,r,i){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=n,this.bucketIndex=r,this.tileID=i}}class ye{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:t=>t.collisionGroupID===e}}return this.collisionGroups[t]}}function ve(e,n,r,i,o){const{horizontalAlign:a,verticalAlign:s}=t.getAnchorAlignment(e),l=-(a-.5)*n,c=-(s-.5)*r,u=t.evaluateVariableOffset(e,i);return new t.pointGeometry(l+u[0]*o,c+u[1]*o)}function _e(e,n,r,i,o){const a=new t.pointGeometry(e,n);return r&&a._rotate(i?o:-o),a}class be{constructor(t,e,n,r,i){this.transform=t.clone(),this.collisionIndex=new he(this.transform,i),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new ye(n),this.collisionCircleArrays={},this.prevPlacement=r,r&&(r.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(e,n,r,i){const o=r.getBucket(n),a=r.latestFeatureIndex;if(!o||!a||n.id!==o.layerIds[0])return;const s=o.layers[0].layout,l=r.collisionBoxArray,c=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),u=r.tileSize/t.EXTENT,h=r.tileID.toUnwrapped(),d=this.transform.calculateProjMatrix(h),p="map"===s.get("text-pitch-alignment"),f="map"===s.get("text-rotation-alignment");n.compileFilter();const m=n.dynamicFilter(),g=n.dynamicFilterNeedsFeature(),y=this.transform.calculatePixelsToTileUnitsMatrix(r),v=Kt(d,p,f,this.transform,y);let _=null;if(p){const e=Yt(d,p,f,this.transform,y);_=t.multiply([],this.transform.labelPlaneMatrix,e)}let b=null;m&&r.latestFeatureIndex&&(b={unwrappedTileID:h,dynamicFilter:m,dynamicFilterNeedsFeature:g,featureIndex:r.latestFeatureIndex}),this.retainedQueryData[o.bucketInstanceId]=new ge(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,r.tileID);const x={bucket:o,layout:s,posMatrix:d,textLabelPlaneMatrix:v,labelToScreenMatrix:_,clippingData:b,scale:c,textPixelRatio:u,holdingForFade:r.holdingForFade(),collisionBoxArray:l,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:t.evaluateSizeForZoom(o.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(i)for(const t of o.sortKeyRanges){const{sortKey:n,symbolInstanceStart:r,symbolInstanceEnd:i}=t;e.push({sortKey:n,symbolInstanceStart:r,symbolInstanceEnd:i,parameters:x})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:x})}attemptAnchorPlacement(t,e,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,y){const v=[h.textOffset0,h.textOffset1],_=ve(t,n,r,v,i),b=this.collisionIndex.placeCollisionBox(i,e,_e(_.x,_.y,o,a,this.transform.angle),u,s,l,c.predicate);if((!m||0!==this.collisionIndex.placeCollisionBox(p.getSymbolInstanceIconSize(y,this.transform.zoom,d),m,_e(_.x,_.y,o,a,this.transform.angle),u,s,l,c.predicate).box.length)&&b.box.length>0){let e;return this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(e=this.prevPlacement.variableOffsets[h.crossTileID].anchor),this.variableOffsets[h.crossTileID]={textOffset:v,width:n,height:r,anchor:t,textScale:i,prevAnchor:e},this.markUsedJustification(p,t,h,f),p.allowVerticalPlacement&&(this.markUsedOrientation(p,f,h),this.placedOrientations[h.crossTileID]=f),{shift:_,placedGlyphBoxes:b}}}placeLayerBucketPart(e,n,r,i){const{bucket:o,layout:a,posMatrix:s,textLabelPlaneMatrix:l,labelToScreenMatrix:c,clippingData:u,textPixelRatio:h,holdingForFade:d,collisionBoxArray:p,partiallyEvaluatedTextSize:f,partiallyEvaluatedIconSize:m,collisionGroup:g}=e.parameters,y=a.get("text-optional"),v=a.get("icon-optional"),_=a.get("text-allow-overlap"),b=a.get("icon-allow-overlap"),x="map"===a.get("text-rotation-alignment"),w="map"===a.get("text-pitch-alignment"),E="none"!==a.get("icon-text-fit"),C="viewport-y"===a.get("symbol-z-order"),S=_&&(b||!o.hasIconData()||v),T=b&&(_||!o.hasTextData()||y);!o.collisionArrays&&p&&o.deserializeCollisionBoxes(p),r&&i&&o.updateCollisionDebugBuffers(this.transform.zoom,p);const O=(e,i,p)=>{if(u){const r={zoom:this.transform.zoom,pitch:this.transform.pitch};let i=null;if(u.dynamicFilterNeedsFeature){const t=this.retainedQueryData[o.bucketInstanceId];i=u.featureIndex.loadFeature({featureIndex:e.featureIndex,bucketIndex:t.bucketIndex,sourceLayerIndex:t.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,u.dynamicFilter)(r,i,this.retainedQueryData[o.bucketInstanceId].tileID.canonical,new t.pointGeometry(e.tileAnchorX,e.tileAnchorY),this.transform.calculateDistanceTileData(u.unwrappedTileID)))return this.placements[e.crossTileID]=new fe(!1,!1,!1,!0),void(n[e.crossTileID]=!0)}if(n[e.crossTileID])return;if(d)return void(this.placements[e.crossTileID]=new fe(!1,!1,!1));let C=!1,O=!1,I=!0,A=null,M={box:null,offscreen:null},k={box:null,offscreen:null},P=null,D=null,R=null,L=0,N=0,j=0;p.textFeatureIndex?L=p.textFeatureIndex:e.useRuntimeCollisionCircles&&(L=e.featureIndex),p.verticalTextFeatureIndex&&(N=p.verticalTextFeatureIndex);const F=t=>{t.tileID=this.retainedQueryData[o.bucketInstanceId].tileID,(this.transform.elevation||t.elevation)&&(t.elevation=this.transform.elevation?this.transform.elevation.getAtTileOffset(this.retainedQueryData[o.bucketInstanceId].tileID,t.tileAnchorX,t.tileAnchorY):0)},z=p.textBox;if(z){F(z);const n=n=>{let r=t.WritingMode.horizontal;if(o.allowVerticalPlacement&&!n&&this.prevPlacement){const t=this.prevPlacement.placedOrientations[e.crossTileID];t&&(this.placedOrientations[e.crossTileID]=t,r=t,this.markUsedOrientation(o,r,e))}return r},r=(n,r)=>{if(o.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&p.verticalTextBox){for(const e of o.writingModes)if(e===t.WritingMode.vertical?(M=r(),k=M):M=n(),M&&M.box&&M.box.length)break}else M=n()};if(a.get("text-variable-anchor")){let l=a.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[e.crossTileID]){const t=this.prevPlacement.variableOffsets[e.crossTileID];l.indexOf(t.anchor)>0&&(l=l.filter(e=>e!==t.anchor),l.unshift(t.anchor))}const c=(t,n,r)=>{const a=o.getSymbolInstanceTextSize(f,e,this.transform.zoom,i),c=(t.x2-t.x1)*a+2*t.padding,u=(t.y2-t.y1)*a+2*t.padding,d=E&&!b?n:null;d&&F(d);let p={box:[],offscreen:!1};const y=_?2*l.length:l.length;for(let n=0;n<y;++n){const y=this.attemptAnchorPlacement(l[n%l.length],t,c,u,a,x,w,h,s,g,n>=l.length,e,i,o,r,d,f,m);if(y&&(p=y.placedGlyphBoxes,p&&p.box&&p.box.length)){C=!0,A=y.shift;break}}return p};r(()=>c(z,p.iconBox,t.WritingMode.horizontal),()=>{const n=p.verticalTextBox;return n&&F(n),o.allowVerticalPlacement&&!(M&&M.box&&M.box.length)&&e.numVerticalGlyphVertices>0&&n?c(n,p.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}}),M&&(C=M.box,I=M.offscreen);const u=n(M&&M.box);if(!C&&this.prevPlacement){const t=this.prevPlacement.variableOffsets[e.crossTileID];t&&(this.variableOffsets[e.crossTileID]=t,this.markUsedJustification(o,t.anchor,e,u))}}else{const a=(n,r)=>{const a=o.getSymbolInstanceTextSize(f,e,this.transform.zoom,i),l=this.collisionIndex.placeCollisionBox(a,n,new t.pointGeometry(0,0),_,h,s,g.predicate);return l&&l.box&&l.box.length&&(this.markUsedOrientation(o,r,e),this.placedOrientations[e.crossTileID]=r),l};r(()=>a(z,t.WritingMode.horizontal),()=>{const n=p.verticalTextBox;return o.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&n?(F(n),a(n,t.WritingMode.vertical)):{box:null,offscreen:null}}),n(M&&M.box&&M.box.length)}}if(P=M,C=P&&P.box&&P.box.length>0,I=P&&P.offscreen,e.useRuntimeCollisionCircles){const n=o.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex>=0?e.centerJustifiedTextSymbolIndex:e.verticalPlacedTextSymbolIndex),i=t.evaluateSizeForFeature(o.textSizeData,f,n),u=a.get("text-padding");D=this.collisionIndex.placeCollisionCircles(_,n,o.lineVertexArray,o.glyphOffsetArray,i,s,l,c,r,w,g.predicate,e.collisionCircleDiameter*i/t.ONE_EM,u,this.retainedQueryData[o.bucketInstanceId].tileID),C=_||D.circles.length>0&&!D.collisionDetected,I=I&&D.offscreen}if(p.iconFeatureIndex&&(j=p.iconFeatureIndex),p.iconBox){const e=e=>{F(e);const n=E&&A?_e(A.x,A.y,x,w,this.transform.angle):new t.pointGeometry(0,0),r=o.getSymbolInstanceIconSize(m,this.transform.zoom,i);return this.collisionIndex.placeCollisionBox(r,e,n,b,h,s,g.predicate)};k&&k.box&&k.box.length&&p.verticalIconBox?(R=e(p.verticalIconBox),O=R.box.length>0):(R=e(p.iconBox),O=R.box.length>0),I=I&&R.offscreen}const B=y||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,U=v||0===e.numIconVertices;if(B||U?U?B||(O=O&&C):C=O&&C:O=C=O&&C,C&&P&&P.box&&this.collisionIndex.insertCollisionBox(P.box,a.get("text-ignore-placement"),o.bucketInstanceId,k&&k.box&&N?N:L,g.ID),O&&R&&this.collisionIndex.insertCollisionBox(R.box,a.get("icon-ignore-placement"),o.bucketInstanceId,j,g.ID),D&&(C&&this.collisionIndex.insertCollisionCircles(D.circles,a.get("text-ignore-placement"),o.bucketInstanceId,L,g.ID),r)){const t=o.bucketInstanceId;let e=this.collisionCircleArrays[t];void 0===e&&(e=this.collisionCircleArrays[t]=new me);for(let t=0;t<D.circles.length;t+=4)e.circles.push(D.circles[t+0]),e.circles.push(D.circles[t+1]),e.circles.push(D.circles[t+2]),e.circles.push(D.collisionDetected?1:0)}this.placements[e.crossTileID]=new fe(C||S,O||T,I||o.justReloaded),n[e.crossTileID]=!0};if(C){const t=o.getSortedSymbolIndexes(this.transform.angle);for(let e=t.length-1;e>=0;--e){const n=t[e];O(o.symbolInstances.get(n),n,o.collisionArrays[n])}}else for(let t=e.symbolInstanceStart;t<e.symbolInstanceEnd;t++)O(o.symbolInstances.get(t),t,o.collisionArrays[t]);if(r&&o.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[o.bucketInstanceId];t.invert(e.invProjMatrix,s),e.viewportMatrix=this.collisionIndex.getViewportMatrix()}o.justReloaded=!1}markUsedJustification(e,n,r,i){let o;o=i===t.WritingMode.vertical?r.verticalPlacedTextSymbolIndex:{left:r.leftJustifiedTextSymbolIndex,center:r.centerJustifiedTextSymbolIndex,right:r.rightJustifiedTextSymbolIndex}[t.getAnchorJustification(n)];const a=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex,r.verticalPlacedTextSymbolIndex];for(const t of a)t>=0&&(e.text.placedSymbolArray.get(t).crossTileID=o>=0&&t!==o?0:r.crossTileID)}markUsedOrientation(e,n,r){const i=n===t.WritingMode.horizontal||n===t.WritingMode.horizontalOnly?n:0,o=n===t.WritingMode.vertical?n:0,a=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex];for(const t of a)e.text.placedSymbolArray.get(t).placedOrientation=i;r.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).placedOrientation=o)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const e=this.prevPlacement;let n=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;const r=e?e.symbolFadeChange(t):1,i=e?e.opacities:{},o=e?e.variableOffsets:{},a=e?e.placedOrientations:{};for(const t in this.placements){const e=this.placements[t],o=i[t];o?(this.opacities[t]=new pe(o,r,e.text,e.icon,null,e.clipped),n=n||e.text!==o.text.placed||e.icon!==o.icon.placed):(this.opacities[t]=new pe(null,r,e.text,e.icon,e.skipFade,e.clipped),n=n||e.text||e.icon)}for(const t in i){const e=i[t];if(!this.opacities[t]){const i=new pe(e,r,!1,!1);i.isHidden()||(this.opacities[t]=i,n=n||e.text.placed||e.icon.placed)}}for(const t in o)this.variableOffsets[t]||!this.opacities[t]||this.opacities[t].isHidden()||(this.variableOffsets[t]=o[t]);for(const t in a)this.placedOrientations[t]||!this.opacities[t]||this.opacities[t].isHidden()||(this.placedOrientations[t]=a[t]);n?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)}updateLayerOpacities(t,e){const n={};for(const r of e){const e=r.getBucket(t);e&&r.latestFeatureIndex&&t.id===e.layerIds[0]&&this.updateBucketOpacities(e,n,r.collisionBoxArray)}}updateBucketOpacities(e,n,r){e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const i=e.layers[0].layout,o=!!e.layers[0].dynamicFilter(),a=new pe(null,0,!1,!1,!0),s=i.get("text-allow-overlap"),l=i.get("icon-allow-overlap"),c=i.get("text-variable-anchor"),u="map"===i.get("text-rotation-alignment"),h="map"===i.get("text-pitch-alignment"),d="none"!==i.get("icon-text-fit"),p=new pe(null,0,s&&(l||!e.hasIconData()||i.get("icon-optional")),l&&(s||!e.hasTextData()||i.get("text-optional")),!0);!e.collisionArrays&&r&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(r);const f=(t,e,n)=>{for(let r=0;r<e/4;r++)t.opacityVertexArray.emplaceBack(n)};for(let r=0;r<e.symbolInstances.length;r++){const i=e.symbolInstances.get(r),{numHorizontalGlyphVertices:s,numVerticalGlyphVertices:l,crossTileID:m}=i;let g=this.opacities[m];n[m]?g=a:g||(g=p,this.opacities[m]=g),n[m]=!0;const y=i.numIconVertices>0,v=this.placedOrientations[i.crossTileID],_=v===t.WritingMode.vertical,b=v===t.WritingMode.horizontal||v===t.WritingMode.horizontalOnly;if(s>0||l>0){const t=Ae(g.text);f(e.text,s,_?Me:t),f(e.text,l,b?Me:t);const n=g.text.isHidden();[i.rightJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.leftJustifiedTextSymbolIndex].forEach(t=>{t>=0&&(e.text.placedSymbolArray.get(t).hidden=n||_?1:0)}),i.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(i.verticalPlacedTextSymbolIndex).hidden=n||b?1:0);const r=this.variableOffsets[i.crossTileID];r&&this.markUsedJustification(e,r.anchor,i,v);const o=this.placedOrientations[i.crossTileID];o&&(this.markUsedJustification(e,"left",i,o),this.markUsedOrientation(e,o,i))}if(y){const t=Ae(g.icon);i.placedIconSymbolIndex>=0&&(f(e.icon,i.numIconVertices,_?Me:t),e.icon.placedSymbolArray.get(i.placedIconSymbolIndex).hidden=g.icon.isHidden()),i.verticalPlacedIconSymbolIndex>=0&&(f(e.icon,i.numVerticalIconVertices,b?Me:t),e.icon.placedSymbolArray.get(i.verticalPlacedIconSymbolIndex).hidden=g.icon.isHidden())}if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const n=e.collisionArrays[r];if(n){let r=new t.pointGeometry(0,0),i=!0;if(n.textBox||n.verticalTextBox){if(c){const t=this.variableOffsets[m];t?(r=ve(t.anchor,t.width,t.height,t.textOffset,t.textScale),u&&r._rotate(h?this.transform.angle:-this.transform.angle)):i=!1}o&&(i=!g.clipped),n.textBox&&xe(e.textCollisionBox.collisionVertexArray,g.text.placed,!i||_,r.x,r.y),n.verticalTextBox&&xe(e.textCollisionBox.collisionVertexArray,g.text.placed,!i||b,r.x,r.y)}const a=i&&Boolean(!b&&n.verticalIconBox);n.iconBox&&xe(e.iconCollisionBox.collisionVertexArray,g.icon.placed,a,d?r.x:0,d?r.y:0),n.verticalIconBox&&xe(e.iconCollisionBox.collisionVertexArray,g.icon.placed,!a,d?r.x:0,d?r.y:0)}}}if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=t.invProjMatrix,e.placementViewportMatrix=t.viewportMatrix,e.collisionCircleArray=t.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}}symbolFadeChange(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,e){const n=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*n>t}setStale(){this.stale=!0}}function xe(t,e,n,r,i){t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0)}const we=Math.pow(2,25),Ee=Math.pow(2,24),Ce=Math.pow(2,17),Se=Math.pow(2,16),Te=Math.pow(2,9),Oe=Math.pow(2,8),Ie=Math.pow(2,1);function Ae(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;const e=t.placed?1:0,n=Math.floor(127*t.opacity);return n*we+e*Ee+n*Ce+e*Se+n*Te+e*Oe+n*Ie+e}const Me=0;class ke{constructor(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,e,n,r,i){const o=this._bucketParts;for(;this._currentTileIndex<t.length;)if(e.getBucketParts(o,r,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,i())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort((t,e)=>t.sortKey-e.sortKey));this._currentPartIndex<o.length;){const t=o[this._currentPartIndex];if(e.placeLayerBucketPart(t,this._seenCrossTileIDs,n,0===t.symbolInstanceStart),this._currentPartIndex++,i())return!0}return!1}}class Pe{constructor(t,e,n,r,i,o,a,s){this.placement=new be(t,i,o,a,s),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1}isDone(){return this._done}continuePlacement(e,n,r){const i=t.exported.now(),o=()=>{const e=t.exported.now()-i;return!this._forceFullPlacement&&e>2};for(;this._currentPlacementIndex>=0;){const t=n[e[this._currentPlacementIndex]],i=this.placement.collisionIndex.transform.zoom;if("symbol"===t.type&&(!t.minzoom||t.minzoom<=i)&&(!t.maxzoom||t.maxzoom>i)){if(this._inProgressLayer||(this._inProgressLayer=new ke(t)),this._inProgressLayer.continuePlacement(r[t.source],this.placement,this._showCollisionBoxes,t,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const De=512/t.EXTENT/2;class Re{constructor(t,e,n){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(let n=0;n<e.length;n++){const r=e.get(n),i=r.key;this.indexedSymbolInstances[i]||(this.indexedSymbolInstances[i]=[]),this.indexedSymbolInstances[i].push({crossTileID:r.crossTileID,coord:this.getScaledCoordinates(r,t)})}}getScaledCoordinates(e,n){const r=De/Math.pow(2,n.canonical.z-this.tileID.canonical.z);return{x:Math.floor((n.canonical.x*t.EXTENT+e.tileAnchorX)*r),y:Math.floor((n.canonical.y*t.EXTENT+e.tileAnchorY)*r)}}findMatches(t,e,n){const r=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z);for(let i=0;i<t.length;i++){const o=t.get(i);if(o.crossTileID)continue;const a=this.indexedSymbolInstances[o.key];if(!a)continue;const s=this.getScaledCoordinates(o,e);for(const t of a)if(Math.abs(t.coord.x-s.x)<=r&&Math.abs(t.coord.y-s.y)<=r&&!n[t.crossTileID]){n[t.crossTileID]=!0,o.crossTileID=t.crossTileID;break}}}}class Le{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ne{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const e=Math.round((t-this.lng)/360);if(0!==e)for(const t in this.indexes){const n=this.indexes[t],r={};for(const t in n){const i=n[t];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+e),r[i.tileID.key]=i}this.indexes[t]=r}this.lng=t}addBucket(t,e,n){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let t=0;t<e.symbolInstances.length;t++)e.symbolInstances.get(t).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});const r=this.usedCrossTileIDs[t.overscaledZ];for(const n in this.indexes){const i=this.indexes[n];if(Number(n)>t.overscaledZ)for(const n in i){const o=i[n];o.tileID.isChildOf(t)&&o.findMatches(e.symbolInstances,t,r)}else{const o=i[t.scaledTo(Number(n)).key];o&&o.findMatches(e.symbolInstances,t,r)}}for(let t=0;t<e.symbolInstances.length;t++){const i=e.symbolInstances.get(t);i.crossTileID||(i.crossTileID=n.generate(),r[i.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Re(t,e.symbolInstances,e.bucketInstanceId),!0}removeBucketCrossTileIDs(t,e){for(const n in e.indexedSymbolInstances)for(const r of e.indexedSymbolInstances[n])delete this.usedCrossTileIDs[t][r.crossTileID]}removeStaleBuckets(t){let e=!1;for(const n in this.indexes){const r=this.indexes[n];for(const i in r)t[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],e=!0)}return e}}class je{constructor(){this.layerIndexes={},this.crossTileIDs=new Le,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,e,n){let r=this.layerIndexes[t.id];void 0===r&&(r=this.layerIndexes[t.id]=new Ne);let i=!1;const o={};r.handleWrapJump(n);for(const n of e){const e=n.getBucket(t);e&&t.id===e.layerIds[0]&&(e.bucketInstanceId||(e.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(n.tileID,e,this.crossTileIDs)&&(i=!0),o[e.bucketInstanceId]=!0)}return r.removeStaleBuckets(o)&&(i=!0),i}pruneUnusedLayers(t){const e={};t.forEach(t=>{e[t]=!0});for(const t in this.layerIndexes)e[t]||delete this.layerIndexes[t]}}const Fe=(e,n)=>t.emitValidationErrors(e,n&&n.filter(t=>"source.canvas"!==t.identifier)),ze=t.pick(Ft,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Be=t.pick(Ft,["setCenter","setZoom","setBearing","setPitch"]),Ue=function(){const e={},n=t.spec.$version;for(const r in t.spec.$root){const i=t.spec.$root[r];if(i.required){let t=null;t="version"===r?n:"array"===i.type?[]:{},null!=t&&(e[r]=t)}}return e}(),Ge={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Ve extends t.Evented{constructor(e,n={}){super(),this.map=e,this.dispatcher=new A(Lt(),this),this.imageManager=new y,this.imageManager.setEventedParent(this),this.glyphManager=new t.GlyphManager(e._requestManager,n.localFontFamily?t.LocalGlyphMode.all:n.localIdeographFontFamily?t.LocalGlyphMode.ideographs:t.LocalGlyphMode.none,n.localFontFamily||n.localIdeographFontFamily),this.lineAtlas=new t.LineAtlas(256,512),this.crossTileSymbolIndex=new je,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());const r=this;this._rtlTextPluginCallback=Ve.registerForPluginStateChange(e=>{r.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e.pluginStatus,pluginURL:e.pluginURL},(e,n)=>{if(t.triggerPluginCompletionEvent(e),n&&n.every(t=>t))for(const t in r._sourceCaches){const e=r._sourceCaches[t],n=e.getSource().type;"vector"!==n&&"geojson"!==n||e.reload()}})}),this.on("data",t=>{if("source"!==t.dataType||"metadata"!==t.sourceDataType)return;const e=this.getSource(t.sourceId);if(e&&e.vectorLayerIds)for(const t in this._layers){const n=this._layers[t];n.source===e.id&&this._validateLayer(n)}})}loadURL(e,n={}){this.fire(new t.Event("dataloading",{dataType:"style"}));const r="boolean"==typeof n.validate?n.validate:!t.isMapboxURL(e);e=this.map._requestManager.normalizeStyleURL(e,n.accessToken);const i=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(i,(e,n)=>{this._request=null,e?this.fire(new t.ErrorEvent(e)):n&&this._load(n,r)})}loadJSON(e,n={}){this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.exported.frame(()=>{this._request=null,this._load(e,!1!==n.validate)})}loadEmpty(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(Ue,!1)}_updateLayerCount(t,e){const n=e?1:-1;t.is3D()&&(this._num3DLayers+=n),"circle"===t.type&&(this._numCircleLayers+=n),"symbol"===t.type&&(this._numSymbolLayers+=n)}_load(e,n){if(n&&Fe(this,t.validateStyle(e)))return;this._loaded=!0,this.stylesheet=e,this.updateProjection();for(const t in e.sources)this.addSource(t,e.sources[t],{validate:!1});this._changed=!1,e.sprite?this._loadSprite(e.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(e.glyphs);const r=jt(this.stylesheet.layers);this._order=r.map(t=>t.id),this._layers={},this._serializedLayers={};for(let e of r)e=t.createStyleLayer(e),e.setEventedParent(this,{layer:{id:e.id}}),this._layers[e.id]=e,this._serializedLayers[e.id]=e.serialize(),this._updateLayerCount(e,!0);this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new b(this.stylesheet.light),this.stylesheet.terrain&&this._createTerrain(this.stylesheet.terrain),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}setProjection(t){t?this.stylesheet.projection=t:delete this.stylesheet.projection,this.updateProjection()}updateProjection(){const t=this.map.transform.setProjection(this.map._runtimeProjection||(this.stylesheet?this.stylesheet.projection:void 0));if(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),t){this.map.painter.clearBackgroundTiles();for(const t in this._sourceCaches)this._sourceCaches[t].clearTiles();this.map._update(!0)}}_loadSprite(e){this._spriteRequest=function(e,n,r){let i,o,a;const s=t.exported.devicePixelRatio>1?"@2x":"";let l=t.getJSON(n.transformRequest(n.normalizeSpriteURL(e,s,".json"),t.ResourceType.SpriteJSON),(t,e)=>{l=null,a||(a=t,i=e,u())}),c=t.getImage(n.transformRequest(n.normalizeSpriteURL(e,s,".png"),t.ResourceType.SpriteImage),(t,e)=>{c=null,a||(a=t,o=e,u())});function u(){if(a)r(a);else if(i&&o){const e=t.exported.getImageData(o),n={};for(const r in i){const{width:o,height:a,x:s,y:l,sdf:c,pixelRatio:u,stretchX:h,stretchY:d,content:p}=i[r],f=new t.RGBAImage({width:o,height:a});t.RGBAImage.copy(e,f,{x:s,y:l},{x:0,y:0},{width:o,height:a}),n[r]={data:f,pixelRatio:u,sdf:c,stretchX:h,stretchY:d,content:p}}r(null,n)}}return{cancel(){l&&(l.cancel(),l=null),c&&(c.cancel(),c=null)}}}(e,this.map._requestManager,(e,n)=>{if(this._spriteRequest=null,e)this.fire(new t.ErrorEvent(e));else if(n)for(const t in n)this.imageManager.addImage(t,n[t]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new t.Event("data",{dataType:"style"}))})}_validateLayer(e){const n=this.getSource(e.source);if(!n)return;const r=e.sourceLayer;r&&("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(r))&&this.fire(new t.ErrorEvent(new Error(`Source layer "${r}" does not exist on source "${n.id}" as specified by style layer "${e.id}"`)))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const t in this._sourceCaches)if(!this._sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(t){const e=[];for(const n of t){const t=this._layers[n];"custom"!==t.type&&e.push(t.serialize())}return e}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;if(this.fog&&this.fog.hasTransition())return!0;for(const t in this._sourceCaches)if(this._sourceCaches[t].hasTransition())return!0;for(const t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(t){return!!this.terrain&&Ge[t.type]}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(e){if(!this._loaded)return;const n=this._changed;if(this._changed){const t=Object.keys(this._updatedLayers),n=Object.keys(this._removedLayers);(t.length||n.length)&&this._updateWorkerLayers(t,n);for(const t in this._updatedSources){const e=this._updatedSources[t];"reload"===e?this._reloadSource(t):"clear"===e&&this._clearSource(t)}this._updateTilesForChangedImages();for(const t in this._updatedPaintProps)this._layers[t].updateTransitions(e);this.light.updateTransitions(e),this.fog&&this.fog.updateTransitions(e),this._resetUpdates()}const r={};for(const t in this._sourceCaches){const e=this._sourceCaches[t];r[t]=e.used,e.used=!1}for(const t of this._order){const n=this._layers[t];if(n.recalculate(e,this._availableImages),!n.isHidden(e.zoom)){const t=this._getLayerSourceCache(n);t&&(t.used=!0)}const r=this.map.painter;if(r){const t=n.getProgramIds();if(!t)continue;const i=n.getProgramConfiguration(e.zoom);for(const e of t)r.useProgram(e,i)}}for(const e in r){const n=this._sourceCaches[e];r[e]!==n.used&&n.getSource().fire(new t.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:n.getSource().id}))}this.light.recalculate(e),this.terrain&&this.terrain.recalculate(e),this.fog&&this.fog.recalculate(e),this.z=e.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),n&&this.fire(new t.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const e in this._sourceCaches)this._sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateWorkerLayers(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(e){if(this._checkLoaded(),Fe(this,t.validateStyle(e)))return!1;(e=t.clone$2(e)).layers=jt(e.layers);const n=function(t,e){if(!t)return[{command:Ft.setStyle,args:[e]}];let n=[];try{if(!i(t.version,e.version))return[{command:Ft.setStyle,args:[e]}];i(t.center,e.center)||n.push({command:Ft.setCenter,args:[e.center]}),i(t.zoom,e.zoom)||n.push({command:Ft.setZoom,args:[e.zoom]}),i(t.bearing,e.bearing)||n.push({command:Ft.setBearing,args:[e.bearing]}),i(t.pitch,e.pitch)||n.push({command:Ft.setPitch,args:[e.pitch]}),i(t.sprite,e.sprite)||n.push({command:Ft.setSprite,args:[e.sprite]}),i(t.glyphs,e.glyphs)||n.push({command:Ft.setGlyphs,args:[e.glyphs]}),i(t.transition,e.transition)||n.push({command:Ft.setTransition,args:[e.transition]}),i(t.light,e.light)||n.push({command:Ft.setLight,args:[e.light]}),i(t.fog,e.fog)||n.push({command:Ft.setFog,args:[e.fog]}),i(t.projection,e.projection)||n.push({command:Ft.setProjection,args:[e.projection]});const r={},o=[];!function(t,e,n,r){let o;for(o in e=e||{},t=t||{})t.hasOwnProperty(o)&&(e.hasOwnProperty(o)||Bt(o,n,r));for(o in e)e.hasOwnProperty(o)&&(t.hasOwnProperty(o)?i(t[o],e[o])||("geojson"===t[o].type&&"geojson"===e[o].type&&Gt(t,e,o)?n.push({command:Ft.setGeoJSONSourceData,args:[o,e[o].data]}):Ut(o,e,n,r)):zt(o,e,n))}(t.sources,e.sources,o,r);const a=[];t.layers&&t.layers.forEach(t=>{r[t.source]?n.push({command:Ft.removeLayer,args:[t.id]}):a.push(t)});let s=t.terrain;s&&r[s.source]&&(n.push({command:Ft.setTerrain,args:[void 0]}),s=void 0),n=n.concat(o),i(s,e.terrain)||n.push({command:Ft.setTerrain,args:[e.terrain]}),function(t,e,n){e=e||[];const r=(t=t||[]).map(qt),o=e.map(qt),a=t.reduce(Ht,{}),s=e.reduce(Ht,{}),l=r.slice(),c=Object.create(null);let u,h,d,p,f,m,g;for(u=0,h=0;u<r.length;u++)d=r[u],s.hasOwnProperty(d)?h++:(n.push({command:Ft.removeLayer,args:[d]}),l.splice(l.indexOf(d,h),1));for(u=0,h=0;u<o.length;u++)d=o[o.length-1-u],l[l.length-1-u]!==d&&(a.hasOwnProperty(d)?(n.push({command:Ft.removeLayer,args:[d]}),l.splice(l.lastIndexOf(d,l.length-h),1)):h++,m=l[l.length-u],n.push({command:Ft.addLayer,args:[s[d],m]}),l.splice(l.length-u,0,d),c[d]=!0);for(u=0;u<o.length;u++)if(d=o[u],p=a[d],f=s[d],!c[d]&&!i(p,f))if(i(p.source,f.source)&&i(p["source-layer"],f["source-layer"])&&i(p.type,f.type)){for(g in Vt(p.layout,f.layout,n,d,null,Ft.setLayoutProperty),Vt(p.paint,f.paint,n,d,null,Ft.setPaintProperty),i(p.filter,f.filter)||n.push({command:Ft.setFilter,args:[d,f.filter]}),i(p.minzoom,f.minzoom)&&i(p.maxzoom,f.maxzoom)||n.push({command:Ft.setLayerZoomRange,args:[d,f.minzoom,f.maxzoom]}),p)p.hasOwnProperty(g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?Vt(p[g],f[g],n,d,g.slice(6),Ft.setPaintProperty):i(p[g],f[g])||n.push({command:Ft.setLayerProperty,args:[d,g,f[g]]}));for(g in f)f.hasOwnProperty(g)&&!p.hasOwnProperty(g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?Vt(p[g],f[g],n,d,g.slice(6),Ft.setPaintProperty):i(p[g],f[g])||n.push({command:Ft.setLayerProperty,args:[d,g,f[g]]}))}else n.push({command:Ft.removeLayer,args:[d]}),m=l[l.lastIndexOf(d)+1],n.push({command:Ft.addLayer,args:[f,m]})}(a,e.layers,n)}catch(t){console.warn("Unable to compute style diff:",t),n=[{command:Ft.setStyle,args:[e]}]}return n}(this.serialize(),e).filter(t=>!(t.command in Be));if(0===n.length)return!1;const r=n.filter(t=>!(t.command in ze));if(r.length>0)throw new Error(`Unimplemented: ${r.map(t=>t.command).join(", ")}.`);return n.forEach(t=>{"setTransition"!==t.command&&this[t.command].apply(this,t.args)}),this.stylesheet=e,!0}addImage(e,n){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,n),this._afterImageUpdated(e)}updateImage(t,e){this.imageManager.updateImage(t,e)}getImage(t){return this.imageManager.getImage(t)}removeImage(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(e,n,r={}){if(this._checkLoaded(),void 0!==this.getSource(e))throw new Error("There is already a source with this ID");if(!n.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(n).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(t.validateStyle.source,"sources."+e,n,null,r))return;this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);const i=Tt(e,n,this.dispatcher,this);i.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:i.serialize(),sourceId:e}));const o=n=>{const r=(n?"symbol:":"other:")+e,o=this._sourceCaches[r]=new t.SourceCache(r,i,n);(n?this._symbolSourceCaches:this._otherSourceCaches)[e]=o,o.style=this,o.onAdd(this.map)};o(!1),"vector"!==n.type&&"geojson"!==n.type||o(!0),i.onAdd&&i.onAdd(this.map),this._changed=!0}removeSource(e){this._checkLoaded();const n=this.getSource(e);if(void 0===n)throw new Error("There is no source with this ID");for(const n in this._layers)if(this._layers[n].source===e)return this.fire(new t.ErrorEvent(new Error(`Source "${e}" cannot be removed while layer "${n}" is using it.`)));if(this.terrain&&this.terrain.get().source===e)return this.fire(new t.ErrorEvent(new Error(`Source "${e}" cannot be removed while terrain is using it.`)));const r=this._getSourceCaches(e);for(const e of r)delete this._sourceCaches[e.id],delete this._updatedSources[e.id],e.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e.getSource().id})),e.setEventedParent(null),e.clearTiles();delete this._otherSourceCaches[e],delete this._symbolSourceCaches[e],n.setEventedParent(null),n.onRemove&&n.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(t,e){this._checkLoaded(),this.getSource(t).setData(e),this._changed=!0}getSource(t){const e=this._getSourceCache(t);return e&&e.getSource()}addLayer(e,n,r={}){this._checkLoaded();const i=e.id;if(this.getLayer(i))return void this.fire(new t.ErrorEvent(new Error(`Layer with id "${i}" already exists on this map`)));let o;if("custom"===e.type){if(Fe(this,t.validateCustomStyleLayer(e)))return;o=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(i,e.source),e=t.clone$2(e),e=t.extend(e,{source:i})),this._validate(t.validateStyle.layer,"layers."+i,e,{arrayIndex:-1},r))return;o=t.createStyleLayer(e),this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}}),this._serializedLayers[o.id]=o.serialize(),this._updateLayerCount(o,!0)}const a=n?this._order.indexOf(n):this._order.length;if(n&&-1===a)return void this.fire(new t.ErrorEvent(new Error(`Layer with id "${n}" does not exist on this map.`)));this._order.splice(a,0,i),this._layerOrderChanged=!0,this._layers[i]=o;const s=this._getLayerSourceCache(o);if(this._removedLayers[i]&&o.source&&s&&"custom"!==o.type){const t=this._removedLayers[i];delete this._removedLayers[i],t.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",s.pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(e,n){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)));if(e===n)return;const r=this._order.indexOf(e);this._order.splice(r,1);const i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new t.ErrorEvent(new Error(`Layer with id "${n}" does not exist on this map.`))):(this._order.splice(i,0,e),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(e){this._checkLoaded();const n=this._layers[e];if(!n)return void this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be removed.`)));n.setEventedParent(null),this._updateLayerCount(n,!1);const r=this._order.indexOf(e);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],n.onRemove&&n.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(t){return this._layers[t]}hasLayer(t){return t in this._layers}hasLayerType(t){for(const e in this._layers)if(this._layers[e].type===t)return!0;return!1}setLayerZoomRange(e,n,r){this._checkLoaded();const i=this.getLayer(e);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(e,n,r={}){this._checkLoaded();const o=this.getLayer(e);if(o){if(!i(o.filter,n))return null==n?(o.filter=void 0,void this._updateLayer(o)):void(this._validate(t.validateStyle.filter,`layers.${o.id}.filter`,n,{layerType:o.type},r)||(o.filter=t.clone$2(n),this._updateLayer(o)))}else this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be filtered.`)))}getFilter(e){return t.clone$2(this.getLayer(e).filter)}setLayoutProperty(e,n,r,o={}){this._checkLoaded();const a=this.getLayer(e);a?i(a.getLayoutProperty(n),r)||(a.setLayoutProperty(n,r,o),this._updateLayer(a)):this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(e,n){const r=this.getLayer(e);if(r)return r.getLayoutProperty(n);this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style.`)))}setPaintProperty(e,n,r,o={}){this._checkLoaded();const a=this.getLayer(e);a?i(a.getPaintProperty(n),r)||(a.setPaintProperty(n,r,o)&&this._updateLayer(a),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(t,e){return this.getLayer(t).getPaintProperty(e)}setFeatureState(e,n){this._checkLoaded();const r=e.source,i=e.sourceLayer,o=this.getSource(r);if(void 0===o)return void this.fire(new t.ErrorEvent(new Error(`The source '${r}' does not exist in the map's style.`)));const a=o.type;if("geojson"===a&&i)return void this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===a&&!i)return void this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided.")));const s=this._getSourceCaches(r);for(const t of s)t.setFeatureState(i,e.id,n)}removeFeatureState(e,n){this._checkLoaded();const r=e.source,i=this.getSource(r);if(void 0===i)return void this.fire(new t.ErrorEvent(new Error(`The source '${r}' does not exist in the map's style.`)));const o=i.type,a="vector"===o?e.sourceLayer:void 0;if("vector"===o&&!a)return void this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(n&&"string"!=typeof e.id&&"number"!=typeof e.id)return void this.fire(new t.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const s=this._getSourceCaches(r);for(const t of s)t.removeFeatureState(a,e.id,n)}getFeatureState(e){this._checkLoaded();const n=e.source,r=e.sourceLayer,i=this.getSource(n);if(void 0!==i){if("vector"!==i.type||r)return void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(n)[0].getFeatureState(r,e.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error(`The source '${n}' does not exist in the map's style.`)))}getTransition(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const e={};for(const t in this._sourceCaches){const n=this._sourceCaches[t].getSource();e[n.id]||(e[n.id]=n.serialize())}return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.stylesheet.terrain,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:e,layers:this._serializeLayers(this._order)},t=>void 0!==t)}_updateLayer(t){this._updatedLayers[t.id]=!0;const e=this._getLayerSourceCache(t);t.source&&!this._updatedSources[t.source]&&e&&"raster"!==e.getSource().type&&(this._updatedSources[t.source]="reload",e.pause()),this._changed=!0,t.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(t){const e=t=>"fill-extrusion"===this._layers[t].type,n={},r=[];for(let i=this._order.length-1;i>=0;i--){const o=this._order[i];if(e(o)){n[o]=i;for(const e of t){const t=e[o];if(t)for(const e of t)r.push(e)}}}r.sort((t,e)=>e.intersectionZ-t.intersectionZ);const i=[];for(let o=this._order.length-1;o>=0;o--){const a=this._order[o];if(e(a))for(let t=r.length-1;t>=0;t--){const e=r[t].feature;if(n[e.layer.id]<o)break;i.push(e),r.pop()}else for(const e of t){const t=e[a];if(t)for(const e of t)i.push(e.feature)}}return i}queryRenderedFeatures(e,n,r){n&&n.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",n.filter,null,n);const i={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const e of n.layers){const n=this._layers[e];if(!n)return this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be queried for features.`))),[];i[n.source]=!0}}const o=[];n.availableImages=this._availableImages;const a=n&&n.layers?n.layers.some(t=>{const e=this.getLayer(t);return e&&e.is3D()}):this.has3DLayers(),s=k.createFromScreenPoints(e,r);for(const t in this._sourceCaches){const e=this._sourceCaches[t].getSource().id;n.layers&&!i[e]||o.push(It(this._sourceCaches[t],this._layers,this._serializedLayers,s,n,r,a,!!this.map._showQueryGeometry))}return this.placement&&o.push(function(t,e,n,r,i,o,a){const s={},l=o.queryRenderedSymbols(r),c=[];for(const t of Object.keys(l).map(Number))c.push(a[t]);c.sort(Mt);for(const n of c){const r=n.featureIndex.lookupSymbolFeatures(l[n.bucketInstanceId],e,n.bucketIndex,n.sourceLayerIndex,i.filter,i.layers,i.availableImages,t);for(const t in r){const e=s[t]=s[t]||[],i=r[t];i.sort((t,e)=>{const r=n.featureSortOrder;if(r){const n=r.indexOf(t.featureIndex);return r.indexOf(e.featureIndex)-n}return e.featureIndex-t.featureIndex});for(const t of i)e.push(t)}}for(const e in s)s[e].forEach(r=>{const i=r.feature,o=n(t[e]).getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=o});return s}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),s.screenGeometry,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(o)}querySourceFeatures(e,n){n&&n.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",n.filter,null,n);const r=this._getSourceCaches(e);let i=[];for(const t of r)i=i.concat(At(t,n));return i}addSourceType(t,e,n){return Ve.getSourceType(t)?n(new Error(`A source type called "${t}" already exists.`)):(Ve.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},n):n(null,null))}getLight(){return this.light.getLight()}setLight(e,n={}){this._checkLoaded();const r=this.light.getLight();let o=!1;for(const t in e)if(!i(e[t],r[t])){o=!0;break}if(!o)return;const a={now:t.exported.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,n),this.light.updateTransitions(a)}getTerrain(){return this.terrain?this.terrain.get():null}setTerrain(e){if(this._checkLoaded(),!e)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if("object"==typeof e.source){const n="terrain-dem-src";this.addSource(n,e.source),e=t.clone$2(e),e=t.extend(e,{source:n})}if(!this._validate(t.validateStyle.terrain,"terrain",e)){if(this.terrain){const n=this.terrain,r=n.get();for(const o in e)if(!i(e[o],r[o])){n.set(e),this.stylesheet.terrain=e;const r={now:t.exported.now(),transition:t.extend({duration:0},this.stylesheet.transition)};n.updateTransitions(r);break}}else this._createTerrain(e);this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}}_createFog(e){const n=this.fog=new I(e,this.map.transform);this.stylesheet.fog=e;const r={now:t.exported.now(),transition:t.extend({duration:0},this.stylesheet.transition)};n.updateTransitions(r)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask(()=>{for(const t of this.map._markers)t._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(e){if(this._checkLoaded(),!e)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const n=this.fog,r=n.get();for(const o in e)if(!i(e[o],r[o])){n.set(e),this.stylesheet.fog=e;const r={now:t.exported.now(),transition:t.extend({duration:0},this.stylesheet.transition)};n.updateTransitions(r);break}}else this._createFog(e);this._markersNeedUpdate=!0}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const t=this._order.filter(t=>this.isLayerDraped(this._layers[t])),e=this._order.filter(t=>!this.isLayerDraped(this._layers[t]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...t),this._drapedFirstOrder.push(...e)}_createTerrain(e){const n=this.terrain=new E(e);this.stylesheet.terrain=e,this.dispatcher.broadcast("enableTerrain",!0),this._force3DLayerUpdate();const r={now:t.exported.now(),transition:t.extend({duration:0},this.stylesheet.transition)};n.updateTransitions(r)}_force3DLayerUpdate(){for(const t in this._layers){const e=this._layers[t];"fill-extrusion"===e.type&&this._updateLayer(e)}}_validate(e,n,r,i,o={}){return(!o||!1!==o.validate)&&Fe(this,e.call(t.validateStyle,t.extend({key:n,style:this.serialize(),value:r,styleSpec:t.spec},i)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const t in this._layers)this._layers[t].setEventedParent(null);for(const t in this._sourceCaches)this._sourceCaches[t].clearTiles(),this._sourceCaches[t].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(t){const e=this._getSourceCaches(t);for(const t of e)t.clearTiles()}_reloadSource(t){const e=this._getSourceCaches(t);for(const t of e)t.resume(),t.reload()}_updateSources(t){for(const e in this._sourceCaches)this._sourceCaches[e].update(t)}_generateCollisionBoxes(){for(const t in this._sourceCaches){const e=this._sourceCaches[t];e.resume(),e.reload()}}_updatePlacement(e,n,r,i,o=!1){let a=!1,s=!1;const l={};for(const t of this._order){const n=this._layers[t];if("symbol"!==n.type)continue;if(!l[n.source]){const t=this._getLayerSourceCache(n);if(!t)continue;l[n.source]=t.getRenderableIds(!0).map(e=>t.getTileByID(e)).sort((t,e)=>e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1))}const r=this.crossTileSymbolIndex.addLayer(n,l[n.source],e.center.lng);a=a||r}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),o=o||this._layerOrderChanged||0===r,this._layerOrderChanged&&this.fire(new t.Event("neworder")),(o||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.exported.now(),e.zoom))&&(this.pauseablePlacement=new Pe(e,this._order,o,n,r,i,this.placement,this.fog&&!this.fog.isSoftDisabled()?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.exported.now()),s=!0),a&&this.pauseablePlacement.placement.setStale()),s||a)for(const t of this._order){const e=this._layers[t];"symbol"===e.type&&this.placement.updateLayerOpacities(e,l[e.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.exported.now())}_releaseSymbolFadeTiles(){for(const t in this._sourceCaches)this._sourceCaches[t].releaseSymbolFadeTiles()}getImages(t,e,n){this.imageManager.getImages(e.icons,n),this._updateTilesForChangedImages();const r=t=>{t&&t.setDependencies(e.tileID.key,e.type,e.icons)};r(this._otherSourceCaches[e.source]),r(this._symbolSourceCaches[e.source])}getGlyphs(t,e,n){this.glyphManager.getGlyphs(e.stacks,n)}getResource(e,n,r){return t.makeRequest(n,r)}_getSourceCache(t){return this._otherSourceCaches[t]}_getLayerSourceCache(t){return"symbol"===t.type?this._symbolSourceCaches[t.source]:this._otherSourceCaches[t.source]}_getSourceCaches(t){const e=[];return this._otherSourceCaches[t]&&e.push(this._otherSourceCaches[t]),this._symbolSourceCaches[t]&&e.push(this._symbolSourceCaches[t]),e}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}}Ve.getSourceType=function(t){return St[t]},Ve.setSourceType=function(t,e){St[t]=e},Ve.registerForPluginStateChange=t.registerForPluginStateChange;var qe="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}\n#endif",He="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}";let We={},Ze={};We=Xe("","\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else \nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {return currentElevation(apos);}\n#endif\nfloat unpack_depth(vec4 rgba_depth)\n{const vec4 bit_shift=vec4(1.0/(256.0*256.0*256.0),1.0/(256.0*256.0),1.0/256.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",!0),Ze=Xe("#ifdef FOG\nuniform float u_fog_temporal_offset;float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif","#ifdef FOG\nuniform mat4 u_fog_matrix;vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",!0);const $e=Xe("\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}\n#ifdef TERRAIN\nhighp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(256.0*256.0*256.0,256.0*256.0,256.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/256.0,1.0/256.0,1.0/256.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}\n#endif","\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#if defined(PROJECTION_GLOBE_VIEW) && !defined(PROJECTED_POS_ON_VIEWPORT)\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {\n#if defined(PROJECTION_GLOBE_VIEW) && !defined(PROJECTED_POS_ON_VIEWPORT)\nreturn mix(globe,mercator,t);\n#else\nreturn globe;\n#endif\n}vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),Ke=qe;var Ye={background:Xe("uniform vec4 u_color;uniform float u_opacity;void main() {vec4 out_color=u_color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:Xe("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_mix);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:Xe("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float height=circle_elevation(circle_center);vec4 world_center=vec4(circle_center,height,1);vec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);vec4 occlusion_world_center=vec4(circle_center,cantilevered_height,1);vec4 occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nvec4 occlusion_world_center=world_center;vec4 occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:Xe("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Xe("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\ngl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;attribute float a_scale;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);\n#ifdef PROJECTION_GLOBE_VIEW\nextrude*=a_scale;vec3 normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));vec3 globePos=a_pos_3+xAxis*extrude.x+yAxis*extrude.y+elevationVector(tilePos)*elevation(tilePos);vec3 mercPos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+xAxis*extrude.x+yAxis*extrude.y;vec3 pos=mix_globe_mercator(globePos,mercPos,u_zoom_transition);\n#else\nvec3 pos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:Xe("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Xe("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Xe("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Xe("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);}"),fill:Xe("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:Xe("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:Xe("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=mix(color1,color2,u_fade);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:Xe("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:Xe("varying vec4 v_color;void main() {vec4 color=v_color;\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 pos=vec3(pos_nx.xy,h);\n#else\nvec3 pos=vec3(pos_nx.xy,t > 0.0 ? height : base);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.rgb+=clamp(color.rgb*directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:Xe("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);out_color=out_color*v_lighting;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 p=vec3(pos_nx.xy,h);\n#else\nvec3 p=vec3(pos_nx.xy,z);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:Xe("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos);float f=getElevation(v_pos+vec2(epsilon.x,0));float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float h=getElevation(v_pos+vec2(0,epsilon.y));float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Xe("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:Xe("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;uniform float u_mix;uniform vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;varying highp vec2 v_uv;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash_from\n#pragma mapbox: initialize lowp vec4 dash_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist_a=texture2D(u_dash_image,v_tex_a).a;float sdfdist_b=texture2D(u_dash_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfwidth=min(dash_from.z*u_scale.y,dash_to.z*u_scale.z);float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/sdfwidth;alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\n#ifdef RENDER_LINE_GRADIENT\nvec4 out_color=texture2D(u_gradient_image,v_uv);\n#else\nvec4 out_color=color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#ifdef RENDER_LINE_GRADIENT\nattribute vec3 a_packed;\n#else\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform mediump vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;varying highp vec2 v_uv;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash_from\n#pragma mapbox: initialize lowp vec4 dash_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];float a_linesofar=a_packed[2];highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);\n#endif\n#ifdef RENDER_LINE_DASH\nfloat tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;float scaleA=dash_from.z==0.0 ? 0.0 : tileZoomRatio/(dash_from.z*fromScale);float scaleB=dash_to.z==0.0 ? 0.0 : tileZoomRatio/(dash_to.z*toScale);float heightA=dash_from.y;float heightB=dash_to.y;v_tex_a=vec2(a_linesofar*scaleA/floorwidth,(-normal.y*heightA+dash_from.x+0.5)/u_texsize.y);v_tex_b=vec2(a_linesofar*scaleB/floorwidth,(-normal.y*heightB+dash_to.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:Xe("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:Xe("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:Xe("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_z_tile_anchor;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float anchorZ=a_z_tile_anchor.x;vec2 tileAnchor=a_z_tile_anchor.yz;vec3 h=elevationVector(tileAnchor)*elevation(tileAnchor);vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tileAnchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(vec3(a_pos,anchorZ)+h,mercator_pos,u_zoom_transition);vec4 projectedPoint=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),anchorZ,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec3 proj_pos=mix_globe_mercator(vec3(a_projected_pos.xy,anchorZ),mercator_pos,u_zoom_transition);\n#ifdef PROJECTED_POS_ON_VIEWPORT\nvec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xy,0.0,1.0);\n#else\nvec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xyz+h,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:Xe("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_z_tile_anchor;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_tile_id;uniform float u_zoom_transition;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float anchorZ=a_z_tile_anchor.x;vec2 tileAnchor=a_z_tile_anchor.yz;vec3 h=elevationVector(tileAnchor)*elevation(tileAnchor);vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tileAnchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(vec3(a_pos,anchorZ)+h,mercator_pos,u_zoom_transition);vec4 projectedPoint=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),anchorZ,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec3 proj_pos=mix_globe_mercator(vec3(a_projected_pos.xy,anchorZ),mercator_pos,u_zoom_transition);\n#ifdef PROJECTED_POS_ON_VIEWPORT\nvec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xy,0.0,1.0);\n#else\nvec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xyz+h,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:Xe("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_z_tile_anchor;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float anchorZ=a_z_tile_anchor.x;vec2 tileAnchor=a_z_tile_anchor.yz;vec3 h=elevationVector(tileAnchor)*elevation(tileAnchor);vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tileAnchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(vec3(a_pos,anchorZ)+h,mercator_pos,u_zoom_transition);vec4 projectedPoint=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),anchorZ,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec3 proj_pos=mix_globe_mercator(vec3(a_projected_pos.xy,anchorZ),mercator_pos,u_zoom_transition);\n#ifdef PROJECTED_POS_ON_VIEWPORT\nvec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xy,0.0,1.0);\n#else\nvec4 projected_pos=u_label_plane_matrix*vec4(proj_pos.xyz+h,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:Xe("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef FOG\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\nconst float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=u_skirt_height*u_skirt_height*wireframeOffset;\n#endif\nvec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n}"),terrainDepth:Xe("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Xe("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",He),skyboxGradient:Xe("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",He),skyboxCapture:Xe("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Xe("uniform sampler2D u_image0;varying vec2 v_pos0;void main() {vec4 color=texture2D(u_image0,v_pos0);gl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat4 u_up_vector_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;attribute vec3 a_globe_pos;attribute vec2 a_merc_pos;attribute vec2 a_uv;varying vec2 v_pos0;void main() {v_pos0=a_uv;vec2 uv=a_uv*EXTENT;vec4 up_vector=u_up_vector_matrix*vec4(elevationVector(uv),1.0);float height=elevation(uv);vec4 globe=u_globe_matrix*vec4(a_globe_pos+up_vector.xyz*height,1.0);vec4 mercator=vec4(a_merc_pos,height,1.0);mercator.xy-=u_merc_center;mercator.x=wrap(mercator.x,-0.5,0.5);mercator=u_merc_matrix*mercator;vec3 position=mix(globe.xyz,mercator.xyz,u_zoom_transition);gl_Position=u_proj_matrix*vec4(position,1.0);}"),globeAtmosphere:Xe("uniform vec2 u_center;uniform float u_radius;uniform vec2 u_screen_size;uniform float u_opacity;uniform highp float u_fadeout_range;uniform vec3 u_start_color;uniform vec3 u_end_color;uniform float u_pixel_ratio;void main() {highp vec2 fragCoord=gl_FragCoord.xy/u_pixel_ratio;fragCoord.y=u_screen_size.y-fragCoord.y;float distFromCenter=length(fragCoord-u_center);float normDistFromCenter=length(fragCoord-u_center)/u_radius;if (normDistFromCenter < 1.0)\ndiscard;float t=clamp(1.0-sqrt(normDistFromCenter-1.0)/u_fadeout_range,0.0,1.0);vec3 color=mix(u_start_color,u_end_color,1.0-t);gl_FragColor=vec4(color*t*u_opacity,u_opacity);}","attribute vec3 a_pos;void main() {gl_Position=vec4(a_pos,1.0);}"),globeDepth:Xe("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_proj_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat4 u_up_vector_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;attribute vec3 a_globe_pos;attribute vec2 a_merc_pos;attribute vec2 a_uv;varying float v_depth;void main() {vec2 uv=a_uv*EXTENT;vec4 up_vector=u_up_vector_matrix*vec4(elevationVector(uv),1.0);float height=elevation(uv);vec4 globe=u_globe_matrix*vec4(a_globe_pos+up_vector.xyz*height,1.0);vec4 mercator=vec4(a_merc_pos,height,1.0);mercator.xy-=u_merc_center;mercator.x=wrap(mercator.x,-0.5,0.5);mercator=u_merc_matrix*mercator;vec3 position=mix(globe.xyz,mercator.xyz,u_zoom_transition);gl_Position=u_proj_matrix*vec4(position,1.0);v_depth=gl_Position.z/gl_Position.w;}")};function Xe(t,e,n){const r=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,i=/uniform (highp |mediump |lowp )?([\w]+) ([\w]+)([\s]*)([\w]*)/g,o=e.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),a=t.match(i),s=e.match(i),l=qe.match(i);let c=s?s.concat(a):a;n||(We.staticUniforms&&(c=We.staticUniforms.concat(c)),Ze.staticUniforms&&(c=Ze.staticUniforms.concat(c))),c&&(c=c.concat(l));const u={};return{fragmentSource:t=t.replace(r,(t,e,n,r,i)=>(u[i]=!0,"define"===e?`\n#ifndef HAS_UNIFORM_u_${i}\nvarying ${n} ${r} ${i};\n#else\nuniform ${n} ${r} u_${i};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${i}\n    ${n} ${r} ${i} = u_${i};\n#endif\n`)),vertexSource:e=e.replace(r,(t,e,n,r,i)=>{const o="float"===r?"vec2":"vec4",a=i.match(/color/)?"color":o;return u[i]?"define"===e?`\n#ifndef HAS_UNIFORM_u_${i}\nuniform lowp float u_${i}_t;\nattribute ${n} ${o} a_${i};\nvarying ${n} ${r} ${i};\n#else\nuniform ${n} ${r} u_${i};\n#endif\n`:"vec4"===a?`\n#ifndef HAS_UNIFORM_u_${i}\n    ${i} = a_${i};\n#else\n    ${n} ${r} ${i} = u_${i};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${i}\n    ${i} = unpack_mix_${a}(a_${i}, u_${i}_t);\n#else\n    ${n} ${r} ${i} = u_${i};\n#endif\n`:"define"===e?`\n#ifndef HAS_UNIFORM_u_${i}\nuniform lowp float u_${i}_t;\nattribute ${n} ${o} a_${i};\n#else\nuniform ${n} ${r} u_${i};\n#endif\n`:"vec4"===a?`\n#ifndef HAS_UNIFORM_u_${i}\n    ${n} ${r} ${i} = a_${i};\n#else\n    ${n} ${r} ${i} = u_${i};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${i}\n    ${n} ${r} ${i} = unpack_mix_${a}(a_${i}, u_${i}_t);\n#else\n    ${n} ${r} ${i} = u_${i};\n#endif\n`}),staticAttributes:o,staticUniforms:c}}class Je{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(t,e,n,r,i,o,a,s){this.context=t;let l=this.boundPaintVertexBuffers.length!==r.length;for(let t=0;!l&&t<r.length;t++)this.boundPaintVertexBuffers[t]!==r[t]&&(l=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===e&&this.boundLayoutVertexBuffer===n&&!l&&this.boundIndexBuffer===i&&this.boundVertexOffset===o&&this.boundDynamicVertexBuffer===a&&this.boundDynamicVertexBuffer2===s?(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),i&&i.dynamicDraw&&i.bind(),s&&s.bind()):this.freshBind(e,n,r,i,o,a,s)}freshBind(t,e,n,r,i,o,a){let s;const l=t.numAttributes,c=this.context,u=c.gl;if(c.extVertexArrayObject)this.vao&&this.destroy(),this.vao=c.extVertexArrayObject.createVertexArrayOES(),c.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=c.currentNumAttributes||0;for(let t=l;t<s;t++)u.disableVertexAttribArray(t)}e.enableAttributes(u,t);for(const e of n)e.enableAttributes(u,t);o&&o.enableAttributes(u,t),a&&a.enableAttributes(u,t),e.bind(),e.setVertexAttribPointers(u,t,i);for(const e of n)e.bind(),e.setVertexAttribPointers(u,t,i);o&&(o.bind(),o.setVertexAttribPointers(u,t,i)),r&&r.bind(),a&&(a.bind(),a.setVertexAttribPointers(u,t,i)),c.currentNumAttributes=l}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Qe(e,n){const r=Math.pow(2,n.canonical.z),i=n.canonical.y;return[new t.MercatorCoordinate(0,i/r).toLngLat().lat,new t.MercatorCoordinate(0,(i+1)/r).toLngLat().lat]}function tn(e,n,r,i,o,a,s){const l=e.context,c=l.gl,u=r.fbo;if(!u)return;e.prepareDrawTile(n);const h=e.useProgram("hillshade");l.activeTexture.set(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,u.colorAttachment.get());const d=((t,e,n,r)=>{const i=n.paint.get("hillshade-shadow-color"),o=n.paint.get("hillshade-highlight-color"),a=n.paint.get("hillshade-accent-color");let s=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(s-=t.transform.angle);const l=!t.options.moving;return{u_matrix:r||t.transform.calculateProjMatrix(e.tileID.toUnwrapped(),l),u_image:0,u_latrange:Qe(0,e.tileID),u_light:[n.paint.get("hillshade-exaggeration"),s],u_shadow:i,u_highlight:o,u_accent:a}})(e,r,i,e.terrain?n.projMatrix:null);e.prepareDrawProgram(l,h,n.toUnwrapped());const{tileBoundsBuffer:p,tileBoundsIndexBuffer:f,tileBoundsSegments:m}=e.getTileBoundsBuffers(r);h.draw(l,c.TRIANGLES,o,a,s,t.CullFaceMode.disabled,d,i.id,p,f,m)}function en(e,n,r){if(!n.needsDEMTextureUpload)return;const i=e.context,o=i.gl;i.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||e.getTileTexture(r.stride);const a=r.getPixels();n.demTexture?n.demTexture.update(a,{premultiply:!1}):n.demTexture=new t.Texture(i,a,o.RGBA,{premultiply:!1}),n.needsDEMTextureUpload=!1}function nn(e,n,r,i,o,a){const s=e.context,l=s.gl;if(!n.dem)return;const c=n.dem;if(s.activeTexture.set(l.TEXTURE1),en(e,n,c),!n.demTexture)return;n.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);const u=c.dim;s.activeTexture.set(l.TEXTURE0);let h=n.fbo;if(!h){const e=new t.Texture(s,{width:u,height:u,data:null},l.RGBA);e.bind(l.LINEAR,l.CLAMP_TO_EDGE),h=n.fbo=s.createFramebuffer(u,u,!0),h.colorAttachment.set(e.texture)}s.bindFramebuffer.set(h.framebuffer),s.viewport.set([0,0,u,u]);const{tileBoundsBuffer:d,tileBoundsIndexBuffer:p,tileBoundsSegments:f}=e.getMercatorTileBoundsBuffers();e.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,i,o,a,t.CullFaceMode.disabled,((e,n)=>{const r=n.stride,i=t.create$1();return t.ortho(i,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(i,i,[0,-t.EXTENT,0]),{u_matrix:i,u_image:1,u_dimension:[r,r],u_zoom:e.overscaledZ,u_unpack:n.unpackVector}})(n.tileID,c),r.id,d,p,f),n.needsHillshadePrepare=!1}const rn=(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image0:new t.Uniform1i(e,n.u_image0),u_skirt_height:new t.Uniform1f(e,n.u_skirt_height)}),on=(t,e)=>({u_matrix:t,u_image0:0,u_skirt_height:e}),an=new class{constructor(){this.operations={}}newMorphing(t,e,n,r,i){if(t in this.operations){const e=this.operations[t];e.to.tileID.key!==n.tileID.key&&(e.queued=n)}else this.operations[t]={startTime:r,phase:0,duration:i,from:e,to:n,queued:null}}getMorphValuesForProxy(t){if(!(t in this.operations))return null;const e=this.operations[t];return{from:e.from,to:e.to,phase:e.phase}}update(t){for(const e in this.operations){const n=this.operations[e];for(n.phase=(t-n.startTime)/n.duration;n.phase>=1||!this._validOp(n);)if(!this._nextOp(n,t)){delete this.operations[e];break}}}_nextOp(t,e){return!!t.queued&&(t.from=t.to,t.to=t.queued,t.queued=null,t.phase=0,t.startTime=e,!0)}_validOp(t){return t.from.hasData()&&t.to.hasData()}},sn={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function ln(t,e){const n=1<<t.z;return!e&&(0===t.x||t.x===n-1)||0===t.y||t.y===n-1}const cn=t=>({u_matrix:t});function un(e,n,r,i,o){if(o>0){const a=t.exported.now(),s=(a-e.timeAdded)/o,l=n?(a-n.timeAdded)/o:-1,c=r.getSource(),u=i.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),h=!n||Math.abs(n.tileID.overscaledZ-u)>Math.abs(e.tileID.overscaledZ-u),d=h&&e.refreshedUponExpiration?1:t.clamp(h?s:1-l,0,1);return e.refreshedUponExpiration&&s>=1&&(e.refreshedUponExpiration=!1),n?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}class hn extends t.SourceCache{constructor(t){const e=Tt("proxy",{type:"geojson",maxzoom:t.transform.maxZoom},new A(Lt(),null),t.style);super("proxy",e,!1),e.setEventedParent(this),this.map=this.getSource().map=t,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(e,n,r){if(e.freezeTileCoverage)return;this.transform=e;const i=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((n,r)=>{if(n[r.key]="",!this._tiles[r.key]){const n=new t.Tile(r,this._source.tileSize*r.overscaleFactor(),e.tileZoom);n.state="loaded",this._tiles[r.key]=n}return n},{});for(const t in this._tiles)t in i||(this.freeFBO(t),this._tiles[t].unloadVectorData(),delete this._tiles[t])}freeFBO(t){const e=this.proxyCachedFBO[t];if(void 0!==e){const n=Object.values(e);this.renderCachePool.push(...n),delete this.proxyCachedFBO[t]}}deallocRenderCache(){this.renderCache.forEach(t=>t.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class dn extends t.OverscaledTileID{constructor(t,e,n){super(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y),this.proxyTileKey=e,this.projMatrix=n}}class pn extends t.Elevation{constructor(e,n){super(),this.painter=e,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[r,i,o]=function(e){const n=new t.StructArrayLayout4i8,r=new t.StructArrayLayout3ui6,i=131;n.reserve(17161),r.reserve(33800);const o=t.EXTENT/128,a=t.EXTENT+o/2,s=a+o;for(let e=-o;e<s;e+=o)for(let r=-o;r<s;r+=o){const i=r<0||r>a||e<0||e>a?24575:0,o=t.clamp(Math.round(r),0,t.EXTENT),s=t.clamp(Math.round(e),0,t.EXTENT);n.emplaceBack(o+i,s,o,s)}const l=(t,e)=>{const n=e*i+t;r.emplaceBack(n+1,n,n+i),r.emplaceBack(n+i,n+i+1,n+1)};for(let t=1;t<129;t++)for(let e=1;e<129;e++)l(e,t);return[0,129].forEach(t=>{for(let e=0;e<130;e++)l(e,t),l(t,e)}),[n,r,32768]}(),a=e.context;this.gridBuffer=a.createVertexBuffer(r,t.boundsAttributes.members),this.gridIndexBuffer=a.createIndexBuffer(i),this.gridSegments=t.SegmentVector.simpleSegment(0,0,r.length,i.length),this.gridNoSkirtSegments=t.SegmentVector.simpleSegment(0,0,r.length,o),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new hn(n.map),this.orthoMatrix=t.create$1(),t.ortho(this.orthoMatrix,0,t.EXTENT,0,t.EXTENT,0,1);const s=a.gl;this._overlapStencilMode=new t.StencilMode({func:s.GEQUAL,mask:255},0,255,s.KEEP,s.KEEP,s.REPLACE),this._previousZoom=e.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=n,this._useVertexMorphing=!0,this._exaggeration=1}set style(t){t.on("data",this._onStyleDataEvent.bind(this)),t.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=t,this._checkRenderCacheEfficiency()}update(e,n,r){if(e&&e.terrain){this._style!==e&&(this.style=e),this.enabled=!0;const i=e.terrain.properties;this.sourceCache=e._getSourceCache(i.get("source")),this._exaggeration=i.get("exaggeration");const o=()=>{this.sourceCache.used&&t.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const e=this.sourceCache.getSource().tileSize/128,r=this.proxySourceCache.getSource().tileSize;this.sourceCache.update(n,e*r,!0),this._findCoveringTileCache[this.sourceCache.id]={}};this.sourceCache.usedForTerrain||(this._findCoveringTileCache[this.sourceCache.id]={},this.sourceCache.usedForTerrain=!0,o(),this._initializing=!0),o(),n.updateElevation(!r),this._findCoveringTileCache[this.proxySourceCache.id]={},this.proxySourceCache.update(n),this._emptyDEMTextureDirty=!0}else this._disable()}_checkRenderCacheEfficiency(){const e=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==e.efficiency&&t.warnOnce(`Terrain render cache efficiency is not optimal (${e.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${e.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(t){t.coord&&"source"===t.dataType?this._clearRenderCacheForTile(t.sourceCacheId,t.coord):"style"===t.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const t in this._style._sourceCaches)this._style._sourceCaches[t].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach(t=>t.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture)}_source(){return this.enabled?this.sourceCache:null}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const t=2*this.proxySourceCache.getSource().tileSize;return[t,t]}set useVertexMorphing(t){this._useVertexMorphing=t}updateTileBinding(e){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const n=this.proxySourceCache,r=this.painter.transform;this._initializing&&(this._initializing=0===r._centerAltitude&&-1===this.getAtPointOrZero(t.MercatorCoordinate.fromLngLat(r.center),-1),this._emptyDEMTextureDirty=!this._initializing);const i=this.proxyCoords=n.getIds().map(t=>{const e=n.getTileByID(t).tileID;return e.projMatrix=r.calculateProjMatrix(e.toUnwrapped()),e});!function(e,n){const r=n.transform.pointCoordinate(n.transform.getCameraPoint()),i=new t.pointGeometry(r.x,r.y);e.sort((e,n)=>{if(n.overscaledZ-e.overscaledZ)return n.overscaledZ-e.overscaledZ;const r=new t.pointGeometry(e.canonical.x+(1<<e.canonical.z)*e.wrap,e.canonical.y),o=new t.pointGeometry(n.canonical.x+(1<<n.canonical.z)*n.wrap,n.canonical.y),a=i.mult(1<<e.canonical.z);return a.x-=.5,a.y-=.5,a.distSqr(r)-a.distSqr(o)})}(i,this.painter),this._previousZoom=r.zoom;const o=this.proxyToSource||{};this.proxyToSource={},i.forEach(t=>{this.proxyToSource[t.key]={}}),this.terrainTileForTile={};const a=this._style._sourceCaches;for(const t in a){const n=a[t];if(!n.used)continue;if(n!==this.sourceCache&&(this._findCoveringTileCache[n.id]={}),this._setupProxiedCoordsForOrtho(n,e[t],o),n.usedForTerrain)continue;const r=e[t];n.getSource().reparseOverscaled&&this._assignTerrainTiles(r)}this.proxiedCoords[n.id]=i.map(t=>new dn(t,t.key,this.orthoMatrix)),this._assignTerrainTiles(i),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(o),this.renderingToTexture=!1,this._updateTimestamp=t.exported.now();const s={};this._visibleDemTiles=[];for(const t of this.proxyCoords){const e=this.terrainTileForTile[t.key];if(!e)continue;const n=e.tileID.key;n in s||(this._visibleDemTiles.push(e),s[n]=n)}}_assignTerrainTiles(t){this._initializing||t.forEach(t=>{if(this.terrainTileForTile[t.key])return;const e=this._findTileCoveringTileID(t,this.sourceCache);e&&(this.terrainTileForTile[t.key]=e)})}_prepareDEMTextures(){const t=this.painter.context,e=t.gl;for(const n in this.terrainTileForTile){const r=this.terrainTileForTile[n],i=r.dem;!i||r.demTexture&&!r.needsDEMTextureUpload||(t.activeTexture.set(e.TEXTURE1),en(this.painter,r,i))}}_prepareDemTileUniforms(t,e,n,r){if(!e||null==e.demTexture)return!1;const i=t.tileID.canonical,o=Math.pow(2,e.tileID.canonical.z-i.z),a=r||"";return n["u_dem_tl"+a]=[i.x*o%1,i.y*o%1],n["u_dem_scale"+a]=o,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){let t=0;const e=this._visibleDemTiles.reduce((e,n)=>{if(!n.dem)return e;const r=n.dem.tree.minimums[0];return r>0&&t++,e+r},0);return t?e/t:0}_updateEmptyDEMTexture(){const e=this.painter.context,n=e.gl;e.activeTexture.set(n.TEXTURE2);const r=this._getLoadedAreaMinimum(),i={width:1,height:1,data:new Uint8Array(t.DEMData.pack(r,this.sourceCache.getSource().encoding))};this._emptyDEMTextureDirty=!1;let o=this._emptyDEMTexture;return o?o.update(i,{premultiply:!1}):o=this._emptyDEMTexture=new t.Texture(e,i,n.RGBA,{premultiply:!1}),o}setupElevationDraw(e,n,r){const i=this.painter.context,o=i.gl,a=(s=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:t.DEMData.getUnpackVector(s),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0,u_tile_tl_up:[0,0,1],u_tile_tr_up:[0,0,1],u_tile_br_up:[0,0,1],u_tile_bl_up:[0,0,1],u_tile_up_scale:1});var s;a.u_dem_size=this.sourceCache.getSource().tileSize,a.u_exaggeration=this.exaggeration();let l=null,c=null,u=1;if(r&&r.morphing&&this._useVertexMorphing){const t=r.morphing.srcDemTile,n=r.morphing.dstDemTile;u=r.morphing.phase,t&&n&&(this._prepareDemTileUniforms(e,t,a,"_prev")&&(c=t),this._prepareDemTileUniforms(e,n,a)&&(l=n))}if(c&&l?(i.activeTexture.set(o.TEXTURE2),l.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),i.activeTexture.set(o.TEXTURE4),c.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),a.u_dem_lerp=u):(l=this.terrainTileForTile[e.tileID.key],i.activeTexture.set(o.TEXTURE2),(this._prepareDemTileUniforms(e,l,a)?l.demTexture:this.emptyDEMTexture).bind(o.NEAREST,o.CLAMP_TO_EDGE)),r&&r.useDepthForOcclusion&&(i.activeTexture.set(o.TEXTURE3),this._depthTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE),a.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height]),r&&r.useMeterToDem&&l){const e=(1<<l.tileID.canonical.z)*t.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;a.u_meter_to_dem=e}r&&r.labelPlaneMatrixInv&&(a.u_label_plane_matrix_inv=r.labelPlaneMatrixInv),n.setTerrainUniformValues(i,a)}renderToBackBuffer(e){const n=this.painter,r=this.painter.context;0!==e.length&&(r.bindFramebuffer.set(null),r.viewport.set([0,0,n.width,n.height]),this.renderingToTexture=!1,function(e,n,r,i,o){const a=e.context,s=a.gl;let l,c;const u=e.options.showTerrainWireframe?2:0,h=(t,n)=>{if(c===t)return;const r=[sn[t]];n&&r.push(sn[u]),l=e.useProgram("terrainRaster",null,r),c=t},d=e.colorModeForRenderPass(),p=new t.DepthMode(s.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D);an.update(o);const f=e.transform,m=6*Math.pow(1.5,22-f.zoom)*n.exaggeration();(u?[!1,!0]:[!1]).forEach(u=>{c=-1;const g=u?s.LINES:s.TRIANGLES,[y,v]=u?n.getWirefameBuffer():[n.gridIndexBuffer,n.gridSegments];for(const c of i){const i=r.getTile(c),x=t.StencilMode.disabled,w=n.prevTerrainTileForTile[c.key],E=n.terrainTileForTile[c.key];b=E,null!=(_=w)&&null!=b&&_.hasData()&&b.hasData()&&null!=_.demTexture&&null!=b.demTexture&&_.tileID.key!==b.tileID.key&&an.newMorphing(c.key,w,E,o,250),a.activeTexture.set(s.TEXTURE0),i.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE);const C=an.getMorphValuesForProxy(c.key),S=C?1:0;let T;C&&(T={morphing:{srcDemTile:C.from,dstDemTile:C.to,phase:t.easeCubicInOut(C.phase)}});const O=on(c.projMatrix,ln(c.canonical,f.renderWorldCopies)?m/10:m);h(S,u),n.setupElevationDraw(i,l,T),e.prepareDrawProgram(a,l,c.toUnwrapped()),l.draw(a,g,p,x,d,t.CullFaceMode.backCCW,O,"terrain_raster",n.gridBuffer,y,v)}var _,b})}(n,this,this.proxySourceCache,e,this._updateTimestamp),this.renderingToTexture=!0,e.splice(0,e.length))}renderBatch(e){if(0===this._drapedRenderBatches.length)return e+1;this.renderingToTexture=!0;const n=this.painter,r=this.painter.context,i=this.proxySourceCache,o=this.proxiedCoords[i.id],a=this._drapedRenderBatches.shift(),s=[],l=n.style.order;let c=0;for(const u of o){const o=i.getTileByID(u.proxyTileKey),h=i.proxyCachedFBO[u.key]?i.proxyCachedFBO[u.key][e]:void 0,d=void 0!==h?i.renderCache[h]:this.pool[c++],p=void 0!==h;if(o.texture=d.tex,p&&!d.dirty){s.push(o.tileID);continue}let f;r.bindFramebuffer.set(d.fb.framebuffer),this.renderedToTile=!1,d.dirty&&(r.clear({color:t.Color.transparent}),d.dirty=!1);for(let t=a.start;t<=a.end;++t){const e=n.style._layers[l[t]];if(e.isHidden(n.transform.zoom))continue;const i=n.style._getLayerSourceCache(e),o=i?this.proxyToSource[u.key][i.id]:[u];if(!o)continue;const a=o;r.viewport.set([0,0,d.fb.width,d.fb.height]),f!==(i?i.id:null)&&(this._setupStencil(d,o,e,i),f=i?i.id:null),n.renderLayer(n,i,e,a)}this.renderedToTile?(d.dirty=!0,s.push(o.tileID)):p||--c,5===c&&(c=0,this.renderToBackBuffer(s))}return this.renderToBackBuffer(s),this.renderingToTexture=!1,r.bindFramebuffer.set(null),r.viewport.set([0,0,n.width,n.height]),a.end+1}postRender(){}renderCacheEfficiency(t){const e=t.order.length;if(0===e)return{efficiency:100};let n,r=0,i=0,o=!1;for(let a=0;a<e;++a){const e=t._layers[t.order[a]];this._style.isLayerDraped(e)?(o&&++r,++i):o||(o=!0,n=e.id)}return 0===i?{efficiency:100}:{efficiency:100*(1-r/i),firstUndrapedLayer:n}}getMinElevationBelowMSL(){let t=0;return this._visibleDemTiles.filter(t=>t.dem).forEach(e=>{t=Math.min(t,e.dem.tree.minimums[0])}),0===t?t:(t-30)*this._exaggeration}raycast(t,e,n){if(!this._visibleDemTiles)return null;const r=this._visibleDemTiles.filter(t=>t.dem).map(r=>{const i=r.tileID,o=Math.pow(2,i.overscaledZ),{x:a,y:s}=i.canonical,l=a/o,c=(a+1)/o,u=s/o,h=(s+1)/o;return{minx:l,miny:u,maxx:c,maxy:h,t:r.dem.tree.raycastRoot(l,u,c,h,t,e,n),tile:r}});r.sort((t,e)=>(null!==t.t?t.t:Number.MAX_VALUE)-(null!==e.t?e.t:Number.MAX_VALUE));for(const i of r){if(null==i.t)return null;const r=i.tile.dem.tree.raycast(i.minx,i.miny,i.maxx,i.maxy,t,e,n);if(null!=r)return r}return null}_createFBO(){const e=this.painter.context,n=e.gl,r=this.drapeBufferSize;e.activeTexture.set(n.TEXTURE0);const i=new t.Texture(e,{width:r[0],height:r[1],data:null},n.RGBA);i.bind(n.LINEAR,n.CLAMP_TO_EDGE);const o=e.createFramebuffer(r[0],r[1],!1);return o.colorAttachment.set(i.texture),o.depthAttachment=new _t(e,o.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=e.createRenderbuffer(e.gl.DEPTH_STENCIL,r[0],r[1]),this._stencilRef=0,o.depthAttachment.set(this._sharedDepthStencil),e.clear({stencil:0})):o.depthAttachment.set(this._sharedDepthStencil),e.extTextureFilterAnisotropic&&!e.extTextureFilterAnisotropicForceOff&&n.texParameterf(n.TEXTURE_2D,e.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,e.extTextureFilterAnisotropicMax),{fb:o,tex:i,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const t in this._style._sourceCaches)if(this._style._sourceCaches[t].hasTransition())return!0;return this._style.order.some(t=>{const e=this._style._layers[t],n=e.isHidden(this.painter.transform.zoom),r=e.getCrossfadeParameters(),i=!!r&&1!==r.t,o=e.hasTransition();return"custom"!==e.type&&!n&&(i||o)})}_clearRasterFadeFromRenderCache(){let t=!1;for(const e in this._style._sourceCaches)if(this._style._sourceCaches[e]._source instanceof wt){t=!0;break}if(t)for(let t=0;t<this._style.order.length;++t){const e=this._style._layers[this._style.order[t]],n=e.isHidden(this.painter.transform.zoom),r=this._style._getLayerSourceCache(e);if("raster"!==e.type||n||!r)continue;const i=e.paint.get("raster-fade-duration");for(const t of this.proxyCoords){const e=this.proxyToSource[t.key][r.id];if(e)for(const t of e){const e=un(r.getTile(t),r.findLoadedParent(t,0),r,this.painter.transform,i);(1!==e.opacity||0!==e.mix)&&this._clearRenderCacheForTile(r.id,t)}}}}_setupDrapedRenderBatches(){const t=this._style.order,e=t.length;if(0===e)return;const n=[];let r,i=0,o=this._style._layers[t[i]];for(;!this._style.isLayerDraped(o)&&o.isHidden(this.painter.transform.zoom)&&++i<e;)o=this._style._layers[t[i]];for(;i<e;++i){const e=this._style._layers[t[i]];e.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(e)?void 0===r&&(r=i):void 0!==r&&(n.push({start:r,end:i-1}),r=void 0))}void 0!==r&&n.push({start:r,end:i-1}),this._drapedRenderBatches=n}_setupRenderCache(t){const e=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,e.renderCache.length>e.renderCachePool.length){const t=Object.values(e.proxyCachedFBO);e.proxyCachedFBO={};for(let n=0;n<t.length;++n){const r=Object.values(t[n]);e.renderCachePool.push(...r)}}return}this._clearRasterFadeFromRenderCache();const n=this.proxyCoords,r=this._tilesDirty;for(let i=n.length-1;i>=0;i--){const o=n[i];if(e.getTileByID(o.key),void 0!==e.proxyCachedFBO[o.key]){const n=t[o.key],i=this.proxyToSource[o.key];let a=0;for(const t in i){const e=i[t],o=n[t];if(!o||o.length!==e.length||e.some((e,n)=>e!==o[n]||r[t]&&r[t].hasOwnProperty(e.key))){a=-1;break}++a}for(const t in e.proxyCachedFBO[o.key])e.renderCache[e.proxyCachedFBO[o.key][t]].dirty=a<0||a!==Object.values(n).length}}const i=[...this._drapedRenderBatches];i.sort((t,e)=>e.end-e.start-(t.end-t.start));for(const t of i)for(const r of n){if(e.proxyCachedFBO[r.key])continue;let n=e.renderCachePool.pop();void 0===n&&e.renderCache.length<50&&(n=e.renderCache.length,e.renderCache.push(this._createFBO())),void 0!==n&&(e.proxyCachedFBO[r.key]={},e.proxyCachedFBO[r.key][t.start]=n,e.renderCache[n].dirty=!0)}this._tilesDirty={}}_setupStencil(t,e,n,r){if(!r||!this._sourceTilesOverlap[r.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const i=this.painter.context,o=i.gl;if(e.length<=1)return void(this._overlapStencilType=!1);let a;if(n.isTileClipped())a=e.length,this._overlapStencilMode.test={func:o.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(e[0].overscaledZ>e[e.length-1].overscaledZ))return void(this._overlapStencilType=!1);a=1,this._overlapStencilMode.test={func:o.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+a>255&&(i.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=a,this._overlapStencilMode.ref=this._stencilRef,n.isTileClipped()&&this._renderTileClippingMasks(e,this._overlapStencilMode.ref)}stencilModeForRTTOverlap(e){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[e.key]),this._overlapStencilMode):t.StencilMode.disabled}_renderTileClippingMasks(e,n){const r=this.painter,i=this.painter.context,o=i.gl;r._tileClippingMaskIDs={},i.setColorMode(t.ColorMode.disabled),i.setDepthMode(t.DepthMode.disabled);const a=r.useProgram("clippingMask");for(const s of e){const e=r._tileClippingMaskIDs[s.key]=--n;a.draw(i,o.TRIANGLES,t.DepthMode.disabled,new t.StencilMode({func:o.ALWAYS,mask:0},e,255,o.KEEP,o.KEEP,o.REPLACE),t.ColorMode.disabled,t.CullFaceMode.disabled,cn(s.projMatrix),"$clipping",r.tileExtentBuffer,r.quadTriangleIndexBuffer,r.tileExtentSegments)}}pointCoordinate(e){const n=this.painter.transform;if(e.x<0||e.x>n.width||e.y<0||e.y>n.height)return null;const r=[e.x,e.y,1,1];t.transformMat4(r,r,n.pixelMatrixInverse),t.scale$2(r,r,1/r[3]),r[0]/=n.worldSize,r[1]/=n.worldSize;const i=n._camera.position,o=t.mercatorZfromAltitude(1,n.center.lat),a=[i[0],i[1],i[2]/o,0],s=t.subtract([],r.slice(0,3),a);t.normalize(s,s);const l=this.raycast(a,s,this._exaggeration);return null!==l&&l?(t.scaleAndAdd(a,a,s,l),a[3]=a[2],a[2]*=o,a):null}drawDepth(){const e=this.painter,n=e.context,r=this.proxySourceCache,i=Math.ceil(e.width),o=Math.ceil(e.height);if(!this._depthFBO||this._depthFBO.width===i&&this._depthFBO.height===o||(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture),!this._depthFBO){const e=n.gl,r=n.createFramebuffer(i,o,!0);n.activeTexture.set(e.TEXTURE0);const a=new t.Texture(n,{width:i,height:o,data:null},e.RGBA);a.bind(e.NEAREST,e.CLAMP_TO_EDGE),r.colorAttachment.set(a.texture);const s=n.createRenderbuffer(n.gl.DEPTH_COMPONENT16,i,o);r.depthAttachment.set(s),this._depthFBO=r,this._depthTexture=a}n.bindFramebuffer.set(this._depthFBO.framebuffer),n.viewport.set([0,0,i,o]),function(e,n,r,i){const o=e.context,a=o.gl;o.clear({depth:1});const s=e.useProgram("terrainDepth"),l=new t.DepthMode(a.LESS,t.DepthMode.ReadWrite,e.depthRangeFor3D);for(const e of i){const i=r.getTile(e),c=on(e.projMatrix,0);n.setupElevationDraw(i,s),s.draw(o,a.TRIANGLES,l,t.StencilMode.disabled,t.ColorMode.unblended,t.CullFaceMode.backCCW,c,"terrain_depth",n.gridBuffer,n.gridIndexBuffer,n.gridNoSkirtSegments)}}(e,this,r,this.proxyCoords)}_setupProxiedCoordsForOrtho(t,e,n){if(t.getSource()instanceof Ct)return this._setupProxiedCoordsForImageSource(t,e,n);this._findCoveringTileCache[t.id]=this._findCoveringTileCache[t.id]||{};const r=this.proxiedCoords[t.id]=[],i=this.proxyCoords;for(let e=0;e<i.length;e++){const o=i[e],a=this._findTileCoveringTileID(o,t);if(a){const e=this._createProxiedId(o,a,n[o.key]&&n[o.key][t.id]);r.push(e),this.proxyToSource[o.key][t.id]=[e]}}let o=!1;for(let i=0;i<e.length;i++){const a=t.getTile(e[i]);if(!a||!a.hasData())continue;const s=this._findTileCoveringTileID(a.tileID,this.proxySourceCache);if(s&&s.tileID.canonical.z!==a.tileID.canonical.z){const e=this.proxyToSource[s.tileID.key][t.id],i=this._createProxiedId(s.tileID,a,n[s.tileID.key]&&n[s.tileID.key][t.id]);e?e.splice(e.length-1,0,i):this.proxyToSource[s.tileID.key][t.id]=[i],r.push(i),o=!0}}this._sourceTilesOverlap[t.id]=o}_setupProxiedCoordsForImageSource(e,n,r){if(!e.getSource().loaded())return;const i=this.proxiedCoords[e.id]=[],o=this.proxyCoords,a=e.getSource(),s=new t.pointGeometry(a.tileID.x,a.tileID.y)._div(1<<a.tileID.z),l=a.coordinates.map(t.MercatorCoordinate.fromLngLat).reduce((t,e)=>(t.min.x=Math.min(t.min.x,e.x-s.x),t.min.y=Math.min(t.min.y,e.y-s.y),t.max.x=Math.max(t.max.x,e.x-s.x),t.max.y=Math.max(t.max.y,e.y-s.y),t),{min:new t.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new t.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),c=(e,n)=>{const r=e.wrap+e.canonical.x/(1<<e.canonical.z),i=e.canonical.y/(1<<e.canonical.z),o=t.EXTENT/(1<<e.canonical.z),a=n.wrap+n.canonical.x/(1<<n.canonical.z),s=n.canonical.y/(1<<n.canonical.z);return r+o<a+l.min.x||r>a+l.max.x||i+o<s+l.min.y||i>s+l.max.y};for(let t=0;t<o.length;t++){const a=o[t];for(let t=0;t<n.length;t++){const o=e.getTile(n[t]);if(!o||!o.hasData())continue;if(c(a,o.tileID))continue;const s=this._createProxiedId(a,o,r[a.key]&&r[a.key][e.id]),l=this.proxyToSource[a.key][e.id];l?l.push(s):this.proxyToSource[a.key][e.id]=[s],i.push(s)}}}_createProxiedId(e,n,r){let i=this.orthoMatrix;if(r){const t=r.find(t=>t.key===n.tileID.key);if(t)return t}if(n.tileID.key!==e.key){const r=e.canonical.z-n.tileID.canonical.z;let o,a,s;i=t.create$1();const l=n.tileID.wrap-e.wrap<<e.overscaledZ;r>0?(o=t.EXTENT>>r,a=o*((n.tileID.canonical.x<<r)-e.canonical.x+l),s=o*((n.tileID.canonical.y<<r)-e.canonical.y)):(o=t.EXTENT<<-r,a=t.EXTENT*(n.tileID.canonical.x-(e.canonical.x+l<<-r)),s=t.EXTENT*(n.tileID.canonical.y-(e.canonical.y<<-r))),t.ortho(i,0,o,0,o,0,1),t.translate(i,i,[a,s,0])}return new dn(n.tileID,e.key,i)}_findTileCoveringTileID(e,n){let r=n.getTile(e);if(r&&r.hasData())return r;const i=this._findCoveringTileCache[n.id],o=i[e.key];if(r=o?n.getTileByID(o):null,r&&r.hasData()||null===o)return r;let a=r?r.tileID:e,s=a.overscaledZ;const l=n.getSource().minzoom,c=[];if(!o){const i=n.getSource().maxzoom;if(e.canonical.z>=i){const r=e.canonical.z-i;n.getSource().reparseOverscaled?(s=Math.max(e.canonical.z+2,n.transform.tileZoom),a=new t.OverscaledTileID(s,e.wrap,i,e.canonical.x>>r,e.canonical.y>>r)):0!==r&&(s=i,a=new t.OverscaledTileID(s,e.wrap,i,e.canonical.x>>r,e.canonical.y>>r))}a.key!==e.key&&(c.push(a.key),r=n.getTile(a))}const u=t=>{c.forEach(e=>{i[e]=t}),c.length=0};for(s-=1;s>=l&&(!r||!r.hasData());s--){r&&u(r.tileID.key);const t=a.calculateScaledKey(s);if(r=n.getTileByID(t),r&&r.hasData())break;const e=i[t];if(null===e)break;void 0===e?c.push(t):r=n.getTileByID(e)}return u(r?r.tileID.key:null),r&&r.hasData()?r:null}findDEMTileFor(t){return this.enabled?this._findTileCoveringTileID(t,this.sourceCache):null}prepareDrawTile(t){this.renderedToTile=!0}_clearRenderCacheForTile(t,e){let n=this._tilesDirty[t];n||(n=this._tilesDirty[t]={}),n[e.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const e=function(e){let n,r,i;const o=new t.StructArrayLayout2ui4,a=131;for(r=1;r<129;r++){for(n=1;n<129;n++)i=r*a+n,o.emplaceBack(i,i+1),o.emplaceBack(i,i+a),o.emplaceBack(i+1,i+a),128===r&&o.emplaceBack(i+a,i+a+1);o.emplaceBack(i+1,i+1+a)}return o}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(e),this.wireframeSegments=t.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,e.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}function fn(t){const e=[];for(let n=0;n<t.length;n++){if(null===t[n])continue;const r=t[n].split(" ");e.push(r.pop())}return e}class mn{static cacheKey(t,e,n){let r=`${t}${n?n.cacheKey:""}`;for(const t of e)r+="/"+t;return r}constructor(e,n,r,i,o,a){const s=e.gl;this.program=s.createProgram();const l=fn(r.staticAttributes),c=i?i.getBinderAttributes():[],u=l.concat(c),h=r.staticUniforms?fn(r.staticUniforms):[],d=i?i.getBinderUniforms():[],p=h.concat(d),f=[];for(const t of p)f.indexOf(t)<0&&f.push(t);let m=i?i.defines():[];m=m.concat(a.map(t=>"#define "+t));const g=m.concat("\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",Ke,$e.fragmentSource,Ze.fragmentSource,r.fragmentSource).join("\n"),y=m.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",Ke,$e.vertexSource,Ze.vertexSource,We.vertexSource,r.vertexSource).join("\n"),v=s.createShader(s.FRAGMENT_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);s.shaderSource(v,g),s.compileShader(v),s.attachShader(this.program,v);const _=s.createShader(s.VERTEX_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);s.shaderSource(_,y),s.compileShader(_),s.attachShader(this.program,_),this.attributes={};const b={};this.numAttributes=u.length;for(let t=0;t<this.numAttributes;t++)u[t]&&(s.bindAttribLocation(this.program,t,u[t]),this.attributes[u[t]]=t);s.linkProgram(this.program),s.deleteShader(_),s.deleteShader(v);for(let t=0;t<f.length;t++){const e=f[t];if(e&&!b[e]){const t=s.getUniformLocation(this.program,e);t&&(b[e]=t)}}this.fixedUniforms=o(e,b),this.binderUniforms=i?i.getUniforms(e,b):[],-1!==a.indexOf("TERRAIN")&&(this.terrainUniforms=((e,n)=>({u_dem:new t.Uniform1i(e,n.u_dem),u_dem_prev:new t.Uniform1i(e,n.u_dem_prev),u_dem_unpack:new t.Uniform4f(e,n.u_dem_unpack),u_dem_tl:new t.Uniform2f(e,n.u_dem_tl),u_dem_scale:new t.Uniform1f(e,n.u_dem_scale),u_dem_tl_prev:new t.Uniform2f(e,n.u_dem_tl_prev),u_dem_scale_prev:new t.Uniform1f(e,n.u_dem_scale_prev),u_dem_size:new t.Uniform1f(e,n.u_dem_size),u_dem_lerp:new t.Uniform1f(e,n.u_dem_lerp),u_exaggeration:new t.Uniform1f(e,n.u_exaggeration),u_depth:new t.Uniform1i(e,n.u_depth),u_depth_size_inv:new t.Uniform2f(e,n.u_depth_size_inv),u_meter_to_dem:new t.Uniform1f(e,n.u_meter_to_dem),u_label_plane_matrix_inv:new t.UniformMatrix4f(e,n.u_label_plane_matrix_inv),u_tile_tl_up:new t.Uniform3f(e,n.u_tile_tl_up),u_tile_tr_up:new t.Uniform3f(e,n.u_tile_tr_up),u_tile_br_up:new t.Uniform3f(e,n.u_tile_br_up),u_tile_bl_up:new t.Uniform3f(e,n.u_tile_bl_up),u_tile_up_scale:new t.Uniform1f(e,n.u_tile_up_scale)}))(e,b)),-1!==a.indexOf("FOG")&&(this.fogUniforms=((e,n)=>({u_fog_matrix:new t.UniformMatrix4f(e,n.u_fog_matrix),u_fog_range:new t.Uniform2f(e,n.u_fog_range),u_fog_color:new t.Uniform4f(e,n.u_fog_color),u_fog_horizon_blend:new t.Uniform1f(e,n.u_fog_horizon_blend),u_fog_temporal_offset:new t.Uniform1f(e,n.u_fog_temporal_offset)}))(e,b))}setTerrainUniformValues(t,e){if(!this.terrainUniforms)return;const n=this.terrainUniforms;if(!this.failedToCreate){t.program.set(this.program);for(const t in e)n[t].set(e[t])}}setFogUniformValues(t,e){if(!this.fogUniforms)return;const n=this.fogUniforms;if(!this.failedToCreate){t.program.set(this.program);for(const t in e)n[t].location&&n[t].set(e[t])}}draw(t,e,n,r,i,o,a,s,l,c,u,h,d,p,f,m){const g=t.gl;if(this.failedToCreate)return;t.program.set(this.program),t.setDepthMode(n),t.setStencilMode(r),t.setColorMode(i),t.setCullFace(o);for(const t in this.fixedUniforms)this.fixedUniforms[t].set(a[t]);p&&p.setUniforms(t,this.binderUniforms,h,{zoom:d});const y={[g.LINES]:2,[g.TRIANGLES]:3,[g.LINE_STRIP]:1}[e];for(const n of u.get()){const r=n.vaos||(n.vaos={});(r[s]||(r[s]=new Je)).bind(t,this,l,p?p.getPaintVertexBuffers():[],c,n.vertexOffset,f,m),g.drawElements(e,n.primitiveLength*y,g.UNSIGNED_SHORT,n.primitiveOffset*y*2)}}}function gn(t,e,n){const r=1/M(n,1,e.transform.tileZoom),i=Math.pow(2,n.tileID.overscaledZ),o=n.tileSize*Math.pow(2,e.transform.tileZoom)/i,a=o*(n.tileID.canonical.x+n.tileID.wrap*i),s=o*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[r,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[a>>16,s>>16],u_pixel_coord_lower:[65535&a,65535&s]}}const yn=(e,n,r,i)=>{const o=n.style.light,a=o.properties.get("position"),s=[a.x,a.y,a.z],l=t.create$2();"viewport"===o.properties.get("anchor")&&(t.fromRotation(l,-n.transform.angle),t.transformMat3(s,s,l));const c=o.properties.get("color");return{u_matrix:e,u_lightpos:s,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[c.r,c.g,c.b],u_vertical_gradient:+r,u_opacity:i}},vn=(e,n,r,i,o,a,s)=>t.extend(yn(e,n,r,i),gn(a,n,s),{u_height_factor:-Math.pow(2,o.overscaledZ)/s.tileSize/8}),_n=t=>({u_matrix:t}),bn=(e,n,r,i)=>t.extend(_n(e),gn(r,n,i)),xn=(t,e)=>({u_matrix:t,u_world:e}),wn=(e,n,r,i,o)=>t.extend(bn(e,n,r,i),{u_world:o}),En=(e,n,r,i)=>{const o=e.transform;let a;return a="map"===i.paint.get("circle-pitch-alignment")?o.calculatePixelsToTileUnitsMatrix(r):new Float32Array([o.pixelsToGLUnits[0],0,0,o.pixelsToGLUnits[1]]),{u_camera_to_center_distance:o.cameraToCenterDistance,u_matrix:e.translatePosMatrix(n.projMatrix,r,i.paint.get("circle-translate"),i.paint.get("circle-translate-anchor")),u_device_pixel_ratio:t.exported.devicePixelRatio,u_extrude_scale:a}},Cn=t=>{const e=[];return"map"===t.paint.get("circle-pitch-alignment")&&e.push("PITCH_WITH_MAP"),"map"===t.paint.get("circle-pitch-scale")&&e.push("SCALE_WITH_MAP"),e},Sn=(e,n,r)=>{const i=t.EXTENT/r.tileSize;return{u_matrix:e,u_camera_to_center_distance:n.cameraToCenterDistance,u_extrude_scale:[n.pixelsToGLUnits[0]/i,n.pixelsToGLUnits[1]/i]}},Tn=(t,e,n=1)=>({u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:n}),On=(t,e,n,r)=>({u_matrix:t,u_extrude_scale:M(e,1,n),u_intensity:r}),In=(e,n,r,i,o,a)=>{const s=e.transform,l=s.calculatePixelsToTileUnitsMatrix(n),c={u_matrix:kn(e,n,r,o),u_pixels_to_tile_units:l,u_device_pixel_ratio:t.exported.devicePixelRatio,u_units_to_pixels:[1/s.pixelsToGLUnits[0],1/s.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:a,u_texsize:[0,0],u_scale:[0,0,0],u_mix:0};if(Dn(r)){const t=Mn(n,e.transform);c.u_texsize=n.lineAtlasTexture.size,c.u_scale=[t,i.fromScale,i.toScale],c.u_mix=i.t}return c},An=(e,n,r,i,o)=>{const a=e.transform,s=Mn(n,a);return{u_matrix:kn(e,n,r,o),u_texsize:n.imageAtlasTexture.size,u_pixels_to_tile_units:a.calculatePixelsToTileUnitsMatrix(n),u_device_pixel_ratio:t.exported.devicePixelRatio,u_image:0,u_scale:[s,i.fromScale,i.toScale],u_fade:i.t,u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]]}};function Mn(t,e){return 1/M(t,1,e.tileZoom)}function kn(t,e,n,r){return t.translatePosMatrix(r||e.tileID.projMatrix,e,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}const Pn=t=>{const e=[];return Dn(t)&&e.push("RENDER_LINE_DASH"),t.paint.get("line-gradient")&&e.push("RENDER_LINE_GRADIENT"),e};function Dn(t){const e=t.paint.get("line-dasharray").value;return e.value||"constant"!==e.kind}const Rn=(t,e,n,r,i)=>{return{u_matrix:t,u_tl_parent:e,u_scale_parent:n,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(a=i.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=i.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:Ln(i.paint.get("raster-hue-rotate"))};var o,a};function Ln(t){t*=Math.PI/180;const e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}const Nn=(t,e,n,r,i,o,a,s,l,c,u,h,d,p)=>{const f=i.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:f.cameraToCenterDistance,u_pitch:f.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:f.width/f.height,u_fade_change:i.options.fadeDuration?i.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+r,u_texsize:c,u_tile_id:u,u_zoom_transition:h,u_inv_rot_matrix:d,u_merc_center:p,u_texture:0}},jn=(e,n,r,i,o,a,s,l,c,u,h,d,p,f,m)=>{const{cameraToCenterDistance:g,_pitch:y}=o.transform;return t.extend(Nn(e,n,r,i,o,a,s,l,c,u,d,p,f,m),{u_gamma_scale:i?g*Math.cos(o.terrain?0:y):1,u_device_pixel_ratio:t.exported.devicePixelRatio,u_is_halo:+h})},Fn=(e,n,r,i,o,a,s,l,c,u,h,d,p,f)=>t.extend(jn(e,n,r,i,o,a,s,l,!0,c,!0,h,d,p,f),{u_texsize_icon:u,u_texture_icon:1}),zn=(t,e,n)=>({u_matrix:t,u_opacity:e,u_color:n}),Bn=(e,n,r,i,o,a)=>t.extend(function(t,e,n,r){const i=n.imageManager.getPattern(t.from.toString()),o=n.imageManager.getPattern(t.to.toString()),{width:a,height:s}=n.imageManager.getPixelSize(),l=Math.pow(2,r.tileID.overscaledZ),c=r.tileSize*Math.pow(2,n.transform.tileZoom)/l,u=c*(r.tileID.canonical.x+r.tileID.wrap*l),h=c*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:i.tl,u_pattern_br_a:i.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[a,s],u_mix:e.t,u_pattern_size_a:i.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/M(r,1,n.transform.tileZoom),u_pixel_coord_upper:[u>>16,h>>16],u_pixel_coord_lower:[65535&u,65535&h]}}(i,a,r,o),{u_matrix:e,u_opacity:n}),Un={fillExtrusion:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient),u_opacity:new t.Uniform1f(e,n.u_opacity)}),fillExtrusionPattern:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,n.u_height_factor),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade),u_opacity:new t.Uniform1f(e,n.u_opacity)}),fill:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}),fillPattern:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}),fillOutline:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world)}),fillOutlinePattern:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}),circle:(e,n)=>({u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_extrude_scale:new t.UniformMatrix2f(e,n.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}),collisionBox:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale)}),collisionCircle:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_inv_matrix:new t.UniformMatrix4f(e,n.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f(e,n.u_viewport_size)}),debug:(e,n)=>({u_color:new t.UniformColor(e,n.u_color),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_overlay:new t.Uniform1i(e,n.u_overlay),u_overlay_scale:new t.Uniform1f(e,n.u_overlay_scale)}),clippingMask:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}),heatmap:(e,n)=>({u_extrude_scale:new t.Uniform1f(e,n.u_extrude_scale),u_intensity:new t.Uniform1f(e,n.u_intensity),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}),heatmapTexture:(e,n)=>({u_image:new t.Uniform1i(e,n.u_image),u_color_ramp:new t.Uniform1i(e,n.u_color_ramp),u_opacity:new t.Uniform1f(e,n.u_opacity)}),hillshade:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_latrange:new t.Uniform2f(e,n.u_latrange),u_light:new t.Uniform2f(e,n.u_light),u_shadow:new t.UniformColor(e,n.u_shadow),u_highlight:new t.UniformColor(e,n.u_highlight),u_accent:new t.UniformColor(e,n.u_accent)}),hillshadePrepare:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_dimension:new t.Uniform2f(e,n.u_dimension),u_zoom:new t.Uniform1f(e,n.u_zoom),u_unpack:new t.Uniform4f(e,n.u_unpack)}),line:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_pixels_to_tile_units:new t.UniformMatrix2f(e,n.u_pixels_to_tile_units),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_dash_image:new t.Uniform1i(e,n.u_dash_image),u_gradient_image:new t.Uniform1i(e,n.u_gradient_image),u_image_height:new t.Uniform1f(e,n.u_image_height),u_texsize:new t.Uniform2f(e,n.u_texsize),u_scale:new t.Uniform3f(e,n.u_scale),u_mix:new t.Uniform1f(e,n.u_mix)}),linePattern:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixels_to_tile_units:new t.UniformMatrix2f(e,n.u_pixels_to_tile_units),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_image:new t.Uniform1i(e,n.u_image),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}),raster:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_tl_parent:new t.Uniform2f(e,n.u_tl_parent),u_scale_parent:new t.Uniform1f(e,n.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,n.u_buffer_scale),u_fade_t:new t.Uniform1f(e,n.u_fade_t),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image0:new t.Uniform1i(e,n.u_image0),u_image1:new t.Uniform1i(e,n.u_image1),u_brightness_low:new t.Uniform1f(e,n.u_brightness_low),u_brightness_high:new t.Uniform1f(e,n.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,n.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,n.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,n.u_spin_weights)}),symbolIcon:(e,n)=>({u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_tile_id:new t.Uniform3f(e,n.u_tile_id),u_zoom_transition:new t.Uniform1f(e,n.u_zoom_transition),u_inv_rot_matrix:new t.UniformMatrix4f(e,n.u_inv_rot_matrix),u_merc_center:new t.Uniform2f(e,n.u_merc_center),u_texture:new t.Uniform1i(e,n.u_texture)}),symbolSDF:(e,n)=>({u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_tile_id:new t.Uniform3f(e,n.u_tile_id),u_zoom_transition:new t.Uniform1f(e,n.u_zoom_transition),u_inv_rot_matrix:new t.UniformMatrix4f(e,n.u_inv_rot_matrix),u_merc_center:new t.Uniform2f(e,n.u_merc_center),u_is_halo:new t.Uniform1i(e,n.u_is_halo)}),symbolTextAndIcon:(e,n)=>({u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texsize_icon:new t.Uniform2f(e,n.u_texsize_icon),u_texture:new t.Uniform1i(e,n.u_texture),u_texture_icon:new t.Uniform1i(e,n.u_texture_icon),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,n.u_is_halo)}),background:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_color:new t.UniformColor(e,n.u_color)}),backgroundPattern:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image:new t.Uniform1i(e,n.u_image),u_pattern_tl_a:new t.Uniform2f(e,n.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,n.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,n.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,n.u_pattern_br_b),u_texsize:new t.Uniform2f(e,n.u_texsize),u_mix:new t.Uniform1f(e,n.u_mix),u_pattern_size_a:new t.Uniform2f(e,n.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,n.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,n.u_scale_a),u_scale_b:new t.Uniform1f(e,n.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,n.u_tile_units_to_pixels)}),terrainRaster:rn,terrainDepth:rn,skybox:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_sun_direction:new t.Uniform3f(e,n.u_sun_direction),u_cubemap:new t.Uniform1i(e,n.u_cubemap),u_opacity:new t.Uniform1f(e,n.u_opacity),u_temporal_offset:new t.Uniform1f(e,n.u_temporal_offset)}),skyboxGradient:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_color_ramp:new t.Uniform1i(e,n.u_color_ramp),u_center_direction:new t.Uniform3f(e,n.u_center_direction),u_radius:new t.Uniform1f(e,n.u_radius),u_opacity:new t.Uniform1f(e,n.u_opacity),u_temporal_offset:new t.Uniform1f(e,n.u_temporal_offset)}),skyboxCapture:(e,n)=>({u_matrix_3f:new t.UniformMatrix3f(e,n.u_matrix_3f),u_sun_direction:new t.Uniform3f(e,n.u_sun_direction),u_sun_intensity:new t.Uniform1f(e,n.u_sun_intensity),u_color_tint_r:new t.Uniform4f(e,n.u_color_tint_r),u_color_tint_m:new t.Uniform4f(e,n.u_color_tint_m),u_luminance:new t.Uniform1f(e,n.u_luminance)})};let Gn;function Vn(e,n,r,i,o,a,s){const l=e.context,c=l.gl,u=e.useProgram("collisionBox"),h=[];let d=0,p=0;for(let f=0;f<i.length;f++){const m=i[f],g=n.getTile(m),y=g.getBucket(r);if(!y)continue;let v=m.projMatrix;0===o[0]&&0===o[1]||(v=e.translatePosMatrix(m.projMatrix,g,o,a));const _=s?y.textCollisionBox:y.iconCollisionBox,b=y.collisionCircleArray;if(b.length>0){const n=t.create$1(),r=v;t.mul$1(n,y.placementInvProjMatrix,e.transform.glCoordMatrix),t.mul$1(n,n,y.placementViewportMatrix),h.push({circleArray:b,circleOffset:p,transform:r,invTransform:n}),d+=b.length/4,p=d}_&&(e.terrain&&e.terrain.setupElevationDraw(g,u),u.draw(l,c.LINES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,Sn(v,e.transform,g),r.id,_.layoutVertexBuffer,_.indexBuffer,_.segments,null,e.transform.zoom,null,_.collisionVertexBuffer,_.collisionVertexBufferExt))}if(!s||!h.length)return;const f=e.useProgram("collisionCircle"),m=new t.StructArrayLayout2f1f2i16;m.resize(4*d),m._trim();let g=0;for(const t of h)for(let e=0;e<t.circleArray.length/4;e++){const n=4*e,r=t.circleArray[n+0],i=t.circleArray[n+1],o=t.circleArray[n+2],a=t.circleArray[n+3];m.emplace(g++,r,i,o,a,0),m.emplace(g++,r,i,o,a,1),m.emplace(g++,r,i,o,a,2),m.emplace(g++,r,i,o,a,3)}(!Gn||Gn.length<2*d)&&(Gn=function(e){const n=2*e,r=new t.StructArrayLayout3ui6;r.resize(n),r._trim();for(let t=0;t<n;t++){const e=6*t;r.uint16[e+0]=4*t+0,r.uint16[e+1]=4*t+1,r.uint16[e+2]=4*t+2,r.uint16[e+3]=4*t+2,r.uint16[e+4]=4*t+3,r.uint16[e+5]=4*t+0}return r}(d));const y=l.createIndexBuffer(Gn,!0),v=l.createVertexBuffer(m,t.collisionCircleLayout.members,!0);for(const n of h){const i={u_matrix:n.transform,u_inv_matrix:n.invTransform,u_camera_to_center_distance:(_=e.transform).cameraToCenterDistance,u_viewport_size:[_.width,_.height]};f.draw(l,c.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,i,r.id,v,y,t.SegmentVector.simpleSegment(0,2*n.circleOffset,n.circleArray.length,n.circleArray.length/2),null,e.transform.zoom,null,null,null)}var _;v.destroy(),y.destroy()}const qn=t.identity(new Float32Array(16));function Hn(e,n,r,i,o,a){const{horizontalAlign:s,verticalAlign:l}=t.getAnchorAlignment(e),c=-(s-.5)*n,u=-(l-.5)*r,h=t.evaluateVariableOffset(e,i);return new t.pointGeometry((c/o+h[0])*a,(u/o+h[1])*a)}function Wn(e,n,r,i,o,a,s,l,c,u,h,d){const p=e.text.placedSymbolArray,f=e.text.dynamicLayoutVertexArray,m=e.icon.dynamicLayoutVertexArray,g={};f.clear();for(let m=0;m<p.length;m++){const y=p.get(m),v=e.allowVerticalPlacement&&!y.placedOrientation,_=y.hidden||!y.crossTileID||v?null:i[y.crossTileID];if(_){const i=new t.pointGeometry(y.tileAnchorX,y.tileAnchorY),p=d(i),m=Xt(i,r?l:s,p),v=Jt(a.cameraToCenterDistance,m.signedDistanceFromCamera);let b=o.evaluateSizeForFeature(e.textSizeData,u,y)*v/t.ONE_EM;r&&(b*=e.tilePixelRatio/c);const{width:x,height:w,anchor:E,textOffset:C,textScale:S}=_,T=Hn(E,x,w,C,S,b),O=r?Xt(i.add(T),s,p).point:m.point.add(n?T.rotate(-a.angle):T),I=e.allowVerticalPlacement&&y.placedOrientation===t.WritingMode.vertical?Math.PI/2:0;for(let e=0;e<y.numGlyphs;e++)t.addDynamicAttributes(f,O,I);h&&y.associatedIconIndex>=0&&(g[y.associatedIconIndex]={shiftedAnchor:O,angle:I})}else le(y.numGlyphs,f)}if(h){m.clear();const n=e.icon.placedSymbolArray;for(let e=0;e<n.length;e++){const r=n.get(e);if(r.hidden)le(r.numGlyphs,m);else{const n=g[e];if(n)for(let e=0;e<r.numGlyphs;e++)t.addDynamicAttributes(m,n.shiftedAnchor,n.angle);else le(r.numGlyphs,m)}}e.icon.dynamicLayoutVertexBuffer.updateData(m)}e.text.dynamicLayoutVertexBuffer.updateData(f)}function Zn(t,e,n){return n.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function $n(e,n,r,i,o,a,s,l,c,u,h,d){const p=e.context,f=p.gl,m=e.transform,g="map"===l,y="map"===c,v=g&&"point"!==r.layout.get("symbol-placement"),_=g&&!y&&!v,b=void 0!==r.layout.get("symbol-sort-key").constantOr(1);let x=!1;const w=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),E=[0,0],C=r.layout.get("text-variable-anchor"),S=[],T=[];e.terrain&&y&&T.push("PITCH_WITH_MAP_TERRAIN"),v&&T.push("PROJECTED_POS_ON_VIEWPORT");for(const l of i){const i=n.getTile(l),c=i.getBucket(r);if(!c)continue;const h=o?c.text:c.icon;if(!h||!h.segments.get().length)continue;const d=h.programConfigurations.get(r.id),p=o||c.sdfIcons,w=o?c.textSizeData:c.iconSizeData,O=y||0!==m.pitch,I=e.useProgram(Zn(p,o,c),d,T),A=t.evaluateSizeForZoom(w,m.zoom),M=[l.canonical.x,l.canonical.y,1<<l.canonical.z];let k,P,D,R,L=[0,0],N=null;if(o){if(P=i.glyphAtlasTexture,D=f.LINEAR,k=i.glyphAtlasTexture.size,c.iconsInText){L=i.imageAtlasTexture.size,N=i.imageAtlasTexture;const t="composite"===w.kind||"camera"===w.kind;R=O||e.options.rotating||e.options.zooming||t?f.LINEAR:f.NEAREST}}else{const t=1!==r.layout.get("icon-size").constantOr(0)||c.iconsNeedLinear;P=i.imageAtlasTexture,D=p||e.options.rotating||e.options.zooming||t||O?f.LINEAR:f.NEAREST,k=i.imageAtlasTexture.size}const j=e.transform.calculatePixelsToTileUnitsMatrix(i),F=Kt(l.projMatrix,y,g,e.transform,j),z=e.terrain&&y&&v?t.invert(new Float32Array(16),F):qn,B=Yt(l.projMatrix,y,g,e.transform,j),U=C&&c.hasTextData(),G="none"!==r.layout.get("icon-text-fit")&&U&&c.hasIconData();if(v){const t=m.elevation;te(c,l.projMatrix,e,o,F,B,y,u,t?e=>t.getAtTileOffset(l,e.x,e.y):null)}const V=e.translatePosMatrix(l.projMatrix,i,a,s),q=v||o&&C||G?qn:F,H=e.translatePosMatrix(B,i,a,s,!0),W=p&&0!==r.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1);let Z;Z=p?c.iconsInText?Fn(w.kind,A,_,y,e,V,q,H,k,L,M,0,e.identityMat,E):jn(w.kind,A,_,y,e,V,q,H,o,k,!0,M,0,e.identityMat,E):Nn(w.kind,A,_,y,e,V,q,H,o,k,M,0,e.identityMat,E);const $={program:I,buffers:h,uniformValues:Z,atlasTexture:P,atlasTextureIcon:N,atlasInterpolation:D,atlasInterpolationIcon:R,isSDF:p,hasHalo:W,tile:i,labelPlaneMatrixInv:z};if(b&&c.canOverlap){x=!0;const e=h.segments.get();for(const n of e)S.push({segments:new t.SegmentVector([n]),sortKey:n.sortKey,state:$})}else S.push({segments:h.segments,sortKey:0,state:$})}x&&S.sort((t,e)=>t.sortKey-e.sortKey);for(const t of S){const n=t.state;if(e.terrain&&e.terrain.setupElevationDraw(n.tile,n.program,{useDepthForOcclusion:!0,labelPlaneMatrixInv:n.labelPlaneMatrixInv}),p.activeTexture.set(f.TEXTURE0),n.atlasTexture.bind(n.atlasInterpolation,f.CLAMP_TO_EDGE),n.atlasTextureIcon&&(p.activeTexture.set(f.TEXTURE1),n.atlasTextureIcon&&n.atlasTextureIcon.bind(n.atlasInterpolationIcon,f.CLAMP_TO_EDGE)),n.isSDF){const i=n.uniformValues;n.hasHalo&&(i.u_is_halo=1,Kn(n.buffers,t.segments,r,e,n.program,w,h,d,i)),i.u_is_halo=0}Kn(n.buffers,t.segments,r,e,n.program,w,h,d,n.uniformValues)}}function Kn(e,n,r,i,o,a,s,l,c){const u=i.context;o.draw(u,u.gl.TRIANGLES,a,s,l,t.CullFaceMode.disabled,c,r.id,e.layoutVertexBuffer,e.indexBuffer,n,r.paint,i.transform.zoom,e.programConfigurations.get(r.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer)}function Yn(e,n,r,i,o,a,s){const l=e.context.gl,c=r.paint.get("fill-pattern"),u=c&&c.constantOr(1),h=r.getCrossfadeParameters();let d,p,f,m,g;s?(p=u&&!r.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",d=l.LINES):(p=u?"fillPattern":"fill",d=l.TRIANGLES);for(const y of i){const i=n.getTile(y);if(u&&!i.patternsLoaded())continue;const v=i.getBucket(r);if(!v)continue;e.prepareDrawTile(y);const _=v.programConfigurations.get(r.id),b=e.useProgram(p,_);u&&(e.context.activeTexture.set(l.TEXTURE0),i.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),_.updatePaintBuffers(h));const x=c.constantOr(null);if(x&&i.imageAtlas){const t=i.imageAtlas,e=t.patternPositions[x.to.toString()],n=t.patternPositions[x.from.toString()];e&&n&&_.setConstantPatternPositions(e,n)}const w=e.translatePosMatrix(y.projMatrix,i,r.paint.get("fill-translate"),r.paint.get("fill-translate-anchor"));if(s){m=v.indexBuffer2,g=v.segments2;const t=e.terrain&&e.terrain.renderingToTexture?e.terrain.drapeBufferSize:[l.drawingBufferWidth,l.drawingBufferHeight];f="fillOutlinePattern"===p&&u?wn(w,e,h,i,t):xn(w,t)}else m=v.indexBuffer,g=v.segments,f=u?bn(w,e,h,i):_n(w);e.prepareDrawProgram(e.context,b,y.toUnwrapped()),b.draw(e.context,d,o,e.stencilModeForClipping(y),a,t.CullFaceMode.disabled,f,r.id,v.layoutVertexBuffer,m,g,r.paint,e.transform.zoom,_)}}function Xn(e,n,r,i,o,a,s){const l=e.context,c=l.gl,u=r.paint.get("fill-extrusion-pattern"),h=u.constantOr(1),d=r.getCrossfadeParameters(),p=r.paint.get("fill-extrusion-opacity");for(const f of i){const i=n.getTile(f),m=i.getBucket(r);if(!m)continue;const g=m.programConfigurations.get(r.id),y=e.useProgram(h?"fillExtrusionPattern":"fillExtrusion",g);if(e.terrain){const t=e.terrain;if(!m.enableTerrain)continue;if(t.setupElevationDraw(i,y,{useMeterToDem:!0}),Jn(l,n,f,m,r,t),!m.centroidVertexBuffer){const t=y.attributes.a_centroid_pos;void 0!==t&&c.vertexAttrib2f(t,0,0)}}h&&(e.context.activeTexture.set(c.TEXTURE0),i.imageAtlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE),g.updatePaintBuffers(d));const v=u.constantOr(null);if(v&&i.imageAtlas){const t=i.imageAtlas,e=t.patternPositions[v.to.toString()],n=t.patternPositions[v.from.toString()];e&&n&&g.setConstantPatternPositions(e,n)}const _=e.translatePosMatrix(f.projMatrix,i,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor")),b=r.paint.get("fill-extrusion-vertical-gradient"),x=h?vn(_,e,b,p,f,d,i):yn(_,e,b,p);e.prepareDrawProgram(l,y,f.toUnwrapped()),y.draw(l,l.gl.TRIANGLES,o,a,s,t.CullFaceMode.backCCW,x,r.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,r.paint,e.transform.zoom,g,e.terrain?m.centroidVertexBuffer:null)}}function Jn(e,n,r,i,o,a){const s=[e=>{let n=e.canonical.x-1,r=e.wrap;return n<0&&(n=(1<<e.canonical.z)-1,r--),new t.OverscaledTileID(e.overscaledZ,r,e.canonical.z,n,e.canonical.y)},e=>{let n=e.canonical.x+1,r=e.wrap;return n===1<<e.canonical.z&&(n=0,r++),new t.OverscaledTileID(e.overscaledZ,r,e.canonical.z,n,e.canonical.y)},e=>new t.OverscaledTileID(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,(0===e.canonical.y?1<<e.canonical.z:e.canonical.y)-1),e=>new t.OverscaledTileID(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y===(1<<e.canonical.z)-1?0:e.canonical.y+1)],l=t=>{const e=n.getSource().maxzoom,r=t=>{const e=n.getTileByID(t);if(e&&e.hasData())return e.getBucket(o)};let i,a,s;return(t.overscaledZ===t.canonical.z||t.overscaledZ>=e)&&(i=r(t.key)),t.overscaledZ>=e&&(a=r(t.calculateScaledKey(t.overscaledZ+1))),t.overscaledZ>e&&(s=r(t.calculateScaledKey(t.overscaledZ-1))),i||a||s},c=[0,0,0],u=(e,n)=>(c[0]=Math.min(e.min.y,n.min.y),c[1]=Math.max(e.max.y,n.max.y),c[2]=t.EXTENT-n.min.x>e.max.x?n.min.x-t.EXTENT:e.max.x,c),h=(e,n)=>(c[0]=Math.min(e.min.x,n.min.x),c[1]=Math.max(e.max.x,n.max.x),c[2]=t.EXTENT-n.min.y>e.max.y?n.min.y-t.EXTENT:e.max.y,c),d=[(t,e)=>u(t,e),(t,e)=>u(e,t),(t,e)=>h(t,e),(t,e)=>h(e,t)],p=new t.pointGeometry(0,0);let f,m,g;const y=(e,n,i,o,s)=>{const l=[[o?i:e,o?e:i,0],[o?i:n,o?n:i,0]],c=s<0?t.EXTENT+s:s,u=[o?c:(e+n)/2,o?(e+n)/2:c,0];return 0===i&&s<0||0!==i&&s>0?a.getForTilePoints(g,[u],!0,m):l.push(u),a.getForTilePoints(r,l,!0,f),Math.max(l[0][2],l[1][2],u[2])/a.exaggeration()};for(let e=0;e<4;e++){const n=i.borders[e];if(0===n.length&&(i.borderDone[e]=!0),i.borderDone[e])continue;const o=g=s[e](r),c=l(o);if(!c||!c.enableTerrain)continue;if(m=a.findDEMTileFor(o),!m||!m.dem)continue;if(!f){const t=a.findDEMTileFor(r);if(!t||!t.dem)return;f=t}const u=(e<2?1:5)-e,h=c.borders[u];let v=0;for(let r=0;r<n.length;r++){const o=i.featuresOnBorder[n[r]],a=o.borders[e];let s;for(;v<h.length&&(s=c.featuresOnBorder[h[v]],!(s.borders[u][1]>a[0]+3));)c.borderDone[u]||c.encodeCentroid(void 0,s,!1),v++;if(s&&v<h.length){const n=v;let r=0;for(;!(s.borders[u][0]>a[1]-3)&&(r++,++v!==h.length);)s=c.featuresOnBorder[h[v]];if(s=c.featuresOnBorder[h[n]],o.intersectsCount()>1||s.intersectsCount()>1||1!==r){1!==r&&(v=n),i.encodeCentroid(void 0,o,!1),c.borderDone[u]||c.encodeCentroid(void 0,s,!1);continue}const l=d[e](o,s),f=e%2?t.EXTENT-1:0;p.x=y(l[0],Math.min(t.EXTENT-1,l[1]),f,e<2,l[2]),p.y=0,i.encodeCentroid(p,o,!1),c.borderDone[u]||c.encodeCentroid(p,s,!1)}else i.encodeCentroid(void 0,o,!1)}i.borderDone[e]=i.needsCentroidUpdate=!0,c.borderDone[u]||(c.borderDone[u]=c.needsCentroidUpdate=!0)}(i.needsCentroidUpdate||!i.centroidVertexBuffer&&0!==i.centroidVertexArray.length)&&i.uploadCentroid(e)}const Qn=new t.Color(1,0,0,1),tr=new t.Color(0,1,0,1),er=new t.Color(0,0,1,1),nr=new t.Color(1,0,1,1),rr=new t.Color(0,1,1,1);function ir(t,e,n,r){ar(t,0,e+n/2,t.transform.width,n,r)}function or(t,e,n,r){ar(t,e-n/2,0,n,t.transform.height,r)}function ar(e,n,r,i,o,a){const s=e.context,l=s.gl;l.enable(l.SCISSOR_TEST),l.scissor(n*t.exported.devicePixelRatio,r*t.exported.devicePixelRatio,i*t.exported.devicePixelRatio,o*t.exported.devicePixelRatio),s.clear({color:a}),l.disable(l.SCISSOR_TEST)}function sr(e,n,r){const i=e.context,o=i.gl,a=r.projMatrix,s=e.useProgram("debug"),l=n.getTileByID(r.key);e.terrain&&e.terrain.setupElevationDraw(l,s);const c=t.DepthMode.disabled,u=t.StencilMode.disabled,h=e.colorModeForRenderPass(),d="$debug";i.activeTexture.set(o.TEXTURE0),e.emptyTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),l._makeDebugTileBoundsBuffers(e.context,e.transform.projection);const p=l._tileDebugBuffer||e.debugBuffer,f=l._tileDebugIndexBuffer||e.debugIndexBuffer,m=l._tileDebugSegments||e.debugSegments;s.draw(i,o.LINE_STRIP,c,u,h,t.CullFaceMode.disabled,Tn(a,t.Color.red),d,p,f,m);const g=l.latestRawTileData,y=Math.floor((g&&g.byteLength||0)/1024),v=n.getTile(r).tileSize,_=512/Math.min(v,512)*(r.overscaledZ/e.transform.zoom)*.5;let b=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(b+=" => "+r.overscaledZ),function(t,e){t.initDebugOverlayCanvas();const n=t.debugOverlayCanvas,r=t.context.gl,i=t.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,n.width,n.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(e,5,5),i.strokeText(e,5,5),t.debugOverlayTexture.update(n),t.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(e,`${b} ${y}kb`),s.draw(i,o.TRIANGLES,c,u,t.ColorMode.alphaBlended,t.CullFaceMode.disabled,Tn(a,t.Color.transparent,_),d,e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments)}const lr=t.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:cr}=lr;function ur(t,e,n,r){t.emplaceBack(e,n,r)}class hr{constructor(e){this.vertexArray=new t.StructArrayLayout3f12,this.indices=new t.StructArrayLayout3ui6,ur(this.vertexArray,-1,-1,1),ur(this.vertexArray,1,-1,1),ur(this.vertexArray,-1,1,1),ur(this.vertexArray,1,1,1),ur(this.vertexArray,-1,-1,-1),ur(this.vertexArray,1,-1,-1),ur(this.vertexArray,-1,1,-1),ur(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=e.createVertexBuffer(this.vertexArray,cr),this.indexBuffer=e.createIndexBuffer(this.indices),this.segment=t.SegmentVector.simpleSegment(0,0,36,12)}}function dr(e,n,r,i,o,a){const s=e.gl,l=n.paint.get("sky-atmosphere-color"),c=n.paint.get("sky-atmosphere-halo-color"),u=n.paint.get("sky-atmosphere-sun-intensity"),h=((t,e,n,r,i)=>({u_matrix_3f:t,u_sun_direction:e,u_sun_intensity:n,u_color_tint_r:[r.r,r.g,r.b,r.a],u_color_tint_m:[i.r,i.g,i.b,i.a],u_luminance:5e-5}))(t.fromMat4([],i),o,u,l,c);s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+a,n.skyboxTexture,0),r.draw(e,s.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,t.ColorMode.unblended,t.CullFaceMode.frontCW,h,"skyboxCapture",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}const pr={symbol:function(e,n,r,i,o){if("translucent"!==e.renderPass)return;const a=t.StencilMode.disabled,s=e.colorModeForRenderPass();r.layout.get("text-variable-anchor")&&function(e,n,r,i,o,a,s){const l=n.transform,c="map"===o,u="map"===a;for(const o of e){const e=i.getTile(o),a=e.getBucket(r);if(!a||!a.text||!a.text.segments.get().length)continue;const h=t.evaluateSizeForZoom(a.textSizeData,l.zoom),d=n.transform.calculatePixelsToTileUnitsMatrix(e),p=Kt(o.projMatrix,u,c,n.transform,d),f="none"!==r.layout.get("icon-text-fit")&&a.hasIconData();if(h){const n=Math.pow(2,l.zoom-e.tileID.overscaledZ),r=l.elevation;Wn(a,c,u,s,t.symbolSize,l,p,o.projMatrix,n,h,f,r?t=>r.getAtTileOffset(o,t.x,t.y):t=>0)}}}(i,e,r,n,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),o),0!==r.paint.get("icon-opacity").constantOr(1)&&$n(e,n,r,i,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),a,s),0!==r.paint.get("text-opacity").constantOr(1)&&$n(e,n,r,i,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),a,s),n.map.showCollisionBoxes&&(Vn(e,n,r,i,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),Vn(e,n,r,i,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))},circle:function(e,n,r,i){if("translucent"!==e.renderPass)return;const o=r.paint.get("circle-opacity"),a=r.paint.get("circle-stroke-width"),s=r.paint.get("circle-stroke-opacity"),l=void 0!==r.layout.get("circle-sort-key").constantOr(1);if(0===o.constantOr(1)&&(0===a.constantOr(1)||0===s.constantOr(1)))return;const c=e.context,u=c.gl,h=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),d=t.StencilMode.disabled,p=e.colorModeForRenderPass(),f=[];for(let o=0;o<i.length;o++){const a=i[o],s=n.getTile(a),c=s.getBucket(r);if(!c)continue;const u=c.programConfigurations.get(r.id),h=Cn(r),d={programConfiguration:u,program:e.useProgram("circle",u,h),layoutVertexBuffer:c.layoutVertexBuffer,indexBuffer:c.indexBuffer,uniformValues:En(e,a,s,r),tile:s};if(l){const e=c.segments.get();for(const n of e)f.push({segments:new t.SegmentVector([n]),sortKey:n.sortKey,state:d})}else f.push({segments:c.segments,sortKey:0,state:d})}l&&f.sort((t,e)=>t.sortKey-e.sortKey);for(const n of f){const{programConfiguration:i,program:o,layoutVertexBuffer:a,indexBuffer:s,uniformValues:l,tile:f}=n.state,m=n.segments;e.terrain&&e.terrain.setupElevationDraw(f,o,{useDepthForOcclusion:!0}),e.prepareDrawProgram(c,o,f.tileID.toUnwrapped()),o.draw(c,u.TRIANGLES,h,d,p,t.CullFaceMode.disabled,l,r.id,a,s,m,r.paint,e.transform.zoom,i)}},heatmap:function(e,n,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){const o=e.context,a=o.gl,s=t.StencilMode.disabled,l=new t.ColorMode([a.ONE,a.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,n){const r=t.gl;t.activeTexture.set(r.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);let i=n.heatmapFbo;if(i)r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),t.bindFramebuffer.set(i.framebuffer);else{const o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),i=n.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4,!1),function(t,e,n,r){const i=t.gl;i.texImage2D(i.TEXTURE_2D,0,i.RGBA,e.width/4,e.height/4,0,i.RGBA,t.extRenderToTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:i.UNSIGNED_BYTE,null),r.colorAttachment.set(n)}(t,e,o,i)}}(o,e,r),o.clear({color:t.Color.transparent});for(let c=0;c<i.length;c++){const u=i[c];if(n.hasRenderableParent(u))continue;const h=n.getTile(u),d=h.getBucket(r);if(!d)continue;const p=d.programConfigurations.get(r.id),f=e.useProgram("heatmap",p),{zoom:m}=e.transform;e.terrain&&e.terrain.setupElevationDraw(h,f),e.prepareDrawProgram(o,f,u.toUnwrapped()),f.draw(o,a.TRIANGLES,t.DepthMode.disabled,s,l,t.CullFaceMode.disabled,On(u.projMatrix,h,m,r.paint.get("heatmap-intensity")),r.id,d.layoutVertexBuffer,d.indexBuffer,d.segments,r.paint,e.transform.zoom,p)}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,n){const r=e.context,i=r.gl,o=n.heatmapFbo;if(!o)return;r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);let a=n.colorRampTexture;a||(a=n.colorRampTexture=new t.Texture(r,n.colorRamp,i.RGBA)),a.bind(i.LINEAR,i.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(r,i.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,((t,e,n,r)=>({u_image:0,u_color_ramp:1,u_opacity:e.paint.get("heatmap-opacity")}))(0,n),n.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,n.paint,e.transform.zoom)}(e,r))},line:function(e,n,r,i){if("translucent"!==e.renderPass)return;const o=r.paint.get("line-opacity"),a=r.paint.get("line-width");if(0===o.constantOr(1)||0===a.constantOr(1))return;const s=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),l=e.colorModeForRenderPass(),c=r.paint.get("line-dasharray"),u=c.constantOr(1),h=r.layout.get("line-cap"),d=r.paint.get("line-pattern"),p=d.constantOr(1),f=r.paint.get("line-gradient"),m=r.getCrossfadeParameters(),g=p?"linePattern":"line",y=e.context,v=y.gl;for(const o of i){const i=n.getTile(o);if(p&&!i.patternsLoaded())continue;const a=i.getBucket(r);if(!a)continue;e.prepareDrawTile(o);const _=a.programConfigurations.get(r.id),b=Pn(r),x=e.useProgram(g,_,b),w=d.constantOr(null);if(w&&i.imageAtlas){const t=i.imageAtlas,e=t.patternPositions[w.to.toString()],n=t.patternPositions[w.from.toString()];e&&n&&_.setConstantPatternPositions(e,n)}const E=c.constantOr(null),C=h.constantOr(null);if(!p&&E&&C&&i.lineAtlas){const t=i.lineAtlas,e=t.getDash(E.to,C),n=t.getDash(E.from,C);e&&n&&_.setConstantPatternPositions(e,n)}const S=e.terrain?o.projMatrix:null,T=p?An(e,i,r,m,S):In(e,i,r,m,S,a.lineClipsArray.length);if(f){const i=a.gradients[r.id];let s=i.texture;if(r.gradientVersion!==i.version){let l=256;if(r.stepInterpolant){const r=n.getSource().maxzoom,i=o.canonical.z===r?Math.ceil(1<<e.transform.maxZoom-o.canonical.z):1;l=t.clamp(t.nextPowerOfTwo(a.maxLineLength/t.EXTENT*1024*i),256,y.maxTextureSize)}i.gradient=t.renderColorRamp({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:l,image:i.gradient||void 0,clips:a.lineClipsArray}),i.texture?i.texture.update(i.gradient):i.texture=new t.Texture(y,i.gradient,v.RGBA),i.version=r.gradientVersion,s=i.texture}y.activeTexture.set(v.TEXTURE1),s.bind(r.stepInterpolant?v.NEAREST:v.LINEAR,v.CLAMP_TO_EDGE)}u&&(y.activeTexture.set(v.TEXTURE0),i.lineAtlasTexture.bind(v.LINEAR,v.REPEAT),_.updatePaintBuffers(m)),p&&(y.activeTexture.set(v.TEXTURE0),i.imageAtlasTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE),_.updatePaintBuffers(m)),e.prepareDrawProgram(y,x,o.toUnwrapped()),x.draw(y,v.TRIANGLES,s,e.stencilModeForClipping(o),l,t.CullFaceMode.disabled,T,r.id,a.layoutVertexBuffer,a.indexBuffer,a.segments,r.paint,e.transform.zoom,_,a.layoutVertexBuffer2)}},fill:function(e,n,r,i){const o=r.paint.get("fill-color"),a=r.paint.get("fill-opacity");if(0===a.constantOr(1))return;const s=e.colorModeForRenderPass(),l=r.paint.get("fill-pattern"),c=e.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===o.constantOr(t.Color.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(e.renderPass===c){const o=e.depthModeForSublayer(1,"opaque"===e.renderPass?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly);Yn(e,n,r,i,o,s,!1)}if("translucent"===e.renderPass&&r.paint.get("fill-antialias")){const o=e.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,t.DepthMode.ReadOnly);Yn(e,n,r,i,o,s,!0)}},"fill-extrusion":function(e,n,r,i){const o=r.paint.get("fill-extrusion-opacity");if(0!==o&&"translucent"===e.renderPass){const a=new t.DepthMode(e.context.gl.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D);if(1!==o||r.paint.get("fill-extrusion-pattern").constantOr(1))Xn(e,n,r,i,a,t.StencilMode.disabled,t.ColorMode.disabled),Xn(e,n,r,i,a,e.stencilModeFor3D(),e.colorModeForRenderPass());else{const o=e.colorModeForRenderPass();Xn(e,n,r,i,a,t.StencilMode.disabled,o)}}},hillshade:function(e,n,r,i){if("offscreen"!==e.renderPass&&"translucent"!==e.renderPass)return;const o=e.context,a=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),s=e.colorModeForRenderPass(),l=e.terrain&&e.terrain.renderingToTexture,[c,u]="translucent"!==e.renderPass||l?[{},i]:e.stencilConfigForOverlap(i);for(const i of u){const o=n.getTile(i);if(o.needsHillshadePrepare&&"offscreen"===e.renderPass)nn(e,o,r,a,t.StencilMode.disabled,s);else if("translucent"===e.renderPass){const t=l&&e.terrain?e.terrain.stencilModeForRTTOverlap(i):c[i.overscaledZ];tn(e,i,o,r,a,t,s)}}o.viewport.set([0,0,e.width,e.height])},raster:function(e,n,r,i,o,a){if("translucent"!==e.renderPass)return;if(0===r.paint.get("raster-opacity"))return;if(!i.length)return;const s=e.context,l=s.gl,c=n.getSource(),u=e.useProgram("raster"),h=e.colorModeForRenderPass(),d=e.terrain&&e.terrain.renderingToTexture,[p,f]=c instanceof Ct||d?[{},i]:e.stencilConfigForOverlap(i),m=f[f.length-1].overscaledZ,g=!e.options.moving;for(const i of f){const o=d?t.DepthMode.disabled:e.depthModeForSublayer(i.overscaledZ-m,1===r.paint.get("raster-opacity")?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly,l.LESS),f=i.toUnwrapped(),y=n.getTile(i);if(d&&(!y||!y.hasData()))continue;const v=d?i.projMatrix:e.transform.calculateProjMatrix(f,g),_=e.terrain&&d?e.terrain.stencilModeForRTTOverlap(i):p[i.overscaledZ],b=a?0:r.paint.get("raster-fade-duration");y.registerFadeDuration(b);const x=n.findLoadedParent(i,0),w=un(y,x,n,e.transform,b);let E,C;e.terrain&&e.terrain.prepareDrawTile(i);const S="nearest"===r.paint.get("raster-resampling")?l.NEAREST:l.LINEAR;s.activeTexture.set(l.TEXTURE0),y.texture.bind(S,l.CLAMP_TO_EDGE),s.activeTexture.set(l.TEXTURE1),x?(x.texture.bind(S,l.CLAMP_TO_EDGE),E=Math.pow(2,x.tileID.overscaledZ-y.tileID.overscaledZ),C=[y.tileID.canonical.x*E%1,y.tileID.canonical.y*E%1]):y.texture.bind(S,l.CLAMP_TO_EDGE);const T=Rn(v,C||[0,0],E||1,w,r);if(e.prepareDrawProgram(s,u,f),c instanceof Ct)u.draw(s,l.TRIANGLES,o,t.StencilMode.disabled,h,t.CullFaceMode.disabled,T,r.id,c.boundsBuffer,e.quadTriangleIndexBuffer,c.boundsSegments);else{const{tileBoundsBuffer:n,tileBoundsIndexBuffer:i,tileBoundsSegments:a}=e.getTileBoundsBuffers(y);u.draw(s,l.TRIANGLES,o,_,h,t.CullFaceMode.disabled,T,r.id,n,i,a)}}},background:function(e,n,r,i){const o=r.paint.get("background-color"),a=r.paint.get("background-opacity");if(0===a)return;const s=e.context,l=s.gl,c=e.transform,u=c.tileSize,h=r.paint.get("background-pattern");if(e.isPatternMissing(h))return;const d=!h&&1===o.a&&1===a&&e.opaquePassEnabledForLayer()?"opaque":"translucent";if(e.renderPass!==d)return;const p=t.StencilMode.disabled,f=e.depthModeForSublayer(0,"opaque"===d?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly),m=e.colorModeForRenderPass(),g=e.useProgram(h?"backgroundPattern":"background");let y,v=i;v||(y=e.getBackgroundTiles(),v=Object.values(y).map(t=>t.tileID)),h&&(s.activeTexture.set(l.TEXTURE0),e.imageManager.bind(e.context));const _=r.getCrossfadeParameters();for(const d of v){const v=d.toUnwrapped(),b=i?d.projMatrix:e.transform.calculateProjMatrix(v);e.prepareDrawTile(d);const x=n?n.getTile(d):y?y[d.key]:new t.Tile(d,u,c.zoom,e),w=h?Bn(b,a,e,h,{tileID:d,tileSize:u},_):zn(b,a,o);e.prepareDrawProgram(s,g,v);const{tileBoundsBuffer:E,tileBoundsIndexBuffer:C,tileBoundsSegments:S}=e.getTileBoundsBuffers(x);g.draw(s,l.TRIANGLES,f,p,m,t.CullFaceMode.disabled,w,r.id,E,C,S)}},sky:function(e,n,r){const i=e.transform,o="mercator"===i.projection.name?1:t.smoothstep(7,8,i.zoom),a=r.paint.get("sky-opacity")*o;if(0===a)return;const s=e.context,l=r.paint.get("sky-type"),c=new t.DepthMode(s.gl.LEQUAL,t.DepthMode.ReadOnly,[0,1]),u=e.frameCounter/1e3%1;"atmosphere"===l?"offscreen"===e.renderPass?r.needsSkyboxCapture(e)&&(function(e,n,r,i){const o=e.context,a=o.gl;let s=n.skyboxFbo;if(!s){s=n.skyboxFbo=o.createFramebuffer(32,32,!1),n.skyboxGeometry=new hr(o),n.skyboxTexture=o.gl.createTexture(),a.bindTexture(a.TEXTURE_CUBE_MAP,n.skyboxTexture),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MAG_FILTER,a.LINEAR);for(let t=0;t<6;++t)a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,a.RGBA,32,32,0,a.RGBA,a.UNSIGNED_BYTE,null)}o.bindFramebuffer.set(s.framebuffer),o.viewport.set([0,0,32,32]);const l=n.getCenter(e,!0),c=e.useProgram("skyboxCapture"),u=new Float64Array(16);t.identity(u),t.rotateY(u,u,.5*-Math.PI),dr(o,n,c,u,l,0),t.identity(u),t.rotateY(u,u,.5*Math.PI),dr(o,n,c,u,l,1),t.identity(u),t.rotateX(u,u,.5*-Math.PI),dr(o,n,c,u,l,2),t.identity(u),t.rotateX(u,u,.5*Math.PI),dr(o,n,c,u,l,3),t.identity(u),dr(o,n,c,u,l,4),t.identity(u),t.rotateY(u,u,Math.PI),dr(o,n,c,u,l,5),o.viewport.set([0,0,e.width,e.height])}(e,r),r.markSkyboxValid(e)):"sky"===e.renderPass&&function(e,n,r,i,o){const a=e.context,s=a.gl,l=e.transform,c=e.useProgram("skybox");a.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_CUBE_MAP,n.skyboxTexture);const u=((t,e,n,r,i)=>({u_matrix:t,u_sun_direction:e,u_cubemap:0,u_opacity:r,u_temporal_offset:i}))(l.skyboxMatrix,n.getCenter(e,!1),0,i,o);e.prepareDrawProgram(a,c),c.draw(a,s.TRIANGLES,r,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.backCW,u,"skybox",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(e,r,c,a,u):"gradient"===l&&"sky"===e.renderPass&&function(e,n,r,i,o){const a=e.context,s=a.gl,l=e.transform,c=e.useProgram("skyboxGradient");n.skyboxGeometry||(n.skyboxGeometry=new hr(a)),a.activeTexture.set(s.TEXTURE0);let u=n.colorRampTexture;u||(u=n.colorRampTexture=new t.Texture(a,n.colorRamp,s.RGBA)),u.bind(s.LINEAR,s.CLAMP_TO_EDGE);const h=((e,n,r,i,o)=>({u_matrix:e,u_color_ramp:0,u_center_direction:n,u_radius:t.degToRad(r),u_opacity:i,u_temporal_offset:o}))(l.skyboxMatrix,n.getCenter(e,!1),n.paint.get("sky-gradient-radius"),i,o);e.prepareDrawProgram(a,c),c.draw(a,s.TRIANGLES,r,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.backCW,h,"skyboxGradient",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(e,r,c,a,u)},debug:function(t,e,n){for(let r=0;r<n.length;r++)sr(t,e,n[r])},custom:function(e,n,r){const i=e.context,o=r.implementation;if("mercator"===e.transform.projection.name){if("offscreen"===e.renderPass){const t=o.prerender;t&&(e.setCustomLayerDefaults(),i.setColorMode(e.colorModeForRenderPass()),t.call(o,i.gl,e.transform.customLayerMatrix()),i.setDirty(),e.setBaseState())}else if("translucent"===e.renderPass){e.setCustomLayerDefaults(),i.setColorMode(e.colorModeForRenderPass()),i.setStencilMode(t.StencilMode.disabled);const n="3d"===o.renderingMode?new t.DepthMode(e.context.gl.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D):e.depthModeForSublayer(0,t.DepthMode.ReadOnly);i.setDepthMode(n),o.render(i.gl,e.transform.customLayerMatrix()),i.setDirty(),e.setBaseState(),i.bindFramebuffer.set(null)}}else t.warnOnce("Custom layers are not yet supported with non-mercator projections. Use mercator to enable custom layers.")}};class fr{constructor(e,n){this.context=new xt(e),this.transform=n,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=t.SourceCache.maxUnderzooming+t.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new je,this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(t,e){const n=!!t&&!!t.terrain&&"mercator"===this.transform.projection.name;if(!(n||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new pn(this,t));const r=this._terrain;this.transform.elevation=n?r:null,r.update(t,this.transform,e)}_updateFog(t){const e=t.fog;if(!e||e.getOpacity(this.transform.pitch)<1||e.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[n,r]=e.getFovAdjustedRange(this.transform._fov);if(n>r)return void(this.transform.fogCullDistSq=null);const i=n+.78*(r-n);this.transform.fogCullDistSq=i*i}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(e,n){if(this.width=e*t.exported.devicePixelRatio,this.height=n*t.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const t of this.style.order)this.style._layers[t].resize()}setup(){const e=this.context,n=new t.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(t.EXTENT,0),n.emplaceBack(0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(n,t.posAttributes.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);const r=new t.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(t.EXTENT,0),r.emplaceBack(0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(r,t.posAttributes.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);const i=new t.StructArrayLayout2i4;i.emplaceBack(-1,-1),i.emplaceBack(1,-1),i.emplaceBack(-1,1),i.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(i,t.posAttributes.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);const o=new t.StructArrayLayout4i8;o.emplaceBack(0,0,0,0),o.emplaceBack(t.EXTENT,0,t.EXTENT,0),o.emplaceBack(0,t.EXTENT,0,t.EXTENT),o.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.mercatorBoundsBuffer=e.createVertexBuffer(o,t.boundsAttributes.members),this.mercatorBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);const a=new t.StructArrayLayout3ui6;a.emplaceBack(0,1,2),a.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(a);const s=new t.StructArrayLayout1ui2;for(const t of[0,1,3,2,0])s.emplaceBack(t);this.debugIndexBuffer=e.createIndexBuffer(s),this.emptyTexture=new t.Texture(e,{width:1,height:1,data:new Uint8Array([0,0,0,0])},e.gl.RGBA),this.identityMat=t.create$1();const l=this.context.gl;this.stencilClearMode=new t.StencilMode({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO),this.loadTimeStamps.push(t.window.performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(t){return t._makeTileBoundsBuffers(this.context,this.transform.projection),t._tileBoundsBuffer?{tileBoundsBuffer:t._tileBoundsBuffer,tileBoundsIndexBuffer:t._tileBoundsIndexBuffer,tileBoundsSegments:t._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const e=this.context,n=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this.useProgram("clippingMask").draw(e,n.TRIANGLES,t.DepthMode.disabled,this.stencilClearMode,t.ColorMode.disabled,t.CullFaceMode.disabled,cn(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(e,n,r){if(!(n&&this.currentStencilSource!==n.id&&e.isTileClipped()&&r&&r.length))return;this.currentStencilSource=n.id;const i=this.context,o=i.gl;this.nextStencilID+r.length>256&&this.clearStencil(),i.setColorMode(t.ColorMode.disabled),i.setDepthMode(t.DepthMode.disabled);const a=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const e of r){const r=n.getTile(e),s=this._tileClippingMaskIDs[e.key]=this.nextStencilID++,{tileBoundsBuffer:l,tileBoundsIndexBuffer:c,tileBoundsSegments:u}=this.getTileBoundsBuffers(r);a.draw(i,o.TRIANGLES,t.DepthMode.disabled,new t.StencilMode({func:o.ALWAYS,mask:0},s,255,o.KEEP,o.KEEP,o.REPLACE),t.ColorMode.disabled,t.CullFaceMode.disabled,cn(e.projMatrix),"$clipping",l,c,u)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,n=this.context.gl;return new t.StencilMode({func:n.NOTEQUAL,mask:255},e,255,n.KEEP,n.KEEP,n.REPLACE)}stencilModeForClipping(e){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(e);const n=this.context.gl;return new t.StencilMode({func:n.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,n.KEEP,n.KEEP,n.REPLACE)}stencilConfigForOverlap(e){const n=this.context.gl,r=e.sort((t,e)=>e.overscaledZ-t.overscaledZ),i=r[r.length-1].overscaledZ,o=r[0].overscaledZ-i+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();const e={};for(let r=0;r<o;r++)e[r+i]=new t.StencilMode({func:n.GEQUAL,mask:255},r+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=o,[e,r]}return[{[i]:t.StencilMode.disabled},r]}colorModeForRenderPass(){const e=this.context.gl;if(this._showOverdrawInspector){const n=1/8;return new t.ColorMode([e.CONSTANT_COLOR,e.ONE],new t.Color(n,n,n,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?t.ColorMode.unblended:t.ColorMode.alphaBlended}depthModeForSublayer(e,n,r){if(!this.opaquePassEnabledForLayer())return t.DepthMode.disabled;const i=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new t.DepthMode(r||this.context.gl.LEQUAL,n,[i,i])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,n){this.style=e,this.options=n,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.exported.now()),this.imageManager.beginFrame();const r=this.style.order,i=this.style._sourceCaches;for(const t in i){const e=i[t];e.used&&e.prepare(this.context)}const o={},a={},s={};for(const t in i){const e=i[t];o[t]=e.getVisibleCoordinates(),a[t]=o[t].slice().reverse(),s[t]=e.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let t=0;t<r.length;t++)if(this.style._layers[r[t]].is3D()){this.opaquePassCutoff=t;break}if(this.terrain&&(this.terrain.updateTileBinding(s),this.opaquePassCutoff=0),!t.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const t of r){const n=this.style._layers[t],r=e._getLayerSourceCache(n);if(!n.hasOffscreenPass()||n.isHidden(this.transform.zoom))continue;const i=r?a[r.id]:void 0;("custom"===n.type||n.isSky()||i&&i.length)&&this.renderLayer(this,r,n,i)}this.depthRangeFor3D=[0,1-(e.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);let l=t.Color.transparent;if(this.style.fog&&this.style.fog.getOpacity(this.transform.pitch)&&(l=this.style.fog.properties.get("color")),this.context.clear({color:n.showOverdrawInspector?t.Color.black:l,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=r.length-1;this.currentLayer>=0;this.currentLayer--){const t=this.style._layers[r[this.currentLayer]],n=e._getLayerSourceCache(t);if(t.isSky())continue;const i=n?a[n.id]:void 0;this._renderTileClippingMasks(t,n,i),this.renderLayer(this,n,t,i)}if(this.renderPass="sky",this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<r.length;this.currentLayer++){const t=this.style._layers[r[this.currentLayer]],n=e._getLayerSourceCache(t);t.isSky()&&this.renderLayer(this,n,t,n?a[n.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<r.length;){const t=this.style._layers[r[this.currentLayer]],n=e._getLayerSourceCache(t);if(t.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(t)){if(t.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const i=n?("symbol"===t.type?s:a)[n.id]:void 0;this._renderTileClippingMasks(t,n,n?o[n.id]:void 0),this.renderLayer(this,n,t,i),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry){let n=null;t.values(this.style._layers).forEach(t=>{const r=e._getLayerSourceCache(t);r&&!t.isHidden(this.transform.zoom)&&(!n||n.getSource().maxzoom<r.getSource().maxzoom)&&(n=r)}),n&&this.options.showTileBoundaries&&pr.debug(this,n,n.getVisibleCoordinates())}this.options.showPadding&&function(t){const e=t.transform.padding;ir(t,t.transform.height-(e.top||0),3,Qn),ir(t,e.bottom||0,3,tr),or(t,e.left||0,3,er),or(t,t.transform.width-(e.right||0),3,nr);const n=t.transform.centerPoint;!function(t,e,n,r){ar(t,e-1,n-10,2,20,r),ar(t,e-10,n-1,20,2,r)}(t,n.x,t.transform.height-n.y,rr)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%t.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(t.window.performance.now()),this.saveCanvasCopy())}renderLayer(t,e,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||"sky"===n.type||"custom"===n.type||r&&r.length)&&(this.id=n.id,this.gpuTimingStart(n),pr[n.type](t,e,n,r,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(t){if(!this.options.gpuTiming)return;const e=this.context.extTimerQuery;let n=this.gpuTimers[t.id];n||(n=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),n.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,n.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}collectGpuTimers(){const t=this.gpuTimers;return this.gpuTimers={},t}queryGpuTimers(t){const e={};for(const n in t){const r=t[n],i=this.context.extTimerQuery,o=i.getQueryObjectEXT(r.query,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(r.query),e[n]=o}return e}translatePosMatrix(e,n,r,i,o){if(!r[0]&&!r[1])return e;const a=o?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(a){const t=Math.sin(a),e=Math.cos(a);r=[r[0]*e-r[1]*t,r[0]*t+r[1]*e]}const s=[o?r[0]:M(n,r[0],this.transform.zoom),o?r[1]:M(n,r[1],this.transform.zoom),0],l=new Float32Array(16);return t.translate(l,e,s),l}saveTileTexture(t){const e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const e=this._tileTextures[t];return e&&e.length>0?e.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;const e=this.imageManager.getPattern(t.from.toString()),n=this.imageManager.getPattern(t.to.toString());return!e||!n}currentGlobalDefines(){const t=this.terrain&&this.terrain.renderingToTexture,e=this.style&&this.style.fog,n=[];return this.terrain&&!this.terrain.renderingToTexture&&n.push("TERRAIN"),e&&!t&&0!==e.getOpacity(this.transform.pitch)&&n.push("FOG"),t&&n.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&n.push("OVERDRAW_INSPECTOR"),n}useProgram(t,e,n){this.cache=this.cache||{};const r=n||[],i=this.currentGlobalDefines().concat(r),o=mn.cacheKey(t,i,e);return this.cache[o]||(this.cache[o]=new mn(this.context,t,Ye[t],e,Un[t],i)),this.cache[o]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}prepareDrawTile(t){this.terrain&&this.terrain.prepareDrawTile(t)}prepareDrawProgram(t,e,n){if(this.terrain&&this.terrain.renderingToTexture)return;const r=this.style.fog;if(r){const i=r.getOpacity(this.transform.pitch);0!==i&&e.setFogUniformValues(t,((t,e,n,r)=>{const i=e.properties.get("color"),o=t.frameCounter/1e3%1,a=[i.r/i.a,i.g/i.a,i.b/i.a,r];return{u_fog_matrix:n?t.transform.calculateFogTileMatrix(n):t.identityMat,u_fog_range:e.getFovAdjustedRange(t.transform._fov),u_fog_color:a,u_fog_horizon_blend:e.properties.get("horizon-blend"),u_fog_temporal_offset:o}})(this,r,n,i))}}setTileLoadedFlag(t){this.tileLoaded=t}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const t=this.context.gl,e=t.createTexture();return t.bindTexture(t.TEXTURE_2D,e),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,0,0,t.drawingBufferWidth,t.drawingBufferHeight,0),e}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const t=this.style&&this.style.fog;return!!t&&0!==t.getOpacity(this.transform.pitch)}getBackgroundTiles(){const e=this._backgroundTiles,n=this._backgroundTiles={},r=this.transform.coveringTiles({tileSize:512});for(const i of r)n[i.key]=e[i.key]||new t.Tile(i,512,this.transform.tileZoom,this);return n}clearBackgroundTiles(){this._backgroundTiles={}}}class mr{constructor(t=0,e=0,n=0,r=0){if(isNaN(t)||t<0||isNaN(e)||e<0||isNaN(n)||n<0||isNaN(r)||r<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=n,this.right=r}interpolate(e,n,r){return null!=n.top&&null!=e.top&&(this.top=t.number(e.top,n.top,r)),null!=n.bottom&&null!=e.bottom&&(this.bottom=t.number(e.bottom,n.bottom,r)),null!=n.left&&null!=e.left&&(this.left=t.number(e.left,n.left,r)),null!=n.right&&null!=e.right&&(this.right=t.number(e.right,n.right,r)),this}getCenter(e,n){const r=t.clamp((this.left+e-this.right)/2,0,e),i=t.clamp((this.top+n-this.bottom)/2,0,n);return new t.pointGeometry(r,i)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new mr(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function gr(t,e){return[t[4*e],t[4*e+1],t[4*e+2],t[4*e+3]]}function yr(t,e,n){t[4*e+0]=n[0],t[4*e+1]=n[1],t[4*e+2]=n[2],t[4*e+3]=n[3]}function vr(e,n){const r=gr(e,3);t.fromQuat(e,n),yr(e,3,r)}function _r(t,e){yr(t,3,[e[0],e[1],e[2],1])}function br(e,n){const r=t.identity$1([]);return t.rotateZ$1(r,r,-n),t.rotateX$1(r,r,-e),r}function xr(e,n){const r=[e[0],e[1],0],i=[n[0],n[1],0];if(t.length(r)>=1e-15){const e=t.normalize([],r);t.scale(i,e,t.dot(i,e)),n[0]=i[0],n[1]=i[1]}const o=t.cross([],n,e);if(t.len(o)<1e-15)return null;const a=Math.atan2(-o[1],o[0]);return br(Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2]),a)}class wr{constructor(t,e){this.position=t,this.orientation=e}get position(){return this._position}set position(e){this._position=this._renderWorldCopies?function(e){if(!e)return;const n=Array.isArray(e)?new t.MercatorCoordinate(e[0],e[1],e[2]):e;return n.x=t.wrap(n.x,0,1),n}(e):e}lookAtPoint(e,n){if(this.orientation=null,!this.position)return;const r=this._elevation?this._elevation.getAtPointOrZero(t.MercatorCoordinate.fromLngLat(e)):0,i=this.position,o=t.MercatorCoordinate.fromLngLat(e,r),a=[o.x-i.x,o.y-i.y,o.z-i.z];n||(n=[0,0,1]),n[2]=Math.abs(n[2]),this.orientation=xr(a,n)}setPitchBearing(e,n){this.orientation=br(t.degToRad(e),t.degToRad(-n))}}class Er{constructor(e,n){this._transform=t.identity([]),this._orientation=t.identity$1([]),n&&(this._orientation=n,vr(this._transform,this._orientation)),e&&_r(this._transform,e)}get mercatorPosition(){const e=this.position;return new t.MercatorCoordinate(e[0],e[1],e[2])}get position(){const t=gr(this._transform,3);return[t[0],t[1],t[2]]}set position(t){_r(this._transform,t)}get orientation(){return this._orientation}set orientation(t){this._orientation=t,vr(this._transform,this._orientation)}getPitchBearing(){const t=this.forward(),e=this.right();return{bearing:Math.atan2(-e[1],e[0]),pitch:Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2])}}setPitchBearing(t,e){this._orientation=br(t,e),vr(this._transform,this._orientation)}forward(){const t=gr(this._transform,2);return[-t[0],-t[1],-t[2]]}up(){const t=gr(this._transform,1);return[-t[0],-t[1],-t[2]]}right(){const t=gr(this._transform,0);return[t[0],t[1],t[2]]}getCameraToWorld(e,n){const r=new Float64Array(16);return t.invert(r,this.getWorldToCamera(e,n)),r}getWorldToCameraPosition(e,n,r){const i=this.position;t.scale(i,i,-e);const o=new Float64Array(16);return t.fromScaling(o,[r,r,r]),t.translate(o,o,i),o[10]*=n,o}getWorldToCamera(e,n){const r=new Float64Array(16),i=new Float64Array(4),o=this.position;return t.conjugate(i,this._orientation),t.scale(o,o,-e),t.fromQuat(r,i),t.translate(r,r,o),r[1]*=-1,r[5]*=-1,r[9]*=-1,r[13]*=-1,r[8]*=n,r[9]*=n,r[10]*=n,r[11]*=n,r}getCameraToClipPerspective(e,n,r,i){const o=new Float64Array(16);return t.perspective(o,e,n,r,i),o}getDistanceToElevation(e){const n=0===e?0:t.mercatorZfromAltitude(e,this.position[1]),r=this.forward();return(n-this.position[2])/r[2]}clone(){return new Er([...this.position],[...this.orientation])}}function Cr(e,n){const r=Tr(e),i=function(e,n,r,i,o){const a=new t.LngLat(r.lng-180*Or,r.lat),s=new t.LngLat(r.lng+180*Or,r.lat),l=e.project(a.lng,a.lat),c=e.project(s.lng,s.lat),u=-Math.atan2(c.y-l.y,c.x-l.x),h=t.MercatorCoordinate.fromLngLat(r);h.y=t.clamp(h.y,-.999975,.999975);const d=h.toLngLat(),p=e.project(d.lng,d.lat),f=t.MercatorCoordinate.fromLngLat(d);f.x+=Or;const m=f.toLngLat(),g=e.project(m.lng,m.lat),y=Ar(g.x-p.x,g.y-p.y,u),v=t.MercatorCoordinate.fromLngLat(d);v.y+=Or;const _=v.toLngLat(),b=e.project(_.lng,_.lat),x=Ar(b.x-p.x,b.y-p.y,u),w=Math.abs(y.x)/Math.abs(x.y),E=t.identity([]);t.rotateZ(E,E,-u*(1-(o?0:i)));const C=t.identity([]);return t.scale$1(C,C,[1,1-(1-w)*i,1]),C[4]=-x.x/x.y*i,t.rotateZ(C,C,u),t.multiply(C,E,C),C}(e.projection,0,e.center,r,n),o=Sr(e);return t.scale$1(i,i,[o,o,1]),i}function Sr(e){const n=e.projection,r=Tr(e),i=Ir(n,e.center),o=Ir(n,t.LngLat.convert(n.center));return Math.pow(2,i*r+(1-r)*o)}function Tr(e){const n=e.projection.range;if(!n)return 0;const r=Math.max(e.width,e.height),i=Math.log(r/1024)/Math.LN2;return t.smoothstep(n[0]+i,n[1]+i,e.zoom)}const Or=1/4e4;function Ir(e,n){const r=t.clamp(n.lat,-t.MAX_MERCATOR_LATITUDE,t.MAX_MERCATOR_LATITUDE),i=new t.LngLat(n.lng-180*Or,r),o=new t.LngLat(n.lng+180*Or,r),a=e.project(i.lng,r),s=e.project(o.lng,r),l=t.MercatorCoordinate.fromLngLat(i),c=t.MercatorCoordinate.fromLngLat(o),u=s.x-a.x,h=s.y-a.y,d=c.x-l.x,p=c.y-l.y,f=Math.sqrt((d*d+p*p)/(u*u+h*h));return Math.log(f)/Math.LN2}function Ar(t,e,n){const r=Math.cos(n),i=Math.sin(n);return{x:t*r-e*i,y:t*i+e*r}}class Mr{constructor(e,n,r,i,o){this.tileSize=512,this._renderWorldCopies=void 0===o||o,this._minZoom=e||0,this._maxZoom=n||22,this._minPitch=null==r?0:r,this._maxPitch=null==i?60:i,this.setProjection(),this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new mr,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Er,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._horizonShift=.1}clone(){const t=new Mr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t._elevation=this._elevation,t._centerAltitude=this._centerAltitude,t.tileSize=this.tileSize,t.setMaxBounds(this.getMaxBounds()),t.width=this.width,t.height=this.height,t.cameraElevationReference=this.cameraElevationReference,t._center=this._center,t._setZoom(this.zoom),t._cameraZoom=this._cameraZoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._averageElevation=this._averageElevation,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._camera=this._camera.clone(),t._calcMatrices(),t.freezeTileCoverage=this.freezeTileCoverage,t.setProjection(this.getProjection()),t}get elevation(){return this._elevation}set elevation(t){this._elevation!==t&&(this._elevation=t,t?this._updateCenterElevation()&&this._updateCameraOnTerrain():(this._cameraZoom=null,this._centerAltitude=0),this._calcMatrices())}updateElevation(t){this._terrainEnabled()&&null==this._cameraZoom&&this._updateCenterElevation()&&this._updateCameraOnTerrain(),t&&this._constrainCameraAltitude(),this._calcMatrices()}getProjection(){return t.pick(this.projection,["name","center","parallels"])}setProjection(e){null==e&&(e={name:"mercator"}),this.projectionOptions=e;const n=this.projection?this.getProjection():void 0;return this.projection=t.getProjection(e),!i(n,this.getProjection())&&(this._calcMatrices(),!0)}get minZoom(){return this._minZoom}set minZoom(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}get maxZoom(){return this._maxZoom}set maxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}get minPitch(){return this._minPitch}set minPitch(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))}get maxPitch(){return this._maxPitch}set maxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.wrap}set renderWorldCopies(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this.tileSize*this.scale}get cameraWorldSize(){const t=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(t))}get pixelsPerMeter(){return t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize}get cameraPixelsPerMeter(){return t.mercatorZfromAltitude(1,this.center.lat)*this.cameraWorldSize}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new t.pointGeometry(this.width,this.height)}get bearing(){return t.wrap(this.rotation,-180,180)}set bearing(t){this.rotation=t}get rotation(){return-this.angle/Math.PI*180}set rotation(e){const n=-e*Math.PI/180;var r;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=(r=new t.ARRAY_TYPE(4),t.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0),r[0]=1,r[3]=1,r),function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);t[0]=r*l+o*s,t[1]=i*l+a*s,t[2]=r*-s+o*l,t[3]=i*-s+a*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(e){const n=t.clamp(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(t){this._averageElevation=t,this._calcFogMatrices()}get zoom(){return this._zoom}set zoom(t){const e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._setZoom(e),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._constrain(),this._calcMatrices())}_setZoom(t){this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom}_updateCenterElevation(){if(!this._elevation)return!1;const t=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center),-1);return-1===t?(this._cameraZoom=null,!1):(this._centerAltitude=t,!0)}_updateCameraOnTerrain(){const e=this.cameraToCenterDistance/this.worldSize,n=t.mercatorZfromAltitude(this._centerAltitude,this.center.lat);this._cameraZoom=this._zoomFromMercatorZ(n+e)}sampleAverageElevation(){if(!this._elevation)return 0;const e=this._elevation,n=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],r=this.horizonLineFromTop();let i=0,o=0;for(let a=0;a<n.length;a++){const s=new t.pointGeometry(n[a][0]*this.width,r+n[a][1]*(this.height-r)),l=e.pointCoordinate(s);if(!l)continue;const c=1/Math.hypot(l[0]-this._camera.position[0],l[1]-this._camera.position[1]);i+=l[3]*c,o+=c}return 0===o?NaN:i/o}get center(){return this._center}set center(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCenterElevation()?this._updateCameraOnTerrain():this._cameraZoom=null:this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._cameraZoom||!this._elevation)return;const e=this._cameraZoom,n=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),r=t.mercatorZfromAltitude(n,this.center.lat),i=this._mercatorZfromZoom(e),o=this._mercatorZfromZoom(this._maxZoom),a=Math.max(i-r,o);this._setZoom(this._zoomFromMercatorZ(a))}get padding(){return this._edgeInsets.toJSON()}set padding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}computeZoomRelativeTo(e){const n=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,e.toAltitude()));let r;r=e.z<this._camera.position[2]?[n.x,n.y,n.z]:[e.x,e.y,e.z];const i=t.length(t.sub([],this._camera.position,r));return t.clamp(this._zoomFromMercatorZ(i),this._minZoom,this._maxZoom)}setFreeCameraOptions(e){if(!this.height)return;if(!e.position&&!e.orientation)return;this._updateCameraState();let n=!1;if(e.orientation&&!t.exactEquals(e.orientation,this._camera.orientation)&&(n=this._setCameraOrientation(e.orientation)),e.position){const r=[e.position.x,e.position.y,e.position.z];t.exactEquals$1(r,this._camera.position)||(this._setCameraPosition(r),n=!0)}n&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const e=this._camera.position,n=new wr;return n.position=new t.MercatorCoordinate(e[0],e[1],e[2]),n.orientation=this._camera.orientation,n._elevation=this.elevation,n._renderWorldCopies=this.renderWorldCopies,n}_setCameraOrientation(e){if(!t.length$1(e))return!1;t.normalize$1(e,e);const n=t.transformQuat([],[0,0,-1],e),r=t.transformQuat([],[0,-1,0],e);if(r[2]<0)return!1;const i=xr(n,r);return!!i&&(this._camera.orientation=i,!0)}_setCameraPosition(e){const n=this.zoomScale(this.minZoom)*this.tileSize,r=this.zoomScale(this.maxZoom)*this.tileSize,i=this.cameraToCenterDistance;e[2]=t.clamp(e[2],i/r,i/n),this._camera.position=e}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,e,n){this._unmodified=!1,this._edgeInsets.interpolate(t,e,n),this._constrain(),this._calcMatrices()}coveringZoomLevel(t){const e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)}getVisibleUnwrappedCoordinates(e){const n=[new t.UnwrappedTileID(0,e)];if(this.renderWorldCopies){const r=this.pointCoordinate(new t.pointGeometry(0,0)),i=this.pointCoordinate(new t.pointGeometry(this.width,0)),o=this.pointCoordinate(new t.pointGeometry(this.width,this.height)),a=this.pointCoordinate(new t.pointGeometry(0,this.height)),s=Math.floor(Math.min(r.x,i.x,o.x,a.x)),l=Math.floor(Math.max(r.x,i.x,o.x,a.x)),c=1;for(let r=s-c;r<=l+c;r++)0!==r&&n.push(new t.UnwrappedTileID(r,e))}return n}coveringTiles(e){let n=this.coveringZoomLevel(e);const r=n,i=this.elevation&&!e.isTerrainDEM,o="mercator"===this.projection.name;if(void 0!==e.minzoom&&n<e.minzoom)return[];void 0!==e.maxzoom&&n>e.maxzoom&&(n=e.maxzoom);const a=this.locationCoordinate(this.center),s=1<<n,l=[s*a.x,s*a.y,0],c=f.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n),u=this.pointCoordinate(this.getCameraPoint()),h=s*t.mercatorZfromAltitude(1,this.center.lat),d=this._camera.position[2]/t.mercatorZfromAltitude(1,this.center.lat),p=[s*u.x,s*u.y,d],g=this.cameraToCenterDistance/e.tileSize*(e.roundZoom?1:.502),y=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&o?n:0,v=e.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,_=e.isTerrainDEM?-v:this._elevation?this._elevation.getMinElevationBelowMSL():0,b=Sr(this),x=e=>{const n=1/4e4,r=new t.MercatorCoordinate(e.x+n,e.y,e.z),i=new t.MercatorCoordinate(e.x,e.y+n,e.z),o=e.toLngLat(),a=r.toLngLat(),s=i.toLngLat(),l=this.locationCoordinate(o),c=this.locationCoordinate(a),u=this.locationCoordinate(s),h=Math.hypot(c.x-l.x,c.y-l.y),d=Math.hypot(u.x-l.x,u.y-l.y);return Math.sqrt(h*d)*b/n},w=(e,n,r,i,o,a)=>{const l=t.tileTransform({z:e,x:n,y:r},this.projection);return new m([(i+l.x/l.scale)*s,s*(l.y/l.scale),o],[(i+l.x2/l.scale)*s,s*(l.y2/l.scale),a])},E=t=>({aabb:w(0,0,0,t,_,v),zoom:0,x:0,y:0,wrap:t,fullyVisible:!1}),C=[];let S=[];const T=n,O=e.reparseOverscaled?r:n,I=t=>{if(!this._elevation||!t.tileID)return;const e=this._elevation.getMinMaxForTile(t.tileID),n=t.aabb;e?(n.min[2]=e.min,n.max[2]=e.max,n.center[2]=(n.min[2]+n.max[2])/2):(t.shouldSplit=k(t),t.shouldSplit||(n.min[2]=n.max[2]=n.center[2]=this._centerAltitude))},A=t=>t*t,M=A((d-this._centerAltitude)*h),k=e=>{if(e.zoom<y)return!0;if(e.zoom===T)return!1;if(null!=e.shouldSplit)return e.shouldSplit;const n=e.aabb.distanceX(p),a=e.aabb.distanceY(p);let s=M;i&&(s=A(e.aabb.distanceZ(p)*h));let l=1;if(!o&&r<=5){const n=Math.pow(2,e.zoom),r=x(new t.MercatorCoordinate((e.x+.5)/n,(e.y+.5)/n));l=r>.85?1:r}const c=n*n+a*a+s;return c<A((1<<T-e.zoom)*g*l*((t,e)=>{if(e*A(.707)<t)return 1;const n=Math.sqrt(e/t);return n/(1.4144271570014144+(Math.pow(1.1,n-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(s,M),c))};if(this.renderWorldCopies)for(let t=1;t<=3;t++)C.push(E(-t)),C.push(E(t));for(C.push(E(0));C.length>0;){const r=C.pop(),o=r.x,a=r.y;let s=r.fullyVisible;if(!s){const t=r.aabb.intersects(c);if(0===t)continue;s=2===t}if(r.zoom!==T&&k(r))for(let e=0;e<4;e++){const n=(o<<1)+e%2,l=(a<<1)+(e>>1),c={aabb:"mercator"===this.projection.name?r.aabb.quadrant(e):w(r.zoom+1,n,l,r.wrap,0,0),zoom:r.zoom+1,x:n,y:l,wrap:r.wrap,fullyVisible:s,tileID:void 0,shouldSplit:void 0};i&&(c.tileID=new t.OverscaledTileID(r.zoom+1===T?O:r.zoom+1,r.wrap,r.zoom+1,n,l),I(c)),C.push(c)}else{const i=r.zoom===T?O:r.zoom;if(e.minzoom&&e.minzoom>i)continue;const s=l[0]-(.5+o+(r.wrap<<r.zoom))*(1<<n-r.zoom),c=l[1]-.5-a,u=r.tileID?r.tileID:new t.OverscaledTileID(i,r.wrap,r.zoom,o,a);S.push({tileID:u,distanceSq:s*s+c*c})}}if(this.fogCullDistSq){const n=this.fogCullDistSq,r=this.horizonLineFromTop();S=S.filter(i=>{const o=[0,0,0,1],a=[t.EXTENT,t.EXTENT,0,1],s=this.calculateFogTileMatrix(i.tileID.toUnwrapped());t.transformMat4(o,o,s),t.transformMat4(a,a,s);const l=t.getAABBPointSquareDist(o,a);if(0===l)return!0;let c=!1;const u=this._elevation;if(u&&l>n&&0!==r){const n=this.calculateProjMatrix(i.tileID.toUnwrapped());let o;e.isTerrainDEM||(o=u.getMinMaxForTile(i.tileID)),o||(o={min:_,max:v});const a=t.furthestTileCorner(this.rotation),s=[a[0]*t.EXTENT,a[1]*t.EXTENT,o.max];t.transformMat4$1(s,s,n),c=(1-s[1])*this.height*.5<r}return l<n||c})}return S.sort((t,e)=>t.distanceSq-e.distanceSq).map(t=>t.tileID)}resize(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(t){return Math.pow(2,t)}scaleZoom(t){return Math.log(t)/Math.LN2}project(e){const n=t.clamp(e.lat,-t.MAX_MERCATOR_LATITUDE,t.MAX_MERCATOR_LATITUDE),r=this.projection.project(e.lng,n);return new t.pointGeometry(r.x*this.worldSize,r.y*this.worldSize)}unproject(t){return this.projection.unproject(t.x/this.worldSize,t.y/this.worldSize)}get point(){return this.project(this.center)}setLocationAtPoint(e,n){const r=this.pointCoordinate(n),i=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(e);this.setLocation(new t.MercatorCoordinate(o.x-(r.x-i.x),o.y-(r.y-i.y)))}setLocation(t){this.center=this.coordinateLocation(t),this.renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(t){return this._coordinatePoint(this.locationCoordinate(t),!1)}locationPoint3D(t){return this._coordinatePoint(this.locationCoordinate(t),!0)}pointLocation(t){return this.coordinateLocation(this.pointCoordinate(t))}pointLocation3D(t){return this.coordinateLocation(this.pointCoordinate3D(t))}locationCoordinate(e,n){const r=n?t.mercatorZfromAltitude(n,e.lat):void 0,i=this.projection.project(e.lng,e.lat);return new t.MercatorCoordinate(i.x,i.y,r)}coordinateLocation(t){return this.projection.unproject(t.x,t.y)}pointRayIntersection(e,n){const r=null!=n?n:this._centerAltitude,i=[e.x,e.y,0,1],o=[e.x,e.y,1,1];t.transformMat4(i,i,this.pixelMatrixInverse),t.transformMat4(o,o,this.pixelMatrixInverse);const a=o[3];t.scale$2(i,i,1/i[3]),t.scale$2(o,o,1/a);const s=i[2],l=o[2];return{p0:i,p1:o,t:s===l?0:(r-s)/(l-s)}}screenPointToMercatorRay(e){const n=[e.x,e.y,0,1],r=[e.x,e.y,1,1];return t.transformMat4(n,n,this.pixelMatrixInverse),t.transformMat4(r,r,this.pixelMatrixInverse),t.scale$2(n,n,1/n[3]),t.scale$2(r,r,1/r[3]),n[2]=t.mercatorZfromAltitude(n[2],this._center.lat)*this.worldSize,r[2]=t.mercatorZfromAltitude(r[2],this._center.lat)*this.worldSize,t.scale$2(n,n,1/this.worldSize),t.scale$2(r,r,1/this.worldSize),new p([n[0],n[1],n[2]],t.normalize([],t.sub([],r,n)))}rayIntersectionCoordinate(e){const{p0:n,p1:r,t:i}=e,o=t.mercatorZfromAltitude(n[2],this._center.lat),a=t.mercatorZfromAltitude(r[2],this._center.lat);return new t.MercatorCoordinate(t.number(n[0],r[0],i)/this.worldSize,t.number(n[1],r[1],i)/this.worldSize,t.number(o,a,i))}pointCoordinate(e,n=this._centerAltitude){const r=this.horizonLineFromTop(!1),i=new t.pointGeometry(e.x,Math.max(r,e.y));return this.rayIntersectionCoordinate(this.pointRayIntersection(i,n))}pointCoordinate3D(e){if(!this.elevation)return this.pointCoordinate(e);const n=this.elevation;let r=this.elevation.pointCoordinate(e);if(r)return new t.MercatorCoordinate(r[0],r[1],r[2]);let i=0,o=this.horizonLineFromTop();if(e.y>o)return this.pointCoordinate(e);const a=.02*o,s=e.clone();for(let e=0;e<10&&o-i>a;e++){s.y=t.number(i,o,.66);const e=n.pointCoordinate(s);e?(o=s.y,r=e):i=s.y}return r?new t.MercatorCoordinate(r[0],r[1],r[2]):this.pointCoordinate(e)}isPointAboveHorizon(t){if(this.elevation)return!this.elevation.pointCoordinate(t);{const e=this.horizonLineFromTop();return t.y<e}}_coordinatePoint(e,n){const r=n&&this.elevation?this.elevation.getAtPointOrZero(e,this._centerAltitude):this._centerAltitude,i=[e.x*this.worldSize,e.y*this.worldSize,r+e.toAltitude(),1];return t.transformMat4(i,i,this.pixelMatrix),i[3]>0?new t.pointGeometry(i[0]/i[3],i[1]/i[3]):new t.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getBounds(e,n){const r=new t.pointGeometry(this._edgeInsets.left,this._edgeInsets.top),i=new t.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top),o=new t.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom),a=new t.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom);let s=this.pointCoordinate(r,e),l=this.pointCoordinate(i,e);const c=this.pointCoordinate(o,n),u=this.pointCoordinate(a,n),h=(t,e)=>(e.y-t.y)/(e.x-t.x);return s.y>1&&l.y>=0?s=new t.MercatorCoordinate((1-u.y)/h(u,s)+u.x,1):s.y<0&&l.y<=1&&(s=new t.MercatorCoordinate(-u.y/h(u,s)+u.x,0)),l.y>1&&s.y>=0?l=new t.MercatorCoordinate((1-c.y)/h(c,l)+c.x,1):l.y<0&&s.y<=1&&(l=new t.MercatorCoordinate(-c.y/h(c,l)+c.x,0)),(new t.LngLatBounds).extend(this.coordinateLocation(s)).extend(this.coordinateLocation(l)).extend(this.coordinateLocation(u)).extend(this.coordinateLocation(c))}_getBounds3D(){const t=this.elevation,e=t.visibleDemTiles.reduce((t,e)=>{if(e.dem){const n=e.dem.tree;t.min=Math.min(t.min,n.minimums[0]),t.max=Math.max(t.max,n.maximums[0])}return t},{min:Number.MAX_VALUE,max:0});return this._getBounds(e.min*t.exaggeration(),e.max*t.exaggeration())}getBounds(){return this._terrainEnabled()?this._getBounds3D():this._getBounds(0,0)}horizonLineFromTop(t=!0){const e=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,n=this.height/2-e*(1-this._horizonShift);return t?Math.max(0,n):n}getMaxBounds(){return this.maxBounds}setMaxBounds(e){this.maxBounds=e,this.minLat=-t.MAX_MERCATOR_LATITUDE,this.maxLat=t.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,e&&(this.minLat=e.getSouth(),this.maxLat=e.getNorth(),this.minLng=e.getWest(),this.maxLng=e.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=t.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=t.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=t.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=t.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(e,n){let r,i,o;const a=e.canonical,s=t.identity(new Float64Array(16));if("mercator"===this.projection.name)r=n/this.zoomScale(a.z),i=(a.x+Math.pow(2,a.z)*e.wrap)*r,o=a.y*r;else{const n=t.tileTransform(a,this.projection);r=1,i=n.x+e.wrap*n.scale,o=n.y,t.scale$1(s,s,[r/n.scale,r/n.scale,this.pixelsPerMeter/this.worldSize])}return t.translate(s,s,[i,o,0]),t.scale$1(s,s,[r/t.EXTENT,r/t.EXTENT,1]),s}calculateDistanceTileData(e){const n=e.key,r=this._distanceTileDataCache;if(r[n])return r[n];const i=e.canonical,o=1/this.height,a=this.cameraWorldSize/this.zoomScale(i.z),s=(i.x+Math.pow(2,i.z)*e.wrap)*a,l=i.y*a,c=this.point,u=this.angle,h=Math.sin(-u),d=-Math.cos(-u);return r[n]={bearing:[h,d],center:[(c.x-s)*o,(c.y-l)*o],scale:a/t.EXTENT*o},r[n]}calculateFogTileMatrix(e){const n=e.key,r=this._fogTileMatrixCache;if(r[n])return r[n];const i=this.calculatePosMatrix(e,this.cameraWorldSize);return t.multiply(i,this.worldToFogMatrix,i),r[n]=new Float32Array(i),r[n]}calculateProjMatrix(e,n=!1){const r=e.key,i=n?this._alignedProjMatrixCache:this._projMatrixCache;if(i[r])return i[r];const o=this.calculatePosMatrix(e,this.worldSize);return t.multiply(o,"mercator"===this.projection.name?n?this.alignedProjMatrix:this.projMatrix:this.mercatorMatrix,o),i[r]=new Float32Array(o),i[r]}calculatePixelsToTileUnitsMatrix(e){const n=e.tileID.key,r=this._pixelsToTileUnitsCache;if(r[n])return r[n];const i=function(e,n){const{scale:r}=e.tileTransform,i=r*t.EXTENT/(e.tileSize*Math.pow(2,n.zoom-e.tileID.overscaledZ+e.tileID.canonical.z));return o=new Float32Array(4),l=(a=n.inverseAdjustmentMatrix)[1],c=a[2],u=a[3],d=(s=[i,i])[1],o[0]=a[0]*(h=s[0]),o[1]=l*h,o[2]=c*d,o[3]=u*d,o;var o,a,s,l,c,u,h,d}(e,this);return r[n]=i,r[n]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation)return;const e=this._elevation;this._updateCameraState();const n=this._camera.position,r=this._camera.forward();if(n[2]<=0||r[2]>=0)return;const i=t.mercatorZfromAltitude(1,this._center.lat);n[2]/=i,r[2]/=i,t.normalize(r,r);const o=e.raycast(n,r,e.exaggeration());if(o){const e=t.scaleAndAdd([],n,r,o),i=new t.MercatorCoordinate(e[0],e[1],t.mercatorZfromAltitude(e[2],t.latFromMercatorY(e[1]))),a=this._camera.position,s=i.z+t.length([i.x-a[0],i.y-a[1],i.z-a[2]]);this._cameraZoom=this._zoomFromMercatorZ(s),this._centerAltitude=i.toAltitude(),this._center=this.coordinateLocation(i),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCameraAltitude(){if(!this._elevation)return;const e=this._elevation;this._updateCameraState();const n=e.getAtPointOrZero(this._camera.mercatorPosition),r=this._minimumHeightOverTerrain()*Math.cos(t.degToRad(this._maxPitch)),i=t.mercatorZfromAltitude(n,this._center.lat),o=this._camera.position[2]-i;if(o<r){const e=this.locationCoordinate(this._center,this._centerAltitude),n=this._camera.mercatorPosition,i=[e.x-n.x,e.y-n.y,e.z-n.z],a=t.length(i);i[2]-=r-o;const s=t.length(i);if(0===s)return;t.scale(i,i,a/s),this._camera.position=[e.x-i[0],e.y-i[1],e.z-i[2]],this._camera.orientation=xr(i,this._camera.up()),this._updateStateFromCamera()}}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;if(this._constraining=!0,"mercator"!==this.projection.name){const e=this.center;return e.lat=t.clamp(e.lat,this.minLat,this.maxLat),!this.maxBounds&&this.renderWorldCopies||(e.lng=t.clamp(e.lng,this.minLng,this.maxLng)),this.center=e,void(this._constraining=!1)}const e=this._unmodified,{x:n,y:r}=this.point;let i=0,o=n,a=r;const s=this.width/2,l=this.height/2,c=this.worldMinY*this.scale,u=this.worldMaxY*this.scale;if(r-l<c&&(a=c+l),r+l>u&&(a=u-l),u-c<this.height&&(i=Math.max(i,this.height/(u-c)),a=(u+c)/2),this.maxBounds||!this.renderWorldCopies){const t=this.worldMinX*this.scale,e=this.worldMaxX*this.scale,r=this.worldSize/2-(t+e)/2;o=(n+r+this.worldSize)%this.worldSize-r,o-s<t&&(o=t+s),o+s>e&&(o=e-s),e-t<this.width&&(i=Math.max(i,this.width/(e-t)),o=(e+t)/2)}o===n&&a===r||(this.center=this.unproject(new t.pointGeometry(o,a))),i&&(this.zoom+=this.scaleZoom(i)),this._constrainCameraAltitude(),this._unmodified=e,this._constraining=!1}_minZoomForBounds(){let t=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(t=Math.max(t,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),t}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const e=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;const n=this.pixelsPerMeter;this._updateCameraState();const r=Math.PI/2+this._pitch,i=this.fovAboveCenter,o=this.elevation?this.elevation.getMinElevationBelowMSL()*n:0,a=(this._camera.position[2]*this.worldSize-o)/Math.cos(this._pitch),s=Math.sin(i)*a/Math.sin(t.clamp(Math.PI-r-i,.01,Math.PI-.01)),l=this.point,c=l.x,u=l.y,h=Math.cos(Math.PI/2-this._pitch)*s+a,p=Math.min(1.01*h,a*(1/this._horizonShift)),f=this.height/50,m=this._camera.getWorldToCamera(this.worldSize,n),g=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,f,p);g[8]=2*-e.x/this.width,g[9]=2*e.y/this.height;let y=t.mul$1([],g,m);if("mercator"!==this.projection.name){const e=this.locationCoordinate(this.center),n=t.identity([]);t.translate(n,n,[e.x*this.worldSize,e.y*this.worldSize,0]),t.multiply(n,n,Cr(this)),t.translate(n,n,[-e.x*this.worldSize,-e.y*this.worldSize,0]),t.multiply(y,y,n),this.inverseAdjustmentMatrix=function(t){const e=Cr(t,!0);return d([],[e[0],e[1],e[4],e[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=t.scale$1([],y,[this.worldSize,this.worldSize,this.worldSize/n]),this.projMatrix=y,this.invProjMatrix=t.invert(new Float64Array(16),this.projMatrix);const v=new Float32Array(16);t.identity(v),t.scale$1(v,v,[1,-1,1]),t.rotateX(v,v,this._pitch),t.rotateZ(v,v,this.angle);const _=t.perspective(new Float32Array(16),this._fov,this.width/this.height,f,p),b=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;_[8]=2*-e.x/this.width,_[9]=2*(e.y+b)/this.height,this.skyboxMatrix=t.multiply(v,_,v);const x=this.width%2/2,w=this.height%2/2,E=Math.cos(this.angle),C=Math.sin(this.angle),S=c-Math.round(c)+E*x+C*w,T=u-Math.round(u)+E*w+C*x,O=new Float64Array(y);if(t.translate(O,O,[S>.5?S-1:S,T>.5?T-1:T,0]),this.alignedProjMatrix=O,y=t.create$1(),t.scale$1(y,y,[this.width/2,-this.height/2,1]),t.translate(y,y,[1,-1,0]),this.labelPlaneMatrix=y,y=t.create$1(),t.scale$1(y,y,[1,-1,1]),t.translate(y,y,[-1,-1,0]),t.scale$1(y,y,[2/this.width,2/this.height,1]),this.glCoordMatrix=y,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},y=t.invert(new Float64Array(16),this.pixelMatrix),!y)throw new Error("failed to invert matrix");this.pixelMatrixInverse=y,this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const e=this.cameraWorldSize,n=this.cameraPixelsPerMeter,r=this._camera.position,i=1/this.height,o=[e,e,n];t.scale(o,o,i),t.scale(r,r,-1),t.multiply$1(r,r,o);const a=t.create$1();t.translate(a,a,r),t.scale$1(a,a,o),this.mercatorFogMatrix=a,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(e,n,i)}_updateCameraState(){if(!this.height)return;this._camera.setPitchBearing(this._pitch,this.angle);const e=this._camera.forward(),n=this.cameraToCenterDistance,r=this.point,i=this._mercatorZfromZoom(this._cameraZoom?this._cameraZoom:this._zoom)-t.mercatorZfromAltitude(this._centerAltitude,this.center.lat),o=this.cameraToCenterDistance/i;this._camera.position=[r.x/this.worldSize-e[0]*n/o,r.y/this.worldSize-e[1]*n/o,t.mercatorZfromAltitude(this._centerAltitude,this._center.lat)+-e[2]*n/o]}_translateCameraConstrained(e){const n=this._maxCameraBoundsDistance()*Math.cos(this._pitch),r=e[2];let i=1;r>0&&(i=Math.min((n-this._camera.position[2])/r,1)),this._camera.position=t.scaleAndAdd([],this._camera.position,e,i),this._updateStateFromCamera()}_updateStateFromCamera(){const e=this._camera.position,n=this._camera.forward(),{pitch:r,bearing:i}=this._camera.getPitchBearing(),o=t.mercatorZfromAltitude(this._centerAltitude,this.center.lat),a=this._mercatorZfromZoom(this._maxZoom)*Math.cos(t.degToRad(this._maxPitch)),s=Math.max((e[2]-o)/Math.cos(r),a),l=this._zoomFromMercatorZ(s);t.scaleAndAdd(e,e,n,s),this._pitch=t.clamp(r,t.degToRad(this.minPitch),t.degToRad(this.maxPitch)),this.angle=t.wrap(i,-Math.PI,Math.PI),this._setZoom(t.clamp(l,this._minZoom,this._maxZoom)),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._center=this.coordinateLocation(new t.MercatorCoordinate(e[0],e[1],e[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(t){return Math.pow(2,t)*this.tileSize}_mercatorZfromZoom(t){return this.cameraToCenterDistance/this._worldSizeFromZoom(t)}_minimumHeightOverTerrain(){const t=Math.min((null!=this._cameraZoom?this._cameraZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(t)}_zoomFromMercatorZ(t){return this.scaleZoom(this.cameraToCenterDistance/(t*this.tileSize))}_terrainEnabled(){return!(!this._elevation||"mercator"!==this.projection.name&&(t.warnOnce("Terrain is not yet supported with alternate projections. Use mercator to enable terrain."),1))}anyCornerOffEdge(e,n){const r=Math.min(e.x,n.x),i=Math.max(e.x,n.x),o=Math.min(e.y,n.y),a=Math.max(e.y,n.y);if(o<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const s=[new t.pointGeometry(r,o),new t.pointGeometry(i,a),new t.pointGeometry(r,a),new t.pointGeometry(i,o)],l=this.renderWorldCopies?-3:0,c=this.renderWorldCopies?4:1;for(const t of s){const e=this.pointRayIntersection(t);if(e.t<0)return!0;const n=this.rayIntersectionCoordinate(e);if(n.x<l||n.y<0||n.x>c||n.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+t.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new t.pointGeometry(0,0),new t.pointGeometry(this.width,this.height))}zoomDeltaToMovement(e,n){const r=t.length(t.sub([],this._camera.position,e)),i=this._zoomFromMercatorZ(r)+n;return r-this._mercatorZfromZoom(i)}getCameraPoint(){const e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.pointGeometry(0,e))}}function kr(t,e){let n=!1,r=null;const i=()=>{r=null,n&&(t(),r=setTimeout(i,e),n=!1)};return()=>(n=!0,r||i(),r)}class Pr{constructor(e){this._hashName=e&&encodeURIComponent(e),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=kr(this._updateHashUnthrottled.bind(this),300)}addTo(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(e){const n=this._map.getCenter(),r=Math.round(100*this._map.getZoom())/100,i=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,i),a=Math.round(n.lng*o)/o,s=Math.round(n.lat*o)/o,l=this._map.getBearing(),c=this._map.getPitch();let u="";if(u+=e?`/${a}/${s}/${r}`:`${r}/${s}/${a}`,(l||c)&&(u+="/"+Math.round(10*l)/10),c&&(u+="/"+Math.round(c)),this._hashName){const e=this._hashName;let n=!1;const r=t.window.location.hash.slice(1).split("&").map(t=>{const r=t.split("=")[0];return r===e?(n=!0,`${r}=${u}`):t}).filter(t=>t);return n||r.push(`${e}=${u}`),"#"+r.join("&")}return"#"+u}_getCurrentHash(){const e=t.window.location.hash.replace("#","");if(this._hashName){let t;return e.split("&").map(t=>t.split("=")).forEach(e=>{e[0]===this._hashName&&(t=e)}),(t&&t[1]||"").split("/")}return e.split("/")}_onHashChange(){const t=this._getCurrentHash();if(t.length>=3&&!t.some(t=>isNaN(t))){const e=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0}return!1}_updateHashUnthrottled(){const e=t.window.location.href.replace(/(#.+)?$/,this.getHashString());t.window.history.replaceState(t.window.history.state,null,e)}}const Dr={linearity:.3,easing:t.bezier(0,0,.3,1)},Rr=t.extend({deceleration:2500,maxSpeed:1400},Dr),Lr=t.extend({deceleration:20,maxSpeed:1400},Dr),Nr=t.extend({deceleration:1e3,maxSpeed:360},Dr),jr=t.extend({deceleration:1e3,maxSpeed:90},Dr);class Fr{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.exported.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,n=t.exported.now();for(;e.length>0&&n-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const n={zoom:0,bearing:0,pitch:0,pan:new t.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:t}of this._inertiaBuffer)n.zoom+=t.zoomDelta||0,n.bearing+=t.bearingDelta||0,n.pitch+=t.pitchDelta||0,t.panDelta&&n.pan._add(t.panDelta),t.around&&(n.around=t.around),t.pinchAround&&(n.pinchAround=t.pinchAround);const r=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,i={};if(n.pan.mag()){const o=Br(n.pan.mag(),r,t.extend({},Rr,e||{}));i.offset=n.pan.mult(o.amount/n.pan.mag()),i.center=this._map.transform.center,zr(i,o)}if(n.zoom){const t=Br(n.zoom,r,Lr);i.zoom=this._map.transform.zoom+t.amount,zr(i,t)}if(n.bearing){const e=Br(n.bearing,r,Nr);i.bearing=this._map.transform.bearing+t.clamp(e.amount,-179,179),zr(i,e)}if(n.pitch){const t=Br(n.pitch,r,jr);i.pitch=this._map.transform.pitch+t.amount,zr(i,t)}if(i.zoom||i.bearing){const t=void 0===n.pinchAround?n.around:n.pinchAround;i.around=t?this._map.unproject(t):this._map.getCenter()}return this.clear(),t.extend(i,{noMoveStart:!0})}}function zr(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function Br(e,n,r){const{maxSpeed:i,linearity:o,deceleration:a}=r,s=t.clamp(e*o/(n/1e3),-i,i),l=Math.abs(s)/(a*o);return{easing:r.easing,duration:1e3*l,amount:s*(l/2)}}class Ur extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,r,i={}){const a=o.mousePos(n.getCanvasContainer(),r),s=n.unproject(a);super(e,t.extend({point:a,lngLat:s,originalEvent:r},i)),this._defaultPrevented=!1,this.target=n}}class Gr extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,r){const i="touchend"===e?r.changedTouches:r.touches,a=o.touchPos(n.getCanvasContainer(),i),s=a.map(t=>n.unproject(t)),l=a.reduce((t,e,n,r)=>t.add(e.div(r.length)),new t.pointGeometry(0,0));super(e,{points:a,point:l,lngLats:s,lngLat:n.unproject(l),originalEvent:r}),this._defaultPrevented=!1}}class Vr extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,e,n){super(t,{originalEvent:n}),this._defaultPrevented=!1}}class qr{constructor(t,e){this._map=t,this._clickTolerance=e.clickTolerance}reset(){delete this._mousedownPos}wheel(t){return this._firePreventable(new Vr(t.type,this._map,t))}mousedown(t,e){return this._mousedownPos=e,this._firePreventable(new Ur(t.type,this._map,t))}mouseup(t){this._map.fire(new Ur(t.type,this._map,t))}preclick(e){const n=t.extend({},e);n.type="preclick",this._map.fire(new Ur(n.type,this._map,n))}click(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||(this.preclick(t),this._map.fire(new Ur(t.type,this._map,t)))}dblclick(t){return this._firePreventable(new Ur(t.type,this._map,t))}mouseover(t){this._map.fire(new Ur(t.type,this._map,t))}mouseout(t){this._map.fire(new Ur(t.type,this._map,t))}touchstart(t){return this._firePreventable(new Gr(t.type,this._map,t))}touchmove(t){this._map.fire(new Gr(t.type,this._map,t))}touchend(t){this._map.fire(new Gr(t.type,this._map,t))}touchcancel(t){this._map.fire(new Gr(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Hr{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,delete this._contextMenuEvent}mousemove(t){this._map.fire(new Ur(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ur("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._map.fire(new Ur(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Wr{constructor(t,e){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(o.disableDrag(),this._startPos=this._lastPos=e,this._active=!0)}mousemoveWindow(t,e){if(!this._active)return;const n=e;if(this._lastPos.equals(n)||!this._box&&n.dist(this._startPos)<this._clickTolerance)return;const r=this._startPos;this._lastPos=n,this._box||(this._box=o.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));const i=Math.min(r.x,n.x),a=Math.max(r.x,n.x),s=Math.min(r.y,n.y),l=Math.max(r.y,n.y);this._map._requestDomTask(()=>{this._box&&(o.setTransform(this._box,`translate(${i}px,${s}px)`),this._box.style.width=a-i+"px",this._box.style.height=l-s+"px")})}mouseupWindow(e,n){if(!this._active)return;if(0!==e.button)return;const r=this._startPos,i=n;if(this.reset(),o.suppressClick(),r.x!==i.x||r.y!==i.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:e})),{cameraAnimation:t=>t.fitScreenCoordinates(r,i,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",e)}keydown(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(o.remove(this._box),this._box=null),o.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,n){return this._map.fire(new t.Event(e,{originalEvent:n}))}}function Zr(t,e){const n={};for(let r=0;r<t.length;r++)n[t[r].identifier]=e[r];return n}class $r{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,n,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),r.length===this.numTouches&&(this.centroid=function(e){const n=new t.pointGeometry(0,0);for(const t of e)n._add(t);return n.div(e.length)}(n),this.touches=Zr(r,n)))}touchmove(t,e,n){if(this.aborted||!this.centroid)return;const r=Zr(n,e);for(const t in this.touches){const e=this.touches[t],n=r[t];(!n||n.dist(e)>30)&&(this.aborted=!0)}}touchend(t,e,n){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){const t=!this.aborted&&this.centroid;if(this.reset(),t)return t}}}class Kr{constructor(t){this.singleTap=new $r(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(t,e,n){this.singleTap.touchstart(t,e,n)}touchmove(t,e,n){this.singleTap.touchmove(t,e,n)}touchend(t,e,n){const r=this.singleTap.touchend(t,e,n);if(r){const e=t.timeStamp-this.lastTime<500,n=!this.lastTap||this.lastTap.dist(r)<30;if(e&&n||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}}}class Yr{constructor(){this._zoomIn=new Kr({numTouches:1,numTaps:2}),this._zoomOut=new Kr({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,e,n){this._zoomIn.touchstart(t,e,n),this._zoomOut.touchstart(t,e,n)}touchmove(t,e,n){this._zoomIn.touchmove(t,e,n),this._zoomOut.touchmove(t,e,n)}touchend(t,e,n){const r=this._zoomIn.touchend(t,e,n),i=this._zoomOut.touchend(t,e,n);return r?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(r)},{originalEvent:t})}):i?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(i)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Xr={0:1,2:2};class Jr{constructor(t){this.reset(),this._clickTolerance=t.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(t,e){return!1}_move(t,e){return{}}mousedown(t,e){if(this._lastPoint)return;const n=o.mouseButton(t);this._correctButton(t,n)&&(this._lastPoint=e,this._eventButton=n)}mousemoveWindow(t,e){const n=this._lastPoint;if(n)if(t.preventDefault(),function(t,e){const n=Xr[e];return void 0===t.buttons||(t.buttons&n)!==n}(t,this._eventButton))this.reset();else if(this._moved||!(e.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=e,this._move(n,e)}mouseupWindow(t){this._lastPoint&&o.mouseButton(t)===this._eventButton&&(this._moved&&o.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Qr extends Jr{mousedown(t,e){super.mousedown(t,e),this._lastPoint&&(this._active=!0)}_correctButton(t,e){return 0===e&&!t.ctrlKey}_move(t,e){return{around:e,panDelta:e.sub(t)}}}class ti extends Jr{_correctButton(t,e){return 0===e&&t.ctrlKey||2===e}_move(t,e){const n=.8*(e.x-t.x);if(n)return this._active=!0,{bearingDelta:n}}contextmenu(t){t.preventDefault()}}class ei extends Jr{_correctButton(t,e){return 0===e&&t.ctrlKey||2===e}_move(t,e){const n=-.5*(e.y-t.y);if(n)return this._active=!0,{pitchDelta:n}}contextmenu(t){t.preventDefault()}}class ni{constructor(e,n){this._map=e,this._el=e.getCanvasContainer(),this._minTouches=1,this._clickTolerance=n.clickTolerance||1,this.reset(),t.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new t.pointGeometry(0,0)}touchstart(t,e,n){return this._calculateTransform(t,e,n)}touchmove(t,e,n){if(this._active&&!(n.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===n.length)return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return t.preventDefault(),this._calculateTransform(t,e,n)}}touchend(t,e,n){this._calculateTransform(t,e,n),this._active&&n.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,n,r){r.length>0&&(this._active=!0);const i=Zr(r,n),o=new t.pointGeometry(0,0),a=new t.pointGeometry(0,0);let s=0;for(const t in i){const e=i[t],n=this._touches[t];n&&(o._add(e),a._add(e.sub(n)),s++,i[t]=e)}if(this._touches=i,s<this._minTouches||!a.mag())return;const l=a.div(s);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:o.div(s),panDelta:l}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=o.create("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))+"px")}_showTouchPanBlockerAlert(){"hidden"===this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="visible"),this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show")},500)}}class ri{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(t){}_move(t,e,n){return{}}touchstart(t,e,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([e[0],e[1]]))}touchmove(t,e,n){if(!this._firstTwoTouches)return;t.preventDefault();const[r,i]=this._firstTwoTouches,o=ii(n,e,r),a=ii(n,e,i);if(!o||!a)return;const s=this._aroundCenter?null:o.add(a).div(2);return this._move([o,a],s,t)}touchend(t,e,n){if(!this._firstTwoTouches)return;const[r,i]=this._firstTwoTouches,a=ii(n,e,r),s=ii(n,e,i);a&&s||(this._active&&o.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function ii(t,e,n){for(let r=0;r<t.length;r++)if(t[r].identifier===n)return e[r]}function oi(t,e){return Math.log(t/e)/Math.LN2}class ai extends ri{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,e){const n=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(oi(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:oi(this._distance,n),pinchAround:e}}}function si(t,e){return 180*t.angleWith(e)/Math.PI}class li extends ri{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,e){const n=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:si(this._vector,n),pinchAround:e}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const e=25/(Math.PI*this._minDiameter)*360,n=si(t,this._startVector);return Math.abs(n)<e}}function ci(t){return Math.abs(t.y)>Math.abs(t.x)}class ui extends ri{constructor(t){super(),this._map=t}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}_start(t){this._lastPoints=t,ci(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,e,n){const r=t[0].sub(this._lastPoints[0]),i=t[1].sub(this._lastPoints[1]);if(!(this._map._cooperativeGestures&&n.touches.length<3)&&(this._valid=this.gestureBeginsVertically(r,i,n.timeStamp),this._valid))return this._lastPoints=t,this._active=!0,{pitchDelta:(r.y+i.y)/2*-.5}}gestureBeginsVertically(t,e,n){if(void 0!==this._valid)return this._valid;const r=t.mag()>=2,i=e.mag()>=2;if(!r&&!i)return;if(!r||!i)return void 0===this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;const o=t.y>0==e.y>0;return ci(t)&&ci(e)&&o}}const hi={panStep:100,bearingStep:15,pitchStep:10};class di{constructor(){const t=hi;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let e=0,n=0,r=0,i=0,o=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?n=-1:(t.preventDefault(),i=-1);break;case 39:t.shiftKey?n=1:(t.preventDefault(),i=1);break;case 38:t.shiftKey?r=1:(t.preventDefault(),o=-1);break;case 40:t.shiftKey?r=-1:(t.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(n=0,r=0),{cameraAnimation:a=>{const s=a.getZoom();a.easeTo({duration:300,easeId:"keyboardHandler",easing:pi,zoom:e?Math.round(s)+e*(t.shiftKey?2:1):s,bearing:a.getBearing()+n*this._bearingStep,pitch:a.getPitch()+r*this._pitchStep,offset:[-i*this._panStep,-o*this._panStep],center:a.getCenter()},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function pi(t){return t*(2-t)}const fi=4.000244140625;class mi{constructor(e,n){this._map=e,this._el=e.getCanvasContainer(),this._handler=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,t.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert","_isFullscreen"],this)}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(e){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(e.ctrlKey||e.metaKey||this.isZooming()||this._isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let n=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const r=t.exported.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%fi==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),e.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=e,this._delta-=n,this._active||this._start(e)),e.preventDefault()}_onTimeout(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const e=o.mousePos(this._el,t);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:e,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const e=this._map.transform,n=()=>e._terrainEnabled()?e.computeZoomRelativeTo(this._aroundCoord):e.zoom;if(0!==this._delta){const t="wheel"===this._type&&Math.abs(this._delta)>fi?this._wheelZoomRate:this._defaultZoomRate;let r=2/(1+Math.exp(-Math.abs(this._delta*t)));this._delta<0&&0!==r&&(r=1/r);const i=n(),o=Math.pow(2,i),a="number"==typeof this._targetZoom?e.zoomScale(this._targetZoom):o;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(a*r))),"wheel"===this._type&&(this._startZoom=n(),this._easing=this._smoothOutEasing(200)),this._delta=0}const r="number"==typeof this._targetZoom?this._targetZoom:n(),i=this._startZoom,o=this._easing;let a,s=!1;if("wheel"===this._type&&i&&o){const e=Math.min((t.exported.now()-this._lastWheelEventTime)/200,1),n=o(e);a=t.number(i,r,n),e<1?this._frameId||(this._frameId=!0):s=!0}else a=r,s=!0;return this._active=!0,s&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!s,zoomDelta:a-n(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let n=t.ease;if(this._prevEase){const e=this._prevEase,r=(t.exported.now()-e.start)/e.duration,i=e.easing(r+.01)-e.easing(r),o=.27/Math.sqrt(i*i+1e-4)*.01,a=Math.sqrt(.0729-o*o);n=t.bezier(o,a,.25,1)}return this._prevEase={start:t.exported.now(),duration:e,easing:n},n}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=o.create("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(t.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))+"px")}_isFullscreen(){return!!t.window.document.fullscreenElement}_showBlockerAlert(){"hidden"===this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="visible"),this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show")},200)}}class gi{constructor(t,e){this._clickZoom=t,this._tapZoom=e}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class yi{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(t,e){return t.preventDefault(),{cameraAnimation:n=>{n.easeTo({duration:300,zoom:n.getZoom()+(t.shiftKey?-1:1),around:n.unproject(e)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class vi{constructor(){this._tap=new Kr({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(t,e,n){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=e[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(t,e,n))}touchmove(t,e,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;const r=e[0],i=r.y-this._swipePoint.y;return this._swipePoint=r,t.preventDefault(),this._active=!0,{zoomDelta:i/128}}}else this._tap.touchmove(t,e,n)}touchend(t,e,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(t,e,n)&&(this._tapTime=t.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class _i{constructor(t,e,n){this._el=t,this._mousePan=e,this._touchPan=n}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class bi{constructor(t,e,n){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=e,this._mousePitch=n}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class xi{constructor(t,e,n,r){this._el=t,this._touchZoom=e,this._touchRotate=n,this._tapDragZoom=r,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const wi=t=>t.zoom||t.drag||t.pitch||t.rotate;class Ei extends t.Event{}class Ci{constructor(){this.constants=[1,1,.01],this.radius=0}setup(e,n){const r=t.sub([],n,e);this.radius=t.length(r[2]<0?t.div([],r,this.constants):[r[0],r[1],0])}projectRay(e){t.div(e,e,this.constants),t.normalize(e,e),t.mul$2(e,e,this.constants);const n=t.scale([],e,this.radius);if(n[2]>0){const e=t.scale([],[0,0,1],t.dot(n,[0,0,1])),r=t.scale([],t.normalize([],[n[0],n[1],0]),this.radius),i=t.add([],n,t.scale([],t.sub([],t.add([],r,e),n),2));n[0]=i[0],n[1]=i[1]}return n}}function Si(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}class Ti{constructor(e,n){this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Fr(e),this._bearingSnap=n.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Ci,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(n),t.bindAll(["handleEvent","handleWindowEvent"],this);const r=this._el;this._listeners=[[r,"touchstart",{passive:!0}],[r,"touchmove",{passive:!1}],[r,"touchend",void 0],[r,"touchcancel",void 0],[r,"mousedown",void 0],[r,"mousemove",void 0],[r,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[r,"mouseover",void 0],[r,"mouseout",void 0],[r,"dblclick",void 0],[r,"click",void 0],[r,"keydown",{capture:!1}],[r,"keyup",void 0],[r,"wheel",{passive:!1}],[r,"contextmenu",void 0],[t.window,"blur",void 0]];for(const[e,n,r]of this._listeners)o.addEventListener(e,n,e===t.window.document?this.handleWindowEvent:this.handleEvent,r)}destroy(){for(const[e,n,r]of this._listeners)o.removeEventListener(e,n,e===t.window.document?this.handleWindowEvent:this.handleEvent,r)}_addDefaultHandlers(t){const e=this._map,n=e.getCanvasContainer();this._add("mapEvent",new qr(e,t));const r=e.boxZoom=new Wr(e,t);this._add("boxZoom",r);const i=new Yr,o=new yi;e.doubleClickZoom=new gi(o,i),this._add("tapZoom",i),this._add("clickZoom",o);const a=new vi;this._add("tapDragZoom",a);const s=e.touchPitch=new ui(e);this._add("touchPitch",s);const l=new ti(t),c=new ei(t);e.dragRotate=new bi(t,l,c),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",c,["mouseRotate"]);const u=new Qr(t),h=new ni(e,t);e.dragPan=new _i(n,u,h),this._add("mousePan",u),this._add("touchPan",h,["touchZoom","touchRotate"]);const d=new li,p=new ai;e.touchZoomRotate=new xi(n,p,d,a),this._add("touchRotate",d,["touchPan","touchZoom"]),this._add("touchZoom",p,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Hr(e));const f=e.scrollZoom=new mi(e,this);this._add("scrollZoom",f,["mousePan"]);const m=e.keyboard=new di;this._add("keyboard",m);for(const n of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])t.interactive&&t[n]&&e[n].enable(t[n])}_add(t,e,n){this._handlers.push({handlerName:t,handler:e,allowed:n}),this._handlersById[t]=e}stop(t){if(!this._updatingCamera){for(const{handler:t}of this._handlers)t.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(wi(this._eventsInProgress))||this.isZooming()}_blockedByActive(t,e,n){for(const r in t)if(r!==n&&(!e||e.indexOf(r)<0))return!0;return!1}handleWindowEvent(t){this.handleEvent(t,t.type+"Window")}_getMapTouches(t){const e=[];for(const n of t)this._el.contains(n.target)&&e.push(n);return e}handleEvent(t,e){this._updatingCamera=!0;const n="renderFrame"===t.type,r=n?void 0:t,i={needsRenderFrame:!1},a={},s={},l=t.touches?this._getMapTouches(t.touches):void 0,c=l?o.touchPos(this._el,l):n?void 0:o.mousePos(this._el,t);for(const{handlerName:n,handler:o,allowed:u}of this._handlers){if(!o.isEnabled())continue;let h;this._blockedByActive(s,u,n)?o.reset():o[e||t.type]&&(h=o[e||t.type](t,c,l),this.mergeHandlerResult(i,a,h,n,r),h&&h.needsRenderFrame&&this._triggerRenderFrame()),(h||o.isActive())&&(s[n]=o)}const u={};for(const t in this._previousActiveHandlers)s[t]||(u[t]=r);this._previousActiveHandlers=s,(Object.keys(u).length||Si(i))&&(this._changes.push([i,a,u]),this._triggerRenderFrame()),(Object.keys(s).length||Si(i))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:h}=i;h&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],h(this._map))}mergeHandlerResult(e,n,r,i,o){if(!r)return;t.extend(e,r);const a={handlerName:i,originalEvent:r.originalEvent||o};void 0!==r.zoomDelta&&(n.zoom=a),void 0!==r.panDelta&&(n.drag=a),void 0!==r.pitchDelta&&(n.pitch=a),void 0!==r.bearingDelta&&(n.rotate=a)}_applyChanges(){const e={},n={},r={};for(const[i,o,a]of this._changes)i.panDelta&&(e.panDelta=(e.panDelta||new t.pointGeometry(0,0))._add(i.panDelta)),i.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+i.zoomDelta),i.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+i.bearingDelta),i.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+i.pitchDelta),void 0!==i.around&&(e.around=i.around),void 0!==i.aroundCoord&&(e.aroundCoord=i.aroundCoord),void 0!==i.pinchAround&&(e.pinchAround=i.pinchAround),i.noInertia&&(e.noInertia=i.noInertia),t.extend(n,o),t.extend(r,a);this._updateMapTransform(e,n,r),this._changes=[]}_updateMapTransform(e,n,r){const i=this._map,o=i.transform,a=t=>[t.x,t.y,t.z];if((t=>{const e=this._eventsInProgress.drag;return e&&!this._handlersById[e.handlerName].isActive()})()&&!Si(e)){const t=o.zoom;o.cameraElevationReference="sea",o.recenterOnTerrain(),o.cameraElevationReference="ground",t!==o.zoom&&this._map._update(!0)}if(!Si(e))return this._fireEvents(n,r,!0);let{panDelta:s,zoomDelta:l,bearingDelta:c,pitchDelta:u,around:h,aroundCoord:d,pinchAround:p}=e;void 0!==p&&(h=p),(t=>n.drag&&!this._eventsInProgress.drag)()&&h&&(this._dragOrigin=a(o.pointCoordinate3D(h)),this._trackingEllipsoid.setup(o._camera.position,this._dragOrigin)),o.cameraElevationReference="sea",i._stop(!0),h=h||i.transform.centerPoint,c&&(o.bearing+=c),u&&(o.pitch+=u),o._updateCameraState();const f=[0,0,0];if(s){const t=o.screenPointToMercatorRay(h),e=o.screenPointToMercatorRay(h.sub(s)),n=this._trackingEllipsoid.projectRay(t.dir),r=this._trackingEllipsoid.projectRay(e.dir);f[0]=r[0]-n[0],f[1]=r[1]-n[1]}const m=o.zoom,g=[0,0,0];if(l){const e=a(d||o.pointCoordinate3D(h)),n={dir:t.normalize([],t.sub([],e,o._camera.position))},r=o.screenPointToMercatorRay(o.centerPoint);if(n.dir[2]<0){const i=t.altitudeFromMercatorZ(e[2],e[1]),s=o.rayIntersectionCoordinate(o.pointRayIntersection(o.centerPoint,i)),c=o.zoomDeltaToMovement(a(s),l)*(r.dir[2]/n.dir[2]);t.scale(g,n.dir,c)}else if(o._terrainEnabled()){const r=o.zoomDeltaToMovement(e,l);t.scale(g,n.dir,r)}}const y=t.add(f,f,g);o._translateCameraConstrained(y),l&&Math.abs(o.zoom-m)>1e-4&&o.recenterOnTerrain(),o.cameraElevationReference="ground",this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(n,r,!0)}_fireEvents(e,n,r){const i=wi(this._eventsInProgress),o=wi(e),a={};for(const t in e){const{originalEvent:n}=e[t];this._eventsInProgress[t]||(a[t+"start"]=n),this._eventsInProgress[t]=e[t]}!i&&o&&this._fireEvent("movestart",o.originalEvent);for(const t in a)this._fireEvent(t,a[t]);o&&this._fireEvent("move",o.originalEvent);for(const t in e){const{originalEvent:n}=e[t];this._fireEvent(t,n)}const s={};let l;for(const t in this._eventsInProgress){const{handlerName:e,originalEvent:r}=this._eventsInProgress[t];this._handlersById[e].isActive()||(delete this._eventsInProgress[t],l=n[e]||r,s[t+"end"]=l)}for(const t in s)this._fireEvent(t,s[t]);const c=wi(this._eventsInProgress);if(r&&(i||o)&&!c){this._updatingCamera=!0;const e=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),n=t=>0!==t&&-this._bearingSnap<t&&t<this._bearingSnap;e?(n(e.bearing||this._map.getBearing())&&(e.bearing=0),this._map.easeTo(e,{originalEvent:l})):(this._map.fire(new t.Event("moveend",{originalEvent:l})),n(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(e,n){this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(t=>{delete this._frameId,this.handleEvent(new Ei("renderFrame",{timeStamp:t})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const Oi="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Ii extends t.Evented{constructor(e,n){super(),this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=n.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}getCenter(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(t,e){return this.jumpTo({center:t},e)}panBy(e,n,r){return e=t.pointGeometry.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},n),r)}panTo(e,n,r){return this.easeTo(t.extend({center:e},n),r)}getZoom(){return this.transform.zoom}setZoom(t,e){return this.jumpTo({zoom:t},e),this}zoomTo(e,n,r){return this.easeTo(t.extend({zoom:e},n),r)}zoomIn(t,e){return this.zoomTo(this.getZoom()+1,t,e),this}zoomOut(t,e){return this.zoomTo(this.getZoom()-1,t,e),this}getBearing(){return this.transform.bearing}setBearing(t,e){return this.jumpTo({bearing:t},e),this}getPadding(){return this.transform.padding}setPadding(t,e){return this.jumpTo({padding:t},e),this}rotateTo(e,n,r){return this.easeTo(t.extend({bearing:e},n),r)}resetNorth(e,n){return this.rotateTo(0,t.extend({duration:1e3},e),n),this}resetNorthPitch(e,n){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},e),n),this}snapToNorth(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this}getPitch(){return this.transform.pitch}setPitch(t,e){return this.jumpTo({pitch:t},e),this}cameraForBounds(e,n){e=t.LngLatBounds.convert(e);const r=n&&n.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),r,n)}_extendCameraOptions(e){const n={top:0,bottom:0,right:0,left:0};if("number"==typeof(e=t.extend({padding:n,offset:[0,0],maxZoom:this.transform.maxZoom},e)).padding){const t=e.padding;e.padding={top:t,bottom:t,right:t,left:t}}return e.padding=t.extend(n,e.padding),e}_cameraForBoxAndBearing(e,n,r,i){const o=this._extendCameraOptions(i),a=this.transform,s=a.padding,l=a.project(t.LngLat.convert(e)),c=a.project(t.LngLat.convert(n)),u=l.rotate(-t.degToRad(r)),h=c.rotate(-t.degToRad(r)),d=new t.pointGeometry(Math.max(u.x,h.x),Math.max(u.y,h.y)),p=new t.pointGeometry(Math.min(u.x,h.x),Math.min(u.y,h.y)),f=d.sub(p),m=(a.width-(s.left+s.right+o.padding.left+o.padding.right))/f.x,g=(a.height-(s.top+s.bottom+o.padding.top+o.padding.bottom))/f.y;if(g<0||m<0)return void t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const y=Math.min(a.scaleZoom(a.scale*Math.min(m,g)),o.maxZoom),v="number"==typeof o.offset.x?new t.pointGeometry(o.offset.x,o.offset.y):t.pointGeometry.convert(o.offset),_=new t.pointGeometry((o.padding.left-o.padding.right)/2,(o.padding.top-o.padding.bottom)/2).rotate(r*Math.PI/180),b=v.add(_).mult(a.scale/a.zoomScale(y));return{center:a.unproject(l.add(c).div(2).sub(b)),zoom:y,bearing:r}}_cameraForBox(e,n,r,i,o){const a=this._extendCameraOptions(o);r=r||0,i=i||0,e=t.LngLat.convert(e),n=t.LngLat.convert(n);const s=this.transform.clone();s.padding=a.padding;const l=this.getFreeCameraOptions(),c=new t.LngLat(.5*(e.lng+n.lng),.5*(e.lat+n.lat)),u=.5*(r+i);if(s._camera.position[2]<t.mercatorZfromAltitude(u,c.lat))return void t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");l.lookAtPoint(c),s.setFreeCameraOptions(l);const h=t.MercatorCoordinate.fromLngLat(e),d=t.MercatorCoordinate.fromLngLat(n),p=s.pointRayIntersection(s.centerPoint,u),g=[(y=s.rayIntersectionCoordinate(p)).x,y.y,y.z];var y;const v=s.screenPointToMercatorRay(s.centerPoint);let _,b=0;do{const n=Math.floor(s.zoom),o=1<<n,a=Math.min(o*h.x,o*d.x),l=Math.min(o*h.y,o*d.y),c=Math.max(o*h.x,o*d.x),u=Math.max(o*h.y,o*d.y),p=new m([a,l,r],[c,u,i]),y=f.fromInvProjectionMatrix(s.invProjMatrix,s.worldSize,n);if(2!==p.intersects(y)){_&&(s._camera.position=t.scaleAndAdd([],s._camera.position,v.dir,-_),s._updateStateFromCamera());break}const b=t.sub([],s._camera.position,g);_=.5*t.length(b),s._camera.position=t.scaleAndAdd([],s._camera.position,v.dir,_);try{s._updateStateFromCamera()}catch(e){return void t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}}while(++b<10);return{center:s.center,zoom:s.zoom,bearing:s.bearing,pitch:s.pitch}}fitBounds(t,e,n){return this._fitInternal(this.cameraForBounds(t,e),e,n)}_raycastElevationBox(e,n){const r=this.transform.elevation;if(!r)return;const i=new t.pointGeometry(e.x,n.y),o=new t.pointGeometry(n.x,e.y),a=r.pointCoordinate(e);if(!a)return;const s=r.pointCoordinate(n);if(!s)return;const l=r.pointCoordinate(i);if(!l)return;const c=r.pointCoordinate(o);if(!c)return;const u=new t.MercatorCoordinate(a[0],a[1]).toLngLat(),h=new t.MercatorCoordinate(s[0],s[1]).toLngLat(),d=new t.MercatorCoordinate(l[0],l[1]).toLngLat(),p=new t.MercatorCoordinate(c[0],c[1]).toLngLat(),f=Math.min(u.lng,Math.min(h.lng,Math.min(d.lng,p.lng))),m=Math.min(u.lat,Math.min(h.lat,Math.min(d.lat,p.lat))),g=Math.max(u.lng,Math.max(h.lng,Math.max(d.lng,p.lng))),y=Math.max(u.lat,Math.max(h.lat,Math.max(d.lat,p.lat))),v=Math.min(a[3],Math.min(s[3],Math.min(l[3],c[3]))),_=Math.max(a[3],Math.max(s[3],Math.max(l[3],c[3])));return{minLngLat:new t.LngLat(f,m),maxLngLat:new t.LngLat(g,y),minAltitude:v,maxAltitude:_}}fitScreenCoordinates(e,n,r,i,o){let a,s,l,c;const u=t.pointGeometry.convert(e),h=t.pointGeometry.convert(n),d=this._raycastElevationBox(u,h);if(d)a=d.minLngLat,s=d.maxLngLat,l=d.minAltitude,c=d.maxAltitude;else{if(this.transform.anyCornerOffEdge(u,h))return this;a=this.transform.pointLocation(u),s=this.transform.pointLocation(h)}return this._fitInternal(0===this.transform.pitch?this._cameraForBoxAndBearing(this.transform.pointLocation(t.pointGeometry.convert(e)),this.transform.pointLocation(t.pointGeometry.convert(n)),r,i):this._cameraForBox(a,s,l,c,i),i,o)}_fitInternal(e,n,r){return e?(delete(n=t.extend(e,n)).padding,n.linear?this.easeTo(n,r):this.flyTo(n,r)):this}jumpTo(e,n){this.stop();const r=this.transform;let i=!1,o=!1,a=!1;return"zoom"in e&&r.zoom!==+e.zoom&&(i=!0,r.zoom=+e.zoom),void 0!==e.center&&(r.center=t.LngLat.convert(e.center)),"bearing"in e&&r.bearing!==+e.bearing&&(o=!0,r.bearing=+e.bearing),"pitch"in e&&r.pitch!==+e.pitch&&(a=!0,r.pitch=+e.pitch),null==e.padding||r.isPaddingEqual(e.padding)||(r.padding=e.padding),this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),i&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),o&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),a&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n))}getFreeCameraOptions(){return"mercator"!==this.transform.projection.name&&t.warnOnce(Oi),this.transform.getFreeCameraOptions()}setFreeCameraOptions(e,n){const r=this.transform;if("mercator"!==r.projection.name)return void t.warnOnce(Oi);this.stop();const i=r.zoom,o=r.pitch,a=r.bearing;r.setFreeCameraOptions(e);const s=i!==r.zoom,l=o!==r.pitch,c=a!==r.bearing;return this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),s&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),c&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),l&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n)),this}easeTo(e,n){this._stop(!1,e.easeId),(!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate||!e.essential&&t.exported.prefersReducedMotion)&&(e.duration=0);const r=this.transform,i=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),l="zoom"in e?+e.zoom:i,c="bearing"in e?this._normalizeBearing(e.bearing,o):o,u="pitch"in e?+e.pitch:a,h="padding"in e?e.padding:r.padding,d=t.pointGeometry.convert(e.offset);let p=r.centerPoint.add(d);const f=r.pointLocation(p),m=t.LngLat.convert(e.center||f);this._normalizeCenter(m);const g=r.project(f),y=r.project(m).sub(g),v=r.zoomScale(l-i);let _,b;e.around&&(_=t.LngLat.convert(e.around),b=r.locationPoint(_));const x={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||l!==i,this._rotating=this._rotating||o!==c,this._pitching=this._pitching||u!==a,this._padding=!r.isPaddingEqual(h),this._easeId=e.easeId,this._prepareEase(n,e.noMoveStart,x),this._ease(e=>{if(this._zooming&&(r.zoom=t.number(i,l,e)),this._rotating&&(r.bearing=t.number(o,c,e)),this._pitching&&(r.pitch=t.number(a,u,e)),this._padding&&(r.interpolatePadding(s,h,e),p=r.centerPoint.add(d)),_)r.setLocationAtPoint(_,b);else{const t=r.zoomScale(r.zoom-i),n=l>i?Math.min(2,v):Math.max(.5,v),o=Math.pow(n,1-e),a=r.unproject(g.add(y.mult(e*o)).mult(t));r.setLocationAtPoint(r.renderWorldCopies?a.wrap():a,p)}this._fireMoveEvents(n)},t=>{r.recenterOnTerrain(),this._afterEase(n,t)},e),this}_prepareEase(e,n,r={}){this._moving=!0,this.transform.cameraElevationReference="sea",n||r.moving||this.fire(new t.Event("movestart",e)),this._zooming&&!r.zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&!r.rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&!r.pitching&&this.fire(new t.Event("pitchstart",e))}_fireMoveEvents(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))}_afterEase(e,n){if(this._easeId&&n&&this._easeId===n)return;delete this._easeId,this.transform.cameraElevationReference="ground";const r=this._zooming,i=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new t.Event("zoomend",e)),i&&this.fire(new t.Event("rotateend",e)),o&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))}flyTo(e,n){if(!e.essential&&t.exported.prefersReducedMotion){const r=t.pick(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(r,n)}this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);const r=this.transform,i=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),l="zoom"in e?t.clamp(+e.zoom,r.minZoom,r.maxZoom):i,c="bearing"in e?this._normalizeBearing(e.bearing,o):o,u="pitch"in e?+e.pitch:a,h="padding"in e?e.padding:r.padding,d=r.zoomScale(l-i),p=t.pointGeometry.convert(e.offset);let f=r.centerPoint.add(p);const m=r.pointLocation(f),g=t.LngLat.convert(e.center||m);this._normalizeCenter(g);const y=r.project(m),v=r.project(g).sub(y);let _=e.curve;const b=Math.max(r.width,r.height),x=b/d,w=v.mag();if("minZoom"in e){const n=t.clamp(Math.min(e.minZoom,i,l),r.minZoom,r.maxZoom),o=b/r.zoomScale(n-i);_=Math.sqrt(o/w*2)}const E=_*_;function C(t){const e=(x*x-b*b+(t?-1:1)*E*E*w*w)/(2*(t?x:b)*E*w);return Math.log(Math.sqrt(e*e+1)-e)}function S(t){return(Math.exp(t)-Math.exp(-t))/2}function T(t){return(Math.exp(t)+Math.exp(-t))/2}const O=C(0);let I=function(t){return T(O)/T(O+_*t)},A=function(t){return b*((T(O)*(S(e=O+_*t)/T(e))-S(O))/E)/w;var e},M=(C(1)-O)/_;if(Math.abs(w)<1e-6||!isFinite(M)){if(Math.abs(b-x)<1e-6)return this.easeTo(e,n);const t=x<b?-1:1;M=Math.abs(Math.log(x/b))/_,A=function(){return 0},I=function(e){return Math.exp(t*_*e)}}return e.duration="duration"in e?+e.duration:1e3*M/("screenSpeed"in e?+e.screenSpeed/_:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=o!==c,this._pitching=u!==a,this._padding=!r.isPaddingEqual(h),this._prepareEase(n,!1),this._ease(e=>{const d=e*M,m=1/I(d);r.zoom=1===e?l:i+r.scaleZoom(m),this._rotating&&(r.bearing=t.number(o,c,e)),this._pitching&&(r.pitch=t.number(a,u,e)),this._padding&&(r.interpolatePadding(s,h,e),f=r.centerPoint.add(p));const _=1===e?g:r.unproject(y.add(v.mult(A(d))).mult(m));r.setLocationAtPoint(r.renderWorldCopies?_.wrap():_,f),r._updateCenterElevation(),this._fireMoveEvents(n)},()=>this._afterEase(n),e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,e){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const t=this._onEaseEnd;delete this._onEaseEnd,t.call(this,e)}if(!t){const t=this.handlers;t&&t.stop(!1)}return this}_ease(e,n,r){!1===r.animate||0===r.duration?(e(1),n()):(this._easeStart=t.exported.now(),this._easeOptions=r,this._onEaseFrame=e,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const e=Math.min((t.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(e,n){e=t.wrap(e,-180,180);const r=Math.abs(e-n);return Math.abs(e-360-n)<r&&(e-=360),Math.abs(e+360-n)<r&&(e+=360),e}_normalizeCenter(t){const e=this.transform;if(!e.renderWorldCopies||e.maxBounds)return;const n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}}class Ai{constructor(e={}){this.options=e,t.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(t){const e=this.options&&this.options.compact;return this._map=t,this._container=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=o.create("button","mapboxgl-ctrl-attrib-button",this._container),o.create("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden",!0),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=o.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){o.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(t,e){const n=this._map._getUIString("AttributionControl."+e);t.setAttribute("aria-label",n),t.firstElementChild&&t.firstElementChild.setAttribute("title",n)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));const n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(e){const r=n.reduce((t,e,r)=>(e.value&&(t+=`${e.key}=${e.value}${r<n.length-1?"&":""}`),t),"?");e.href=`${t.config.FEEDBACK_URL}/${r}${this._map._hash?this._map._hash.getHashString(!0):""}`,e.rel="noopener nofollow",this._setElementTitle(e,"MapFeedback")}}_updateData(t){!t||"metadata"!==t.sourceDataType&&"visibility"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map(t=>"string"!=typeof t?"":t)):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){const t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}const e=this._map.style._sourceCaches;for(const n in e){const r=e[n];if(r.used){const e=r.getSource();e.attribution&&t.indexOf(e.attribution)<0&&t.push(e.attribution)}}t.sort((t,e)=>t.length-e.length),t=t.filter((e,n)=>{for(let r=n+1;r<t.length;r++)if(t[r].indexOf(e)>=0)return!1;return!0});const n=t.join(" | ");n!==this._attribHTML&&(this._attribHTML=n,t.length?(this._innerContainer.innerHTML=n,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Mi{constructor(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)}onAdd(t){this._map=t,this._container=o.create("div","mapboxgl-ctrl");const e=o.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://www.mapbox.com/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){o.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const t=this._map.style._sourceCaches;if(0===Object.entries(t).length)return!0;for(const e in t){const n=t[e].getSource();if(n.hasOwnProperty("mapbox_logo")&&!n.mapbox_logo)return!1}return!0}_updateCompact(){const t=this._container.children;if(t.length){const e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}}}class ki{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e}remove(t){const e=this._currentlyRunning,n=e?this._queue.concat(e):this._queue;for(const e of n)if(e.id===t)return void(e.cancelled=!0)}run(t=0){const e=this._currentlyRunning=this._queue;this._queue=[];for(const n of e)if(!n.cancelled&&(n.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Pi(e,n,r){if(e=new t.LngLat(e.lng,e.lat),n){const i=new t.LngLat(e.lng-360,e.lat),o=new t.LngLat(e.lng+360,e.lat),a=360*Math.ceil(Math.abs(e.lng-r.center.lng)/360),s=r.locationPoint(e).distSqr(n),l=n.x<0||n.y<0||n.x>r.width||n.y>r.height;r.locationPoint(i).distSqr(n)<s&&(l||Math.abs(i.lng-r.center.lng)<a)?e=i:r.locationPoint(o).distSqr(n)<s&&(l||Math.abs(o.lng-r.center.lng)<a)&&(e=o)}for(;Math.abs(e.lng-r.center.lng)>180;){const t=r.locationPoint(e);if(t.x>=0&&t.y>=0&&t.x<=r.width&&t.y<=r.height)break;e.lng>r.center.lng?e.lng-=360:e.lng+=360}return e}const Di={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class Ri extends t.Evented{constructor(e,n){if(super(),(e instanceof t.window.HTMLElement||n)&&(e=t.extend({element:e},n)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&"auto"!==e.pitchAlignment?e.pitchAlignment:this._rotationAlignment,e&&e.element)this._element=e.element,this._offset=t.pointGeometry.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=o.create("div"),this._element.setAttribute("aria-label","Map marker");const n=o.createNS("http://www.w3.org/2000/svg","svg"),r=41,i=27;n.setAttributeNS(null,"display","block"),n.setAttributeNS(null,"height",r+"px"),n.setAttributeNS(null,"width",i+"px"),n.setAttributeNS(null,"viewBox",`0 0 ${i} ${r}`);const a=o.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"stroke","none"),a.setAttributeNS(null,"stroke-width","1"),a.setAttributeNS(null,"fill","none"),a.setAttributeNS(null,"fill-rule","evenodd");const s=o.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"fill-rule","nonzero");const l=o.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");const c=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const t of c){const e=o.createNS("http://www.w3.org/2000/svg","ellipse");e.setAttributeNS(null,"opacity","0.04"),e.setAttributeNS(null,"cx","10.5"),e.setAttributeNS(null,"cy","5.80029008"),e.setAttributeNS(null,"rx",t.rx),e.setAttributeNS(null,"ry",t.ry),l.appendChild(e)}const u=o.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"fill",this._color);const h=o.createNS("http://www.w3.org/2000/svg","path");h.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),u.appendChild(h);const d=o.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"opacity","0.25"),d.setAttributeNS(null,"fill","#000000");const p=o.createNS("http://www.w3.org/2000/svg","path");p.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),d.appendChild(p);const f=o.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"transform","translate(6.0, 7.0)"),f.setAttributeNS(null,"fill","#FFFFFF");const m=o.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","translate(8.0, 8.0)");const g=o.createNS("http://www.w3.org/2000/svg","circle");g.setAttributeNS(null,"fill","#000000"),g.setAttributeNS(null,"opacity","0.25"),g.setAttributeNS(null,"cx","5.5"),g.setAttributeNS(null,"cy","5.5"),g.setAttributeNS(null,"r","5.4999962");const y=o.createNS("http://www.w3.org/2000/svg","circle");y.setAttributeNS(null,"fill","#FFFFFF"),y.setAttributeNS(null,"cx","5.5"),y.setAttributeNS(null,"cy","5.5"),y.setAttributeNS(null,"r","5.4999962"),m.appendChild(g),m.appendChild(y),s.appendChild(l),s.appendChild(u),s.appendChild(d),s.appendChild(f),s.appendChild(m),n.appendChild(s),n.setAttributeNS(null,"height",r*this._scale+"px"),n.setAttributeNS(null,"width",i*this._scale+"px"),this._element.appendChild(n),this._offset=t.pointGeometry.convert(e&&e.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",t=>{t.preventDefault()}),this._element.addEventListener("mousedown",t=>{t.preventDefault()});const r=this._element.classList;for(const t in Di)r.remove("mapboxgl-marker-anchor-"+t);r.add("mapboxgl-marker-anchor-"+this._anchor),this._popup=null}addTo(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),t.on("remove",this._clearFadeTimer),t._addMarker(this),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._map.off("remove",this._clearFadeTimer),this._map._removeMarker(this),delete this._map),this._clearFadeTimer(),o.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const e=38.1,n=13.5,r=Math.sqrt(Math.pow(n,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-e],"bottom-left":[r,-1*(e-n+r)],"bottom-right":[-r,-1*(e-n+r)],left:[n,-1*(e-n)],right:[-n,-1*(e-n)]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(t){const e=t.code,n=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==n&&13!==n||this.togglePopup()}_onMapClick(t){const e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const t=this._popup;return t?(t.isOpen()?(t.remove(),this._element.setAttribute("aria-expanded","false")):(t.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_evaluateOpacity(){const t=this._pos?this._pos.sub(this._transformedOffset()):null;if(!this._withinScreenBounds(t))return void this._clearFadeTimer();const e=this._map.unproject(t);let n=!1;if(this._map.transform._terrainEnabled()&&this._map.getTerrain()){const t=this._map.getFreeCameraOptions();if(t.position){const r=t.position.toLngLat();n=r.distanceTo(e)<.9*r.distanceTo(this._lngLat)}}const r=(1-this._map._queryFogOpacity(e))*(n?.2:1);this._element.style.opacity=""+r,this._popup&&this._popup._setOpacity(""+r),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_withinScreenBounds(t){const e=this._map.transform;return!!t&&t.x>=0&&t.x<e.width&&t.y>=0&&t.y<e.height}_update(t){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=Pi(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._transformedOffset());let e="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?e=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(e=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let n="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?n="rotateX(0deg)":"map"===this._pitchAlignment&&(n=`rotateX(${this._map.getPitch()}deg)`),t&&"moveend"!==t.type||(this._pos=this._pos.round()),this._map._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&o.setTransform(this._element,`${Di[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${n} ${e}`),!this._map.getTerrain()&&!this._map.getFog()||this._fadeTimer||(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))})}_transformedOffset(){if(!this._defaultMarker)return this._offset;const t=this._map.transform,e=this._offset.mult(this._scale);return"map"===this._rotationAlignment&&e._rotate(t.angle),"map"===this._pitchAlignment&&(e.y*=Math.cos(t._pitch)),e}getOffset(){return this._offset}setOffset(e){return this._offset=t.pointGeometry.convert(e),this._update(),this}_onMove(e){if(!this._isDragging){const t=this._clickTolerance||this._map._clickTolerance;this._isDragging=e.point.dist(this._pointerdownPos)>=t}this._isDragging&&(this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"}_addDragHandler(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._transformedOffset()),this._pointerdownPos=t.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}class Li{constructor(t){this.jumpTo(t)}getValue(e){if(e<=this._startTime)return this._start;if(e>=this._endTime)return this._end;const n=t.easeCubicInOut((e-this._startTime)/(this._endTime-this._startTime));return this._start*(1-n)+this._end*n}isEasing(t){return t>=this._startTime&&t<=this._endTime}jumpTo(t){this._startTime=-1/0,this._endTime=-1/0,this._start=t,this._end=t}easeTo(t,e,n){this._start=this.getValue(e),this._end=t,this._startTime=e,this._endTime=e+n}}const Ni={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use ⌘ + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},{HTMLImageElement:ji,HTMLElement:Fi,ImageBitmap:zi}=t.window,Bi={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function Ui(t){t.parentNode&&t.parentNode.removeChild(t)}const Gi={showCompass:!0,showZoom:!0,visualizePitch:!1};class Vi{constructor(e,n,r=!1){this._clickTolerance=10,this.element=n,this.mouseRotate=new ti({clickTolerance:e.dragRotate._mouseRotate._clickTolerance}),this.map=e,r&&(this.mousePitch=new ei({clickTolerance:e.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),o.addEventListener(n,"mousedown",this.mousedown),o.addEventListener(n,"touchstart",this.touchstart,{passive:!1}),o.addEventListener(n,"touchmove",this.touchmove),o.addEventListener(n,"touchend",this.touchend),o.addEventListener(n,"touchcancel",this.reset)}down(t,e){this.mouseRotate.mousedown(t,e),this.mousePitch&&this.mousePitch.mousedown(t,e),o.disableDrag()}move(t,e){const n=this.map,r=this.mouseRotate.mousemoveWindow(t,e);if(r&&r.bearingDelta&&n.setBearing(n.getBearing()+r.bearingDelta),this.mousePitch){const r=this.mousePitch.mousemoveWindow(t,e);r&&r.pitchDelta&&n.setPitch(n.getPitch()+r.pitchDelta)}}off(){const t=this.element;o.removeEventListener(t,"mousedown",this.mousedown),o.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),o.removeEventListener(t,"touchmove",this.touchmove),o.removeEventListener(t,"touchend",this.touchend),o.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}offTemp(){o.enableDrag(),o.removeEventListener(t.window,"mousemove",this.mousemove),o.removeEventListener(t.window,"mouseup",this.mouseup)}mousedown(e){this.down(t.extend({},e,{ctrlKey:!0,preventDefault:()=>e.preventDefault()}),o.mousePos(this.element,e)),o.addEventListener(t.window,"mousemove",this.mousemove),o.addEventListener(t.window,"mouseup",this.mouseup)}mousemove(t){this.move(t,o.mousePos(this.element,t))}mouseup(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()}touchstart(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=o.touchPos(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>t.preventDefault()},this._startPos))}touchmove(t){1!==t.targetTouches.length?this.reset():(this._lastPos=o.touchPos(this.element,t.targetTouches)[0],this.move({preventDefault:()=>t.preventDefault()},this._lastPos))}touchend(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const qi={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1};let Hi,Wi=0,Zi=!1;const $i={maxWidth:100,unit:"metric"};function Ki(t,e,n){const r=n&&n.maxWidth||100,i=t._container.getBoundingClientRect().height/2,o=t.unproject([0,i]),a=t.unproject([r,i]),s=o.distanceTo(a);if(n&&"imperial"===n.unit){const n=3.2808*s;n>5280?Yi(e,r,n/5280,t._getUIString("ScaleControl.Miles"),t):Yi(e,r,n,t._getUIString("ScaleControl.Feet"),t)}else n&&"nautical"===n.unit?Yi(e,r,s/1852,t._getUIString("ScaleControl.NauticalMiles"),t):s>=1e3?Yi(e,r,s/1e3,t._getUIString("ScaleControl.Kilometers"),t):Yi(e,r,s,t._getUIString("ScaleControl.Meters"),t)}function Yi(t,e,n,r,i){const o=function(t){const e=Math.pow(10,(""+Math.floor(t)).length-1);let n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(t){const e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(n),e*n}(n),a=o/n;i._requestDomTask(()=>{t.style.width=e*a+"px",t.innerHTML=`${o}&nbsp;${r}`})}const Xi={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Ji=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Qi={version:t.version,supported:e,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:class extends Ii{constructor(e){if(null!=(e=t.extend({},Bi,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Mr(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies),e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._optimizeForTerrain=e.optimizeForTerrain,this._renderTaskQueue=new ki,this._domRenderTaskQueue=new ki,this._controls=[],this._markers=[],this._mapId=t.uniqueId(),this._locale=t.extend({},Ni,e.locale),this._clickTolerance=e.clickTolerance,this._cooperativeGestures=e.cooperativeGestures,this._averageElevationLastSampledAt=-1/0,this._averageElevation=new Li(0),this._requestManager=new t.RequestManager(e.transformRequest,e.accessToken,e.testMode),this._silenceAuthErrors=!!e.testMode,"string"==typeof e.container){if(this._container=t.window.document.getElementById(e.container),!this._container)throw new Error(`Container '${e.container}' not found.`)}else{if(!(e.container instanceof Fi))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1),t.window.addEventListener("orientationchange",this._onWindowResize,!1),t.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1)),this.handlers=new Ti(this,e),this._localFontFamily=e.localFontFamily,this._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&this.setStyle(e.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),e.projection&&this.setProjection(e.projection),this._hash=e.hash&&new Pr("string"==typeof e.hash&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),e.attributionControl&&this.addControl(new Ai({customAttribution:e.customAttribution})),this._logoControl=new Mi,this.addControl(this._logoControl,e.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",e=>{this._update("style"===e.dataType),this.fire(new t.Event(e.dataType+"data",e))}),this.on("dataloading",e=>{this.fire(new t.Event(e.dataType+"dataloading",e))})}_getMapId(){return this._mapId}addControl(e,n){if(void 0===n&&(n=e.getDefaultPosition?e.getDefaultPosition():"top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const r=e.onAdd(this);this._controls.push(e);const i=this._controlPositions[n];return-1!==n.indexOf("bottom")?i.insertBefore(r,i.firstChild):i.appendChild(r),this}removeControl(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(e);return n>-1&&this._controls.splice(n,1),e.onRemove(this),this}hasControl(t){return this._controls.indexOf(t)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(e){const[n,r]=this._containerDimensions();if(n===this.transform.width&&r===this.transform.height)return this;this._resizeCanvas(n,r),this.transform.resize(n,r),this.painter.resize(Math.ceil(n),Math.ceil(r));const i=!this._moving;return i&&this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e)),this.fire(new t.Event("resize",e)),i&&this.fire(new t.Event("moveend",e)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()}setMinZoom(e){if((e=null==e?-2:e)>=-2&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e?this.setZoom(e):this.fire(new t.Event("zoomstart")).fire(new t.Event("zoom")).fire(new t.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(e){if((e=null==e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e?this.setZoom(e):this.fire(new t.Event("zoomstart")).fire(new t.Event("zoom")).fire(new t.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(e){if((e=null==e?0:e)<0)throw new Error("minPitch must be greater than or equal to 0");if(e>=0&&e<=this.transform.maxPitch)return this.transform.minPitch=e,this._update(),this.getPitch()<e?this.setPitch(e):this.fire(new t.Event("pitchstart")).fire(new t.Event("pitch")).fire(new t.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(e){if((e=null==e?85:e)>85)throw new Error("maxPitch must be less than or equal to 85");if(e>=this.transform.minPitch)return this.transform.maxPitch=e,this._update(),this.getPitch()>e?this.setPitch(e):this.fire(new t.Event("pitchstart")).fire(new t.Event("pitch")).fire(new t.Event("pitchend")),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(t){return this.transform.renderWorldCopies=t,this._update()}getProjection(){return this.transform.getProjection()}setProjection(t){this._lazyInitEmptyStyle(),"string"==typeof t&&(t={name:t}),this._runtimeProjection=t,this.style.updateProjection()}project(e){return this.transform.locationPoint3D(t.LngLat.convert(e))}unproject(e){return this.transform.pointLocation3D(t.pointGeometry.convert(e))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()}_createDelegatedListener(t,e,n){if("mouseenter"===t||"mouseover"===t){let r=!1;const i=i=>{const o=e.filter(t=>this.getLayer(t)),a=o.length?this.queryRenderedFeatures(i.point,{layers:o}):[];a.length?r||(r=!0,n.call(this,new Ur(t,this,i.originalEvent,{features:a}))):r=!1},o=()=>{r=!1};return{layers:new Set(e),listener:n,delegates:{mousemove:i,mouseout:o}}}if("mouseleave"===t||"mouseout"===t){let r=!1;const i=i=>{const o=e.filter(t=>this.getLayer(t));(o.length?this.queryRenderedFeatures(i.point,{layers:o}):[]).length?r=!0:r&&(r=!1,n.call(this,new Ur(t,this,i.originalEvent)))},o=e=>{r&&(r=!1,n.call(this,new Ur(t,this,e.originalEvent)))};return{layers:new Set(e),listener:n,delegates:{mousemove:i,mouseout:o}}}{const r=t=>{const r=e.filter(t=>this.getLayer(t)),i=r.length?this.queryRenderedFeatures(t.point,{layers:r}):[];i.length&&(t.features=i,n.call(this,t),delete t.features)};return{layers:new Set(e),listener:n,delegates:{[t]:r}}}}on(t,e,n){if(void 0===n)return super.on(t,e);Array.isArray(e)||(e=[e]);const r=this._createDelegatedListener(t,e,n);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(r);for(const t in r.delegates)this.on(t,r.delegates[t]);return this}once(t,e,n){if(void 0===n)return super.once(t,e);Array.isArray(e)||(e=[e]);const r=this._createDelegatedListener(t,e,n);for(const t in r.delegates)this.once(t,r.delegates[t]);return this}off(t,e,n){if(void 0===n)return super.off(t,e);e=new Set(Array.isArray(e)?e:[e]);const r=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0},i=this._delegatedListeners?this._delegatedListeners[t]:void 0;return i&&(t=>{for(let i=0;i<t.length;i++){const o=t[i];if(o.listener===n&&r(o.layers,e)){for(const t in o.delegates)this.off(t,o.delegates[t]);return t.splice(i,1),this}}})(i),this}queryRenderedFeatures(e,n){return this.style?(void 0!==n||void 0===e||e instanceof t.pointGeometry||Array.isArray(e)||(n=e,e=void 0),this.style.queryRenderedFeatures(e=e||[[0,0],[this.transform.width,this.transform.height]],n=n||{},this.transform)):[]}querySourceFeatures(t,e){return this.style.querySourceFeatures(t,e)}queryTerrainElevation(e,n){const r=this.transform.elevation;return r?(n=t.extend({},{exaggerated:!0},n),r.getAtPoint(t.MercatorCoordinate.fromLngLat(e),null,n.exaggerated)):null}setStyle(e,n){return!1!==(n=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&n.localFontFamily===this._localFontFamily&&this.style&&e?(this._diffStyle(e,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._localFontFamily=n.localFontFamily,this._updateStyle(e,n))}_getUIString(t){const e=this._locale[t];if(null==e)throw new Error(`Missing UI string '${t}'`);return e}_updateStyle(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove(),delete this.style),t&&(this.style=new Ve(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Ve(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(e,n){if("string"==typeof e){const r=this._requestManager.normalizeStyleURL(e),i=this._requestManager.transformRequest(r,t.ResourceType.Style);t.getJSON(i,(e,r)=>{e?this.fire(new t.ErrorEvent(e)):r&&this._updateDiff(r,n)})}else"object"==typeof e&&this._updateDiff(e,n)}_updateDiff(e,n){try{this.style.setState(e)&&this._update(!0)}catch(r){t.warnOnce(`Unable to perform style diff: ${r.message||r.error||r}.  Rebuilding the style from scratch.`),this._updateStyle(e,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")}addSource(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)}isSourceLoaded(e){const n=this.style&&this.style._getSourceCaches(e);if(0!==n.length)return n.every(t=>t.loaded());this.fire(new t.ErrorEvent(new Error(`There is no source with ID '${e}'`)))}areTilesLoaded(){const t=this.style&&this.style._sourceCaches;for(const e in t){const n=t[e]._tiles;for(const t in n){const e=n[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}}return!0}addSourceType(t,e,n){return this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,n)}removeSource(t){return this.style.removeSource(t),this._updateTerrain(),this._update(!0)}getSource(t){return this.style.getSource(t)}addImage(e,n,{pixelRatio:r=1,sdf:i=!1,stretchX:o,stretchY:a,content:s}={}){if(this._lazyInitEmptyStyle(),n instanceof ji||zi&&n instanceof zi){const{width:l,height:c,data:u}=t.exported.getImageData(n);this.style.addImage(e,{data:new t.RGBAImage({width:l,height:c},u),pixelRatio:r,stretchX:o,stretchY:a,content:s,sdf:i,version:0})}else{if(void 0===n.width||void 0===n.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:l,height:c,data:u}=n,h=n;this.style.addImage(e,{data:new t.RGBAImage({width:l,height:c},new Uint8Array(u)),pixelRatio:r,stretchX:o,stretchY:a,content:s,sdf:i,version:0,userImage:h}),h.onAdd&&h.onAdd(this,e)}}}updateImage(e,n){const r=this.style.getImage(e);if(!r)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const i=n instanceof ji||zi&&n instanceof zi?t.exported.getImageData(n):n,{width:o,height:a,data:s}=i;return void 0===o||void 0===a?this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):o!==r.data.width||a!==r.data.height?this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(r.data.replace(s,!(n instanceof ji||zi&&n instanceof zi)),void this.style.updateImage(e,r))}hasImage(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(t){this.style.removeImage(t)}loadImage(e,n){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),(e,r)=>{n(e,r instanceof ji?t.exported.getImageData(r):r)})}listImages(){return this.style.listImages()}addLayer(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)}moveLayer(t,e){return this.style.moveLayer(t,e),this._update(!0)}removeLayer(t){return this.style.removeLayer(t),this._update(!0)}getLayer(t){return this.style.getLayer(t)}setLayerZoomRange(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0)}setFilter(t,e,n={}){return this.style.setFilter(t,e,n),this._update(!0)}getFilter(t){return this.style.getFilter(t)}setPaintProperty(t,e,n,r={}){return this.style.setPaintProperty(t,e,n,r),this._update(!0)}getPaintProperty(t,e){return this.style.getPaintProperty(t,e)}setLayoutProperty(t,e,n,r={}){return this.style.setLayoutProperty(t,e,n,r),this._update(!0)}getLayoutProperty(t,e){return this.style.getLayoutProperty(t,e)}setLight(t,e={}){return this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(t){return this._lazyInitEmptyStyle(),this.style.setTerrain(t),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(t){return this._lazyInitEmptyStyle(),this.style.setFog(t),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(e){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(t.LngLat.convert(e),this.transform):0}setFeatureState(t,e){return this.style.setFeatureState(t,e),this._update()}removeFeatureState(t,e){return this.style.removeFeatureState(t,e),this._update()}getFeatureState(t){return this.style.getFeatureState(t)}_containerDimensions(){let t=0,e=0;return this._container&&(t=this._container.getBoundingClientRect().width||400,e=this._container.getBoundingClientRect().height||300),[t,e]}_detectMissingCSS(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=o.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();const e=this._canvasContainer=o.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=o.create("canvas","mapboxgl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const n=this._containerDimensions();this._resizeCanvas(n[0],n[1]);const r=this._controlContainer=o.create("div","mapboxgl-control-container",t),i=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(t=>{i[t]=o.create("div","mapboxgl-ctrl-"+t,r)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(e,n){const r=t.exported.devicePixelRatio||1;this._canvas.width=r*Math.ceil(e),this._canvas.height=r*Math.ceil(n),this._canvas.style.width=e+"px",this._canvas.style.height=n+"px"}_addMarker(t){this._markers.push(t)}_removeMarker(t){const e=this._markers.indexOf(t);-1!==e&&this._markers.splice(e,1)}_setupPainter(){const n=t.extend({},e.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),r=this._canvas.getContext("webgl",n)||this._canvas.getContext("experimental-webgl",n);r?(t.storeAuthState(r,!0),this.painter=new fr(r,this.transform),this.on("data",t=>{"source"===t.dataType&&this.painter.setTileLoadedFlag(!0)}),t.exported$1.testSupport(r)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))}_contextRestored(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))}_onMapScroll(t){if(t.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(t){return this._update(),this._renderTaskQueue.add(t)}_cancelRenderFrame(t){this._renderTaskQueue.remove(t)}_requestDomTask(t){!this.loaded()||this.loaded()&&!this.isMoving()?t():this._domRenderTaskQueue.add(t)}_render(e){let n;const r=this.painter.context.extTimerQuery,i=t.exported.now();this.listens("gpu-timing-frame")&&(n=r.createQueryEXT(),r.beginQueryEXT(r.TIME_ELAPSED_EXT,n));let o=this._updateAverageElevation(i);if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),this._domRenderTaskQueue.run(e),this._removed)return;let a=!1;const s=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const e=this.transform.zoom,n=this.transform.pitch,r=t.exported.now();this.style.zoomHistory.update(e,r);const i=new t.EvaluationParameters(e,{now:r,fadeDuration:s,pitch:n,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),o=i.crossFadingFactor();1===o&&o===this._crossFadingFactor||(a=!0,this._crossFadingFactor=o),this.style.update(i)}if(this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0),this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),this.style._updateSources(this.transform),this._forceMarkerUpdate()),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,s,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:s,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),speedIndexTiming:this.speedIndexTiming}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||a)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const e=t.exported.now()-i;r.endQueryEXT(r.TIME_ELAPSED_EXT,n),setTimeout(()=>{const i=r.getQueryObjectEXT(n,r.QUERY_RESULT_EXT)/1e6;r.deleteQueryEXT(n),this.fire(new t.Event("gpu-timing-frame",{cpuTime:e,gpuTime:i}))},50)}if(this.listens("gpu-timing-layer")){const e=this.painter.collectGpuTimers();setTimeout(()=>{const n=this.painter.queryGpuTimers(e);this.fire(new t.Event("gpu-timing-layer",{layerTimes:n}))},50)}const l=this._sourcesDirty||this._styleDirty||this._placementDirty||o;if(l||this._repaint)this.triggerRepaint();else{const e=!this.isMoving()&&this.loaded();if(e&&(o=this._updateAverageElevation(i,!0)),o)this.triggerRepaint();else if(this._triggerFrame(!1),e&&(this.fire(new t.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const e=this._calculateSpeedIndex();this.fire(new t.Event("speedindexcompleted",{speedIndex:e})),this.speedIndexTiming=!1}}return!this._loaded||this._fullyLoaded||l||(this._fullyLoaded=!0,this._authenticate()),this}_forceMarkerUpdate(){for(const t of this._markers)t._update()}_updateAverageElevation(t,e=!1){const n=t=>(this.transform.averageElevation=t,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&n(0);if((e||t-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(t)){const e=this.transform.averageElevation;let r=this.transform.sampleAverageElevation();isNaN(r)?r=0:this._averageElevationLastSampledAt=t;const i=Math.abs(e-r);if(i>1){if(this._isInitialLoad)return this._averageElevation.jumpTo(r),n(r);this._averageElevation.easeTo(r,t,300)}else if(i>1e-4)return this._averageElevation.jumpTo(r),n(r)}return!!this._averageElevation.isEasing(t)&&n(this._averageElevation.getValue(t))}_authenticate(){t.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,e=>{if(e&&(e.message===t.AUTH_ERR_MSG||401===e.status)){const e=this.painter.context.gl;t.storeAuthState(e,!1),this._logoControl instanceof Mi&&this._logoControl._updateLogo(),e&&e.clear(e.DEPTH_BUFFER_BIT|e.COLOR_BUFFER_BIT|e.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new t.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),t.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}_calculateSpeedIndex(){const t=this.painter.canvasCopy(),e=this.painter.getCanvasCopiesAndTimestamps();e.timeStamps.push(performance.now());const n=this.painter.context.gl,r=n.createFramebuffer();function i(t){n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0);const e=new Uint8Array(n.drawingBufferWidth*n.drawingBufferHeight*4);return n.readPixels(0,0,n.drawingBufferWidth,n.drawingBufferHeight,n.RGBA,n.UNSIGNED_BYTE,e),e}return n.bindFramebuffer(n.FRAMEBUFFER,r),this._canvasPixelComparison(i(t),e.canvasCopies.map(i),e.timeStamps)}_canvasPixelComparison(t,e,n){let r=n[1]-n[0];const i=t.length/4;for(let o=0;o<e.length;o++){const a=e[o];let s=0;for(let e=0;e<a.length;e+=4)a[e]===t[e]&&a[e+1]===t[e+1]&&a[e+2]===t[e+2]&&a[e+3]===t[e+3]&&(s+=1);r+=(n[o+2]-n[o+1])*(1-s/i)}return r}remove(){this._hash&&this._hash.remove();for(const t of this._controls)t.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.clearWorkerCaches(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("orientationchange",this._onWindowResize,!1),t.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));const e=this.painter.context.gl.getExtension("WEBGL_lose_context");e&&e.loseContext(),Ui(this._canvasContainer),Ui(this._controlContainer),Ui(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),t.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new t.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(e){this._renderNextFrame=this._renderNextFrame||e,this.style&&!this._frame&&(this._frame=t.exported.frame(t=>{const e=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,e&&this._render(t)}))}_onWindowOnline(){this._update()}_onWindowResize(t){this._trackResize&&this.resize({originalEvent:t})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(t){this._showTerrainWireframe!==t&&(this._showTerrainWireframe=t,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(t){this._speedIndexTiming!==t&&(this._speedIndexTiming=t,this._update())}get showPadding(){return!!this._showPadding}set showPadding(t){this._showPadding!==t&&(this._showPadding=t,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())}get repaint(){return!!this._repaint}set repaint(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(t){this._vertices=t,this._update()}_setCacheLimits(e,n){t.setCacheLimits(e,n)}get version(){return t.version}},NavigationControl:class{constructor(e){this.options=t.extend({},Gi,e),this._container=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",t=>t.preventDefault()),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",t=>this._map.zoomIn({},{originalEvent:t})),o.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",t=>this._map.zoomOut({},{originalEvent:t})),o.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",t=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})}),this._compassIcon=o.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))}_updateZoomButtons(){const t=this._map.getZoom(),e=t===this._map.getMaxZoom(),n=t===this._map.getMinZoom();this._zoomInButton.disabled=e,this._zoomOutButton.disabled=n,this._zoomInButton.setAttribute("aria-disabled",e.toString()),this._zoomOutButton.setAttribute("aria-disabled",n.toString())}_rotateCompassArrow(){const t=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._map._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=t)})}onAdd(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Vi(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){o.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(t,e){const n=o.create("button",t,this._container);return n.type="button",n.addEventListener("click",e),n}_setButtonTitle(t,e){const n=this._map._getUIString("NavigationControl."+e);t.setAttribute("aria-label",n),t.firstElementChild&&t.firstElementChild.setAttribute("title",n)}},GeolocateControl:class extends t.Evented{constructor(e){super(),this.options=t.extend({},qi,e),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation"],this),this._onDeviceOrientationListener=this._onDeviceOrientation.bind(this),this._updateMarkerRotationThrottled=kr(this._updateMarkerRotation,20)}onAdd(e){var n;return this._map=e,this._container=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),n=this._setupUI,void 0!==Hi?n(Hi):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then(t=>{Hi="denied"!==t.state,n(Hi)}):(Hi=!!t.window.navigator.geolocation,n(Hi)),this._container}onRemove(){void 0!==this._geolocationWatchID&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),o.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Wi=0,Zi=!1}_isOutOfMapMaxBounds(t){const e=this._map.getMaxBounds(),n=t.coords;return e&&(n.longitude<e.getWest()||n.longitude>e.getEast()||n.latitude<e.getSouth()||n.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(e){if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()}}_updateCamera(e){const n=new t.LngLat(e.coords.longitude,e.coords.latitude),r=e.coords.accuracy,i=this._map.getBearing(),o=t.extend({bearing:i},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(r),o,{geolocateSource:!0})}_updateMarker(e){if(e){const n=new t.LngLat(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const t=this._map._container.getBoundingClientRect().height/2,e=this._map.unproject([0,t]),n=this._map.unproject([100,t]),r=e.distanceTo(n)/100,i=Math.ceil(2*this._accuracy/r);this._circleElement.style.width=i+"px",this._circleElement.style.height=i+"px"}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",t),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",t),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&Zi)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(e){if(this._container.addEventListener("contextmenu",t=>t.preventDefault()),this._geolocateButton=o.create("button","mapboxgl-ctrl-geolocate",this._container),o.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===e){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",e)}else{const t=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",t),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",t)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=o.create("div","mapboxgl-user-location"),this._dotElement.appendChild(o.create("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(o.create("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Ri({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=o.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ri({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",e=>{e.geolocateSource||"ACTIVE_LOCK"!==this._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new t.Event("trackuserlocationend")))})}_onDeviceOrientation(t){this._userLocationDotMarker&&(t.webkitCompassHeading?this._heading=t.webkitCompassHeading:!0===t.absolute&&(this._heading=-1*t.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Wi--,Zi=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let e;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Wi++,Wi>1?(e={maximumAge:6e5,timeout:0},Zi=!0):(e=this.options.positionOptions,Zi=!1),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const e=()=>{t.window.addEventListener("ondeviceorientationabsolute"in t.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientationListener)};void 0!==t.window.DeviceMotionEvent&&"function"==typeof t.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(t=>{"granted"===t&&e()}).catch(console.error):e()}_clearWatch(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),t.window.removeEventListener("deviceorientation",this._onDeviceOrientationListener),t.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientationListener),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Ai,ScaleControl:class{constructor(e){this.options=t.extend({},$i,e),t.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){Ki(this._map,this._container,this.options)}onAdd(t){return this._map=t,this._container=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){o.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(t){this.options.unit=t,Ki(this._map,this._container,this.options)}},FullscreenControl:class{constructor(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof t.window.HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in t.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){o.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!t.window.document.fullscreenEnabled&&!t.window.document.webkitFullscreenEnabled)}_setupUI(){const e=this._fullscreenButton=o.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);o.create("span","mapboxgl-ctrl-icon",e).setAttribute("aria-hidden",!0),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",t)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(t.window.document.fullscreenElement||t.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends t.Evented{constructor(e){super(),this.options=t.extend(Object.create(Xi),e),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this),this._classList=new Set(e&&e.className?e.className.trim().split(/\s+/):[])}addTo(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("preclick",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&o.remove(this._content),this._container&&(o.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(e){return this.setDOMContent(t.window.document.createTextNode(e))}setHTML(e){const n=t.window.document.createDocumentFragment(),r=t.window.document.createElement("body");let i;for(r.innerHTML=e;i=r.firstChild,i;)n.appendChild(i);return this.setDOMContent(n)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(t){return this.options.maxWidth=t,this._update(),this}setDOMContent(t){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=o.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(t),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(t){return this._classList.add(t),this._container&&this._updateClassList(),this}removeClassName(t){return this._classList.delete(t),this._container&&this._updateClassList(),this}setOffset(t){return this.options.offset=t,this._update(),this}toggleClassName(t){let e;return this._classList.delete(t)?e=!1:(this._classList.add(t),e=!0),this._container&&this._updateClassList(),e}_createCloseButton(){this.options.closeButton&&(this._closeButton=o.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.setAttribute("aria-hidden","true"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(t){this._update(t.point)}_onMouseMove(t){this._update(t.point)}_onDrag(t){this._update(t.point)}_getAnchor(t){if(this.options.anchor)return this.options.anchor;const e=this._pos,n=this._container.offsetWidth,r=this._container.offsetHeight;let i;return i=e.y+t.bottom.y<r?["top"]:e.y>this._map.transform.height-r?["bottom"]:[],e.x<n/2?i.push("left"):e.x>this._map.transform.width-n/2&&i.push("right"),0===i.length?"bottom":i.join("-")}_updateClassList(){const t=[...this._classList];t.push("mapboxgl-popup"),this._anchor&&t.push("mapboxgl-popup-anchor-"+this._anchor),this._trackPointer&&t.push("mapboxgl-popup-track-pointer"),this._container.className=t.join(" ")}_update(e){if(this._map&&(this._lngLat||this._trackPointer)&&this._content){if(this._container||(this._container=o.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=o.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content)),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Pi(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||e){const n=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat),r=function(e){if(e||(e=new t.pointGeometry(0,0)),"number"==typeof e){const n=Math.round(Math.sqrt(.5*Math.pow(e,2)));return{center:new t.pointGeometry(0,0),top:new t.pointGeometry(0,e),"top-left":new t.pointGeometry(n,n),"top-right":new t.pointGeometry(-n,n),bottom:new t.pointGeometry(0,-e),"bottom-left":new t.pointGeometry(n,-n),"bottom-right":new t.pointGeometry(-n,-n),left:new t.pointGeometry(e,0),right:new t.pointGeometry(-e,0)}}if(e instanceof t.pointGeometry||Array.isArray(e)){const n=t.pointGeometry.convert(e);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:t.pointGeometry.convert(e.center||[0,0]),top:t.pointGeometry.convert(e.top||[0,0]),"top-left":t.pointGeometry.convert(e["top-left"]||[0,0]),"top-right":t.pointGeometry.convert(e["top-right"]||[0,0]),bottom:t.pointGeometry.convert(e.bottom||[0,0]),"bottom-left":t.pointGeometry.convert(e["bottom-left"]||[0,0]),"bottom-right":t.pointGeometry.convert(e["bottom-right"]||[0,0]),left:t.pointGeometry.convert(e.left||[0,0]),right:t.pointGeometry.convert(e.right||[0,0])}}(this.options.offset),i=this._anchor=this._getAnchor(r),a=n.add(r[i]).round();this._map._requestDomTask(()=>{this._container&&i&&o.setTransform(this._container,`${Di[i]} translate(${a.x}px,${a.y}px)`)})}this._updateClassList()}}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const t=this._container.querySelector(Ji);t&&t.focus()}_onClose(){this.remove()}_setOpacity(t){this._content&&(this._content.style.opacity=t),this._tip&&(this._tip.style.opacity=t)}},Marker:Ri,Style:Ve,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.pointGeometry,MercatorCoordinate:t.MercatorCoordinate,FreeCameraOptions:wr,Evented:t.Evented,config:t.config,prewarm:function(){Lt().acquire(Pt)},clearPrewarmedResources:function(){const t=Rt;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(Pt),Rt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return Dt.workerCount},set workerCount(t){Dt.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage(e){t.clearTileCache(e)},workerUrl:"",workerClass:null,setNow:t.exported.setNow,restoreNow:t.exported.restoreNow};return Qi})),r}()}).call(this,n(205))},function(t,e,n){"use strict";e.a={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"}},function(t,e,n){var r=n(350),i=n(353);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},function(t,e,n){var r=n(172),i=n(176);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},function(t,e,n){t.exports=function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var l=n[a]={exports:{}};e[a][0].call(l.exports,(function(t){return i(e[a][1][t]||t)}),l,l.exports,t,e,n,r)}return n[a].exports}for(var o=!1,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){(function(r,i,o,a,s,l,c,u,h){"use strict";var d=t("crypto");function p(t,e){return function(t,e){var n;if(void 0===(n="passthrough"!==e.algorithm?d.createHash(e.algorithm):new _).write&&(n.write=n.update,n.end=n.update),v(e,n).dispatch(t),n.update||n.end(""),n.digest)return n.digest("buffer"===e.encoding?void 0:e.encoding);var r=n.read();return"buffer"!==e.encoding?r.toString(e.encoding):r}(t,e=g(t,e))}(n=e.exports=p).sha1=function(t){return p(t)},n.keys=function(t){return p(t,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},n.MD5=function(t){return p(t,{algorithm:"md5",encoding:"hex"})},n.keysMD5=function(t){return p(t,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var f=d.getHashes?d.getHashes().slice():["sha1","md5"];f.push("passthrough");var m=["buffer","hex","binary","base64"];function g(t,e){e=e||{};var n={};if(n.algorithm=e.algorithm||"sha1",n.encoding=e.encoding||"hex",n.excludeValues=!!e.excludeValues,n.algorithm=n.algorithm.toLowerCase(),n.encoding=n.encoding.toLowerCase(),n.ignoreUnknown=!0===e.ignoreUnknown,n.respectType=!1!==e.respectType,n.respectFunctionNames=!1!==e.respectFunctionNames,n.respectFunctionProperties=!1!==e.respectFunctionProperties,n.unorderedArrays=!0===e.unorderedArrays,n.unorderedSets=!1!==e.unorderedSets,n.unorderedObjects=!1!==e.unorderedObjects,n.replacer=e.replacer||void 0,n.excludeKeys=e.excludeKeys||void 0,void 0===t)throw new Error("Object argument required.");for(var r=0;r<f.length;++r)f[r].toLowerCase()===n.algorithm.toLowerCase()&&(n.algorithm=f[r]);if(-1===f.indexOf(n.algorithm))throw new Error('Algorithm "'+n.algorithm+'"  not supported. supported values: '+f.join(", "));if(-1===m.indexOf(n.encoding)&&"passthrough"!==n.algorithm)throw new Error('Encoding "'+n.encoding+'"  not supported. supported values: '+m.join(", "));return n}function y(t){if("function"==typeof t)return null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(t))}function v(t,e,n){function r(t){return e.update?e.update(t,"utf8"):e.write(t,"utf8")}return n=n||[],{dispatch:function(e){return t.replacer&&(e=t.replacer(e)),this["_"+(null===e?"null":typeof e)](e)},_object:function(e){var i,a=Object.prototype.toString.call(e),s=/\[object (.*)\]/i.exec(a);if(s=(s=s?s[1]:"unknown:["+a+"]").toLowerCase(),0<=(i=n.indexOf(e)))return this.dispatch("[CIRCULAR:"+i+"]");if(n.push(e),void 0!==o&&o.isBuffer&&o.isBuffer(e))return r("buffer:"),r(e);if("object"===s||"function"===s||"asyncfunction"===s){var l=Object.keys(e);t.unorderedObjects&&(l=l.sort()),!1===t.respectType||y(e)||l.splice(0,0,"prototype","__proto__","constructor"),t.excludeKeys&&(l=l.filter((function(e){return!t.excludeKeys(e)}))),r("object:"+l.length+":");var c=this;return l.forEach((function(n){c.dispatch(n),r(":"),t.excludeValues||c.dispatch(e[n]),r(",")}))}if(!this["_"+s]){if(t.ignoreUnknown)return r("["+s+"]");throw new Error('Unknown object type "'+s+'"')}this["_"+s](e)},_array:function(e,i){i=void 0!==i?i:!1!==t.unorderedArrays;var o=this;if(r("array:"+e.length+":"),!i||e.length<=1)return e.forEach((function(t){return o.dispatch(t)}));var a=[],s=e.map((function(e){var r=new _,i=n.slice();return v(t,r,i).dispatch(e),a=a.concat(i.slice(n.length)),r.read().toString()}));return n=n.concat(a),s.sort(),this._array(s,!1)},_date:function(t){return r("date:"+t.toJSON())},_symbol:function(t){return r("symbol:"+t.toString())},_error:function(t){return r("error:"+t.toString())},_boolean:function(t){return r("bool:"+t.toString())},_string:function(t){r("string:"+t.length+":"),r(t.toString())},_function:function(e){r("fn:"),y(e)?this.dispatch("[native]"):this.dispatch(e.toString()),!1!==t.respectFunctionNames&&this.dispatch("function-name:"+String(e.name)),t.respectFunctionProperties&&this._object(e)},_number:function(t){return r("number:"+t.toString())},_xml:function(t){return r("xml:"+t.toString())},_null:function(){return r("Null")},_undefined:function(){return r("Undefined")},_regexp:function(t){return r("regex:"+t.toString())},_uint8array:function(t){return r("uint8array:"),this.dispatch(Array.prototype.slice.call(t))},_uint8clampedarray:function(t){return r("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(t))},_int8array:function(t){return r("uint8array:"),this.dispatch(Array.prototype.slice.call(t))},_uint16array:function(t){return r("uint16array:"),this.dispatch(Array.prototype.slice.call(t))},_int16array:function(t){return r("uint16array:"),this.dispatch(Array.prototype.slice.call(t))},_uint32array:function(t){return r("uint32array:"),this.dispatch(Array.prototype.slice.call(t))},_int32array:function(t){return r("uint32array:"),this.dispatch(Array.prototype.slice.call(t))},_float32array:function(t){return r("float32array:"),this.dispatch(Array.prototype.slice.call(t))},_float64array:function(t){return r("float64array:"),this.dispatch(Array.prototype.slice.call(t))},_arraybuffer:function(t){return r("arraybuffer:"),this.dispatch(new Uint8Array(t))},_url:function(t){return r("url:"+t.toString())},_map:function(e){r("map:");var n=Array.from(e);return this._array(n,!1!==t.unorderedSets)},_set:function(e){r("set:");var n=Array.from(e);return this._array(n,!1!==t.unorderedSets)},_file:function(t){return r("file:"),this.dispatch([t.name,t.size,t.type,t.lastModfied])},_blob:function(){if(t.ignoreUnknown)return r("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return r("domwindow")},_bigint:function(t){return r("bigint:"+t.toString())},_process:function(){return r("process")},_timer:function(){return r("timer")},_pipe:function(){return r("pipe")},_tcp:function(){return r("tcp")},_udp:function(){return r("udp")},_tty:function(){return r("tty")},_statwatcher:function(){return r("statwatcher")},_securecontext:function(){return r("securecontext")},_connection:function(){return r("connection")},_zlib:function(){return r("zlib")},_context:function(){return r("context")},_nodescript:function(){return r("nodescript")},_httpparser:function(){return r("httpparser")},_dataview:function(){return r("dataview")},_signal:function(){return r("signal")},_fsevent:function(){return r("fsevent")},_tlswrap:function(){return r("tlswrap")}}}function _(){return{buf:"",write:function(t){this.buf+=t},end:function(t){this.buf+=t},read:function(){return this.buf}}}n.writeToStream=function(t,e,n){return void 0===n&&(n=e,e={}),v(e=g(t,e),n).dispatch(t)}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_7eac155c.js","/")},{buffer:3,crypto:5,lYpoI2:10}],2:[function(t,e,n){(function(t,e,r,i,o,a,s,l,c){!function(t){"use strict";var e="undefined"!=typeof Uint8Array?Uint8Array:Array,n="+".charCodeAt(0),r="/".charCodeAt(0),i="0".charCodeAt(0),o="a".charCodeAt(0),a="A".charCodeAt(0),s="-".charCodeAt(0),l="_".charCodeAt(0);function c(t){var e=t.charCodeAt(0);return e===n||e===s?62:e===r||e===l?63:e<i?-1:e<i+10?e-i+26+26:e<a+26?e-a:e<o+26?e-o+26:void 0}t.toByteArray=function(t){var n,r;if(0<t.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.length,o="="===t.charAt(i-2)?2:"="===t.charAt(i-1)?1:0,a=new e(3*t.length/4-o),s=0<o?t.length-4:t.length,l=0;function u(t){a[l++]=t}for(n=0;n<s;n+=4,0)u((16711680&(r=c(t.charAt(n))<<18|c(t.charAt(n+1))<<12|c(t.charAt(n+2))<<6|c(t.charAt(n+3))))>>16),u((65280&r)>>8),u(255&r);return 2==o?u(255&(r=c(t.charAt(n))<<2|c(t.charAt(n+1))>>4)):1==o&&(u((r=c(t.charAt(n))<<10|c(t.charAt(n+1))<<4|c(t.charAt(n+2))>>2)>>8&255),u(255&r)),a},t.fromByteArray=function(t){var e,n,r,i,o=t.length%3,a="";function s(t){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t)}for(e=0,r=t.length-o;e<r;e+=3)a+=s((i=n=(t[e]<<16)+(t[e+1]<<8)+t[e+2])>>18&63)+s(i>>12&63)+s(i>>6&63)+s(63&i);switch(o){case 1:a+=s((n=t[t.length-1])>>2),a+=s(n<<4&63),a+="==";break;case 2:a+=s((n=(t[t.length-2]<<8)+t[t.length-1])>>10),a+=s(n>>4&63),a+=s(n<<2&63),a+="="}return a}}(void 0===n?this.base64js={}:n)}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:10}],3:[function(t,e,n){(function(e,r,i,o,a,s,l,c,u){var h=t("base64-js"),d=t("ieee754");function i(t,e,n){if(!(this instanceof i))return new i(t,e,n);var r,o,a,s,l,c=typeof t;if("base64"===e&&"string"==c)for(t=(r=t).trim?r.trim():r.replace(/^\s+|\s+$/g,"");t.length%4!=0;)t+="=";if("number"==c)o=O(t);else if("string"==c)o=i.byteLength(t,e);else{if("object"!=c)throw new Error("First argument needs to be a number, array or string.");o=O(t.length)}if(i._useTypedArrays?a=i._augment(new Uint8Array(o)):((a=this).length=o,a._isBuffer=!0),i._useTypedArrays&&"number"==typeof t.byteLength)a._set(t);else if(I(l=t)||i.isBuffer(l)||l&&"object"==typeof l&&"number"==typeof l.length)for(s=0;s<o;s++)i.isBuffer(t)?a[s]=t.readUInt8(s):a[s]=t[s];else if("string"==c)a.write(t,0,e);else if("number"==c&&!i._useTypedArrays&&!n)for(s=0;s<o;s++)a[s]=0;return a}function p(t,e,n,r){r||(j("boolean"==typeof n,"missing or invalid endian"),j(null!=e,"missing offset"),j(e+1<t.length,"Trying to read beyond buffer length"));var i,o=t.length;if(!(o<=e))return n?(i=t[e],e+1<o&&(i|=t[e+1]<<8)):(i=t[e]<<8,e+1<o&&(i|=t[e+1])),i}function f(t,e,n,r){r||(j("boolean"==typeof n,"missing or invalid endian"),j(null!=e,"missing offset"),j(e+3<t.length,"Trying to read beyond buffer length"));var i,o=t.length;if(!(o<=e))return n?(e+2<o&&(i=t[e+2]<<16),e+1<o&&(i|=t[e+1]<<8),i|=t[e],e+3<o&&(i+=t[e+3]<<24>>>0)):(e+1<o&&(i=t[e+1]<<16),e+2<o&&(i|=t[e+2]<<8),e+3<o&&(i|=t[e+3]),i+=t[e]<<24>>>0),i}function m(t,e,n,r){if(r||(j("boolean"==typeof n,"missing or invalid endian"),j(null!=e,"missing offset"),j(e+1<t.length,"Trying to read beyond buffer length")),!(t.length<=e)){var i=p(t,e,n,!0);return 32768&i?-1*(65535-i+1):i}}function g(t,e,n,r){if(r||(j("boolean"==typeof n,"missing or invalid endian"),j(null!=e,"missing offset"),j(e+3<t.length,"Trying to read beyond buffer length")),!(t.length<=e)){var i=f(t,e,n,!0);return 2147483648&i?-1*(4294967295-i+1):i}}function y(t,e,n,r){return r||(j("boolean"==typeof n,"missing or invalid endian"),j(e+3<t.length,"Trying to read beyond buffer length")),d.read(t,e,n,23,4)}function v(t,e,n,r){return r||(j("boolean"==typeof n,"missing or invalid endian"),j(e+7<t.length,"Trying to read beyond buffer length")),d.read(t,e,n,52,8)}function _(t,e,n,r,i){i||(j(null!=e,"missing value"),j("boolean"==typeof r,"missing or invalid endian"),j(null!=n,"missing offset"),j(n+1<t.length,"trying to write beyond buffer length"),R(e,65535));var o=t.length;if(!(o<=n))for(var a=0,s=Math.min(o-n,2);a<s;a++)t[n+a]=(e&255<<8*(r?a:1-a))>>>8*(r?a:1-a)}function b(t,e,n,r,i){i||(j(null!=e,"missing value"),j("boolean"==typeof r,"missing or invalid endian"),j(null!=n,"missing offset"),j(n+3<t.length,"trying to write beyond buffer length"),R(e,4294967295));var o=t.length;if(!(o<=n))for(var a=0,s=Math.min(o-n,4);a<s;a++)t[n+a]=e>>>8*(r?a:3-a)&255}function x(t,e,n,r,i){i||(j(null!=e,"missing value"),j("boolean"==typeof r,"missing or invalid endian"),j(null!=n,"missing offset"),j(n+1<t.length,"Trying to write beyond buffer length"),L(e,32767,-32768)),t.length<=n||_(t,0<=e?e:65535+e+1,n,r,i)}function w(t,e,n,r,i){i||(j(null!=e,"missing value"),j("boolean"==typeof r,"missing or invalid endian"),j(null!=n,"missing offset"),j(n+3<t.length,"Trying to write beyond buffer length"),L(e,2147483647,-2147483648)),t.length<=n||b(t,0<=e?e:4294967295+e+1,n,r,i)}function E(t,e,n,r,i){i||(j(null!=e,"missing value"),j("boolean"==typeof r,"missing or invalid endian"),j(null!=n,"missing offset"),j(n+3<t.length,"Trying to write beyond buffer length"),N(e,34028234663852886e22,-34028234663852886e22)),t.length<=n||d.write(t,e,n,r,23,4)}function C(t,e,n,r,i){i||(j(null!=e,"missing value"),j("boolean"==typeof r,"missing or invalid endian"),j(null!=n,"missing offset"),j(n+7<t.length,"Trying to write beyond buffer length"),N(e,17976931348623157e292,-17976931348623157e292)),t.length<=n||d.write(t,e,n,r,52,8)}n.Buffer=i,n.SlowBuffer=i,n.INSPECT_MAX_BYTES=50,i.poolSize=8192,i._useTypedArrays=function(){try{var t=new ArrayBuffer(0),e=new Uint8Array(t);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray}catch(t){return!1}}(),i.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.isBuffer=function(t){return!(null==t||!t._isBuffer)},i.byteLength=function(t,e){var n;switch(t+="",e||"utf8"){case"hex":n=t.length/2;break;case"utf8":case"utf-8":n=M(t).length;break;case"ascii":case"binary":case"raw":n=t.length;break;case"base64":n=k(t).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=2*t.length;break;default:throw new Error("Unknown encoding")}return n},i.concat=function(t,e){if(j(I(t),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===t.length)return new i(0);if(1===t.length)return t[0];if("number"!=typeof e)for(o=e=0;o<t.length;o++)e+=t[o].length;for(var n=new i(e),r=0,o=0;o<t.length;o++){var a=t[o];a.copy(n,r),r+=a.length}return n},i.prototype.write=function(t,e,n,r){var o;isFinite(e)?isFinite(n)||(r=n,n=void 0):(o=r,r=e,e=n,n=o),e=Number(e)||0;var a,s,l,c,u,h,d,p=this.length-e;switch((!n||p<(n=Number(n)))&&(n=p),r=String(r||"utf8").toLowerCase()){case"hex":a=function(t,e,n,r){n=Number(n)||0;var o=t.length-n;(!r||o<(r=Number(r)))&&(r=o);var a=e.length;j(a%2==0,"Invalid hex string"),a/2<r&&(r=a/2);for(var s=0;s<r;s++){var l=parseInt(e.substr(2*s,2),16);j(!isNaN(l),"Invalid hex string"),t[n+s]=l}return i._charsWritten=2*s,s}(this,t,e,n);break;case"utf8":case"utf-8":u=t,h=e,d=n,a=i._charsWritten=P(M(u),this,h,d);break;case"ascii":case"binary":a=function(t,e,n,r){return i._charsWritten=P(function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}(this,t,e,n);break;case"base64":s=t,l=e,c=n,a=i._charsWritten=P(k(s),this,l,c);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":a=function(t,e,n,r){return i._charsWritten=P(function(t){for(var e,n,r,i=[],o=0;o<t.length;o++)n=(e=t.charCodeAt(o))>>8,r=e%256,i.push(r),i.push(n);return i}(e),t,n,r)}(this,t,e,n);break;default:throw new Error("Unknown encoding")}return a},i.prototype.toString=function(t,e,n){var r,i,o,a,s=this;if(t=String(t||"utf8").toLowerCase(),e=Number(e)||0,(n=void 0!==n?Number(n):n=s.length)===e)return"";switch(t){case"hex":r=function(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||r<n)&&(n=r);for(var i="",o=e;o<n;o++)i+=A(t[o]);return i}(s,e,n);break;case"utf8":case"utf-8":r=function(t,e,n){var r="",i="";n=Math.min(t.length,n);for(var o=e;o<n;o++)t[o]<=127?(r+=D(i)+String.fromCharCode(t[o]),i=""):i+="%"+t[o].toString(16);return r+D(i)}(s,e,n);break;case"ascii":case"binary":r=function(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;i++)r+=String.fromCharCode(t[i]);return r}(s,e,n);break;case"base64":i=s,a=n,r=0===(o=e)&&a===i.length?h.fromByteArray(i):h.fromByteArray(i.slice(o,a));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=function(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}(s,e,n);break;default:throw new Error("Unknown encoding")}return r},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},i.prototype.copy=function(t,e,n,r){if(n=n||0,r||0===r||(r=this.length),e=e||0,r!==n&&0!==t.length&&0!==this.length){j(n<=r,"sourceEnd < sourceStart"),j(0<=e&&e<t.length,"targetStart out of bounds"),j(0<=n&&n<this.length,"sourceStart out of bounds"),j(0<=r&&r<=this.length,"sourceEnd out of bounds"),r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var o=r-n;if(o<100||!i._useTypedArrays)for(var a=0;a<o;a++)t[a+e]=this[a+n];else t._set(this.subarray(n,n+o),e)}},i.prototype.slice=function(t,e){var n=this.length;if(t=T(t,n,0),e=T(e,n,n),i._useTypedArrays)return i._augment(this.subarray(t,e));for(var r=e-t,o=new i(r,void 0,!0),a=0;a<r;a++)o[a]=this[a+t];return o},i.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},i.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},i.prototype.readUInt8=function(t,e){if(e||(j(null!=t,"missing offset"),j(t<this.length,"Trying to read beyond buffer length")),!(t>=this.length))return this[t]},i.prototype.readUInt16LE=function(t,e){return p(this,t,!0,e)},i.prototype.readUInt16BE=function(t,e){return p(this,t,!1,e)},i.prototype.readUInt32LE=function(t,e){return f(this,t,!0,e)},i.prototype.readUInt32BE=function(t,e){return f(this,t,!1,e)},i.prototype.readInt8=function(t,e){if(e||(j(null!=t,"missing offset"),j(t<this.length,"Trying to read beyond buffer length")),!(t>=this.length))return 128&this[t]?-1*(255-this[t]+1):this[t]},i.prototype.readInt16LE=function(t,e){return m(this,t,!0,e)},i.prototype.readInt16BE=function(t,e){return m(this,t,!1,e)},i.prototype.readInt32LE=function(t,e){return g(this,t,!0,e)},i.prototype.readInt32BE=function(t,e){return g(this,t,!1,e)},i.prototype.readFloatLE=function(t,e){return y(this,t,!0,e)},i.prototype.readFloatBE=function(t,e){return y(this,t,!1,e)},i.prototype.readDoubleLE=function(t,e){return v(this,t,!0,e)},i.prototype.readDoubleBE=function(t,e){return v(this,t,!1,e)},i.prototype.writeUInt8=function(t,e,n){n||(j(null!=t,"missing value"),j(null!=e,"missing offset"),j(e<this.length,"trying to write beyond buffer length"),R(t,255)),e>=this.length||(this[e]=t)},i.prototype.writeUInt16LE=function(t,e,n){_(this,t,e,!0,n)},i.prototype.writeUInt16BE=function(t,e,n){_(this,t,e,!1,n)},i.prototype.writeUInt32LE=function(t,e,n){b(this,t,e,!0,n)},i.prototype.writeUInt32BE=function(t,e,n){b(this,t,e,!1,n)},i.prototype.writeInt8=function(t,e,n){n||(j(null!=t,"missing value"),j(null!=e,"missing offset"),j(e<this.length,"Trying to write beyond buffer length"),L(t,127,-128)),e>=this.length||(0<=t?this.writeUInt8(t,e,n):this.writeUInt8(255+t+1,e,n))},i.prototype.writeInt16LE=function(t,e,n){x(this,t,e,!0,n)},i.prototype.writeInt16BE=function(t,e,n){x(this,t,e,!1,n)},i.prototype.writeInt32LE=function(t,e,n){w(this,t,e,!0,n)},i.prototype.writeInt32BE=function(t,e,n){w(this,t,e,!1,n)},i.prototype.writeFloatLE=function(t,e,n){E(this,t,e,!0,n)},i.prototype.writeFloatBE=function(t,e,n){E(this,t,e,!1,n)},i.prototype.writeDoubleLE=function(t,e,n){C(this,t,e,!0,n)},i.prototype.writeDoubleBE=function(t,e,n){C(this,t,e,!1,n)},i.prototype.fill=function(t,e,n){if(t=t||0,e=e||0,n=n||this.length,"string"==typeof t&&(t=t.charCodeAt(0)),j("number"==typeof t&&!isNaN(t),"value is not a number"),j(e<=n,"end < start"),n!==e&&0!==this.length){j(0<=e&&e<this.length,"start out of bounds"),j(0<=n&&n<=this.length,"end out of bounds");for(var r=e;r<n;r++)this[r]=t}},i.prototype.inspect=function(){for(var t=[],e=this.length,r=0;r<e;r++)if(t[r]=A(this[r]),r===n.INSPECT_MAX_BYTES){t[r+1]="...";break}return"<Buffer "+t.join(" ")+">"},i.prototype.toArrayBuffer=function(){if("undefined"==typeof Uint8Array)throw new Error("Buffer.toArrayBuffer not supported in this browser");if(i._useTypedArrays)return new i(this).buffer;for(var t=new Uint8Array(this.length),e=0,n=t.length;e<n;e+=1)t[e]=this[e];return t.buffer};var S=i.prototype;function T(t,e,n){return"number"!=typeof t?n:e<=(t=~~t)?e:0<=t||0<=(t+=e)?t:0}function O(t){return(t=~~Math.ceil(+t))<0?0:t}function I(t){return(Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)})(t)}function A(t){return t<16?"0"+t.toString(16):t.toString(16)}function M(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(t.charCodeAt(n));else{var i=n;55296<=r&&r<=57343&&n++;for(var o=encodeURIComponent(t.slice(i,n+1)).substr(1).split("%"),a=0;a<o.length;a++)e.push(parseInt(o[a],16))}}return e}function k(t){return h.toByteArray(t)}function P(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);i++)e[i+n]=t[i];return i}function D(t){try{return decodeURIComponent(t)}catch(t){return String.fromCharCode(65533)}}function R(t,e){j("number"==typeof t,"cannot write a non-number as a number"),j(0<=t,"specified a negative value for writing an unsigned value"),j(t<=e,"value is larger than maximum value for type"),j(Math.floor(t)===t,"value has a fractional component")}function L(t,e,n){j("number"==typeof t,"cannot write a non-number as a number"),j(t<=e,"value larger than maximum allowed value"),j(n<=t,"value smaller than minimum allowed value"),j(Math.floor(t)===t,"value has a fractional component")}function N(t,e,n){j("number"==typeof t,"cannot write a non-number as a number"),j(t<=e,"value larger than maximum allowed value"),j(n<=t,"value smaller than minimum allowed value")}function j(t,e){if(!t)throw new Error(e||"Failed assertion")}i._augment=function(t){return t._isBuffer=!0,t._get=t.get,t._set=t.set,t.get=S.get,t.set=S.set,t.write=S.write,t.toString=S.toString,t.toLocaleString=S.toString,t.toJSON=S.toJSON,t.copy=S.copy,t.slice=S.slice,t.readUInt8=S.readUInt8,t.readUInt16LE=S.readUInt16LE,t.readUInt16BE=S.readUInt16BE,t.readUInt32LE=S.readUInt32LE,t.readUInt32BE=S.readUInt32BE,t.readInt8=S.readInt8,t.readInt16LE=S.readInt16LE,t.readInt16BE=S.readInt16BE,t.readInt32LE=S.readInt32LE,t.readInt32BE=S.readInt32BE,t.readFloatLE=S.readFloatLE,t.readFloatBE=S.readFloatBE,t.readDoubleLE=S.readDoubleLE,t.readDoubleBE=S.readDoubleBE,t.writeUInt8=S.writeUInt8,t.writeUInt16LE=S.writeUInt16LE,t.writeUInt16BE=S.writeUInt16BE,t.writeUInt32LE=S.writeUInt32LE,t.writeUInt32BE=S.writeUInt32BE,t.writeInt8=S.writeInt8,t.writeInt16LE=S.writeInt16LE,t.writeInt16BE=S.writeInt16BE,t.writeInt32LE=S.writeInt32LE,t.writeInt32BE=S.writeInt32BE,t.writeFloatLE=S.writeFloatLE,t.writeFloatBE=S.writeFloatBE,t.writeDoubleLE=S.writeDoubleLE,t.writeDoubleBE=S.writeDoubleBE,t.fill=S.fill,t.inspect=S.inspect,t.toArrayBuffer=S.toArrayBuffer,t}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:11,lYpoI2:10}],4:[function(t,e,n){(function(n,r,i,o,a,s,l,c,u){var h=new(i=t("buffer").Buffer)(4);h.fill(0),e.exports={hash:function(t,e,n,r){return i.isBuffer(t)||(t=new i(t)),function(t,e,n){for(var r=new i(e),o=n?r.writeInt32BE:r.writeInt32LE,a=0;a<t.length;a++)o.call(r,t[a],4*a,!0);return r}(e(function(t,e){var n;t.length%4!=0&&(n=t.length+(4-t.length%4),t=i.concat([t,h],n));for(var r=[],o=e?t.readInt32BE:t.readInt32LE,a=0;a<t.length;a+=4)r.push(o.call(t,a));return r}(t,r),8*t.length),n,r)}}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:10}],5:[function(t,e,n){(function(e,r,i,o,a,s,l,c,u){i=t("buffer").Buffer;var h=t("./sha"),d=t("./sha256"),p=t("./rng"),f={sha1:h,sha256:d,md5:t("./md5")},m=64,g=new i(m);function y(t,e){var n=f[t=t||"sha1"],r=[];return n||v("algorithm:",t,"is not yet supported"),{update:function(t){return i.isBuffer(t)||(t=new i(t)),r.push(t),t.length,this},digest:function(t){var o=i.concat(r),a=e?function(t,e,n){i.isBuffer(e)||(e=new i(e)),i.isBuffer(n)||(n=new i(n)),e.length>m?e=t(e):e.length<m&&(e=i.concat([e,g],m));for(var r=new i(m),o=new i(m),a=0;a<m;a++)r[a]=54^e[a],o[a]=92^e[a];var s=t(i.concat([r,n]));return t(i.concat([o,s]))}(n,e,o):n(o);return r=null,t?a.toString(t):a}}}function v(){var t=[].slice.call(arguments).join(" ");throw new Error([t,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}g.fill(0),n.createHash=function(t){return y(t)},n.createHmac=y,n.randomBytes=function(t,e){if(!e||!e.call)return new i(p(t));try{e.call(this,void 0,new i(p(t)))}catch(t){e(t)}},function(t,e){for(var n in t)e(t[n])}(["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],(function(t){n[t]=function(){v("sorry,",t,"is not implemented yet")}}))}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:10}],6:[function(t,e,n){(function(n,r,i,o,a,s,l,c,u){var h=t("./helpers");function d(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var n=1732584193,r=-271733879,i=-1732584194,o=271733878,a=0;a<t.length;a+=16){var s=n,l=r,c=i,u=o;n=f(n,r,i,o,t[a+0],7,-680876936),o=f(o,n,r,i,t[a+1],12,-389564586),i=f(i,o,n,r,t[a+2],17,606105819),r=f(r,i,o,n,t[a+3],22,-1044525330),n=f(n,r,i,o,t[a+4],7,-176418897),o=f(o,n,r,i,t[a+5],12,1200080426),i=f(i,o,n,r,t[a+6],17,-1473231341),r=f(r,i,o,n,t[a+7],22,-45705983),n=f(n,r,i,o,t[a+8],7,1770035416),o=f(o,n,r,i,t[a+9],12,-1958414417),i=f(i,o,n,r,t[a+10],17,-42063),r=f(r,i,o,n,t[a+11],22,-1990404162),n=f(n,r,i,o,t[a+12],7,1804603682),o=f(o,n,r,i,t[a+13],12,-40341101),i=f(i,o,n,r,t[a+14],17,-1502002290),n=m(n,r=f(r,i,o,n,t[a+15],22,1236535329),i,o,t[a+1],5,-165796510),o=m(o,n,r,i,t[a+6],9,-1069501632),i=m(i,o,n,r,t[a+11],14,643717713),r=m(r,i,o,n,t[a+0],20,-373897302),n=m(n,r,i,o,t[a+5],5,-701558691),o=m(o,n,r,i,t[a+10],9,38016083),i=m(i,o,n,r,t[a+15],14,-660478335),r=m(r,i,o,n,t[a+4],20,-405537848),n=m(n,r,i,o,t[a+9],5,568446438),o=m(o,n,r,i,t[a+14],9,-1019803690),i=m(i,o,n,r,t[a+3],14,-187363961),r=m(r,i,o,n,t[a+8],20,1163531501),n=m(n,r,i,o,t[a+13],5,-1444681467),o=m(o,n,r,i,t[a+2],9,-51403784),i=m(i,o,n,r,t[a+7],14,1735328473),n=g(n,r=m(r,i,o,n,t[a+12],20,-1926607734),i,o,t[a+5],4,-378558),o=g(o,n,r,i,t[a+8],11,-2022574463),i=g(i,o,n,r,t[a+11],16,1839030562),r=g(r,i,o,n,t[a+14],23,-35309556),n=g(n,r,i,o,t[a+1],4,-1530992060),o=g(o,n,r,i,t[a+4],11,1272893353),i=g(i,o,n,r,t[a+7],16,-155497632),r=g(r,i,o,n,t[a+10],23,-1094730640),n=g(n,r,i,o,t[a+13],4,681279174),o=g(o,n,r,i,t[a+0],11,-358537222),i=g(i,o,n,r,t[a+3],16,-722521979),r=g(r,i,o,n,t[a+6],23,76029189),n=g(n,r,i,o,t[a+9],4,-640364487),o=g(o,n,r,i,t[a+12],11,-421815835),i=g(i,o,n,r,t[a+15],16,530742520),n=y(n,r=g(r,i,o,n,t[a+2],23,-995338651),i,o,t[a+0],6,-198630844),o=y(o,n,r,i,t[a+7],10,1126891415),i=y(i,o,n,r,t[a+14],15,-1416354905),r=y(r,i,o,n,t[a+5],21,-57434055),n=y(n,r,i,o,t[a+12],6,1700485571),o=y(o,n,r,i,t[a+3],10,-1894986606),i=y(i,o,n,r,t[a+10],15,-1051523),r=y(r,i,o,n,t[a+1],21,-2054922799),n=y(n,r,i,o,t[a+8],6,1873313359),o=y(o,n,r,i,t[a+15],10,-30611744),i=y(i,o,n,r,t[a+6],15,-1560198380),r=y(r,i,o,n,t[a+13],21,1309151649),n=y(n,r,i,o,t[a+4],6,-145523070),o=y(o,n,r,i,t[a+11],10,-1120210379),i=y(i,o,n,r,t[a+2],15,718787259),r=y(r,i,o,n,t[a+9],21,-343485551),n=v(n,s),r=v(r,l),i=v(i,c),o=v(o,u)}return Array(n,r,i,o)}function p(t,e,n,r,i,o){return v((a=v(v(e,t),v(r,o)))<<(s=i)|a>>>32-s,n);var a,s}function f(t,e,n,r,i,o,a){return p(e&n|~e&r,t,e,i,o,a)}function m(t,e,n,r,i,o,a){return p(e&r|n&~r,t,e,i,o,a)}function g(t,e,n,r,i,o,a){return p(e^n^r,t,e,i,o,a)}function y(t,e,n,r,i,o,a){return p(n^(e|~r),t,e,i,o,a)}function v(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}e.exports=function(t){return h.hash(t,d,16)}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:10}],7:[function(t,e,n){(function(t,n,r,i,o,a,s,l,c){var u;u=function(t){for(var e,n=new Array(t),r=0;r<t;r++)0==(3&r)&&(e=4294967296*Math.random()),n[r]=e>>>((3&r)<<3)&255;return n},e.exports=u}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:10}],8:[function(t,e,n){(function(n,r,i,o,a,s,l,c,u){var h=t("./helpers");function d(t,e){t[e>>5]|=128<<24-e%32,t[15+(e+64>>9<<4)]=e;for(var n,r,i,o,a,s=Array(80),l=1732584193,c=-271733879,u=-1732584194,h=271733878,d=-1009589776,m=0;m<t.length;m+=16){for(var g=l,y=c,v=u,_=h,b=d,x=0;x<80;x++){s[x]=x<16?t[m+x]:f(s[x-3]^s[x-8]^s[x-14]^s[x-16],1);var w=p(p(f(l,5),(i=c,o=u,a=h,(r=x)<20?i&o|~i&a:!(r<40)&&r<60?i&o|i&a|o&a:i^o^a)),p(p(d,s[x]),(n=x)<20?1518500249:n<40?1859775393:n<60?-1894007588:-899497514));d=h,h=u,u=f(c,30),c=l,l=w}l=p(l,g),c=p(c,y),u=p(u,v),h=p(h,_),d=p(d,b)}return Array(l,c,u,h,d)}function p(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function f(t,e){return t<<e|t>>>32-e}e.exports=function(t){return h.hash(t,d,20,!0)}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:10}],9:[function(t,e,n){(function(n,r,i,o,a,s,l,c,u){function h(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function d(t,e){return t>>>e|t<<32-e}function p(t,e){var n,r,i,o,a,s,l,c,u,p,f=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),m=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),g=new Array(64);t[e>>5]|=128<<24-e%32,t[15+(e+64>>9<<4)]=e;for(var y,v,_,b,x,w,E,C,S=0;S<t.length;S+=16){n=m[0],r=m[1],i=m[2],o=m[3],a=m[4],s=m[5],l=m[6],c=m[7];for(var T=0;T<64;T++)g[T]=T<16?t[T+S]:h(h(h(d(C=g[T-2],17)^d(C,19)^C>>>10,g[T-7]),d(E=g[T-15],7)^d(E,18)^E>>>3),g[T-16]),u=h(h(h(h(c,d(w=a,6)^d(w,11)^d(w,25)),(x=a)&s^~x&l),f[T]),g[T]),p=h(d(b=n,2)^d(b,13)^d(b,22),(y=n)&(v=r)^y&(_=i)^v&_),c=l,l=s,s=a,a=h(o,u),o=i,i=r,r=n,n=h(u,p);m[0]=h(n,m[0]),m[1]=h(r,m[1]),m[2]=h(i,m[2]),m[3]=h(o,m[3]),m[4]=h(a,m[4]),m[5]=h(s,m[5]),m[6]=h(l,m[6]),m[7]=h(c,m[7])}return m}var f=t("./helpers");e.exports=function(t){return f.hash(t,p,32,!0)}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:10}],10:[function(t,e,n){(function(t,n,r,i,o,a,s,l,c){function u(){}(t=e.exports={}).nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",(function(t){var e=t.source;e!==window&&null!==e||"process-tick"!==t.data||(t.stopPropagation(),0<n.length&&n.shift()())}),!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),t.title="browser",t.browser=!0,t.env={},t.argv=[],t.on=u,t.addListener=u,t.once=u,t.off=u,t.removeListener=u,t.removeAllListeners=u,t.emit=u,t.binding=function(t){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(t){throw new Error("process.chdir is not supported")}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:10}],11:[function(t,e,n){(function(t,e,r,i,o,a,s,l,c){n.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,c=l>>1,u=-7,h=n?i-1:0,d=n?-1:1,p=t[e+h];for(h+=d,o=p&(1<<-u)-1,p>>=-u,u+=s;0<u;o=256*o+t[e+h],h+=d,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;0<u;a=256*a+t[e+h],h+=d,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=c}return(p?-1:1)*a*Math.pow(2,o-r)},n.write=function(t,e,n,r,i,o){var a,s,l,c=8*o-i-1,u=(1<<c)-1,h=u>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,f=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),2<=(e+=1<=a+h?d/l:d*Math.pow(2,1-h))*l&&(a++,l/=2),u<=a+h?(s=0,a=u):1<=a+h?(s=(e*l-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));8<=i;t[n+p]=255&s,p+=f,s/=256,i-=8);for(a=a<<i|s,c+=i;0<c;t[n+p]=255&a,p+=f,a/=256,c-=8);t[n+p-f]|=128*m}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/ieee754/index.js","/node_modules/ieee754")},{buffer:3,lYpoI2:10}]},{},[1])(1)},function(t,e,n){var r=n(100),i=n(146),o=n(239),a=n(232);t.exports=function(t,e){if(null==t)return{};var n=r(a(t),(function(t){return[t]}));return e=i(e),o(t,n,(function(t,n){return e(t,n[0])}))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i}));var r=42,i=256},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a}));var r=n(68),i=n(19);function o(t,e,n,o,a,s,l){for(var c,u,h,d,p,f,m,g=a[s+1],y=[],v=0,_=n.length;v<_;++v){var b=n[v];for(d=t[b-o],f=t[b-o+1],c=e;c<b;c+=o)p=t[c],m=t[c+1],(g<=f&&m<=g||f<=g&&g<=m)&&(h=(g-f)/(m-f)*(p-d)+d,y.push(h)),d=p,f=m}var x=NaN,w=-1/0;for(y.sort(i.f),d=y[0],c=1,u=y.length;c<u;++c){p=y[c];var E=Math.abs(p-d);E>w&&(h=(d+p)/2,Object(r.c)(t,e,n,o,h,g)&&(x=h,w=E)),d=p}return isNaN(x)&&(x=a[s]),l?(l.push(x,g,w),l):[x,g,w]}function a(t,e,n,r,i){for(var a=[],s=0,l=n.length;s<l;++s){var c=n[s];a=o(t,e,c,r,i,2*s,a),e=c[c.length-1]}return a}},function(t,e,n){"use strict";var r,i=n(7),o=n(53),a=n(4),s=n(58),l=n(10),c=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(t){function e(e,n){var r=t.call(this)||this;return r.setCoordinates(e,n),r}return c(e,t),e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,r){var i=this.flatCoordinates,o=Object(l.g)(t,e,i[0],i[1]);if(o<r){for(var a=this.stride,s=0;s<a;++s)n[s]=i[s];return n.length=a,o}return r},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return Object(a.m)(this.flatCoordinates,t)},e.prototype.getType=function(){return i.a.POINT},e.prototype.intersectsExtent=function(t){return Object(a.h)(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(s.a)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(o.a);e.a=u},function(t,e,n){"use strict";e.a={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"}},function(t,e,n){"use strict";var r=n(79),i=n(93),o=n(16),a=n(10),s=n(4),l=n(49),c=n(19),u=n(32),h=[0,0,0],d=function(){function t(t){var e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,Object(o.a)(Object(c.d)(this.resolutions_,(function(t,e){return e-t}),!0),17),!t.origins)for(var n=0,a=this.resolutions_.length-1;n<a;++n)if(e){if(this.resolutions_[n]/this.resolutions_[n+1]!==e){e=void 0;break}}else e=this.resolutions_[n]/this.resolutions_[n+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,Object(o.a)(this.origins_.length==this.resolutions_.length,20));var l=t.extent;void 0===l||this.origin_||this.origins_||(this.origin_=Object(s.z)(l)),Object(o.a)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,Object(o.a)(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:i.b,Object(o.a)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==l?l:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map((function(t,e){var n=new r.b(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(l){var i=this.getTileRangeForExtentAndZ(l,e);n.minX=Math.max(i.minX,n.minX),n.maxX=Math.min(i.maxX,n.maxX),n.minY=Math.max(i.minY,n.minY),n.maxY=Math.min(i.maxY,n.maxY)}return n}),this):l&&this.calculateTileRanges_(l)}return t.prototype.forEachTileCoord=function(t,e,n){for(var r=this.getTileRangeForExtentAndZ(t,e),i=r.minX,o=r.maxX;i<=o;++i)for(var a=r.minY,s=r.maxY;a<=s;++a)n([e,i,a])},t.prototype.forEachTileCoordParentTileRange=function(t,e,n,i){var o,a,s,l=null,c=t[0]-1;for(2===this.zoomFactor_?(a=t[1],s=t[2]):l=this.getTileCoordExtent(t,i);c>=this.minZoom;){if(2===this.zoomFactor_?(a=Math.floor(a/2),s=Math.floor(s/2),o=Object(r.a)(a,a,s,s,n)):o=this.getTileRangeForExtentAndZ(l,c,n),e(c,o))return!0;--c}return!1},t.prototype.getExtent=function(){return this.extent_},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.getMinZoom=function(){return this.minZoom},t.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},t.prototype.getResolution=function(t){return this.resolutions_[t]},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getTileCoordChildTileRange=function(t,e,n){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var i=2*t[1],o=2*t[2];return Object(r.a)(i,i+1,o,o+1,e)}var a=this.getTileCoordExtent(t,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t[0]+1,e)}return null},t.prototype.getTileRangeForTileCoordAndZ=function(t,e,n){if(e>this.maxZoom||e<this.minZoom)return null;var i=t[0],o=t[1],a=t[2];if(e===i)return Object(r.a)(o,a,o,a,n);if(this.zoomFactor_){var s=Math.pow(this.zoomFactor_,e-i),l=Math.floor(o*s),c=Math.floor(a*s);if(e<i)return Object(r.a)(l,l,c,c,n);var u=Math.floor(s*(o+1))-1,h=Math.floor(s*(a+1))-1;return Object(r.a)(l,u,c,h,n)}var d=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(d,e,n)},t.prototype.getTileRangeExtent=function(t,e,n){var r=this.getOrigin(t),i=this.getResolution(t),o=Object(u.c)(this.getTileSize(t),this.tmpSize_),a=r[0]+e.minX*o[0]*i,l=r[0]+(e.maxX+1)*o[0]*i,c=r[1]+e.minY*o[1]*i,h=r[1]+(e.maxY+1)*o[1]*i;return Object(s.k)(a,c,l,h,n)},t.prototype.getTileRangeForExtentAndZ=function(t,e,n){var i=h;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,i);var o=i[1],a=i[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,i),Object(r.a)(o,i[1],a,i[2],n)},t.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),n=this.getResolution(t[0]),r=Object(u.c)(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*r[0]*n,e[1]-(t[2]+.5)*r[1]*n]},t.prototype.getTileCoordExtent=function(t,e){var n=this.getOrigin(t[0]),r=this.getResolution(t[0]),i=Object(u.c)(this.getTileSize(t[0]),this.tmpSize_),o=n[0]+t[1]*i[0]*r,a=n[1]-(t[2]+1)*i[1]*r,l=o+i[0]*r,c=a+i[1]*r;return Object(s.k)(o,a,l,c,e)},t.prototype.getTileCoordForCoordAndResolution=function(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,n)},t.prototype.getTileCoordForXYAndResolution_=function(t,e,n,r,i){var o=this.getZForResolution(n),s=n/this.getResolution(o),c=this.getOrigin(o),h=Object(u.c)(this.getTileSize(o),this.tmpSize_),d=s*(t-c[0])/n/h[0],p=s*(c[1]-e)/n/h[1];return r?(d=Object(a.a)(d,5)-1,p=Object(a.a)(p,5)-1):(d=Object(a.d)(d,5),p=Object(a.d)(p,5)),Object(l.a)(o,d,p,i)},t.prototype.getTileCoordForXYAndZ_=function(t,e,n,r,i){var o=this.getOrigin(n),s=this.getResolution(n),c=Object(u.c)(this.getTileSize(n),this.tmpSize_),h=(t-o[0])/s/c[0],d=(o[1]-e)/s/c[1];return r?(h=Object(a.a)(h,5)-1,d=Object(a.a)(d,5)-1):(h=Object(a.d)(h,5),d=Object(a.d)(d,5)),Object(l.a)(n,h,d,i)},t.prototype.getTileCoordForCoordAndZ=function(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n)},t.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},t.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},t.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null},t.prototype.getZForResolution=function(t,e){var n=Object(c.e)(this.resolutions_,t,e||0);return Object(a.b)(n,this.minZoom,this.maxZoom)},t.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,n=new Array(e),r=this.minZoom;r<e;++r)n[r]=this.getTileRangeForExtentAndZ(t,r);this.fullTileRanges_=n},t}();e.a=d},,function(t,e,n){var r=n(73).Symbol;t.exports=r},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},function(t,e,n){var r=n(99),i=n(299),o=n(300),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?i(t):o(t)}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){var r=n(143),i=n(224),o=n(225);t.exports=function(t,e){return o(i(t,e,r),t+"")}},function(t,e){t.exports=function(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";t.exports=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){if(e.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(e)){if((r=e.length)!=n.length)return!1;for(i=r;0!=i--;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((r=(o=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!=i--;){var a=o[i];if(("_owner"!==a||!e.$$typeof)&&!t(e[a],n[a]))return!1}return!0}return e!=e&&n!=n}},function(t,e,n){"use strict";var r=function(){function t(){this.disposed=!1}return t.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}();e.a=r},function(t,e,n){"use strict";function r(t,e,n,r){for(var i=0,o=t[n-r],a=t[n-r+1];e<n;e+=r){var s=t[e],l=t[e+1];i+=a*s-o*l,o=s,a=l}return i/2}function i(t,e,n,i){for(var o=0,a=0,s=n.length;a<s;++a){var l=n[a];o+=r(t,e,l,i),e=l}return o}function o(t,e,n,r){for(var o=0,a=0,s=n.length;a<s;++a){var l=n[a];o+=i(t,e,l,r),e=l[l.length-1]}return o}n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o}))},function(t,e,n){"use strict";var r=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0})},t.prototype.getColor=function(){return this.color_},t.prototype.setColor=function(t){this.color_=t},t}();e.a=r},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(62),i=function(){function t(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return t.prototype.clear=function(){this.cache_={},this.cacheSize_=0},t.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},t.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var e in this.cache_){var n=this.cache_[e];0!=(3&t++)||n.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}},t.prototype.get=function(t,e,n){var r=o(t,e,n);return r in this.cache_?this.cache_[r]:null},t.prototype.set=function(t,e,n,r){var i=o(t,e,n);this.cache_[i]=r,++this.cacheSize_},t.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},t}();function o(t,e,n){return e+":"+t+":"+(n?Object(r.b)(n):"null")}var a=new i},function(t,e,n){"use strict";e.a={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"}},function(t){t.exports=JSON.parse('{"dataset":"default"}')},,function(t,e,n){var r=n(298);t.exports=function(t){return null==t?"":r(t)}},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){var r=n(128);t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},function(t,e,n){var r=n(377),i=n(64),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(t){return i(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=l},function(t,e,n){var r=n(90),i=n(64);t.exports=function(t){return i(t)&&r(t)}},function(t,e,n){(function(t){var r=n(73),i=n(378),o=e&&!e.nodeType&&e,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===o?r.Buffer:void 0,l=(s?s.isBuffer:void 0)||i;t.exports=l}).call(this,n(129)(t))},function(t,e,n){var r=n(178),i=n(139);t.exports=function(t,e,n,o){var a=!n;n||(n={});for(var s=-1,l=e.length;++s<l;){var c=e[s],u=o?o(n[c],t[c],c,n,t):void 0;void 0===u&&(u=t[c]),a?i(n,c,u):r(n,c,u)}return n}},function(t,e,n){var r=n(223),i=n(383),o=n(90);t.exports=function(t){return o(t)?r(t,!0):i(t)}},function(t,e,n){var r=n(223),i=n(227),o=n(90);t.exports=function(t){return o(t)?r(t):i(t)}},function(t,e,n){var r=n(402),i=n(173),o=n(403),a=n(233),s=n(404),l=n(101),c=n(212),u=c(r),h=c(i),d=c(o),p=c(a),f=c(s),m=l;(r&&"[object DataView]"!=m(new r(new ArrayBuffer(1)))||i&&"[object Map]"!=m(new i)||o&&"[object Promise]"!=m(o.resolve())||a&&"[object Set]"!=m(new a)||s&&"[object WeakMap]"!=m(new s))&&(m=function(t){var e=l(t),n="[object Object]"==e?t.constructor:void 0,r=n?c(n):"";if(r)switch(r){case u:return"[object DataView]";case h:return"[object Map]";case d:return"[object Promise]";case p:return"[object Set]";case f:return"[object WeakMap]"}return e}),t.exports=m},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));n(7);var r=n(10);function i(t,e,n){var i=n||6371008.8,o=Object(r.j)(t[1]),a=Object(r.j)(e[1]),s=(a-o)/2,l=Object(r.j)(e[0]-t[0])/2,c=Math.sin(s)*Math.sin(s)+Math.sin(l)*Math.sin(l)*Math.cos(o)*Math.cos(a);return 2*i*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))}function o(t,e,n,i){var o=i||6371008.8,a=Object(r.j)(t[1]),s=Object(r.j)(t[0]),l=e/o,c=Math.asin(Math.sin(a)*Math.cos(l)+Math.cos(a)*Math.sin(l)*Math.cos(n)),u=s+Math.atan2(Math.sin(n)*Math.sin(l)*Math.cos(a),Math.cos(l)-Math.sin(a)*Math.sin(c));return[Object(r.i)(u),Object(r.i)(c)]}},function(t,e,n){var r=n(147),i=n(146),o=n(103),a=n(181),s=n(117),l=n(448),c=o((function(t){var e=l(t);return s(e)&&(e=void 0),a(r(t,1,s,!0),i(e,2))}));t.exports=c},function(t,e,n){var r=n(394);t.exports=function(t){return r(t,5)}},function(t,e){var n="undefined"!=typeof Element,r="function"==typeof Map,i="function"==typeof Set,o="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;t.exports=function(t,e){try{return function t(e,a){if(e===a)return!0;if(e&&a&&"object"==typeof e&&"object"==typeof a){if(e.constructor!==a.constructor)return!1;var s,l,c,u;if(Array.isArray(e)){if((s=e.length)!=a.length)return!1;for(l=s;0!=l--;)if(!t(e[l],a[l]))return!1;return!0}if(r&&e instanceof Map&&a instanceof Map){if(e.size!==a.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!a.has(l.value[0]))return!1;for(u=e.entries();!(l=u.next()).done;)if(!t(l.value[1],a.get(l.value[0])))return!1;return!0}if(i&&e instanceof Set&&a instanceof Set){if(e.size!==a.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!a.has(l.value[0]))return!1;return!0}if(o&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(a)){if((s=e.length)!=a.length)return!1;for(l=s;0!=l--;)if(e[l]!==a[l])return!1;return!0}if(e.constructor===RegExp)return e.source===a.source&&e.flags===a.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===a.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===a.toString();if((s=(c=Object.keys(e)).length)!==Object.keys(a).length)return!1;for(l=s;0!=l--;)if(!Object.prototype.hasOwnProperty.call(a,c[l]))return!1;if(n&&e instanceof Element)return!1;for(l=s;0!=l--;)if(("_owner"!==c[l]&&"__v"!==c[l]&&"__o"!==c[l]||!e.$$typeof)&&!t(e[c[l]],a[c[l]]))return!1;return!0}return e!=e&&a!=a}(t,e)}catch(t){if((t.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw t}}},function(t,e,n){"use strict";var r=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this.color_},t.prototype.getLineCap=function(){return this.lineCap_},t.prototype.getLineDash=function(){return this.lineDash_},t.prototype.getLineDashOffset=function(){return this.lineDashOffset_},t.prototype.getLineJoin=function(){return this.lineJoin_},t.prototype.getMiterLimit=function(){return this.miterLimit_},t.prototype.getWidth=function(){return this.width_},t.prototype.setColor=function(t){this.color_=t},t.prototype.setLineCap=function(t){this.lineCap_=t},t.prototype.setLineDash=function(t){this.lineDash_=t},t.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t},t.prototype.setLineJoin=function(t){this.lineJoin_=t},t.prototype.setMiterLimit=function(t){this.miterLimit_=t},t.prototype.setWidth=function(t){this.width_=t},t}();e.a=r},function(t,e,n){var r=n(101),i=n(64);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";(function(e){var r=n(61),i=n(325),o=n(206),a={"Content-Type":"application/x-www-form-urlencoded"};function s(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var l,c={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==e&&"[object process]"===Object.prototype.toString.call(e))&&(l=n(207)),l),transformRequest:[function(t,e){return i(e,"Accept"),i(e,"Content-Type"),r.isFormData(t)||r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t)?t:r.isArrayBufferView(t)?t.buffer:r.isURLSearchParams(t)?(s(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):r.isObject(t)||e&&"application/json"===e["Content-Type"]?(s(e,"application/json"),function(t,e,n){if(r.isString(t))try{return(e||JSON.parse)(t),r.trim(t)}catch(t){if("SyntaxError"!==t.name)throw t}return(n||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){var e=this.transitional||c.transitional,n=e&&e.silentJSONParsing,i=e&&e.forcedJSONParsing,a=!n&&"json"===this.responseType;if(a||i&&r.isString(t)&&t.length)try{return JSON.parse(t)}catch(t){if(a){if("SyntaxError"===t.name)throw o(t,this,"E_JSON_PARSE");throw t}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(t){c.headers[t]={}})),r.forEach(["post","put","patch"],(function(t){c.headers[t]=r.merge(a)})),t.exports=c}).call(this,n(205))},function(t,e,n){"use strict";function r(t){this.message=t}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,t.exports=r},function(t,e,n){var r=n(133),i=n(115);t.exports=function(t,e){for(var n=0,o=(e=r(e,t)).length;null!=t&&n<o;)t=t[i(e[n++])];return n&&n==o?t:void 0}},function(t,e,n){var r=n(51),i=n(170),o=n(344),a=n(113);t.exports=function(t,e){return r(t)?t:i(t,e)?[t]:o(a(t))}},function(t,e,n){var r=n(89)(Object,"create");t.exports=r},function(t,e,n){var r=n(358),i=n(359),o=n(360),a=n(361),s=n(362);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,t.exports=l},function(t,e,n){var r=n(114);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){var r=n(364);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e,n){var r=n(135),i=n(369),o=n(370),a=n(371),s=n(372),l=n(373);function c(t){var e=this.__data__=new r(t);this.size=e.size}c.prototype.clear=i,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=s,c.prototype.set=l,t.exports=c},function(t,e,n){var r=n(214);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){var r=n(380),i=n(102),o=n(177),a=o&&o.isTypedArray,s=a?i(a):r;t.exports=s},function(t,e){var n=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&n.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e){t.exports=function(t){return t}},function(t,e,n){var r=n(171),i=n(414),o=n(415);function a(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,t.exports=a},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,n){var r=n(422),i=n(430),o=n(143),a=n(51),s=n(433);t.exports=function(t){return"function"==typeof t?t:null==t?o:"object"==typeof t?a(t)?i(t[0],t[1]):r(t):s(t)}},function(t,e,n){var r=n(180),i=n(447);t.exports=function t(e,n,o,a,s){var l=-1,c=e.length;for(o||(o=i),s||(s=[]);++l<c;){var u=e[l];n>0&&o(u)?n>1?t(u,n-1,o,a,s):r(s,u):a||(s[s.length]=u)}return s}},function(t,e,n){
/*! @license DOMPurify 2.3.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.4/LICENSE */
t.exports=function(){"use strict";var t=Object.hasOwnProperty,e=Object.setPrototypeOf,n=Object.isFrozen,r=Object.getPrototypeOf,i=Object.getOwnPropertyDescriptor,o=Object.freeze,a=Object.seal,s=Object.create,l="undefined"!=typeof Reflect&&Reflect,c=l.apply,u=l.construct;c||(c=function(t,e,n){return t.apply(e,n)}),o||(o=function(t){return t}),a||(a=function(t){return t}),u||(u=function(t,e){return new(Function.prototype.bind.apply(t,[null].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(e))))});var h,d=w(Array.prototype.forEach),p=w(Array.prototype.pop),f=w(Array.prototype.push),m=w(String.prototype.toLowerCase),g=w(String.prototype.match),y=w(String.prototype.replace),v=w(String.prototype.indexOf),_=w(String.prototype.trim),b=w(RegExp.prototype.test),x=(h=TypeError,function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return u(h,e)});function w(t){return function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return c(t,e,r)}}function E(t,r){e&&e(t,null);for(var i=r.length;i--;){var o=r[i];if("string"==typeof o){var a=m(o);a!==o&&(n(r)||(r[i]=a),o=a)}t[o]=!0}return t}function C(e){var n=s(null),r=void 0;for(r in e)c(t,e,[r])&&(n[r]=e[r]);return n}function S(t,e){for(;null!==t;){var n=i(t,e);if(n){if(n.get)return w(n.get);if("function"==typeof n.value)return w(n.value)}t=r(t)}return function(t){return console.warn("fallback value for",t),null}}var T=o(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),O=o(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),I=o(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),A=o(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),M=o(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),k=o(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),P=o(["#text"]),D=o(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),R=o(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),L=o(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),N=o(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),j=a(/\{\{[\s\S]*|[\s\S]*\}\}/gm),F=a(/<%[\s\S]*|[\s\S]*%>/gm),z=a(/^data-[\-\w.\u00B7-\uFFFF]/),B=a(/^aria-[\-\w]+$/),U=a(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),G=a(/^(?:\w+script|data):/i),V=a(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function H(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var W=function(){return"undefined"==typeof window?null:window},Z=function(t,e){if("object"!==(void 0===t?"undefined":q(t))||"function"!=typeof t.createPolicy)return null;var n=null;e.currentScript&&e.currentScript.hasAttribute("data-tt-policy-suffix")&&(n=e.currentScript.getAttribute("data-tt-policy-suffix"));var r="dompurify"+(n?"#"+n:"");try{return t.createPolicy(r,{createHTML:function(t){return t}})}catch(t){return console.warn("TrustedTypes policy "+r+" could not be created."),null}};return function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W(),n=function(e){return t(e)};if(n.version="2.3.4",n.removed=[],!e||!e.document||9!==e.document.nodeType)return n.isSupported=!1,n;var r=e.document,i=e.document,a=e.DocumentFragment,s=e.HTMLTemplateElement,l=e.Node,c=e.Element,u=e.NodeFilter,h=e.NamedNodeMap,w=void 0===h?e.NamedNodeMap||e.MozNamedAttrMap:h,$=e.HTMLFormElement,K=e.DOMParser,Y=e.trustedTypes,X=c.prototype,J=S(X,"cloneNode"),Q=S(X,"nextSibling"),tt=S(X,"childNodes"),et=S(X,"parentNode");if("function"==typeof s){var nt=i.createElement("template");nt.content&&nt.content.ownerDocument&&(i=nt.content.ownerDocument)}var rt=Z(Y,r),it=rt&&Nt?rt.createHTML(""):"",ot=i,at=ot.implementation,st=ot.createNodeIterator,lt=ot.createDocumentFragment,ct=ot.getElementsByTagName,ut=r.importNode,ht={};try{ht=C(i).documentMode?i.documentMode:{}}catch(t){}var dt={};n.isSupported="function"==typeof et&&at&&void 0!==at.createHTMLDocument&&9!==ht;var pt=j,ft=F,mt=z,gt=B,yt=G,vt=V,_t=U,bt=null,xt=E({},[].concat(H(T),H(O),H(I),H(M),H(P))),wt=null,Et=E({},[].concat(H(D),H(R),H(L),H(N))),Ct=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),St=null,Tt=null,Ot=!0,It=!0,At=!1,Mt=!1,kt=!1,Pt=!1,Dt=!1,Rt=!1,Lt=!1,Nt=!1,jt=!0,Ft=!0,zt=!1,Bt={},Ut=null,Gt=E({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Vt=null,qt=E({},["audio","video","img","source","image","track"]),Ht=null,Wt=E({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Zt="http://www.w3.org/1998/Math/MathML",$t="http://www.w3.org/2000/svg",Kt="http://www.w3.org/1999/xhtml",Yt=Kt,Xt=!1,Jt=void 0,Qt=["application/xhtml+xml","text/html"],te="text/html",ee=void 0,ne=null,re=i.createElement("form"),ie=function(t){return t instanceof RegExp||t instanceof Function},oe=function(t){ne&&ne===t||(t&&"object"===(void 0===t?"undefined":q(t))||(t={}),t=C(t),bt="ALLOWED_TAGS"in t?E({},t.ALLOWED_TAGS):xt,wt="ALLOWED_ATTR"in t?E({},t.ALLOWED_ATTR):Et,Ht="ADD_URI_SAFE_ATTR"in t?E(C(Wt),t.ADD_URI_SAFE_ATTR):Wt,Vt="ADD_DATA_URI_TAGS"in t?E(C(qt),t.ADD_DATA_URI_TAGS):qt,Ut="FORBID_CONTENTS"in t?E({},t.FORBID_CONTENTS):Gt,St="FORBID_TAGS"in t?E({},t.FORBID_TAGS):{},Tt="FORBID_ATTR"in t?E({},t.FORBID_ATTR):{},Bt="USE_PROFILES"in t&&t.USE_PROFILES,Ot=!1!==t.ALLOW_ARIA_ATTR,It=!1!==t.ALLOW_DATA_ATTR,At=t.ALLOW_UNKNOWN_PROTOCOLS||!1,Mt=t.SAFE_FOR_TEMPLATES||!1,kt=t.WHOLE_DOCUMENT||!1,Rt=t.RETURN_DOM||!1,Lt=t.RETURN_DOM_FRAGMENT||!1,Nt=t.RETURN_TRUSTED_TYPE||!1,Dt=t.FORCE_BODY||!1,jt=!1!==t.SANITIZE_DOM,Ft=!1!==t.KEEP_CONTENT,zt=t.IN_PLACE||!1,_t=t.ALLOWED_URI_REGEXP||_t,Yt=t.NAMESPACE||Kt,t.CUSTOM_ELEMENT_HANDLING&&ie(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ct.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&ie(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ct.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Ct.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Jt=Jt=-1===Qt.indexOf(t.PARSER_MEDIA_TYPE)?te:t.PARSER_MEDIA_TYPE,ee="application/xhtml+xml"===Jt?function(t){return t}:m,Mt&&(It=!1),Lt&&(Rt=!0),Bt&&(bt=E({},[].concat(H(P))),wt=[],!0===Bt.html&&(E(bt,T),E(wt,D)),!0===Bt.svg&&(E(bt,O),E(wt,R),E(wt,N)),!0===Bt.svgFilters&&(E(bt,I),E(wt,R),E(wt,N)),!0===Bt.mathMl&&(E(bt,M),E(wt,L),E(wt,N))),t.ADD_TAGS&&(bt===xt&&(bt=C(bt)),E(bt,t.ADD_TAGS)),t.ADD_ATTR&&(wt===Et&&(wt=C(wt)),E(wt,t.ADD_ATTR)),t.ADD_URI_SAFE_ATTR&&E(Ht,t.ADD_URI_SAFE_ATTR),t.FORBID_CONTENTS&&(Ut===Gt&&(Ut=C(Ut)),E(Ut,t.FORBID_CONTENTS)),Ft&&(bt["#text"]=!0),kt&&E(bt,["html","head","body"]),bt.table&&(E(bt,["tbody"]),delete St.tbody),o&&o(t),ne=t)},ae=E({},["mi","mo","mn","ms","mtext"]),se=E({},["foreignobject","desc","title","annotation-xml"]),le=E({},O);E(le,I),E(le,A);var ce=E({},M);E(ce,k);var ue=function(t){var e=et(t);e&&e.tagName||(e={namespaceURI:Kt,tagName:"template"});var n=m(t.tagName),r=m(e.tagName);if(t.namespaceURI===$t)return e.namespaceURI===Kt?"svg"===n:e.namespaceURI===Zt?"svg"===n&&("annotation-xml"===r||ae[r]):Boolean(le[n]);if(t.namespaceURI===Zt)return e.namespaceURI===Kt?"math"===n:e.namespaceURI===$t?"math"===n&&se[r]:Boolean(ce[n]);if(t.namespaceURI===Kt){if(e.namespaceURI===$t&&!se[r])return!1;if(e.namespaceURI===Zt&&!ae[r])return!1;var i=E({},["title","style","font","a","script"]);return!ce[n]&&(i[n]||!le[n])}return!1},he=function(t){f(n.removed,{element:t});try{t.parentNode.removeChild(t)}catch(e){try{t.outerHTML=it}catch(e){t.remove()}}},de=function(t,e){try{f(n.removed,{attribute:e.getAttributeNode(t),from:e})}catch(t){f(n.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t&&!wt[t])if(Rt||Lt)try{he(e)}catch(t){}else try{e.setAttribute(t,"")}catch(t){}},pe=function(t){var e=void 0,n=void 0;if(Dt)t="<remove></remove>"+t;else{var r=g(t,/^[\r\n\t ]+/);n=r&&r[0]}"application/xhtml+xml"===Jt&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");var o=rt?rt.createHTML(t):t;if(Yt===Kt)try{e=(new K).parseFromString(o,Jt)}catch(t){}if(!e||!e.documentElement){e=at.createDocument(Yt,"template",null);try{e.documentElement.innerHTML=Xt?"":o}catch(t){}}var a=e.body||e.documentElement;return t&&n&&a.insertBefore(i.createTextNode(n),a.childNodes[0]||null),Yt===Kt?ct.call(e,kt?"html":"body")[0]:kt?e.documentElement:a},fe=function(t){return st.call(t.ownerDocument||t,t,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT,null,!1)},me=function(t){return t instanceof $&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof w)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore)},ge=function(t){return"object"===(void 0===l?"undefined":q(l))?t instanceof l:t&&"object"===(void 0===t?"undefined":q(t))&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},ye=function(t,e,r){dt[t]&&d(dt[t],(function(t){t.call(n,e,r,ne)}))},ve=function(t){var e=void 0;if(ye("beforeSanitizeElements",t,null),me(t))return he(t),!0;if(g(t.nodeName,/[\u0080-\uFFFF]/))return he(t),!0;var r=ee(t.nodeName);if(ye("uponSanitizeElement",t,{tagName:r,allowedTags:bt}),!ge(t.firstElementChild)&&(!ge(t.content)||!ge(t.content.firstElementChild))&&b(/<[/\w]/g,t.innerHTML)&&b(/<[/\w]/g,t.textContent))return he(t),!0;if("select"===r&&b(/<template/i,t.innerHTML))return he(t),!0;if(!bt[r]||St[r]){if(Ft&&!Ut[r]){var i=et(t)||t.parentNode,o=tt(t)||t.childNodes;if(o&&i)for(var a=o.length-1;a>=0;--a)i.insertBefore(J(o[a],!0),Q(t))}if(!St[r]&&be(r)){if(Ct.tagNameCheck instanceof RegExp&&b(Ct.tagNameCheck,r))return!1;if(Ct.tagNameCheck instanceof Function&&Ct.tagNameCheck(r))return!1}return he(t),!0}return t instanceof c&&!ue(t)?(he(t),!0):"noscript"!==r&&"noembed"!==r||!b(/<\/no(script|embed)/i,t.innerHTML)?(Mt&&3===t.nodeType&&(e=t.textContent,e=y(e,pt," "),e=y(e,ft," "),t.textContent!==e&&(f(n.removed,{element:t.cloneNode()}),t.textContent=e)),ye("afterSanitizeElements",t,null),!1):(he(t),!0)},_e=function(t,e,n){if(jt&&("id"===e||"name"===e)&&(n in i||n in re))return!1;if(It&&!Tt[e]&&b(mt,e));else if(Ot&&b(gt,e));else if(!wt[e]||Tt[e]){if(!(be(t)&&(Ct.tagNameCheck instanceof RegExp&&b(Ct.tagNameCheck,t)||Ct.tagNameCheck instanceof Function&&Ct.tagNameCheck(t))&&(Ct.attributeNameCheck instanceof RegExp&&b(Ct.attributeNameCheck,e)||Ct.attributeNameCheck instanceof Function&&Ct.attributeNameCheck(e))||"is"===e&&Ct.allowCustomizedBuiltInElements&&(Ct.tagNameCheck instanceof RegExp&&b(Ct.tagNameCheck,n)||Ct.tagNameCheck instanceof Function&&Ct.tagNameCheck(n))))return!1}else if(Ht[e]);else if(b(_t,y(n,vt,"")));else if("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==v(n,"data:")||!Vt[t])if(At&&!b(yt,y(n,vt,"")));else if(n)return!1;return!0},be=function(t){return t.indexOf("-")>0},xe=function(t){var e=void 0,r=void 0,i=void 0,o=void 0;ye("beforeSanitizeAttributes",t,null);var a=t.attributes;if(a){var s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:wt};for(o=a.length;o--;){var l=e=a[o],c=l.name,u=l.namespaceURI;if(r=_(e.value),i=ee(c),s.attrName=i,s.attrValue=r,s.keepAttr=!0,s.forceKeepAttr=void 0,ye("uponSanitizeAttribute",t,s),r=s.attrValue,!s.forceKeepAttr&&(de(c,t),s.keepAttr))if(b(/\/>/i,r))de(c,t);else{Mt&&(r=y(r,pt," "),r=y(r,ft," "));var h=ee(t.nodeName);if(_e(h,i,r))try{u?t.setAttributeNS(u,c,r):t.setAttribute(c,r),p(n.removed)}catch(t){}}}ye("afterSanitizeAttributes",t,null)}},we=function t(e){var n=void 0,r=fe(e);for(ye("beforeSanitizeShadowDOM",e,null);n=r.nextNode();)ye("uponSanitizeShadowNode",n,null),ve(n)||(n.content instanceof a&&t(n.content),xe(n));ye("afterSanitizeShadowDOM",e,null)};return n.sanitize=function(t,i){var o=void 0,s=void 0,c=void 0,u=void 0,h=void 0;if((Xt=!t)&&(t="\x3c!--\x3e"),"string"!=typeof t&&!ge(t)){if("function"!=typeof t.toString)throw x("toString is not a function");if("string"!=typeof(t=t.toString()))throw x("dirty is not a string, aborting")}if(!n.isSupported){if("object"===q(e.toStaticHTML)||"function"==typeof e.toStaticHTML){if("string"==typeof t)return e.toStaticHTML(t);if(ge(t))return e.toStaticHTML(t.outerHTML)}return t}if(Pt||oe(i),n.removed=[],"string"==typeof t&&(zt=!1),zt);else if(t instanceof l)1===(s=(o=pe("\x3c!----\x3e")).ownerDocument.importNode(t,!0)).nodeType&&"BODY"===s.nodeName||"HTML"===s.nodeName?o=s:o.appendChild(s);else{if(!Rt&&!Mt&&!kt&&-1===t.indexOf("<"))return rt&&Nt?rt.createHTML(t):t;if(!(o=pe(t)))return Rt?null:it}o&&Dt&&he(o.firstChild);for(var d=fe(zt?t:o);c=d.nextNode();)3===c.nodeType&&c===u||ve(c)||(c.content instanceof a&&we(c.content),xe(c),u=c);if(u=null,zt)return t;if(Rt){if(Lt)for(h=lt.call(o.ownerDocument);o.firstChild;)h.appendChild(o.firstChild);else h=o;return wt.shadowroot&&(h=ut.call(r,h,!0)),h}var p=kt?o.outerHTML:o.innerHTML;return Mt&&(p=y(p,pt," "),p=y(p,ft," ")),rt&&Nt?rt.createHTML(p):p},n.setConfig=function(t){oe(t),Pt=!0},n.clearConfig=function(){ne=null,Pt=!1},n.isValidAttribute=function(t,e,n){ne||oe({});var r=ee(t),i=ee(e);return _e(r,i,n)},n.addHook=function(t,e){"function"==typeof e&&(dt[t]=dt[t]||[],f(dt[t],e))},n.removeHook=function(t){dt[t]&&p(dt[t])},n.removeHooks=function(t){dt[t]&&(dt[t]=[])},n.removeAllHooks=function(){dt={}},n}()}()},function(t){t.exports=JSON.parse('["CC0_1_0","CC_BY_4_0","CC_BY_NC_4_0","UNSPECIFIED","UNSUPPORTED"]')},function(t,e){t.exports=function(t){if(null==t)throw new TypeError("Cannot destructure undefined")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";var r,i=n(9),o=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(t){function e(e){var n=this,r="Assertion failed. See https://openlayers.org/en/"+("latest"===i.a?i.a:"v"+i.a.split("-")[0])+"/doc/errors/#"+e+" for details.";return(n=t.call(this,r)||this).code=e,n.name="AssertionError",n.message=r,n}return o(e,t),e}(Error);e.a=a},function(t,e,n){"use strict";var r,i=n(65),o=n(14),a=n(15),s=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(t){function e(){var e=t.call(this)||this;return e.on=e.onInternal,e.once=e.onceInternal,e.un=e.unInternal,e.revision_=0,e}return s(e,t),e.prototype.changed=function(){++this.revision_,this.dispatchEvent(o.a.CHANGE)},e.prototype.getRevision=function(){return this.revision_},e.prototype.onInternal=function(t,e){if(Array.isArray(t)){for(var n=t.length,r=new Array(n),i=0;i<n;++i)r[i]=Object(a.a)(this,t[i],e);return r}return Object(a.a)(this,t,e)},e.prototype.onceInternal=function(t,e){var n;if(Array.isArray(t)){var r=t.length;n=new Array(r);for(var i=0;i<r;++i)n[i]=Object(a.b)(this,t[i],e)}else n=Object(a.b)(this,t,e);return e.ol_key=n,n},e.prototype.unInternal=function(t,e){var n=e.ol_key;if(n)!function(t){if(Array.isArray(t))for(var e=0,n=t.length;e<n;++e)Object(a.c)(t[e]);else Object(a.c)(t)}(n);else if(Array.isArray(t))for(var r=0,i=t.length;r<i;++r)this.removeEventListener(t[r],e);else this.removeEventListener(t,e)},e}(i.a);l.prototype.on,l.prototype.once,l.prototype.un,e.a=l},function(t,e,n){"use strict";var r=n(9),i=n(32),o=function(){function t(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=Object(i.c)(t.scale),this.displacement_=t.displacement}return t.prototype.clone=function(){var e=this.getScale();return new t({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},t.prototype.getOpacity=function(){return this.opacity_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getScaleArray=function(){return this.scaleArray_},t.prototype.getDisplacement=function(){return this.displacement_},t.prototype.getAnchor=function(){return Object(r.b)()},t.prototype.getImage=function(t){return Object(r.b)()},t.prototype.getHitDetectionImage=function(){return Object(r.b)()},t.prototype.getPixelRatio=function(t){return 1},t.prototype.getImageState=function(){return Object(r.b)()},t.prototype.getImageSize=function(){return Object(r.b)()},t.prototype.getOrigin=function(){return Object(r.b)()},t.prototype.getSize=function(){return Object(r.b)()},t.prototype.setDisplacement=function(t){this.displacement_=t},t.prototype.setOpacity=function(t){this.opacity_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t,this.scaleArray_=Object(i.c)(t)},t.prototype.listenImageChange=function(t){Object(r.b)()},t.prototype.load=function(){Object(r.b)()},t.prototype.unlistenImageChange=function(t){Object(r.b)()},t}();e.a=o},function(t,e,n){"use strict";function r(t,e,n,r,i){var o;for(e+=r;e<n;e+=r)if(o=i(t.slice(e-r,e),t.slice(e,e+r)))return o;return!1}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(4);function i(t,e,n,i){for(var o=[],a=Object(r.j)(),s=0,l=n.length;s<l;++s){var c=n[s];a=Object(r.n)(t,e,c[0],i),o.push((a[0]+a[2])/2,(a[1]+a[3])/2),e=c[c.length-1]}return o}},function(t,e,n){"use strict";function r(t,e,n,r){for(var i=t[e],o=t[e+1],a=0,s=e+r;s<n;s+=r){var l=t[s],c=t[s+1];a+=Math.sqrt((l-i)*(l-i)+(c-o)*(c-o)),i=l,o=c}return a}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";e.a={POINT:"point",LINE:"line"}},function(t,e,n){"use strict";var r,i=n(52),o=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.inversePixelTransform=n,o.frameState=r,o.context=i,o}return o(e,t),e}(i.a);e.a=a},function(t,e,n){"use strict";var r,i=n(46),o=n(26),a=n(9),s=n(16),l=n(20),c=n(10),u=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),h=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un,n.background_=e.background;var r=Object(l.a)({},e);return"object"==typeof e.properties&&(delete r.properties,Object(l.a)(r,e.properties)),r[o.a.OPACITY]=void 0!==e.opacity?e.opacity:1,Object(s.a)("number"==typeof r[o.a.OPACITY],64),r[o.a.VISIBLE]=void 0===e.visible||e.visible,r[o.a.Z_INDEX]=e.zIndex,r[o.a.MAX_RESOLUTION]=void 0!==e.maxResolution?e.maxResolution:1/0,r[o.a.MIN_RESOLUTION]=void 0!==e.minResolution?e.minResolution:0,r[o.a.MIN_ZOOM]=void 0!==e.minZoom?e.minZoom:-1/0,r[o.a.MAX_ZOOM]=void 0!==e.maxZoom?e.maxZoom:1/0,n.className_=void 0!==r.className?e.className:"ol-layer",delete r.className,n.setProperties(r),n.state_=null,n}return u(e,t),e.prototype.getBackground=function(){return this.background_},e.prototype.getClassName=function(){return this.className_},e.prototype.getLayerState=function(t){var e=this.state_||{layer:this,managed:void 0===t||t},n=this.getZIndex();return e.opacity=Object(c.b)(Math.round(100*this.getOpacity())/100,0,1),e.sourceState=this.getSourceState(),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==n||e.managed?n:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e},e.prototype.getLayersArray=function(t){return Object(a.b)()},e.prototype.getLayerStatesArray=function(t){return Object(a.b)()},e.prototype.getExtent=function(){return this.get(o.a.EXTENT)},e.prototype.getMaxResolution=function(){return this.get(o.a.MAX_RESOLUTION)},e.prototype.getMinResolution=function(){return this.get(o.a.MIN_RESOLUTION)},e.prototype.getMinZoom=function(){return this.get(o.a.MIN_ZOOM)},e.prototype.getMaxZoom=function(){return this.get(o.a.MAX_ZOOM)},e.prototype.getOpacity=function(){return this.get(o.a.OPACITY)},e.prototype.getSourceState=function(){return Object(a.b)()},e.prototype.getVisible=function(){return this.get(o.a.VISIBLE)},e.prototype.getZIndex=function(){return this.get(o.a.Z_INDEX)},e.prototype.setBackground=function(t){this.background_=t,this.changed()},e.prototype.setExtent=function(t){this.set(o.a.EXTENT,t)},e.prototype.setMaxResolution=function(t){this.set(o.a.MAX_RESOLUTION,t)},e.prototype.setMinResolution=function(t){this.set(o.a.MIN_RESOLUTION,t)},e.prototype.setMaxZoom=function(t){this.set(o.a.MAX_ZOOM,t)},e.prototype.setMinZoom=function(t){this.set(o.a.MIN_ZOOM,t)},e.prototype.setOpacity=function(t){Object(s.a)("number"==typeof t,64),this.set(o.a.OPACITY,t)},e.prototype.setVisible=function(t){this.set(o.a.VISIBLE,t)},e.prototype.setZIndex=function(t){this.set(o.a.Z_INDEX,t)},e.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),t.prototype.disposeInternal.call(this)},e}(i.a);e.a=h},function(t,e,n){var r=n(147),i=n(103),o=n(181),a=n(117),s=i((function(t){return o(r(t,1,a,!0))}));t.exports=s},function(t,e,n){var r=n(449),i=n(450)((function(t,e){return null==t?{}:r(t,e)}));t.exports=i},function(t,e,n){var r=n(452),i=n(103),o=n(117),a=i((function(t,e){return o(t)?r(t,e):[]}));t.exports=a},function(t,e,n){var r=n(147),i=n(453),o=n(103),a=n(226),s=o((function(t,e){if(null==t)return[];var n=e.length;return n>1&&a(t,e[0],e[1])?e=[]:n>2&&a(e[0],e[1],e[2])&&(e=[e[0]]),i(t,r(e,1),[])}));t.exports=s},function(t,e,n){"use strict";n.d(e,"a",(function(){return gt}));var r,i=n(56),o=n(46),a="active",s=n(48),l=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});function c(t,e,n,r){var i=t.getZoom();if(void 0!==i){var o=t.getConstrainedZoom(i+e),a=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:a,anchor:n,duration:void 0!==r?r:250,easing:s.b})}}var u=function(t){function e(e){var n=t.call(this)||this;return n.on,n.once,n.un,e&&e.handleEvent&&(n.handleEvent=e.handleEvent),n.map_=null,n.setActive(!0),n}return l(e,t),e.prototype.getActive=function(){return this.get(a)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(a,t)},e.prototype.setMap=function(t){this.map_=t},e}(o.a),h=n(23),d=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),p=function(t){function e(e){var n=t.call(this)||this,r=e||{};return n.delta_=r.delta?r.delta:1,n.duration_=void 0!==r.duration?r.duration:250,n}return d(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==h.a.DBLCLICK){var n=t.originalEvent,r=t.map,i=t.coordinate,o=n.shiftKey?-this.delta_:this.delta_;c(r.getView(),o,i,this.duration_),n.preventDefault(),e=!0}return!e},e}(u),f=n(20),m=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function g(t){for(var e=t.length,n=0,r=0,i=0;i<e;i++)n+=t[i].clientX,r+=t[i].clientY;return[n/e,r/e]}var y=function(t){function e(e){var n=this,r=e||{};return n=t.call(this,r)||this,r.handleDownEvent&&(n.handleDownEvent=r.handleDownEvent),r.handleDragEvent&&(n.handleDragEvent=r.handleDragEvent),r.handleMoveEvent&&(n.handleMoveEvent=r.handleMoveEvent),r.handleUpEvent&&(n.handleUpEvent=r.handleUpEvent),r.stopDown&&(n.stopDown=r.stopDown),n.handlingDownUpSequence=!1,n.trackedPointers_={},n.targetPointers=[],n}return m(e,t),e.prototype.getPointerCount=function(){return this.targetPointers.length},e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==h.a.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==h.a.POINTERUP){var n=this.handleUpEvent(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(t.type==h.a.POINTERDOWN){var r=this.handleDownEvent(t);this.handlingDownUpSequence=r,e=this.stopDown(r)}else t.type==h.a.POINTERMOVE&&this.handleMoveEvent(t);return!e},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){if(function(t){var e=t.type;return e===h.a.POINTERDOWN||e===h.a.POINTERDRAG||e===h.a.POINTERUP}(t)){var e=t.originalEvent,n=e.pointerId.toString();t.type==h.a.POINTERUP?delete this.trackedPointers_[n]:(t.type==h.a.POINTERDOWN||n in this.trackedPointers_)&&(this.trackedPointers_[n]=e),this.targetPointers=Object(f.c)(this.trackedPointers_)}},e}(u),v=n(27),_=n(34),b=n(16);function x(t){var e=arguments;return function(t){for(var n=!0,r=0,i=e.length;r<i&&(n=n&&e[r](t));++r);return n}}var w=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},E=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||function(t){var e=t.map.getTargetElement(),n=t.map.getOwnerDocument().activeElement;return e.contains(n)}(t)},C=v.b,S=function(t){var e=t.originalEvent;return 0==e.button&&!(_.f&&_.d&&e.ctrlKey)},T=(v.a,function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey}),O=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},I=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},A=function(t){var e=t.originalEvent;return Object(b.a)(void 0!==e,56),"mouse"==e.pointerType},M=function(t){var e=t.originalEvent;return Object(b.a)(void 0!==e,56),e.isPrimary&&0===e.button},k=n(47),P=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),D=function(t){function e(e){var n=t.call(this,{stopDown:v.a})||this,r=e||{};n.kinetic_=r.kinetic,n.lastCentroid=null,n.lastPointersCount_,n.panning_=!1;var i=r.condition?r.condition:x(T,M);return n.condition_=r.onFocusOnly?x(E,i):i,n.noKinetic_=!1,n}return P(e,t),e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var e=this.targetPointers,n=g(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){var r=[this.lastCentroid[0]-n[0],n[1]-this.lastCentroid[1]],i=t.map.getView();Object(k.e)(r,i.getResolution()),Object(k.d)(r,i.getRotation()),i.adjustCenterInternal(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=n,this.lastPointersCount_=e.length,t.originalEvent.preventDefault()},e.prototype.handleUpEvent=function(t){var e=t.map,n=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var r=this.kinetic_.getDistance(),i=this.kinetic_.getAngle(),o=n.getCenterInternal(),a=e.getPixelFromCoordinateInternal(o),l=e.getCoordinateFromPixelInternal([a[0]-r*Math.cos(i),a[1]-r*Math.sin(i)]);n.animateInternal({center:n.getConstrainedCenter(l),duration:500,easing:s.b})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},e}(y),R=n(77),L=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),N=function(t){function e(e){var n=this,r=e||{};return(n=t.call(this,{stopDown:v.a})||this).condition_=r.condition?r.condition:w,n.lastAngle_=void 0,n.duration_=void 0!==r.duration?r.duration:250,n}return L(e,t),e.prototype.handleDragEvent=function(t){if(A(t)){var e=t.map,n=e.getView();if(n.getConstraints().rotation!==R.c){var r=e.getSize(),i=t.pixel,o=Math.atan2(r[1]/2-i[1],i[0]-r[0]/2);if(void 0!==this.lastAngle_){var a=o-this.lastAngle_;n.adjustRotationInternal(-a)}this.lastAngle_=o}}},e.prototype.handleUpEvent=function(t){return!A(t)||(t.map.getView().endInteraction(this.duration_),!1)},e.prototype.handleDownEvent=function(t){return!!A(t)&&(!(!S(t)||!this.condition_(t))&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0))},e}(y),j=n(52),F=n(106),z=n(71),B=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),U=function(t){function e(e){var n=t.call(this)||this;return n.geometry_=null,n.element_=document.createElement("div"),n.element_.style.position="absolute",n.element_.style.pointerEvents="auto",n.element_.className="ol-box "+e,n.map_=null,n.startPixel_=null,n.endPixel_=null,n}return B(e,t),e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,n=this.element_.style;n.left=Math.min(t[0],e[0])+"px",n.top=Math.min(t[1],e[1])+"px",n.width=Math.abs(e[0]-t[0])+"px",n.height=Math.abs(e[1]-t[1])+"px"},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new z.a([n])},e.prototype.getGeometry=function(){return this.geometry_},e}(F.a),G=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),V="boxstart",q="boxdrag",H="boxend",W="boxcancel",Z=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.coordinate=n,i.mapBrowserEvent=r,i}return G(e,t),e}(j.a),$=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var r=e||{};return n.box_=new U(r.className||"ol-dragbox"),n.minArea_=void 0!==r.minArea?r.minArea:64,r.onBoxEnd&&(n.onBoxEnd=r.onBoxEnd),n.startPixel_=null,n.condition_=r.condition?r.condition:S,n.boxEndCondition_=r.boxEndCondition?r.boxEndCondition:n.defaultBoxEndCondition,n}return G(e,t),e.prototype.defaultBoxEndCondition=function(t,e,n){var r=n[0]-e[0],i=n[1]-e[1];return r*r+i*i>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Z(q,t.coordinate,t))},e.prototype.handleUpEvent=function(t){this.box_.setMap(null);var e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new Z(e?H:W,t.coordinate,t)),!1},e.prototype.handleDownEvent=function(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Z(V,t.coordinate,t)),!0)},e.prototype.onBoxEnd=function(t){},e}(y),K=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Y=function(t){function e(e){var n=this,r=e||{},i=r.condition?r.condition:O;return(n=t.call(this,{condition:i,className:r.className||"ol-dragzoom",minArea:r.minArea})||this).duration_=void 0!==r.duration?r.duration:200,n.out_=void 0!==r.out&&r.out,n}return K(e,t),e.prototype.onBoxEnd=function(t){var e=this.getMap().getView(),n=this.getGeometry();if(this.out_){var r=e.rotatedExtentForGeometry(n),i=e.getResolutionForExtentInternal(r),o=e.getResolution()/i;(n=n.clone()).scale(o*o)}e.fitInternal(n,{duration:this.duration_,easing:s.b})},e}($),X=n(14),J=37,Q=38,tt=39,et=40,nt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),rt=function(t){function e(e){var n=t.call(this)||this,r=e||{};return n.defaultCondition_=function(t){return T(t)&&I(t)},n.condition_=void 0!==r.condition?r.condition:n.defaultCondition_,n.duration_=void 0!==r.duration?r.duration:100,n.pixelDelta_=void 0!==r.pixelDelta?r.pixelDelta:128,n}return nt(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==X.a.KEYDOWN){var n=t.originalEvent,r=n.keyCode;if(this.condition_(t)&&(r==et||r==J||r==tt||r==Q)){var i=t.map.getView(),o=i.getResolution()*this.pixelDelta_,a=0,l=0;r==et?l=-o:r==J?a=-o:r==tt?a=o:l=o;var c=[a,l];Object(k.d)(c,i.getRotation()),function(t,e,n){var r=t.getCenterInternal();if(r){var i=[r[0]+e[0],r[1]+e[1]];t.animateInternal({duration:void 0!==n?n:250,easing:s.d,center:t.getConstrainedCenter(i)})}}(i,c,this.duration_),n.preventDefault(),e=!0}}return!e},e}(u),it=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ot=function(t){function e(e){var n=t.call(this)||this,r=e||{};return n.condition_=r.condition?r.condition:I,n.delta_=r.delta?r.delta:1,n.duration_=void 0!==r.duration?r.duration:100,n}return it(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==X.a.KEYDOWN||t.type==X.a.KEYPRESS){var n=t.originalEvent,r=n.charCode;if(this.condition_(t)&&(r=="+".charCodeAt(0)||r=="-".charCodeAt(0))){var i=t.map,o=r=="+".charCodeAt(0)?this.delta_:-this.delta_;c(i.getView(),o,void 0,this.duration_),n.preventDefault(),e=!0}}return!e},e}(u),at=function(){function t(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}return t.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},t.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},t.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var n=e-3;n>0&&this.points_[n+2]>t;)n-=3;var r=this.points_[e+2]-this.points_[n+2];if(r<1e3/60)return!1;var i=this.points_[e]-this.points_[n],o=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(o,i),this.initialVelocity_=Math.sqrt(i*i+o*o)/r,this.initialVelocity_>this.minVelocity_},t.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},t.prototype.getAngle=function(){return this.angle_},t}(),st=n(10),lt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ct="trackpad",ut="wheel",ht=function(t){function e(e){var n=this,r=e||{};(n=t.call(this,r)||this).totalDelta_=0,n.lastDelta_=0,n.maxDelta_=void 0!==r.maxDelta?r.maxDelta:1,n.duration_=void 0!==r.duration?r.duration:250,n.timeout_=void 0!==r.timeout?r.timeout:80,n.useAnchor_=void 0===r.useAnchor||r.useAnchor,n.constrainResolution_=void 0!==r.constrainResolution&&r.constrainResolution;var i=r.condition?r.condition:C;return n.condition_=r.onFocusOnly?x(E,i):i,n.lastAnchor_=null,n.startTime_=void 0,n.timeoutId_,n.mode_=void 0,n.trackpadEventGap_=400,n.trackpadTimeoutId_,n.deltaPerZoom_=300,n}return lt(e,t),e.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;if(t.type!==X.a.WHEEL)return!0;var e,n=t.map,r=t.originalEvent;if(r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==X.a.WHEEL&&(e=r.deltaY,_.b&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(e/=_.a),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(e*=40)),0===e)return!1;this.lastDelta_=e;var i=Date.now();void 0===this.startTime_&&(this.startTime_=i),(!this.mode_||i-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(e)<4?ct:ut);var o=n.getView();if(this.mode_===ct&&!o.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-e/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=i,!1;this.totalDelta_+=e;var a=Math.max(this.timeout_-(i-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),a),!1},e.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var n=-Object(st.b)(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),c(e,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(u),dt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pt=function(t){function e(e){var n=this,r=e||{},i=r;return i.stopDown||(i.stopDown=v.a),(n=t.call(this,i)||this).anchor_=null,n.lastAngle_=void 0,n.rotating_=!1,n.rotationDelta_=0,n.threshold_=void 0!==r.threshold?r.threshold:.3,n.duration_=void 0!==r.duration?r.duration:250,n}return dt(e,t),e.prototype.handleDragEvent=function(t){var e=0,n=this.targetPointers[0],r=this.targetPointers[1],i=Math.atan2(r.clientY-n.clientY,r.clientX-n.clientX);if(void 0!==this.lastAngle_){var o=i-this.lastAngle_;this.rotationDelta_+=o,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=o}this.lastAngle_=i;var a=t.map,s=a.getView();if(s.getConstraints().rotation!==R.c){var l=a.getViewport().getBoundingClientRect(),c=g(this.targetPointers);c[0]-=l.left,c[1]-=l.top,this.anchor_=a.getCoordinateFromPixelInternal(c),this.rotating_&&(a.render(),s.adjustRotationInternal(e,this.anchor_))}},e.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.duration_),!1)},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(y),ft=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),mt=function(t){function e(e){var n=this,r=e||{},i=r;return i.stopDown||(i.stopDown=v.a),(n=t.call(this,i)||this).anchor_=null,n.duration_=void 0!==r.duration?r.duration:400,n.lastDistance_=void 0,n.lastScaleDelta_=1,n}return ft(e,t),e.prototype.handleDragEvent=function(t){var e=1,n=this.targetPointers[0],r=this.targetPointers[1],i=n.clientX-r.clientX,o=n.clientY-r.clientY,a=Math.sqrt(i*i+o*o);void 0!==this.lastDistance_&&(e=this.lastDistance_/a),this.lastDistance_=a;var s=t.map,l=s.getView();1!=e&&(this.lastScaleDelta_=e);var c=s.getViewport().getBoundingClientRect(),u=g(this.targetPointers);u[0]-=c.left,u[1]-=c.top,this.anchor_=s.getCoordinateFromPixelInternal(u),s.render(),l.adjustResolutionInternal(e,this.anchor_)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,n),!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(y);function gt(t){var e=t||{},n=new i.a,r=new at(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&n.push(new N),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&n.push(new p({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&n.push(new D({onFocusOnly:e.onFocusOnly,kinetic:r})),(void 0===e.pinchRotate||e.pinchRotate)&&n.push(new pt),(void 0===e.pinchZoom||e.pinchZoom)&&n.push(new mt({duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(n.push(new rt),n.push(new ot({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&n.push(new ht({onFocusOnly:e.onFocusOnly,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&n.push(new Y({duration:e.zoomDuration})),n}},function(t,e,n){"use strict";n.d(e,"a",(function(){return E}));var r,i=n(46),o=n(110),a=n(27),s=n(15),l=n(29),c=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(t){function e(e){var n=t.call(this)||this,r=e.element;return!r||e.target||r.style.pointerEvents||(r.style.pointerEvents="auto"),n.element=r||null,n.target_=null,n.map_=null,n.listenerKeys=[],e.render&&(n.render=e.render),e.target&&n.setTarget(e.target),n}return c(e,t),e.prototype.disposeInternal=function(){Object(l.c)(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&Object(l.c)(this.element);for(var e=0,n=this.listenerKeys.length;e<n;++e)Object(s.c)(this.listenerKeys[e]);(this.listenerKeys.length=0,this.map_=t,this.map_)&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==a.c&&this.listenerKeys.push(Object(s.a)(t,o.a.POSTRENDER,this.render,this)),t.render())},e.prototype.render=function(t){},e.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e}(i.a),h=n(14),d=n(35),p=n(19),f=n(67),m=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),g=function(t){function e(e){var n=this,r=e||{};(n=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this).ulElement_=document.createElement("ul"),n.collapsed_=void 0===r.collapsed||r.collapsed,n.userCollapsed_=n.collapsed_,n.overrideCollapsible_=void 0!==r.collapsible,n.collapsible_=void 0===r.collapsible||r.collapsible,n.collapsible_||(n.collapsed_=!1);var i=void 0!==r.className?r.className:"ol-attribution",o=void 0!==r.tipLabel?r.tipLabel:"Attributions",a=void 0!==r.expandClassName?r.expandClassName:i+"-expand",s=void 0!==r.collapseLabel?r.collapseLabel:"›",l=void 0!==r.collapseClassName?r.collapseClassName:i+"-collpase";"string"==typeof s?(n.collapseLabel_=document.createElement("span"),n.collapseLabel_.textContent=s,n.collapseLabel_.className=l):n.collapseLabel_=s;var c=void 0!==r.label?r.label:"i";"string"==typeof c?(n.label_=document.createElement("span"),n.label_.textContent=c,n.label_.className=a):n.label_=c;var u=n.collapsible_&&!n.collapsed_?n.collapseLabel_:n.label_;n.toggleButton_=document.createElement("button"),n.toggleButton_.setAttribute("type","button"),n.toggleButton_.setAttribute("aria-expanded",String(!n.collapsed_)),n.toggleButton_.title=o,n.toggleButton_.appendChild(u),n.toggleButton_.addEventListener(h.a.CLICK,n.handleClick_.bind(n),!1);var p=i+" "+d.d+" "+d.b+(n.collapsed_&&n.collapsible_?" "+d.a:"")+(n.collapsible_?"":" ol-uncollapsible"),f=n.element;return f.className=p,f.appendChild(n.toggleButton_),f.appendChild(n.ulElement_),n.renderedAttributions_=[],n.renderedVisible_=!0,n}return m(e,t),e.prototype.collectSourceAttributions_=function(t){for(var e={},n=[],r=!0,i=t.layerStatesArray,o=0,a=i.length;o<a;++o){var s=i[o];if(Object(f.b)(s,t.viewState)){var l=s.layer.getSource();if(l){var c=l.getAttributions();if(c){var u=c(t);if(u)if(r=r&&!1!==l.getAttributionsCollapsible(),Array.isArray(u))for(var h=0,d=u.length;h<d;++h)u[h]in e||(n.push(u[h]),e[u[h]]=!0);else u in e||(n.push(u),e[u]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(r),n},e.prototype.updateElement_=function(t){if(t){var e=this.collectSourceAttributions_(t),n=e.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!Object(p.b)(e,this.renderedAttributions_)){Object(l.b)(this.ulElement_);for(var r=0,i=e.length;r<i;++r){var o=document.createElement("li");o.innerHTML=e[r],this.ulElement_.appendChild(o)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},e.prototype.handleToggle_=function(){this.element.classList.toggle(d.a),this.collapsed_?Object(l.e)(this.collapseLabel_,this.label_):Object(l.e)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e.prototype.render=function(t){this.updateElement_(t.frameState)},e}(u),y=n(56),v=n(48),_=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),b=function(t){function e(e){var n=this,r=e||{};n=t.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this;var i=void 0!==r.className?r.className:"ol-rotate",o=void 0!==r.label?r.label:"⇧",a=void 0!==r.compassClassName?r.compassClassName:"ol-compass";n.label_=null,"string"==typeof o?(n.label_=document.createElement("span"),n.label_.className=a,n.label_.textContent=o):(n.label_=o,n.label_.classList.add(a));var s=r.tipLabel?r.tipLabel:"Reset rotation",l=document.createElement("button");l.className=i+"-reset",l.setAttribute("type","button"),l.title=s,l.appendChild(n.label_),l.addEventListener(h.a.CLICK,n.handleClick_.bind(n),!1);var c=i+" "+d.d+" "+d.b,u=n.element;return u.className=c,u.appendChild(l),n.callResetNorth_=r.resetNorth?r.resetNorth:void 0,n.duration_=void 0!==r.duration?r.duration:250,n.autoHide_=void 0===r.autoHide||r.autoHide,n.rotation_=void 0,n.autoHide_&&n.element.classList.add(d.c),n}return _(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap().getView();if(t){var e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:v.b}):t.setRotation(0))}},e.prototype.render=function(t){var e=t.frameState;if(e){var n=e.viewState.rotation;if(n!=this.rotation_){var r="rotate("+n+"rad)";if(this.autoHide_){var i=this.element.classList.contains(d.c);i||0!==n?i&&0!==n&&this.element.classList.remove(d.c):this.element.classList.add(d.c)}this.label_.style.transform=r}this.rotation_=n}},e}(u),x=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),w=function(t){function e(e){var n=this,r=e||{};n=t.call(this,{element:document.createElement("div"),target:r.target})||this;var i=void 0!==r.className?r.className:"ol-zoom",o=void 0!==r.delta?r.delta:1,a=void 0!==r.zoomInClassName?r.zoomInClassName:i+"-in",s=void 0!==r.zoomOutClassName?r.zoomOutClassName:i+"-out",l=void 0!==r.zoomInLabel?r.zoomInLabel:"+",c=void 0!==r.zoomOutLabel?r.zoomOutLabel:"–",u=void 0!==r.zoomInTipLabel?r.zoomInTipLabel:"Zoom in",p=void 0!==r.zoomOutTipLabel?r.zoomOutTipLabel:"Zoom out",f=document.createElement("button");f.className=a,f.setAttribute("type","button"),f.title=u,f.appendChild("string"==typeof l?document.createTextNode(l):l),f.addEventListener(h.a.CLICK,n.handleClick_.bind(n,o),!1);var m=document.createElement("button");m.className=s,m.setAttribute("type","button"),m.title=p,m.appendChild("string"==typeof c?document.createTextNode(c):c),m.addEventListener(h.a.CLICK,n.handleClick_.bind(n,-o),!1);var g=i+" "+d.d+" "+d.b,y=n.element;return y.className=g,y.appendChild(f),y.appendChild(m),n.duration_=void 0!==r.duration?r.duration:250,n}return x(e,t),e.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var n=e.getZoom();if(void 0!==n){var r=e.getConstrainedZoom(n+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:r,duration:this.duration_,easing:v.b})):e.setZoom(r)}}},e}(u);function E(t){var e=t||{},n=new y.a;return(void 0===e.zoom||e.zoom)&&n.push(new w(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&n.push(new b(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&n.push(new g(e.attributionOptions)),n}},,,function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.__esModule=!0,t.exports.default=t.exports,n(e,r)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(51),i=n(128),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||(a.test(t)||!o.test(t)||null!=e&&t in Object(e))}},function(t,e,n){var r=n(347),i=n(363),o=n(365),a=n(366),s=n(367);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,t.exports=l},function(t,e,n){var r=n(101),i=n(74);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e,n){var r=n(89)(n(73),"Map");t.exports=r},function(t,e,n){var r=n(218);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},function(t,e,n){var r=n(221)(Object.getPrototypeOf,Object);t.exports=r},function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},function(t,e,n){(function(t){var r=n(201),i=e&&!e.nodeType&&e,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i&&r.process,s=function(){try{var t=o&&o.require&&o.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=s}).call(this,n(129)(t))},function(t,e,n){var r=n(139),i=n(114),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var a=t[e];o.call(t,e)&&i(a,n)&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e,n){var r=n(400),i=n(228),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(t){return null==t?[]:(t=Object(t),r(a(t),(function(e){return o.call(t,e)})))}:i;t.exports=s},function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},function(t,e,n){var r=n(144),i=n(182),o=n(183),a=n(145),s=n(420),l=n(184);t.exports=function(t,e,n){var c=-1,u=i,h=t.length,d=!0,p=[],f=p;if(n)d=!1,u=o;else if(h>=200){var m=e?null:s(t);if(m)return l(m);d=!1,u=a,f=new r}else f=e?[]:p;t:for(;++c<h;){var g=t[c],y=e?e(g):g;if(g=n||0!==g?g:0,d&&y==y){for(var v=f.length;v--;)if(f[v]===y)continue t;e&&f.push(y),p.push(g)}else u(f,y,n)||(f!==p&&f.push(y),p.push(g))}return p}},function(t,e,n){var r=n(416);t.exports=function(t,e){return!!(null==t?0:t.length)&&r(t,e,0)>-1}},function(t,e){t.exports=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},function(t,e,n){"use strict";t.exports=function(t,e,n,r,i,o,a,s){if(!t){var l;if(void 0===e)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,o,a,s],u=0;(l=new Error(e.replace(/%s/g,(function(){return c[u++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},function(t,e,n){var r=n(100),i=n(437),o=n(103),a=n(438),s=o((function(t){var e=r(t,a);return e.length&&e[0]===t[0]?i(e):[]}));t.exports=s},function(t,e,n){"use strict";t.exports=n(294)},function(t,e,n){var r=n(297),i=n(308)((function(t,e,n){return e=e.toLowerCase(),t+(n?r(e):e)}));t.exports=i},function(t,e,n){var r=n(317);t.exports=p,t.exports.parse=o,t.exports.compile=function(t,e){return s(o(t,e),e)},t.exports.tokensToFunction=s,t.exports.tokensToRegExp=d;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(t,e){for(var n,r=[],o=0,a=0,s="",u=e&&e.delimiter||"/";null!=(n=i.exec(t));){var h=n[0],d=n[1],p=n.index;if(s+=t.slice(a,p),a=p+h.length,d)s+=d[1];else{var f=t[a],m=n[2],g=n[3],y=n[4],v=n[5],_=n[6],b=n[7];s&&(r.push(s),s="");var x=null!=m&&null!=f&&f!==m,w="+"===_||"*"===_,E="?"===_||"*"===_,C=n[2]||u,S=y||v;r.push({name:g||o++,prefix:m||"",delimiter:C,optional:E,repeat:w,partial:x,asterisk:!!b,pattern:S?c(S):b?".*":"[^"+l(C)+"]+?"})}}return a<t.length&&(s+=t.substr(a)),s&&r.push(s),r}function a(t){return encodeURI(t).replace(/[\/?#]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}))}function s(t,e){for(var n=new Array(t.length),i=0;i<t.length;i++)"object"==typeof t[i]&&(n[i]=new RegExp("^(?:"+t[i].pattern+")$",h(e)));return function(e,i){for(var o="",s=e||{},l=(i||{}).pretty?a:encodeURIComponent,c=0;c<t.length;c++){var u=t[c];if("string"!=typeof u){var h,d=s[u.name];if(null==d){if(u.optional){u.partial&&(o+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(r(d)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var p=0;p<d.length;p++){if(h=l(d[p]),!n[c].test(h))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(h)+"`");o+=(0===p?u.prefix:u.delimiter)+h}}else{if(h=u.asterisk?encodeURI(d).replace(/[?#]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})):l(d),!n[c].test(h))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+h+'"');o+=u.prefix+h}}else o+=u}return o}}function l(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function u(t,e){return t.keys=e,t}function h(t){return t&&t.sensitive?"":"i"}function d(t,e,n){r(e)||(n=e||n,e=[]);for(var i=(n=n||{}).strict,o=!1!==n.end,a="",s=0;s<t.length;s++){var c=t[s];if("string"==typeof c)a+=l(c);else{var d=l(c.prefix),p="(?:"+c.pattern+")";e.push(c),c.repeat&&(p+="(?:"+d+p+")*"),a+=p=c.optional?c.partial?d+"("+p+")?":"(?:"+d+"("+p+"))?":d+"("+p+")"}}var f=l(n.delimiter||"/"),m=a.slice(-f.length)===f;return i||(a=(m?a.slice(0,-f.length):a)+"(?:"+f+"(?=$))?"),a+=o?"$":i&&m?"":"(?="+f+"|$)",u(new RegExp("^"+a,h(n)),e)}function p(t,e,n){return r(e)||(n=e||n,e=[]),n=n||{},t instanceof RegExp?function(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return u(t,e)}(t,e):r(t)?function(t,e,n){for(var r=[],i=0;i<t.length;i++)r.push(p(t[i],e,n).source);return u(new RegExp("(?:"+r.join("|")+")",h(n)),e)}(t,e,n):function(t,e,n){return d(o(t,n),e,n)}(t,e,n)}},function(t){t.exports=JSON.parse('{"dataset.datasetSearchTitle":"Dataset search","dataset.longType.OCCURRENCE":"Occurrence dataset","dataset.longType.CHECKLIST":"Checklist dataset","dataset.longType.SAMPLING_EVENT":"Sampling event","dataset.longType.METADATA":"Metadata dataset","dataset.metricHighlights.occurrences":"Occurrences","dataset.metricHighlights.withTaxonMatch":"With taxon match","dataset.metricHighlights.withCoordinates":"With coordinates","dataset.metricHighlights.withYear":"With year","dataset.metricHighlights.acceptedNames":"Accepted names","dataset.metricHighlights.synonyms":"Synonyms","dataset.metricHighlights.overlapWithNub":"Overlap with GBIF Backbone","dataset.metricHighlights.overlapWithCol":"Overlap with Catalogue of Life","dataset.noStatsForMetadata":"No statistics available for metadata only datasets","dataset.viewArticle":"View article","dataset.registeredDate":"Registered {DATE}","dataset.constituentOf":"Constituent of","dataset.dataset":"Dataset","dataset.taxonomy":"Taxonomy","dataset.project":"Project","dataset.metrics":"Metrics","dataset.constituents":"Constituents","dataset.download":"Download","dataset.datasetHomepage":"Home page","dataset.nConstituentDatasets":"{NUMBER_FORMATED} {NUMBER, plural, one{constituent dataset} other{constituent datasets}}","dataset.consistuentDatasets":"Constituent datasets","dataset.noConstituentDatasets":"No constituent datasets","dataset.logs":"Logs","dataset.noDownloads":"No downloads yet","dataset.finished":"Finished","dataset.activity":"Activity","dataset.title":"Title","dataset.projectId":"Project ID","dataset.studyArea":"Study area","dataset.publishedBy":"Published by","dataset.mediatedBy":"Mediated by","dataset.description":"Description","dataset.metadataLanguage":"Metadata language","dataset.dataLanguage":"Data language","dataset.dataDescriptions":"External data descriptions","dataset.purpose":"Purpose","dataset.methodology":"Methodology","dataset.studyExtent":"Study extent","dataset.keywords":"Keywords","dataset.qualityControl":"Quality control","dataset.sampling":"Sampling","dataset.methodSteps":"Method steps","dataset.nDownloadEvents":"{NUMBER_FORMATED} {NUMBER, plural, one{download event} other{download events}}","dataset.nFromDataset":"{NUMBER_FORMATED} {NUMBER, plural, one{occurrence from this dataset} other{occurrences from this dataset}}","dataset.funding":"Funding","dataset.contacts":"Contacts","dataset.registration":"GBIF registration","dataset.dataDescription":"Data description","dataset.bibliography":"Bibliography","dataset.citation":"Citation","dataset.temporalCoverages":"Temporal scope","dataset.history":"History","dataset.ingestNow":"Ingest now","dataset.readFullDescription":"More","dataset.howToCite":"How to cite","dataset.geographicCoverages":"Geographic scope","dataset.taxonomicCoverages":"Taxonomic scope","dataset.additionalInfo":"Additional info","dataset.publishingCountriesAreas":"Publishing countries and areas","dataset.originalArchive":"Source archive","dataset.annotatedEml":"GBIF annotated metadata","dataset.license":"Licence","dataset.recommended":"Recommended","dataset.processedOccurrences":"GBIF annotated archive","dataset.noDescriptionProvided":"No description available","dataset.pNetwork":"{NUMBER, plural, one{Network} other{Networks}}","dataset.parentEvent":"Parent event","dataset.eventDescription":"Event description","dataset.siblingEvents":"Sibling events","dataset.childEvents":"Child events","dataset.events":"Events","dataset.occurrenceCount":"Occurrence count","dataset.inDataset":"In","dataset.samplingArticleLink":"More about sampling events on GBIF.org","dataset.registry.failedSinceSuccess":"Failed attempts since last successful ingestion","dataset.registry.lastFailed":"Last failed attempt","dataset.registry.registrationDate":"Registration date","dataset.registry.lastSuccess":"Last successful ingestion","dataset.registry.lastWithChange":"Last ingestion with changes","dataset.registry.noEntries":"This dataset has no ingestion entries","dataset.registry.lastWithDataChange":"Last ingestion with data change","dataset.registry.occInLastIngestion":"Occurrences in last ingestion","dataset.registry.completionReasons":"Ingestion completion reasons","dataset.registry.unfinished":"Unfinished ingestions","dataset.registry.total":"Ingestions in total","dataset.registry.endpoints":"Endpoints","dataset.registry.installationContacts":"Installation contacts","dataset.registry.installation":"Installation","dataset.registry.dataLastChanged":"Data last changed","dataset.registry.pubDate":"Publication date","dataset.registry.hostedBy":"Hosted by","dataset.registry.hostingStatus":"Hosting status","dataset.registry.metdataLastModified":"Metadata last modified","dataset.registry.preferredIdentifier":"Preferred identifier","dataset.registry.alternativeIdentifier":"Alternative identifiers","dataset.registry.ORPHANED":"Orphaned dataset","dataset.registry.RESCUED":"Rescued orphan dataset","dataset.registry.ADOPTED":"Adopted dataset","dataset.registry.neverIngested":"Never ingested","dataset.registry.inIngestionQueue":"Is in ingestion queue","dataset.registry.addingToQueue":"Adding to queue","dataset.registry.unableToStart":"Unable to start ingestion","dataset.registry.ingestionChartExplainer":"Most recent ingestions. Top left is the latest.","dataset.registry.ingestionStatus":"Ingestion status","dataset.registry.itemInIngestionQueue":"Items in ingestion queue","dataset.registry.datasetIngestionStatus":"Dataset ingestion status","dataset.registry.gbifIngestionStatus":"GBIF ingestion status","dataset.registry.lastIngestionSuccess":"Last ingestion a success","dataset.registry.lastIngestionFailed":"Last ingestion failed","dataset.registry.outOfSync":"Out of sync","dataset.registry.becauseTrustedContact":"Because you are trusted contact","dataset.registry.registrationDetails":"GBIF registration details","catalogues.occurrences":"Occurrences","catalogues.datasets":"Datasets","catalogues.species":"Species","catalogues.publishers":"Publishers","catalogues.literature":"Literature","catalogues.collections":"Collections","catalogues.institutions":"Institutions","tableHeaders.features":"Features","tableHeaders.citations":"Citations","tableHeaders.occurrences":"Occurrences","tableHeaders.numberSpecimens":"Number of specimens","tableHeaders.gbifNumberSpecimens":"Specimens in GBIF","tableHeaders.title":"Title","tableHeaders.titleAndAbstract":"Title and abstract","tableHeaders.altmetric":"Altmetric","tableHeaders.registered":"Registered","tableHeaders.hostedDatasets":"Hosted datasets","tableHeaders.pubDatasets":"Published datasets","intervals.description.lt":"Less than {to}","intervals.description.lte":"Less or equal {to}","intervals.description.gt":"Greater than {from}","intervals.description.gte":"Greater or equal {from}","intervals.description.e":"Equals {is}","intervals.compact.between":"{from} to {to}","intervals.compact.lt":"Below {to}","intervals.compact.gt":"Above {from}","intervals.compact.e":"{from}","intervals.compactMeters.between":"{from}m to {to}m","intervals.compactMeters.lt":"Below {to}m","intervals.compactMeters.gt":"Above {from}m","intervals.compactMeters.e":"{from}m","intervals.compactTime.between":"{from} to {to}","intervals.compactTime.lt":"Before {to}","intervals.compactTime.gt":"After {from}","intervals.compactTime.e":"{from}","intervals.year.between":"Year {from} to {to}","intervals.year.lt":"Before year {to}","intervals.year.gt":"After year {from}","intervals.year.e":"Year is {from}","intervals.coordinateUncertainty.between":"Coordinate uncertainty {from}m to {to}m","intervals.coordinateUncertainty.lt":"Coordinate uncertainty below {to}m","intervals.coordinateUncertainty.gt":"Coordinate uncertainty above {from}m","intervals.coordinateUncertainty.e":"Coordinate uncertainty is {from}m","intervals.depth.between":"Depth {from} to {to}","intervals.depth.lt":"Depth below {to}","intervals.depth.gt":"Depth above {from}","intervals.depth.e":"Depth is {from}","intervals.organismQuantity.between":"Organism quantity {from} to {to}","intervals.organismQuantity.lt":"Organism quantity below {to}","intervals.organismQuantity.gt":"Organism quantity above {from}","intervals.organismQuantity.e":"Organism quantity is {from}","intervals.sampleSizeValue.between":"Sample size value {from} to {to}","intervals.sampleSizeValue.lt":"Sample size value below {to}","intervals.sampleSizeValue.gt":"Sample size value above {from}","intervals.sampleSizeValue.e":"Sample size value is {from}","intervals.relativeOrganismQuantity.between":"Relative organism quantity {from} to {to}","intervals.relativeOrganismQuantity.lt":"Relative organism quantity below {to}","intervals.relativeOrganismQuantity.gt":"Relative organism quantity above {from}","intervals.relativeOrganismQuantity.e":"Relative organism quantity is {from}","intervals.elevation.between":"Elevation {from} to {to}","intervals.elevation.lt":"Elevation below {to}","intervals.elevation.gt":"Elevation above {from}","intervals.elevation.e":"Elevation is {from}","filters.dwcaExtension.name":"DWCA extension","filters.dwcaExtension.count":"{num, plural, one { DWCA extension } other {# DWCA extensions}}","filters.dwcaExtension.description":"A short description of the component should be placed here","filters.taxonKey.name":"Scientific name","filters.taxonKey.count":"{num, plural, one {scientific name} other {# scientific names}}","filters.taxonKey.description":"The scientific name as it appears in the GBIF backbone taxonomy. These names are normalized to ease search across datasets. It is possible that an originally-provided name might be misinterpreted or unknown. To search the names as provided use the \\"Verbatim scientific name\\" filter.","filters.basisOfRecord.name":"Basis of record","filters.basisOfRecord.count":"{num, plural, one {basis of record} other {# bases of records}}","filters.basisOfRecord.isNotNull":"Has a basis of record","filters.basisOfRecord.isNull":"Has no basis of record","filters.basisOfRecord.description":"The nature of the evidence upon which the record is based.","filters.institutionCode.name":"Institution code","filters.institutionCode.count":"{num, plural, one {institution code} other {# institution codes}}","filters.institutionCode.description":"The code (or acronym) for the institution having custody of the object(s) or information referred to in the record.","filters.catalogNumber.name":"Catalogue number","filters.catalogNumber.count":"{num, plural, one { catalogue number } other {# catalogue numbers}}","filters.catalogNumber.description":"The identifier for the record within a catalogue or collection.","filters.mediaType.name":"Media type","filters.mediaType.count":"{num, plural, one {media type} other {# media types}}","filters.mediaType.description":"The types of media accessible for this record.","filters.occurrenceIssue.name":"Issues and flags","filters.occurrenceIssue.count":"{num, plural, one {issue or flag} other {# issues and flags}}","filters.occurrenceIssue.isNotNull":"Has issues","filters.occurrenceIssue.isNull":"Has no issues","filters.occurrenceIssue.description":"The types of issues or flags of potential interest discovered in processing the data.","filters.occurrenceCountry.name":"Country","filters.occurrenceCountry.count":"{num, plural, one {country} other {# countries}}","filters.occurrenceCountry.description":"The country or territory where the event occurred","filters.publishingCountryCode.name":"Publishing country","filters.publishingCountryCode.count":"{num, plural, one {publishing country} other {# publishing countries}}","filters.publishingCountryCode.description":"The ISO code for the country or territory in which the data publisher is located","filters.q.name":"Text search","filters.q.count":"{num, plural, one {text string} other {# search strings}}","filters.q.description":"Find records with similar matching text among text fields. For matching text within a specific field, use corresponding filter, such as the one for \\"Scientific Name\\".","filters.coordinates.name":"Coordinates","filters.elevation.name":"Elevation","filters.elevation.count":"{num, plural, one {elevation filter} other {# elevation filters}}","filters.elevation.description":"The distance above a vertical reference point (usually mean sea level or a geoid) in metres.","filters.license.name":"Licence","filters.license.count":"{num, plural, one {licence} other {# licences}}","filters.license.description":"The legal licence or waiver under which the record is shared.","filters.datasetKey.name":"Dataset","filters.datasetKey.count":"{num, plural, one {dataset} other {# datasets}}","filters.datasetKey.description":"The title of the dataset under which the record is shared.","filters.publisherKey.name":"Publisher","filters.publisherKey.count":"{num, plural, one {publisher} other {# publishers}}","filters.publisherKey.description":"The name of the organization responsible for sharing the dataset in which the record is included.","filters.hostingOrganizationKey.name":"Hosting organization","filters.hostingOrganizationKey.count":"{num, plural, one {host} other {# hosts}}","filters.hostingOrganizationKey.description":"The name of the organization hosting the dataset in which the record is published.","filters.country.name":"Country","filters.country.count":"{num, plural, one {country} other {# countries}}","filters.countriesOfCoverage.name":"Country of coverage","filters.countriesOfCoverage.count":"{num, plural, one {country of coverage} other {# countries of coverage}}","filters.countriesOfResearcher.name":"Country of researcher","filters.countriesOfResearcher.count":"{num, plural, one {country of researcher} other {# countries of researchers}}","filters.typeStatus.name":"Type status","filters.typeStatus.count":"{num, plural, one {type status} other {# type statuses}}","filters.typeStatus.isNotNull":"Has a type status","filters.typeStatus.isNull":"The type status","filters.typeStatus.description":"The type designation of a specimen.","filters.year.name":"Year","filters.year.count":"{num, plural, one {year filter} other {# year filters}}","filters.year.description":"The year in which the event occurred.","filters.sampleSizeUnit.name":"Sample size unit","filters.sampleSizeUnit.count":"{num, plural, one {sample size unit} other {# sample size units}}","filters.sampleSizeUnit.description":"The unit of measurement for the \\"sample size value\\".","filters.coordinateUncertainty.name":"Coordinate uncertainty","filters.coordinateUncertainty.count":"{num, plural, one {Coordinate uncertainty} other {# coordinate uncertainty filters}}","filters.coordinateUncertainty.description":"A measure of the minimum distance in metres from a coordinate within which a locality might be interpreted to be.","filters.depth.name":"Depth","filters.depth.count":"{num, plural, one { depth } other {# depths}}","filters.depth.description":"The distance below a local surface, in metres.","filters.organismQuantity.name":"Organism quantity","filters.organismQuantity.count":"{num, plural, one { organism quantity } other {# organism quantitys}}","filters.organismQuantity.description":"The value for the quantity of organisms, where the type of measurement is given in the \\"Organism quantity type\\".","filters.sampleSizeValue.name":"Sample size value","filters.sampleSizeValue.count":"{num, plural, one { sample size value } other {# sample size values}}","filters.sampleSizeValue.description":"The value for the size of a sample, where the units of measurement are given in the \\"Sample size unit\\".","filters.relativeOrganismQuantity.name":"Relative organism quantity","filters.relativeOrganismQuantity.count":"{num, plural, one { relative organism quantity } other {# relative organism quantities}}","filters.relativeOrganismQuantity.description":"The amount of biological material relative to the size of a sample, calculated as organismQuantity per sampleSize when the organismQuantityType and sampleSizeUnit are unambiguous.","filters.month.name":"Month","filters.month.count":"{num, plural, one { month } other {# months}}","filters.month.description":"The integer month in which the event occurred.","filters.continent.name":"Continent","filters.continent.count":"{num, plural, one { continent } other {# continents}}","filters.continent.description":"The name of the continent in which the location occurs.  This field is not inferred but only populated if provided by the dataset publisher. Applying this filter may exclude relevant records.","filters.protocol.name":"Publishing protocol","filters.protocol.count":"{num, plural, one { protocol } other {# protocols}}","filters.protocol.description":"The technical protocol through which the dataset is shared.","filters.establishmentMeans.name":"Establishment means","filters.establishmentMeans.count":"{num, plural, one { establishment means } other {# establishment means}}","filters.establishmentMeans.description":"The means by which the organism was introduced to a given place at a given time.","filters.recordedBy.name":"Recorded by","filters.recordedBy.count":"{num, plural, one { recorded by } other {# recorded bys}}","filters.recordedBy.description":"The names of the person, people, groups or organizations responsible for recording the original occurrence.","filters.recordNumber.name":"Record number","filters.recordNumber.count":"{num, plural, one { record number } other {# record numbers}}","filters.recordNumber.description":"An identifier given to the occurrence at the time it was recorded.","filters.collectionCode.name":"Collection code","filters.collectionCode.count":"{num, plural, one { collection code } other {# collection codes}}","filters.collectionCode.description":"A short description of the component should be placed here","filters.recordedById.name":"Recorded by ID","filters.recordedById.count":"{num, plural, one { recorded by ID } other {# recorded by IDs}}","filters.recordedById.description":"The identifier for the person, people, groups or organizations responsible for recording the original occurrence.","filters.identifiedById.name":"Identified by ID","filters.identifiedById.count":"{num, plural, one { identified by ID } other {# identified by IDs}}","filters.identifiedById.description":"The identifier for the person, people, groups or organizations responsible for determining the scientific name of the organism.","filters.occurrenceId.name":"Occurrence id","filters.occurrenceId.count":"{num, plural, one { occurrence ID } other {# occurrence IDs}}","filters.occurrenceId.description":"The unique identifier for the occurrence record.","filters.organismId.name":"Organism id","filters.organismId.count":"{num, plural, one { organism ID } other {# organism IDs}}","filters.organismId.description":"The unique identifier for the organism in the record.","filters.locality.name":"Locality","filters.locality.count":"{num, plural, one { locality } other {# localities}}","filters.locality.description":"The specific part of the description of the place.","filters.waterBody.name":"Water body","filters.waterBody.count":"{num, plural, one { water body } other {# water bodies}}","filters.waterBody.description":"The name of the water body in which the location occurs.","filters.stateProvince.name":"State province","filters.stateProvince.count":"{num, plural, one { state province } other {# state provinces}}","filters.stateProvince.description":"The name of the next administrative region smaller than country in which the location occurs.","filters.eventId.name":"Event ID","filters.eventId.count":"{num, plural, one { event ID } other {# event IDs}}","filters.eventId.description":"The unique identifier for the event in the record.","filters.samplingProtocol.name":"Sampling protocol","filters.samplingProtocol.count":"{num, plural, one { sampling protocol } other {# sampling protocols}}","filters.samplingProtocol.description":"The name of, reference to or description of the method or protocol used during an event.","filters.occurrenceStatus.name":"Occurrence status","filters.occurrenceStatus.count":"{num, plural, one { occurrence status } other {# occurrence statuses}}","filters.occurrenceStatus.description":"The presence or absence of any organisms of the given taxon.","filters.gadmGid.name":"Administrative area","filters.gadmGid.count":"{num, plural, one { administrative area } other {# administrative areas}}","filters.gadmGid.description":"The name of any administrative area from GADM.org determined during record processing.","filters.identifiedBy.name":"Identified by","filters.identifiedBy.count":"{num, plural, one { identified by } other {# identified bys}}","filters.identifiedBy.description":"The person, people, groups or organizations responsible for determining the scientific name of the Organism.","filters.isInCluster.name":"Is in cluster","filters.isInCluster.count":"{num, plural, one { is in cluster } other {# are in clusters}}","filters.isInCluster.description":"Whether the record was determined to have related records.","filters.datasetType.name":"Dataset type","filters.datasetType.count":"{num, plural, one { dataset type } other {# dataset types}}","filters.datasetType.description":"A short description of the component should be placed here","filters.datasetSubtype.name":"Dataset subtype","filters.datasetSubtype.count":"{num, plural, one { dataset subtype } other {# dataset subtypes}}","filters.datasetSubtype.description":"A short description of the component should be placed here","filters.institutionKey.name":"Institution","filters.institutionKey.count":"{num, plural, one { institution } other {# institutions}}","filters.institutionKey.description":"The name of the institution having custody of the object(s) or information referred to in the record.","filters.name.name":"Name","filters.name.count":"{num, plural, one { name } other {# names}}","filters.name.description":"A short description of the component should be placed here","filters.city.name":"City","filters.city.count":"{num, plural, one { city } other {# cities}}","filters.city.description":"A short description of the component should be placed here","filters.code.name":"Code","filters.code.count":"{num, plural, one { code } other {# codes}}","filters.code.description":"A short description of the component should be placed here","filters.verbatimScientificName.name":"Verbatim scientific name","filters.verbatimScientificName.count":"{num, plural, one { verbatim scientific name } other {# verbatim scientific names}}","filters.verbatimScientificName.description":"The scientific name as provided by the data publisher without any normalization.","filters.networkKey.name":"Network key","filters.networkKey.count":"{num, plural, one { network key } other {# network keys}}","filters.networkKey.description":"A short description of the component should be placed here","filters.literatureType.name":"Literature type","filters.literatureType.count":"{num, plural, one { literature type } other {# literature types}}","filters.literatureType.description":"What type of literature does the citation come from.","filterSupport.nullOrNot.isNotNull":"Must be defined","filterSupport.nullOrNot.isNull":"Must not be defined","filterSupport.invalidValue":"Invalid value","filterSupport.aboutThisFilter":"About this filter","filterSupport.existence":"Filter for existence","filterSupport.showHelp":"Show help text","filterSupport.back":"Back","filterSupport.cancel":"Cancel","filterSupport.apply":"Apply","filterSupport.wildcardHelp":"Searches are case-insensitive, but accents are distinct (e.g. \'rio\' vs \'río\'). Use a wildcard (e.g. \'r?o\') to find all matches.","filterSupport.useWildcardPattern":"Search for the pattern","filterSupport.showSuggestions":"Show suggestions","filterSupport.excludeSelected":"Exclude selected","counts.nResults":"{total, plural, one {# result} other {# results}}","counts.nRecordsTotal":"{total, plural, one {# record in total} other {# records in total}}","counts.nSelected":"{total, plural, other {# selected}}","counts.nQualityFlags":"{total, plural, one {# quality flag} other {# quality flags}}","counts.nAudioFiles":"{total, plural, one {# sound file} other {# sound files}}","counts.nVideos":"{total, plural, one {# video} other {# videos}}","counts.nImages":"{total, plural, one {# image} other {# images}}","counts.nResultsWithCoordinates":"{total, plural, one {# result } other {# results}} with coordinates\\n","counts.nResultsWithImages":"{total, plural, one {# result } other {# results}} with images\\n","contact.position":"Position","contact.organization":"Organization","contact.email":"Email","contact.address":"Address","contact.roles":"Roles","contact.userId":"User ID","contact.name":"Name","pagination.first":"First","pagination.previous":"Previous","pagination.next":"Next","pagination.options":"Options","pagination.pageXofY":"Page {current} of {total}\\n","pagination.moreFilters":"more","search.tabs.table":"Table","search.tabs.gallery":"Gallery","search.tabs.map":"Map","search.tabs.datasets":"Datasets","search.tabs.download":"Download","search.table.lockColumn":"Lock column","search.placeholders.default":"Search","search.placeholders.range":"Range or single value","search.loadMore":"More","phrases.loading":"loading","phrases.loadError":"Failed to load","phrases.close":"Close","phrases.citation":"Citation","phrases.citeAs":"Please use this citation in publications","phrases.unknownDate":"Unknown date","occurrenceFieldNames.gbifID":"GBIF ID","occurrenceFieldNames.abstract":"Abstract","occurrenceFieldNames.accessRights":"Access rights","occurrenceFieldNames.accrualMethod":"Accrual method","occurrenceFieldNames.accrualPeriodicity":"Accrual periodicity","occurrenceFieldNames.accrualPolicy":"Accrual policy","occurrenceFieldNames.alternative":"Alternative","occurrenceFieldNames.audience":"Audience","occurrenceFieldNames.available":"Available","occurrenceFieldNames.bibliographicCitation":"Bibliographic citation","occurrenceFieldNames.conformsTo":"Conforms to","occurrenceFieldNames.contributor":"Contributor","occurrenceFieldNames.coverage":"Coverage","occurrenceFieldNames.created":"Created","occurrenceFieldNames.creator":"Creator","occurrenceFieldNames.date":"Date","occurrenceFieldNames.dateAccepted":"Date accepted","occurrenceFieldNames.dateCopyrighted":"Date copyrighted","occurrenceFieldNames.dateSubmitted":"Date submitted","occurrenceFieldNames.description":"Description","occurrenceFieldNames.educationLevel":"Education level","occurrenceFieldNames.extent":"Extent","occurrenceFieldNames.format":"Format","occurrenceFieldNames.hasFormat":"Has format","occurrenceFieldNames.hasPart":"Has part","occurrenceFieldNames.hasVersion":"Has version","occurrenceFieldNames.identifier":"Identifier","occurrenceFieldNames.instructionalMethod":"Instructional method","occurrenceFieldNames.isFormatOf":"Is format of","occurrenceFieldNames.isPartOf":"Is part of","occurrenceFieldNames.isReferencedBy":"Is referenced by","occurrenceFieldNames.isReplacedBy":"Is replaced by","occurrenceFieldNames.isRequiredBy":"Is required by","occurrenceFieldNames.isVersionOf":"Is version of","occurrenceFieldNames.issued":"Issued","occurrenceFieldNames.language":"Language","occurrenceFieldNames.license":"Record licence","occurrenceFieldNames.mediator":"Mediator","occurrenceFieldNames.medium":"Medium","occurrenceFieldNames.modified":"Modified","occurrenceFieldNames.provenance":"Provenance","occurrenceFieldNames.publisher":"Publisher","occurrenceFieldNames.references":"References","occurrenceFieldNames.relation":"Relation","occurrenceFieldNames.replaces":"Replaces","occurrenceFieldNames.requires":"Requires","occurrenceFieldNames.rights":"Rights","occurrenceFieldNames.rightsHolder":"Rights holder","occurrenceFieldNames.source":"Source","occurrenceFieldNames.spatial":"Spatial","occurrenceFieldNames.subject":"Subject","occurrenceFieldNames.tableOfContents":"Table of contents","occurrenceFieldNames.temporal":"Temporal","occurrenceFieldNames.title":"Title","occurrenceFieldNames.type":"Type","occurrenceFieldNames.valid":"Valid","occurrenceFieldNames.institutionID":"Institution ID","occurrenceFieldNames.collectionID":"Collection ID","occurrenceFieldNames.datasetID":"Dataset ID","occurrenceFieldNames.institutionCode":"Institution code","occurrenceFieldNames.collectionCode":"Collection code","occurrenceFieldNames.datasetName":"Dataset name","occurrenceFieldNames.ownerInstitutionCode":"Owner institution code","occurrenceFieldNames.basisOfRecord":"Basis of record","occurrenceFieldNames.informationWithheld":"Information withheld","occurrenceFieldNames.dataGeneralizations":"Data generalizations","occurrenceFieldNames.dynamicProperties":"Dynamic properties","occurrenceFieldNames.occurrenceID":"Occurrence ID","occurrenceFieldNames.occurrenceId":"Occurrence ID","occurrenceFieldNames.catalogNumber":"Catalogue number","occurrenceFieldNames.recordNumber":"Record number","occurrenceFieldNames.recordedBy":"Recorded by","occurrenceFieldNames.recordedByID":"Recorded by ID","occurrenceFieldNames.identifiedByID":"Identified by ID","occurrenceFieldNames.individualCount":"Individual count","occurrenceFieldNames.organismQuantity":"Organism quantity","occurrenceFieldNames.organismQuantityType":"Organism quantity type","occurrenceFieldNames.sex":"Sex","occurrenceFieldNames.lifeStage":"Life stage","occurrenceFieldNames.reproductiveCondition":"Reproductive condition","occurrenceFieldNames.behavior":"Behavior","occurrenceFieldNames.establishmentMeans":"Establishment means","occurrenceFieldNames.degreeOfEstablishment":"Degree of establishment","occurrenceFieldNames.pathway":"Pathway","occurrenceFieldNames.occurrenceStatus":"Occurrence status","occurrenceFieldNames.preparations":"Preparations","occurrenceFieldNames.disposition":"Disposition","occurrenceFieldNames.associatedReferences":"Associated references","occurrenceFieldNames.associatedSequences":"Associated sequences","occurrenceFieldNames.associatedTaxa":"Associated taxa","occurrenceFieldNames.otherCatalogNumbers":"Other catalogue numbers","occurrenceFieldNames.occurrenceRemarks":"Occurrence remarks","occurrenceFieldNames.organismID":"Organism ID","occurrenceFieldNames.organismName":"Organism name","occurrenceFieldNames.organismScope":"Organism scope","occurrenceFieldNames.associatedOccurrences":"Associated occurrences","occurrenceFieldNames.associatedOrganisms":"Associated organisms","occurrenceFieldNames.previousIdentifications":"Previous identifications","occurrenceFieldNames.organismRemarks":"Organism remarks","occurrenceFieldNames.materialSampleID":"Material sample ID","occurrenceFieldNames.eventID":"Event ID","occurrenceFieldNames.parentEventID":"Parent event ID","occurrenceFieldNames.fieldNumber":"Field number","occurrenceFieldNames.eventDate":"Event date","occurrenceFieldNames.eventTime":"Event time","occurrenceFieldNames.startDayOfYear":"Start day of year","occurrenceFieldNames.endDayOfYear":"End day of year","occurrenceFieldNames.year":"Year","occurrenceFieldNames.month":"Month","occurrenceFieldNames.day":"Day","occurrenceFieldNames.verbatimEventDate":"Verbatim event date","occurrenceFieldNames.habitat":"Habitat","occurrenceFieldNames.samplingProtocol":"Sampling protocol","occurrenceFieldNames.samplingEffort":"Sampling effort","occurrenceFieldNames.sampleSizeValue":"Sample size value","occurrenceFieldNames.sampleSizeUnit":"Sample size unit","occurrenceFieldNames.fieldNotes":"Field notes","occurrenceFieldNames.eventRemarks":"Event remarks","occurrenceFieldNames.locationID":"Location ID","occurrenceFieldNames.higherGeographyID":"Higher geography ID","occurrenceFieldNames.higherGeography":"Higher geography","occurrenceFieldNames.continent":"Continent","occurrenceFieldNames.waterBody":"Water body","occurrenceFieldNames.islandGroup":"Island group","occurrenceFieldNames.island":"Island","occurrenceFieldNames.countryCode":"Country code","occurrenceFieldNames.stateProvince":"State province","occurrenceFieldNames.county":"County","occurrenceFieldNames.municipality":"Municipality","occurrenceFieldNames.locality":"Locality","occurrenceFieldNames.verbatimLocality":"Verbatim locality","occurrenceFieldNames.verbatimElevation":"Verbatim elevation","occurrenceFieldNames.verbatimDepth":"Verbatim depth","occurrenceFieldNames.minimumDistanceAboveSurfaceInMeters":"Minimum distance above surface in metres","occurrenceFieldNames.maximumDistanceAboveSurfaceInMeters":"Maximum distance above surface in metres","occurrenceFieldNames.location":"Location","occurrenceFieldNames.locationAccordingTo":"Location according to","occurrenceFieldNames.locationRemarks":"Location remarks","occurrenceFieldNames.decimalLatitude":"Decimal latitude","occurrenceFieldNames.decimalLongitude":"Decimal longitude","occurrenceFieldNames.coordinateUncertaintyInMeters":"Coordinate uncertainty in metres","occurrenceFieldNames.coordinatePrecision":"Coordinate precision","occurrenceFieldNames.pointRadiusSpatialFit":"Point radius spatial fit","occurrenceFieldNames.verbatimCoordinateSystem":"Verbatim coordinate system","occurrenceFieldNames.verbatimSRS":"Verbatim SRS","occurrenceFieldNames.footprintWKT":"Footprint WKT","occurrenceFieldNames.footprintSRS":"Footprint SRS","occurrenceFieldNames.footprintSpatialFit":"Footprint spatial fit","occurrenceFieldNames.georeferencedBy":"Georeferenced by","occurrenceFieldNames.georeferencedDate":"Georeferenced date","occurrenceFieldNames.georeferenceProtocol":"Georeference protocol","occurrenceFieldNames.georeferenceSources":"Georeference sources","occurrenceFieldNames.georeferenceVerificationStatus":"Georeference verification status","occurrenceFieldNames.georeferenceRemarks":"Georeference remarks","occurrenceFieldNames.geologicalContextID":"Geological context ID","occurrenceFieldNames.earliestEonOrLowestEonothem":"Earliest eon or lowest eonothem","occurrenceFieldNames.latestEonOrHighestEonothem":"Latest eon or highest eonothem","occurrenceFieldNames.earliestEraOrLowestErathem":"Earliest era or lowest erathem","occurrenceFieldNames.latestEraOrHighestErathem":"Latest era or highest erathem","occurrenceFieldNames.earliestPeriodOrLowestSystem":"Earliest period or lowest system","occurrenceFieldNames.latestPeriodOrHighestSystem":"Latest period or highest system","occurrenceFieldNames.earliestEpochOrLowestSeries":"Earliest epoch or lowest series","occurrenceFieldNames.latestEpochOrHighestSeries":"Latest epoch or highest series","occurrenceFieldNames.earliestAgeOrLowestStage":"Earliest age or lowest stage","occurrenceFieldNames.latestAgeOrHighestStage":"Latest age or highest stage","occurrenceFieldNames.lowestBiostratigraphicZone":"Lowest biostratigraphic zone","occurrenceFieldNames.highestBiostratigraphicZone":"Highest biostratigraphic zone","occurrenceFieldNames.lithostratigraphicTerms":"Lithostratigraphic terms","occurrenceFieldNames.group":"Group","occurrenceFieldNames.formation":"Formation","occurrenceFieldNames.member":"Member","occurrenceFieldNames.bed":"Bed","occurrenceFieldNames.identificationID":"Identification ID","occurrenceFieldNames.identificationQualifier":"Identification qualifier","occurrenceFieldNames.typeStatus":"Type status","occurrenceFieldNames.identifiedBy":"Identified by","occurrenceFieldNames.dateIdentified":"Date identified","occurrenceFieldNames.identificationReferences":"Identification references","occurrenceFieldNames.identificationVerificationStatus":"Identification verification status","occurrenceFieldNames.identificationRemarks":"Identification remarks","occurrenceFieldNames.taxonID":"Taxon ID","occurrenceFieldNames.scientificNameID":"Scientific name ID","occurrenceFieldNames.acceptedNameUsageID":"Accepted name usage ID","occurrenceFieldNames.parentNameUsageID":"Parent name usage ID","occurrenceFieldNames.originalNameUsageID":"Original name usage ID","occurrenceFieldNames.nameAccordingToID":"Name according to ID","occurrenceFieldNames.namePublishedInID":"Name published in ID","occurrenceFieldNames.taxonConceptID":"Taxon concept ID","occurrenceFieldNames.scientificName":"Scientific name","occurrenceFieldNames.acceptedNameUsage":"Accepted name usage","occurrenceFieldNames.acceptedName":"Accepted name","occurrenceFieldNames.appliedName":"Applied name","occurrenceFieldNames.parentNameUsage":"Parent name usage","occurrenceFieldNames.originalNameUsage":"Original name usage","occurrenceFieldNames.nameAccordingTo":"Name according to","occurrenceFieldNames.namePublishedIn":"Name published in","occurrenceFieldNames.namePublishedInYear":"Name published in year","occurrenceFieldNames.higherClassification":"Higher classification","occurrenceFieldNames.kingdom":"Kingdom","occurrenceFieldNames.phylum":"Phylum","occurrenceFieldNames.class":"Class","occurrenceFieldNames.order":"Order","occurrenceFieldNames.family":"Family","occurrenceFieldNames.genus":"Genus","occurrenceFieldNames.subgenus":"Subgenus","occurrenceFieldNames.specificEpithet":"Specific epithet","occurrenceFieldNames.infraspecificEpithet":"Infraspecific epithet","occurrenceFieldNames.taxonRank":"Rank","occurrenceFieldNames.verbatimTaxonRank":"Verbatim rank","occurrenceFieldNames.vernacularName":"Vernacular name","occurrenceFieldNames.nomenclaturalCode":"Nomenclatural code","occurrenceFieldNames.taxonomicStatus":"Taxonomic status","occurrenceFieldNames.nomenclaturalStatus":"Nomenclatural status","occurrenceFieldNames.taxonRemarks":"Taxon remarks","occurrenceFieldNames.datasetKey":"Dataset key","occurrenceFieldNames.publishingCountry":"Publishing country or area","occurrenceFieldNames.lastInterpreted":"Last interpreted","occurrenceFieldNames.elevation":"Elevation","occurrenceFieldNames.elevationAccuracy":"Elevation accuracy","occurrenceFieldNames.depth":"Depth","occurrenceFieldNames.depthAccuracy":"Depth accuracy","occurrenceFieldNames.distanceAboveSurface":"Distance above surface","occurrenceFieldNames.distanceAboveSurfaceAccuracy":"Distance above surface accuracy","occurrenceFieldNames.issue":"Issue","occurrenceFieldNames.mediaType":"Media type","occurrenceFieldNames.hasCoordinate":"Has coordinate","occurrenceFieldNames.hasGeospatialIssues":"Has geospatial issues","occurrenceFieldNames.taxonKey":"Taxon key","occurrenceFieldNames.kingdomKey":"Kingdom key","occurrenceFieldNames.phylumKey":"Phylum key","occurrenceFieldNames.classKey":"Class key","occurrenceFieldNames.orderKey":"Order key","occurrenceFieldNames.familyKey":"Family key","occurrenceFieldNames.genusKey":"Genus key","occurrenceFieldNames.subgenusKey":"Subgenus key","occurrenceFieldNames.speciesKey":"Species key","occurrenceFieldNames.species":"Species","occurrenceFieldNames.genericName":"Generic name","occurrenceFieldNames.typifiedName":"Typified name","occurrenceFieldNames.protocol":"Protocol","occurrenceFieldNames.lastParsed":"Last parsed","occurrenceFieldNames.lastCrawled":"Last crawled","occurrenceFieldNames.associatedMedia":"Associated media","occurrenceFieldNames.country":"Country or area","occurrenceFieldNames.minimumElevationInMeters":"Minimum elevation in metres","occurrenceFieldNames.maximumElevationInMeters":"Maximum elevation in metres","occurrenceFieldNames.minimumDepthInMeters":"Minimum depth in metres","occurrenceFieldNames.maximumDepthInMeters":"Maximum depth in metres","occurrenceFieldNames.geodeticDatum":"Geodetic datum","occurrenceFieldNames.verbatimCoordinates":"Verbatim coordinates","occurrenceFieldNames.verbatimLatitude":"Verbatim latitude","occurrenceFieldNames.verbatimLongitude":"Verbatim longitude","occurrenceFieldNames.scientificNameAuthorship":"Scientific name authorship","occurrenceFieldNames.undefined":"Unknown field","occurrenceFieldNames.coordinatesTextual":"This record is published without coordinates, but it includes a textual description of its location.","occurrenceFieldNames.coordinatesMissing":"Coordinates missing","occurrenceFieldNames.taxonomicClassification":"Classification","occurrenceFieldNames.gadmClassification":"Location according to GADM","occurrenceFieldNames.images":"Multimedia","occurrenceDetails.occurrence":"Occurrence","occurrenceDetails.showAllFields":"Show all fields","occurrenceDetails.morePhotos":"More photos","occurrenceDetails.about":"About","occurrenceDetails.dataset":"Dataset","occurrenceDetails.publisher":"Publisher","occurrenceDetails.institution":"Institution","occurrenceDetails.institutionGrSciColl":"GrSciColl institution","occurrenceDetails.collection":"Collection","occurrenceDetails.collectionGrSciColl":"GrSciColl collection","occurrenceDetails.recordedAndIdentifiedBy":"Recorded and identified by","occurrenceDetails.info.original":"original","occurrenceDetails.info.excluded":"Excluded","occurrenceDetails.info.inferred":"Inferred","occurrenceDetails.info.altered":"Altered","occurrenceDetails.groups.summary":"Summary","occurrenceDetails.groups.record":"Record","occurrenceDetails.groups.occurrence":"Occurrence","occurrenceDetails.groups.event":"Event","occurrenceDetails.groups.identification":"Identification","occurrenceDetails.groups.taxon":"Taxon","occurrenceDetails.groups.location":"Location","occurrenceDetails.groups.organism":"Organism","occurrenceDetails.groups.materialSample":"Material sample","occurrenceDetails.groups.geologicalContext":"Geological context","occurrenceDetails.groups.other":"Other","occurrenceDetails.features.isClustered":"Clustered","occurrenceDetails.features.isSamplingEvent":"Sampling event","occurrenceDetails.features.isTreament":"Treatment","occurrenceDetails.features.isSequenced":"Sequenced","download.unsupported.title":"Unsupported query","download.unsupported.description":"Free text search can be used for exploration but does not have download support.","download.unsupported.remove":"Remove filter","download.unsupported.error":"This query appears to be unsupported","download.download":"Download","download.redirectNotice":"You are about to download data and to do so, you will be redirected to GBIF.org. {br}{br} Be aware that an account is needed on GBIF.org to download the content.","download.continueToGBIF":"Continue","enums.basisOfRecord.PRESERVED_SPECIMEN":"Preserved specimen","enums.basisOfRecord.FOSSIL_SPECIMEN":"Fossil specimen","enums.basisOfRecord.LIVING_SPECIMEN":"Living specimen","enums.basisOfRecord.OBSERVATION":"Observation","enums.basisOfRecord.HUMAN_OBSERVATION":"Human observation","enums.basisOfRecord.MACHINE_OBSERVATION":"Machine observation","enums.basisOfRecord.MATERIAL_SAMPLE":"Material sample","enums.basisOfRecord.MATERIAL_CITATION":"Material citation","enums.basisOfRecord.LITERATURE":"Literature","enums.basisOfRecord.OCCURRENCE":"Occurrence","enums.countryCode.AF":"Afghanistan","enums.countryCode.AX":"Åland Islands","enums.countryCode.AL":"Albania","enums.countryCode.DZ":"Algeria","enums.countryCode.AS":"American Samoa","enums.countryCode.AD":"Andorra","enums.countryCode.AO":"Angola","enums.countryCode.AI":"Anguilla","enums.countryCode.AQ":"Antarctica","enums.countryCode.AG":"Antigua and Barbuda","enums.countryCode.AR":"Argentina","enums.countryCode.AM":"Armenia","enums.countryCode.AW":"Aruba","enums.countryCode.AU":"Australia","enums.countryCode.AT":"Austria","enums.countryCode.AZ":"Azerbaijan","enums.countryCode.BS":"Bahamas","enums.countryCode.BH":"Bahrain","enums.countryCode.BD":"Bangladesh","enums.countryCode.BB":"Barbados","enums.countryCode.BY":"Belarus","enums.countryCode.BE":"Belgium","enums.countryCode.BZ":"Belize","enums.countryCode.BJ":"Benin","enums.countryCode.BM":"Bermuda","enums.countryCode.BT":"Bhutan","enums.countryCode.BO":"Bolivia, Plurinational State of","enums.countryCode.BA":"Bosnia and Herzegovina","enums.countryCode.BW":"Botswana","enums.countryCode.BV":"Bouvet Island","enums.countryCode.BR":"Brazil","enums.countryCode.BQ":"Bonaire, Sint Eustatius and Saba","enums.countryCode.IO":"British Indian Ocean Territory","enums.countryCode.BN":"Brunei Darussalam","enums.countryCode.BG":"Bulgaria","enums.countryCode.BF":"Burkina Faso","enums.countryCode.BI":"Burundi","enums.countryCode.KH":"Cambodia","enums.countryCode.CM":"Cameroon","enums.countryCode.CA":"Canada","enums.countryCode.CV":"Cabo Verde","enums.countryCode.KY":"Cayman Islands","enums.countryCode.CF":"Central African Republic","enums.countryCode.TD":"Chad","enums.countryCode.CL":"Chile","enums.countryCode.CN":"China","enums.countryCode.CX":"Christmas Island","enums.countryCode.CC":"Cocos (Keeling) Islands","enums.countryCode.CO":"Colombia","enums.countryCode.KM":"Comoros","enums.countryCode.CG":"Congo","enums.countryCode.CD":"Congo, The Democratic Republic of the","enums.countryCode.CK":"Cook Islands","enums.countryCode.CR":"Costa Rica","enums.countryCode.CI":"Côte d’Ivoire","enums.countryCode.HR":"Croatia","enums.countryCode.CU":"Cuba","enums.countryCode.CW":"Curaçao","enums.countryCode.CY":"Cyprus","enums.countryCode.CZ":"Czechia","enums.countryCode.DK":"Denmark","enums.countryCode.DJ":"Djibouti","enums.countryCode.DM":"Dominica","enums.countryCode.DO":"Dominican Republic","enums.countryCode.EC":"Ecuador","enums.countryCode.EG":"Egypt","enums.countryCode.SV":"El Salvador","enums.countryCode.GQ":"Equatorial Guinea","enums.countryCode.ER":"Eritrea","enums.countryCode.EE":"Estonia","enums.countryCode.ET":"Ethiopia","enums.countryCode.FK":"Falkland Islands (Malvinas)","enums.countryCode.FO":"Faroe Islands","enums.countryCode.FJ":"Fiji","enums.countryCode.FI":"Finland","enums.countryCode.FR":"France","enums.countryCode.GF":"French Guiana","enums.countryCode.PF":"French Polynesia","enums.countryCode.TF":"French Southern Territories","enums.countryCode.GA":"Gabon","enums.countryCode.GM":"Gambia","enums.countryCode.GE":"Georgia","enums.countryCode.DE":"Germany","enums.countryCode.GH":"Ghana","enums.countryCode.GI":"Gibraltar","enums.countryCode.GR":"Greece","enums.countryCode.GL":"Greenland","enums.countryCode.GD":"Grenada","enums.countryCode.GP":"Guadeloupe","enums.countryCode.GU":"Guam","enums.countryCode.GT":"Guatemala","enums.countryCode.GG":"Guernsey","enums.countryCode.GN":"Guinea","enums.countryCode.GW":"Guinea-Bissau","enums.countryCode.GY":"Guyana","enums.countryCode.HT":"Haiti","enums.countryCode.HM":"Heard Island and Mcdonald Islands","enums.countryCode.VA":"Holy See","enums.countryCode.HN":"Honduras","enums.countryCode.HK":"Hong Kong","enums.countryCode.HU":"Hungary","enums.countryCode.IS":"Iceland","enums.countryCode.IN":"India","enums.countryCode.ID":"Indonesia","enums.countryCode.IR":"Iran, Islamic Republic Of","enums.countryCode.IQ":"Iraq","enums.countryCode.IE":"Ireland","enums.countryCode.IM":"Isle of Man","enums.countryCode.IL":"Israel","enums.countryCode.IT":"Italy","enums.countryCode.JM":"Jamaica","enums.countryCode.JP":"Japan","enums.countryCode.JE":"Jersey","enums.countryCode.JO":"Jordan","enums.countryCode.KZ":"Kazakhstan","enums.countryCode.KE":"Kenya","enums.countryCode.KI":"Kiribati","enums.countryCode.KP":"Korea, Democratic People’s Republic of","enums.countryCode.KR":"Korea, Republic of","enums.countryCode.XK":"Kosovo","enums.countryCode.KW":"Kuwait","enums.countryCode.KG":"Kyrgyzstan","enums.countryCode.LA":"Lao People’s Democratic Republic","enums.countryCode.LV":"Latvia","enums.countryCode.LB":"Lebanon","enums.countryCode.LS":"Lesotho","enums.countryCode.LR":"Liberia","enums.countryCode.LY":"Libya","enums.countryCode.LI":"Liechtenstein","enums.countryCode.LT":"Lithuania","enums.countryCode.LU":"Luxembourg","enums.countryCode.MO":"Macao","enums.countryCode.MK":"North Macedonia","enums.countryCode.MG":"Madagascar","enums.countryCode.MW":"Malawi","enums.countryCode.MY":"Malaysia","enums.countryCode.MV":"Maldives","enums.countryCode.ML":"Mali","enums.countryCode.MT":"Malta","enums.countryCode.MH":"Marshall Islands","enums.countryCode.MQ":"Martinique","enums.countryCode.MR":"Mauritania","enums.countryCode.MU":"Mauritius","enums.countryCode.YT":"Mayotte","enums.countryCode.MX":"Mexico","enums.countryCode.FM":"Micronesia, Federated States of","enums.countryCode.MD":"Moldova, Republic of","enums.countryCode.MC":"Monaco","enums.countryCode.MN":"Mongolia","enums.countryCode.ME":"Montenegro","enums.countryCode.MS":"Montserrat","enums.countryCode.MA":"Morocco","enums.countryCode.MZ":"Mozambique","enums.countryCode.MM":"Myanmar","enums.countryCode.NA":"Namibia","enums.countryCode.NR":"Nauru","enums.countryCode.NP":"Nepal","enums.countryCode.NL":"Netherlands","enums.countryCode.AN":"Netherlands Antilles","enums.countryCode.NC":"New Caledonia","enums.countryCode.NZ":"New Zealand","enums.countryCode.NI":"Nicaragua","enums.countryCode.NE":"Niger","enums.countryCode.NG":"Nigeria","enums.countryCode.NU":"Niue","enums.countryCode.NF":"Norfolk Island","enums.countryCode.MP":"Northern Mariana Islands","enums.countryCode.NO":"Norway","enums.countryCode.OM":"Oman","enums.countryCode.PK":"Pakistan","enums.countryCode.PW":"Palau","enums.countryCode.PS":"Palestine, State of","enums.countryCode.PA":"Panama","enums.countryCode.PG":"Papua New Guinea","enums.countryCode.PY":"Paraguay","enums.countryCode.PE":"Peru","enums.countryCode.PH":"Philippines","enums.countryCode.PN":"Pitcairn","enums.countryCode.PL":"Poland","enums.countryCode.PT":"Portugal","enums.countryCode.PR":"Puerto Rico","enums.countryCode.QA":"Qatar","enums.countryCode.RE":"Réunion","enums.countryCode.RO":"Romania","enums.countryCode.RU":"Russian Federation","enums.countryCode.RW":"Rwanda","enums.countryCode.SH":"Saint Helena, Ascension and Tristan da Cunha","enums.countryCode.KN":"Saint Kitts and Nevis","enums.countryCode.LC":"Saint Lucia","enums.countryCode.BL":"Saint Barthélemy","enums.countryCode.MF":"Saint Martin (French part)","enums.countryCode.PM":"Saint Pierre and Miquelon","enums.countryCode.VC":"Saint Vincent and the Grenadines","enums.countryCode.WS":"Samoa","enums.countryCode.SM":"San Marino","enums.countryCode.ST":"Sao Tome and Principe","enums.countryCode.SA":"Saudi Arabia","enums.countryCode.SN":"Senegal","enums.countryCode.RS":"Serbia","enums.countryCode.SC":"Seychelles","enums.countryCode.SL":"Sierra Leone","enums.countryCode.SG":"Singapore","enums.countryCode.SX":"Sint Maarten (Dutch part)","enums.countryCode.SK":"Slovakia","enums.countryCode.SI":"Slovenia","enums.countryCode.SB":"Solomon Islands","enums.countryCode.SO":"Somalia","enums.countryCode.ZA":"South Africa","enums.countryCode.GS":"South Georgia and the South Sandwich Islands","enums.countryCode.ES":"Spain","enums.countryCode.LK":"Sri Lanka","enums.countryCode.SD":"Sudan","enums.countryCode.SR":"Suriname","enums.countryCode.SS":"South Sudan","enums.countryCode.SJ":"Svalbard and Jan Mayen","enums.countryCode.SZ":"Eswatini","enums.countryCode.SE":"Sweden","enums.countryCode.CH":"Switzerland","enums.countryCode.SY":"Syrian Arab Republic","enums.countryCode.TW":"Taiwan","enums.countryCode.TJ":"Tajikistan","enums.countryCode.TZ":"Tanzania, United Republic of","enums.countryCode.TH":"Thailand","enums.countryCode.TL":"Timor-Leste","enums.countryCode.TG":"Togo","enums.countryCode.TK":"Tokelau","enums.countryCode.TO":"Tonga","enums.countryCode.TT":"Trinidad and Tobago","enums.countryCode.TN":"Tunisia","enums.countryCode.TR":"Turkey","enums.countryCode.TM":"Turkmenistan","enums.countryCode.TC":"Turks and Caicos Islands","enums.countryCode.TV":"Tuvalu","enums.countryCode.UG":"Uganda","enums.countryCode.UA":"Ukraine","enums.countryCode.AE":"United Arab Emirates","enums.countryCode.GB":"United Kingdom","enums.countryCode.US":"United States of America","enums.countryCode.UM":"United States Minor Outlying Islands","enums.countryCode.UY":"Uruguay","enums.countryCode.UZ":"Uzbekistan","enums.countryCode.VU":"Vanuatu","enums.countryCode.VE":"Venezuela, Bolivarian Republic of","enums.countryCode.VN":"Viet Nam","enums.countryCode.VG":"Virgin Islands, British","enums.countryCode.VI":"Virgin Islands, U.S.","enums.countryCode.WF":"Wallis and Futuna","enums.countryCode.EH":"Western Sahara","enums.countryCode.YE":"Yemen","enums.countryCode.ZM":"Zambia","enums.countryCode.XZ":"International waters","enums.countryCode.ZW":"Zimbabwe","enums.countryCode.QO":"Oceania","enums.countryCode.ZZ":"Unknown country","enums.mediaType.StillImage":"Still image","enums.mediaType.MovingImage":"Moving image","enums.mediaType.Sound":"Sound","enums.occurrenceIssue.ZERO_COORDINATE":"Zero coordinate","enums.occurrenceIssue.COORDINATE_OUT_OF_RANGE":"Coordinate out of range","enums.occurrenceIssue.COORDINATE_INVALID":"Coordinate invalid","enums.occurrenceIssue.COORDINATE_ROUNDED":"Coordinate rounded","enums.occurrenceIssue.GEODETIC_DATUM_INVALID":"Geodetic datum invalid","enums.occurrenceIssue.GEODETIC_DATUM_ASSUMED_WGS84":"Geodetic datum assumed WGS84","enums.occurrenceIssue.COORDINATE_REPROJECTED":"Coordinate reprojected","enums.occurrenceIssue.COORDINATE_REPROJECTION_FAILED":"Coordinate reprojection failed","enums.occurrenceIssue.COORDINATE_REPROJECTION_SUSPICIOUS":"Coordinate reprojection suspicious","enums.occurrenceIssue.COORDINATE_ACCURACY_INVALID":"Coordinate accuracy invalid","enums.occurrenceIssue.COORDINATE_PRECISION_INVALID":"Coordinate precision invalid","enums.occurrenceIssue.COORDINATE_UNCERTAINTY_METERS_INVALID":"Coordinate uncertainty metres invalid","enums.occurrenceIssue.COORDINATE_PRECISION_UNCERTAINTY_MISMATCH":"Coordinate precision uncertainty mismatch","enums.occurrenceIssue.FOOTPRINT_SRS_INVALID":"Footprint SRS invalid","enums.occurrenceIssue.FOOTPRINT_WKT_INVALID":"Footprint WKT invalid","enums.occurrenceIssue.COUNTRY_COORDINATE_MISMATCH":"Country coordinate mismatch","enums.occurrenceIssue.COUNTRY_MISMATCH":"Country mismatch","enums.occurrenceIssue.COUNTRY_INVALID":"Country invalid","enums.occurrenceIssue.COUNTRY_DERIVED_FROM_COORDINATES":"Country derived from coordinates","enums.occurrenceIssue.CONTINENT_COUNTRY_MISMATCH":"Continent country mismatch","enums.occurrenceIssue.CONTINENT_INVALID":"Continent invalid","enums.occurrenceIssue.CONTINENT_DERIVED_FROM_COORDINATES":"Continent derived from coordinates","enums.occurrenceIssue.PRESUMED_SWAPPED_COORDINATE":"Presumed swapped coordinate","enums.occurrenceIssue.PRESUMED_NEGATED_LONGITUDE":"Presumed negated longitude","enums.occurrenceIssue.PRESUMED_NEGATED_LATITUDE":"Presumed negated latitude","enums.occurrenceIssue.RECORDED_DATE_MISMATCH":"Recorded date mismatch","enums.occurrenceIssue.RECORDED_DATE_INVALID":"Recorded date invalid","enums.occurrenceIssue.RECORDED_DATE_UNLIKELY":"Recorded date unlikely","enums.occurrenceIssue.TAXON_MATCH_FUZZY":"Taxon match fuzzy","enums.occurrenceIssue.TAXON_MATCH_HIGHERRANK":"Taxon match higherrank","enums.occurrenceIssue.TAXON_MATCH_AGGREGATE":"Taxon match aggregate","enums.occurrenceIssue.TAXON_MATCH_NONE":"Taxon match none","enums.occurrenceIssue.DEPTH_NOT_METRIC":"Depth not metric","enums.occurrenceIssue.DEPTH_UNLIKELY":"Depth unlikely","enums.occurrenceIssue.DEPTH_MIN_MAX_SWAPPED":"Depth min/max swapped","enums.occurrenceIssue.DEPTH_NON_NUMERIC":"Depth non numeric","enums.occurrenceIssue.ELEVATION_UNLIKELY":"Elevation unlikely","enums.occurrenceIssue.ELEVATION_MIN_MAX_SWAPPED":"Elevation min/max swapped","enums.occurrenceIssue.ELEVATION_NOT_METRIC":"Elevation not metric","enums.occurrenceIssue.ELEVATION_NON_NUMERIC":"Elevation non numeric","enums.occurrenceIssue.MODIFIED_DATE_INVALID":"Modified date invalid","enums.occurrenceIssue.MODIFIED_DATE_UNLIKELY":"Modified date unlikely","enums.occurrenceIssue.IDENTIFIED_DATE_UNLIKELY":"Identified date unlikely","enums.occurrenceIssue.IDENTIFIED_DATE_INVALID":"Identified date invalid","enums.occurrenceIssue.BASIS_OF_RECORD_INVALID":"Basis of record invalid","enums.occurrenceIssue.TYPE_STATUS_INVALID":"Type status invalid","enums.occurrenceIssue.MULTIMEDIA_DATE_INVALID":"Multimedia date invalid","enums.occurrenceIssue.MULTIMEDIA_URI_INVALID":"Multimedia URI invalid","enums.occurrenceIssue.REFERENCES_URI_INVALID":"References URI invalid","enums.occurrenceIssue.INTERPRETATION_ERROR":"Interpretation error","enums.occurrenceIssue.INDIVIDUAL_COUNT_INVALID":"Individual count invalid","enums.occurrenceIssue.INDIVIDUAL_COUNT_CONFLICTS_WITH_OCCURRENCE_STATUS":"Individual count conflicts with occurrence status","enums.occurrenceIssue.OCCURRENCE_STATUS_UNPARSABLE":"Occurrence status unparsable","enums.occurrenceIssue.OCCURRENCE_STATUS_INFERRED_FROM_INDIVIDUAL_COUNT":"Occurrence status inferred from individual count","enums.occurrenceIssue.OCCURRENCE_STATUS_INFERRED_FROM_BASIS_OF_RECORD":"Occurrence status inferred from basis of record","enums.occurrenceIssue.GEOREFERENCED_DATE_UNLIKELY":"Georeferenced date unlikely","enums.occurrenceIssue.GEOREFERENCED_DATE_INVALID":"Georeferenced date invalid","enums.occurrenceIssue.AMBIGUOUS_INSTITUTION":"Ambiguous institution","enums.occurrenceIssue.AMBIGUOUS_COLLECTION":"Ambiguous collection","enums.occurrenceIssue.INSTITUTION_MATCH_NONE":"Institution match none","enums.occurrenceIssue.COLLECTION_MATCH_NONE":"Collection match none","enums.occurrenceIssue.INSTITUTION_MATCH_FUZZY":"Institution match fuzzy","enums.occurrenceIssue.COLLECTION_MATCH_FUZZY":"Collection match fuzzy","enums.occurrenceIssue.INSTITUTION_COLLECTION_MISMATCH":"Institution collection mismatch","enums.occurrenceIssue.POSSIBLY_ON_LOAN":"Possibly on loan","enums.occurrenceIssue.DIFFERENT_OWNER_INSTITUTION":"Different owner institution","enums.typeStatus.TYPE":"Type","enums.typeStatus.TYPE_SPECIES":"Type species","enums.typeStatus.TYPE_GENUS":"Type genus","enums.typeStatus.ALLOLECTOTYPE":"Allolectotype","enums.typeStatus.ALLONEOTYPE":"Alloneotype","enums.typeStatus.ALLOTYPE":"Allotype","enums.typeStatus.COTYPE":"Cotype","enums.typeStatus.EPITYPE":"Epitype","enums.typeStatus.EXEPITYPE":"Ex-epitype","enums.typeStatus.EXHOLOTYPE":"Ex-holotype","enums.typeStatus.EXISOTYPE":"Ex-isotype","enums.typeStatus.EXLECTOTYPE":"Ex-lectotype","enums.typeStatus.EXNEOTYPE":"Ex-neotype","enums.typeStatus.EXPARATYPE":"Ex-paratype","enums.typeStatus.EXSYNTYPE":"Ex-syntype","enums.typeStatus.EXTYPE":"Ex-type","enums.typeStatus.HAPANTOTYPE":"Hapantotype","enums.typeStatus.HOLOTYPE":"Holotype","enums.typeStatus.ICONOTYPE":"Iconotype","enums.typeStatus.ISOLECTOTYPE":"Isolectotype","enums.typeStatus.ISONEOTYPE":"Isoneotype","enums.typeStatus.ISOSYNTYPE":"Isosyntype","enums.typeStatus.ISOTYPE":"Isotype","enums.typeStatus.LECTOTYPE":"Lectotype","enums.typeStatus.NEOTYPE":"Neotype","enums.typeStatus.PARALECTOTYPE":"Paralectotype","enums.typeStatus.PARANEOTYPE":"Paraneotype","enums.typeStatus.PARATYPE":"Paratype","enums.typeStatus.PLASTOHOLOTYPE":"Plastoholotype","enums.typeStatus.PLASTOISOTYPE":"Plastoisotype","enums.typeStatus.PLASTOLECTOTYPE":"Plastolectotype","enums.typeStatus.PLASTONEOTYPE":"Plastoneotype","enums.typeStatus.PLASTOPARATYPE":"Plastoparatype","enums.typeStatus.PLASTOSYNTYPE":"Plastosyntype","enums.typeStatus.PLASTOTYPE":"Plastotype","enums.typeStatus.SECONDARYTYPE":"Secondary type","enums.typeStatus.SUPPLEMENTARYTYPE":"Supplementary type","enums.typeStatus.SYNTYPE":"Syntype","enums.typeStatus.TOPOTYPE":"Topotype","enums.typeStatus.ORIGINALMATERIAL":"Original material","enums.typeStatus.NOTATYPE":"Not a type","enums.taxonRank.undefined":"Unknown taxon","enums.taxonRank.UNKNOWN":"Unknown","enums.taxonRank.DOMAIN":"Domain","enums.taxonRank.SUPERKINGDOM":"Superkingdom","enums.taxonRank.KINGDOM":"Kingdom","enums.taxonRank.SUBKINGDOM":"Subkingdom","enums.taxonRank.INFRAKINGDOM":"Infrakingdom","enums.taxonRank.SUPERPHYLUM":"Superphylum","enums.taxonRank.PHYLUM":"Phylum","enums.taxonRank.SUBPHYLUM":"Subphylum","enums.taxonRank.INFRAPHYLUM":"Infraphylum","enums.taxonRank.SUPERCLASS":"Superclass","enums.taxonRank.CLASS":"Class","enums.taxonRank.SUBCLASS":"Subclass","enums.taxonRank.INFRACLASS":"Infraclass","enums.taxonRank.PARVCLASS":"Parvclass","enums.taxonRank.SUPERLEGION":"Superlegion","enums.taxonRank.LEGION":"Legion","enums.taxonRank.SUBLEGION":"Sublegion","enums.taxonRank.INFRALEGION":"Infralegion","enums.taxonRank.SUPERCOHORT":"Supercohort","enums.taxonRank.COHORT":"Cohort","enums.taxonRank.SUBCOHORT":"Subcohort","enums.taxonRank.INFRACOHORT":"Infracohort","enums.taxonRank.MAGNORDER":"Magnorder","enums.taxonRank.SUPERORDER":"Superorder","enums.taxonRank.GRANDORDER":"Grandorder","enums.taxonRank.ORDER":"Order","enums.taxonRank.SUBORDER":"Suborder","enums.taxonRank.INFRAORDER":"Infraorder","enums.taxonRank.PARVORDER":"Parvorder","enums.taxonRank.SUPERFAMILY":"Superfamily","enums.taxonRank.FAMILY":"Family","enums.taxonRank.SUBFAMILY":"Subfamily","enums.taxonRank.INFRAFAMILY":"Infrafamily","enums.taxonRank.SUPERTRIBE":"Supertribe","enums.taxonRank.TRIBE":"Tribe","enums.taxonRank.SUBTRIBE":"Subtribe","enums.taxonRank.INFRATRIBE":"Infratribe","enums.taxonRank.SUPRAGENERIC_NAME":"Suprageneric name","enums.taxonRank.GENUS":"Genus","enums.taxonRank.SUBGENUS":"Subgenus","enums.taxonRank.INFRAGENUS":"Infragenus","enums.taxonRank.SECTION":"Section","enums.taxonRank.SUBSECTION":"Subsection","enums.taxonRank.SERIES":"Series","enums.taxonRank.SUBSERIES":"Subseries","enums.taxonRank.INFRAGENERIC_NAME":"Infrageneric name","enums.taxonRank.SPECIES_AGGREGATE":"Species aggregate","enums.taxonRank.SPECIES":"Species","enums.taxonRank.INFRASPECIFIC_NAME":"Infraspecific name","enums.taxonRank.GREX":"Grex","enums.taxonRank.SUBSPECIES":"Subspecies","enums.taxonRank.CULTIVAR_GROUP":"Cultivar group","enums.taxonRank.CONVARIETY":"Convariety","enums.taxonRank.INFRASUBSPECIFIC_NAME":"Infrasubspecific name","enums.taxonRank.PROLES":"Proles","enums.taxonRank.RACE":"Race","enums.taxonRank.NATIO":"Natio","enums.taxonRank.ABERRATION":"Aberration","enums.taxonRank.MORPH":"Morph","enums.taxonRank.VARIETY":"Variety","enums.taxonRank.SUBVARIETY":"Subvariety","enums.taxonRank.FORM":"Form","enums.taxonRank.SUBFORM":"Subform","enums.taxonRank.PATHOVAR":"Pathovar","enums.taxonRank.BIOVAR":"Biovar","enums.taxonRank.CHEMOVAR":"Chemovar","enums.taxonRank.MORPHOVAR":"Morphovar","enums.taxonRank.PHAGOVAR":"Phagovar","enums.taxonRank.SEROVAR":"Serovar","enums.taxonRank.CHEMOFORM":"Chemoform","enums.taxonRank.FORMA_SPECIALIS":"Forma specialis","enums.taxonRank.CULTIVAR":"Cultivar","enums.taxonRank.STRAIN":"Strain","enums.taxonRank.OTHER":"Other","enums.taxonRank.UNRANKED":"Unranked","enums.taxonomicStatus.ACCEPTED":"Accepted","enums.taxonomicStatus.DOUBTFUL":"Doubtful","enums.taxonomicStatus.SYNONYM":"Synonym","enums.taxonomicStatus.HETEROTYPIC_SYNONYM":"Heterotypic synonym","enums.taxonomicStatus.HOMOTYPIC_SYNONYM":"Homotypic synonym","enums.taxonomicStatus.PROPARTE_SYNONYM":"Proparte synonym","enums.taxonomicStatus.MISAPPLIED":"Misapplied","enums.taxonomicStatus.INTERMEDIATE_RANK_SYNONYM":"Intermediate rank synonym","enums.taxonomicStatus.DETERMINATION_SYNONYM":"Determination synonym","enums.license.CC0_1_0":"CC0 1.0","enums.license.CC_BY_4_0":"CC BY 4.0","enums.license.CC_BY_NC_4_0":"CC BY-NC 4.0","enums.license.UNSPECIFIED":"Unspecified","enums.license.UNSUPPORTED":"Unsupported","enums.month.1":"January","enums.month.2":"February","enums.month.3":"March","enums.month.4":"April","enums.month.5":"May","enums.month.6":"June","enums.month.7":"July","enums.month.8":"August","enums.month.9":"September","enums.month.10":"October","enums.month.11":"November","enums.month.12":"December","enums.continent.AFRICA":"Africa","enums.continent.ANTARCTICA":"Antarctica","enums.continent.ASIA":"Asia","enums.continent.EUROPE":"Europe","enums.continent.NORTH_AMERICA":"North America","enums.continent.OCEANIA":"Oceania","enums.continent.SOUTH_AMERICA":"South America","enums.endpointType.EML":"EML","enums.endpointType.FEED":"RSS feed","enums.endpointType.WFS":"WFS","enums.endpointType.WMS":"WMS","enums.endpointType.TCS_RDF":"TCS RDF","enums.endpointType.TCS_XML":"TCS XML","enums.endpointType.DWC_ARCHIVE":"Darwin Core Archive","enums.endpointType.DIGIR":"DiGIR","enums.endpointType.DIGIR_MANIS":"DiGIR MANIS","enums.endpointType.TAPIR":"TAPIR","enums.endpointType.BIOCASE":"BioCASe","enums.endpointType.BIOCASE_XML_ARCHIVE":"BioCASe XML Archive","enums.endpointType.OAI_PMH":"OAI PMH","enums.endpointType.OTHER":"Other","enums.establishmentMeans.NATIVE":"Native","enums.establishmentMeans.INTRODUCED":"Introduced","enums.establishmentMeans.NATURALISED":"Naturalized","enums.establishmentMeans.INVASIVE":"Invasive","enums.establishmentMeans.MANAGED":"Managed","enums.establishmentMeans.UNCERTAIN":"Uncertain","enums.occurrenceStatus.PRESENT":"Present","enums.occurrenceStatus.ABSENT":"Absent","enums.literatureType.JOURNAL":"Journal article","enums.literatureType.BOOK":"Book","enums.literatureType.GENERIC":"Generic","enums.literatureType.BOOK_SECTION":"Book section","enums.literatureType.CONFERENCE_PROCEEDINGS":"Conference proceedings","enums.literatureType.WORKING_PAPER":"Preprint","enums.literatureType.REPORT":"Report","enums.literatureType.WEB_PAGE":"Web page","enums.literatureType.THESIS":"Thesis","enums.literatureType.MAGAZINE_ARTICLE":"Magazine article","enums.literatureType.STATUTE":"Statute","enums.literatureType.PATENT":"Patent","enums.literatureType.NEWSPAPER_ARTICLE":"Newspaper article","enums.literatureType.COMPUTER_PROGRAM":"Computer program","enums.literatureType.HEARING":"Hearing","enums.literatureType.TELEVISION_BROADCAST":"Television broadcast","enums.literatureType.ENCYCLOPEDIA_ARTICLE":"Encyclopaedia article","enums.literatureType.CASE":"Case","enums.literatureType.FILM":"Film","enums.literatureType.BILL":"Bill","enums.role.TECHNICAL_POINT_OF_CONTACT":"Technical point of contact","enums.role.ADMINISTRATIVE_POINT_OF_CONTACT":"Administrative point of contact","enums.role._PRIMARY_CONTACT":"Primary contact","enums.role.POINT_OF_CONTACT":"Point of contact","enums.role.ORIGINATOR":"Originator","enums.role.GBIFS_STAFF_MEMBER":"GBIF staff member","enums.role.METADATA_AUTHOR":"Metadata author","enums.role.PRINCIPAL_INVESTIGATOR":"Principal investigator","enums.role.AUTHOR":"Author","enums.role.CONTENT_PROVIDER":"Content provider","enums.role.CUSTODIAN_STEWARD":"Custodian steward","enums.role.DISTRIBUTOR":"Distributor","enums.role.EDITOR":"Editor","enums.role.OWNER":"Owner","enums.role.PROCESSOR":"Processor","enums.role.PUBLISHER":"Publisher","enums.role.USER":"User","enums.role.PROGRAMMER":"Programmer","enums.role.CURATOR":"Curator","enums.role.DATA_ADMINISTRATOR":"Data administrator","enums.role.SYSTEM_ADMINISTRATOR":"System administrator","enums.role.ADDITIONAL_DELEGATE":"Additional delegate","enums.role.BUDGET_COMMITTEE_1ST_VICE_CHAIR":"Budget committee 1st vice chair","enums.role.BUDGET_COMMITTEE_2ND_VICE_CHAIR":"Budget committee 2nd vice chair","enums.role.BUDGET_COMMITTEE_CHAIR":"Budget committee chair","enums.role.BUDGET_COMMITTEE_MEMBER":"Budget committee member","enums.role.EXECUTIVE_SECRETARY":"Executive secretary","enums.role.GOVERNING_BOARD_1ST_VICE_CHAIR":"Governing board 1st vice chair","enums.role.GOVERNING_BOARD_2ND_VICE_CHAIR":"Governing board 2nd vice chair","enums.role.GOVERNING_BOARD_3RD_VICE_CHAIR":"Governing board 3rd vice chair","enums.role.GOVERNING_BOARD_CHAIR":"Governing board chair","enums.role.GOVERNING_BOARD_OBSERVER":"Governing board observer","enums.role.HEAD_OF_DELEGATION":"Head of delegation","enums.role.NODE_MANAGER":"Node manager","enums.role.NODE_STAFF":"Node staff","enums.role.NODES_COMMITTEE_1ST_VICE_CHAIR":"Nodes committee 1st vice chair","enums.role.NODES_COMMITTEE_2ND_VICE_CHAIR":"Nodes committee 2nd vice chair","enums.role.NODES_COMMITTEE_CHAIR":"Nodes committee chair","enums.role.NODES_REGIONAL_REPRESENTATIVE_AFRICA":"Nodes regional representative Africa","enums.role.NODES_REGIONAL_REPRESENTATIVE_ASIA":"Nodes regional representative Asia","enums.role.NODES_REGIONAL_REPRESENTATIVE_LATIN_AMERICA":"Nodes regional representative Latin America and the Caribbean","enums.role.NODES_REGIONAL_REPRESENTATIVE_DEPUTY_AFRICA":"Nodes regional representative deputy Africa","enums.role.NODES_REGIONAL_REPRESENTATIVE_DEPUTY_ASIA":"Nodes regional representative deputy Asia","enums.role.NODES_REGIONAL_REPRESENTATIVE_DEPUTY_EUROPE":"Nodes regional representative deputy Europe and Central Asia","enums.role.NODES_REGIONAL_REPRESENTATIVE_DEPUTY_LATIN_AMERICA":"Nodes regional representative deputy Latin America and the Caribbean","enums.role.NODES_REGIONAL_REPRESENTATIVE_EUROPE":"Nodes regional representative Europe and Central Asia","enums.role.NODES_REGIONAL_REPRESENTATIVE_NORTH_AMERICA":"Nodes regional representative North America","enums.role.NODES_REGIONAL_REPRESENTATIVE_DEPUTY_NORTH_AMERICA":"Nodes regional representative deputy North America","enums.role.REGIONAL_NODE_REPRESENTATIVE":"Regional node representative","enums.role.SCIENCE_COMMITTEE_1ST_VICE_CHAIR":"Science committee 1st vice chair","enums.role.SCIENCE_COMMITTEE_2ND_VICE_CHAIR":"Science committee 2nd vice chair","enums.role.SCIENCE_COMMITTEE_3RD_VICE_CHAIR":"Science committee 3rd vice chair","enums.role.SCIENCE_COMMITTEE_CHAIR":"Science committee chair","enums.role.SCIENCE_COMMITTEE_MEMBER":"Science committee member","enums.role.TEMPORARY_DELEGATE":"Temporary delegate","enums.role.TEMPORARY_HEAD_OF_DELEGATION":"Temporary head of delegation","enums.isInCluster.true":"Yes","enums.isInCluster.false":"No","enums.datasetType.OCCURRENCE":"Occurrence","enums.datasetType.CHECKLIST":"Checklist","enums.datasetType.METADATA":"Metadata","enums.datasetType.SAMPLING_EVENT":"Sampling event","enums.datasetSubtype.TAXONOMIC_AUTHORITY":"Taxonomic authority","enums.datasetSubtype.NOMENCLATOR_AUTHORITY":"Nomenclator authority","enums.datasetSubtype.INVENTORY_THEMATIC":"Inventory thematic","enums.datasetSubtype.INVENTORY_REGIONAL":"Inventory regional","enums.datasetSubtype.GLOBAL_SPECIES_DATASET":"Global species dataset","enums.datasetSubtype.DERIVED_FROM_OCCURRENCE":"Derived from occurrence","enums.datasetSubtype.SPECIMEN":"Specimen","enums.datasetSubtype.OBSERVATION":"Observation","enums.dwcaExtension.http://rs.tdwg.org/dwc/terms/Occurrence":"Occurrence","enums.dwcaExtension.http://rs.tdwg.org/ac/terms/Multimedia":"Audubon multimedia","enums.dwcaExtension.http://data.ggbn.org/schemas/ggbn/terms/Amplification":"Amplification","enums.dwcaExtension.http://data.ggbn.org/schemas/ggbn/terms/Cloning":"Cloning","enums.dwcaExtension.http://data.ggbn.org/schemas/ggbn/terms/GelImage":"GelImage","enums.dwcaExtension.http://data.ggbn.org/schemas/ggbn/terms/Loan":"Loan","enums.dwcaExtension.http://data.ggbn.org/schemas/ggbn/terms/MaterialSample":"Material sample","enums.dwcaExtension.http://data.ggbn.org/schemas/ggbn/terms/Permit":"Permit","enums.dwcaExtension.http://data.ggbn.org/schemas/ggbn/terms/Preparation":"Preparation","enums.dwcaExtension.http://data.ggbn.org/schemas/ggbn/terms/Preservation":"Preservation","enums.dwcaExtension.http://rs.iobis.org/obis/terms/ExtendedMeasurementOrFact":"Extended measurement or fact","enums.dwcaExtension.http://rs.tdwg.org/chrono/terms/ChronometricAge":"Chronometric age","enums.dwcaExtension.http://purl.org/germplasm/germplasmTerm#GermplasmAccession":"Germplasm: Germplasm accession","enums.dwcaExtension.http://purl.org/germplasm/germplasmTerm#MeasurementScore":"Germplasm: Measurement score","enums.dwcaExtension.http://purl.org/germplasm/germplasmTerm#MeasurementTrait":"Germplasm: Measurement trait","enums.dwcaExtension.http://purl.org/germplasm/germplasmTerm#MeasurementTrial":"Germplasm: Measurement trial","enums.dwcaExtension.http://rs.tdwg.org/dwc/terms/Identification":"Identification","enums.dwcaExtension.http://rs.gbif.org/terms/1.0/Identifier":"Identifier","enums.dwcaExtension.http://rs.gbif.org/terms/1.0/Image":"Image","enums.dwcaExtension.http://rs.tdwg.org/dwc/terms/MeasurementOrFact":"Measurement or fact","enums.dwcaExtension.http://rs.gbif.org/terms/1.0/Multimedia":"Multimedia","enums.dwcaExtension.http://rs.gbif.org/terms/1.0/Reference":"Reference","enums.dwcaExtension.http://rs.tdwg.org/dwc/terms/ResourceRelationship":"Resource relationship"}')},function(t,e){t.exports=function(t){return void 0===t}},function(t,e,n){"use strict";n.d(e,"c",(function(){return l})),n.d(e,"a",(function(){return u}));var r=n(194),i=n(108),o=(n(7),n(127)),a=n(16),s=function(){function t(t){var e=t||{};this.geometry_=null,this.geometryFunction_=h,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.hitDetectionRenderer_=void 0!==e.hitDetectionRenderer?e.hitDetectionRenderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}return t.prototype.clone=function(){var e=this.getGeometry();return e&&"object"==typeof e&&(e=e.clone()),new t({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.setRenderer=function(t){this.renderer_=t},t.prototype.setHitDetectionRenderer=function(t){this.hitDetectionRenderer_=t},t.prototype.getHitDetectionRenderer=function(){return this.hitDetectionRenderer_},t.prototype.getGeometry=function(){return this.geometry_},t.prototype.getGeometryFunction=function(){return this.geometryFunction_},t.prototype.getFill=function(){return this.fill_},t.prototype.setFill=function(t){this.fill_=t},t.prototype.getImage=function(){return this.image_},t.prototype.setImage=function(t){this.image_=t},t.prototype.getStroke=function(){return this.stroke_},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.getText=function(){return this.text_},t.prototype.setText=function(t){this.text_=t},t.prototype.getZIndex=function(){return this.zIndex_},t.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=h,this.geometry_=t},t.prototype.setZIndex=function(t){this.zIndex_=t},t}();function l(t){var e;if("function"==typeof t)e=t;else{var n;if(Array.isArray(t))n=t;else Object(a.a)("function"==typeof t.getZIndex,41),n=[t];e=function(){return n}}return e}var c=null;function u(t,e){if(!c){var n=new i.a({color:"rgba(255,255,255,0.4)"}),a=new o.a({color:"#3399CC",width:1.25});c=[new s({image:new r.a({fill:n,stroke:a,radius:5}),fill:n,stroke:a})]}return c}function h(t){return t.getGeometry()}e.b=s},function(t,e,n){"use strict";var r=n(7),i=n(13),o=n(4),a=n(19),s=n(94),l=n(12),c=n(83),u=n(155),h=n(42),d=Object(i.c)(),p=function(){function t(t,e,n,r,i){this.styleFunction,this.extent_,this.id_=i,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n,this.properties_=r}return t.prototype.get=function(t){return this.properties_[t]},t.prototype.getExtent=function(){return this.extent_||(this.extent_=this.type_===r.a.POINT?Object(o.m)(this.flatCoordinates_):Object(o.n)(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_},t.prototype.getFlatInteriorPoint=function(){if(!this.flatInteriorPoints_){var t=Object(o.u)(this.getExtent());this.flatInteriorPoints_=Object(s.a)(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_},t.prototype.getFlatInteriorPoints=function(){if(!this.flatInteriorPoints_){var t=Object(u.a)(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=Object(s.b)(this.flatCoordinates_,0,this.ends_,2,t)}return this.flatInteriorPoints_},t.prototype.getFlatMidpoint=function(){return this.flatMidpoints_||(this.flatMidpoints_=Object(c.a)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_},t.prototype.getFlatMidpoints=function(){if(!this.flatMidpoints_){this.flatMidpoints_=[];for(var t=this.flatCoordinates_,e=0,n=this.ends_,r=0,i=n.length;r<i;++r){var o=n[r],s=Object(c.a)(t,e,o,2,.5);Object(a.c)(this.flatMidpoints_,s),e=o}}return this.flatMidpoints_},t.prototype.getId=function(){return this.id_},t.prototype.getOrientedFlatCoordinates=function(){return this.flatCoordinates_},t.prototype.getGeometry=function(){return this},t.prototype.getSimplifiedGeometry=function(t){return this},t.prototype.simplifyTransformed=function(t,e){return this},t.prototype.getProperties=function(){return this.properties_},t.prototype.getStride=function(){return 2},t.prototype.getStyleFunction=function(){return this.styleFunction},t.prototype.getType=function(){return this.type_},t.prototype.transform=function(t){var e=(t=Object(l.k)(t)).getExtent(),n=t.getWorldExtent();if(e&&n){var r=Object(o.x)(n)/Object(o.x)(e);Object(i.b)(d,n[0],n[3],r,-r,0,0,0),Object(h.c)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,d,this.flatCoordinates_)}},t.prototype.getEnds=function(){return this.ends_},t}();p.prototype.getEndss=p.prototype.getEnds,p.prototype.getFlatCoordinates=p.prototype.getOrientedFlatCoordinates,e.a=p},function(t,e,n){"use strict";var r,i=n(25),o=n(153),a=n(62),s=n(59),l=n(29),c=n(11),u=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),h=function(t){function e(e){var n=this,r=void 0!==e.rotateWithView&&e.rotateWithView;return(n=t.call(this,{opacity:1,rotateWithView:r,rotation:void 0!==e.rotation?e.rotation:0,scale:void 0!==e.scale?e.scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0]})||this).canvas_=void 0,n.hitDetectionCanvas_=null,n.fill_=void 0!==e.fill?e.fill:null,n.origin_=[0,0],n.points_=e.points,n.radius_=void 0!==e.radius?e.radius:e.radius1,n.radius2_=e.radius2,n.angle_=void 0!==e.angle?e.angle:0,n.stroke_=void 0!==e.stroke?e.stroke:null,n.size_=null,n.renderOptions_=null,n.render(),n}return u(e,t),e.prototype.clone=function(){var t=this.getScale(),n=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice()});return n.setOpacity(this.getOpacity()),n},e.prototype.getAnchor=function(){var t=this.size_;if(!t)return null;var e=this.getDisplacement();return[t[0]/2-e[0],t[1]/2+e[1]]},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.getHitDetectionImage=function(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_},e.prototype.getImage=function(t){var e=this.canvas_[t];if(!e){var n=this.renderOptions_,r=Object(l.a)(n.size*t,n.size*t);this.draw_(n,r,t),e=r.canvas,this.canvas_[t]=e}return e},e.prototype.getPixelRatio=function(t){return t},e.prototype.getImageSize=function(){return this.size_},e.prototype.getImageState=function(){return i.a.LOADED},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.listenImageChange=function(t){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t){},e.prototype.calculateLineJoinSize_=function(t,e,n){if(0===e||this.points_===1/0||"bevel"!==t&&"miter"!==t)return e;var r=this.radius_,i=void 0===this.radius2_?r:this.radius2_;if(r<i){var o=r;r=i,i=o}var a=void 0===this.radius2_?this.points_:2*this.points_,s=2*Math.PI/a,l=i*Math.sin(s),c=r-Math.sqrt(i*i-l*l),u=Math.sqrt(l*l+c*c),h=u/l;if("miter"===t&&h<=n)return h*e;var d=e/2/h,p=e/2*(c/u),f=Math.sqrt((r+d)*(r+d)+p*p)-r;if(void 0===this.radius2_||"bevel"===t)return 2*f;var m=r*Math.sin(s),g=i-Math.sqrt(r*r-m*m),y=Math.sqrt(m*m+g*g)/m;if(y<=n){var v=y*e/2-i-r;return 2*Math.max(f,v)}return 2*f},e.prototype.createRenderOptions=function(){var t,e=c.g,n=0,r=null,i=0,o=0;this.stroke_&&(null===(t=this.stroke_.getColor())&&(t=c.k),t=Object(s.a)(t),void 0===(o=this.stroke_.getWidth())&&(o=c.h),r=this.stroke_.getLineDash(),i=this.stroke_.getLineDashOffset(),void 0===(e=this.stroke_.getLineJoin())&&(e=c.g),void 0===(n=this.stroke_.getMiterLimit())&&(n=c.i));var a=this.calculateLineJoinSize_(e,o,n),l=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:t,strokeWidth:o,size:Math.ceil(2*l+a),lineDash:r,lineDashOffset:i,lineJoin:e,miterLimit:n}},e.prototype.render=function(){this.renderOptions_=this.createRenderOptions();var t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]},e.prototype.draw_=function(t,e,n){if(e.scale(n,n),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){var r=this.fill_.getColor();null===r&&(r=c.b),e.fillStyle=Object(s.a)(r),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,e.setLineDash&&t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())},e.prototype.createHitDetectionCanvas_=function(t){if(this.fill_){var e=this.fill_.getColor(),n=0;if("string"==typeof e&&(e=Object(a.a)(e)),null===e?n=1:Array.isArray(e)&&(n=4===e.length?e[3]:1),0===n){var r=Object(l.a)(t.size,t.size);this.hitDetectionCanvas_=r.canvas,this.drawHitDetectionCanvas_(t,r)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))},e.prototype.createPath_=function(t){var e=this.points_,n=this.radius_;if(e===1/0)t.arc(0,0,n,0,2*Math.PI);else{var r=void 0===this.radius2_?n:this.radius2_;void 0!==this.radius2_&&(e*=2);for(var i=this.angle_-Math.PI/2,o=2*Math.PI/e,a=0;a<e;a++){var s=i+a*o,l=a%2==0?n:r;t.lineTo(l*Math.cos(s),l*Math.sin(s))}t.closePath()}},e.prototype.drawHitDetectionCanvas_=function(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=c.b,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())},e}(o.a),d=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),p=function(t){function e(e){var n=e||{};return t.call(this,{points:1/0,fill:n.fill,radius:n.radius,stroke:n.stroke,scale:void 0!==n.scale?n.scale:1,rotation:void 0!==n.rotation?n.rotation:0,rotateWithView:void 0!==n.rotateWithView&&n.rotateWithView,displacement:void 0!==n.displacement?n.displacement:[0,0]})||this}return d(e,t),e.prototype.clone=function(){var t=this.getScale(),n=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return n.setOpacity(this.getOpacity()),n},e.prototype.setRadius=function(t){this.radius_=t,this.render()},e}(h);e.a=p},,,,,function(t,e,n){var r=n(200);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(168))},function(t,e){var n=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(t){return n.test(t)}},function(t,e,n){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},function(t,e,n){"use strict";var r=n(61);function i(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var o;if(n)o=n(e);else if(r.isURLSearchParams(e))o=e.toString();else{var a=[];r.forEach(e,(function(t,e){null!=t&&(r.isArray(t)?e+="[]":t=[t],r.forEach(t,(function(t){r.isDate(t)?t=t.toISOString():r.isObject(t)&&(t=JSON.stringify(t)),a.push(i(e)+"="+i(t))})))})),o=a.join("&")}if(o){var s=t.indexOf("#");-1!==s&&(t=t.slice(0,s)),t+=(-1===t.indexOf("?")?"?":"&")+o}return t}},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var l,c=[],u=!1,h=-1;function d(){u&&l&&(u=!1,l.length?c=l.concat(c):h=-1,c.length&&p())}function p(){if(!u){var t=s(d);u=!0;for(var e=c.length;e;){for(l=c,c=[];++h<e;)l&&l[h].run();h=-1,e=c.length}l=null,u=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function m(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new f(t,e)),1!==c.length||u||s(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";t.exports=function(t,e,n,r,i){return t.config=e,n&&(t.code=n),t.request=r,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t}},function(t,e,n){"use strict";var r=n(61),i=n(326),o=n(327),a=n(204),s=n(328),l=n(331),c=n(332),u=n(208),h=n(130),d=n(131);t.exports=function(t){return new Promise((function(e,n){var p,f=t.data,m=t.headers,g=t.responseType;function y(){t.cancelToken&&t.cancelToken.unsubscribe(p),t.signal&&t.signal.removeEventListener("abort",p)}r.isFormData(f)&&delete m["Content-Type"];var v=new XMLHttpRequest;if(t.auth){var _=t.auth.username||"",b=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";m.Authorization="Basic "+btoa(_+":"+b)}var x=s(t.baseURL,t.url);function w(){if(v){var r="getAllResponseHeaders"in v?l(v.getAllResponseHeaders()):null,o={data:g&&"text"!==g&&"json"!==g?v.response:v.responseText,status:v.status,statusText:v.statusText,headers:r,config:t,request:v};i((function(t){e(t),y()}),(function(t){n(t),y()}),o),v=null}}if(v.open(t.method.toUpperCase(),a(x,t.params,t.paramsSerializer),!0),v.timeout=t.timeout,"onloadend"in v?v.onloadend=w:v.onreadystatechange=function(){v&&4===v.readyState&&(0!==v.status||v.responseURL&&0===v.responseURL.indexOf("file:"))&&setTimeout(w)},v.onabort=function(){v&&(n(u("Request aborted",t,"ECONNABORTED",v)),v=null)},v.onerror=function(){n(u("Network Error",t,null,v)),v=null},v.ontimeout=function(){var e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",r=t.transitional||h.transitional;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(u(e,t,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",v)),v=null},r.isStandardBrowserEnv()){var E=(t.withCredentials||c(x))&&t.xsrfCookieName?o.read(t.xsrfCookieName):void 0;E&&(m[t.xsrfHeaderName]=E)}"setRequestHeader"in v&&r.forEach(m,(function(t,e){void 0===f&&"content-type"===e.toLowerCase()?delete m[e]:v.setRequestHeader(e,t)})),r.isUndefined(t.withCredentials)||(v.withCredentials=!!t.withCredentials),g&&"json"!==g&&(v.responseType=t.responseType),"function"==typeof t.onDownloadProgress&&v.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&v.upload&&v.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(p=function(t){v&&(n(!t||t&&t.type?new d("canceled"):t),v.abort(),v=null)},t.cancelToken&&t.cancelToken.subscribe(p),t.signal&&(t.signal.aborted?p():t.signal.addEventListener("abort",p))),f||(f=null),v.send(f)}))}},function(t,e,n){"use strict";var r=n(206);t.exports=function(t,e,n,i,o){var a=new Error(t);return r(a,e,n,i,o)}},function(t,e,n){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,n){"use strict";var r=n(61);t.exports=function(t,e){e=e||{};var n={};function i(t,e){return r.isPlainObject(t)&&r.isPlainObject(e)?r.merge(t,e):r.isPlainObject(e)?r.merge({},e):r.isArray(e)?e.slice():e}function o(n){return r.isUndefined(e[n])?r.isUndefined(t[n])?void 0:i(void 0,t[n]):i(t[n],e[n])}function a(t){if(!r.isUndefined(e[t]))return i(void 0,e[t])}function s(n){return r.isUndefined(e[n])?r.isUndefined(t[n])?void 0:i(void 0,t[n]):i(void 0,e[n])}function l(n){return n in e?i(t[n],e[n]):n in t?i(void 0,t[n]):void 0}var c={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:l};return r.forEach(Object.keys(t).concat(Object.keys(e)),(function(t){var e=c[t]||o,i=e(t);r.isUndefined(i)&&e!==l||(n[t]=i)})),n}},function(t,e){t.exports={version:"0.24.0"}},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e,n){var r=n(139),i=n(114);t.exports=function(t,e,n){(void 0!==n&&!i(t[e],n)||void 0===n&&!(e in t))&&r(t,e,n)}},function(t,e,n){var r=n(89),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},function(t,e,n){var r=n(374)();t.exports=r},function(t,e,n){(function(t){var r=n(73),i=e&&!e.nodeType&&e,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i?r.Buffer:void 0,s=a?a.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=s?s(n):new t.constructor(n);return t.copy(r),r}}).call(this,n(129)(t))},function(t,e,n){var r=n(174);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},function(t,e,n){var r=n(73).Uint8Array;t.exports=r},function(t,e){t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},function(t,e,n){var r=n(376),i=n(175),o=n(140);t.exports=function(t){return"function"!=typeof t.constructor||o(t)?{}:r(i(t))}},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e){t.exports=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}},function(t,e,n){var r=n(382),i=n(116),o=n(51),a=n(118),s=n(142),l=n(141),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=o(t),u=!n&&i(t),h=!n&&!u&&a(t),d=!n&&!u&&!h&&l(t),p=n||u||h||d,f=p?r(t.length,String):[],m=f.length;for(var g in t)!e&&!c.call(t,g)||p&&("length"==g||h&&("offset"==g||"parent"==g)||d&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,m))||f.push(g);return f}},function(t,e,n){var r=n(386),i=Math.max;t.exports=function(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var o=arguments,a=-1,s=i(o.length-e,0),l=Array(s);++a<s;)l[a]=o[e+a];a=-1;for(var c=Array(e+1);++a<e;)c[a]=o[a];return c[e]=n(l),r(t,this,c)}}},function(t,e,n){var r=n(387),i=n(389)(r);t.exports=i},function(t,e,n){var r=n(114),i=n(90),o=n(142),a=n(74);t.exports=function(t,e,n){if(!a(n))return!1;var s=typeof e;return!!("number"==s?i(n)&&o(e,n.length):"string"==s&&e in n)&&r(n[e],t)}},function(t,e,n){var r=n(140),i=n(397),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))o.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e){t.exports=function(){return[]}},function(t,e,n){var r=n(180),i=n(175),o=n(179),a=n(228),s=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,o(t)),t=i(t);return e}:a;t.exports=s},function(t,e,n){var r=n(231),i=n(179),o=n(121);t.exports=function(t){return r(t,o,i)}},function(t,e,n){var r=n(180),i=n(51);t.exports=function(t,e,n){var o=e(t);return i(t)?o:r(o,n(t))}},function(t,e,n){var r=n(231),i=n(229),o=n(120);t.exports=function(t){return r(t,o,i)}},function(t,e,n){var r=n(89)(n(73),"Set");t.exports=r},function(t,e,n){var r=n(424),i=n(64);t.exports=function t(e,n,o,a,s){return e===n||(null==e||null==n||!i(e)&&!i(n)?e!=e&&n!=n:r(e,n,o,a,t,s))}},function(t,e,n){var r=n(144),i=n(425),o=n(145);t.exports=function(t,e,n,a,s,l){var c=1&n,u=t.length,h=e.length;if(u!=h&&!(c&&h>u))return!1;var d=l.get(t),p=l.get(e);if(d&&p)return d==e&&p==t;var f=-1,m=!0,g=2&n?new r:void 0;for(l.set(t,e),l.set(e,t);++f<u;){var y=t[f],v=e[f];if(a)var _=c?a(v,y,f,e,t,l):a(y,v,f,t,e,l);if(void 0!==_){if(_)continue;m=!1;break}if(g){if(!i(e,(function(t,e){if(!o(g,e)&&(y===t||s(y,t,n,a,l)))return g.push(e)}))){m=!1;break}}else if(y!==v&&!s(y,v,n,a,l)){m=!1;break}}return l.delete(t),l.delete(e),m}},function(t,e,n){var r=n(74);t.exports=function(t){return t==t&&!r(t)}},function(t,e){t.exports=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}},function(t,e,n){var r=n(431),i=n(432);t.exports=function(t,e){return null!=t&&i(t,e,r)}},function(t,e,n){var r=n(132),i=n(436),o=n(133);t.exports=function(t,e,n){for(var a=-1,s=e.length,l={};++a<s;){var c=e[a],u=r(t,c);n(u,c)&&i(l,o(c,t),u)}return l}},function(t,e,n){var r=n(445),i=n(446)(r);t.exports=i},function(t,e,n){"use strict";t.exports=function(t,e){e||(e={}),"function"==typeof e&&(e={cmp:e});var n,r="boolean"==typeof e.cycles&&e.cycles,i=e.cmp&&(n=e.cmp,function(t){return function(e,r){var i={key:e,value:t[e]},o={key:r,value:t[r]};return n(i,o)}}),o=[];return function t(e){if(e&&e.toJSON&&"function"==typeof e.toJSON&&(e=e.toJSON()),void 0!==e){if("number"==typeof e)return isFinite(e)?""+e:"null";if("object"!=typeof e)return JSON.stringify(e);var n,a;if(Array.isArray(e)){for(a="[",n=0;n<e.length;n++)n&&(a+=","),a+=t(e[n])||"null";return a+"]"}if(null===e)return"null";if(-1!==o.indexOf(e)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var s=o.push(e)-1,l=Object.keys(e).sort(i&&i(e));for(a="",n=0;n<l.length;n++){var c=l[n],u=t(e[c]);u&&(a&&(a+=","),a+=JSON.stringify(c)+":"+u)}return o.splice(s,1),"{"+a+"}"}}(t)}},function(t,e,n){"use strict";(function(t){var r=n(0),i=n.n(r),o=n(50),a=n(5),s=n.n(a),l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:{};function c(t){var e=[];return{on:function(t){e.push(t)},off:function(t){e=e.filter((function(e){return e!==t}))},get:function(){return t},set:function(n,r){t=n,e.forEach((function(e){return e(t,r)}))}}}var u=i.a.createContext||function(t,e){var n,i,a,u="__create-react-context-"+((l[a="__global_unique_id__"]=(l[a]||0)+1)+"__"),h=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).emitter=c(e.props.value),e}Object(o.a)(n,t);var r=n.prototype;return r.getChildContext=function(){var t;return(t={})[u]=this.emitter,t},r.componentWillReceiveProps=function(t){if(this.props.value!==t.value){var n,r=this.props.value,i=t.value;((o=r)===(a=i)?0!==o||1/o==1/a:o!=o&&a!=a)?n=0:(n="function"==typeof e?e(r,i):1073741823,0!==(n|=0)&&this.emitter.set(t.value,n))}var o,a},r.render=function(){return this.props.children},n}(r.Component);h.childContextTypes=((n={})[u]=s.a.object.isRequired,n);var d=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).state={value:t.getValue()},t.onUpdate=function(e,n){0!=((0|t.observedBits)&n)&&t.setState({value:t.getValue()})},t}Object(o.a)(n,e);var r=n.prototype;return r.componentWillReceiveProps=function(t){var e=t.observedBits;this.observedBits=null==e?1073741823:e},r.componentDidMount=function(){this.context[u]&&this.context[u].on(this.onUpdate);var t=this.props.observedBits;this.observedBits=null==t?1073741823:t},r.componentWillUnmount=function(){this.context[u]&&this.context[u].off(this.onUpdate)},r.getValue=function(){return this.context[u]?this.context[u].get():t},r.render=function(){return(t=this.props.children,Array.isArray(t)?t[0]:t)(this.state.value);var t},n}(r.Component);return d.contextTypes=((i={})[u]=s.a.object,i),{Provider:h,Consumer:d}};e.a=u}).call(this,n(168))},function(t,e,n){"use strict";var r='(10[.][0-9]{4,}(?:[.][0-9]+)*/(?:(?![%"#? ])\\S)+)',i=t.exports=function(t){return(t=t||{}).exact?new RegExp("(?:^"+r+"$)"):new RegExp("(?:"+r+")","g")};i.groups=function(t){if(t){var e=[],n=t.replace(/\.[a-zA-Z]{1}[0-9]{3}$/g,(function(t){return e.push(t),""})),r=i().exec(n);return r&&(r[0]=t,r.push(e.length?e[0]:"")),r}},i.declared=function(t){return(t=t||{}).exact?new RegExp("^doi\\:"+r+"$"):new RegExp("doi\\:"+r,"g")},i.resolvePath=function(t){return(t=t||{}).protocol?new RegExp("^http(s)?\\://(dx\\.)?doi\\.org/"+r+"$"):new RegExp("^(http(s)?\\://)?(dx\\.)?doi\\.org/"+r+"$")}},function(t,e,n){(function(t,r){var i;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var o="Expected a function",a="__lodash_placeholder__",s=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],l="[object Arguments]",c="[object Array]",u="[object Boolean]",h="[object Date]",d="[object Error]",p="[object Function]",f="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Object]",v="[object RegExp]",_="[object Set]",b="[object String]",x="[object Symbol]",w="[object WeakMap]",E="[object ArrayBuffer]",C="[object DataView]",S="[object Float32Array]",T="[object Float64Array]",O="[object Int8Array]",I="[object Int16Array]",A="[object Int32Array]",M="[object Uint8Array]",k="[object Uint16Array]",P="[object Uint32Array]",D=/\b__p \+= '';/g,R=/\b(__p \+=) '' \+/g,L=/(__e\(.*?\)|\b__t\)) \+\n'';/g,N=/&(?:amp|lt|gt|quot|#39);/g,j=/[&<>"']/g,F=RegExp(N.source),z=RegExp(j.source),B=/<%-([\s\S]+?)%>/g,U=/<%([\s\S]+?)%>/g,G=/<%=([\s\S]+?)%>/g,V=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,q=/^\w*$/,H=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,W=/[\\^$.*+?()[\]{}|]/g,Z=RegExp(W.source),$=/^\s+/,K=/\s/,Y=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,X=/\{\n\/\* \[wrapped with (.+)\] \*/,J=/,? & /,Q=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,tt=/[()=,{}\[\]\/\s]/,et=/\\(\\)?/g,nt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,rt=/\w*$/,it=/^[-+]0x[0-9a-f]+$/i,ot=/^0b[01]+$/i,at=/^\[object .+?Constructor\]$/,st=/^0o[0-7]+$/i,lt=/^(?:0|[1-9]\d*)$/,ct=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ut=/($^)/,ht=/['\n\r\u2028\u2029\\]/g,dt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",pt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ft="[\\ud800-\\udfff]",mt="["+pt+"]",gt="["+dt+"]",yt="\\d+",vt="[\\u2700-\\u27bf]",_t="[a-z\\xdf-\\xf6\\xf8-\\xff]",bt="[^\\ud800-\\udfff"+pt+yt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",xt="\\ud83c[\\udffb-\\udfff]",wt="[^\\ud800-\\udfff]",Et="(?:\\ud83c[\\udde6-\\uddff]){2}",Ct="[\\ud800-\\udbff][\\udc00-\\udfff]",St="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Tt="(?:"+_t+"|"+bt+")",Ot="(?:"+St+"|"+bt+")",It="(?:"+gt+"|"+xt+")"+"?",At="[\\ufe0e\\ufe0f]?"+It+("(?:\\u200d(?:"+[wt,Et,Ct].join("|")+")[\\ufe0e\\ufe0f]?"+It+")*"),Mt="(?:"+[vt,Et,Ct].join("|")+")"+At,kt="(?:"+[wt+gt+"?",gt,Et,Ct,ft].join("|")+")",Pt=RegExp("['’]","g"),Dt=RegExp(gt,"g"),Rt=RegExp(xt+"(?="+xt+")|"+kt+At,"g"),Lt=RegExp([St+"?"+_t+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[mt,St,"$"].join("|")+")",Ot+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[mt,St+Tt,"$"].join("|")+")",St+"?"+Tt+"+(?:['’](?:d|ll|m|re|s|t|ve))?",St+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",yt,Mt].join("|"),"g"),Nt=RegExp("[\\u200d\\ud800-\\udfff"+dt+"\\ufe0e\\ufe0f]"),jt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ft=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],zt=-1,Bt={};Bt[S]=Bt[T]=Bt[O]=Bt[I]=Bt[A]=Bt[M]=Bt["[object Uint8ClampedArray]"]=Bt[k]=Bt[P]=!0,Bt[l]=Bt[c]=Bt[E]=Bt[u]=Bt[C]=Bt[h]=Bt[d]=Bt[p]=Bt[m]=Bt[g]=Bt[y]=Bt[v]=Bt[_]=Bt[b]=Bt[w]=!1;var Ut={};Ut[l]=Ut[c]=Ut[E]=Ut[C]=Ut[u]=Ut[h]=Ut[S]=Ut[T]=Ut[O]=Ut[I]=Ut[A]=Ut[m]=Ut[g]=Ut[y]=Ut[v]=Ut[_]=Ut[b]=Ut[x]=Ut[M]=Ut["[object Uint8ClampedArray]"]=Ut[k]=Ut[P]=!0,Ut[d]=Ut[p]=Ut[w]=!1;var Gt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Vt=parseFloat,qt=parseInt,Ht="object"==typeof t&&t&&t.Object===Object&&t,Wt="object"==typeof self&&self&&self.Object===Object&&self,Zt=Ht||Wt||Function("return this")(),$t=e&&!e.nodeType&&e,Kt=$t&&"object"==typeof r&&r&&!r.nodeType&&r,Yt=Kt&&Kt.exports===$t,Xt=Yt&&Ht.process,Jt=function(){try{var t=Kt&&Kt.require&&Kt.require("util").types;return t||Xt&&Xt.binding&&Xt.binding("util")}catch(t){}}(),Qt=Jt&&Jt.isArrayBuffer,te=Jt&&Jt.isDate,ee=Jt&&Jt.isMap,ne=Jt&&Jt.isRegExp,re=Jt&&Jt.isSet,ie=Jt&&Jt.isTypedArray;function oe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function ae(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function se(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function le(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function ce(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function ue(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function he(t,e){return!!(null==t?0:t.length)&&xe(t,e,0)>-1}function de(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function pe(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function fe(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function me(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function ge(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function ye(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var ve=Se("length");function _e(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function be(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function xe(t,e,n){return e==e?function(t,e,n){var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):be(t,Ee,n)}function we(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function Ee(t){return t!=t}function Ce(t,e){var n=null==t?0:t.length;return n?Ie(t,e)/n:NaN}function Se(t){return function(e){return null==e?void 0:e[t]}}function Te(t){return function(e){return null==t?void 0:t[e]}}function Oe(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function Ie(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);void 0!==o&&(n=void 0===n?o:n+o)}return n}function Ae(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Me(t){return t?t.slice(0,$e(t)+1).replace($,""):t}function ke(t){return function(e){return t(e)}}function Pe(t,e){return pe(e,(function(e){return t[e]}))}function De(t,e){return t.has(e)}function Re(t,e){for(var n=-1,r=t.length;++n<r&&xe(e,t[n],0)>-1;);return n}function Le(t,e){for(var n=t.length;n--&&xe(e,t[n],0)>-1;);return n}function Ne(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}var je=Te({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Fe=Te({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function ze(t){return"\\"+Gt[t]}function Be(t){return Nt.test(t)}function Ue(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function Ge(t,e){return function(n){return t(e(n))}}function Ve(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n];s!==e&&s!==a||(t[n]=a,o[i++]=n)}return o}function qe(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function He(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function We(t){return Be(t)?function(t){var e=Rt.lastIndex=0;for(;Rt.test(t);)++e;return e}(t):ve(t)}function Ze(t){return Be(t)?function(t){return t.match(Rt)||[]}(t):function(t){return t.split("")}(t)}function $e(t){for(var e=t.length;e--&&K.test(t.charAt(e)););return e}var Ke=Te({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Ye=function t(e){var n,r=(e=null==e?Zt:Ye.defaults(Zt.Object(),e,Ye.pick(Zt,Ft))).Array,i=e.Date,K=e.Error,dt=e.Function,pt=e.Math,ft=e.Object,mt=e.RegExp,gt=e.String,yt=e.TypeError,vt=r.prototype,_t=dt.prototype,bt=ft.prototype,xt=e["__core-js_shared__"],wt=_t.toString,Et=bt.hasOwnProperty,Ct=0,St=(n=/[^.]+$/.exec(xt&&xt.keys&&xt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Tt=bt.toString,Ot=wt.call(ft),It=Zt._,At=mt("^"+wt.call(Et).replace(W,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Mt=Yt?e.Buffer:void 0,kt=e.Symbol,Rt=e.Uint8Array,Nt=Mt?Mt.allocUnsafe:void 0,Gt=Ge(ft.getPrototypeOf,ft),Ht=ft.create,Wt=bt.propertyIsEnumerable,$t=vt.splice,Kt=kt?kt.isConcatSpreadable:void 0,Xt=kt?kt.iterator:void 0,Jt=kt?kt.toStringTag:void 0,ve=function(){try{var t=to(ft,"defineProperty");return t({},"",{}),t}catch(t){}}(),Te=e.clearTimeout!==Zt.clearTimeout&&e.clearTimeout,Xe=i&&i.now!==Zt.Date.now&&i.now,Je=e.setTimeout!==Zt.setTimeout&&e.setTimeout,Qe=pt.ceil,tn=pt.floor,en=ft.getOwnPropertySymbols,nn=Mt?Mt.isBuffer:void 0,rn=e.isFinite,on=vt.join,an=Ge(ft.keys,ft),sn=pt.max,ln=pt.min,cn=i.now,un=e.parseInt,hn=pt.random,dn=vt.reverse,pn=to(e,"DataView"),fn=to(e,"Map"),mn=to(e,"Promise"),gn=to(e,"Set"),yn=to(e,"WeakMap"),vn=to(ft,"create"),_n=yn&&new yn,bn={},xn=Io(pn),wn=Io(fn),En=Io(mn),Cn=Io(gn),Sn=Io(yn),Tn=kt?kt.prototype:void 0,On=Tn?Tn.valueOf:void 0,In=Tn?Tn.toString:void 0;function An(t){if(Ha(t)&&!Ra(t)&&!(t instanceof Dn)){if(t instanceof Pn)return t;if(Et.call(t,"__wrapped__"))return Ao(t)}return new Pn(t)}var Mn=function(){function t(){}return function(e){if(!qa(e))return{};if(Ht)return Ht(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function kn(){}function Pn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}function Dn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Rn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Ln(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Nn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function jn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Nn;++e<n;)this.add(t[e])}function Fn(t){var e=this.__data__=new Ln(t);this.size=e.size}function zn(t,e){var n=Ra(t),r=!n&&Da(t),i=!n&&!r&&Fa(t),o=!n&&!r&&!i&&Qa(t),a=n||r||i||o,s=a?Ae(t.length,gt):[],l=s.length;for(var c in t)!e&&!Et.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||so(c,l))||s.push(c);return s}function Bn(t){var e=t.length;return e?t[jr(0,e-1)]:void 0}function Un(t,e){return So(vi(t),Yn(e,0,t.length))}function Gn(t){return So(vi(t))}function Vn(t,e,n){(void 0!==n&&!Ma(t[e],n)||void 0===n&&!(e in t))&&$n(t,e,n)}function qn(t,e,n){var r=t[e];Et.call(t,e)&&Ma(r,n)&&(void 0!==n||e in t)||$n(t,e,n)}function Hn(t,e){for(var n=t.length;n--;)if(Ma(t[n][0],e))return n;return-1}function Wn(t,e,n,r){return er(t,(function(t,i,o){e(r,t,n(t),o)})),r}function Zn(t,e){return t&&_i(e,xs(e),t)}function $n(t,e,n){"__proto__"==e&&ve?ve(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Kn(t,e){for(var n=-1,i=e.length,o=r(i),a=null==t;++n<i;)o[n]=a?void 0:gs(t,e[n]);return o}function Yn(t,e,n){return t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t}function Xn(t,e,n,r,i,o){var a,s=1&e,c=2&e,d=4&e;if(n&&(a=i?n(t,r,i,o):n(t)),void 0!==a)return a;if(!qa(t))return t;var w=Ra(t);if(w){if(a=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&Et.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!s)return vi(t,a)}else{var D=ro(t),R=D==p||D==f;if(Fa(t))return di(t,s);if(D==y||D==l||R&&!i){if(a=c||R?{}:oo(t),!s)return c?function(t,e){return _i(t,no(t),e)}(t,function(t,e){return t&&_i(e,ws(e),t)}(a,t)):function(t,e){return _i(t,eo(t),e)}(t,Zn(a,t))}else{if(!Ut[D])return i?t:{};a=function(t,e,n){var r=t.constructor;switch(e){case E:return pi(t);case u:case h:return new r(+t);case C:return function(t,e){var n=e?pi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case S:case T:case O:case I:case A:case M:case"[object Uint8ClampedArray]":case k:case P:return fi(t,n);case m:return new r;case g:case b:return new r(t);case v:return function(t){var e=new t.constructor(t.source,rt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case _:return new r;case x:return i=t,On?ft(On.call(i)):{}}var i}(t,D,s)}}o||(o=new Fn);var L=o.get(t);if(L)return L;o.set(t,a),Ya(t)?t.forEach((function(r){a.add(Xn(r,e,n,r,t,o))})):Wa(t)&&t.forEach((function(r,i){a.set(i,Xn(r,e,n,i,t,o))}));var N=w?void 0:(d?c?Zi:Wi:c?ws:xs)(t);return se(N||t,(function(r,i){N&&(r=t[i=r]),qn(a,i,Xn(r,e,n,i,t,o))})),a}function Jn(t,e,n){var r=n.length;if(null==t)return!r;for(t=ft(t);r--;){var i=n[r],o=e[i],a=t[i];if(void 0===a&&!(i in t)||!o(a))return!1}return!0}function Qn(t,e,n){if("function"!=typeof t)throw new yt(o);return xo((function(){t.apply(void 0,n)}),e)}function tr(t,e,n,r){var i=-1,o=he,a=!0,s=t.length,l=[],c=e.length;if(!s)return l;n&&(e=pe(e,ke(n))),r?(o=de,a=!1):e.length>=200&&(o=De,a=!1,e=new jn(e));t:for(;++i<s;){var u=t[i],h=null==n?u:n(u);if(u=r||0!==u?u:0,a&&h==h){for(var d=c;d--;)if(e[d]===h)continue t;l.push(u)}else o(e,h,r)||l.push(u)}return l}An.templateSettings={escape:B,evaluate:U,interpolate:G,variable:"",imports:{_:An}},An.prototype=kn.prototype,An.prototype.constructor=An,Pn.prototype=Mn(kn.prototype),Pn.prototype.constructor=Pn,Dn.prototype=Mn(kn.prototype),Dn.prototype.constructor=Dn,Rn.prototype.clear=function(){this.__data__=vn?vn(null):{},this.size=0},Rn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Rn.prototype.get=function(t){var e=this.__data__;if(vn){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return Et.call(e,t)?e[t]:void 0},Rn.prototype.has=function(t){var e=this.__data__;return vn?void 0!==e[t]:Et.call(e,t)},Rn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=vn&&void 0===e?"__lodash_hash_undefined__":e,this},Ln.prototype.clear=function(){this.__data__=[],this.size=0},Ln.prototype.delete=function(t){var e=this.__data__,n=Hn(e,t);return!(n<0)&&(n==e.length-1?e.pop():$t.call(e,n,1),--this.size,!0)},Ln.prototype.get=function(t){var e=this.__data__,n=Hn(e,t);return n<0?void 0:e[n][1]},Ln.prototype.has=function(t){return Hn(this.__data__,t)>-1},Ln.prototype.set=function(t,e){var n=this.__data__,r=Hn(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Nn.prototype.clear=function(){this.size=0,this.__data__={hash:new Rn,map:new(fn||Ln),string:new Rn}},Nn.prototype.delete=function(t){var e=Ji(this,t).delete(t);return this.size-=e?1:0,e},Nn.prototype.get=function(t){return Ji(this,t).get(t)},Nn.prototype.has=function(t){return Ji(this,t).has(t)},Nn.prototype.set=function(t,e){var n=Ji(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},jn.prototype.add=jn.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},jn.prototype.has=function(t){return this.__data__.has(t)},Fn.prototype.clear=function(){this.__data__=new Ln,this.size=0},Fn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Fn.prototype.get=function(t){return this.__data__.get(t)},Fn.prototype.has=function(t){return this.__data__.has(t)},Fn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Ln){var r=n.__data__;if(!fn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Nn(r)}return n.set(t,e),this.size=n.size,this};var er=wi(cr),nr=wi(ur,!0);function rr(t,e){var n=!0;return er(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function ir(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(null!=a&&(void 0===s?a==a&&!Ja(a):n(a,s)))var s=a,l=o}return l}function or(t,e){var n=[];return er(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function ar(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=ao),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?ar(s,e-1,n,r,i):fe(i,s):r||(i[i.length]=s)}return i}var sr=Ei(),lr=Ei(!0);function cr(t,e){return t&&sr(t,e,xs)}function ur(t,e){return t&&lr(t,e,xs)}function hr(t,e){return ue(e,(function(e){return Ua(t[e])}))}function dr(t,e){for(var n=0,r=(e=li(e,t)).length;null!=t&&n<r;)t=t[Oo(e[n++])];return n&&n==r?t:void 0}function pr(t,e,n){var r=e(t);return Ra(t)?r:fe(r,n(t))}function fr(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Jt&&Jt in ft(t)?function(t){var e=Et.call(t,Jt),n=t[Jt];try{t[Jt]=void 0;var r=!0}catch(t){}var i=Tt.call(t);r&&(e?t[Jt]=n:delete t[Jt]);return i}(t):function(t){return Tt.call(t)}(t)}function mr(t,e){return t>e}function gr(t,e){return null!=t&&Et.call(t,e)}function yr(t,e){return null!=t&&e in ft(t)}function vr(t,e,n){for(var i=n?de:he,o=t[0].length,a=t.length,s=a,l=r(a),c=1/0,u=[];s--;){var h=t[s];s&&e&&(h=pe(h,ke(e))),c=ln(h.length,c),l[s]=!n&&(e||o>=120&&h.length>=120)?new jn(s&&h):void 0}h=t[0];var d=-1,p=l[0];t:for(;++d<o&&u.length<c;){var f=h[d],m=e?e(f):f;if(f=n||0!==f?f:0,!(p?De(p,m):i(u,m,n))){for(s=a;--s;){var g=l[s];if(!(g?De(g,m):i(t[s],m,n)))continue t}p&&p.push(m),u.push(f)}}return u}function _r(t,e,n){var r=null==(t=yo(t,e=li(e,t)))?t:t[Oo(Bo(e))];return null==r?void 0:oe(r,t,n)}function br(t){return Ha(t)&&fr(t)==l}function xr(t,e,n,r,i){return t===e||(null==t||null==e||!Ha(t)&&!Ha(e)?t!=t&&e!=e:function(t,e,n,r,i,o){var a=Ra(t),s=Ra(e),p=a?c:ro(t),f=s?c:ro(e),w=(p=p==l?y:p)==y,S=(f=f==l?y:f)==y,T=p==f;if(T&&Fa(t)){if(!Fa(e))return!1;a=!0,w=!1}if(T&&!w)return o||(o=new Fn),a||Qa(t)?qi(t,e,n,r,i,o):function(t,e,n,r,i,o,a){switch(n){case C:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case E:return!(t.byteLength!=e.byteLength||!o(new Rt(t),new Rt(e)));case u:case h:case g:return Ma(+t,+e);case d:return t.name==e.name&&t.message==e.message;case v:case b:return t==e+"";case m:var s=Ue;case _:var l=1&r;if(s||(s=qe),t.size!=e.size&&!l)return!1;var c=a.get(t);if(c)return c==e;r|=2,a.set(t,e);var p=qi(s(t),s(e),r,i,o,a);return a.delete(t),p;case x:if(On)return On.call(t)==On.call(e)}return!1}(t,e,p,n,r,i,o);if(!(1&n)){var O=w&&Et.call(t,"__wrapped__"),I=S&&Et.call(e,"__wrapped__");if(O||I){var A=O?t.value():t,M=I?e.value():e;return o||(o=new Fn),i(A,M,n,r,o)}}if(!T)return!1;return o||(o=new Fn),function(t,e,n,r,i,o){var a=1&n,s=Wi(t),l=s.length,c=Wi(e).length;if(l!=c&&!a)return!1;var u=l;for(;u--;){var h=s[u];if(!(a?h in e:Et.call(e,h)))return!1}var d=o.get(t),p=o.get(e);if(d&&p)return d==e&&p==t;var f=!0;o.set(t,e),o.set(e,t);var m=a;for(;++u<l;){h=s[u];var g=t[h],y=e[h];if(r)var v=a?r(y,g,h,e,t,o):r(g,y,h,t,e,o);if(!(void 0===v?g===y||i(g,y,n,r,o):v)){f=!1;break}m||(m="constructor"==h)}if(f&&!m){var _=t.constructor,b=e.constructor;_==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof _&&_ instanceof _&&"function"==typeof b&&b instanceof b||(f=!1)}return o.delete(t),o.delete(e),f}(t,e,n,r,i,o)}(t,e,n,r,xr,i))}function wr(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=ft(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){var l=(s=n[i])[0],c=t[l],u=s[1];if(a&&s[2]){if(void 0===c&&!(l in t))return!1}else{var h=new Fn;if(r)var d=r(c,u,l,t,e,h);if(!(void 0===d?xr(u,c,3,r,h):d))return!1}}return!0}function Er(t){return!(!qa(t)||(e=t,St&&St in e))&&(Ua(t)?At:at).test(Io(t));var e}function Cr(t){return"function"==typeof t?t:null==t?Zs:"object"==typeof t?Ra(t)?Mr(t[0],t[1]):Ar(t):nl(t)}function Sr(t){if(!po(t))return an(t);var e=[];for(var n in ft(t))Et.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Tr(t){if(!qa(t))return function(t){var e=[];if(null!=t)for(var n in ft(t))e.push(n);return e}(t);var e=po(t),n=[];for(var r in t)("constructor"!=r||!e&&Et.call(t,r))&&n.push(r);return n}function Or(t,e){return t<e}function Ir(t,e){var n=-1,i=Na(t)?r(t.length):[];return er(t,(function(t,r,o){i[++n]=e(t,r,o)})),i}function Ar(t){var e=Qi(t);return 1==e.length&&e[0][2]?mo(e[0][0],e[0][1]):function(n){return n===t||wr(n,t,e)}}function Mr(t,e){return co(t)&&fo(e)?mo(Oo(t),e):function(n){var r=gs(n,t);return void 0===r&&r===e?ys(n,t):xr(e,r,3)}}function kr(t,e,n,r,i){t!==e&&sr(e,(function(o,a){if(i||(i=new Fn),qa(o))!function(t,e,n,r,i,o,a){var s=_o(t,n),l=_o(e,n),c=a.get(l);if(c)return void Vn(t,n,c);var u=o?o(s,l,n+"",t,e,a):void 0,h=void 0===u;if(h){var d=Ra(l),p=!d&&Fa(l),f=!d&&!p&&Qa(l);u=l,d||p||f?Ra(s)?u=s:ja(s)?u=vi(s):p?(h=!1,u=di(l,!0)):f?(h=!1,u=fi(l,!0)):u=[]:$a(l)||Da(l)?(u=s,Da(s)?u=ss(s):qa(s)&&!Ua(s)||(u=oo(l))):h=!1}h&&(a.set(l,u),i(u,l,r,o,a),a.delete(l));Vn(t,n,u)}(t,e,a,n,kr,r,i);else{var s=r?r(_o(t,a),o,a+"",t,e,i):void 0;void 0===s&&(s=o),Vn(t,a,s)}}),ws)}function Pr(t,e){var n=t.length;if(n)return so(e+=e<0?n:0,n)?t[e]:void 0}function Dr(t,e,n){e=e.length?pe(e,(function(t){return Ra(t)?function(e){return dr(e,1===t.length?t[0]:t)}:t})):[Zs];var r=-1;return e=pe(e,ke(Xi())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(Ir(t,(function(t,n,i){return{criteria:pe(e,(function(e){return e(t)})),index:++r,value:t}})),(function(t,e){return function(t,e,n){var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;for(;++r<a;){var l=mi(i[r],o[r]);if(l){if(r>=s)return l;var c=n[r];return l*("desc"==c?-1:1)}}return t.index-e.index}(t,e,n)}))}function Rr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=dr(t,a);n(s,a)&&Gr(o,li(a,t),s)}return o}function Lr(t,e,n,r){var i=r?we:xe,o=-1,a=e.length,s=t;for(t===e&&(e=vi(e)),n&&(s=pe(t,ke(n)));++o<a;)for(var l=0,c=e[o],u=n?n(c):c;(l=i(s,u,l,r))>-1;)s!==t&&$t.call(s,l,1),$t.call(t,l,1);return t}function Nr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;so(i)?$t.call(t,i,1):ti(t,i)}}return t}function jr(t,e){return t+tn(hn()*(e-t+1))}function Fr(t,e){var n="";if(!t||e<1||e>9007199254740991)return n;do{e%2&&(n+=t),(e=tn(e/2))&&(t+=t)}while(e);return n}function zr(t,e){return wo(go(t,e,Zs),t+"")}function Br(t){return Bn(Ms(t))}function Ur(t,e){var n=Ms(t);return So(n,Yn(e,0,n.length))}function Gr(t,e,n,r){if(!qa(t))return t;for(var i=-1,o=(e=li(e,t)).length,a=o-1,s=t;null!=s&&++i<o;){var l=Oo(e[i]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(i!=a){var u=s[l];void 0===(c=r?r(u,l,s):void 0)&&(c=qa(u)?u:so(e[i+1])?[]:{})}qn(s,l,c),s=s[l]}return t}var Vr=_n?function(t,e){return _n.set(t,e),t}:Zs,qr=ve?function(t,e){return ve(t,"toString",{configurable:!0,enumerable:!1,value:qs(e),writable:!0})}:Zs;function Hr(t){return So(Ms(t))}function Wr(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var a=r(o);++i<o;)a[i]=t[i+e];return a}function Zr(t,e){var n;return er(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function $r(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!Ja(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return Kr(t,e,Zs,n)}function Kr(t,e,n,r){var i=0,o=null==t?0:t.length;if(0===o)return 0;for(var a=(e=n(e))!=e,s=null===e,l=Ja(e),c=void 0===e;i<o;){var u=tn((i+o)/2),h=n(t[u]),d=void 0!==h,p=null===h,f=h==h,m=Ja(h);if(a)var g=r||f;else g=c?f&&(r||d):s?f&&d&&(r||!p):l?f&&d&&!p&&(r||!m):!p&&!m&&(r?h<=e:h<e);g?i=u+1:o=u}return ln(o,4294967294)}function Yr(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!Ma(s,l)){var l=s;o[i++]=0===a?0:a}}return o}function Xr(t){return"number"==typeof t?t:Ja(t)?NaN:+t}function Jr(t){if("string"==typeof t)return t;if(Ra(t))return pe(t,Jr)+"";if(Ja(t))return In?In.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Qr(t,e,n){var r=-1,i=he,o=t.length,a=!0,s=[],l=s;if(n)a=!1,i=de;else if(o>=200){var c=e?null:Fi(t);if(c)return qe(c);a=!1,i=De,l=new jn}else l=e?[]:s;t:for(;++r<o;){var u=t[r],h=e?e(u):u;if(u=n||0!==u?u:0,a&&h==h){for(var d=l.length;d--;)if(l[d]===h)continue t;e&&l.push(h),s.push(u)}else i(l,h,n)||(l!==s&&l.push(h),s.push(u))}return s}function ti(t,e){return null==(t=yo(t,e=li(e,t)))||delete t[Oo(Bo(e))]}function ei(t,e,n,r){return Gr(t,e,n(dr(t,e)),r)}function ni(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?Wr(t,r?0:o,r?o+1:i):Wr(t,r?o+1:0,r?i:o)}function ri(t,e){var n=t;return n instanceof Dn&&(n=n.value()),me(e,(function(t,e){return e.func.apply(e.thisArg,fe([t],e.args))}),n)}function ii(t,e,n){var i=t.length;if(i<2)return i?Qr(t[0]):[];for(var o=-1,a=r(i);++o<i;)for(var s=t[o],l=-1;++l<i;)l!=o&&(a[o]=tr(a[o]||s,t[l],e,n));return Qr(ar(a,1),e,n)}function oi(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;){var s=r<o?e[r]:void 0;n(a,t[r],s)}return a}function ai(t){return ja(t)?t:[]}function si(t){return"function"==typeof t?t:Zs}function li(t,e){return Ra(t)?t:co(t,e)?[t]:To(ls(t))}var ci=zr;function ui(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:Wr(t,e,n)}var hi=Te||function(t){return Zt.clearTimeout(t)};function di(t,e){if(e)return t.slice();var n=t.length,r=Nt?Nt(n):new t.constructor(n);return t.copy(r),r}function pi(t){var e=new t.constructor(t.byteLength);return new Rt(e).set(new Rt(t)),e}function fi(t,e){var n=e?pi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function mi(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t==t,o=Ja(t),a=void 0!==e,s=null===e,l=e==e,c=Ja(e);if(!s&&!c&&!o&&t>e||o&&a&&l&&!s&&!c||r&&a&&l||!n&&l||!i)return 1;if(!r&&!o&&!c&&t<e||c&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!l)return-1}return 0}function gi(t,e,n,i){for(var o=-1,a=t.length,s=n.length,l=-1,c=e.length,u=sn(a-s,0),h=r(c+u),d=!i;++l<c;)h[l]=e[l];for(;++o<s;)(d||o<a)&&(h[n[o]]=t[o]);for(;u--;)h[l++]=t[o++];return h}function yi(t,e,n,i){for(var o=-1,a=t.length,s=-1,l=n.length,c=-1,u=e.length,h=sn(a-l,0),d=r(h+u),p=!i;++o<h;)d[o]=t[o];for(var f=o;++c<u;)d[f+c]=e[c];for(;++s<l;)(p||o<a)&&(d[f+n[s]]=t[o++]);return d}function vi(t,e){var n=-1,i=t.length;for(e||(e=r(i));++n<i;)e[n]=t[n];return e}function _i(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],l=r?r(n[s],t[s],s,n,t):void 0;void 0===l&&(l=t[s]),i?$n(n,s,l):qn(n,s,l)}return n}function bi(t,e){return function(n,r){var i=Ra(n)?ae:Wn,o=e?e():{};return i(n,t,Xi(r,2),o)}}function xi(t){return zr((function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,a&&lo(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),e=ft(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e}))}function wi(t,e){return function(n,r){if(null==n)return n;if(!Na(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=ft(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Ei(t){return function(e,n,r){for(var i=-1,o=ft(e),a=r(e),s=a.length;s--;){var l=a[t?s:++i];if(!1===n(o[l],l,o))break}return e}}function Ci(t){return function(e){var n=Be(e=ls(e))?Ze(e):void 0,r=n?n[0]:e.charAt(0),i=n?ui(n,1).join(""):e.slice(1);return r[t]()+i}}function Si(t){return function(e){return me(Us(Ds(e).replace(Pt,"")),t,"")}}function Ti(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Mn(t.prototype),r=t.apply(n,e);return qa(r)?r:n}}function Oi(t){return function(e,n,r){var i=ft(e);if(!Na(e)){var o=Xi(n,3);e=xs(e),n=function(t){return o(i[t],t,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:void 0}}function Ii(t){return Hi((function(e){var n=e.length,r=n,i=Pn.prototype.thru;for(t&&e.reverse();r--;){var a=e[r];if("function"!=typeof a)throw new yt(o);if(i&&!s&&"wrapper"==Ki(a))var s=new Pn([],!0)}for(r=s?r:n;++r<n;){var l=Ki(a=e[r]),c="wrapper"==l?$i(a):void 0;s=c&&uo(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?s[Ki(c[0])].apply(s,c[3]):1==a.length&&uo(a)?s[l]():s.thru(a)}return function(){var t=arguments,r=t[0];if(s&&1==t.length&&Ra(r))return s.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}}))}function Ai(t,e,n,i,o,a,s,l,c,u){var h=128&e,d=1&e,p=2&e,f=24&e,m=512&e,g=p?void 0:Ti(t);return function y(){for(var v=arguments.length,_=r(v),b=v;b--;)_[b]=arguments[b];if(f)var x=Yi(y),w=Ne(_,x);if(i&&(_=gi(_,i,o,f)),a&&(_=yi(_,a,s,f)),v-=w,f&&v<u){var E=Ve(_,x);return Ni(t,e,Ai,y.placeholder,n,_,E,l,c,u-v)}var C=d?n:this,S=p?C[t]:t;return v=_.length,l?_=vo(_,l):m&&v>1&&_.reverse(),h&&c<v&&(_.length=c),this&&this!==Zt&&this instanceof y&&(S=g||Ti(S)),S.apply(C,_)}}function Mi(t,e){return function(n,r){return function(t,e,n,r){return cr(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}function ki(t,e){return function(n,r){var i;if(void 0===n&&void 0===r)return e;if(void 0!==n&&(i=n),void 0!==r){if(void 0===i)return r;"string"==typeof n||"string"==typeof r?(n=Jr(n),r=Jr(r)):(n=Xr(n),r=Xr(r)),i=t(n,r)}return i}}function Pi(t){return Hi((function(e){return e=pe(e,ke(Xi())),zr((function(n){var r=this;return t(e,(function(t){return oe(t,r,n)}))}))}))}function Di(t,e){var n=(e=void 0===e?" ":Jr(e)).length;if(n<2)return n?Fr(e,t):e;var r=Fr(e,Qe(t/We(e)));return Be(e)?ui(Ze(r),0,t).join(""):r.slice(0,t)}function Ri(t){return function(e,n,i){return i&&"number"!=typeof i&&lo(e,n,i)&&(n=i=void 0),e=rs(e),void 0===n?(n=e,e=0):n=rs(n),function(t,e,n,i){for(var o=-1,a=sn(Qe((e-t)/(n||1)),0),s=r(a);a--;)s[i?a:++o]=t,t+=n;return s}(e,n,i=void 0===i?e<n?1:-1:rs(i),t)}}function Li(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=as(e),n=as(n)),t(e,n)}}function Ni(t,e,n,r,i,o,a,s,l,c){var u=8&e;e|=u?32:64,4&(e&=~(u?64:32))||(e&=-4);var h=[t,e,i,u?o:void 0,u?a:void 0,u?void 0:o,u?void 0:a,s,l,c],d=n.apply(void 0,h);return uo(t)&&bo(d,h),d.placeholder=r,Eo(d,t,e)}function ji(t){var e=pt[t];return function(t,n){if(t=as(t),(n=null==n?0:ln(is(n),292))&&rn(t)){var r=(ls(t)+"e").split("e");return+((r=(ls(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Fi=gn&&1/qe(new gn([,-0]))[1]==1/0?function(t){return new gn(t)}:Js;function zi(t){return function(e){var n=ro(e);return n==m?Ue(e):n==_?He(e):function(t,e){return pe(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Bi(t,e,n,i,s,l,c,u){var h=2&e;if(!h&&"function"!=typeof t)throw new yt(o);var d=i?i.length:0;if(d||(e&=-97,i=s=void 0),c=void 0===c?c:sn(is(c),0),u=void 0===u?u:is(u),d-=s?s.length:0,64&e){var p=i,f=s;i=s=void 0}var m=h?void 0:$i(t),g=[t,e,n,i,s,p,f,l,c,u];if(m&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,s=128==r&&8==n||128==r&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!s)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var l=e[3];if(l){var c=t[3];t[3]=c?gi(c,l,e[4]):l,t[4]=c?Ve(t[3],a):e[4]}(l=e[5])&&(c=t[5],t[5]=c?yi(c,l,e[6]):l,t[6]=c?Ve(t[5],a):e[6]);(l=e[7])&&(t[7]=l);128&r&&(t[8]=null==t[8]?e[8]:ln(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=i}(g,m),t=g[0],e=g[1],n=g[2],i=g[3],s=g[4],!(u=g[9]=void 0===g[9]?h?0:t.length:sn(g[9]-d,0))&&24&e&&(e&=-25),e&&1!=e)y=8==e||16==e?function(t,e,n){var i=Ti(t);return function o(){for(var a=arguments.length,s=r(a),l=a,c=Yi(o);l--;)s[l]=arguments[l];var u=a<3&&s[0]!==c&&s[a-1]!==c?[]:Ve(s,c);if((a-=u.length)<n)return Ni(t,e,Ai,o.placeholder,void 0,s,u,void 0,void 0,n-a);var h=this&&this!==Zt&&this instanceof o?i:t;return oe(h,this,s)}}(t,e,u):32!=e&&33!=e||s.length?Ai.apply(void 0,g):function(t,e,n,i){var o=1&e,a=Ti(t);return function e(){for(var s=-1,l=arguments.length,c=-1,u=i.length,h=r(u+l),d=this&&this!==Zt&&this instanceof e?a:t;++c<u;)h[c]=i[c];for(;l--;)h[c++]=arguments[++s];return oe(d,o?n:this,h)}}(t,e,n,i);else var y=function(t,e,n){var r=1&e,i=Ti(t);return function e(){var o=this&&this!==Zt&&this instanceof e?i:t;return o.apply(r?n:this,arguments)}}(t,e,n);return Eo((m?Vr:bo)(y,g),t,e)}function Ui(t,e,n,r){return void 0===t||Ma(t,bt[n])&&!Et.call(r,n)?e:t}function Gi(t,e,n,r,i,o){return qa(t)&&qa(e)&&(o.set(e,t),kr(t,e,void 0,Gi,o),o.delete(e)),t}function Vi(t){return $a(t)?void 0:t}function qi(t,e,n,r,i,o){var a=1&n,s=t.length,l=e.length;if(s!=l&&!(a&&l>s))return!1;var c=o.get(t),u=o.get(e);if(c&&u)return c==e&&u==t;var h=-1,d=!0,p=2&n?new jn:void 0;for(o.set(t,e),o.set(e,t);++h<s;){var f=t[h],m=e[h];if(r)var g=a?r(m,f,h,e,t,o):r(f,m,h,t,e,o);if(void 0!==g){if(g)continue;d=!1;break}if(p){if(!ye(e,(function(t,e){if(!De(p,e)&&(f===t||i(f,t,n,r,o)))return p.push(e)}))){d=!1;break}}else if(f!==m&&!i(f,m,n,r,o)){d=!1;break}}return o.delete(t),o.delete(e),d}function Hi(t){return wo(go(t,void 0,Lo),t+"")}function Wi(t){return pr(t,xs,eo)}function Zi(t){return pr(t,ws,no)}var $i=_n?function(t){return _n.get(t)}:Js;function Ki(t){for(var e=t.name+"",n=bn[e],r=Et.call(bn,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function Yi(t){return(Et.call(An,"placeholder")?An:t).placeholder}function Xi(){var t=An.iteratee||$s;return t=t===$s?Cr:t,arguments.length?t(arguments[0],arguments[1]):t}function Ji(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function Qi(t){for(var e=xs(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,fo(i)]}return e}function to(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return Er(n)?n:void 0}var eo=en?function(t){return null==t?[]:(t=ft(t),ue(en(t),(function(e){return Wt.call(t,e)})))}:ol,no=en?function(t){for(var e=[];t;)fe(e,eo(t)),t=Gt(t);return e}:ol,ro=fr;function io(t,e,n){for(var r=-1,i=(e=li(e,t)).length,o=!1;++r<i;){var a=Oo(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Va(i)&&so(a,i)&&(Ra(t)||Da(t))}function oo(t){return"function"!=typeof t.constructor||po(t)?{}:Mn(Gt(t))}function ao(t){return Ra(t)||Da(t)||!!(Kt&&t&&t[Kt])}function so(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&lt.test(t))&&t>-1&&t%1==0&&t<e}function lo(t,e,n){if(!qa(n))return!1;var r=typeof e;return!!("number"==r?Na(n)&&so(e,n.length):"string"==r&&e in n)&&Ma(n[e],t)}function co(t,e){if(Ra(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Ja(t))||(q.test(t)||!V.test(t)||null!=e&&t in ft(e))}function uo(t){var e=Ki(t),n=An[e];if("function"!=typeof n||!(e in Dn.prototype))return!1;if(t===n)return!0;var r=$i(n);return!!r&&t===r[0]}(pn&&ro(new pn(new ArrayBuffer(1)))!=C||fn&&ro(new fn)!=m||mn&&"[object Promise]"!=ro(mn.resolve())||gn&&ro(new gn)!=_||yn&&ro(new yn)!=w)&&(ro=function(t){var e=fr(t),n=e==y?t.constructor:void 0,r=n?Io(n):"";if(r)switch(r){case xn:return C;case wn:return m;case En:return"[object Promise]";case Cn:return _;case Sn:return w}return e});var ho=xt?Ua:al;function po(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||bt)}function fo(t){return t==t&&!qa(t)}function mo(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in ft(n)))}}function go(t,e,n){return e=sn(void 0===e?t.length-1:e,0),function(){for(var i=arguments,o=-1,a=sn(i.length-e,0),s=r(a);++o<a;)s[o]=i[e+o];o=-1;for(var l=r(e+1);++o<e;)l[o]=i[o];return l[e]=n(s),oe(t,this,l)}}function yo(t,e){return e.length<2?t:dr(t,Wr(e,0,-1))}function vo(t,e){for(var n=t.length,r=ln(e.length,n),i=vi(t);r--;){var o=e[r];t[r]=so(o,n)?i[o]:void 0}return t}function _o(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var bo=Co(Vr),xo=Je||function(t,e){return Zt.setTimeout(t,e)},wo=Co(qr);function Eo(t,e,n){var r=e+"";return wo(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Y,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return se(s,(function(n){var r="_."+n[0];e&n[1]&&!he(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(X);return e?e[1].split(J):[]}(r),n)))}function Co(t){var e=0,n=0;return function(){var r=cn(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function So(t,e){var n=-1,r=t.length,i=r-1;for(e=void 0===e?r:e;++n<e;){var o=jr(n,i),a=t[o];t[o]=t[n],t[n]=a}return t.length=e,t}var To=function(t){var e=Ca(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(H,(function(t,n,r,i){e.push(r?i.replace(et,"$1"):n||t)})),e}));function Oo(t){if("string"==typeof t||Ja(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Io(t){if(null!=t){try{return wt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ao(t){if(t instanceof Dn)return t.clone();var e=new Pn(t.__wrapped__,t.__chain__);return e.__actions__=vi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Mo=zr((function(t,e){return ja(t)?tr(t,ar(e,1,ja,!0)):[]})),ko=zr((function(t,e){var n=Bo(e);return ja(n)&&(n=void 0),ja(t)?tr(t,ar(e,1,ja,!0),Xi(n,2)):[]})),Po=zr((function(t,e){var n=Bo(e);return ja(n)&&(n=void 0),ja(t)?tr(t,ar(e,1,ja,!0),void 0,n):[]}));function Do(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:is(n);return i<0&&(i=sn(r+i,0)),be(t,Xi(e,3),i)}function Ro(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return void 0!==n&&(i=is(n),i=n<0?sn(r+i,0):ln(i,r-1)),be(t,Xi(e,3),i,!0)}function Lo(t){return(null==t?0:t.length)?ar(t,1):[]}function No(t){return t&&t.length?t[0]:void 0}var jo=zr((function(t){var e=pe(t,ai);return e.length&&e[0]===t[0]?vr(e):[]})),Fo=zr((function(t){var e=Bo(t),n=pe(t,ai);return e===Bo(n)?e=void 0:n.pop(),n.length&&n[0]===t[0]?vr(n,Xi(e,2)):[]})),zo=zr((function(t){var e=Bo(t),n=pe(t,ai);return(e="function"==typeof e?e:void 0)&&n.pop(),n.length&&n[0]===t[0]?vr(n,void 0,e):[]}));function Bo(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}var Uo=zr(Go);function Go(t,e){return t&&t.length&&e&&e.length?Lr(t,e):t}var Vo=Hi((function(t,e){var n=null==t?0:t.length,r=Kn(t,e);return Nr(t,pe(e,(function(t){return so(t,n)?+t:t})).sort(mi)),r}));function qo(t){return null==t?t:dn.call(t)}var Ho=zr((function(t){return Qr(ar(t,1,ja,!0))})),Wo=zr((function(t){var e=Bo(t);return ja(e)&&(e=void 0),Qr(ar(t,1,ja,!0),Xi(e,2))})),Zo=zr((function(t){var e=Bo(t);return e="function"==typeof e?e:void 0,Qr(ar(t,1,ja,!0),void 0,e)}));function $o(t){if(!t||!t.length)return[];var e=0;return t=ue(t,(function(t){if(ja(t))return e=sn(t.length,e),!0})),Ae(e,(function(e){return pe(t,Se(e))}))}function Ko(t,e){if(!t||!t.length)return[];var n=$o(t);return null==e?n:pe(n,(function(t){return oe(e,void 0,t)}))}var Yo=zr((function(t,e){return ja(t)?tr(t,e):[]})),Xo=zr((function(t){return ii(ue(t,ja))})),Jo=zr((function(t){var e=Bo(t);return ja(e)&&(e=void 0),ii(ue(t,ja),Xi(e,2))})),Qo=zr((function(t){var e=Bo(t);return e="function"==typeof e?e:void 0,ii(ue(t,ja),void 0,e)})),ta=zr($o);var ea=zr((function(t){var e=t.length,n=e>1?t[e-1]:void 0;return n="function"==typeof n?(t.pop(),n):void 0,Ko(t,n)}));function na(t){var e=An(t);return e.__chain__=!0,e}function ra(t,e){return e(t)}var ia=Hi((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,i=function(e){return Kn(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Dn&&so(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:ra,args:[i],thisArg:void 0}),new Pn(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(void 0),t}))):this.thru(i)}));var oa=bi((function(t,e,n){Et.call(t,n)?++t[n]:$n(t,n,1)}));var aa=Oi(Do),sa=Oi(Ro);function la(t,e){return(Ra(t)?se:er)(t,Xi(e,3))}function ca(t,e){return(Ra(t)?le:nr)(t,Xi(e,3))}var ua=bi((function(t,e,n){Et.call(t,n)?t[n].push(e):$n(t,n,[e])}));var ha=zr((function(t,e,n){var i=-1,o="function"==typeof e,a=Na(t)?r(t.length):[];return er(t,(function(t){a[++i]=o?oe(e,t,n):_r(t,e,n)})),a})),da=bi((function(t,e,n){$n(t,n,e)}));function pa(t,e){return(Ra(t)?pe:Ir)(t,Xi(e,3))}var fa=bi((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));var ma=zr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&lo(t,e[0],e[1])?e=[]:n>2&&lo(e[0],e[1],e[2])&&(e=[e[0]]),Dr(t,ar(e,1),[])})),ga=Xe||function(){return Zt.Date.now()};function ya(t,e,n){return e=n?void 0:e,Bi(t,128,void 0,void 0,void 0,void 0,e=t&&null==e?t.length:e)}function va(t,e){var n;if("function"!=typeof e)throw new yt(o);return t=is(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=void 0),n}}var _a=zr((function(t,e,n){var r=1;if(n.length){var i=Ve(n,Yi(_a));r|=32}return Bi(t,r,e,n,i)})),ba=zr((function(t,e,n){var r=3;if(n.length){var i=Ve(n,Yi(ba));r|=32}return Bi(e,r,t,n,i)}));function xa(t,e,n){var r,i,a,s,l,c,u=0,h=!1,d=!1,p=!0;if("function"!=typeof t)throw new yt(o);function f(e){var n=r,o=i;return r=i=void 0,u=e,s=t.apply(o,n)}function m(t){return u=t,l=xo(y,e),h?f(t):s}function g(t){var n=t-c;return void 0===c||n>=e||n<0||d&&t-u>=a}function y(){var t=ga();if(g(t))return v(t);l=xo(y,function(t){var n=e-(t-c);return d?ln(n,a-(t-u)):n}(t))}function v(t){return l=void 0,p&&r?f(t):(r=i=void 0,s)}function _(){var t=ga(),n=g(t);if(r=arguments,i=this,c=t,n){if(void 0===l)return m(c);if(d)return hi(l),l=xo(y,e),f(c)}return void 0===l&&(l=xo(y,e)),s}return e=as(e)||0,qa(n)&&(h=!!n.leading,a=(d="maxWait"in n)?sn(as(n.maxWait)||0,e):a,p="trailing"in n?!!n.trailing:p),_.cancel=function(){void 0!==l&&hi(l),u=0,r=c=i=l=void 0},_.flush=function(){return void 0===l?s:v(ga())},_}var wa=zr((function(t,e){return Qn(t,1,e)})),Ea=zr((function(t,e,n){return Qn(t,as(e)||0,n)}));function Ca(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new yt(o);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Ca.Cache||Nn),n}function Sa(t){if("function"!=typeof t)throw new yt(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Ca.Cache=Nn;var Ta=ci((function(t,e){var n=(e=1==e.length&&Ra(e[0])?pe(e[0],ke(Xi())):pe(ar(e,1),ke(Xi()))).length;return zr((function(r){for(var i=-1,o=ln(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return oe(t,this,r)}))})),Oa=zr((function(t,e){return Bi(t,32,void 0,e,Ve(e,Yi(Oa)))})),Ia=zr((function(t,e){return Bi(t,64,void 0,e,Ve(e,Yi(Ia)))})),Aa=Hi((function(t,e){return Bi(t,256,void 0,void 0,void 0,e)}));function Ma(t,e){return t===e||t!=t&&e!=e}var ka=Li(mr),Pa=Li((function(t,e){return t>=e})),Da=br(function(){return arguments}())?br:function(t){return Ha(t)&&Et.call(t,"callee")&&!Wt.call(t,"callee")},Ra=r.isArray,La=Qt?ke(Qt):function(t){return Ha(t)&&fr(t)==E};function Na(t){return null!=t&&Va(t.length)&&!Ua(t)}function ja(t){return Ha(t)&&Na(t)}var Fa=nn||al,za=te?ke(te):function(t){return Ha(t)&&fr(t)==h};function Ba(t){if(!Ha(t))return!1;var e=fr(t);return e==d||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!$a(t)}function Ua(t){if(!qa(t))return!1;var e=fr(t);return e==p||e==f||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Ga(t){return"number"==typeof t&&t==is(t)}function Va(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function qa(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Ha(t){return null!=t&&"object"==typeof t}var Wa=ee?ke(ee):function(t){return Ha(t)&&ro(t)==m};function Za(t){return"number"==typeof t||Ha(t)&&fr(t)==g}function $a(t){if(!Ha(t)||fr(t)!=y)return!1;var e=Gt(t);if(null===e)return!0;var n=Et.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&wt.call(n)==Ot}var Ka=ne?ke(ne):function(t){return Ha(t)&&fr(t)==v};var Ya=re?ke(re):function(t){return Ha(t)&&ro(t)==_};function Xa(t){return"string"==typeof t||!Ra(t)&&Ha(t)&&fr(t)==b}function Ja(t){return"symbol"==typeof t||Ha(t)&&fr(t)==x}var Qa=ie?ke(ie):function(t){return Ha(t)&&Va(t.length)&&!!Bt[fr(t)]};var ts=Li(Or),es=Li((function(t,e){return t<=e}));function ns(t){if(!t)return[];if(Na(t))return Xa(t)?Ze(t):vi(t);if(Xt&&t[Xt])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Xt]());var e=ro(t);return(e==m?Ue:e==_?qe:Ms)(t)}function rs(t){return t?(t=as(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function is(t){var e=rs(t),n=e%1;return e==e?n?e-n:e:0}function os(t){return t?Yn(is(t),0,4294967295):0}function as(t){if("number"==typeof t)return t;if(Ja(t))return NaN;if(qa(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=qa(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Me(t);var n=ot.test(t);return n||st.test(t)?qt(t.slice(2),n?2:8):it.test(t)?NaN:+t}function ss(t){return _i(t,ws(t))}function ls(t){return null==t?"":Jr(t)}var cs=xi((function(t,e){if(po(e)||Na(e))_i(e,xs(e),t);else for(var n in e)Et.call(e,n)&&qn(t,n,e[n])})),us=xi((function(t,e){_i(e,ws(e),t)})),hs=xi((function(t,e,n,r){_i(e,ws(e),t,r)})),ds=xi((function(t,e,n,r){_i(e,xs(e),t,r)})),ps=Hi(Kn);var fs=zr((function(t,e){t=ft(t);var n=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&lo(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],a=ws(o),s=-1,l=a.length;++s<l;){var c=a[s],u=t[c];(void 0===u||Ma(u,bt[c])&&!Et.call(t,c))&&(t[c]=o[c])}return t})),ms=zr((function(t){return t.push(void 0,Gi),oe(Cs,void 0,t)}));function gs(t,e,n){var r=null==t?void 0:dr(t,e);return void 0===r?n:r}function ys(t,e){return null!=t&&io(t,e,yr)}var vs=Mi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Tt.call(e)),t[e]=n}),qs(Zs)),_s=Mi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Tt.call(e)),Et.call(t,e)?t[e].push(n):t[e]=[n]}),Xi),bs=zr(_r);function xs(t){return Na(t)?zn(t):Sr(t)}function ws(t){return Na(t)?zn(t,!0):Tr(t)}var Es=xi((function(t,e,n){kr(t,e,n)})),Cs=xi((function(t,e,n,r){kr(t,e,n,r)})),Ss=Hi((function(t,e){var n={};if(null==t)return n;var r=!1;e=pe(e,(function(e){return e=li(e,t),r||(r=e.length>1),e})),_i(t,Zi(t),n),r&&(n=Xn(n,7,Vi));for(var i=e.length;i--;)ti(n,e[i]);return n}));var Ts=Hi((function(t,e){return null==t?{}:function(t,e){return Rr(t,e,(function(e,n){return ys(t,n)}))}(t,e)}));function Os(t,e){if(null==t)return{};var n=pe(Zi(t),(function(t){return[t]}));return e=Xi(e),Rr(t,n,(function(t,n){return e(t,n[0])}))}var Is=zi(xs),As=zi(ws);function Ms(t){return null==t?[]:Pe(t,xs(t))}var ks=Si((function(t,e,n){return e=e.toLowerCase(),t+(n?Ps(e):e)}));function Ps(t){return Bs(ls(t).toLowerCase())}function Ds(t){return(t=ls(t))&&t.replace(ct,je).replace(Dt,"")}var Rs=Si((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Ls=Si((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Ns=Ci("toLowerCase");var js=Si((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var Fs=Si((function(t,e,n){return t+(n?" ":"")+Bs(e)}));var zs=Si((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Bs=Ci("toUpperCase");function Us(t,e,n){return t=ls(t),void 0===(e=n?void 0:e)?function(t){return jt.test(t)}(t)?function(t){return t.match(Lt)||[]}(t):function(t){return t.match(Q)||[]}(t):t.match(e)||[]}var Gs=zr((function(t,e){try{return oe(t,void 0,e)}catch(t){return Ba(t)?t:new K(t)}})),Vs=Hi((function(t,e){return se(e,(function(e){e=Oo(e),$n(t,e,_a(t[e],t))})),t}));function qs(t){return function(){return t}}var Hs=Ii(),Ws=Ii(!0);function Zs(t){return t}function $s(t){return Cr("function"==typeof t?t:Xn(t,1))}var Ks=zr((function(t,e){return function(n){return _r(n,t,e)}})),Ys=zr((function(t,e){return function(n){return _r(t,n,e)}}));function Xs(t,e,n){var r=xs(e),i=hr(e,r);null!=n||qa(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=hr(e,xs(e)));var o=!(qa(n)&&"chain"in n&&!n.chain),a=Ua(t);return se(i,(function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=vi(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,fe([this.value()],arguments))})})),t}function Js(){}var Qs=Pi(pe),tl=Pi(ce),el=Pi(ye);function nl(t){return co(t)?Se(Oo(t)):function(t){return function(e){return dr(e,t)}}(t)}var rl=Ri(),il=Ri(!0);function ol(){return[]}function al(){return!1}var sl=ki((function(t,e){return t+e}),0),ll=ji("ceil"),cl=ki((function(t,e){return t/e}),1),ul=ji("floor");var hl,dl=ki((function(t,e){return t*e}),1),pl=ji("round"),fl=ki((function(t,e){return t-e}),0);return An.after=function(t,e){if("function"!=typeof e)throw new yt(o);return t=is(t),function(){if(--t<1)return e.apply(this,arguments)}},An.ary=ya,An.assign=cs,An.assignIn=us,An.assignInWith=hs,An.assignWith=ds,An.at=ps,An.before=va,An.bind=_a,An.bindAll=Vs,An.bindKey=ba,An.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Ra(t)?t:[t]},An.chain=na,An.chunk=function(t,e,n){e=(n?lo(t,e,n):void 0===e)?1:sn(is(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var o=0,a=0,s=r(Qe(i/e));o<i;)s[a++]=Wr(t,o,o+=e);return s},An.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},An.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return fe(Ra(n)?vi(n):[n],ar(e,1))},An.cond=function(t){var e=null==t?0:t.length,n=Xi();return t=e?pe(t,(function(t){if("function"!=typeof t[1])throw new yt(o);return[n(t[0]),t[1]]})):[],zr((function(n){for(var r=-1;++r<e;){var i=t[r];if(oe(i[0],this,n))return oe(i[1],this,n)}}))},An.conforms=function(t){return function(t){var e=xs(t);return function(n){return Jn(n,t,e)}}(Xn(t,1))},An.constant=qs,An.countBy=oa,An.create=function(t,e){var n=Mn(t);return null==e?n:Zn(n,e)},An.curry=function t(e,n,r){var i=Bi(e,8,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=t.placeholder,i},An.curryRight=function t(e,n,r){var i=Bi(e,16,void 0,void 0,void 0,void 0,void 0,n=r?void 0:n);return i.placeholder=t.placeholder,i},An.debounce=xa,An.defaults=fs,An.defaultsDeep=ms,An.defer=wa,An.delay=Ea,An.difference=Mo,An.differenceBy=ko,An.differenceWith=Po,An.drop=function(t,e,n){var r=null==t?0:t.length;return r?Wr(t,(e=n||void 0===e?1:is(e))<0?0:e,r):[]},An.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?Wr(t,0,(e=r-(e=n||void 0===e?1:is(e)))<0?0:e):[]},An.dropRightWhile=function(t,e){return t&&t.length?ni(t,Xi(e,3),!0,!0):[]},An.dropWhile=function(t,e){return t&&t.length?ni(t,Xi(e,3),!0):[]},An.fill=function(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&lo(t,e,n)&&(n=0,r=i),function(t,e,n,r){var i=t.length;for((n=is(n))<0&&(n=-n>i?0:i+n),(r=void 0===r||r>i?i:is(r))<0&&(r+=i),r=n>r?0:os(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},An.filter=function(t,e){return(Ra(t)?ue:or)(t,Xi(e,3))},An.flatMap=function(t,e){return ar(pa(t,e),1)},An.flatMapDeep=function(t,e){return ar(pa(t,e),1/0)},An.flatMapDepth=function(t,e,n){return n=void 0===n?1:is(n),ar(pa(t,e),n)},An.flatten=Lo,An.flattenDeep=function(t){return(null==t?0:t.length)?ar(t,1/0):[]},An.flattenDepth=function(t,e){return(null==t?0:t.length)?ar(t,e=void 0===e?1:is(e)):[]},An.flip=function(t){return Bi(t,512)},An.flow=Hs,An.flowRight=Ws,An.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},An.functions=function(t){return null==t?[]:hr(t,xs(t))},An.functionsIn=function(t){return null==t?[]:hr(t,ws(t))},An.groupBy=ua,An.initial=function(t){return(null==t?0:t.length)?Wr(t,0,-1):[]},An.intersection=jo,An.intersectionBy=Fo,An.intersectionWith=zo,An.invert=vs,An.invertBy=_s,An.invokeMap=ha,An.iteratee=$s,An.keyBy=da,An.keys=xs,An.keysIn=ws,An.map=pa,An.mapKeys=function(t,e){var n={};return e=Xi(e,3),cr(t,(function(t,r,i){$n(n,e(t,r,i),t)})),n},An.mapValues=function(t,e){var n={};return e=Xi(e,3),cr(t,(function(t,r,i){$n(n,r,e(t,r,i))})),n},An.matches=function(t){return Ar(Xn(t,1))},An.matchesProperty=function(t,e){return Mr(t,Xn(e,1))},An.memoize=Ca,An.merge=Es,An.mergeWith=Cs,An.method=Ks,An.methodOf=Ys,An.mixin=Xs,An.negate=Sa,An.nthArg=function(t){return t=is(t),zr((function(e){return Pr(e,t)}))},An.omit=Ss,An.omitBy=function(t,e){return Os(t,Sa(Xi(e)))},An.once=function(t){return va(2,t)},An.orderBy=function(t,e,n,r){return null==t?[]:(Ra(e)||(e=null==e?[]:[e]),Ra(n=r?void 0:n)||(n=null==n?[]:[n]),Dr(t,e,n))},An.over=Qs,An.overArgs=Ta,An.overEvery=tl,An.overSome=el,An.partial=Oa,An.partialRight=Ia,An.partition=fa,An.pick=Ts,An.pickBy=Os,An.property=nl,An.propertyOf=function(t){return function(e){return null==t?void 0:dr(t,e)}},An.pull=Uo,An.pullAll=Go,An.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Lr(t,e,Xi(n,2)):t},An.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Lr(t,e,void 0,n):t},An.pullAt=Vo,An.range=rl,An.rangeRight=il,An.rearg=Aa,An.reject=function(t,e){return(Ra(t)?ue:or)(t,Sa(Xi(e,3)))},An.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=Xi(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return Nr(t,i),n},An.rest=function(t,e){if("function"!=typeof t)throw new yt(o);return zr(t,e=void 0===e?e:is(e))},An.reverse=qo,An.sampleSize=function(t,e,n){return e=(n?lo(t,e,n):void 0===e)?1:is(e),(Ra(t)?Un:Ur)(t,e)},An.set=function(t,e,n){return null==t?t:Gr(t,e,n)},An.setWith=function(t,e,n,r){return r="function"==typeof r?r:void 0,null==t?t:Gr(t,e,n,r)},An.shuffle=function(t){return(Ra(t)?Gn:Hr)(t)},An.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&lo(t,e,n)?(e=0,n=r):(e=null==e?0:is(e),n=void 0===n?r:is(n)),Wr(t,e,n)):[]},An.sortBy=ma,An.sortedUniq=function(t){return t&&t.length?Yr(t):[]},An.sortedUniqBy=function(t,e){return t&&t.length?Yr(t,Xi(e,2)):[]},An.split=function(t,e,n){return n&&"number"!=typeof n&&lo(t,e,n)&&(e=n=void 0),(n=void 0===n?4294967295:n>>>0)?(t=ls(t))&&("string"==typeof e||null!=e&&!Ka(e))&&!(e=Jr(e))&&Be(t)?ui(Ze(t),0,n):t.split(e,n):[]},An.spread=function(t,e){if("function"!=typeof t)throw new yt(o);return e=null==e?0:sn(is(e),0),zr((function(n){var r=n[e],i=ui(n,0,e);return r&&fe(i,r),oe(t,this,i)}))},An.tail=function(t){var e=null==t?0:t.length;return e?Wr(t,1,e):[]},An.take=function(t,e,n){return t&&t.length?Wr(t,0,(e=n||void 0===e?1:is(e))<0?0:e):[]},An.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?Wr(t,(e=r-(e=n||void 0===e?1:is(e)))<0?0:e,r):[]},An.takeRightWhile=function(t,e){return t&&t.length?ni(t,Xi(e,3),!1,!0):[]},An.takeWhile=function(t,e){return t&&t.length?ni(t,Xi(e,3)):[]},An.tap=function(t,e){return e(t),t},An.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new yt(o);return qa(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),xa(t,e,{leading:r,maxWait:e,trailing:i})},An.thru=ra,An.toArray=ns,An.toPairs=Is,An.toPairsIn=As,An.toPath=function(t){return Ra(t)?pe(t,Oo):Ja(t)?[t]:vi(To(ls(t)))},An.toPlainObject=ss,An.transform=function(t,e,n){var r=Ra(t),i=r||Fa(t)||Qa(t);if(e=Xi(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:qa(t)&&Ua(o)?Mn(Gt(t)):{}}return(i?se:cr)(t,(function(t,r,i){return e(n,t,r,i)})),n},An.unary=function(t){return ya(t,1)},An.union=Ho,An.unionBy=Wo,An.unionWith=Zo,An.uniq=function(t){return t&&t.length?Qr(t):[]},An.uniqBy=function(t,e){return t&&t.length?Qr(t,Xi(e,2)):[]},An.uniqWith=function(t,e){return e="function"==typeof e?e:void 0,t&&t.length?Qr(t,void 0,e):[]},An.unset=function(t,e){return null==t||ti(t,e)},An.unzip=$o,An.unzipWith=Ko,An.update=function(t,e,n){return null==t?t:ei(t,e,si(n))},An.updateWith=function(t,e,n,r){return r="function"==typeof r?r:void 0,null==t?t:ei(t,e,si(n),r)},An.values=Ms,An.valuesIn=function(t){return null==t?[]:Pe(t,ws(t))},An.without=Yo,An.words=Us,An.wrap=function(t,e){return Oa(si(e),t)},An.xor=Xo,An.xorBy=Jo,An.xorWith=Qo,An.zip=ta,An.zipObject=function(t,e){return oi(t||[],e||[],qn)},An.zipObjectDeep=function(t,e){return oi(t||[],e||[],Gr)},An.zipWith=ea,An.entries=Is,An.entriesIn=As,An.extend=us,An.extendWith=hs,Xs(An,An),An.add=sl,An.attempt=Gs,An.camelCase=ks,An.capitalize=Ps,An.ceil=ll,An.clamp=function(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=(n=as(n))==n?n:0),void 0!==e&&(e=(e=as(e))==e?e:0),Yn(as(t),e,n)},An.clone=function(t){return Xn(t,4)},An.cloneDeep=function(t){return Xn(t,5)},An.cloneDeepWith=function(t,e){return Xn(t,5,e="function"==typeof e?e:void 0)},An.cloneWith=function(t,e){return Xn(t,4,e="function"==typeof e?e:void 0)},An.conformsTo=function(t,e){return null==e||Jn(t,e,xs(e))},An.deburr=Ds,An.defaultTo=function(t,e){return null==t||t!=t?e:t},An.divide=cl,An.endsWith=function(t,e,n){t=ls(t),e=Jr(e);var r=t.length,i=n=void 0===n?r:Yn(is(n),0,r);return(n-=e.length)>=0&&t.slice(n,i)==e},An.eq=Ma,An.escape=function(t){return(t=ls(t))&&z.test(t)?t.replace(j,Fe):t},An.escapeRegExp=function(t){return(t=ls(t))&&Z.test(t)?t.replace(W,"\\$&"):t},An.every=function(t,e,n){var r=Ra(t)?ce:rr;return n&&lo(t,e,n)&&(e=void 0),r(t,Xi(e,3))},An.find=aa,An.findIndex=Do,An.findKey=function(t,e){return _e(t,Xi(e,3),cr)},An.findLast=sa,An.findLastIndex=Ro,An.findLastKey=function(t,e){return _e(t,Xi(e,3),ur)},An.floor=ul,An.forEach=la,An.forEachRight=ca,An.forIn=function(t,e){return null==t?t:sr(t,Xi(e,3),ws)},An.forInRight=function(t,e){return null==t?t:lr(t,Xi(e,3),ws)},An.forOwn=function(t,e){return t&&cr(t,Xi(e,3))},An.forOwnRight=function(t,e){return t&&ur(t,Xi(e,3))},An.get=gs,An.gt=ka,An.gte=Pa,An.has=function(t,e){return null!=t&&io(t,e,gr)},An.hasIn=ys,An.head=No,An.identity=Zs,An.includes=function(t,e,n,r){t=Na(t)?t:Ms(t),n=n&&!r?is(n):0;var i=t.length;return n<0&&(n=sn(i+n,0)),Xa(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&xe(t,e,n)>-1},An.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:is(n);return i<0&&(i=sn(r+i,0)),xe(t,e,i)},An.inRange=function(t,e,n){return e=rs(e),void 0===n?(n=e,e=0):n=rs(n),function(t,e,n){return t>=ln(e,n)&&t<sn(e,n)}(t=as(t),e,n)},An.invoke=bs,An.isArguments=Da,An.isArray=Ra,An.isArrayBuffer=La,An.isArrayLike=Na,An.isArrayLikeObject=ja,An.isBoolean=function(t){return!0===t||!1===t||Ha(t)&&fr(t)==u},An.isBuffer=Fa,An.isDate=za,An.isElement=function(t){return Ha(t)&&1===t.nodeType&&!$a(t)},An.isEmpty=function(t){if(null==t)return!0;if(Na(t)&&(Ra(t)||"string"==typeof t||"function"==typeof t.splice||Fa(t)||Qa(t)||Da(t)))return!t.length;var e=ro(t);if(e==m||e==_)return!t.size;if(po(t))return!Sr(t).length;for(var n in t)if(Et.call(t,n))return!1;return!0},An.isEqual=function(t,e){return xr(t,e)},An.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:void 0)?n(t,e):void 0;return void 0===r?xr(t,e,void 0,n):!!r},An.isError=Ba,An.isFinite=function(t){return"number"==typeof t&&rn(t)},An.isFunction=Ua,An.isInteger=Ga,An.isLength=Va,An.isMap=Wa,An.isMatch=function(t,e){return t===e||wr(t,e,Qi(e))},An.isMatchWith=function(t,e,n){return n="function"==typeof n?n:void 0,wr(t,e,Qi(e),n)},An.isNaN=function(t){return Za(t)&&t!=+t},An.isNative=function(t){if(ho(t))throw new K("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Er(t)},An.isNil=function(t){return null==t},An.isNull=function(t){return null===t},An.isNumber=Za,An.isObject=qa,An.isObjectLike=Ha,An.isPlainObject=$a,An.isRegExp=Ka,An.isSafeInteger=function(t){return Ga(t)&&t>=-9007199254740991&&t<=9007199254740991},An.isSet=Ya,An.isString=Xa,An.isSymbol=Ja,An.isTypedArray=Qa,An.isUndefined=function(t){return void 0===t},An.isWeakMap=function(t){return Ha(t)&&ro(t)==w},An.isWeakSet=function(t){return Ha(t)&&"[object WeakSet]"==fr(t)},An.join=function(t,e){return null==t?"":on.call(t,e)},An.kebabCase=Rs,An.last=Bo,An.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return void 0!==n&&(i=(i=is(n))<0?sn(r+i,0):ln(i,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,i):be(t,Ee,i,!0)},An.lowerCase=Ls,An.lowerFirst=Ns,An.lt=ts,An.lte=es,An.max=function(t){return t&&t.length?ir(t,Zs,mr):void 0},An.maxBy=function(t,e){return t&&t.length?ir(t,Xi(e,2),mr):void 0},An.mean=function(t){return Ce(t,Zs)},An.meanBy=function(t,e){return Ce(t,Xi(e,2))},An.min=function(t){return t&&t.length?ir(t,Zs,Or):void 0},An.minBy=function(t,e){return t&&t.length?ir(t,Xi(e,2),Or):void 0},An.stubArray=ol,An.stubFalse=al,An.stubObject=function(){return{}},An.stubString=function(){return""},An.stubTrue=function(){return!0},An.multiply=dl,An.nth=function(t,e){return t&&t.length?Pr(t,is(e)):void 0},An.noConflict=function(){return Zt._===this&&(Zt._=It),this},An.noop=Js,An.now=ga,An.pad=function(t,e,n){t=ls(t);var r=(e=is(e))?We(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Di(tn(i),n)+t+Di(Qe(i),n)},An.padEnd=function(t,e,n){t=ls(t);var r=(e=is(e))?We(t):0;return e&&r<e?t+Di(e-r,n):t},An.padStart=function(t,e,n){t=ls(t);var r=(e=is(e))?We(t):0;return e&&r<e?Di(e-r,n)+t:t},An.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),un(ls(t).replace($,""),e||0)},An.random=function(t,e,n){if(n&&"boolean"!=typeof n&&lo(t,e,n)&&(e=n=void 0),void 0===n&&("boolean"==typeof e?(n=e,e=void 0):"boolean"==typeof t&&(n=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=rs(t),void 0===e?(e=t,t=0):e=rs(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=hn();return ln(t+i*(e-t+Vt("1e-"+((i+"").length-1))),e)}return jr(t,e)},An.reduce=function(t,e,n){var r=Ra(t)?me:Oe,i=arguments.length<3;return r(t,Xi(e,4),n,i,er)},An.reduceRight=function(t,e,n){var r=Ra(t)?ge:Oe,i=arguments.length<3;return r(t,Xi(e,4),n,i,nr)},An.repeat=function(t,e,n){return e=(n?lo(t,e,n):void 0===e)?1:is(e),Fr(ls(t),e)},An.replace=function(){var t=arguments,e=ls(t[0]);return t.length<3?e:e.replace(t[1],t[2])},An.result=function(t,e,n){var r=-1,i=(e=li(e,t)).length;for(i||(i=1,t=void 0);++r<i;){var o=null==t?void 0:t[Oo(e[r])];void 0===o&&(r=i,o=n),t=Ua(o)?o.call(t):o}return t},An.round=pl,An.runInContext=t,An.sample=function(t){return(Ra(t)?Bn:Br)(t)},An.size=function(t){if(null==t)return 0;if(Na(t))return Xa(t)?We(t):t.length;var e=ro(t);return e==m||e==_?t.size:Sr(t).length},An.snakeCase=js,An.some=function(t,e,n){var r=Ra(t)?ye:Zr;return n&&lo(t,e,n)&&(e=void 0),r(t,Xi(e,3))},An.sortedIndex=function(t,e){return $r(t,e)},An.sortedIndexBy=function(t,e,n){return Kr(t,e,Xi(n,2))},An.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=$r(t,e);if(r<n&&Ma(t[r],e))return r}return-1},An.sortedLastIndex=function(t,e){return $r(t,e,!0)},An.sortedLastIndexBy=function(t,e,n){return Kr(t,e,Xi(n,2),!0)},An.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=$r(t,e,!0)-1;if(Ma(t[n],e))return n}return-1},An.startCase=Fs,An.startsWith=function(t,e,n){return t=ls(t),n=null==n?0:Yn(is(n),0,t.length),e=Jr(e),t.slice(n,n+e.length)==e},An.subtract=fl,An.sum=function(t){return t&&t.length?Ie(t,Zs):0},An.sumBy=function(t,e){return t&&t.length?Ie(t,Xi(e,2)):0},An.template=function(t,e,n){var r=An.templateSettings;n&&lo(t,e,n)&&(e=void 0),t=ls(t),e=hs({},e,r,Ui);var i,o,a=hs({},e.imports,r.imports,Ui),s=xs(a),l=Pe(a,s),c=0,u=e.interpolate||ut,h="__p += '",d=mt((e.escape||ut).source+"|"+u.source+"|"+(u===G?nt:ut).source+"|"+(e.evaluate||ut).source+"|$","g"),p="//# sourceURL="+(Et.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++zt+"]")+"\n";t.replace(d,(function(e,n,r,a,s,l){return r||(r=a),h+=t.slice(c,l).replace(ht,ze),n&&(i=!0,h+="' +\n__e("+n+") +\n'"),s&&(o=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=l+e.length,e})),h+="';\n";var f=Et.call(e,"variable")&&e.variable;if(f){if(tt.test(f))throw new K("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(o?h.replace(D,""):h).replace(R,"$1").replace(L,"$1;"),h="function("+(f||"obj")+") {\n"+(f?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var m=Gs((function(){return dt(s,p+"return "+h).apply(void 0,l)}));if(m.source=h,Ba(m))throw m;return m},An.times=function(t,e){if((t=is(t))<1||t>9007199254740991)return[];var n=4294967295,r=ln(t,4294967295);t-=4294967295;for(var i=Ae(r,e=Xi(e));++n<t;)e(n);return i},An.toFinite=rs,An.toInteger=is,An.toLength=os,An.toLower=function(t){return ls(t).toLowerCase()},An.toNumber=as,An.toSafeInteger=function(t){return t?Yn(is(t),-9007199254740991,9007199254740991):0===t?t:0},An.toString=ls,An.toUpper=function(t){return ls(t).toUpperCase()},An.trim=function(t,e,n){if((t=ls(t))&&(n||void 0===e))return Me(t);if(!t||!(e=Jr(e)))return t;var r=Ze(t),i=Ze(e);return ui(r,Re(r,i),Le(r,i)+1).join("")},An.trimEnd=function(t,e,n){if((t=ls(t))&&(n||void 0===e))return t.slice(0,$e(t)+1);if(!t||!(e=Jr(e)))return t;var r=Ze(t);return ui(r,0,Le(r,Ze(e))+1).join("")},An.trimStart=function(t,e,n){if((t=ls(t))&&(n||void 0===e))return t.replace($,"");if(!t||!(e=Jr(e)))return t;var r=Ze(t);return ui(r,Re(r,Ze(e))).join("")},An.truncate=function(t,e){var n=30,r="...";if(qa(e)){var i="separator"in e?e.separator:i;n="length"in e?is(e.length):n,r="omission"in e?Jr(e.omission):r}var o=(t=ls(t)).length;if(Be(t)){var a=Ze(t);o=a.length}if(n>=o)return t;var s=n-We(r);if(s<1)return r;var l=a?ui(a,0,s).join(""):t.slice(0,s);if(void 0===i)return l+r;if(a&&(s+=l.length-s),Ka(i)){if(t.slice(s).search(i)){var c,u=l;for(i.global||(i=mt(i.source,ls(rt.exec(i))+"g")),i.lastIndex=0;c=i.exec(u);)var h=c.index;l=l.slice(0,void 0===h?s:h)}}else if(t.indexOf(Jr(i),s)!=s){var d=l.lastIndexOf(i);d>-1&&(l=l.slice(0,d))}return l+r},An.unescape=function(t){return(t=ls(t))&&F.test(t)?t.replace(N,Ke):t},An.uniqueId=function(t){var e=++Ct;return ls(t)+e},An.upperCase=zs,An.upperFirst=Bs,An.each=la,An.eachRight=ca,An.first=No,Xs(An,(hl={},cr(An,(function(t,e){Et.call(An.prototype,e)||(hl[e]=t)})),hl),{chain:!1}),An.VERSION="4.17.21",se(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){An[t].placeholder=An})),se(["drop","take"],(function(t,e){Dn.prototype[t]=function(n){n=void 0===n?1:sn(is(n),0);var r=this.__filtered__&&!e?new Dn(this):this.clone();return r.__filtered__?r.__takeCount__=ln(n,r.__takeCount__):r.__views__.push({size:ln(n,4294967295),type:t+(r.__dir__<0?"Right":"")}),r},Dn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),se(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Dn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Xi(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),se(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Dn.prototype[t]=function(){return this[n](1).value()[0]}})),se(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Dn.prototype[t]=function(){return this.__filtered__?new Dn(this):this[n](1)}})),Dn.prototype.compact=function(){return this.filter(Zs)},Dn.prototype.find=function(t){return this.filter(t).head()},Dn.prototype.findLast=function(t){return this.reverse().find(t)},Dn.prototype.invokeMap=zr((function(t,e){return"function"==typeof t?new Dn(this):this.map((function(n){return _r(n,t,e)}))})),Dn.prototype.reject=function(t){return this.filter(Sa(Xi(t)))},Dn.prototype.slice=function(t,e){t=is(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Dn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),void 0!==e&&(n=(e=is(e))<0?n.dropRight(-e):n.take(e-t)),n)},Dn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Dn.prototype.toArray=function(){return this.take(4294967295)},cr(Dn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=An[r?"take"+("last"==e?"Right":""):e],o=r||/^find/.test(e);i&&(An.prototype[e]=function(){var e=this.__wrapped__,a=r?[1]:arguments,s=e instanceof Dn,l=a[0],c=s||Ra(e),u=function(t){var e=i.apply(An,fe([t],a));return r&&h?e[0]:e};c&&n&&"function"==typeof l&&1!=l.length&&(s=c=!1);var h=this.__chain__,d=!!this.__actions__.length,p=o&&!h,f=s&&!d;if(!o&&c){e=f?e:new Dn(this);var m=t.apply(e,a);return m.__actions__.push({func:ra,args:[u],thisArg:void 0}),new Pn(m,h)}return p&&f?t.apply(this,a):(m=this.thru(u),p?r?m.value()[0]:m.value():m)})})),se(["pop","push","shift","sort","splice","unshift"],(function(t){var e=vt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);An.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Ra(i)?i:[],t)}return this[n]((function(n){return e.apply(Ra(n)?n:[],t)}))}})),cr(Dn.prototype,(function(t,e){var n=An[e];if(n){var r=n.name+"";Et.call(bn,r)||(bn[r]=[]),bn[r].push({name:e,func:n})}})),bn[Ai(void 0,2).name]=[{name:"wrapper",func:void 0}],Dn.prototype.clone=function(){var t=new Dn(this.__wrapped__);return t.__actions__=vi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=vi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=vi(this.__views__),t},Dn.prototype.reverse=function(){if(this.__filtered__){var t=new Dn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Dn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ra(t),r=e<0,i=n?t.length:0,o=function(t,e,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=ln(e,t+a);break;case"takeRight":t=sn(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,s=o.end,l=s-a,c=r?s:a-1,u=this.__iteratees__,h=u.length,d=0,p=ln(l,this.__takeCount__);if(!n||!r&&i==l&&p==l)return ri(t,this.__actions__);var f=[];t:for(;l--&&d<p;){for(var m=-1,g=t[c+=e];++m<h;){var y=u[m],v=y.iteratee,_=y.type,b=v(g);if(2==_)g=b;else if(!b){if(1==_)continue t;break t}}f[d++]=g}return f},An.prototype.at=ia,An.prototype.chain=function(){return na(this)},An.prototype.commit=function(){return new Pn(this.value(),this.__chain__)},An.prototype.next=function(){void 0===this.__values__&&(this.__values__=ns(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?void 0:this.__values__[this.__index__++]}},An.prototype.plant=function(t){for(var e,n=this;n instanceof kn;){var r=Ao(n);r.__index__=0,r.__values__=void 0,e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e},An.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Dn){var e=t;return this.__actions__.length&&(e=new Dn(this)),(e=e.reverse()).__actions__.push({func:ra,args:[qo],thisArg:void 0}),new Pn(e,this.__chain__)}return this.thru(qo)},An.prototype.toJSON=An.prototype.valueOf=An.prototype.value=function(){return ri(this.__wrapped__,this.__actions__)},An.prototype.first=An.prototype.head,Xt&&(An.prototype[Xt]=function(){return this}),An}();Zt._=Ye,void 0===(i=function(){return Ye}.call(e,n,e,r))||(r.exports=i)}).call(this)}).call(this,n(168),n(129)(t))},function(t,e,n){var r=n(30),i=n(169),o=n(337),a=n(338);function s(e){var n="function"==typeof Map?new Map:void 0;return t.exports=s=function(t){if(null===t||!o(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return a(t,arguments,r(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),i(e,t)},t.exports.__esModule=!0,t.exports.default=t.exports,s(e)}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(368),i=n(385)((function(t,e,n){r(t,e,n)}));t.exports=i},function(t,e,n){var r=n(181);t.exports=function(t,e){return e="function"==typeof e?e:void 0,t&&t.length?r(t,void 0,e):[]}},function(t,e,n){"use strict";const r=n(439),i=n(440);t.exports=t=>{const e=`(?:${"(?:(?:[a-z]+:)?//)"+((t={strict:!0,...t}).strict?"":"?")}|www\\.)(?:\\S+(?::\\S*)?@)?(?:localhost|${r.v4().source}|(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*${`(?:\\.${t.strict?"(?:[a-z\\u00a1-\\uffff]{2,})":`(?:${i.sort((t,e)=>e.length-t.length).join("|")})`})\\.?`})(?::\\d{2,5})?(?:[/?#][^\\s"]*)?`;return t.exact?new RegExp(`(?:^${e}$)`,"i"):new RegExp(e,"ig")}},function(t,e,n){"use strict";t.exports=i;var r=n(441);function i(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var o="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function a(t){return t.type===i.Bytes?t.readVarint()+t.pos:t.pos+1}function s(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function l(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function c(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function u(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function h(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function d(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function p(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function f(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function m(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function g(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function y(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function v(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function _(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function b(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}i.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,t(i,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=v(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=b(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=v(this.buf,this.pos)+4294967296*v(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=v(this.buf,this.pos)+4294967296*b(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=r.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=r.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,r=this.buf;return e=127&(n=r[this.pos++]),n<128?e:(e|=(127&(n=r[this.pos++]))<<7,n<128?e:(e|=(127&(n=r[this.pos++]))<<14,n<128?e:(e|=(127&(n=r[this.pos++]))<<21,n<128?e:function(t,e,n){var r,i,o=n.buf;if(i=o[n.pos++],r=(112&i)>>4,i<128)return s(t,r,e);if(i=o[n.pos++],r|=(127&i)<<3,i<128)return s(t,r,e);if(i=o[n.pos++],r|=(127&i)<<10,i<128)return s(t,r,e);if(i=o[n.pos++],r|=(127&i)<<17,i<128)return s(t,r,e);if(i=o[n.pos++],r|=(127&i)<<24,i<128)return s(t,r,e);if(i=o[n.pos++],r|=(1&i)<<31,i<128)return s(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&o?function(t,e,n){return o.decode(t.subarray(e,n))}(this.buf,e,t):function(t,e,n){var r="",i=e;for(;i<n;){var o,a,s,l=t[i],c=null,u=l>239?4:l>223?3:l>191?2:1;if(i+u>n)break;1===u?l<128&&(c=l):2===u?128==(192&(o=t[i+1]))&&(c=(31&l)<<6|63&o)<=127&&(c=null):3===u?(o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&((c=(15&l)<<12|(63&o)<<6|63&a)<=2047||c>=55296&&c<=57343)&&(c=null)):4===u&&(o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&((c=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,u=1):c>65535&&(c-=65536,r+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),r+=String.fromCharCode(c),i+=u}return r}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==i.Bytes)return t.push(this.readVarint(e));var n=a(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==i.Bytes)return t.push(this.readSVarint());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==i.Bytes)return t.push(this.readBoolean());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==i.Bytes)return t.push(this.readFloat());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==i.Bytes)return t.push(this.readDouble());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed32());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed32());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed64());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed64());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===i.Varint)for(;this.buf[this.pos++]>127;);else if(e===i.Bytes)this.pos=this.readVarint()+this.pos;else if(e===i.Fixed32)this.pos+=4;else{if(e!==i.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),_(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),_(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),_(this.buf,-1&t,this.pos),_(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),_(this.buf,-1&t,this.pos),_(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,r;t>=0?(n=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,r=r+1|0));if(t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos]=127&t}(n,0,e),function(t,e){var n=(7&t)<<4;if(e.buf[e.pos++]|=n|((t>>>=3)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;e.buf[e.pos++]=127&t}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var r,i,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):i=r;continue}if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(t[n++]=239,t[n++]=191,t[n++]=189,i=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&l(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),r.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),r.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;r>=128&&l(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,i.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,c,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,u,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,p,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,h,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,d,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,f,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,m,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,g,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,y,e)},writeBytesField:function(t,e){this.writeTag(t,i.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,i.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,i.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,i.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},function(t,e,n){t.exports=function(){"use strict";function t(t,r,i,o,a){!function t(n,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,l=r-i+1,c=Math.log(s),u=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*u*(s-u)/s)*(l-s/2<0?-1:1);t(n,r,Math.max(i,Math.floor(r-l*u/s+h)),Math.min(o,Math.floor(r+(s-l)*u/s+h)),a)}var d=n[r],p=i,f=o;for(e(n,i,r),a(n[o],d)>0&&e(n,i,o);p<f;){for(e(n,p,f),p++,f--;a(n[p],d)<0;)p++;for(;a(n[f],d)>0;)f--}0===a(n[i],d)?e(n,i,f):e(n,++f,o),f<=r&&(i=f+1),r<=f&&(o=f-1)}}(t,r,i||0,o||t.length-1,a||n)}function e(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function n(t,e){return t<e?-1:t>e?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function o(t,e){a(t,0,t.children.length,e,t)}function a(t,e,n,r,i){i||(i=f(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=e;o<n;o++){var a=t.children[o];s(i,t.leaf?r(a):a)}return i}function s(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function u(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function p(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function f(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function m(e,n,r,i,o){for(var a=[n,r];a.length;)if(!((r=a.pop())-(n=a.pop())<=i)){var s=n+Math.ceil((r-n)/i/2)*i;t(e,s,n,r,o),a.push(n,s,s,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var e=this.data,n=[];if(!p(t,e))return n;for(var r=this.toBBox,i=[];e;){for(var o=0;o<e.children.length;o++){var a=e.children[o],s=e.leaf?r(a):a;p(t,s)&&(e.leaf?n.push(a):d(t,s)?this._all(a,n):i.push(a))}e=i.pop()}return n},r.prototype.collides=function(t){var e=this.data;if(!p(t,e))return!1;for(var n=[];e;){for(var r=0;r<e.children.length;r++){var i=e.children[r],o=e.leaf?this.toBBox(i):i;if(p(t,o)){if(e.leaf||d(t,o))return!0;n.push(i)}}e=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=f([]),this},r.prototype.remove=function(t,e){if(!t)return this;for(var n,r,o,a=this.data,s=this.toBBox(t),l=[],c=[];a||l.length;){if(a||(a=l.pop(),r=l[l.length-1],n=c.pop(),o=!0),a.leaf){var u=i(t,a.children,e);if(-1!==u)return a.children.splice(u,1),l.push(a),this._condense(l),this}o||a.leaf||!d(a,s)?r?(n++,a=r.children[n],o=!1):a=null:(l.push(a),c.push(n),n=0,r=a,a=a.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,e){return t.minX-e.minX},r.prototype.compareMinY=function(t,e){return t.minY-e.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},r.prototype._build=function(t,e,n,r){var i,a=n-e+1,s=this._maxEntries;if(a<=s)return o(i=f(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,r-1))),(i=f([])).leaf=!1,i.height=r;var l=Math.ceil(a/s),c=l*Math.ceil(Math.sqrt(s));m(t,e,n,c,this.compareMinX);for(var u=e;u<=n;u+=c){var h=Math.min(u+c-1,n);m(t,u,h,l,this.compareMinY);for(var d=u;d<=h;d+=l){var p=Math.min(d+l-1,h);i.children.push(this._build(t,d,p,r-1))}}return o(i,this.toBBox),i},r.prototype._chooseSubtree=function(t,e,n,r){for(;r.push(e),!e.leaf&&r.length-1!==n;){for(var i=1/0,o=1/0,a=void 0,s=0;s<e.children.length;s++){var l=e.children[s],c=u(l),h=(d=t,p=l,(Math.max(p.maxX,d.maxX)-Math.min(p.minX,d.minX))*(Math.max(p.maxY,d.maxY)-Math.min(p.minY,d.minY))-c);h<o?(o=h,i=c<i?c:i,a=l):h===o&&c<i&&(i=c,a=l)}e=a||e.children[0]}var d,p;return e},r.prototype._insert=function(t,e,n){var r=n?t:this.toBBox(t),i=[],o=this._chooseSubtree(r,this.data,e,i);for(o.children.push(t),s(o,r);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(r,i,e)},r.prototype._split=function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var a=this._chooseSplitIndex(n,i,r),s=f(n.children.splice(a,n.children.length-a));s.height=n.height,s.leaf=n.leaf,o(n,this.toBBox),o(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},r.prototype._splitRoot=function(t,e){this.data=f([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,e,n){for(var r,i,o,s,l,c,h,d=1/0,p=1/0,f=e;f<=n-e;f++){var m=a(t,0,f,this.toBBox),g=a(t,f,n,this.toBBox),y=(i=m,o=g,s=Math.max(i.minX,o.minX),l=Math.max(i.minY,o.minY),c=Math.min(i.maxX,o.maxX),h=Math.min(i.maxY,o.maxY),Math.max(0,c-s)*Math.max(0,h-l)),v=u(m)+u(g);y<d?(d=y,r=f,p=v<p?v:p):y===d&&v<p&&(p=v,r=f)}return r||n-e},r.prototype._chooseSplitAxis=function(t,e,n){var r=t.leaf?this.compareMinX:l,i=t.leaf?this.compareMinY:c;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,e,n,r){t.children.sort(r);for(var i=this.toBBox,o=a(t,0,e,i),l=a(t,n-e,n,i),c=h(o)+h(l),u=e;u<n-e;u++){var d=t.children[u];s(o,t.leaf?i(d):d),c+=h(o)}for(var p=n-e-1;p>=e;p--){var f=t.children[p];s(l,t.leaf?i(f):f),c+=h(l)}return c},r.prototype._adjustParentBBoxes=function(t,e,n){for(var r=n;r>=0;r--)s(e[r],t)},r.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},r}()},function(t,e,n){var r=n(139),i=n(442)((function(t,e,n){r(t,n,e)}));t.exports=i},function(t,e){var n={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Ấ":"A","Ắ":"A","Ẳ":"A","Ẵ":"A","Ặ":"A","Æ":"AE","Ầ":"A","Ằ":"A","Ȃ":"A","Ç":"C","Ḉ":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ế":"E","Ḗ":"E","Ề":"E","Ḕ":"E","Ḝ":"E","Ȇ":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ḯ":"I","Ȋ":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","Ố":"O","Ṍ":"O","Ṓ":"O","Ȏ":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ý":"Y","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","ấ":"a","ắ":"a","ẳ":"a","ẵ":"a","ặ":"a","æ":"ae","ầ":"a","ằ":"a","ȃ":"a","ç":"c","ḉ":"c","è":"e","é":"e","ê":"e","ë":"e","ế":"e","ḗ":"e","ề":"e","ḕ":"e","ḝ":"e","ȇ":"e","ì":"i","í":"i","î":"i","ï":"i","ḯ":"i","ȋ":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","ố":"o","ṍ":"o","ṓ":"o","ȏ":"o","ù":"u","ú":"u","û":"u","ü":"u","ý":"y","ÿ":"y","Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"C","ć":"c","Ĉ":"C","ĉ":"c","Ċ":"C","ċ":"c","Č":"C","č":"c","C̆":"C","c̆":"c","Ď":"D","ď":"d","Đ":"D","đ":"d","Ē":"E","ē":"e","Ĕ":"E","ĕ":"e","Ė":"E","ė":"e","Ę":"E","ę":"e","Ě":"E","ě":"e","Ĝ":"G","Ǵ":"G","ĝ":"g","ǵ":"g","Ğ":"G","ğ":"g","Ġ":"G","ġ":"g","Ģ":"G","ģ":"g","Ĥ":"H","ĥ":"h","Ħ":"H","ħ":"h","Ḫ":"H","ḫ":"h","Ĩ":"I","ĩ":"i","Ī":"I","ī":"i","Ĭ":"I","ĭ":"i","Į":"I","į":"i","İ":"I","ı":"i","Ĳ":"IJ","ĳ":"ij","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","Ḱ":"K","ḱ":"k","K̆":"K","k̆":"k","Ĺ":"L","ĺ":"l","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ŀ":"L","ŀ":"l","Ł":"l","ł":"l","Ḿ":"M","ḿ":"m","M̆":"M","m̆":"m","Ń":"N","ń":"n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","ŉ":"n","N̆":"N","n̆":"n","Ō":"O","ō":"o","Ŏ":"O","ŏ":"o","Ő":"O","ő":"o","Œ":"OE","œ":"oe","P̆":"P","p̆":"p","Ŕ":"R","ŕ":"r","Ŗ":"R","ŗ":"r","Ř":"R","ř":"r","R̆":"R","r̆":"r","Ȓ":"R","ȓ":"r","Ś":"S","ś":"s","Ŝ":"S","ŝ":"s","Ş":"S","Ș":"S","ș":"s","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","ț":"t","Ț":"T","Ť":"T","ť":"t","Ŧ":"T","ŧ":"t","T̆":"T","t̆":"t","Ũ":"U","ũ":"u","Ū":"U","ū":"u","Ŭ":"U","ŭ":"u","Ů":"U","ů":"u","Ű":"U","ű":"u","Ų":"U","ų":"u","Ȗ":"U","ȗ":"u","V̆":"V","v̆":"v","Ŵ":"W","ŵ":"w","Ẃ":"W","ẃ":"w","X̆":"X","x̆":"x","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Y̆":"Y","y̆":"y","Ź":"Z","ź":"z","Ż":"Z","ż":"z","Ž":"Z","ž":"z","ſ":"s","ƒ":"f","Ơ":"O","ơ":"o","Ư":"U","ư":"u","Ǎ":"A","ǎ":"a","Ǐ":"I","ǐ":"i","Ǒ":"O","ǒ":"o","Ǔ":"U","ǔ":"u","Ǖ":"U","ǖ":"u","Ǘ":"U","ǘ":"u","Ǚ":"U","ǚ":"u","Ǜ":"U","ǜ":"u","Ứ":"U","ứ":"u","Ṹ":"U","ṹ":"u","Ǻ":"A","ǻ":"a","Ǽ":"AE","ǽ":"ae","Ǿ":"O","ǿ":"o","Þ":"TH","þ":"th","Ṕ":"P","ṕ":"p","Ṥ":"S","ṥ":"s","X́":"X","x́":"x","Ѓ":"Г","ѓ":"г","Ќ":"К","ќ":"к","A̋":"A","a̋":"a","E̋":"E","e̋":"e","I̋":"I","i̋":"i","Ǹ":"N","ǹ":"n","Ồ":"O","ồ":"o","Ṑ":"O","ṑ":"o","Ừ":"U","ừ":"u","Ẁ":"W","ẁ":"w","Ỳ":"Y","ỳ":"y","Ȁ":"A","ȁ":"a","Ȅ":"E","ȅ":"e","Ȉ":"I","ȉ":"i","Ȍ":"O","ȍ":"o","Ȑ":"R","ȑ":"r","Ȕ":"U","ȕ":"u","B̌":"B","b̌":"b","Č̣":"C","č̣":"c","Ê̌":"E","ê̌":"e","F̌":"F","f̌":"f","Ǧ":"G","ǧ":"g","Ȟ":"H","ȟ":"h","J̌":"J","ǰ":"j","Ǩ":"K","ǩ":"k","M̌":"M","m̌":"m","P̌":"P","p̌":"p","Q̌":"Q","q̌":"q","Ř̩":"R","ř̩":"r","Ṧ":"S","ṧ":"s","V̌":"V","v̌":"v","W̌":"W","w̌":"w","X̌":"X","x̌":"x","Y̌":"Y","y̌":"y","A̧":"A","a̧":"a","B̧":"B","b̧":"b","Ḑ":"D","ḑ":"d","Ȩ":"E","ȩ":"e","Ɛ̧":"E","ɛ̧":"e","Ḩ":"H","ḩ":"h","I̧":"I","i̧":"i","Ɨ̧":"I","ɨ̧":"i","M̧":"M","m̧":"m","O̧":"O","o̧":"o","Q̧":"Q","q̧":"q","U̧":"U","u̧":"u","X̧":"X","x̧":"x","Z̧":"Z","z̧":"z"},r=Object.keys(n).join("|"),i=new RegExp(r,"g"),o=new RegExp(r,""),a=function(t){return t.replace(i,(function(t){return n[t]}))};t.exports=a,t.exports.has=function(t){return!!t.match(o)},t.exports.remove=a},function(t){t.exports=JSON.parse('["AF","AX","AL","DZ","AS","AD","AO","AI","AQ","AG","AR","AM","AW","AU","AT","AZ","BS","BH","BD","BB","BY","BE","BZ","BJ","BM","BT","BO","BQ","BA","BW","BV","BR","IO","BN","BG","BF","BI","KH","CM","CA","CV","KY","CF","TD","CL","CN","CX","CC","CO","KM","CD","CG","CK","CR","CI","HR","CU","CW","CY","CZ","DK","DJ","DM","DO","EC","EG","SV","GQ","ER","EE","ET","FK","FO","FJ","FI","FR","GF","PF","TF","GA","GM","GE","DE","GH","GI","GR","GL","GD","GP","GU","GT","GG","GN","GW","GY","HT","HM","VA","HN","HK","HU","IS","IN","ID","IR","IQ","IE","IM","IL","IT","JM","JP","JE","JO","KZ","KE","KI","KP","KR","KW","KG","LA","LV","LB","LS","LR","LY","LI","LT","LU","MO","MK","MG","MW","MY","MV","ML","MT","MH","MQ","MR","MU","YT","MX","FM","MD","MC","MN","ME","MS","MA","MZ","MM","NA","NR","NP","NL","NC","NZ","NI","NE","NG","NU","NF","MP","NO","OM","PK","PW","PS","PA","PG","PY","PE","PH","PN","PL","PT","PR","QA","RE","RO","RU","RW","BL","SH","KN","LC","MF","PM","VC","WS","SM","ST","SA","SN","RS","SC","SL","SG","SX","SK","SI","SB","SO","ZA","GS","SS","ES","LK","SD","SR","SJ","SZ","SE","CH","SY","TW","TJ","TZ","TH","TL","TG","TK","TO","TT","TN","TR","TM","TC","TV","UG","UA","AE","GB","US","UM","UY","UZ","VU","VE","VN","VG","VI","WF","EH","YE","ZM","ZW","XK","XZ","ZZ"]')},function(t){t.exports=JSON.parse('["OBSERVATION","MACHINE_OBSERVATION","HUMAN_OBSERVATION","MATERIAL_SAMPLE","MATERIAL_CITATION","PRESERVED_SPECIMEN","FOSSIL_SPECIMEN","LIVING_SPECIMEN","OCCURRENCE"]')},function(t){t.exports=JSON.parse('["StillImage","MovingImage","Sound"]')},function(t){t.exports=JSON.parse('["ZERO_COORDINATE","COORDINATE_OUT_OF_RANGE","COORDINATE_INVALID","COORDINATE_ROUNDED","GEODETIC_DATUM_INVALID","GEODETIC_DATUM_ASSUMED_WGS84","COORDINATE_REPROJECTED","COORDINATE_REPROJECTION_FAILED","COORDINATE_REPROJECTION_SUSPICIOUS","COORDINATE_ACCURACY_INVALID","COORDINATE_PRECISION_INVALID","COORDINATE_UNCERTAINTY_METERS_INVALID","COORDINATE_PRECISION_UNCERTAINTY_MISMATCH","FOOTPRINT_SRS_INVALID","FOOTPRINT_WKT_INVALID","COUNTRY_COORDINATE_MISMATCH","COUNTRY_MISMATCH","COUNTRY_INVALID","COUNTRY_DERIVED_FROM_COORDINATES","CONTINENT_COUNTRY_MISMATCH","CONTINENT_INVALID","CONTINENT_DERIVED_FROM_COORDINATES","PRESUMED_SWAPPED_COORDINATE","PRESUMED_NEGATED_LONGITUDE","PRESUMED_NEGATED_LATITUDE","RECORDED_DATE_MISMATCH","RECORDED_DATE_INVALID","RECORDED_DATE_UNLIKELY","TAXON_MATCH_FUZZY","TAXON_MATCH_HIGHERRANK","TAXON_MATCH_AGGREGATE","TAXON_MATCH_NONE","DEPTH_NOT_METRIC","DEPTH_UNLIKELY","DEPTH_MIN_MAX_SWAPPED","DEPTH_NON_NUMERIC","ELEVATION_UNLIKELY","ELEVATION_MIN_MAX_SWAPPED","ELEVATION_NOT_METRIC","ELEVATION_NON_NUMERIC","MODIFIED_DATE_INVALID","MODIFIED_DATE_UNLIKELY","IDENTIFIED_DATE_UNLIKELY","IDENTIFIED_DATE_INVALID","BASIS_OF_RECORD_INVALID","TYPE_STATUS_INVALID","MULTIMEDIA_DATE_INVALID","MULTIMEDIA_URI_INVALID","REFERENCES_URI_INVALID","INTERPRETATION_ERROR","INDIVIDUAL_COUNT_INVALID","INDIVIDUAL_COUNT_CONFLICTS_WITH_OCCURRENCE_STATUS","OCCURRENCE_STATUS_UNPARSABLE","OCCURRENCE_STATUS_INFERRED_FROM_INDIVIDUAL_COUNT","OCCURRENCE_STATUS_INFERRED_FROM_BASIS_OF_RECORD","GEOREFERENCED_DATE_UNLIKELY","GEOREFERENCED_DATE_INVALID","AMBIGUOUS_INSTITUTION","AMBIGUOUS_COLLECTION","INSTITUTION_MATCH_NONE","COLLECTION_MATCH_NONE","INSTITUTION_MATCH_FUZZY","COLLECTION_MATCH_FUZZY","INSTITUTION_COLLECTION_MISMATCH","POSSIBLY_ON_LOAN","DIFFERENT_OWNER_INSTITUTION"]')},function(t){t.exports=JSON.parse('["TYPE","TYPE_SPECIES","TYPE_GENUS","ALLOLECTOTYPE","ALLONEOTYPE","ALLOTYPE","COTYPE","EPITYPE","EXEPITYPE","EXHOLOTYPE","EXISOTYPE","EXLECTOTYPE","EXNEOTYPE","EXPARATYPE","EXSYNTYPE","EXTYPE","HAPANTOTYPE","HOLOTYPE","ICONOTYPE","ISOLECTOTYPE","ISOPARATYPE","ISONEOTYPE","ISOSYNTYPE","ISOTYPE","LECTOTYPE","NEOTYPE","PARALECTOTYPE","PARANEOTYPE","PARATYPE","PLASTOHOLOTYPE","PLASTOISOTYPE","PLASTOLECTOTYPE","PLASTONEOTYPE","PLASTOPARATYPE","PLASTOSYNTYPE","PLASTOTYPE","SECONDARYTYPE","SUPPLEMENTARYTYPE","SYNTYPE","TOPOTYPE","ORIGINALMATERIAL","NOTATYPE"]')},function(t){t.exports=JSON.parse('["1","2","3","4","5","6","7","8","9","10","11","12"]')},function(t){t.exports=JSON.parse('["AFRICA","ANTARCTICA","ASIA","OCEANIA","EUROPE","NORTH_AMERICA","SOUTH_AMERICA"]')},function(t){t.exports=JSON.parse('["EML","FEED","WFS","WMS","TCS_RDF","TCS_XML","DWC_ARCHIVE","DIGIR","DIGIR_MANIS","TAPIR","BIOCASE","BIOCASE_XML_ARCHIVE","OAI_PMH","OTHER"]')},function(t){t.exports=JSON.parse('["NATIVE","INTRODUCED","NATURALISED","INVASIVE","MANAGED","UNCERTAIN"]')},function(t){t.exports=JSON.parse('["PRESENT","ABSENT"]')},function(t){t.exports=JSON.parse('["OCCURRENCE","CHECKLIST","METADATA","SAMPLING_EVENT"]')},function(t){t.exports=JSON.parse('["TAXONOMIC_AUTHORITY","NOMENCLATOR_AUTHORITY","INVENTORY_THEMATIC","INVENTORY_REGIONAL","GLOBAL_SPECIES_DATASET","DERIVED_FROM_OCCURRENCE","SPECIMEN","OBSERVATION"]')},function(t){t.exports=JSON.parse('["journal","book","generic","book_section","conference_proceedings","working_paper","report","web_page","thesis","magazine_article","statute","patent","newspaper_article","computer_program","hearing","television_broadcast","encyclopedia_article","case","film","bill"]')},function(t){t.exports=JSON.parse('["http://rs.gbif.org/terms/1.0/Image","http://rs.tdwg.org/ac/terms/Multimedia","http://rs.gbif.org/terms/1.0/Multimedia","http://data.ggbn.org/schemas/ggbn/terms/Amplification","http://data.ggbn.org/schemas/ggbn/terms/Cloning","http://data.ggbn.org/schemas/ggbn/terms/GelImage","http://data.ggbn.org/schemas/ggbn/terms/Loan","http://data.ggbn.org/schemas/ggbn/terms/MaterialSample","http://data.ggbn.org/schemas/ggbn/terms/Permit","http://data.ggbn.org/schemas/ggbn/terms/Preparation","http://data.ggbn.org/schemas/ggbn/terms/Preservation","http://purl.org/germplasm/germplasmTerm#GermplasmAccession","http://purl.org/germplasm/germplasmTerm#MeasurementScore","http://purl.org/germplasm/germplasmTerm#MeasurementTrait","http://purl.org/germplasm/germplasmTerm#MeasurementTrial","http://rs.tdwg.org/dwc/terms/MeasurementOrFact","http://rs.iobis.org/obis/terms/ExtendedMeasurementOrFact","http://rs.tdwg.org/dwc/terms/Identification","http://rs.gbif.org/terms/1.0/Identifier","http://rs.gbif.org/terms/1.0/Reference","http://rs.tdwg.org/dwc/terms/ResourceRelationship","http://rs.tdwg.org/chrono/terms/ChronometricAge"]')},function(t,e,n){"use strict";var r,i=n(106),o=n(27),a=n(9),s=n(13),l=n(4),c=n(109),u=n(67),h=n(47),d=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});function p(t,e){c.a.expire()}var f=function(t){function e(e){var n=t.call(this)||this;return n.map_=e,n}return d(e,t),e.prototype.dispatchRenderEvent=function(t,e){Object(a.b)()},e.prototype.calculateMatrices2D=function(t){var e=t.viewState,n=t.coordinateToPixelTransform,r=t.pixelToCoordinateTransform;Object(s.b)(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Object(s.d)(r,n)},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,r,i,o,a,s){var c,d=e.viewState;function p(t,e,n,r){return i.call(o,e,t?n:null,r)}var f=d.projection,m=Object(h.f)(t.slice(),f),g=[[0,0]];if(f.canWrapX()&&r){var y=f.getExtent(),v=Object(l.B)(y);g.push([-v,0],[v,0])}for(var _=e.layerStatesArray,b=_.length,x=[],w=[],E=0;E<g.length;E++)for(var C=b-1;C>=0;--C){var S=_[C],T=S.layer;if(T.hasRenderer()&&Object(u.b)(S,d)&&a.call(s,T)){var O=T.getRenderer(),I=T.getSource();if(O&&I){var A=I.getWrapX()?m:t,M=p.bind(null,S.managed);w[0]=A[0]+g[E][0],w[1]=A[1]+g[E][1],c=O.forEachFeatureAtCoordinate(w,e,n,M,x)}if(c)return c}}if(0!==x.length){var k=1/x.length;return x.forEach((function(t,e){return t.distanceSq+=e*k})),x.sort((function(t,e){return t.distanceSq-e.distanceSq})),x.some((function(t){return c=t.callback(t.feature,t.layer,t.geometry)})),c}},e.prototype.forEachLayerAtPixel=function(t,e,n,r,i){return Object(a.b)()},e.prototype.hasFeatureAtCoordinate=function(t,e,n,r,i,a){return void 0!==this.forEachFeatureAtCoordinate(t,e,n,r,o.b,this,i,a)},e.prototype.getMap=function(){return this.map_},e.prototype.renderFrame=function(t){Object(a.b)()},e.prototype.scheduleExpireIconCache=function(t){c.a.canExpireCache()&&t.postRenderFunctions.push(p)},e}(i.a),m=n(81),g=n(158),y=n(70),v=n(69),_=n(35),b=n(11),x=n(15),w=n(29),E=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),C=function(t){function e(e){var n=t.call(this,e)||this;n.fontChangeListenerKey_=Object(x.a)(b.a,m.a.PROPERTYCHANGE,e.redrawText.bind(e)),n.element_=document.createElement("div");var r=n.element_.style;r.position="absolute",r.width="100%",r.height="100%",r.zIndex="0",n.element_.className=_.d+" ol-layers";var i=e.getViewport();return i.insertBefore(n.element_,i.firstChild||null),n.children_=[],n.renderedVisible_=!0,n}return E(e,t),e.prototype.dispatchRenderEvent=function(t,e){var n=this.getMap();if(n.hasListener(t)){var r=new g.a(t,void 0,e);n.dispatchEvent(r)}},e.prototype.disposeInternal=function(){Object(x.c)(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),t.prototype.disposeInternal.call(this)},e.prototype.renderFrame=function(t){if(t){this.calculateMatrices2D(t),this.dispatchRenderEvent(y.a.PRECOMPOSE,t);var e=t.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex})),n=t.viewState;this.children_.length=0;for(var r=[],i=null,o=0,a=e.length;o<a;++o){var s=e[o];if(t.layerIndex=o,Object(u.b)(s,n)&&(s.sourceState==v.a.READY||s.sourceState==v.a.UNDEFINED)){var l=s.layer,c=l.render(t,i);c&&(c!==i&&(this.children_.push(c),i=c),"getDeclutter"in l&&r.push(l))}}for(o=r.length-1;o>=0;--o)r[o].renderDeclutter(t);Object(w.d)(this.element_,this.children_),this.dispatchRenderEvent(y.a.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},e.prototype.forEachLayerAtPixel=function(t,e,n,r,i){for(var o=e.viewState,a=e.layerStatesArray,s=a.length-1;s>=0;--s){var l=a[s],c=l.layer;if(c.hasRenderer()&&Object(u.b)(l,o)&&i(c)){var h=c.getRenderer().getDataAtPixel(t,e,n);if(h){var d=r(c,h);if(d)return d}}}},e}(f),S=n(46),T=n(56),O=n(57),I=n(14),A=n(159),M=n(52),k=n(16),P=n(20),D=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),R=function(t){function e(e,n){var r=t.call(this,e)||this;return r.layer=n,r}return D(e,t),e}(M.a),L="layers",N=function(t){function e(e){var n=this,r=e||{},i=Object(P.a)({},r);delete i.layers;var o=r.layers;return(n=t.call(this,i)||this).on,n.once,n.un,n.layersListenerKeys_=[],n.listenerKeys_={},n.addChangeListener(L,n.handleLayersChanged_),o?Array.isArray(o)?o=new T.a(o.slice(),{unique:!0}):Object(k.a)("function"==typeof o.getArray,43):o=new T.a(void 0,{unique:!0}),n.setLayers(o),n}return D(e,t),e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(x.c),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(Object(x.a)(t,O.a.ADD,this.handleLayersAdd_,this),Object(x.a)(t,O.a.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(x.c);Object(P.b)(this.listenerKeys_);for(var n=t.getArray(),r=0,i=n.length;r<i;r++){var o=n[r];this.registerLayerListeners_(o),this.dispatchEvent(new R("addlayer",o))}this.changed()},e.prototype.registerLayerListeners_=function(t){var n=[Object(x.a)(t,m.a.PROPERTYCHANGE,this.handleLayerChange_,this),Object(x.a)(t,I.a.CHANGE,this.handleLayerChange_,this)];t instanceof e&&n.push(Object(x.a)(t,"addlayer",this.handleLayerGroupAdd_,this),Object(x.a)(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Object(a.c)(t)]=n},e.prototype.handleLayerGroupAdd_=function(t){this.dispatchEvent(new R("addlayer",t.layer))},e.prototype.handleLayerGroupRemove_=function(t){this.dispatchEvent(new R("removelayer",t.layer))},e.prototype.handleLayersAdd_=function(t){var e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new R("addlayer",e)),this.changed()},e.prototype.handleLayersRemove_=function(t){var e=t.element,n=Object(a.c)(e);this.listenerKeys_[n].forEach(x.c),delete this.listenerKeys_[n],this.dispatchEvent(new R("removelayer",e)),this.changed()},e.prototype.getLayers=function(){return this.get(L)},e.prototype.setLayers=function(t){var e=this.getLayers();if(e)for(var n=e.getArray(),r=0,i=n.length;r<i;++r)this.dispatchEvent(new R("removelayer",n[r]));this.set(L,t)},e.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach((function(t){t.getLayersArray(e)})),e},e.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],n=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));var r=this.getLayerState(),i=r.zIndex;t||void 0!==r.zIndex||(i=0);for(var o=n,a=e.length;o<a;o++){var s=e[o];s.opacity*=r.opacity,s.visible=s.visible&&r.visible,s.maxResolution=Math.min(s.maxResolution,r.maxResolution),s.minResolution=Math.max(s.minResolution,r.minResolution),s.minZoom=Math.max(s.minZoom,r.minZoom),s.maxZoom=Math.min(s.maxZoom,r.maxZoom),void 0!==r.extent&&(void 0!==s.extent?s.extent=Object(l.y)(s.extent,r.extent):s.extent=r.extent),void 0===s.zIndex&&(s.zIndex=i)}return e},e.prototype.getSourceState=function(){return v.a.READY},e}(A.a),j=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),F=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.map=n,i.frameState=void 0!==r?r:null,i}return j(e,t),e}(M.a),z=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),B=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n,o)||this;return a.originalEvent=r,a.pixel_=null,a.coordinate_=null,a.dragging=void 0!==i&&i,a}return z(e,t),Object.defineProperty(e.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},e}(F),U=n(23),G="pointermove",V="pointerdown",q=n(65),H=n(34),W=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Z=function(t){function e(e,n){var r=t.call(this,e)||this;r.map_=e,r.clickTimeoutId_,r.emulateClicks_=!1,r.dragging_=!1,r.dragListenerKeys_=[],r.moveTolerance_=void 0===n?1:n,r.down_=null;var i=r.map_.getViewport();return r.activePointers_=0,r.trackedTouches_={},r.element_=i,r.pointerdownListenerKey_=Object(x.a)(i,V,r.handlePointerDown_,r),r.originalPointerMoveEvent_,r.relayedListenerKey_=Object(x.a)(i,G,r.relayEvent_,r),r.boundHandleTouchMove_=r.handleTouchMove_.bind(r),r.element_.addEventListener(I.a.TOUCHMOVE,r.boundHandleTouchMove_,!!H.e&&{passive:!1}),r}return W(e,t),e.prototype.emulateClick_=function(t){var e=new B(U.a.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new B(U.a.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var e=new B(U.a.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)},e.prototype.updateActivePointers_=function(t){var e=t;e.type==U.a.POINTERUP||e.type==U.a.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==U.a.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new B(U.a.POINTERUP,this.map_,t);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(x.c),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},e.prototype.isMouseActionButton_=function(t){return 0===t.button},e.prototype.handlePointerDown_=function(t){this.emulateClicks_=0===this.activePointers_,this.updateActivePointers_(t);var e=new B(U.a.POINTERDOWN,this.map_,t);for(var n in this.dispatchEvent(e),this.down_={},t){var r=t[n];this.down_[n]="function"==typeof r?o.c:r}if(0===this.dragListenerKeys_.length){var i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Object(x.a)(i,U.a.POINTERMOVE,this.handlePointerMove_,this),Object(x.a)(i,U.a.POINTERUP,this.handlePointerUp_,this),Object(x.a)(this.element_,U.a.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(Object(x.a)(this.element_.getRootNode(),U.a.POINTERUP,this.handlePointerUp_,this))}},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new B(U.a.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}},e.prototype.relayEvent_=function(t){this.originalPointerMoveEvent_=t;var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new B(t.type,this.map_,t,e))},e.prototype.handleTouchMove_=function(t){var e=this.originalPointerMoveEvent_;e&&!e.defaultPrevented||"boolean"==typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(Object(x.c)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(I.a.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Object(x.c)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(x.c),this.dragListenerKeys_.length=0,this.element_=null,t.prototype.disposeInternal.call(this)},e}(q.a),$=n(110),K="layergroup",Y="size",X="target",J="view",Q=function(){function t(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return t.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Object(P.b)(this.queuedElements_)},t.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,n=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var r=this.keyFunction_(n);return delete this.queuedElements_[r],n},t.prototype.enqueue=function(t){Object(k.a)(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=1/0&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},t.prototype.getCount=function(){return this.elements_.length},t.prototype.getLeftChildIndex_=function(t){return 2*t+1},t.prototype.getRightChildIndex_=function(t){return 2*t+2},t.prototype.getParentIndex_=function(t){return t-1>>1},t.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},t.prototype.isEmpty=function(){return 0===this.elements_.length},t.prototype.isKeyQueued=function(t){return t in this.queuedElements_},t.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},t.prototype.siftUp_=function(t){for(var e=this.elements_,n=this.priorities_,r=e.length,i=e[t],o=n[t],a=t;t<r>>1;){var s=this.getLeftChildIndex_(t),l=this.getRightChildIndex_(t),c=l<r&&n[l]<n[s]?l:s;e[t]=e[c],n[t]=n[c],t=c}e[t]=i,n[t]=o,this.siftDown_(a,t)},t.prototype.siftDown_=function(t,e){for(var n=this.elements_,r=this.priorities_,i=n[e],o=r[e];e>t;){var a=this.getParentIndex_(e);if(!(r[a]>o))break;n[e]=n[a],r[e]=r[a],e=a}n[e]=i,r[e]=o},t.prototype.reprioritize=function(){var t,e,n,r=this.priorityFunction_,i=this.elements_,o=this.priorities_,a=0,s=i.length;for(e=0;e<s;++e)(n=r(t=i[e]))==1/0?delete this.queuedElements_[this.keyFunction_(t)]:(o[a]=n,i[a++]=t);i.length=a,o.length=a,this.heapify_()},t}(),tt=n(17),et=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),nt=function(t){function e(e,n){var r=t.call(this,(function(t){return e.apply(null,t)}),(function(t){return t[0].getKey()}))||this;return r.boundHandleTileChange_=r.handleTileChange.bind(r),r.tileChangeCallback_=n,r.tilesLoading_=0,r.tilesLoadingKeys_={},r}return et(e,t),e.prototype.enqueue=function(e){var n=t.prototype.enqueue.call(this,e);n&&e[0].addEventListener(I.a.CHANGE,this.boundHandleTileChange_);return n},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,n=e.getState();if(n===tt.a.LOADED||n===tt.a.ERROR||n===tt.a.EMPTY){e.removeEventListener(I.a.CHANGE,this.boundHandleTileChange_);var r=e.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var n,r,i=0;this.tilesLoading_<t&&i<e&&this.getCount()>0;)r=(n=this.dequeue()[0]).getKey(),n.getState()!==tt.a.IDLE||r in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[r]=!0,++this.tilesLoading_,++i,n.load())},e}(Q);var rt=n(63),it=n(37),ot=n(12),at=n(32),st=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function lt(t){t instanceof u.a?t.setMapInternal(null):t instanceof N&&t.getLayers().forEach(lt)}var ct=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var r=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var n,r,i,o={},a=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new N({layers:t.layers});o[K]=a,o[X]=t.target,o[J]=t.view instanceof rt.a?t.view:new rt.a,void 0!==t.controls&&(Array.isArray(t.controls)?n=new T.a(t.controls.slice()):(Object(k.a)("function"==typeof t.controls.getArray,47),n=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?r=new T.a(t.interactions.slice()):(Object(k.a)("function"==typeof t.interactions.getArray,48),r=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?i=new T.a(t.overlays.slice()):(Object(k.a)("function"==typeof t.overlays.getArray,49),i=t.overlays):i=new T.a;return{controls:n,interactions:r,keyboardEventTarget:e,overlays:i,values:o}}(e);n.renderComplete_,n.boundHandleBrowserEvent_=n.handleBrowserEvent.bind(n),n.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,n.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:H.a,n.postRenderTimeoutHandle_,n.animationDelayKey_,n.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(n),n.coordinateToPixelTransform_=Object(s.c)(),n.pixelToCoordinateTransform_=Object(s.c)(),n.frameIndex_=0,n.frameState_=null,n.previousExtent_=null,n.viewPropertyListenerKey_=null,n.viewChangeListenerKey_=null,n.layerGroupPropertyListenerKeys_=null,n.viewport_=document.createElement("div"),n.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),n.viewport_.style.position="relative",n.viewport_.style.overflow="hidden",n.viewport_.style.width="100%",n.viewport_.style.height="100%",n.overlayContainer_=document.createElement("div"),n.overlayContainer_.style.position="absolute",n.overlayContainer_.style.zIndex="0",n.overlayContainer_.style.width="100%",n.overlayContainer_.style.height="100%",n.overlayContainer_.style.pointerEvents="none",n.overlayContainer_.className="ol-overlaycontainer",n.viewport_.appendChild(n.overlayContainer_),n.overlayContainerStopEvent_=document.createElement("div"),n.overlayContainerStopEvent_.style.position="absolute",n.overlayContainerStopEvent_.style.zIndex="0",n.overlayContainerStopEvent_.style.width="100%",n.overlayContainerStopEvent_.style.height="100%",n.overlayContainerStopEvent_.style.pointerEvents="none",n.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",n.viewport_.appendChild(n.overlayContainerStopEvent_),n.mapBrowserEventHandler_=null,n.moveTolerance_=e.moveTolerance,n.keyboardEventTarget_=r.keyboardEventTarget,n.targetChangeHandlerKeys_=null,n.controls=r.controls||new T.a,n.interactions=r.interactions||new T.a,n.overlays_=r.overlays,n.overlayIdIndex_={},n.renderer_=null,n.postRenderFunctions_=[],n.tileQueue_=new nt(n.getTilePriority.bind(n),n.handleTileChange_.bind(n)),n.addChangeListener(K,n.handleLayerGroupChanged_),n.addChangeListener(J,n.handleViewChanged_),n.addChangeListener(Y,n.handleSizeChanged_),n.addChangeListener(X,n.handleTargetChanged_),n.setProperties(r.values);var i=n;return!e.view||e.view instanceof rt.a||e.view.then((function(t){i.setView(new rt.a(t))})),n.controls.addEventListener(O.a.ADD,function(t){t.element.setMap(this)}.bind(n)),n.controls.addEventListener(O.a.REMOVE,function(t){t.element.setMap(null)}.bind(n)),n.interactions.addEventListener(O.a.ADD,function(t){t.element.setMap(this)}.bind(n)),n.interactions.addEventListener(O.a.REMOVE,function(t){t.element.setMap(null)}.bind(n)),n.overlays_.addEventListener(O.a.ADD,function(t){this.addOverlayInternal_(t.element)}.bind(n)),n.overlays_.addEventListener(O.a.REMOVE,function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)}.bind(n)),n.controls.forEach(function(t){t.setMap(this)}.bind(n)),n.interactions.forEach(function(t){t.setMap(this)}.bind(n)),n.overlays_.forEach(n.addOverlayInternal_.bind(n)),n}return st(e,t),e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},e.prototype.handleLayerAdd_=function(t){!function t(e,n){if(e instanceof u.a)e.setMapInternal(n);else if(e instanceof N)for(var r=e.getLayers().getArray(),i=0,o=r.length;i<o;++i)t(r[i],n)}(t.layer,this)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.setTarget(null),t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,e,n){if(this.frameState_){var r=this.getCoordinateFromPixelInternal(t),i=void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance:0,a=void 0!==n.layerFilter?n.layerFilter:o.b,s=!1!==n.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,i,s,e,null,a,null)}},e.prototype.getFeaturesAtPixel=function(t,e){var n=[];return this.forEachFeatureAtPixel(t,(function(t){n.push(t)}),e),n},e.prototype.getAllLayers=function(){var t=[];return function e(n){n.forEach((function(n){n instanceof N?e(n.getLayers()):t.push(n)}))}(this.getLayers()),t},e.prototype.forEachLayerAtPixel=function(t,e,n){if(this.frameState_){var r=n||{},i=void 0!==r.hitTolerance?r.hitTolerance:0,a=r.layerFilter||o.b;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,i,e,a)}},e.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var n=this.getCoordinateFromPixelInternal(t),r=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:o.b,i=void 0!==e.hitTolerance?e.hitTolerance:0,a=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,i,a,r,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),n="changedTouches"in t?t.changedTouches[0]:t;return[n.clientX-e.left,n.clientY-e.top]},e.prototype.getTarget=function(){return this.get(X)},e.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){return Object(ot.n)(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},e.prototype.getCoordinateFromPixelInternal=function(t){var e=this.frameState_;return e?Object(s.a)(e.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(K)},e.prototype.setLayers=function(t){var e=this.getLayerGroup();if(t instanceof T.a)e.setLayers(t);else{var n=e.getLayers();n.clear(),n.extend(t)}},e.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},e.prototype.getLoading=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,n=t.length;e<n;++e){var r=t[e].layer.getSource();if(r&&r.loading)return!0}return!1},e.prototype.getPixelFromCoordinate=function(t){var e=Object(ot.i)(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)},e.prototype.getPixelFromCoordinateInternal=function(t){var e=this.frameState_;return e?Object(s.a)(e.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get(Y)},e.prototype.getView=function(){return this.get(J)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getOwnerDocument=function(){var t=this.getTargetElement();return t?t.ownerDocument:document},e.prototype.getTilePriority=function(t,e,n,r){return function(t,e,n,r,i){if(!t||!(n in t.wantedTiles))return 1/0;if(!t.wantedTiles[n][e.getKey()])return 1/0;var o=t.viewState.center,a=r[0]-o[0],s=r[1]-o[1];return 65536*Math.log(i)+Math.sqrt(a*a+s*s)/i}(this.frameState_,t,e,n,r)},e.prototype.handleBrowserEvent=function(t,e){var n=e||t.type,r=new B(n,this,t);this.handleMapBrowserEvent(r)},e.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){var e=t.originalEvent,n=e.type;if(n===V||n===I.a.WHEEL||n===I.a.KEYDOWN){var r=this.getOwnerDocument(),i=this.viewport_.getRootNode?this.viewport_.getRootNode():r,o=e.target;if(this.overlayContainerStopEvent_.contains(o)||!(i===r?r.documentElement:i).contains(o))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t))for(var a=this.getInteractions().getArray().slice(),s=a.length-1;s>=0;s--){var l=a[s];if(l.getMap()===this&&l.getActive()&&this.getTargetElement())if(!l.handleEvent(t)||t.propagationStopped)break}}},e.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var n=this.maxTilesLoading_,r=n;if(t){var i=t.viewHints;if(i[it.a.ANIMATING]||i[it.a.INTERACTING]){var o=Date.now()-t.time>8;n=o?0:8,r=o?0:2}}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,r))}t&&this.hasListener(y.a.RENDERCOMPLETE)&&!t.animate&&this.renderComplete_&&this.renderer_.dispatchRenderEvent(y.a.RENDERCOMPLETE,t);for(var a=this.postRenderFunctions_,s=0,l=a.length;s<l;++s)a[s](this,t);a.length=0},e.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},e.prototype.handleTargetChanged_=function(){if(this.mapBrowserEventHandler_){for(var t=0,e=this.targetChangeHandlerKeys_.length;t<e;++t)Object(x.c)(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(I.a.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(I.a.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Object(w.c)(this.viewport_)}var n=this.getTargetElement();if(n){for(var r in n.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new Z(this,this.moveTolerance_),U.a)this.mapBrowserEventHandler_.addEventListener(U.a[r],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(I.a.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(I.a.WHEEL,this.boundHandleBrowserEvent_,!!H.e&&{passive:!1});var i=this.getOwnerDocument().defaultView,o=this.keyboardEventTarget_?this.keyboardEventTarget_:n;this.targetChangeHandlerKeys_=[Object(x.a)(o,I.a.KEYDOWN,this.handleBrowserEvent,this),Object(x.a)(o,I.a.KEYPRESS,this.handleBrowserEvent,this),Object(x.a)(i,I.a.RESIZE,this.updateSize,this)]}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(Object(x.c)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Object(x.c)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=Object(x.a)(t,m.a.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Object(x.a)(t,I.a.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(x.c),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.handleLayerAdd_(new R("addlayer",t)),this.layerGroupPropertyListenerKeys_=[Object(x.a)(t,m.a.PROPERTYCHANGE,this.render,this),Object(x.a)(t,I.a.CHANGE,this.render,this),Object(x.a)(t,"addlayer",this.handleLayerAdd_,this),Object(x.a)(t,"removelayer",this.handleLayerRemove_,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,n=t.length;e<n;++e){var r=t[e].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}},e.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},e.prototype.handleLayerRemove_=function(t){lt(t.layer)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var e=this,n=this.getSize(),r=this.getView(),i=this.frameState_,o=null;if(void 0!==n&&Object(at.a)(n)&&r&&r.isDef()){var s=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),c=r.getState();if(o={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:Object(l.w)(c.center,c.resolution,c.rotation,n),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:c,viewHints:s,wantedTiles:{},mapId:Object(a.c)(this),renderTargets:{}},c.nextCenter&&c.nextResolution){var u=isNaN(c.nextRotation)?c.rotation:c.nextRotation;o.nextExtent=Object(l.w)(c.nextCenter,c.nextResolution,u,n)}}if(this.frameState_=o,this.renderer_.renderFrame(o),o){if(o.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,o.postRenderFunctions),i)(!this.previousExtent_||!Object(l.E)(this.previousExtent_)&&!Object(l.o)(o.extent,this.previousExtent_))&&(this.dispatchEvent(new F($.a.MOVESTART,this,i)),this.previousExtent_=Object(l.l)(this.previousExtent_));this.previousExtent_&&!o.viewHints[it.a.ANIMATING]&&!o.viewHints[it.a.INTERACTING]&&!Object(l.o)(o.extent,this.previousExtent_)&&(this.dispatchEvent(new F($.a.MOVEEND,this,o)),Object(l.d)(o.extent,this.previousExtent_))}this.dispatchEvent(new F($.a.POSTRENDER,this,o)),this.renderComplete_=!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoading(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout((function(){e.postRenderTimeoutHandle_=void 0,e.handlePostRender()}),0))},e.prototype.setLayerGroup=function(t){var e=this.getLayerGroup();e&&this.handleLayerRemove_(new R("removelayer",e)),this.set(K,t)},e.prototype.setSize=function(t){this.set(Y,t)},e.prototype.setTarget=function(t){this.set(X,t)},e.prototype.setView=function(t){if(!t||t instanceof rt.a)this.set(J,t);else{this.set(J,new rt.a);var e=this;t.then((function(t){e.setView(new rt.a(t))}))}},e.prototype.updateSize=function(){var t=this.getTargetElement(),e=void 0;if(t){var n=getComputedStyle(t),r=t.offsetWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)-parseFloat(n.borderRightWidth),i=t.offsetHeight-parseFloat(n.borderTopWidth)-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)-parseFloat(n.borderBottomWidth);isNaN(r)||isNaN(i)||(e=[r,i],!Object(at.a)(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(e),this.updateViewportSize_()},e.prototype.updateViewportSize_=function(){var t=this.getView();if(t){var e=void 0,n=getComputedStyle(this.viewport_);n.width&&n.height&&(e=[parseInt(n.width,10),parseInt(n.height,10)]),t.setViewportSize(e)}},e}(S.a),ut=n(165),ht=n(164),dt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pt=function(t){function e(e){return(e=Object(P.a)({},e)).controls||(e.controls=Object(ut.a)()),e.interactions||(e.interactions=Object(ht.a)({onFocusOnly:!0})),t.call(this,e)||this}return dt(e,t),e.prototype.createRenderer=function(){return new C(this)},e}(ct);e.a=pt},,,,,,,,,,,,,,,,,,,,,function(t,e){t.exports=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";t.exports=n(293)},function(t,e,n){"use strict";
/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r="function"==typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,l=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,u=r?Symbol.for("react.context"):60110,h=r?Symbol.for("react.async_mode"):60111,d=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,f=r?Symbol.for("react.suspense"):60113,m=r?Symbol.for("react.suspense_list"):60120,g=r?Symbol.for("react.memo"):60115,y=r?Symbol.for("react.lazy"):60116,v=r?Symbol.for("react.block"):60121,_=r?Symbol.for("react.fundamental"):60117,b=r?Symbol.for("react.responder"):60118,x=r?Symbol.for("react.scope"):60119;function w(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case i:switch(t=t.type){case h:case d:case a:case l:case s:case f:return t;default:switch(t=t&&t.$$typeof){case u:case p:case y:case g:case c:return t;default:return e}}case o:return e}}}function E(t){return w(t)===d}e.AsyncMode=h,e.ConcurrentMode=d,e.ContextConsumer=u,e.ContextProvider=c,e.Element=i,e.ForwardRef=p,e.Fragment=a,e.Lazy=y,e.Memo=g,e.Portal=o,e.Profiler=l,e.StrictMode=s,e.Suspense=f,e.isAsyncMode=function(t){return E(t)||w(t)===h},e.isConcurrentMode=E,e.isContextConsumer=function(t){return w(t)===u},e.isContextProvider=function(t){return w(t)===c},e.isElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===i},e.isForwardRef=function(t){return w(t)===p},e.isFragment=function(t){return w(t)===a},e.isLazy=function(t){return w(t)===y},e.isMemo=function(t){return w(t)===g},e.isPortal=function(t){return w(t)===o},e.isProfiler=function(t){return w(t)===l},e.isStrictMode=function(t){return w(t)===s},e.isSuspense=function(t){return w(t)===f},e.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===a||t===d||t===l||t===s||t===f||t===m||"object"==typeof t&&null!==t&&(t.$$typeof===y||t.$$typeof===g||t.$$typeof===c||t.$$typeof===u||t.$$typeof===p||t.$$typeof===_||t.$$typeof===b||t.$$typeof===x||t.$$typeof===v)},e.typeOf=w},function(t,e,n){"use strict";
/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=60103,i=60106,o=60107,a=60108,s=60114,l=60109,c=60110,u=60112,h=60113,d=60120,p=60115,f=60116,m=60121,g=60122,y=60117,v=60129,_=60131;if("function"==typeof Symbol&&Symbol.for){var b=Symbol.for;r=b("react.element"),i=b("react.portal"),o=b("react.fragment"),a=b("react.strict_mode"),s=b("react.profiler"),l=b("react.provider"),c=b("react.context"),u=b("react.forward_ref"),h=b("react.suspense"),d=b("react.suspense_list"),p=b("react.memo"),f=b("react.lazy"),m=b("react.block"),g=b("react.server.block"),y=b("react.fundamental"),v=b("react.debug_trace_mode"),_=b("react.legacy_hidden")}function x(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case o:case s:case a:case h:case d:return t;default:switch(t=t&&t.$$typeof){case c:case u:case f:case p:case l:return t;default:return e}}case i:return e}}}var w=l,E=r,C=u,S=o,T=f,O=p,I=i,A=s,M=a,k=h;e.ContextConsumer=c,e.ContextProvider=w,e.Element=E,e.ForwardRef=C,e.Fragment=S,e.Lazy=T,e.Memo=O,e.Portal=I,e.Profiler=A,e.StrictMode=M,e.Suspense=k,e.isAsyncMode=function(){return!1},e.isConcurrentMode=function(){return!1},e.isContextConsumer=function(t){return x(t)===c},e.isContextProvider=function(t){return x(t)===l},e.isElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===r},e.isForwardRef=function(t){return x(t)===u},e.isFragment=function(t){return x(t)===o},e.isLazy=function(t){return x(t)===f},e.isMemo=function(t){return x(t)===p},e.isPortal=function(t){return x(t)===i},e.isProfiler=function(t){return x(t)===s},e.isStrictMode=function(t){return x(t)===a},e.isSuspense=function(t){return x(t)===h},e.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===o||t===s||t===v||t===a||t===h||t===d||t===_||"object"==typeof t&&null!==t&&(t.$$typeof===f||t.$$typeof===p||t.$$typeof===l||t.$$typeof===c||t.$$typeof===u||t.$$typeof===y||t.$$typeof===m||t[0]===g)},e.typeOf=x},function(t,e,n){"use strict";var r=n(296);function i(){}function o(){}o.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){var r=n(113),i=n(301);t.exports=function(t){return i(r(t).toLowerCase())}},function(t,e,n){var r=n(99),i=n(100),o=n(51),a=n(128),s=r?r.prototype:void 0,l=s?s.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(o(e))return i(e,t)+"";if(a(e))return l?l.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},function(t,e,n){var r=n(99),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(t){}var i=a.call(t);return r&&(e?t[s]=n:delete t[s]),i}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var r=n(302)("toUpperCase");t.exports=r},function(t,e,n){var r=n(303),i=n(202),o=n(305),a=n(113);t.exports=function(t){return function(e){e=a(e);var n=i(e)?o(e):void 0,s=n?n[0]:e.charAt(0),l=n?r(n,1).join(""):e.slice(1);return s[t]()+l}}},function(t,e,n){var r=n(304);t.exports=function(t,e,n){var i=t.length;return n=void 0===n?i:n,!e&&n>=i?t:r(t,e,n)}},function(t,e){t.exports=function(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}},function(t,e,n){var r=n(306),i=n(202),o=n(307);t.exports=function(t){return i(t)?o(t):r(t)}},function(t,e){t.exports=function(t){return t.split("")}},function(t,e){var n="[\\ud800-\\udfff]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",o="[^\\ud800-\\udfff]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+r+"|"+i+")"+"?",c="[\\ufe0e\\ufe0f]?"+l+("(?:\\u200d(?:"+[o,a,s].join("|")+")[\\ufe0e\\ufe0f]?"+l+")*"),u="(?:"+[o+r+"?",r,a,s,n].join("|")+")",h=RegExp(i+"(?="+i+")|"+u+c,"g");t.exports=function(t){return t.match(h)||[]}},function(t,e,n){var r=n(309),i=n(310),o=n(313),a=RegExp("['’]","g");t.exports=function(t){return function(e){return r(o(i(e).replace(a,"")),t,"")}}},function(t,e){t.exports=function(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}},function(t,e,n){var r=n(311),i=n(113),o=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,a=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");t.exports=function(t){return(t=i(t))&&t.replace(o,r).replace(a,"")}},function(t,e,n){var r=n(312)({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"});t.exports=r},function(t,e){t.exports=function(t){return function(e){return null==t?void 0:t[e]}}},function(t,e,n){var r=n(314),i=n(315),o=n(113),a=n(316);t.exports=function(t,e,n){return t=o(t),void 0===(e=n?void 0:e)?i(t)?a(t):r(t):t.match(e)||[]}},function(t,e){var n=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;t.exports=function(t){return t.match(n)||[]}},function(t,e){var n=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;t.exports=function(t){return n.test(t)}},function(t,e){var n="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",r="["+n+"]",i="\\d+",o="[\\u2700-\\u27bf]",a="[a-z\\xdf-\\xf6\\xf8-\\xff]",s="[^\\ud800-\\udfff"+n+i+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",l="(?:\\ud83c[\\udde6-\\uddff]){2}",c="[\\ud800-\\udbff][\\udc00-\\udfff]",u="[A-Z\\xc0-\\xd6\\xd8-\\xde]",h="(?:"+a+"|"+s+")",d="(?:"+u+"|"+s+")",p="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",f="[\\ufe0e\\ufe0f]?"+p+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",l,c].join("|")+")[\\ufe0e\\ufe0f]?"+p+")*"),m="(?:"+[o,l,c].join("|")+")"+f,g=RegExp([u+"?"+a+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[r,u,"$"].join("|")+")",d+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[r,u+h,"$"].join("|")+")",u+"?"+h+"+(?:['’](?:d|ll|m|re|s|t|ve))?",u+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",i,m].join("|"),"g");t.exports=function(t){return t.match(g)||[]}},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e,n){"use strict";t.exports=n(319)},function(t,e,n){"use strict";
/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r="function"==typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,l=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,u=r?Symbol.for("react.context"):60110,h=r?Symbol.for("react.async_mode"):60111,d=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,f=r?Symbol.for("react.suspense"):60113,m=r?Symbol.for("react.suspense_list"):60120,g=r?Symbol.for("react.memo"):60115,y=r?Symbol.for("react.lazy"):60116,v=r?Symbol.for("react.block"):60121,_=r?Symbol.for("react.fundamental"):60117,b=r?Symbol.for("react.responder"):60118,x=r?Symbol.for("react.scope"):60119;function w(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case i:switch(t=t.type){case h:case d:case a:case l:case s:case f:return t;default:switch(t=t&&t.$$typeof){case u:case p:case y:case g:case c:return t;default:return e}}case o:return e}}}function E(t){return w(t)===d}e.AsyncMode=h,e.ConcurrentMode=d,e.ContextConsumer=u,e.ContextProvider=c,e.Element=i,e.ForwardRef=p,e.Fragment=a,e.Lazy=y,e.Memo=g,e.Portal=o,e.Profiler=l,e.StrictMode=s,e.Suspense=f,e.isAsyncMode=function(t){return E(t)||w(t)===h},e.isConcurrentMode=E,e.isContextConsumer=function(t){return w(t)===u},e.isContextProvider=function(t){return w(t)===c},e.isElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===i},e.isForwardRef=function(t){return w(t)===p},e.isFragment=function(t){return w(t)===a},e.isLazy=function(t){return w(t)===y},e.isMemo=function(t){return w(t)===g},e.isPortal=function(t){return w(t)===o},e.isProfiler=function(t){return w(t)===l},e.isStrictMode=function(t){return w(t)===s},e.isSuspense=function(t){return w(t)===f},e.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===a||t===d||t===l||t===s||t===f||t===m||"object"==typeof t&&null!==t&&(t.$$typeof===y||t.$$typeof===g||t.$$typeof===c||t.$$typeof===u||t.$$typeof===p||t.$$typeof===_||t.$$typeof===b||t.$$typeof===x||t.$$typeof===v)},e.typeOf=w},function(t,e,n){"use strict";var r=n(61),i=n(203),o=n(321),a=n(210);var s=function t(e){var n=new o(e),s=i(o.prototype.request,n);return r.extend(s,o.prototype,n),r.extend(s,n),s.create=function(n){return t(a(e,n))},s}(n(130));s.Axios=o,s.Cancel=n(131),s.CancelToken=n(334),s.isCancel=n(209),s.VERSION=n(211).version,s.all=function(t){return Promise.all(t)},s.spread=n(335),s.isAxiosError=n(336),t.exports=s,t.exports.default=s},function(t,e,n){"use strict";var r=n(61),i=n(204),o=n(322),a=n(323),s=n(210),l=n(333),c=l.validators;function u(t){this.defaults=t,this.interceptors={request:new o,response:new o}}u.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=s(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=t.transitional;void 0!==e&&l.assertOptions(e,{silentJSONParsing:c.transitional(c.boolean),forcedJSONParsing:c.transitional(c.boolean),clarifyTimeoutError:c.transitional(c.boolean)},!1);var n=[],r=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(r=r&&e.synchronous,n.unshift(e.fulfilled,e.rejected))}));var i,o=[];if(this.interceptors.response.forEach((function(t){o.push(t.fulfilled,t.rejected)})),!r){var u=[a,void 0];for(Array.prototype.unshift.apply(u,n),u=u.concat(o),i=Promise.resolve(t);u.length;)i=i.then(u.shift(),u.shift());return i}for(var h=t;n.length;){var d=n.shift(),p=n.shift();try{h=d(h)}catch(t){p(t);break}}try{i=a(h)}catch(t){return Promise.reject(t)}for(;o.length;)i=i.then(o.shift(),o.shift());return i},u.prototype.getUri=function(t){return t=s(this.defaults,t),i(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(t){u.prototype[t]=function(e,n){return this.request(s(n||{},{method:t,url:e,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(t){u.prototype[t]=function(e,n,r){return this.request(s(r||{},{method:t,url:e,data:n}))}})),t.exports=u},function(t,e,n){"use strict";var r=n(61);function i(){this.handlers=[]}i.prototype.use=function(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},i.prototype.forEach=function(t){r.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=i},function(t,e,n){"use strict";var r=n(61),i=n(324),o=n(209),a=n(130),s=n(131);function l(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new s("canceled")}t.exports=function(t){return l(t),t.headers=t.headers||{},t.data=i.call(t,t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||a.adapter)(t).then((function(e){return l(t),e.data=i.call(t,e.data,e.headers,t.transformResponse),e}),(function(e){return o(e)||(l(t),e&&e.response&&(e.response.data=i.call(t,e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},function(t,e,n){"use strict";var r=n(61),i=n(130);t.exports=function(t,e,n){var o=this||i;return r.forEach(n,(function(n){t=n.call(o,t,e)})),t}},function(t,e,n){"use strict";var r=n(61);t.exports=function(t,e){r.forEach(t,(function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])}))}},function(t,e,n){"use strict";var r=n(208);t.exports=function(t,e,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?e(r("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}},function(t,e,n){"use strict";var r=n(61);t.exports=r.isStandardBrowserEnv()?{write:function(t,e,n,i,o,a){var s=[];s.push(t+"="+encodeURIComponent(e)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,n){"use strict";var r=n(329),i=n(330);t.exports=function(t,e){return t&&!r(e)?i(t,e):e}},function(t,e,n){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,n){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,n){"use strict";var r=n(61),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,o,a={};return t?(r.forEach(t.split("\n"),(function(t){if(o=t.indexOf(":"),e=r.trim(t.substr(0,o)).toLowerCase(),n=r.trim(t.substr(o+1)),e){if(a[e]&&i.indexOf(e)>=0)return;a[e]="set-cookie"===e?(a[e]?a[e]:[]).concat([n]):a[e]?a[e]+", "+n:n}})),a):a}},function(t,e,n){"use strict";var r=n(61);t.exports=r.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(t){var r=t;return e&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=i(window.location.href),function(e){var n=r.isString(e)?i(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0}},function(t,e,n){"use strict";var r=n(211).version,i={};["object","boolean","number","function","string","symbol"].forEach((function(t,e){i[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}}));var o={};i.transitional=function(t,e,n){function i(t,e){return"[Axios v"+r+"] Transitional option '"+t+"'"+e+(n?". "+n:"")}return function(n,r,a){if(!1===t)throw new Error(i(r," has been removed"+(e?" in "+e:"")));return e&&!o[r]&&(o[r]=!0,console.warn(i(r," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(n,r,a)}},t.exports={assertOptions:function(t,e,n){if("object"!=typeof t)throw new TypeError("options must be an object");for(var r=Object.keys(t),i=r.length;i-- >0;){var o=r[i],a=e[o];if(a){var s=t[o],l=void 0===s||a(s,o,t);if(!0!==l)throw new TypeError("option "+o+" must be "+l)}else if(!0!==n)throw Error("Unknown option "+o)}},validators:i}},function(t,e,n){"use strict";var r=n(131);function i(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var n=this;this.promise.then((function(t){if(n._listeners){var e,r=n._listeners.length;for(e=0;e<r;e++)n._listeners[e](t);n._listeners=null}})),this.promise.then=function(t){var e,r=new Promise((function(t){n.subscribe(t),e=t})).then(t);return r.cancel=function(){n.unsubscribe(e)},r},t((function(t){n.reason||(n.reason=new r(t),e(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.prototype.subscribe=function(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]},i.prototype.unsubscribe=function(t){if(this._listeners){var e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}},i.source=function(){var t;return{token:new i((function(e){t=e})),cancel:t}},t.exports=i},function(t,e,n){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,n){"use strict";t.exports=function(t){return"object"==typeof t&&!0===t.isAxiosError}},function(t,e){t.exports=function(t){return-1!==Function.toString.call(t).indexOf("[native code]")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(169),i=n(339);function o(e,n,a){return i()?(t.exports=o=Reflect.construct,t.exports.__esModule=!0,t.exports.default=t.exports):(t.exports=o=function(t,e,n){var i=[null];i.push.apply(i,e);var o=new(Function.bind.apply(t,i));return n&&r(o,n.prototype),o},t.exports.__esModule=!0,t.exports.default=t.exports),o.apply(null,arguments)}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";t.exports=t=>encodeURIComponent(t).replace(/[!'()*]/g,t=>"%"+t.charCodeAt(0).toString(16).toUpperCase())},function(t,e,n){"use strict";var r=new RegExp("%[a-f0-9]{2}","gi"),i=new RegExp("(%[a-f0-9]{2})+","gi");function o(t,e){try{return decodeURIComponent(t.join(""))}catch(t){}if(1===t.length)return t;e=e||1;var n=t.slice(0,e),r=t.slice(e);return Array.prototype.concat.call([],o(n),o(r))}function a(t){try{return decodeURIComponent(t)}catch(i){for(var e=t.match(r),n=1;n<e.length;n++)e=(t=o(e,n).join("")).match(r);return t}}t.exports=function(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(e){return function(t){for(var e={"%FE%FF":"��","%FF%FE":"��"},n=i.exec(t);n;){try{e[n[0]]=decodeURIComponent(n[0])}catch(t){var r=a(n[0]);r!==n[0]&&(e[n[0]]=r)}n=i.exec(t)}e["%C2"]="�";for(var o=Object.keys(e),s=0;s<o.length;s++){var l=o[s];t=t.replace(new RegExp(l,"g"),e[l])}return t}(t)}}},function(t,e,n){"use strict";t.exports=(t,e)=>{if("string"!=typeof t||"string"!=typeof e)throw new TypeError("Expected the arguments to be of type `string`");if(""===e)return[t];const n=t.indexOf(e);return-1===n?[t]:[t.slice(0,n),t.slice(n+e.length)]}},function(t,e,n){"use strict";t.exports=function(t,e){for(var n={},r=Object.keys(t),i=Array.isArray(e),o=0;o<r.length;o++){var a=r[o],s=t[a];(i?-1!==e.indexOf(a):e(a,s,t))&&(n[a]=s)}return n}},function(t,e,n){var r=n(345),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,(function(t,n,r,i){e.push(r?i.replace(o,"$1"):n||t)})),e}));t.exports=a},function(t,e,n){var r=n(346);t.exports=function(t){var e=r(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},function(t,e,n){var r=n(171);function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(i.Cache||r),n}i.Cache=r,t.exports=i},function(t,e,n){var r=n(348),i=n(135),o=n(173);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},function(t,e,n){var r=n(349),i=n(354),o=n(355),a=n(356),s=n(357);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,t.exports=l},function(t,e,n){var r=n(134);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e,n){var r=n(172),i=n(351),o=n(74),a=n(212),s=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,h=c.hasOwnProperty,d=RegExp("^"+u.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||i(t))&&(r(t)?d:s).test(a(t))}},function(t,e,n){var r,i=n(352),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!o&&o in t}},function(t,e,n){var r=n(73)["__core-js_shared__"];t.exports=r},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var r=n(134),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(e,t)?e[t]:void 0}},function(t,e,n){var r=n(134),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},function(t,e,n){var r=n(134);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(136),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0)&&(n==e.length-1?e.pop():i.call(e,n,1),--this.size,!0)}},function(t,e,n){var r=n(136);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(136);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(136);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},function(t,e,n){var r=n(137);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var r=n(137);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){var r=n(137);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){var r=n(137);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},function(t,e,n){var r=n(138),i=n(213),o=n(215),a=n(375),s=n(74),l=n(120),c=n(222);t.exports=function t(e,n,u,h,d){e!==n&&o(n,(function(o,l){if(d||(d=new r),s(o))a(e,n,l,u,t,h,d);else{var p=h?h(c(e,l),o,l+"",e,n,d):void 0;void 0===p&&(p=o),i(e,l,p)}}),l)}},function(t,e,n){var r=n(135);t.exports=function(){this.__data__=new r,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(135),i=n(173),o=n(171);t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!i||a.length<199)return a.push([t,e]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(t,e),this.size=n.size,this}},function(t,e){t.exports=function(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var l=a[t?s:++i];if(!1===n(o[l],l,o))break}return e}}},function(t,e,n){var r=n(213),i=n(216),o=n(217),a=n(219),s=n(220),l=n(116),c=n(51),u=n(117),h=n(118),d=n(172),p=n(74),f=n(379),m=n(141),g=n(222),y=n(381);t.exports=function(t,e,n,v,_,b,x){var w=g(t,n),E=g(e,n),C=x.get(E);if(C)r(t,n,C);else{var S=b?b(w,E,n+"",t,e,x):void 0,T=void 0===S;if(T){var O=c(E),I=!O&&h(E),A=!O&&!I&&m(E);S=E,O||I||A?c(w)?S=w:u(w)?S=a(w):I?(T=!1,S=i(E,!0)):A?(T=!1,S=o(E,!0)):S=[]:f(E)||l(E)?(S=w,l(w)?S=y(w):p(w)&&!d(w)||(S=s(E))):T=!1}T&&(x.set(E,S),_(S,E,v,b,x),x.delete(E)),r(t,n,S)}}},function(t,e,n){var r=n(74),i=Object.create,o=function(){function t(){}return function(e){if(!r(e))return{};if(i)return i(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=o},function(t,e,n){var r=n(101),i=n(64);t.exports=function(t){return i(t)&&"[object Arguments]"==r(t)}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var r=n(101),i=n(175),o=n(64),a=Function.prototype,s=Object.prototype,l=a.toString,c=s.hasOwnProperty,u=l.call(Object);t.exports=function(t){if(!o(t)||"[object Object]"!=r(t))return!1;var e=i(t);if(null===e)return!0;var n=c.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==u}},function(t,e,n){var r=n(101),i=n(176),o=n(64),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&i(t.length)&&!!a[r(t)]}},function(t,e,n){var r=n(119),i=n(120);t.exports=function(t){return r(t,i(t))}},function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e,n){var r=n(74),i=n(140),o=n(384),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=i(t),n=[];for(var s in t)("constructor"!=s||!e&&a.call(t,s))&&n.push(s);return n}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,e,n){var r=n(103),i=n(226);t.exports=function(t){return r((function(e,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,s=o>2?n[2]:void 0;for(a=t.length>3&&"function"==typeof a?(o--,a):void 0,s&&i(n[0],n[1],s)&&(a=o<3?void 0:a,o=1),e=Object(e);++r<o;){var l=n[r];l&&t(e,l,r,a)}return e}))}},function(t,e){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},function(t,e,n){var r=n(388),i=n(214),o=n(143),a=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:o;t.exports=a},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e){var n=Date.now;t.exports=function(t){var e=0,r=0;return function(){var i=n(),o=16-(i-r);if(r=i,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e,n){var r=n(200);t.exports=function(t){if(Array.isArray(t))return r(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=function(t){"use strict";var e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof h?e:h,o=Object.create(i.prototype),a=new E(r||[]);return o._invoke=function(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return S()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=b(a,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=c(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,a),o}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var u={};function h(){}function d(){}function p(){}var f={};s(f,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(C([])));g&&g!==e&&n.call(g,i)&&(f=g);var y=p.prototype=h.prototype=Object.create(f);function v(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){var r;this._invoke=function(i,o){function a(){return new e((function(r,a){!function r(i,o,a,s){var l=c(t[i],t,o);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(l.arg)}(i,o,r,a)}))}return r=r?r.then(a,a):a()}}function b(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=c(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,u;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function C(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=p,s(y,"constructor",p),s(p,"constructor",d),d.displayName=s(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},v(_.prototype),s(_.prototype,o,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new _(l(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(y),s(y,a,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=C,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),w(n),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;w(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:C(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},t}(t.exports);try{regeneratorRuntime=r}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(t,e,n){var r=n(138),i=n(395),o=n(178),a=n(396),s=n(398),l=n(216),c=n(219),u=n(399),h=n(401),d=n(230),p=n(232),f=n(122),m=n(405),g=n(406),y=n(220),v=n(51),_=n(118),b=n(410),x=n(74),w=n(412),E=n(121),C=n(120),S={};S["[object Arguments]"]=S["[object Array]"]=S["[object ArrayBuffer]"]=S["[object DataView]"]=S["[object Boolean]"]=S["[object Date]"]=S["[object Float32Array]"]=S["[object Float64Array]"]=S["[object Int8Array]"]=S["[object Int16Array]"]=S["[object Int32Array]"]=S["[object Map]"]=S["[object Number]"]=S["[object Object]"]=S["[object RegExp]"]=S["[object Set]"]=S["[object String]"]=S["[object Symbol]"]=S["[object Uint8Array]"]=S["[object Uint8ClampedArray]"]=S["[object Uint16Array]"]=S["[object Uint32Array]"]=!0,S["[object Error]"]=S["[object Function]"]=S["[object WeakMap]"]=!1,t.exports=function t(e,n,T,O,I,A){var M,k=1&n,P=2&n,D=4&n;if(T&&(M=I?T(e,O,I,A):T(e)),void 0!==M)return M;if(!x(e))return e;var R=v(e);if(R){if(M=m(e),!k)return c(e,M)}else{var L=f(e),N="[object Function]"==L||"[object GeneratorFunction]"==L;if(_(e))return l(e,k);if("[object Object]"==L||"[object Arguments]"==L||N&&!I){if(M=P||N?{}:y(e),!k)return P?h(e,s(M,e)):u(e,a(M,e))}else{if(!S[L])return I?e:{};M=g(e,L,k)}}A||(A=new r);var j=A.get(e);if(j)return j;A.set(e,M),w(e)?e.forEach((function(r){M.add(t(r,n,T,r,e,A))})):b(e)&&e.forEach((function(r,i){M.set(i,t(r,n,T,i,e,A))}));var F=R?void 0:(D?P?p:d:P?C:E)(e);return i(F||e,(function(r,i){F&&(r=e[i=r]),o(M,i,t(r,n,T,i,e,A))})),M}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},function(t,e,n){var r=n(119),i=n(121);t.exports=function(t,e){return t&&r(e,i(e),t)}},function(t,e,n){var r=n(221)(Object.keys,Object);t.exports=r},function(t,e,n){var r=n(119),i=n(120);t.exports=function(t,e){return t&&r(e,i(e),t)}},function(t,e,n){var r=n(119),i=n(179);t.exports=function(t,e){return r(t,i(t),e)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}},function(t,e,n){var r=n(119),i=n(229);t.exports=function(t,e){return r(t,i(t),e)}},function(t,e,n){var r=n(89)(n(73),"DataView");t.exports=r},function(t,e,n){var r=n(89)(n(73),"Promise");t.exports=r},function(t,e,n){var r=n(89)(n(73),"WeakMap");t.exports=r},function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&n.call(t,"index")&&(r.index=t.index,r.input=t.input),r}},function(t,e,n){var r=n(174),i=n(407),o=n(408),a=n(409),s=n(217);t.exports=function(t,e,n){var l=t.constructor;switch(e){case"[object ArrayBuffer]":return r(t);case"[object Boolean]":case"[object Date]":return new l(+t);case"[object DataView]":return i(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(t,n);case"[object Map]":return new l;case"[object Number]":case"[object String]":return new l(t);case"[object RegExp]":return o(t);case"[object Set]":return new l;case"[object Symbol]":return a(t)}}},function(t,e,n){var r=n(174);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},function(t,e){var n=/\w*$/;t.exports=function(t){var e=new t.constructor(t.source,n.exec(t));return e.lastIndex=t.lastIndex,e}},function(t,e,n){var r=n(99),i=r?r.prototype:void 0,o=i?i.valueOf:void 0;t.exports=function(t){return o?Object(o.call(t)):{}}},function(t,e,n){var r=n(411),i=n(102),o=n(177),a=o&&o.isMap,s=a?i(a):r;t.exports=s},function(t,e,n){var r=n(122),i=n(64);t.exports=function(t){return i(t)&&"[object Map]"==r(t)}},function(t,e,n){var r=n(413),i=n(102),o=n(177),a=o&&o.isSet,s=a?i(a):r;t.exports=s},function(t,e,n){var r=n(122),i=n(64);t.exports=function(t){return i(t)&&"[object Set]"==r(t)}},function(t,e){t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(417),i=n(418),o=n(419);t.exports=function(t,e,n){return e==e?o(t,e,n):r(t,i,n)}},function(t,e){t.exports=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}},function(t,e){t.exports=function(t){return t!=t}},function(t,e){t.exports=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}},function(t,e,n){var r=n(233),i=n(421),o=n(184),a=r&&1/o(new r([,-0]))[1]==1/0?function(t){return new r(t)}:i;t.exports=a},function(t,e){t.exports=function(){}},function(t,e,n){var r=n(423),i=n(429),o=n(237);t.exports=function(t){var e=i(t);return 1==e.length&&e[0][2]?o(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},function(t,e,n){var r=n(138),i=n(234);t.exports=function(t,e,n,o){var a=n.length,s=a,l=!o;if(null==t)return!s;for(t=Object(t);a--;){var c=n[a];if(l&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++a<s;){var u=(c=n[a])[0],h=t[u],d=c[1];if(l&&c[2]){if(void 0===h&&!(u in t))return!1}else{var p=new r;if(o)var f=o(h,d,u,t,e,p);if(!(void 0===f?i(d,h,3,o,p):f))return!1}}return!0}},function(t,e,n){var r=n(138),i=n(235),o=n(426),a=n(428),s=n(122),l=n(51),c=n(118),u=n(141),h="[object Object]",d=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,p,f,m){var g=l(t),y=l(e),v=g?"[object Array]":s(t),_=y?"[object Array]":s(e),b=(v="[object Arguments]"==v?h:v)==h,x=(_="[object Arguments]"==_?h:_)==h,w=v==_;if(w&&c(t)){if(!c(e))return!1;g=!0,b=!1}if(w&&!b)return m||(m=new r),g||u(t)?i(t,e,n,p,f,m):o(t,e,v,n,p,f,m);if(!(1&n)){var E=b&&d.call(t,"__wrapped__"),C=x&&d.call(e,"__wrapped__");if(E||C){var S=E?t.value():t,T=C?e.value():e;return m||(m=new r),f(S,T,n,p,m)}}return!!w&&(m||(m=new r),a(t,e,n,p,f,m))}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},function(t,e,n){var r=n(99),i=n(218),o=n(114),a=n(235),s=n(427),l=n(184),c=r?r.prototype:void 0,u=c?c.valueOf:void 0;t.exports=function(t,e,n,r,c,h,d){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!h(new i(t),new i(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var p=s;case"[object Set]":var f=1&r;if(p||(p=l),t.size!=e.size&&!f)return!1;var m=d.get(t);if(m)return m==e;r|=2,d.set(t,e);var g=a(p(t),p(e),r,c,h,d);return d.delete(t),g;case"[object Symbol]":if(u)return u.call(t)==u.call(e)}return!1}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}},function(t,e,n){var r=n(230),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,o,a,s){var l=1&n,c=r(t),u=c.length;if(u!=r(e).length&&!l)return!1;for(var h=u;h--;){var d=c[h];if(!(l?d in e:i.call(e,d)))return!1}var p=s.get(t),f=s.get(e);if(p&&f)return p==e&&f==t;var m=!0;s.set(t,e),s.set(e,t);for(var g=l;++h<u;){var y=t[d=c[h]],v=e[d];if(o)var _=l?o(v,y,d,e,t,s):o(y,v,d,t,e,s);if(!(void 0===_?y===v||a(y,v,n,o,s):_)){m=!1;break}g||(g="constructor"==d)}if(m&&!g){var b=t.constructor,x=e.constructor;b==x||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof x&&x instanceof x||(m=!1)}return s.delete(t),s.delete(e),m}},function(t,e,n){var r=n(236),i=n(121);t.exports=function(t){for(var e=i(t),n=e.length;n--;){var o=e[n],a=t[o];e[n]=[o,a,r(a)]}return e}},function(t,e,n){var r=n(234),i=n(18),o=n(238),a=n(170),s=n(236),l=n(237),c=n(115);t.exports=function(t,e){return a(t)&&s(e)?l(c(t),e):function(n){var a=i(n,t);return void 0===a&&a===e?o(n,t):r(e,a,3)}}},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,n){var r=n(133),i=n(116),o=n(51),a=n(142),s=n(176),l=n(115);t.exports=function(t,e,n){for(var c=-1,u=(e=r(e,t)).length,h=!1;++c<u;){var d=l(e[c]);if(!(h=null!=t&&n(t,d)))break;t=t[d]}return h||++c!=u?h:!!(u=null==t?0:t.length)&&s(u)&&a(d,u)&&(o(t)||i(t))}},function(t,e,n){var r=n(434),i=n(435),o=n(170),a=n(115);t.exports=function(t){return o(t)?r(a(t)):i(t)}},function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(t,e,n){var r=n(132);t.exports=function(t){return function(e){return r(e,t)}}},function(t,e,n){var r=n(178),i=n(133),o=n(142),a=n(74),s=n(115);t.exports=function(t,e,n,l){if(!a(t))return t;for(var c=-1,u=(e=i(e,t)).length,h=u-1,d=t;null!=d&&++c<u;){var p=s(e[c]),f=n;if("__proto__"===p||"constructor"===p||"prototype"===p)return t;if(c!=h){var m=d[p];void 0===(f=l?l(m,p,d):void 0)&&(f=a(m)?m:o(e[c+1])?[]:{})}r(d,p,f),d=d[p]}return t}},function(t,e,n){var r=n(144),i=n(182),o=n(183),a=n(100),s=n(102),l=n(145),c=Math.min;t.exports=function(t,e,n){for(var u=n?o:i,h=t[0].length,d=t.length,p=d,f=Array(d),m=1/0,g=[];p--;){var y=t[p];p&&e&&(y=a(y,s(e))),m=c(y.length,m),f[p]=!n&&(e||h>=120&&y.length>=120)?new r(p&&y):void 0}y=t[0];var v=-1,_=f[0];t:for(;++v<h&&g.length<m;){var b=y[v],x=e?e(b):b;if(b=n||0!==b?b:0,!(_?l(_,x):u(g,x,n))){for(p=d;--p;){var w=f[p];if(!(w?l(w,x):u(t[p],x,n)))continue t}_&&_.push(x),g.push(b)}}return g}},function(t,e,n){var r=n(117);t.exports=function(t){return r(t)?t:[]}},function(t,e,n){"use strict";const r=t=>t&&t.includeBoundaries?"(?:(?<=\\s|^)(?=[a-fA-F\\d:])|(?<=[a-fA-F\\d:])(?=\\s|$))":"",i="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",o="[a-fA-F\\d]{1,4}",a=`\n(?:\n(?:${o}:){7}(?:${o}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:${o}:){6}(?:${i}|:${o}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:${o}:){5}(?::${i}|(?::${o}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:${o}:){4}(?:(?::${o}){0,1}:${i}|(?::${o}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:${o}:){3}(?:(?::${o}){0,2}:${i}|(?::${o}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:${o}:){2}(?:(?::${o}){0,3}:${i}|(?::${o}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:${o}:){1}(?:(?::${o}){0,4}:${i}|(?::${o}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::(?:(?::${o}){0,5}:${i}|(?::${o}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1\n`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),s=new RegExp(`(?:^${i}$)|(?:^${a}$)`),l=new RegExp(`^${i}$`),c=new RegExp(`^${a}$`),u=t=>t&&t.exact?s:new RegExp(`(?:${r(t)}${i}${r(t)})|(?:${r(t)}${a}${r(t)})`,"g");u.v4=t=>t&&t.exact?l:new RegExp(`${r(t)}${i}${r(t)}`,"g"),u.v6=t=>t&&t.exact?c:new RegExp(`${r(t)}${a}${r(t)}`,"g"),t.exports=u},function(t){t.exports=JSON.parse('["aaa","aarp","abarth","abb","abbott","abbvie","abc","able","abogado","abudhabi","ac","academy","accenture","accountant","accountants","aco","actor","ad","adac","ads","adult","ae","aeg","aero","aetna","af","afl","africa","ag","agakhan","agency","ai","aig","airbus","airforce","airtel","akdn","al","alfaromeo","alibaba","alipay","allfinanz","allstate","ally","alsace","alstom","am","amazon","americanexpress","americanfamily","amex","amfam","amica","amsterdam","analytics","android","anquan","anz","ao","aol","apartments","app","apple","aq","aquarelle","ar","arab","aramco","archi","army","arpa","art","arte","as","asda","asia","associates","at","athleta","attorney","au","auction","audi","audible","audio","auspost","author","auto","autos","avianca","aw","aws","ax","axa","az","azure","ba","baby","baidu","banamex","bananarepublic","band","bank","bar","barcelona","barclaycard","barclays","barefoot","bargains","baseball","basketball","bauhaus","bayern","bb","bbc","bbt","bbva","bcg","bcn","bd","be","beats","beauty","beer","bentley","berlin","best","bestbuy","bet","bf","bg","bh","bharti","bi","bible","bid","bike","bing","bingo","bio","biz","bj","black","blackfriday","blockbuster","blog","bloomberg","blue","bm","bms","bmw","bn","bnpparibas","bo","boats","boehringer","bofa","bom","bond","boo","book","booking","bosch","bostik","boston","bot","boutique","box","br","bradesco","bridgestone","broadway","broker","brother","brussels","bs","bt","budapest","bugatti","build","builders","business","buy","buzz","bv","bw","by","bz","bzh","ca","cab","cafe","cal","call","calvinklein","cam","camera","camp","cancerresearch","canon","capetown","capital","capitalone","car","caravan","cards","care","career","careers","cars","casa","case","cash","casino","cat","catering","catholic","cba","cbn","cbre","cbs","cc","cd","center","ceo","cern","cf","cfa","cfd","cg","ch","chanel","channel","charity","chase","chat","cheap","chintai","christmas","chrome","church","ci","cipriani","circle","cisco","citadel","citi","citic","city","cityeats","ck","cl","claims","cleaning","click","clinic","clinique","clothing","cloud","club","clubmed","cm","cn","co","coach","codes","coffee","college","cologne","com","comcast","commbank","community","company","compare","computer","comsec","condos","construction","consulting","contact","contractors","cooking","cookingchannel","cool","coop","corsica","country","coupon","coupons","courses","cpa","cr","credit","creditcard","creditunion","cricket","crown","crs","cruise","cruises","csc","cu","cuisinella","cv","cw","cx","cy","cymru","cyou","cz","dabur","dad","dance","data","date","dating","datsun","day","dclk","dds","de","deal","dealer","deals","degree","delivery","dell","deloitte","delta","democrat","dental","dentist","desi","design","dev","dhl","diamonds","diet","digital","direct","directory","discount","discover","dish","diy","dj","dk","dm","dnp","do","docs","doctor","dog","domains","dot","download","drive","dtv","dubai","dunlop","dupont","durban","dvag","dvr","dz","earth","eat","ec","eco","edeka","edu","education","ee","eg","email","emerck","energy","engineer","engineering","enterprises","epson","equipment","er","ericsson","erni","es","esq","estate","et","etisalat","eu","eurovision","eus","events","exchange","expert","exposed","express","extraspace","fage","fail","fairwinds","faith","family","fan","fans","farm","farmers","fashion","fast","fedex","feedback","ferrari","ferrero","fi","fiat","fidelity","fido","film","final","finance","financial","fire","firestone","firmdale","fish","fishing","fit","fitness","fj","fk","flickr","flights","flir","florist","flowers","fly","fm","fo","foo","food","foodnetwork","football","ford","forex","forsale","forum","foundation","fox","fr","free","fresenius","frl","frogans","frontdoor","frontier","ftr","fujitsu","fun","fund","furniture","futbol","fyi","ga","gal","gallery","gallo","gallup","game","games","gap","garden","gay","gb","gbiz","gd","gdn","ge","gea","gent","genting","george","gf","gg","ggee","gh","gi","gift","gifts","gives","giving","gl","glass","gle","global","globo","gm","gmail","gmbh","gmo","gmx","gn","godaddy","gold","goldpoint","golf","goo","goodyear","goog","google","gop","got","gov","gp","gq","gr","grainger","graphics","gratis","green","gripe","grocery","group","gs","gt","gu","guardian","gucci","guge","guide","guitars","guru","gw","gy","hair","hamburg","hangout","haus","hbo","hdfc","hdfcbank","health","healthcare","help","helsinki","here","hermes","hgtv","hiphop","hisamitsu","hitachi","hiv","hk","hkt","hm","hn","hockey","holdings","holiday","homedepot","homegoods","homes","homesense","honda","horse","hospital","host","hosting","hot","hoteles","hotels","hotmail","house","how","hr","hsbc","ht","hu","hughes","hyatt","hyundai","ibm","icbc","ice","icu","id","ie","ieee","ifm","ikano","il","im","imamat","imdb","immo","immobilien","in","inc","industries","infiniti","info","ing","ink","institute","insurance","insure","int","international","intuit","investments","io","ipiranga","iq","ir","irish","is","ismaili","ist","istanbul","it","itau","itv","jaguar","java","jcb","je","jeep","jetzt","jewelry","jio","jll","jm","jmp","jnj","jo","jobs","joburg","jot","joy","jp","jpmorgan","jprs","juegos","juniper","kaufen","kddi","ke","kerryhotels","kerrylogistics","kerryproperties","kfh","kg","kh","ki","kia","kim","kinder","kindle","kitchen","kiwi","km","kn","koeln","komatsu","kosher","kp","kpmg","kpn","kr","krd","kred","kuokgroup","kw","ky","kyoto","kz","la","lacaixa","lamborghini","lamer","lancaster","lancia","land","landrover","lanxess","lasalle","lat","latino","latrobe","law","lawyer","lb","lc","lds","lease","leclerc","lefrak","legal","lego","lexus","lgbt","li","lidl","life","lifeinsurance","lifestyle","lighting","like","lilly","limited","limo","lincoln","linde","link","lipsy","live","living","lk","llc","llp","loan","loans","locker","locus","loft","lol","london","lotte","lotto","love","lpl","lplfinancial","lr","ls","lt","ltd","ltda","lu","lundbeck","luxe","luxury","lv","ly","ma","macys","madrid","maif","maison","makeup","man","management","mango","map","market","marketing","markets","marriott","marshalls","maserati","mattel","mba","mc","mckinsey","md","me","med","media","meet","melbourne","meme","memorial","men","menu","merckmsd","mg","mh","miami","microsoft","mil","mini","mint","mit","mitsubishi","mk","ml","mlb","mls","mm","mma","mn","mo","mobi","mobile","moda","moe","moi","mom","monash","money","monster","mormon","mortgage","moscow","moto","motorcycles","mov","movie","mp","mq","mr","ms","msd","mt","mtn","mtr","mu","museum","music","mutual","mv","mw","mx","my","mz","na","nab","nagoya","name","natura","navy","nba","nc","ne","nec","net","netbank","netflix","network","neustar","new","news","next","nextdirect","nexus","nf","nfl","ng","ngo","nhk","ni","nico","nike","nikon","ninja","nissan","nissay","nl","no","nokia","northwesternmutual","norton","now","nowruz","nowtv","np","nr","nra","nrw","ntt","nu","nyc","nz","obi","observer","office","okinawa","olayan","olayangroup","oldnavy","ollo","om","omega","one","ong","onl","online","ooo","open","oracle","orange","org","organic","origins","osaka","otsuka","ott","ovh","pa","page","panasonic","paris","pars","partners","parts","party","passagens","pay","pccw","pe","pet","pf","pfizer","pg","ph","pharmacy","phd","philips","phone","photo","photography","photos","physio","pics","pictet","pictures","pid","pin","ping","pink","pioneer","pizza","pk","pl","place","play","playstation","plumbing","plus","pm","pn","pnc","pohl","poker","politie","porn","post","pr","pramerica","praxi","press","prime","pro","prod","productions","prof","progressive","promo","properties","property","protection","pru","prudential","ps","pt","pub","pw","pwc","py","qa","qpon","quebec","quest","racing","radio","re","read","realestate","realtor","realty","recipes","red","redstone","redumbrella","rehab","reise","reisen","reit","reliance","ren","rent","rentals","repair","report","republican","rest","restaurant","review","reviews","rexroth","rich","richardli","ricoh","ril","rio","rip","ro","rocher","rocks","rodeo","rogers","room","rs","rsvp","ru","rugby","ruhr","run","rw","rwe","ryukyu","sa","saarland","safe","safety","sakura","sale","salon","samsclub","samsung","sandvik","sandvikcoromant","sanofi","sap","sarl","sas","save","saxo","sb","sbi","sbs","sc","sca","scb","schaeffler","schmidt","scholarships","school","schule","schwarz","science","scot","sd","se","search","seat","secure","security","seek","select","sener","services","ses","seven","sew","sex","sexy","sfr","sg","sh","shangrila","sharp","shaw","shell","shia","shiksha","shoes","shop","shopping","shouji","show","showtime","si","silk","sina","singles","site","sj","sk","ski","skin","sky","skype","sl","sling","sm","smart","smile","sn","sncf","so","soccer","social","softbank","software","sohu","solar","solutions","song","sony","soy","spa","space","sport","spot","sr","srl","ss","st","stada","staples","star","statebank","statefarm","stc","stcgroup","stockholm","storage","store","stream","studio","study","style","su","sucks","supplies","supply","support","surf","surgery","suzuki","sv","swatch","swiss","sx","sy","sydney","systems","sz","tab","taipei","talk","taobao","target","tatamotors","tatar","tattoo","tax","taxi","tc","tci","td","tdk","team","tech","technology","tel","temasek","tennis","teva","tf","tg","th","thd","theater","theatre","tiaa","tickets","tienda","tiffany","tips","tires","tirol","tj","tjmaxx","tjx","tk","tkmaxx","tl","tm","tmall","tn","to","today","tokyo","tools","top","toray","toshiba","total","tours","town","toyota","toys","tr","trade","trading","training","travel","travelchannel","travelers","travelersinsurance","trust","trv","tt","tube","tui","tunes","tushu","tv","tvs","tw","tz","ua","ubank","ubs","ug","uk","unicom","university","uno","uol","ups","us","uy","uz","va","vacations","vana","vanguard","vc","ve","vegas","ventures","verisign","vermögensberater","vermögensberatung","versicherung","vet","vg","vi","viajes","video","vig","viking","villas","vin","vip","virgin","visa","vision","viva","vivo","vlaanderen","vn","vodka","volkswagen","volvo","vote","voting","voto","voyage","vu","vuelos","wales","walmart","walter","wang","wanggou","watch","watches","weather","weatherchannel","webcam","weber","website","wed","wedding","weibo","weir","wf","whoswho","wien","wiki","williamhill","win","windows","wine","winners","wme","wolterskluwer","woodside","work","works","world","wow","ws","wtc","wtf","xbox","xerox","xfinity","xihuan","xin","xxx","xyz","yachts","yahoo","yamaxun","yandex","ye","yodobashi","yoga","yokohama","you","youtube","yt","yun","za","zappos","zara","zero","zip","zm","zone","zuerich","zw","ελ","ευ","бг","бел","дети","ею","католик","ком","мкд","мон","москва","онлайн","орг","рус","рф","сайт","срб","укр","қаз","հայ","ישראל","קום","ابوظبي","اتصالات","ارامكو","الاردن","البحرين","الجزائر","السعودية","العليان","المغرب","امارات","ایران","بارت","بازار","بيتك","بھارت","تونس","سودان","سورية","شبكة","عراق","عرب","عمان","فلسطين","قطر","كاثوليك","كوم","مصر","مليسيا","موريتانيا","موقع","همراه","پاکستان","ڀارت","कॉम","नेट","भारत","भारतम्","भारोत","संगठन","বাংলা","ভারত","ভাৰত","ਭਾਰਤ","ભારત","ଭାରତ","இந்தியா","இலங்கை","சிங்கப்பூர்","భారత్","ಭಾರತ","ഭാരതം","ලංකා","คอม","ไทย","ລາວ","გე","みんな","アマゾン","クラウド","グーグル","コム","ストア","セール","ファッション","ポイント","世界","中信","中国","中國","中文网","亚马逊","企业","佛山","信息","健康","八卦","公司","公益","台湾","台灣","商城","商店","商标","嘉里","嘉里大酒店","在线","大拿","天主教","娱乐","家電","广东","微博","慈善","我爱你","手机","招聘","政务","政府","新加坡","新闻","时尚","書籍","机构","淡马锡","游戏","澳門","点看","移动","组织机构","网址","网店","网站","网络","联通","诺基亚","谷歌","购物","通販","集团","電訊盈科","飞利浦","食品","餐厅","香格里拉","香港","닷넷","닷컴","삼성","한국"]')},function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,c=l>>1,u=-7,h=n?i-1:0,d=n?-1:1,p=t[e+h];for(h+=d,o=p&(1<<-u)-1,p>>=-u,u+=s;u>0;o=256*o+t[e+h],h+=d,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;u>0;a=256*a+t[e+h],h+=d,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=c}return(p?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,l,c=8*o-i-1,u=(1<<c)-1,h=u>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,f=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(e*l-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[n+p]=255&s,p+=f,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[n+p]=255&a,p+=f,a/=256,c-=8);t[n+p-f]|=128*m}},function(t,e,n){var r=n(443),i=n(444),o=n(146),a=n(51);t.exports=function(t,e){return function(n,s){var l=a(n)?r:i,c=e?e():{};return l(n,t,o(s,2),c)}}},function(t,e){t.exports=function(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}},function(t,e,n){var r=n(240);t.exports=function(t,e,n,i){return r(t,(function(t,r,o){e(i,t,n(t),o)})),i}},function(t,e,n){var r=n(215),i=n(121);t.exports=function(t,e){return t&&r(t,e,i)}},function(t,e,n){var r=n(90);t.exports=function(t,e){return function(n,i){if(null==n)return n;if(!r(n))return t(n,i);for(var o=n.length,a=e?o:-1,s=Object(n);(e?a--:++a<o)&&!1!==i(s[a],a,s););return n}}},function(t,e,n){var r=n(99),i=n(116),o=n(51),a=r?r.isConcatSpreadable:void 0;t.exports=function(t){return o(t)||i(t)||!!(a&&t&&t[a])}},function(t,e){t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},function(t,e,n){var r=n(239),i=n(238);t.exports=function(t,e){return r(t,e,(function(e,n){return i(t,n)}))}},function(t,e,n){var r=n(451),i=n(224),o=n(225);t.exports=function(t){return o(i(t,void 0,r),t+"")}},function(t,e,n){var r=n(147);t.exports=function(t){return(null==t?0:t.length)?r(t,1):[]}},function(t,e,n){var r=n(144),i=n(182),o=n(183),a=n(100),s=n(102),l=n(145);t.exports=function(t,e,n,c){var u=-1,h=i,d=!0,p=t.length,f=[],m=e.length;if(!p)return f;n&&(e=a(e,s(n))),c?(h=o,d=!1):e.length>=200&&(h=l,d=!1,e=new r(e));t:for(;++u<p;){var g=t[u],y=null==n?g:n(g);if(g=c||0!==g?g:0,d&&y==y){for(var v=m;v--;)if(e[v]===y)continue t;f.push(g)}else h(e,y,c)||f.push(g)}return f}},function(t,e,n){var r=n(100),i=n(132),o=n(146),a=n(454),s=n(455),l=n(102),c=n(456),u=n(143),h=n(51);t.exports=function(t,e,n){e=e.length?r(e,(function(t){return h(t)?function(e){return i(e,1===t.length?t[0]:t)}:t})):[u];var d=-1;e=r(e,l(o));var p=a(t,(function(t,n,i){return{criteria:r(e,(function(e){return e(t)})),index:++d,value:t}}));return s(p,(function(t,e){return c(t,e,n)}))}},function(t,e,n){var r=n(240),i=n(90);t.exports=function(t,e){var n=-1,o=i(t)?Array(t.length):[];return r(t,(function(t,r,i){o[++n]=e(t,r,i)})),o}},function(t,e){t.exports=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}},function(t,e,n){var r=n(457);t.exports=function(t,e,n){for(var i=-1,o=t.criteria,a=e.criteria,s=o.length,l=n.length;++i<s;){var c=r(o[i],a[i]);if(c)return i>=l?c:c*("desc"==n[i]?-1:1)}return t.index-e.index}},function(t,e,n){var r=n(128);t.exports=function(t,e){if(t!==e){var n=void 0!==t,i=null===t,o=t==t,a=r(t),s=void 0!==e,l=null===e,c=e==e,u=r(e);if(!l&&!u&&!a&&t>e||a&&s&&c&&!l&&!u||i&&s&&c||!n&&c||!o)return 1;if(!i&&!a&&!u&&t<e||u&&n&&o&&!i&&!a||l&&n&&o||!s&&o||!c)return-1}return 0}},function(t,e,n){"use strict";n.r(e),n.d(e,"Button",(function(){return pr})),n.d(e,"ButtonGroup",(function(){return fr})),n.d(e,"FilterButton",(function(){return mr})),n.d(e,"Switch",(function(){return _r})),n.d(e,"Checkbox",(function(){return Lr})),n.d(e,"Test",(function(){return Nr})),n.d(e,"Input",(function(){return Fr})),n.d(e,"Popover",(function(){return la})),n.d(e,"StripeLoader",(function(){return pa})),n.d(e,"Autocomplete",(function(){return ds})),n.d(e,"Tabs",(function(){return Fl})),n.d(e,"Row",(function(){return Zl})),n.d(e,"Col",(function(){return $l})),n.d(e,"Menu",(function(){return Jc})),n.d(e,"MenuAction",(function(){return tu})),n.d(e,"MenuToggle",(function(){return Qc})),n.d(e,"DataTable",(function(){return ap})),n.d(e,"Th",(function(){return rp})),n.d(e,"Td",(function(){return ip})),n.d(e,"TBody",(function(){return np})),n.d(e,"Skeleton",(function(){return Id})),n.d(e,"Root",(function(){return ea})),n.d(e,"Gallery",(function(){return jp})),n.d(e,"GalleryCaption",(function(){return Np})),n.d(e,"GalleryTiles",(function(){return Fp})),n.d(e,"GalleryTile",(function(){return Lp})),n.d(e,"GalleryTileSkeleton",(function(){return Rp})),n.d(e,"ZoomableImage",(function(){return Sp})),n.d(e,"Accordion",(function(){return Kp})),n.d(e,"Properties",(function(){return uf})),n.d(e,"Tooltip",(function(){return Sd})),n.d(e,"Radio",(function(){return pf})),n.d(e,"Image",(function(){return cp})),n.d(e,"DetailsDrawer",(function(){return Sf})),n.d(e,"MajorRanks",(function(){return Mf})),n.d(e,"IconFeatures",(function(){return zf})),n.d(e,"HyperText",(function(){return rg})),n.d(e,"Progress",(function(){return sg})),n.d(e,"Classification",(function(){return If})),n.d(e,"Tag",(function(){return Eg})),n.d(e,"Tags",(function(){return wg})),n.d(e,"GadmClassification",(function(){return Sg})),n.d(e,"IdentifierBadge",(function(){return Zm})),n.d(e,"Doi",(function(){return $m})),n.d(e,"Eyebrow",(function(){return Mg})),n.d(e,"JazzIcon",(function(){return Dg})),n.d(e,"Prose",(function(){return zg})),n.d(e,"Toc",(function(){return sy})),n.d(e,"useToc",(function(){return oy})),n.d(e,"AltmetricDonut",(function(){return my})),n.d(e,"Message",(function(){return _y})),n.d(e,"ResourceLink",(function(){return Oy})),n.d(e,"PublisherKeyLink",(function(){return Iy})),n.d(e,"DatasetKeyLink",(function(){return Ay})),n.d(e,"ResourceSearchLink",(function(){return Ty})),n.d(e,"NavBar",(function(){return $y})),n.d(e,"NavItem",(function(){return Zy})),n.d(e,"DataHeader",(function(){return tv})),n.d(e,"ContactList",(function(){return dv})),n.d(e,"LicenseTag",(function(){return bv})),n.d(e,"OccurrenceMap",(function(){return e_})),n.d(e,"OccurrenceSearch",(function(){return hP})),n.d(e,"CollectionSearch",(function(){return zP})),n.d(e,"InstitutionSearch",(function(){return XP})),n.d(e,"LiteratureSearch",(function(){return cD})),n.d(e,"DatasetSearch",(function(){return xD})),n.d(e,"PublisherSearch",(function(){return FD})),n.d(e,"Collection",(function(){return BR})),n.d(e,"Institution",(function(){return SL})),n.d(e,"Dataset",(function(){return gj})),n.d(e,"themeBuilder",(function(){return Ht}));var r={};n.r(r),n.d(r,"wrapper",(function(){return Md})),n.d(r,"occurrenceTable",(function(){return kd})),n.d(r,"footer",(function(){return Pd})),n.d(r,"footerItemBase",(function(){return Rd})),n.d(r,"footerItem",(function(){return Ld})),n.d(r,"table",(function(){return Nd})),n.d(r,"stickyColumn",(function(){return Fd})),n.d(r,"scrolled",(function(){return zd})),n.d(r,"footerText",(function(){return Bd})),n.d(r,"cell",(function(){return Gd})),n.d(r,"dataCell",(function(){return Vd})),n.d(r,"wide",(function(){return qd})),n.d(r,"noWrap",(function(){return Wd})),n.d(r,"tbodyLoading",(function(){return Zd})),n.d(r,"paper",(function(){return $d})),n.d(r,"ink",(function(){return Kd})),n.d(r,"default",(function(){return Yd}));var i=n(1),o=n.n(i),a=n(2),s=n.n(a),l=n(0),c=n.n(l);var u=function(){function t(t){var e=this;this._insertTag=function(t){var n;n=0===e.tags.length?e.insertionPoint?e.insertionPoint.nextSibling:e.prepend?e.container.firstChild:e.before:e.tags[e.tags.length-1].nextSibling,e.container.insertBefore(t,n),e.tags.push(t)},this.isSpeedy=void 0===t.speedy||t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(t){t.forEach(this._insertTag)},e.insert=function(t){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),void 0!==t.nonce&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}(this));var e=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}(e);try{n.insertRule(t,n.cssRules.length)}catch(t){0}}else e.appendChild(document.createTextNode(t));this.ctr++},e.flush=function(){this.tags.forEach((function(t){return t.parentNode&&t.parentNode.removeChild(t)})),this.tags=[],this.ctr=0},t}(),h="-webkit-",d=Math.abs,p=String.fromCharCode,f=Object.assign;function m(t){return t.trim()}function g(t,e,n){return t.replace(e,n)}function y(t,e){return t.indexOf(e)}function v(t,e){return 0|t.charCodeAt(e)}function b(t,e,n){return t.slice(e,n)}function x(t){return t.length}function w(t){return t.length}function E(t,e){return e.push(t),t}function C(t,e){return t.map(e).join("")}var S=1,T=1,O=0,I=0,A=0,M="";function k(t,e,n,r,i,o,a){return{value:t,root:e,parent:n,type:r,props:i,children:o,line:S,column:T,length:a,return:""}}function P(t,e){return f(k("",null,null,"",null,null,0),t,{length:-t.length},e)}function D(){return A=I<O?v(M,I++):0,T++,10===A&&(T=1,S++),A}function R(){return v(M,I)}function L(){return I}function N(t,e){return b(M,t,e)}function j(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function F(t){return S=T=1,O=x(M=t),I=0,[]}function z(t){return M="",t}function B(t){return m(N(I-1,function t(e){for(;D();)switch(A){case e:return I;case 34:case 39:34!==e&&39!==e&&t(A);break;case 40:41===e&&t(e);break;case 92:D()}return I}(91===t?t+2:40===t?t+1:t)))}function U(t){for(;(A=R())&&A<33;)D();return j(t)>2||j(A)>3?"":" "}function G(t,e){for(;--e&&D()&&!(A<48||A>102||A>57&&A<65||A>70&&A<97););return N(t,L()+(e<6&&32==R()&&32==D()))}function V(t,e){for(;D()&&t+A!==57&&(t+A!==84||47!==R()););return"/*"+N(e,I-1)+"*"+p(47===t?t:D())}function q(t){for(;!j(R());)D();return N(t,I)}function H(t){return z(function t(e,n,r,i,o,a,s,l,c){var u=0,h=0,d=s,f=0,m=0,_=0,b=1,w=1,C=1,O=0,k="",P=o,N=a,j=i,F=k;for(;w;)switch(_=O,O=D()){case 40:if(108!=_&&58==F.charCodeAt(d-1)){-1!=y(F+=g(B(O),"&","&\f"),"&\f")&&(C=-1);break}case 34:case 39:case 91:F+=B(O);break;case 9:case 10:case 13:case 32:F+=U(_);break;case 92:F+=G(L()-1,7);continue;case 47:switch(R()){case 42:case 47:E(Z(V(D(),L()),n,r),c);break;default:F+="/"}break;case 123*b:l[u++]=x(F)*C;case 125*b:case 59:case 0:switch(O){case 0:case 125:w=0;case 59+h:m>0&&x(F)-d&&E(m>32?$(F+";",i,r,d-1):$(g(F," ","")+";",i,r,d-2),c);break;case 59:F+=";";default:if(E(j=W(F,n,r,u,h,o,l,k,P=[],N=[],d),a),123===O)if(0===h)t(F,n,j,j,P,a,d,l,N);else switch(f){case 100:case 109:case 115:t(e,j,j,i&&E(W(e,j,j,0,0,o,l,k,o,P=[],d),N),o,N,d,l,i?P:N);break;default:t(F,j,j,j,[""],N,0,l,N)}}u=h=m=0,b=C=1,k=F="",d=s;break;case 58:d=1+x(F),m=_;default:if(b<1)if(123==O)--b;else if(125==O&&0==b++&&125==(A=I>0?v(M,--I):0,T--,10===A&&(T=1,S--),A))continue;switch(F+=p(O),O*b){case 38:C=h>0?1:(F+="\f",-1);break;case 44:l[u++]=(x(F)-1)*C,C=1;break;case 64:45===R()&&(F+=B(D())),f=R(),h=d=x(k=F+=q(L())),O++;break;case 45:45===_&&2==x(F)&&(b=0)}}return a}("",null,null,null,[""],t=F(t),0,[0],t))}function W(t,e,n,r,i,o,a,s,l,c,u){for(var h=i-1,p=0===i?o:[""],f=w(p),y=0,v=0,_=0;y<r;++y)for(var x=0,E=b(t,h+1,h=d(v=a[y])),C=t;x<f;++x)(C=m(v>0?p[x]+" "+E:g(E,/&\f/g,p[x])))&&(l[_++]=C);return k(t,e,n,0===i?"rule":s,l,c,u)}function Z(t,e,n){return k(t,e,n,"comm",p(A),b(t,2,-2),0)}function $(t,e,n,r){return k(t,e,n,"decl",b(t,0,r),b(t,r+1,-1),r)}function K(t,e){switch((((e<<2^v(n=t,0))<<2^v(n,1))<<2^v(n,2))<<2^v(n,3)){case 5103:return h+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return h+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return h+t+"-moz-"+t+"-ms-"+t+t;case 6828:case 4268:return h+t+"-ms-"+t+t;case 6165:return h+t+"-ms-flex-"+t+t;case 5187:return h+t+g(t,/(\w+).+(:[^]+)/,h+"box-$1$2-ms-flex-$1$2")+t;case 5443:return h+t+"-ms-flex-item-"+g(t,/flex-|-self/,"")+t;case 4675:return h+t+"-ms-flex-line-pack"+g(t,/align-content|flex-|-self/,"")+t;case 5548:return h+t+"-ms-"+g(t,"shrink","negative")+t;case 5292:return h+t+"-ms-"+g(t,"basis","preferred-size")+t;case 6060:return h+"box-"+g(t,"-grow","")+h+t+"-ms-"+g(t,"grow","positive")+t;case 4554:return h+g(t,/([^-])(transform)/g,"$1"+h+"$2")+t;case 6187:return g(g(g(t,/(zoom-|grab)/,h+"$1"),/(image-set)/,h+"$1"),t,"")+t;case 5495:case 3959:return g(t,/(image-set\([^]*)/,h+"$1$`$1");case 4968:return g(g(t,/(.+:)(flex-)?(.*)/,h+"box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+h+t+t;case 4095:case 3583:case 4068:case 2532:return g(t,/(.+)-inline(.+)/,h+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(x(t)-1-e>6)switch(v(t,e+1)){case 109:if(45!==v(t,e+4))break;case 102:return g(t,/(.+:)(.+)-([^]+)/,"$1"+h+"$2-$3$1-moz-"+(108==v(t,e+3)?"$3":"$2-$3"))+t;case 115:return~y(t,"stretch")?K(g(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(115!==v(t,e+1))break;case 6444:switch(v(t,x(t)-3-(~y(t,"!important")&&10))){case 107:return g(t,":",":"+h)+t;case 101:return g(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+h+(45===v(t,14)?"inline-":"")+"box$3$1"+h+"$2$3$1-ms-$2box$3")+t}break;case 5936:switch(v(t,e+11)){case 114:return h+t+"-ms-"+g(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return h+t+"-ms-"+g(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return h+t+"-ms-"+g(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return h+t+"-ms-"+t+t}var n;return t}function Y(t,e){for(var n="",r=w(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function X(t,e,n,r){switch(t.type){case"@import":case"decl":return t.return=t.return||t.value;case"comm":return"";case"@keyframes":return t.return=t.value+"{"+Y(t.children,r)+"}";case"rule":t.value=t.props.join(",")}return x(n=Y(t.children,r))?t.return=t.value+"{"+n+"}":""}var J=function(t){var e=Object.create(null);return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}},Q=function(t,e,n){for(var r=0,i=0;r=i,i=R(),38===r&&12===i&&(e[n]=1),!j(i);)D();return N(t,I)},tt=function(t,e){return z(function(t,e){var n=-1,r=44;do{switch(j(r)){case 0:38===r&&12===R()&&(e[n]=1),t[n]+=Q(I-1,e,n);break;case 2:t[n]+=B(r);break;case 4:if(44===r){t[++n]=58===R()?"&\f":"",e[n]=t[n].length;break}default:t[n]+=p(r)}}while(r=D());return t}(F(t),e))},et=new WeakMap,nt=function(t){if("rule"===t.type&&t.parent&&!(t.length<1)){for(var e=t.value,n=t.parent,r=t.column===n.column&&t.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==t.props.length||58===e.charCodeAt(0)||et.get(n))&&!r){et.set(t,!0);for(var i=[],o=tt(e,i),a=n.props,s=0,l=0;s<o.length;s++)for(var c=0;c<a.length;c++,l++)t.props[l]=i[s]?o[s].replace(/&\f/g,a[c]):a[c]+" "+o[s]}}},rt=function(t){if("decl"===t.type){var e=t.value;108===e.charCodeAt(0)&&98===e.charCodeAt(2)&&(t.return="",t.value="")}},it=[function(t,e,n,r){if(t.length>-1&&!t.return)switch(t.type){case"decl":t.return=K(t.value,t.length);break;case"@keyframes":return Y([P(t,{value:g(t.value,"@","@"+h)})],r);case"rule":if(t.length)return C(t.props,(function(e){switch((n=/(::plac\w+|:read-\w+)/.exec(n=e))?n[0]:n){case":read-only":case":read-write":return Y([P(t,{props:[g(e,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return Y([P(t,{props:[g(e,/:(plac\w+)/,":"+h+"input-$1")]}),P(t,{props:[g(e,/:(plac\w+)/,":-moz-$1")]}),P(t,{props:[g(e,/:(plac\w+)/,"-ms-input-$1")]})],r)}var n;return""}))}}],ot=function(t){var e=t.key;if("css"===e){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(t){-1!==t.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(t),t.setAttribute("data-s",""))}))}var r=t.stylisPlugins||it;var i,o,a={},s=[];i=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),(function(t){for(var e=t.getAttribute("data-emotion").split(" "),n=1;n<e.length;n++)a[e[n]]=!0;s.push(t)}));var l,c,h=[X,(c=function(t){l.insert(t)},function(t){t.root||(t=t.return)&&c(t)})],d=function(t){var e=w(t);return function(n,r,i,o){for(var a="",s=0;s<e;s++)a+=t[s](n,r,i,o)||"";return a}}([nt,rt].concat(r,h));o=function(t,e,n,r){l=n,Y(H(t?t+"{"+e.styles+"}":e.styles),d),r&&(p.inserted[e.name]=!0)};var p={key:e,sheet:new u({key:e,container:i,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:a,registered:{},insert:o};return p.sheet.hydrate(s),p};function at(){return(at=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var st=n(85),lt=n.n(st);function ct(t,e,n){var r="";return n.split(" ").forEach((function(n){void 0!==t[n]?e.push(t[n]+";"):r+=n+" "})),r}var ut=function(t,e,n){var r=t.key+"-"+e.name;if(!1===n&&void 0===t.registered[r]&&(t.registered[r]=e.styles),void 0===t.inserted[e.name]){var i=e;do{t.insert(e===i?"."+r:"",i,t.sheet,!0);i=i.next}while(void 0!==i)}};var ht=function(t){for(var e,n=0,r=0,i=t.length;i>=4;++r,i-=4)e=1540483477*(65535&(e=255&t.charCodeAt(r)|(255&t.charCodeAt(++r))<<8|(255&t.charCodeAt(++r))<<16|(255&t.charCodeAt(++r))<<24))+(59797*(e>>>16)<<16),n=1540483477*(65535&(e^=e>>>24))+(59797*(e>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&t.charCodeAt(r+2))<<16;case 2:n^=(255&t.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&t.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},dt={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},pt=/[A-Z]|^ms/g,ft=/_EMO_([^_]+?)_([^]*?)_EMO_/g,mt=function(t){return 45===t.charCodeAt(1)},gt=function(t){return null!=t&&"boolean"!=typeof t},yt=J((function(t){return mt(t)?t:t.replace(pt,"-$&").toLowerCase()})),vt=function(t,e){switch(t){case"animation":case"animationName":if("string"==typeof e)return e.replace(ft,(function(t,e,n){return bt={name:e,styles:n,next:bt},e}))}return 1===dt[t]||mt(t)||"number"!=typeof e||0===e?e:e+"px"};function _t(t,e,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return bt={name:n.name,styles:n.styles,next:bt},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)bt={name:r.name,styles:r.styles,next:bt},r=r.next;return n.styles+";"}return function(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=_t(t,e,n[i])+";";else for(var o in n){var a=n[o];if("object"!=typeof a)null!=e&&void 0!==e[a]?r+=o+"{"+e[a]+"}":gt(a)&&(r+=yt(o)+":"+vt(o,a)+";");else if(!Array.isArray(a)||"string"!=typeof a[0]||null!=e&&void 0!==e[a[0]]){var s=_t(t,e,a);switch(o){case"animation":case"animationName":r+=yt(o)+":"+s+";";break;default:r+=o+"{"+s+"}"}}else for(var l=0;l<a.length;l++)gt(a[l])&&(r+=yt(o)+":"+vt(o,a[l])+";")}return r}(t,e,n);case"function":if(void 0!==t){var i=bt,o=n(t);return bt=i,_t(t,e,o)}break;case"string":}if(null==e)return n;var a=e[n];return void 0!==a?a:n}var bt,xt=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var wt=function(t,e,n){if(1===t.length&&"object"==typeof t[0]&&null!==t[0]&&void 0!==t[0].styles)return t[0];var r=!0,i="";bt=void 0;var o=t[0];null==o||void 0===o.raw?(r=!1,i+=_t(n,e,o)):i+=o[0];for(var a=1;a<t.length;a++)i+=_t(n,e,t[a]),r&&(i+=o[a]);xt.lastIndex=0;for(var s,l="";null!==(s=xt.exec(i));)l+="-"+s[1];return{name:ht(i)+l,styles:i,next:bt}},Et={}.hasOwnProperty,Ct=Object(l.createContext)("undefined"!=typeof HTMLElement?ot({key:"css"}):null);Ct.Provider;var St=function(t){return Object(l.forwardRef)((function(e,n){var r=Object(l.useContext)(Ct);return t(e,r,n)}))},Tt=Object(l.createContext)({});var Ot="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",It=function(t,e){var n={};for(var r in e)Et.call(e,r)&&(n[r]=e[r]);return n[Ot]=t,n},At=function(){return null},Mt=St((function(t,e,n){var r=t.css;"string"==typeof r&&void 0!==e.registered[r]&&(r=e.registered[r]);var i=t[Ot],o=[r],a="";"string"==typeof t.className?a=ct(e.registered,o,t.className):null!=t.className&&(a=t.className+" ");var s=wt(o,void 0,Object(l.useContext)(Tt));ut(e,s,"string"==typeof i);a+=e.key+"-"+s.name;var c={};for(var u in t)Et.call(t,u)&&"css"!==u&&u!==Ot&&(c[u]=t[u]);c.ref=n,c.className=a;var h=Object(l.createElement)(i,c),d=Object(l.createElement)(At,null);return Object(l.createElement)(l.Fragment,null,d,h)}));var kt=function(t,e){var n=arguments;if(null==e||!Et.call(e,"css"))return l.createElement.apply(void 0,n);var r=n.length,i=new Array(r);i[0]=Mt,i[1]=It(t,e);for(var o=2;o<r;o++)i[o]=n[o];return l.createElement.apply(null,i)};function Pt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return wt(e)}var Dt=function(){var t=Pt.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};var Rt={name:"light",dense:!0,primary:"#1ea7fd",linkColor:"#1393D8",fontSize:"15px",background:"#f1f5f8",paperBackground:"#ffffff",paperBorderColor:"#e5ebed",color:"#162d3d",darkTheme:!1,fontFamily:'"Helvetica Neue", BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica", "Arial", sans-serif',borderRadius:3,drawerZIndex:1e3},Lt=n(3),Nt=n.n(Lt),jt=n(8),Ft=n.n(jt),zt=function(t,e){var n=parseInt(t.slice(1),16),r=e<0?0:255,i=e<0?-1*e:e,o=n>>16,a=n>>8&255,s=255&n;return"#"+(16777216+65536*(Math.round((r-o)*i)+o)+256*(Math.round((r-a)*i)+a)+(Math.round((r-s)*i)+s)).toString(16).slice(1)};function Bt(t,e,n){var r=t<0?-1*t:t,i=Math.round,o=parseInt;if(e.length>7){var a=e.split(","),s=(n||(t<0?"rgb(0,0,0)":"rgb(255,255,255)")).split(","),l=o(a[0].slice(4)),c=o(a[1]),u=o(a[2]);return"rgb("+(i((o(s[0].slice(4))-l)*r)+l)+","+(i((o(s[1])-c)*r)+c)+","+(i((o(s[2])-u)*r)+u)+")"}var h=(a=o(e.slice(1),16))>>16,d=a>>8&255,p=255&a;return"#"+(16777216+65536*(i((((s=o((n||(t<0?"#000000":"#FFFFFF")).slice(1),16))>>16)-h)*r)+h)+256*(i(((s>>8&255)-d)*r)+d)+(i(((255&s)-p)*r)+p)).toString(16).slice(1)}var Ut={name:"dark",dense:!0,primary:"#39af5d",fontSize:"14px",background:"#151515",paperBackground:"#2d2d2d",paperBackgroundElevated:"#3e3e3e",paperBorderColor:"#0b0d13",color:"#e3e5ea",darkTheme:!0,fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif',borderRadius:3};function Gt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Vt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Gt(Object(n),!0).forEach((function(e){Ft()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var qt=function(t){var e=Vt(Vt({},Rt),t),n=e.darkTheme?-1:1;e.borderRadiusPx=t.borderRadius+"px",e.primary500=t.primary,e.primary600=zt(e.primary,-.05),e.primary700=zt(e.primary,-.1),e.primary400=zt(e.primary,.05),e.primary300=zt(e.primary,.1),e.transparentInk40="".concat(e.color,"40"),e.transparentInk60="".concat(e.color,"60"),e.transparentInk20="".concat(e.color,"20"),e.transparentInk80="".concat(e.color,"80"),e.transparentInk50="".concat(e.color,"50"),[1,2,3,4,5,6,7,8,9].forEach((function(t){e["color".concat(10-t,"00")]=Bt(-1*n*t*.075,e.color,e.paperBackground)})),e.linkColor=t.linkColor||t.primary,e.headerFontFamily=t.headerFontFamily||t.fontFamily,[1,2,3,4].forEach((function(t){e["paperBackground".concat(5+t,"00")]=Bt(.25*-t,e.paperBackground,e.background),e["paperBackground".concat(5-t,"00")]=Bt(.25*t,e.paperBackground,e.paperBackgroundElevated),e.paperBackground500=e.paperBackground})),e.darkPaperBackground=e.darkTheme?"#000010":"#4e4e52";var r=["#fed976","#fd8d3c","#fd8d3c","#f03b20","#bd0026"],i=r;e.mapDensityColors||(e.mapDensityColors=e.darkTheme?i:r);for(var o={},a=0,s=Object.entries(e);a<s.length;a++){var l=Nt()(s[a],2),c=l[0],u=l[1];u instanceof Object||(o["--".concat(c)]=u)}return e.cssVariables=o,e},Ht={build:qt,extend:function(t){var e=t.baseTheme,n=void 0===e?Rt:e,r=t.extendWith,i=n;"string"==typeof n&&(i="dark"===n?Ut:Rt);var o=Object.assign({},i,r);return qt(o)}},Wt=Ht.build(Rt),Zt=c.a.createContext(Wt);function $t(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Yt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Kt(Object(n),!0).forEach((function(e){$t(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Xt(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}function Jt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Qt(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Jt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}function te(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ee(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ne(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ee(Object(n),!0).forEach((function(e){te(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function re(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}function ie(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function oe(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return ie(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ie(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}var ae=Object(l.createContext)({});var se=function(t,e,n){void 0===n&&(n=e.children);var r=Object(l.useContext)(ae);if(r.useCreateElement)return r.useCreateElement(t,e,n);if("string"==typeof t&&function(t){return"function"==typeof t}(n)){e.children;return n(re(e,["children"]))}return Object(l.createElement)(t,e,n)};function le(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ce(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ue(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ce(Object(n),!0).forEach((function(e){le(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function he(t){return"object"==typeof t&&null!=t}function de(t){var e;if(!he(t))return!1;var n=Object.getPrototypeOf(t);return null==n||(null===(e=n.constructor)||void 0===e?void 0:e.toString())===Object.toString()}function pe(t,e){for(var n={},r={},i=0,o=Object.keys(t);i<o.length;i++){var a=o[i];e.indexOf(a)>=0?n[a]=t[a]:r[a]=t[a]}return[n,r]}function fe(t,e){if(void 0===e&&(e=[]),!de(t.state))return pe(t,e);var n=pe(t,[].concat(e,["state"])),r=n[0],i=n[1],o=r.state,a=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(r,["state"]);return[ue(ue({},o),a),i]}function me(t,e){if(t===e)return!0;if(!t)return!1;if(!e)return!1;if("object"!=typeof t)return!1;if("object"!=typeof e)return!1;var n=Object.keys(t),r=Object.keys(e),i=n.length;if(r.length!==i)return!1;for(var o=0,a=n;o<a.length;o++){var s=a[o];if(t[s]!==e[s])return!1}return!0}function ge(t){return"normalizePropsAreEqualInner"===t.name?t:function(e,n){return de(e.state)&&de(n.state)?t(ue(ue({},e.state),e),ue(ue({},n.state),n)):t(e,n)}}function ye(t){var e,n=t.as,r=t.useHook,i=t.memo,o=t.propsAreEqual,a=void 0===o?null==r?void 0:r.unstable_propsAreEqual:o,s=t.keys,c=void 0===s?(null==r?void 0:r.__keys)||[]:s,u=t.useCreateElement,h=void 0===u?se:u,d=function(t,e){var i=t.as,o=void 0===i?n:i,a=re(t,["as"]);if(r){var s,l=fe(a,c),u=l[0],d=l[1],p=r(u,ne({ref:e},d)),f=p.wrapElement,m=re(p,["wrapElement"]),g=(null===(s=o.render)||void 0===s?void 0:s.__keys)||o.__keys,y=g&&fe(a,g)[0],v=y?ne(ne({},m),y):m,_=h(o,v);return f?f(_):_}return h(o,ne({ref:e},a))};return e=d,d=Object(l.forwardRef)(e),i&&(d=function(t,e){return Object(l.memo)(t,e)}(d,a&&ge(a))),d.__keys=c,d.unstable_propsAreEqual=ge(a||me),d}function ve(t,e){Object(l.useDebugValue)(t);var n=Object(l.useContext)(ae);return null!=n[t]?n[t]:e}function _e(t){var e,n,r,i=(r=t.compose,Array.isArray(r)?r:void 0!==r?[r]:[]),o=function(e,n){if(t.useOptions&&(e=t.useOptions(e,n)),t.name&&(e=function(t,e,n){void 0===e&&(e={}),void 0===n&&(n={});var r="use"+t+"Options";Object(l.useDebugValue)(r);var i=ve(r);return i?ne(ne({},e),i(e,n)):e}(t.name,e,n)),t.compose)for(var r,o=oe(i);!(r=o()).done;){e=r.value.__useOptions(e,n)}return e},a=function(e,n,r){if(void 0===e&&(e={}),void 0===n&&(n={}),void 0===r&&(r=!1),r||(e=o(e,n)),t.useProps&&(n=t.useProps(e,n)),t.name&&(n=function(t,e,n){void 0===e&&(e={}),void 0===n&&(n={});var r="use"+t+"Props";Object(l.useDebugValue)(r);var i=ve(r);return i?i(e,n):n}(t.name,e,n)),t.compose)if(t.useComposeOptions&&(e=t.useComposeOptions(e,n)),t.useComposeProps)n=t.useComposeProps(e,n);else for(var a,s=oe(i);!(a=s()).done;){n=(0,a.value)(e,n,!0)}var c={},u=n||{};for(var h in u)void 0!==u[h]&&(c[h]=u[h]);return c};a.__useOptions=o;var s=i.reduce((function(t,e){return t.push.apply(t,e.__keys||[]),t}),[]);return a.__keys=[].concat(s,(null===(e=t.useState)||void 0===e?void 0:e.__keys)||[],t.keys||[]),a.unstable_propsAreEqual=t.propsAreEqual||(null===(n=i[0])||void 0===n?void 0:n.unstable_propsAreEqual)||me,a}function be(t,e){void 0===e&&(e=null),t&&("function"==typeof t?t(e):t.current=e)}function xe(t,e){return Object(l.useMemo)((function(){return null==t&&null==e?null:function(n){be(t,n),be(e,n)}}),[t,e])}var we,Ee=["button","color","file","image","reset","submit"];function Ce(t){if("BUTTON"===t.tagName)return!0;if("INPUT"===t.tagName){var e=t;return-1!==Ee.indexOf(e.type)}return!1}function Se(t){return t?t.ownerDocument||t:document}try{we=window}catch(t){}function Te(t){return t&&Se(t).defaultView||we}var Oe,Ie=(Oe=Te(),Boolean(void 0!==Oe&&Oe.document&&Oe.document.createElement)),Ae=Ie?l.useLayoutEffect:l.useEffect;function Me(t){var e=Object(l.useRef)(t);return Ae((function(){e.current=t})),e}function ke(t){return t.target===t.currentTarget}function Pe(t){var e=Se(t).activeElement;return null!=e&&e.nodeName?e:null}function De(t,e){return t===e||t.contains(e)}function Re(t){var e=Pe(t);if(!e)return!1;if(De(t,e))return!0;var n=e.getAttribute("aria-activedescendant");return!!n&&(n===t.id||!!t.querySelector("#"+n))}function Le(t){return!De(t.currentTarget,t.target)}function Ne(t){return!!Ie&&-1!==window.navigator.userAgent.indexOf(t)}function je(t,e){return"matches"in t?t.matches(e):"msMatchesSelector"in t?t.msMatchesSelector(e):t.webkitMatchesSelector(e)}function Fe(t,e){if("closest"in t)return t.closest(e);do{if(je(t,e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null}var ze="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false'])";function Be(t){return je(t,ze)&&function(t){var e=t;return e.offsetWidth>0||e.offsetHeight>0||t.getClientRects().length>0}(t)}function Ue(t){return Be(t)&&!function(t){return parseInt(t.getAttribute("tabindex")||"0",10)<0}(t)}function Ge(t,e){var n=Array.from(t.querySelectorAll(ze)),r=n.filter(Ue);return Ue(t)&&r.unshift(t),!r.length&&e?n:r}function Ve(t,e){return Ge(t,e)[0]||null}var qe=_e({name:"Role",keys:["unstable_system"],propsAreEqual:function(t,e){var n=t.unstable_system,r=Xt(t,["unstable_system"]),i=e.unstable_system,o=Xt(e,["unstable_system"]);return!(n!==i&&!me(n,i))&&me(r,o)}}),He=(ye({as:"div",useHook:qe}),Ne("Mac")&&!Ne("Chrome")&&(Ne("Safari")||Ne("Firefox")));function We(t){!Re(t)&&Be(t)&&t.focus()}function Ze(t,e,n,r){return t?e&&!n?-1:void 0:e?r:r||0}function $e(t,e){return Object(l.useCallback)((function(n){var r;null===(r=t.current)||void 0===r||r.call(t,n),n.defaultPrevented||e&&(n.stopPropagation(),n.preventDefault())}),[t,e])}var Ke=_e({name:"Tabbable",compose:qe,keys:["disabled","focusable"],useOptions:function(t,e){return Yt({disabled:e.disabled},t)},useProps:function(t,e){var n=e.ref,r=e.tabIndex,i=e.onClickCapture,o=e.onMouseDownCapture,a=e.onMouseDown,s=e.onKeyPressCapture,c=e.style,u=Xt(e,["ref","tabIndex","onClickCapture","onMouseDownCapture","onMouseDown","onKeyPressCapture","style"]),h=Object(l.useRef)(null),d=Me(i),p=Me(o),f=Me(a),m=Me(s),g=!!t.disabled&&!t.focusable,y=Object(l.useState)(!0),v=y[0],_=y[1],b=Object(l.useState)(!0),x=b[0],w=b[1],E=t.disabled?Yt({pointerEvents:"none"},c):c;Ae((function(){var t=h.current;t&&(["BUTTON","INPUT","SELECT","TEXTAREA","A"].includes(t.tagName)||_(!1),function(t){return["BUTTON","INPUT","SELECT","TEXTAREA"].includes(t.tagName)}(t)||w(!1))}),[]);var C=$e(d,t.disabled),S=$e(p,t.disabled),T=$e(m,t.disabled),O=Object(l.useCallback)((function(t){var e;null===(e=f.current)||void 0===e||e.call(f,t);var n=t.currentTarget;if(!t.defaultPrevented&&He&&!Le(t)&&Ce(n)){var r=requestAnimationFrame((function(){n.removeEventListener("mouseup",i,!0),We(n)})),i=function(){cancelAnimationFrame(r),We(n)};n.addEventListener("mouseup",i,{once:!0,capture:!0})}}),[]);return Yt({ref:xe(h,n),style:E,tabIndex:Ze(g,v,x,r),disabled:!(!g||!x)||void 0,"aria-disabled":!!t.disabled||void 0,onClickCapture:C,onMouseDownCapture:S,onMouseDown:O,onKeyPressCapture:T},u)}});ye({as:"div",useHook:Ke});var Ye,Xe=_e({name:"Clickable",compose:Ke,keys:["unstable_clickOnEnter","unstable_clickOnSpace"],useOptions:function(t){var e=t.unstable_clickOnEnter,n=void 0===e||e,r=t.unstable_clickOnSpace;return Yt({unstable_clickOnEnter:n,unstable_clickOnSpace:void 0===r||r},Xt(t,["unstable_clickOnEnter","unstable_clickOnSpace"]))},useProps:function(t,e){var n=e.onKeyDown,r=e.onKeyUp,i=Xt(e,["onKeyDown","onKeyUp"]),o=Object(l.useState)(!1),a=o[0],s=o[1],c=Me(n),u=Me(r),h=Object(l.useCallback)((function(e){var n;if(null===(n=c.current)||void 0===n||n.call(c,e),!e.defaultPrevented&&!t.disabled&&!e.metaKey&&ke(e)){var r=t.unstable_clickOnEnter&&"Enter"===e.key,i=t.unstable_clickOnSpace&&" "===e.key;if(r||i){if(function(t){var e=t.currentTarget;return!!t.isTrusted&&(Ce(e)||"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"A"===e.tagName||"SELECT"===e.tagName)}(e))return;e.preventDefault(),r?e.currentTarget.click():i&&s(!0)}}}),[t.disabled,t.unstable_clickOnEnter,t.unstable_clickOnSpace]),d=Object(l.useCallback)((function(e){var n;if(null===(n=u.current)||void 0===n||n.call(u,e),!e.defaultPrevented&&!t.disabled&&!e.metaKey){var r=t.unstable_clickOnSpace&&" "===e.key;a&&r&&(s(!1),e.currentTarget.click())}}),[t.disabled,t.unstable_clickOnSpace,a]);return Yt({"data-active":a||void 0,onKeyDown:h,onKeyUp:d},i)}}),Je=(ye({as:"button",memo:!0,useHook:Xe}),_e({name:"Button",compose:Xe,keys:[],useProps:function(t,e){var n=e.ref,r=Xt(e,["ref"]),i=Object(l.useRef)(null),o=Object(l.useState)(void 0),a=o[0],s=o[1],c=Object(l.useState)("button"),u=c[0],h=c[1];return Object(l.useEffect)((function(){var t=i.current;t&&(Ce(t)||("A"!==t.tagName&&s("button"),h(void 0)))}),[]),Yt({ref:xe(i,n),role:a,type:u},r)}})),Qe=ye({as:"button",memo:!0,useHook:Je}),tn=n(104),en=n.n(tn),nn="\n    -webkit-touch-callout: none;\n    user-select: none;\n  ";var rn={name:"2ry9pw",styles:"padding:0;border:none;height:auto;color:inherit;line-height:inherit;font-weight:inherit;background:none;border-radius:0"},on={name:"8muanc",styles:"border-color:#808080;color:#808080;background:none"},an={name:"mpmwmh",styles:"background:tomato;color:white"},sn={name:"1rbowyl",styles:"border-color:transparent;background:none"},ln={name:"7whenc",styles:"display:flex;width:100%"},cn=Dt(Ye||(Ye=en()(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(359deg);\n  }\n"]))),un={button:function(t){return Pt(nn," appearance:none;text-decoration:none;display:inline-flex;align-items:center;justify-content:flex-start;text-align:center;border:1px solid transparent;border-radius:",t.borderRadius,"px;box-shadow:none;font-size:1em;padding-top:0.5em;padding-bottom:0.5em;line-height:calc(1.5em - 6px);position:relative;margin:0;background-color:white;color:",t.color,";cursor:pointer;justify-content:center;padding-left:",t.dense?.5:1,"em;padding-right:",t.dense?.5:1,'em;&:focus{outline:none;box-shadow:0 0 0 0.125em rgba(50, 115, 220, 0.25);}&[aria-disabled="true"]{opacity:0.5;cursor:auto;}::-moz-focus-inner{border-style:none;}',"")},primary:function(t){return Pt("background-color:",t.primary500,";border-color:",t.primary600,';color:white;&:not([aria-disabled="true"]){&:hover{color:white;border-color:',t.primary500,";background-color:",t.primary600,';}&:active,&[aria-expanded="true"]{color:white;border-color:',t.primary600,";background-color:",t.primary700,";}}","")},primaryOutline:function(t){return Pt("border-color:",t.primary600,";background:none;color:",t.primary700,";","")},outline:function(t){return Pt("border-color:",t.transparentInk40,";background:none;","")},ghost:function(t){return on},danger:function(t){return an},link:function(t){return sn},loading:function(t){return Pt("&:after{animation:",cn,' 500ms infinite linear;border:2px solid #dbdbdb;border-radius:0.5em;border-right-color:transparent;border-top-color:transparent;content:"";display:block;height:1em;width:1em;left:calc(50% - (1em / 2));top:calc(50% - (1em / 2));position:absolute!important;}color:transparent!important;pointer-events:none;',"")},isFullWidth:function(t){return ln},text:function(t){return rn},group:function(t){var e=t.theme;return Pt("display:inline-flex;max-width:100%;>button{overflow:hidden;border-radius:0;margin:0;margin-right:-1px;}>button:first-of-type{border-top-left-radius:",e.borderRadius,"px;border-bottom-left-radius:",e.borderRadius,"px;flex:1 1 auto;}>button:last-of-type{border-top-right-radius:",e.borderRadius,"px;border-bottom-right-radius:",e.borderRadius,"px;}","")}},hn=n(241),dn=n.n(hn);function pn(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"gbif",e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=[];Object.keys(n).forEach((function(t){var e=n[t];!0===e?i.push(t):"string"==typeof e&&i.push(e)}));var o=fn(t,e,i);return{classNames:{className:"".concat(r," ").concat(o)},classesToApply:i}}var fn=function(t,e,n){var r="".concat(t,"-").concat(e);return n.reduce((function(t,e){return"".concat(t," ").concat(r,"-").concat(e)}),"".concat(r))};function mn(t){return gn(dn()(t))}var gn=function(t){var e,n=0;if(0===t.length)return n;for(e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return n},yn=37,vn=39,_n=13;function bn(){var t=Array.prototype.slice.call(arguments);return t.filter((function(t){return""!==t})).map((function(t){return t.replace(/\/$/g,"")})).join("/").replace(/\/\//g,"/")}var xn={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},wn=c.a.createContext&&c.a.createContext(xn),En=function(){return(En=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Cn=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};function Sn(t){return function(e){return c.a.createElement(Tn,En({attr:En({},t.attr)},e),function t(e){return e&&e.map((function(e,n){return c.a.createElement(e.tag,En({key:n},e.attr),t(e.child))}))}(t.child))}}function Tn(t){var e=function(e){var n,r=t.attr,i=t.size,o=t.title,a=Cn(t,["attr","size","title"]),s=i||e.size||"1em";return e.className&&(n=e.className),t.className&&(n=(n?n+" ":"")+t.className),c.a.createElement("svg",En({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,r,a,{className:n,style:En(En({color:t.color||e.color},e.style),t.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),o&&c.a.createElement("title",null,o),t.children)};return void 0!==wn?c.a.createElement(wn.Consumer,null,(function(t){return e(t)})):e(xn)}function On(t){return Sn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"}}]})(t)}function In(t){return Sn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19a2 2 0 002 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}}]})(t)}function An(t){return Sn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"}}]})(t)}function Mn(t){return Sn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"}}]})(t)}function kn(t){return Sn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z"}}]})(t)}function Pn(t){return Sn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"}}]})(t)}function Dn(t){return Sn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"}}]})(t)}function Rn(t){return Sn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}}]})(t)}function Ln(t){return Sn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}},{tag:"path",attr:{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"}}]})(t)}function Nn(t){return Sn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"}}]})(t)}function jn(t){return Sn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M3 10h11v2H3zM3 6h11v2H3zM3 14h7v2H3zM20.59 11.93l-4.25 4.24-2.12-2.12-1.41 1.41L16.34 19 22 13.34z"}}]})(t)}function Fn(t){return Sn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"}}]})(t)}function zn(t){return Sn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5a2.5 2.5 0 010-5 2.5 2.5 0 010 5z"}}]})(t)}function Bn(t){return Sn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"}}]})(t)}function Un(t){return Sn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"}}]})(t)}function Gn(t){return Sn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"}}]})(t)}function Vn(t){return Sn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"}}]})(t)}function qn(t){return Sn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M6 2c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6H6zm7 7V3.5L18.5 9H13z"}}]})(t)}function Hn(t){return Sn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"}}]})(t)}function Wn(t){return Sn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"}}]})(t)}function Zn(t){return Sn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"}}]})(t)}function $n(t){return Sn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM8 20H4v-4h4v4zm0-6H4v-4h4v4zm0-6H4V4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4V4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4V4h4v4z"}}]})(t)}function Kn(t){return Sn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"}}]})(t)}function Yn(t){return Sn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M22 16V4c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2zm-11-4l2.03 2.71L16 11l4 5H8l3-4zM2 6v14c0 1.1.9 2 2 2h14v-2H4V6H2z"}}]})(t)}function Xn(t){return Sn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M4 8h4V4H4v4zm6 12h4v-4h-4v4zm-6 0h4v-4H4v4zm0-6h4v-4H4v4zm6 0h4v-4h-4v4zm6-10v4h4V4h-4zm-6 4h4V4h-4v4zm6 6h4v-4h-4v4zm0 6h4v-4h-4v4z"}}]})(t)}function Jn(t){return Sn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}}]})(t)}function Qn(t){return Sn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}}]})(t)}function tr(t){return Sn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}}]})(t)}function er(t){return Sn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}},{tag:"path",attr:{fill:"none",d:"M24 24H0V0h24v24z"}}]})(t)}function nr(t){return Sn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"}}]})(t)}function rr(t){return Sn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"}}]})(t)}function ir(t){return Sn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}}]})(t)}function or(t){return Sn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}}]})(t)}function ar(t){return Sn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"}}]})(t)}function sr(t){return Sn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}}]})(t)}function lr(t){return Sn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"}}]})(t)}function cr(t){return Sn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"}}]})(t)}var ur=["className","loading","isFullWidth","isIcon","appearance","look","children","truncate"],hr=["isActive","onClearRequest","onClick","loading","children","title","isNegated"],dr={overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},pr=c.a.forwardRef((function(t,e){var n=t.className,r=void 0===n?"":n,i=t.loading,a=void 0!==i&&i,c=t.isFullWidth,u=void 0!==c&&c,h=(t.isIcon,t.appearance),d=t.look,p=void 0===d?"primary":d,f=t.children,m=t.truncate,g=s()(t,ur);h=h||p;var y=Object(l.useContext)(Zt),v=pn(y.prefix,"button",{appearance:h,loading:a,isFullWidth:u},r),_=v.classesToApply,b=v.classNames;return kt(Qe,o()({ref:e},b,{css:Pt(un.button(y)," ",_.map((function(t){return un[t](y)})),";","")},g),m?kt("span",{style:dr},f):f)}));pr.displayName="Button";var fr=function(t){var e=o()({},t),n=Object(l.useContext)(Zt);return kt("div",o()({css:un.group({theme:n})},e))};fr.displayName="ButtonGroup";var mr=c.a.forwardRef((function(t,e){var n=t.isActive,r=t.onClearRequest,i=void 0===r?function(){}:r,a=t.onClick,l=t.loading,c=t.children,u=t.title,h=t.isNegated,d=void 0!==h&&h,p=s()(t,hr);return n?kt(fr,{style:{maxWidth:"100%"}},d&&kt(pr,o()({},p,{title:"Negated filter",appearance:"primary",onClick:a,loading:l}),kt("span",null,"Exclude")),kt(pr,o()({},p,{style:{maxWidth:400},title:u,truncate:!0,appearance:"primary",ref:e,onClick:a,loading:l}),c),kt(pr,{appearance:"primary",onClick:i,style:{flex:"0 0 auto"}},kt(tr,{style:{verticalAlign:"middle"}}))):kt(fr,p,kt(pr,o()({},p,{ref:e,loading:l,appearance:"primaryOutline",onClick:a}),c))})),gr=["as","className","style"],yr=c.a.forwardRef((function(t,e){var n=t.as,r=void 0===n?"span":n,i=t.className,a=void 0===i?"":i,c=t.style,u=void 0===c?{}:c,h=s()(t,gr),d=Object(l.useContext)(Zt);return kt(r,{style:u,className:a,css:br({theme:d,disabled:h.disabled})},kt("input",o()({type:"checkbox",ref:e},h)),kt("span",null))}));yr.displayName="Switch";var vr,_r=yr,br=function(t){var e=t.theme;return Pt("position:relative;top:-0.09em;display:inline-block;line-height:1;white-space:nowrap;vertical-align:middle;outline:none;",t.disabled?"opacity: 0.5;":null,' cursor:pointer;& input{margin:0;position:absolute;top:0;right:0;bottom:0;left:0;z-index:1;width:100%;height:100%;cursor:pointer;opacity:0;}& input+span{position:relative;top:0;left:0;display:block;width:2em;height:1em;background-color:#88888855;transition:.1s;border-radius:34px;&:before{position:absolute;content:"";height:calc(1em - 4px);width:calc(1em - 4px);left:2px;bottom:2px;background-color:',e.darkTheme?e.color900:"#fff",";transition:.1s;border-radius:50%;}}& input:checked+span{background-color:#2196F3;}& input:focus+span{outline:none;box-shadow:0 0 0 0.125em rgba(50, 115, 220, 0.25);}& input:checked+span:before{transform:translateX(1em);}","")};var xr={name:"184im9y",styles:"-webkit-touch-callout:none;user-select:none"},wr={name:"1fvplud",styles:"&:focus{outline:none;box-shadow:0 0 0 0.125em rgba(50, 115, 220, 0.25);}::-moz-focus-inner{border-style:none;}"},Er=function(t){return wr},Cr={name:"480kxp",styles:"margin:0;position:absolute;top:0;right:0;bottom:0;left:0;z-index:1;width:100%;height:100%;cursor:pointer;opacity:0"},Sr=function(t){return Pt("scrollbar-width:thin;&::-webkit-scrollbar{width:6px;height:6px;}&::-webkit-scrollbar-thumb{background-color:",t.theme.darkTheme?"#ffffff38":"#686868",";}","")},Tr={name:"aspdd",styles:"line-height:1.2em;&>span:after{font-style:normal;content:' ❯ ';font-size:80%;color:#ccc;display:inline-block;padding:0 3px;}&>span:last-of-type:after{display:none;}.gbif-classification-unknown{opacity:0.5;}"},Or=function(t){o()({},t);return Tr},Ir=function(t){var e=t.appRoot,n=t.theme,r=void 0===n?{}:n;return Pt("*{font-family:",r.fontFamily||'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif',";}color:",r.color900||"#4a4a4a",";font-size:",r.fontSize||"1em",";font-weight:400;line-height:1.2em;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);background:",e?r.background:null,";*,*::before,*::after,strong{box-sizing:inherit;}-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;","")},Ar=function(t){return Pt("&:hover{position:relative;&[tip]:before{border-radius:2px;background-color:",t.theme.darkPaperBackground,';color:#fff;content:attr(tip);font-size:12px;padding:5px 7px;position:absolute;white-space:nowrap;z-index:25;line-height:1.2em;pointer-events:none;}&[direction="right"]:before{top:50%;left:120%;transform:translateY(-50%);}&[direction="left"]:before{top:50%;right:120%;transform:translateY(-50%);}&[direction="top"]:before{right:50%;bottom:120%;transform:translateX(50%);}&[direction="bottom"]:before{right:50%;top:120%;transform:translateX(50%);}}',"")},Mr=Dt(vr||(vr=en()(["\n  from {\n    background-color: #88888830;\n  }\n  50% {\n    background-color: #88888830;\n  }\n  75% {\n    background-color: #afafaf30;\n  }\n  to {\n    background-color: #88888830;\n  }\n"]))),kr={name:"1dmc845",styles:"margin:0;padding:0;list-style:none;&>li{display:inline-block;&:after{font-style:normal;content:'●';font-size:80%;padding:0 3px;}:last-of-type:after{display:none;}}"},Pr={name:"1dmofro",styles:"text-decoration:none;color:inherit!important;&:hover{text-decoration:underline;color:inherit!important;}"},Dr=function(t){return Pt("position:relative;top:-0.09em;display:inline-block;line-height:1;white-space:nowrap;vertical-align:middle;outline:none;cursor:pointer;input{",Cr,";}& input+span{position:relative;top:0;left:0;display:block;width:1em;height:1em;background-color:",t.theme.darkTheme?t.theme.paperBackground700:null,";border:1px solid #88888855;border-radius:",Math.min(2,t.theme.borderRadius),"px;transition:all 0.1s;&:after{position:absolute;top:50%;left:30%;display:table;width:40%;height:60%;border:2px solid #fff;border-top:0;border-left:0;transform:rotate(45deg) scale(0) translate(-50%, -50%);opacity:0;transition:all 0.1s cubic-bezier(0.71, -0.46, 0.88, 0.6),opacity 0.1s;content:' ';}}& input:checked+span{background-color:#1890ff;border-color:#1890ff;&:after{transform:rotate(45deg) scale(1) translate(-50%, -50%);opacity:1;transition:all 0.1s cubic-bezier(0.12, 0.4, 0.29, 1.46) 0.1s;}}& input:focus+span{box-shadow:0 0 0 0.125em rgba(50, 115, 220, 0.25);}","")},Rr=["as","className","style"],Lr=c.a.forwardRef((function(t,e){var n=t.as,r=void 0===n?"span":n,i=t.className,a=void 0===i?"":i,c=t.style,u=void 0===c?{}:c,h=s()(t,Rr),d=Object(l.useContext)(Zt);return kt(r,{style:u,className:a,css:Dr({theme:d})},kt("input",o()({type:"checkbox",ref:e},h)),kt("span",null))}));Lr.displayName="Checkbox";var Nr=function(t){return kt("h1",null,"TEST")},jr=function(t){return Pt("-webkit-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0;font-variant:tabular-nums;list-style:none;font-feature-settings:'tnum';position:relative;display:inline-block;width:100%;height:32px;padding:4px 11px;color:",t.theme.color900,";font-size:inherit;line-height:1.5;background-color:",t.theme.paperBackground600,";background-image:none;border:1px solid #88888855;border-radius:",t.theme.borderRadius,"px;transition:all 0.3s;",Er(),";",function(t){return Pt("&::placeholder{color:",t.theme.color500,";}","")}(t),";","")},Fr=c.a.forwardRef((function(t,e){var n=o()({},t),r=Object(l.useContext)(Zt);return kt("input",o()({ref:e},n,{css:jr({theme:r})}))}));function zr(t){return Object(l.useState)(t)[0]}function Br(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Ur(t){return t instanceof Br(t).Element||t instanceof Element}function Gr(t){return t instanceof Br(t).HTMLElement||t instanceof HTMLElement}function Vr(t){return"undefined"!=typeof ShadowRoot&&(t instanceof Br(t).ShadowRoot||t instanceof ShadowRoot)}Fr.displayName="Input";var qr=Math.max,Hr=Math.min,Wr=Math.round;function Zr(t,e){void 0===e&&(e=!1);var n=t.getBoundingClientRect(),r=1,i=1;if(Gr(t)&&e){var o=t.offsetHeight,a=t.offsetWidth;a>0&&(r=Wr(n.width)/a||1),o>0&&(i=Wr(n.height)/o||1)}return{width:n.width/r,height:n.height/i,top:n.top/i,right:n.right/r,bottom:n.bottom/i,left:n.left/r,x:n.left/r,y:n.top/i}}function $r(t){var e=Br(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Kr(t){return t?(t.nodeName||"").toLowerCase():null}function Yr(t){return((Ur(t)?t.ownerDocument:t.document)||window.document).documentElement}function Xr(t){return Zr(Yr(t)).left+$r(t).scrollLeft}function Jr(t){return Br(t).getComputedStyle(t)}function Qr(t){var e=Jr(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function ti(t,e,n){void 0===n&&(n=!1);var r,i,o=Gr(e),a=Gr(e)&&function(t){var e=t.getBoundingClientRect(),n=Wr(e.width)/t.offsetWidth||1,r=Wr(e.height)/t.offsetHeight||1;return 1!==n||1!==r}(e),s=Yr(e),l=Zr(t,a),c={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(o||!o&&!n)&&(("body"!==Kr(e)||Qr(s))&&(c=(r=e)!==Br(r)&&Gr(r)?{scrollLeft:(i=r).scrollLeft,scrollTop:i.scrollTop}:$r(r)),Gr(e)?((u=Zr(e,!0)).x+=e.clientLeft,u.y+=e.clientTop):s&&(u.x=Xr(s))),{x:l.left+c.scrollLeft-u.x,y:l.top+c.scrollTop-u.y,width:l.width,height:l.height}}function ei(t){var e=Zr(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function ni(t){return"html"===Kr(t)?t:t.assignedSlot||t.parentNode||(Vr(t)?t.host:null)||Yr(t)}function ri(t,e){var n;void 0===e&&(e=[]);var r=function t(e){return["html","body","#document"].indexOf(Kr(e))>=0?e.ownerDocument.body:Gr(e)&&Qr(e)?e:t(ni(e))}(t),i=r===(null==(n=t.ownerDocument)?void 0:n.body),o=Br(r),a=i?[o].concat(o.visualViewport||[],Qr(r)?r:[]):r,s=e.concat(a);return i?s:s.concat(ri(ni(a)))}function ii(t){return["table","td","th"].indexOf(Kr(t))>=0}function oi(t){return Gr(t)&&"fixed"!==Jr(t).position?t.offsetParent:null}function ai(t){for(var e=Br(t),n=oi(t);n&&ii(n)&&"static"===Jr(n).position;)n=oi(n);return n&&("html"===Kr(n)||"body"===Kr(n)&&"static"===Jr(n).position)?e:n||function(t){var e=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&Gr(t)&&"fixed"===Jr(t).position)return null;for(var n=ni(t);Gr(n)&&["html","body"].indexOf(Kr(n))<0;){var r=Jr(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||e&&"filter"===r.willChange||e&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(t)||e}var si="top",li="bottom",ci="right",ui="left",hi=[si,li,ci,ui],di=hi.reduce((function(t,e){return t.concat([e+"-start",e+"-end"])}),[]),pi=[].concat(hi,["auto"]).reduce((function(t,e){return t.concat([e,e+"-start",e+"-end"])}),[]),fi=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function mi(t){var e=new Map,n=new Set,r=[];return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||function t(i){n.add(i.name),[].concat(i.requires||[],i.requiresIfExists||[]).forEach((function(r){if(!n.has(r)){var i=e.get(r);i&&t(i)}})),r.push(i)}(t)})),r}var gi={placement:"bottom",modifiers:[],strategy:"absolute"};function yi(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"==typeof t.getBoundingClientRect)}))}function vi(t){void 0===t&&(t={});var e=t,n=e.defaultModifiers,r=void 0===n?[]:n,i=e.defaultOptions,o=void 0===i?gi:i;return function(t,e,n){void 0===n&&(n=o);var i,a,s={placement:"bottom",orderedModifiers:[],options:Object.assign({},gi,o),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},l=[],c=!1,u={state:s,setOptions:function(n){var i="function"==typeof n?n(s.options):n;h(),s.options=Object.assign({},o,s.options,i),s.scrollParents={reference:Ur(t)?ri(t):t.contextElement?ri(t.contextElement):[],popper:ri(e)};var a=function(t){var e=mi(t);return fi.reduce((function(t,n){return t.concat(e.filter((function(t){return t.phase===n})))}),[])}(function(t){var e=t.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t}),{});return Object.keys(e).map((function(t){return e[t]}))}([].concat(r,s.options.modifiers)));return s.orderedModifiers=a.filter((function(t){return t.enabled})),s.orderedModifiers.forEach((function(t){var e=t.name,n=t.options,r=void 0===n?{}:n,i=t.effect;if("function"==typeof i){var o=i({state:s,name:e,instance:u,options:r});l.push(o||function(){})}})),u.update()},forceUpdate:function(){if(!c){var t=s.elements,e=t.reference,n=t.popper;if(yi(e,n)){s.rects={reference:ti(e,ai(n),"fixed"===s.options.strategy),popper:ei(n)},s.reset=!1,s.placement=s.options.placement,s.orderedModifiers.forEach((function(t){return s.modifiersData[t.name]=Object.assign({},t.data)}));for(var r=0;r<s.orderedModifiers.length;r++)if(!0!==s.reset){var i=s.orderedModifiers[r],o=i.fn,a=i.options,l=void 0===a?{}:a,h=i.name;"function"==typeof o&&(s=o({state:s,options:l,name:h,instance:u})||s)}else s.reset=!1,r=-1}}},update:(i=function(){return new Promise((function(t){u.forceUpdate(),t(s)}))},function(){return a||(a=new Promise((function(t){Promise.resolve().then((function(){a=void 0,t(i())}))}))),a}),destroy:function(){h(),c=!0}};if(!yi(t,e))return u;function h(){l.forEach((function(t){return t()})),l=[]}return u.setOptions(n).then((function(t){!c&&n.onFirstUpdate&&n.onFirstUpdate(t)})),u}}var _i={passive:!0};function bi(t){return t.split("-")[0]}function xi(t){return t.split("-")[1]}function wi(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Ei(t){var e,n=t.reference,r=t.element,i=t.placement,o=i?bi(i):null,a=i?xi(i):null,s=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(o){case si:e={x:s,y:n.y-r.height};break;case li:e={x:s,y:n.y+n.height};break;case ci:e={x:n.x+n.width,y:l};break;case ui:e={x:n.x-r.width,y:l};break;default:e={x:n.x,y:n.y}}var c=o?wi(o):null;if(null!=c){var u="y"===c?"height":"width";switch(a){case"start":e[c]=e[c]-(n[u]/2-r[u]/2);break;case"end":e[c]=e[c]+(n[u]/2-r[u]/2)}}return e}var Ci={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Si(t){var e,n=t.popper,r=t.popperRect,i=t.placement,o=t.variation,a=t.offsets,s=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,h=t.isFixed,d=a.x,p=void 0===d?0:d,f=a.y,m=void 0===f?0:f,g="function"==typeof u?u({x:p,y:m}):{x:p,y:m};p=g.x,m=g.y;var y=a.hasOwnProperty("x"),v=a.hasOwnProperty("y"),_=ui,b=si,x=window;if(c){var w=ai(n),E="clientHeight",C="clientWidth";if(w===Br(n)&&"static"!==Jr(w=Yr(n)).position&&"absolute"===s&&(E="scrollHeight",C="scrollWidth"),w=w,i===si||(i===ui||i===ci)&&"end"===o)b=li,m-=(h&&x.visualViewport?x.visualViewport.height:w[E])-r.height,m*=l?1:-1;if(i===ui||(i===si||i===li)&&"end"===o)_=ci,p-=(h&&x.visualViewport?x.visualViewport.width:w[C])-r.width,p*=l?1:-1}var S,T=Object.assign({position:s},c&&Ci),O=!0===u?function(t){var e=t.x,n=t.y,r=window.devicePixelRatio||1;return{x:Wr(e*r)/r||0,y:Wr(n*r)/r||0}}({x:p,y:m}):{x:p,y:m};return p=O.x,m=O.y,l?Object.assign({},T,((S={})[b]=v?"0":"",S[_]=y?"0":"",S.transform=(x.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",S)):Object.assign({},T,((e={})[b]=v?m+"px":"",e[_]=y?p+"px":"",e.transform="",e))}var Ti={left:"right",right:"left",bottom:"top",top:"bottom"};function Oi(t){return t.replace(/left|right|bottom|top/g,(function(t){return Ti[t]}))}var Ii={start:"end",end:"start"};function Ai(t){return t.replace(/start|end/g,(function(t){return Ii[t]}))}function Mi(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Vr(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function ki(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Pi(t,e){return"viewport"===e?ki(function(t){var e=Br(t),n=Yr(t),r=e.visualViewport,i=n.clientWidth,o=n.clientHeight,a=0,s=0;return r&&(i=r.width,o=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(a=r.offsetLeft,s=r.offsetTop)),{width:i,height:o,x:a+Xr(t),y:s}}(t)):Ur(e)?function(t){var e=Zr(t);return e.top=e.top+t.clientTop,e.left=e.left+t.clientLeft,e.bottom=e.top+t.clientHeight,e.right=e.left+t.clientWidth,e.width=t.clientWidth,e.height=t.clientHeight,e.x=e.left,e.y=e.top,e}(e):ki(function(t){var e,n=Yr(t),r=$r(t),i=null==(e=t.ownerDocument)?void 0:e.body,o=qr(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=qr(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+Xr(t),l=-r.scrollTop;return"rtl"===Jr(i||n).direction&&(s+=qr(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:a,x:s,y:l}}(Yr(t)))}function Di(t,e,n){var r="clippingParents"===e?function(t){var e=ri(ni(t)),n=["absolute","fixed"].indexOf(Jr(t).position)>=0&&Gr(t)?ai(t):t;return Ur(n)?e.filter((function(t){return Ur(t)&&Mi(t,n)&&"body"!==Kr(t)})):[]}(t):[].concat(e),i=[].concat(r,[n]),o=i[0],a=i.reduce((function(e,n){var r=Pi(t,n);return e.top=qr(r.top,e.top),e.right=Hr(r.right,e.right),e.bottom=Hr(r.bottom,e.bottom),e.left=qr(r.left,e.left),e}),Pi(t,o));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Ri(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function Li(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}function Ni(t,e){void 0===e&&(e={});var n=e,r=n.placement,i=void 0===r?t.placement:r,o=n.boundary,a=void 0===o?"clippingParents":o,s=n.rootBoundary,l=void 0===s?"viewport":s,c=n.elementContext,u=void 0===c?"popper":c,h=n.altBoundary,d=void 0!==h&&h,p=n.padding,f=void 0===p?0:p,m=Ri("number"!=typeof f?f:Li(f,hi)),g="popper"===u?"reference":"popper",y=t.rects.popper,v=t.elements[d?g:u],_=Di(Ur(v)?v:v.contextElement||Yr(t.elements.popper),a,l),b=Zr(t.elements.reference),x=Ei({reference:b,element:y,strategy:"absolute",placement:i}),w=ki(Object.assign({},y,x)),E="popper"===u?w:b,C={top:_.top-E.top+m.top,bottom:E.bottom-_.bottom+m.bottom,left:_.left-E.left+m.left,right:E.right-_.right+m.right},S=t.modifiersData.offset;if("popper"===u&&S){var T=S[i];Object.keys(C).forEach((function(t){var e=[ci,li].indexOf(t)>=0?1:-1,n=[si,li].indexOf(t)>=0?"y":"x";C[t]+=T[n]*e}))}return C}function ji(t,e,n){return qr(t,Hr(e,n))}function Fi(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function zi(t){return[si,ci,li,ui].some((function(e){return t[e]>=0}))}var Bi=vi({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,o=void 0===i||i,a=r.resize,s=void 0===a||a,l=Br(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&c.forEach((function(t){t.addEventListener("scroll",n.update,_i)})),s&&l.addEventListener("resize",n.update,_i),function(){o&&c.forEach((function(t){t.removeEventListener("scroll",n.update,_i)})),s&&l.removeEventListener("resize",n.update,_i)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,n=t.name;e.modifiersData[n]=Ei({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,a=void 0===o||o,s=n.roundOffsets,l=void 0===s||s,c={placement:bi(e.placement),variation:xi(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,Si(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:l})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,Si(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var n=e.styles[t]||{},r=e.attributes[t]||{},i=e.elements[t];Gr(i)&&Kr(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(t){var e=r[t];!1===e?i.removeAttribute(t):i.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach((function(t){var r=e.elements[t],i=e.attributes[t]||{},o=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]).reduce((function(t,e){return t[e]="",t}),{});Gr(r)&&Kr(r)&&(Object.assign(r.style,o),Object.keys(i).forEach((function(t){r.removeAttribute(t)})))}))}},requires:["computeStyles"]},{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,n=t.options,r=t.name,i=n.offset,o=void 0===i?[0,0]:i,a=pi.reduce((function(t,n){return t[n]=function(t,e,n){var r=bi(t),i=[ui,si].indexOf(r)>=0?-1:1,o="function"==typeof n?n(Object.assign({},e,{placement:t})):n,a=o[0],s=o[1];return a=a||0,s=(s||0)*i,[ui,ci].indexOf(r)>=0?{x:s,y:a}:{x:a,y:s}}(n,e.rects,o),t}),{}),s=a[e.placement],l=s.x,c=s.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=a}},{name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,o=void 0===i||i,a=n.altAxis,s=void 0===a||a,l=n.fallbackPlacements,c=n.padding,u=n.boundary,h=n.rootBoundary,d=n.altBoundary,p=n.flipVariations,f=void 0===p||p,m=n.allowedAutoPlacements,g=e.options.placement,y=bi(g),v=l||(y===g||!f?[Oi(g)]:function(t){if("auto"===bi(t))return[];var e=Oi(t);return[Ai(t),e,Ai(e)]}(g)),_=[g].concat(v).reduce((function(t,n){return t.concat("auto"===bi(n)?function(t,e){void 0===e&&(e={});var n=e,r=n.placement,i=n.boundary,o=n.rootBoundary,a=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?pi:l,u=xi(r),h=u?s?di:di.filter((function(t){return xi(t)===u})):hi,d=h.filter((function(t){return c.indexOf(t)>=0}));0===d.length&&(d=h);var p=d.reduce((function(e,n){return e[n]=Ni(t,{placement:n,boundary:i,rootBoundary:o,padding:a})[bi(n)],e}),{});return Object.keys(p).sort((function(t,e){return p[t]-p[e]}))}(e,{placement:n,boundary:u,rootBoundary:h,padding:c,flipVariations:f,allowedAutoPlacements:m}):n)}),[]),b=e.rects.reference,x=e.rects.popper,w=new Map,E=!0,C=_[0],S=0;S<_.length;S++){var T=_[S],O=bi(T),I="start"===xi(T),A=[si,li].indexOf(O)>=0,M=A?"width":"height",k=Ni(e,{placement:T,boundary:u,rootBoundary:h,altBoundary:d,padding:c}),P=A?I?ci:ui:I?li:si;b[M]>x[M]&&(P=Oi(P));var D=Oi(P),R=[];if(o&&R.push(k[O]<=0),s&&R.push(k[P]<=0,k[D]<=0),R.every((function(t){return t}))){C=T,E=!1;break}w.set(T,R)}if(E)for(var L=function(t){var e=_.find((function(e){var n=w.get(e);if(n)return n.slice(0,t).every((function(t){return t}))}));if(e)return C=e,"break"},N=f?3:1;N>0;N--){if("break"===L(N))break}e.placement!==C&&(e.modifiersData[r]._skip=!0,e.placement=C,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,o=void 0===i||i,a=n.altAxis,s=void 0!==a&&a,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,h=n.padding,d=n.tether,p=void 0===d||d,f=n.tetherOffset,m=void 0===f?0:f,g=Ni(e,{boundary:l,rootBoundary:c,padding:h,altBoundary:u}),y=bi(e.placement),v=xi(e.placement),_=!v,b=wi(y),x="x"===b?"y":"x",w=e.modifiersData.popperOffsets,E=e.rects.reference,C=e.rects.popper,S="function"==typeof m?m(Object.assign({},e.rects,{placement:e.placement})):m,T="number"==typeof S?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),O=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,I={x:0,y:0};if(w){if(o){var A,M="y"===b?si:ui,k="y"===b?li:ci,P="y"===b?"height":"width",D=w[b],R=D+g[M],L=D-g[k],N=p?-C[P]/2:0,j="start"===v?E[P]:C[P],F="start"===v?-C[P]:-E[P],z=e.elements.arrow,B=p&&z?ei(z):{width:0,height:0},U=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},G=U[M],V=U[k],q=ji(0,E[P],B[P]),H=_?E[P]/2-N-q-G-T.mainAxis:j-q-G-T.mainAxis,W=_?-E[P]/2+N+q+V+T.mainAxis:F+q+V+T.mainAxis,Z=e.elements.arrow&&ai(e.elements.arrow),$=Z?"y"===b?Z.clientTop||0:Z.clientLeft||0:0,K=null!=(A=null==O?void 0:O[b])?A:0,Y=D+W-K,X=ji(p?Hr(R,D+H-K-$):R,D,p?qr(L,Y):L);w[b]=X,I[b]=X-D}if(s){var J,Q="x"===b?si:ui,tt="x"===b?li:ci,et=w[x],nt="y"===x?"height":"width",rt=et+g[Q],it=et-g[tt],ot=-1!==[si,ui].indexOf(y),at=null!=(J=null==O?void 0:O[x])?J:0,st=ot?rt:et-E[nt]-C[nt]-at+T.altAxis,lt=ot?et+E[nt]+C[nt]-at-T.altAxis:it,ct=p&&ot?function(t,e,n){var r=ji(t,e,n);return r>n?n:r}(st,et,lt):ji(p?st:rt,et,p?lt:it);w[x]=ct,I[x]=ct-et}e.modifiersData[r]=I}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,n=t.state,r=t.name,i=t.options,o=n.elements.arrow,a=n.modifiersData.popperOffsets,s=bi(n.placement),l=wi(s),c=[ui,ci].indexOf(s)>=0?"height":"width";if(o&&a){var u=function(t,e){return Ri("number"!=typeof(t="function"==typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:Li(t,hi))}(i.padding,n),h=ei(o),d="y"===l?si:ui,p="y"===l?li:ci,f=n.rects.reference[c]+n.rects.reference[l]-a[l]-n.rects.popper[c],m=a[l]-n.rects.reference[l],g=ai(o),y=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,v=f/2-m/2,_=u[d],b=y-h[c]-u[p],x=y/2-h[c]/2+v,w=ji(_,x,b),E=l;n.modifiersData[r]=((e={})[E]=w,e.centerOffset=w-x,e)}},effect:function(t){var e=t.state,n=t.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!=typeof r||(r=e.elements.popper.querySelector(r)))&&Mi(e.elements.popper,r)&&(e.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,a=Ni(e,{elementContext:"reference"}),s=Ni(e,{altBoundary:!0}),l=Fi(a,r),c=Fi(s,i,o),u=zi(l),h=zi(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}}]});function Ui(t){return void 0===t&&(t="id"),(t?t+"-":"")+Math.random().toString(32).substr(2,6)}var Gi=Object(l.createContext)(Ui);function Vi(t){void 0===t&&(t={});var e=zr(t).baseId,n=Object(l.useContext)(Gi),r=Object(l.useRef)(0),i=Object(l.useState)((function(){return e||n()}));return{baseId:i[0],setBaseId:i[1],unstable_idCountRef:r}}function qi(t){void 0===t&&(t={});var e,n,r=zr(t),i=r.visible,o=void 0!==i&&i,a=r.animated,s=void 0!==a&&a,c=Vi(Xt(r,["visible","animated"])),u=Object(l.useState)(o),h=u[0],d=u[1],p=Object(l.useState)(s),f=p[0],m=p[1],g=Object(l.useState)(!1),y=g[0],v=g[1],_=(e=h,n=Object(l.useRef)(null),Ae((function(){n.current=e}),[e]),n),b=null!=_.current&&_.current!==h;f&&!y&&b&&v(!0),Object(l.useEffect)((function(){if("number"==typeof f&&y){var t=setTimeout((function(){return v(!1)}),f);return function(){clearTimeout(t)}}return function(){}}),[f,y]);var x=Object(l.useCallback)((function(){return d(!0)}),[]),w=Object(l.useCallback)((function(){return d(!1)}),[]),E=Object(l.useCallback)((function(){return d((function(t){return!t}))}),[]),C=Object(l.useCallback)((function(){return v(!1)}),[]);return Yt(Yt({},c),{},{visible:h,animated:f,animating:y,show:x,hide:w,toggle:E,setVisible:d,setAnimated:m,stopAnimation:C})}function Hi(t){void 0===t&&(t={});var e=zr(t),n=e.modal,r=void 0===n||n,i=qi(Xt(e,["modal"])),o=Object(l.useState)(r),a=o[0],s=o[1],c=Object(l.useRef)(null);return Yt(Yt({},i),{},{modal:a,setModal:s,unstable_disclosureRef:c})}var Wi=Ne("Mac")&&!Ne("Chrome")&&Ne("Safari");function Zi(t){return function(e){return t&&!me(e,t)?t:e}}function $i(t){void 0===t&&(t={});var e=zr(t),n=e.gutter,r=void 0===n?12:n,i=e.placement,o=void 0===i?"bottom":i,a=e.unstable_flip,s=void 0===a||a,c=e.unstable_offset,u=e.unstable_preventOverflow,h=void 0===u||u,d=e.unstable_fixed,p=void 0!==d&&d,f=e.modal,m=void 0!==f&&f,g=Xt(e,["gutter","placement","unstable_flip","unstable_offset","unstable_preventOverflow","unstable_fixed","modal"]),y=Object(l.useRef)(null),v=Object(l.useRef)(null),_=Object(l.useRef)(null),b=Object(l.useRef)(null),x=Object(l.useState)(o),w=x[0],E=x[1],C=Object(l.useState)(o),S=C[0],T=C[1],O=Object(l.useState)(c||[0,r])[0],I=Object(l.useState)({position:"fixed",left:"100%",top:"100%"}),A=I[0],M=I[1],k=Object(l.useState)({}),P=k[0],D=k[1],R=Hi(Yt({modal:m},g)),L=Object(l.useCallback)((function(){return!!y.current&&(y.current.forceUpdate(),!0)}),[]),N=Object(l.useCallback)((function(t){t.placement&&T(t.placement),t.styles&&(M(Zi(t.styles.popper)),b.current&&D(Zi(t.styles.arrow)))}),[]);return Ae((function(){return v.current&&_.current&&(y.current=Bi(v.current,_.current,{placement:w,strategy:p?"fixed":"absolute",onFirstUpdate:Wi?N:void 0,modifiers:[{name:"eventListeners",enabled:R.visible},{name:"applyStyles",enabled:!1},{name:"flip",enabled:s,options:{padding:8}},{name:"offset",options:{offset:O}},{name:"preventOverflow",enabled:h,options:{tetherOffset:function(){var t;return(null===(t=b.current)||void 0===t?void 0:t.clientWidth)||0}}},{name:"arrow",enabled:!!b.current,options:{element:b.current}},{name:"updateState",phase:"write",requires:["computeStyles"],enabled:R.visible&&!0,fn:function(t){var e=t.state;return N(e)}}]})),function(){y.current&&(y.current.destroy(),y.current=null)}}),[w,p,R.visible,s,O,h]),Object(l.useEffect)((function(){if(R.visible){var t=window.requestAnimationFrame((function(){var t;null===(t=y.current)||void 0===t||t.forceUpdate()}));return function(){window.cancelAnimationFrame(t)}}}),[R.visible]),Yt(Yt({},R),{},{unstable_referenceRef:v,unstable_popoverRef:_,unstable_arrowRef:b,unstable_popoverStyles:A,unstable_arrowStyles:P,unstable_update:L,unstable_originalPlacement:w,placement:S,place:E})}var Ki=["baseId","unstable_idCountRef","visible","animated","animating","setBaseId","show","hide","toggle","setVisible","setAnimated","stopAnimation","modal","unstable_disclosureRef","setModal","unstable_referenceRef","unstable_popoverRef","unstable_arrowRef","unstable_popoverStyles","unstable_arrowStyles","unstable_originalPlacement","unstable_update","placement","place"],Yi=[].concat(Ki,["size"]),Xi=Ki,Ji=Xi,Qi=["baseId","unstable_idCountRef","visible","animated","animating","setBaseId","show","hide","toggle","setVisible","setAnimated","stopAnimation","modal","unstable_disclosureRef","setModal"],to=[].concat(Qi,["hideOnEsc","hideOnClickOutside","preventBodyScroll","unstable_initialFocusRef","unstable_finalFocusRef","unstable_orphan","unstable_autoFocusOnShow","unstable_autoFocusOnHide"]),eo=Qi,no=eo,ro=["baseId","unstable_idCountRef","visible","animated","animating","setBaseId","show","hide","toggle","setVisible","setAnimated","stopAnimation"],io=ro,oo=_e({name:"Disclosure",compose:Je,keys:ro,useProps:function(t,e){var n=e.onClick,r=e["aria-controls"],i=Xt(e,["onClick","aria-controls"]),o=Me(n),a=r?r+" "+t.baseId:t.baseId,s=Object(l.useCallback)((function(e){var n,r;null===(n=o.current)||void 0===n||n.call(o,e),e.defaultPrevented||null===(r=t.toggle)||void 0===r||r.call(t)}),[t.toggle]);return Yt({"aria-expanded":!!t.visible,"aria-controls":a,onClick:s},i)}}),ao=(ye({as:"button",memo:!0,useHook:oo}),_e({name:"DialogDisclosure",compose:oo,keys:no,useProps:function(t,e){var n=e.ref,r=e.onClick,i=Xt(e,["ref","onClick"]),o=Object(l.useRef)(null),a=Me(r),s=Object(l.useState)(!1),c=s[0],u=s[1],h=t.unstable_disclosureRef;Ae((function(){var e=o.current;h&&!h.current&&(h.current=e);var n=!(null!=h&&h.current)||h.current===e;u(!!t.visible&&n)}),[t.visible,h]);var d=Object(l.useCallback)((function(t){var e;null===(e=a.current)||void 0===e||e.call(a,t),t.defaultPrevented||h&&(h.current=t.currentTarget)}),[h]);return Yt({ref:xe(o,n),"aria-haspopup":"dialog","aria-expanded":c,onClick:d},i)}})),so=(ye({as:"button",memo:!0,useHook:ao}),_e({name:"PopoverDisclosure",compose:ao,keys:Ji,useProps:function(t,e){var n=e.ref,r=Xt(e,["ref"]);return Yt({ref:xe(t.unstable_referenceRef,n)},r)}})),lo=ye({as:"button",memo:!0,useHook:so}),co=n(84),uo=_e({name:"DisclosureContent",compose:qe,keys:io,useProps:function(t,e){var n=e.onTransitionEnd,r=e.onAnimationEnd,i=e.style,o=Xt(e,["onTransitionEnd","onAnimationEnd","style"]),a=t.animated&&t.animating,s=Object(l.useState)(null),c=s[0],u=s[1],h=!t.visible&&!a,d=h?Yt({display:"none"},i):i,p=Me(n),f=Me(r),m=Object(l.useRef)(0);Object(l.useEffect)((function(){if(t.animated)return m.current=window.requestAnimationFrame((function(){m.current=window.requestAnimationFrame((function(){t.visible?u("enter"):u(a?"leave":null)}))})),function(){return window.cancelAnimationFrame(m.current)}}),[t.animated,t.visible,a]);var g=Object(l.useCallback)((function(e){var n;ke(e)&&(a&&!0===t.animated&&(null===(n=t.stopAnimation)||void 0===n||n.call(t)))}),[t.animated,a,t.stopAnimation]),y=Object(l.useCallback)((function(t){var e;null===(e=p.current)||void 0===e||e.call(p,t),g(t)}),[g]),v=Object(l.useCallback)((function(t){var e;null===(e=f.current)||void 0===e||e.call(f,t),g(t)}),[g]);return Yt({id:t.baseId,"data-enter":"enter"===c?"":void 0,"data-leave":"leave"===c?"":void 0,onTransitionEnd:y,onAnimationEnd:v,hidden:h,style:d},o)}});ye({as:"div",useHook:uo});function ho(){return Ie?document.body:null}var po=Object(l.createContext)(ho());function fo(t){var e=t.children,n=Object(l.useContext)(po)||ho(),r=Object(l.useState)((function(){if(Ie){var t=document.createElement("div");return t.className=fo.__className,t}return null}))[0];return Ae((function(){if(r&&n)return n.appendChild(r),function(){n.removeChild(r)}}),[r,n]),r?Object(co.createPortal)(Object(l.createElement)(po.Provider,{value:r},e),r):null}fo.__className="__reakit-portal",fo.__selector="."+fo.__className;var mo=Object(l.createContext)(void 0),go=_e({name:"DialogBackdrop",compose:uo,keys:eo,useOptions:function(t){var e=t.modal;return Yt({modal:void 0===e||e},Xt(t,["modal"]))},useProps:function(t,e){var n=e.wrapElement,r=Xt(e,["wrapElement"]),i=Object(l.useCallback)((function(e){return t.modal&&(e=Object(l.createElement)(fo,null,Object(l.createElement)(mo.Provider,{value:t.baseId},e))),n?n(e):e}),[t.modal,n]);return Yt({id:void 0,"data-dialog-ref":t.baseId,wrapElement:i},r)}}),yo=ye({as:"div",memo:!0,useHook:go}),vo=ye({as:"div",memo:!0,useHook:_e({name:"PopoverBackdrop",compose:go,keys:Xi,useOptions:function(t){var e=t.modal;return Yt({modal:void 0!==e&&e},Xt(t,["modal"]))}})});function _o(t,e){var n=Object(l.useRef)(!1);Object(l.useEffect)((function(){if(n.current)return t();n.current=!0}),e)}var bo=Ie&&"msCrypto"in window;function xo(t){return bo?Pe(t.currentTarget):t.relatedTarget}function wo(t){var e=Pe(t);if(!e)return!1;if(e===t)return!0;var n=e.getAttribute("aria-activedescendant");return!!n&&n===t.id}function Eo(t,e){var n=void 0===e?{}:e,r=n.preventScroll,i=n.isActive,o=void 0===i?wo:i;return o(t)?-1:(t.focus({preventScroll:r}),o(t)?-1:requestAnimationFrame((function(){t.focus({preventScroll:r})})))}function Co(t,e){var n=t.indexOf(e);return function(t,e){return-1===e?t:[].concat(t.slice(0,e),t.slice(e+1))}(t,n)}var So=Object(l.createContext)(null);var To=!1;if("undefined"!=typeof window){var Oo={get passive(){To=!0}};window.addEventListener("testPassive",null,Oo),window.removeEventListener("testPassive",null,Oo)}var Io="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1),Ao=[],Mo=!1,ko=-1,Po=void 0,Do=void 0,Ro=function(t){return Ao.some((function(e){return!(!e.options.allowTouchMove||!e.options.allowTouchMove(t))}))},Lo=function(t){var e=t||window.event;return!!Ro(e.target)||(e.touches.length>1||(e.preventDefault&&e.preventDefault(),!1))},No=function(){void 0!==Do&&(document.body.style.paddingRight=Do,Do=void 0),void 0!==Po&&(document.body.style.overflow=Po,Po=void 0)},jo=function(t,e){if(t){if(!Ao.some((function(e){return e.targetElement===t}))){var n={targetElement:t,options:e||{}};Ao=[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(Ao),[n]),Io?(t.ontouchstart=function(t){1===t.targetTouches.length&&(ko=t.targetTouches[0].clientY)},t.ontouchmove=function(e){1===e.targetTouches.length&&function(t,e){var n=t.targetTouches[0].clientY-ko;!Ro(t.target)&&(e&&0===e.scrollTop&&n>0||function(t){return!!t&&t.scrollHeight-t.scrollTop<=t.clientHeight}(e)&&n<0?Lo(t):t.stopPropagation())}(e,t)},Mo||(document.addEventListener("touchmove",Lo,To?{passive:!1}:void 0),Mo=!0)):function(t){if(void 0===Do){var e=!!t&&!0===t.reserveScrollBarGap,n=window.innerWidth-document.documentElement.clientWidth;e&&n>0&&(Do=document.body.style.paddingRight,document.body.style.paddingRight=n+"px")}void 0===Po&&(Po=document.body.style.overflow,document.body.style.overflow="hidden")}(e)}}else console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.")};function Fo(t,e){var n=Boolean(e.preventBodyScroll&&e.visible);Object(l.useEffect)((function(){var e=t.current;if(e&&n)return jo(e,{reserveScrollBarGap:!0}),function(){var t;(t=e)?(Ao=Ao.filter((function(e){return e.targetElement!==t})),Io?(t.ontouchstart=null,t.ontouchmove=null,Mo&&0===Ao.length&&(document.removeEventListener("touchmove",Lo,To?{passive:!1}:void 0),Mo=!1)):Ao.length||No()):console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.")}}),[t,n])}function zo(t){null!=t.parentNode&&t.parentNode.removeChild(t)}function Bo(t,e,n){var r=function(t,e){var n=Object(l.useRef)(null);return Object(l.useEffect)((function(){var r=t.current;r&&e.visible&&(n.current=Fe(r,fo.__selector))}),[t,e.visible]),n}(t,n),i=n.visible&&n.modal,o=Object(l.useRef)(null),a=Object(l.useRef)(null);Object(l.useEffect)((function(){if(i){var t=r.current;if(t){if(!o.current){var e=Se(t);o.current=e.createElement("div"),o.current.className="__reakit-focus-trap",o.current.tabIndex=0,o.current.style.position="fixed",o.current.setAttribute("aria-hidden","true")}return a.current||(a.current=o.current.cloneNode()),t.insertAdjacentElement("beforebegin",o.current),t.insertAdjacentElement("afterend",a.current),function(){o.current&&zo(o.current),a.current&&zo(a.current)}}}}),[r,i]),Object(l.useEffect)((function(){var n=o.current,r=a.current;if(i&&n&&r){var s=function(n){var i=t.current;if(i&&!e.length){n.preventDefault();var o,a,s=n.target===r?Ve(i):(a=Ge(i,o))[a.length-1]||null;s?s.focus():i.focus()}};return n.addEventListener("focus",s),r.addEventListener("focus",s),function(){n.removeEventListener("focus",s),r.removeEventListener("focus",s)}}}),[t,e,i])}function Uo(t,e,n){var r=n.unstable_autoFocusOnHide&&!n.visible,i=!(!n.animated||!n.animating);_o((function(){var o;if(r&&!i&&!function(t){var e=t.current;if(!e)return!1;var n=Pe(e);return!!n&&(!De(e,n)&&(!!Ue(n)||"true"===n.getAttribute("data-dialog")))}(t)){var a=(null===(o=n.unstable_finalFocusRef)||void 0===o?void 0:o.current)||e.current;if(a){if(a.id){var s=Se(a).querySelector("[aria-activedescendant='"+a.id+"']");if(s)return void Eo(s)}Eo(a)}else;}}),[r,i,t,e])}var Go=Object(l.createContext)({});function Vo(t,e,n,r,i,o,a){var s=Me(i);Object(l.useEffect)((function(){if(o){var i=function(r){if(s.current){var i,o=t.current,a=e.current,l=r.target;if(o)if(function(t){var e=Se(t);return"HTML"===t.tagName||De(e.body,t)}(l))if(!De(o,l))if(!a||!function(t,e){return De(e,t)}(l,a))if(!(null===(i=l.classList)||void 0===i?void 0:i.contains("__reakit-focus-trap"))&&!n.some(function(t){return function(e){var n=e.current;if(!n)return!1;if(De(n,t))return!0;var r=Se(n).querySelector('[data-dialog-ref="'+n.id+'"]');return!!r&&De(r,t)}}(l)))s.current(r)}},l=Se(t.current);return l.addEventListener(r,i,a),function(){return l.removeEventListener(r,i,a)}}}),[t,e,n,r,o,s])}function qo(t,e,n,r){var i=function(t,e){var n=Object(l.useRef)();return Object(l.useEffect)((function(){if(e.visible&&e.hideOnClickOutside){var r=Se(t.current),i=function(t){n.current=t.target};return r.addEventListener("mousedown",i),function(){return r.removeEventListener("mousedown",i)}}}),[e.visible,e.hideOnClickOutside,t]),n}(t,r);Vo(t,e,n,"click",(function(t){var e;i.current===t.target&&(null===(e=r.hide)||void 0===e||e.call(r))}),r.visible&&r.hideOnClickOutside),Vo(t,e,n,"focusin",(function(e){var n,i=Se(t.current);e.target!==i&&e.target!==i.body&&(null===(n=r.hide)||void 0===n||n.call(r))}),r.visible&&r.hideOnClickOutside)}function Ho(t,e){Object(l.useEffect)((function(){var n=t.current;if(e.visible&&n){var r=new MutationObserver((function(t){if(t[0].target===n){var e,r=Se(n),i=Pe(n);i!==r.body&&(e=i,Array.isArray(e)?e.length:he(e)?Object.keys(e).length:null!=e&&""!==e)||n.focus()}}));return r.observe(n,{childList:!0,subtree:!0}),function(){r.disconnect()}}}),[e.visible,t])}function Wo(t){return t&&t.tagName&&"HTML"!==t.tagName&&t!==Se(t).body}var Zo=_e({name:"Dialog",compose:uo,keys:to,useOptions:function(t){var e=t.modal,n=void 0===e||e,r=t.hideOnEsc,i=void 0===r||r,o=t.hideOnClickOutside,a=void 0===o||o,s=t.preventBodyScroll,l=void 0===s?n:s,c=t.unstable_autoFocusOnShow,u=void 0===c||c,h=t.unstable_autoFocusOnHide,d=void 0===h||h,p=t.unstable_orphan;return Yt({modal:n,hideOnEsc:i,hideOnClickOutside:a,preventBodyScroll:n&&l,unstable_autoFocusOnShow:u,unstable_autoFocusOnHide:d,unstable_orphan:n&&p},Xt(t,["modal","hideOnEsc","hideOnClickOutside","preventBodyScroll","unstable_autoFocusOnShow","unstable_autoFocusOnHide","unstable_orphan"]))},useProps:function(t,e){var n=e.ref,r=e.onKeyDown,i=e.onBlur,o=e.wrapElement,a=e.tabIndex,s=Xt(e,["ref","onKeyDown","onBlur","wrapElement","tabIndex"]),c=Object(l.useRef)(null),u=Object(l.useContext)(mo),h=u&&u===t.baseId,d=function(t,e){var n=Object(l.useRef)(null),r=!(!e.animated||!e.animating);return Object(l.useEffect)((function(){if(!e.visible&&!r){var i=function(t){var r=t.target;"focus"in r&&(n.current=r,e.unstable_disclosureRef&&(e.unstable_disclosureRef.current=r))},o=Se(t.current);return o.addEventListener("focusin",i),function(){return o.removeEventListener("focusin",i)}}}),[e.visible,r,e.unstable_disclosureRef,t]),Object(l.useEffect)((function(){var t;if(e.visible&&!r){var i=function(t){var e=t.currentTarget;Ce(e)&&(t.preventDefault(),e.focus())},o=(null===(t=e.unstable_disclosureRef)||void 0===t?void 0:t.current)||n.current;return null==o||o.addEventListener("mousedown",i),function(){return null==o?void 0:o.removeEventListener("mousedown",i)}}}),[e.visible,r,e.unstable_disclosureRef]),e.unstable_disclosureRef||n}(c,t),p=Me(r),f=Me(i),m=function(t,e){var n=Object(l.useReducer)((function(t){return t+1}),0),r=n[0],i=n[1];return Ae((function(){var n=t.current;e.visible&&r&&(Wo(Pe(n))||null==n||n.focus())}),[r,t]),Object(l.useCallback)((function(t){e.visible&&(Wo(xo(t))||i())}),[e.visible])}(c,t),g=function(t,e){var n=Object(l.useContext)(Go),r=Object(l.useState)([]),i=r[0],o=r[1],a=Object(l.useState)(i),s=a[0],c=a[1],u=Object(l.useCallback)((function(t){var e;null===(e=n.addDialog)||void 0===e||e.call(n,t),o((function(e){return[].concat(e,[t])}))}),[n.addDialog]),h=Object(l.useCallback)((function(t){var e;null===(e=n.removeDialog)||void 0===e||e.call(n,t),o((function(e){return Co(e,t)}))}),[n.removeDialog]),d=Object(l.useCallback)((function(t){var e;null===(e=n.showDialog)||void 0===e||e.call(n,t),c((function(e){return[].concat(e,[t])}))}),[n.showDialog]),p=Object(l.useCallback)((function(t){var e;null===(e=n.hideDialog)||void 0===e||e.call(n,t),c((function(e){return Co(e,t)}))}),[n.hideDialog]);Object(l.useEffect)((function(){var r;if(!e.unstable_orphan)return null===(r=n.addDialog)||void 0===r||r.call(n,t),function(){var e;null===(e=n.removeDialog)||void 0===e||e.call(n,t)}}),[e.unstable_orphan,n.addDialog,t,n.removeDialog]),Object(l.useEffect)((function(){var r;if(!e.unstable_orphan&&e.modal&&e.visible)return null===(r=n.showDialog)||void 0===r||r.call(n,t),function(){var e;null===(e=n.hideDialog)||void 0===e||e.call(n,t)}}),[e.unstable_orphan,e.modal,e.visible,n.showDialog,t,n.hideDialog]),Object(l.useEffect)((function(){var t;!1===n.visible&&e.visible&&!e.unstable_orphan&&(null===(t=e.hide)||void 0===t||t.call(e))}),[n.visible,e.visible,e.hide,e.unstable_orphan]);var f=Object(l.useMemo)((function(){return{visible:e.visible,addDialog:u,removeDialog:h,showDialog:d,hideDialog:p}}),[e.visible,u,h,d,p]);return{dialogs:i,visibleModals:s,wrap:Object(l.useCallback)((function(t){return Object(l.createElement)(Go.Provider,{value:f},t)}),[f])}}(c,t),y=g.dialogs,v=g.visibleModals,_=g.wrap,b=!(!t.modal||v.length)||void 0;Fo(c,t),Bo(c,v,t),Ho(c,t),function(t,e,n){var r=n.unstable_initialFocusRef,i=n.visible&&n.unstable_autoFocusOnShow,o=!(!n.animated||!n.animating);_o((function(){var n=t.current;if(i&&n&&!o&&!e.some((function(t){return t.current&&!t.current.hidden})))if(null!=r&&r.current)r.current.focus({preventScroll:!0});else{var a=Ve(n,!0),s=function(){return Re(n)};Eo(a||n,{preventScroll:!0,isActive:s})}}),[t,i,o,e,r])}(c,y,t),Uo(c,d,t),qo(c,d,y,t),function(t,e,n){var r=function(r){return Vo(t,{current:null},e,r,(function(t){t.stopPropagation(),t.preventDefault()}),n.visible&&n.modal,!0)};r("mouseover"),r("mousemove"),r("mouseout")}(c,y,t);var x=Object(l.useCallback)((function(e){var n;null===(n=p.current)||void 0===n||n.call(p,e),e.defaultPrevented||"Escape"===e.key&&t.hideOnEsc&&t.hide&&(e.stopPropagation(),t.hide())}),[t.hideOnEsc,t.hide]),w=Object(l.useCallback)((function(t){var e;null===(e=f.current)||void 0===e||e.call(f,t),m(t)}),[m]),E=Object(l.useCallback)((function(e){return e=_(e),t.modal&&!h&&(e=Object(l.createElement)(fo,null,e)),o&&(e=o(e)),Object(l.createElement)(So.Provider,{value:null},e)}),[_,t.modal,h,o]);return Yt({ref:xe(c,n),role:"dialog",tabIndex:null!=a?a:-1,"aria-modal":b,"data-dialog":!0,onKeyDown:x,onBlur:w,wrapElement:E},s)}}),$o=ye({as:"div",useHook:Zo,useCreateElement:function(t,e,n){return se(t,e,n)}}),Ko=_e({name:"Popover",compose:Zo,keys:Ki,useOptions:function(t){var e=t.modal;return Yt({modal:void 0!==e&&e},Xt(t,["modal"]))},useProps:function(t,e){var n=e.ref,r=e.style,i=Xt(e,["ref","style"]);return Yt({ref:xe(t.unstable_popoverRef,n),style:Yt(Yt({},t.unstable_popoverStyles),r)},i)}}),Yo=ye({as:"div",useHook:Ko,useCreateElement:function(t,e,n){return se(t,e,n)}}),Xo=ye({as:"div",memo:!0,useHook:_e({name:"PopoverArrow",compose:qe,keys:Yi,useOptions:function(t){var e=t.size;return Yt({size:void 0===e?30:e},Xt(t,["size"]))},useProps:function(t,e){var n,r=e.ref,i=e.style,o=Xt(e,["ref","style"]),a=t.placement.split("-")[0],s=t.unstable_arrowStyles,c={top:"rotateZ(180deg)",right:"rotateZ(-90deg)",bottom:"rotateZ(360deg)",left:"rotateZ(90deg)"}[a],u=Object(l.useMemo)((function(){return Object(l.createElement)("svg",{viewBox:"0 0 30 30",style:{transform:c}},Object(l.createElement)("path",{className:"stroke",d:"M23.7,27.1L17,19.9C16.5,19.3,15.8,19,15,19s-1.6,0.3-2.1,0.9l-6.6,7.2C5.3,28.1,3.4,29,2,29h26 C26.7,29,24.6,28.1,23.7,27.1z"}),Object(l.createElement)("path",{className:"fill",d:"M23,27.8c1.1,1.2,3.4,2.2,5,2.2h2H0h2c1.7,0,3.9-1,5-2.2l6.6-7.2c0.7-0.8,2-0.8,2.7,0L23,27.8L23,27.8z"}))}),[c]);return Yt({ref:xe(t.unstable_arrowRef,r),style:Yt(Yt({},s),{},(n={fontSize:t.size,width:"1em",height:"1em",pointerEvents:"none"},n[a]="100%",n),i),children:u},o)}})}),Jo=["as","appRoot","style"];function Qo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ta(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Qo(Object(n),!0).forEach((function(e){Ft()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qo(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ea=c.a.forwardRef((function(t,e){var n=t.as,r=void 0===n?"div":n,i=t.appRoot,a=void 0!==i&&i,c=t.style,u=s()(t,Jo),h=Object(l.useContext)(Zt),d=h.cssVariables,p=void 0===d?{}:d;return kt(r,o()({ref:e},u,{style:ta(ta({},p),c),css:Ir({theme:h,appRoot:a})}))}));ea.displayName="Root";var na=["trigger","placement","visible","modal","onClickOutside","children"];var ra,ia=function(t){return Pt("background-color:",t.darkTheme?"#0000006b":"#00000040",";position:fixed;top:0px;right:0px;bottom:0px;left:0px;z-index:999;","")},oa={name:"zdqm6i",styles:"max-height:calc(100vh - 100px)"},aa=function(t){return oa},sa=function(t){return Pt("background-color:",t.paperBackground500,";top:28px;left:50%;transform:translateX(-50%);z-index:999;border-radius:",t.borderRadius,"px;outline:0px;border:1px solid ",t.paperBorderColor,";&:focus{outline:none;}&>.arrow{background-color:transparent;& .stroke{fill:",t.paperBorderColor,";}& .fill{fill:",t.paperBackground500,";}}","")},la=function(t){var e=t.trigger,n=(t.placement,t.visible),r=t.modal,i=t.onClickOutside,a=t.children,u=s()(t,na),h=Object(l.useContext)(Zt),d=$i({modal:r||!1,unstable_preventOverflow:!0,placement:"auto",visible:n,altAxis:!0,altBoundary:!0}),p=c.a.useRef();return c.a.useEffect((function(){d.visible&&p&&p.current&&p.current.focus()}),[d.visible]),kt(c.a.Fragment,null,kt(lo,o()({},d,e.props),(function(t){return c.a.cloneElement(e,t)})),kt(vo,o()({},d,{css:ia(h),onClick:function(){return i?i(d):void 0}})),kt(Yo,o()({dir:h.dir},d,u,{hideOnClickOutside:!1,hideOnEsc:!0,preventBodyScroll:!1}),(function(t){return d.visible&&kt(ea,o()({},t,{css:sa(h)}),kt(Xo,o()({className:"arrow"},d)),kt("div",{css:aa(h)},"function"==typeof a?a({hide:d.hide,focusRef:p}):c.a.cloneElement(a,{hide:d.hide,focusRef:p})))})))},ca=["active","error","className"];var ua=Dt(ra||(ra=en()(["\n  from {\n    left: -200,\n    width: 30% \n  }\n  50% {\n    width: 30%\n  }\n  70% {\n    width: 70%\n  }\n  80% {\n    left: 50%\n  }\n  95% {\n    left: 120%\n  }\n  to {\n    left: 100%\n  }\n"]))),ha={name:"8fnkdg",styles:"background-color:tomato;left:0;animation:none;width:100%"},da=function(t){var e=t.error,n=t.theme;return Pt("display:block;position:absolute;content:'';left:-200px;width:200px;height:1px;background-color:",n.primary,";animation:",ua," 1.5s linear infinite;",e?ha:null,";","")};function pa(t){var e=t.active,n=t.error,r=t.className,i=(s()(t,ca),Object(l.useContext)(Zt)),a=pn(i.prefix,"stripeLoader",{active:e,error:n},r).classNames;return kt("div",o()({},a,{css:Pt("height:1px;width:100%;position:relative;overflow:hidden;&:before{",e?da({error:n,theme:i}):null,";}","")}))}function fa(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}function ma(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var ga=n(50),ya=n(5),va=n.n(ya);n(187);function _a(t){return"object"==typeof t&&null!=t&&1===t.nodeType}function ba(t,e){return(!e||"hidden"!==t)&&"visible"!==t&&"clip"!==t}function xa(t,e){if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){var n=getComputedStyle(t,null);return ba(n.overflowY,e)||ba(n.overflowX,e)||function(t){var e=function(t){if(!t.ownerDocument||!t.ownerDocument.defaultView)return null;try{return t.ownerDocument.defaultView.frameElement}catch(t){return null}}(t);return!!e&&(e.clientHeight<t.scrollHeight||e.clientWidth<t.scrollWidth)}(t)}return!1}function wa(t,e,n,r,i,o,a,s){return o<t&&a>e||o>t&&a<e?0:o<=t&&s<=n||a>=e&&s>=n?o-t-r:a>e&&s<n||o<t&&s>n?a-e+i:0}var Ea=n(6),Ca=0;function Sa(t){return"function"==typeof t?t:Ta}function Ta(){}function Oa(t,e){t&&function(t,e){var n=window,r=e.scrollMode,i=e.block,o=e.inline,a=e.boundary,s=e.skipOverflowHiddenElements,l="function"==typeof a?a:function(t){return t!==a};if(!_a(t))throw new TypeError("Invalid target");for(var c=document.scrollingElement||document.documentElement,u=[],h=t;_a(h)&&l(h);){if((h=h.parentElement)===c){u.push(h);break}null!=h&&h===document.body&&xa(h)&&!xa(document.documentElement)||null!=h&&xa(h,s)&&u.push(h)}for(var d=n.visualViewport?n.visualViewport.width:innerWidth,p=n.visualViewport?n.visualViewport.height:innerHeight,f=window.scrollX||pageXOffset,m=window.scrollY||pageYOffset,g=t.getBoundingClientRect(),y=g.height,v=g.width,_=g.top,b=g.right,x=g.bottom,w=g.left,E="start"===i||"nearest"===i?_:"end"===i?x:_+y/2,C="center"===o?w+v/2:"end"===o?b:w,S=[],T=0;T<u.length;T++){var O=u[T],I=O.getBoundingClientRect(),A=I.height,M=I.width,k=I.top,P=I.right,D=I.bottom,R=I.left;if("if-needed"===r&&_>=0&&w>=0&&x<=p&&b<=d&&_>=k&&x<=D&&w>=R&&b<=P)return S;var L=getComputedStyle(O),N=parseInt(L.borderLeftWidth,10),j=parseInt(L.borderTopWidth,10),F=parseInt(L.borderRightWidth,10),z=parseInt(L.borderBottomWidth,10),B=0,U=0,G="offsetWidth"in O?O.offsetWidth-O.clientWidth-N-F:0,V="offsetHeight"in O?O.offsetHeight-O.clientHeight-j-z:0;if(c===O)B="start"===i?E:"end"===i?E-p:"nearest"===i?wa(m,m+p,p,j,z,m+E,m+E+y,y):E-p/2,U="start"===o?C:"center"===o?C-d/2:"end"===o?C-d:wa(f,f+d,d,N,F,f+C,f+C+v,v),B=Math.max(0,B+m),U=Math.max(0,U+f);else{B="start"===i?E-k-j:"end"===i?E-D+z+V:"nearest"===i?wa(k,D,A,j,z+V,E,E+y,y):E-(k+A/2)+V/2,U="start"===o?C-R-N:"center"===o?C-(R+M/2)+G/2:"end"===o?C-P+F+G:wa(R,P,M,N,F+G,C,C+v,v);var q=O.scrollLeft,H=O.scrollTop;E+=H-(B=Math.max(0,Math.min(H+B,O.scrollHeight-A+V))),C+=q-(U=Math.max(0,Math.min(q+U,O.scrollWidth-M+G)))}S.push({el:O,top:B,left:U})}return S}(t,{boundary:e,block:"nearest",scrollMode:"if-needed"}).forEach((function(t){var e=t.el,n=t.top,r=t.left;e.scrollTop=n,e.scrollLeft=r}))}function Ia(t,e,n){return t===e||e instanceof n.Node&&t.contains&&t.contains(e)}function Aa(t,e){var n;function r(){n&&clearTimeout(n)}function i(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];r(),n=setTimeout((function(){n=null,t.apply(void 0,o)}),e)}return i.cancel=r,i}function Ma(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return e.some((function(e){return e&&e.apply(void 0,[t].concat(r)),t.preventDownshiftDefault||t.hasOwnProperty("nativeEvent")&&t.nativeEvent.preventDownshiftDefault}))}}function ka(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){e.forEach((function(e){"function"==typeof e?e(t):e&&(e.current=t)}))}}function Pa(){return String(Ca++)}function Da(t){var e=t.isOpen,n=t.resultCount,r=t.previousResultCount;return e?n?n!==r?n+" result"+(1===n?" is":"s are")+" available, use up and down arrow keys to navigate. Press Enter key to select.":"":"No results are available.":""}function Ra(t,e){return!(t=Array.isArray(t)?t[0]:t)&&e?e:t}function La(t){return"string"==typeof t.type}function Na(t){return t.props}var ja=["highlightedIndex","inputValue","isOpen","selectedItem","type"];function Fa(t){void 0===t&&(t={});var e={};return ja.forEach((function(n){t.hasOwnProperty(n)&&(e[n]=t[n])})),e}function za(t,e){return Object.keys(t).reduce((function(n,r){return n[r]=Ba(e,r)?e[r]:t[r],n}),{})}function Ba(t,e){return void 0!==t[e]}function Ua(t){var e=t.key,n=t.keyCode;return n>=37&&n<=40&&0!==e.indexOf("Arrow")?"Arrow"+e:e}function Ga(t,e,n,r,i){if(void 0===i&&(i=!0),0===n)return-1;var o=n-1;("number"!=typeof e||e<0||e>=n)&&(e=t>0?-1:o+1);var a=e+t;a<0?a=i?o:0:a>o&&(a=i?0:o);var s=Va(t,a,n,r,i);return-1===s?e>=n?-1:e:s}function Va(t,e,n,r,i){var o=r(e);if(!o||!o.hasAttribute("disabled"))return e;if(t>0){for(var a=e+1;a<n;a++)if(!r(a).hasAttribute("disabled"))return a}else for(var s=e-1;s>=0;s--)if(!r(s).hasAttribute("disabled"))return s;return i?t>0?Va(1,0,n,r,!1):Va(-1,n-1,n,r,!1):-1}function qa(t,e,n,r){return void 0===r&&(r=!0),e.some((function(e){return e&&(Ia(e,t,n)||r&&Ia(e,n.document.activeElement,n))}))}var Ha=Aa((function(t){Za(t).textContent=""}),500);function Wa(t,e){var n=Za(e);t&&(n.textContent=t,Ha(e))}function Za(t){void 0===t&&(t=document);var e=t.getElementById("a11y-status-message");return e||((e=t.createElement("div")).setAttribute("id","a11y-status-message"),e.setAttribute("role","status"),e.setAttribute("aria-live","polite"),e.setAttribute("aria-relevant","additions text"),Object.assign(e.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),t.body.appendChild(e),e)}var $a=Object.freeze({__proto__:null,unknown:0,mouseUp:1,itemMouseEnter:2,keyDownArrowUp:3,keyDownArrowDown:4,keyDownEscape:5,keyDownEnter:6,keyDownHome:7,keyDownEnd:8,clickItem:9,blurInput:10,changeInput:11,keyDownSpaceButton:12,clickButton:13,blurButton:14,controlledPropUpdatedSelectedItem:15,touchEnd:16}),Ka=["refKey","ref"],Ya=["onClick","onPress","onKeyDown","onKeyUp","onBlur"],Xa=["onKeyDown","onBlur","onChange","onInput","onChangeText"],Ja=["refKey","ref"],Qa=["onMouseMove","onMouseDown","onClick","onPress","index","item"],ts=function(){var t=function(t){function e(e){var n;(n=t.call(this,e)||this).id=n.props.id||"downshift-"+Pa(),n.menuId=n.props.menuId||n.id+"-menu",n.labelId=n.props.labelId||n.id+"-label",n.inputId=n.props.inputId||n.id+"-input",n.getItemId=n.props.getItemId||function(t){return n.id+"-item-"+t},n.input=null,n.items=[],n.itemCount=null,n.previousResultCount=0,n.timeoutIds=[],n.internalSetTimeout=function(t,e){var r=setTimeout((function(){n.timeoutIds=n.timeoutIds.filter((function(t){return t!==r})),t()}),e);n.timeoutIds.push(r)},n.setItemCount=function(t){n.itemCount=t},n.unsetItemCount=function(){n.itemCount=null},n.setHighlightedIndex=function(t,e){void 0===t&&(t=n.props.defaultHighlightedIndex),void 0===e&&(e={}),e=Fa(e),n.internalSetState(at({highlightedIndex:t},e))},n.clearSelection=function(t){n.internalSetState({selectedItem:null,inputValue:"",highlightedIndex:n.props.defaultHighlightedIndex,isOpen:n.props.defaultIsOpen},t)},n.selectItem=function(t,e,r){e=Fa(e),n.internalSetState(at({isOpen:n.props.defaultIsOpen,highlightedIndex:n.props.defaultHighlightedIndex,selectedItem:t,inputValue:n.props.itemToString(t)},e),r)},n.selectItemAtIndex=function(t,e,r){var i=n.items[t];null!=i&&n.selectItem(i,e,r)},n.selectHighlightedItem=function(t,e){return n.selectItemAtIndex(n.getState().highlightedIndex,t,e)},n.internalSetState=function(t,e){var r,i,o={},a="function"==typeof t;return!a&&t.hasOwnProperty("inputValue")&&n.props.onInputValueChange(t.inputValue,at({},n.getStateAndHelpers(),t)),n.setState((function(e){e=n.getState(e);var s=a?t(e):t;s=n.props.stateReducer(e,s),r=s.hasOwnProperty("selectedItem");var l={},c={};return r&&s.selectedItem!==e.selectedItem&&(i=s.selectedItem),s.type=s.type||0,Object.keys(s).forEach((function(t){e[t]!==s[t]&&(o[t]=s[t]),"type"!==t&&(c[t]=s[t],Ba(n.props,t)||(l[t]=s[t]))})),a&&s.hasOwnProperty("inputValue")&&n.props.onInputValueChange(s.inputValue,at({},n.getStateAndHelpers(),s)),l}),(function(){Sa(e)(),Object.keys(o).length>1&&n.props.onStateChange(o,n.getStateAndHelpers()),r&&n.props.onSelect(t.selectedItem,n.getStateAndHelpers()),void 0!==i&&n.props.onChange(i,n.getStateAndHelpers()),n.props.onUserAction(o,n.getStateAndHelpers())}))},n.rootRef=function(t){return n._rootNode=t},n.getRootProps=function(t,e){var r,i=void 0===t?{}:t,o=i.refKey,a=void 0===o?"ref":o,s=i.ref,l=fa(i,Ka),c=(void 0===e?{}:e).suppressRefError,u=void 0!==c&&c;n.getRootProps.called=!0,n.getRootProps.refKey=a,n.getRootProps.suppressRefError=u;var h=n.getState().isOpen;return at(((r={})[a]=ka(s,n.rootRef),r.role="combobox",r["aria-expanded"]=h,r["aria-haspopup"]="listbox",r["aria-owns"]=h?n.menuId:null,r["aria-labelledby"]=n.labelId,r),l)},n.keyDownHandlers={ArrowDown:function(t){var e=this;if(t.preventDefault(),this.getState().isOpen){var n=t.shiftKey?5:1;this.moveHighlightedIndex(n,{type:4})}else this.internalSetState({isOpen:!0,type:4},(function(){var t=e.getItemCount();if(t>0){var n=Ga(1,e.getState().highlightedIndex,t,(function(t){return e.getItemNodeFromIndex(t)}));e.setHighlightedIndex(n,{type:4})}}))},ArrowUp:function(t){var e=this;if(t.preventDefault(),this.getState().isOpen){var n=t.shiftKey?-5:-1;this.moveHighlightedIndex(n,{type:3})}else this.internalSetState({isOpen:!0,type:3},(function(){var t=e.getItemCount();if(t>0){var n=Ga(-1,e.getState().highlightedIndex,t,(function(t){return e.getItemNodeFromIndex(t)}));e.setHighlightedIndex(n,{type:3})}}))},Enter:function(t){if(229!==t.which){var e=this.getState(),n=e.isOpen,r=e.highlightedIndex;if(n&&null!=r){t.preventDefault();var i=this.items[r],o=this.getItemNodeFromIndex(r);if(null==i||o&&o.hasAttribute("disabled"))return;this.selectHighlightedItem({type:6})}}},Escape:function(t){t.preventDefault(),this.reset(at({type:5},!this.state.isOpen&&{selectedItem:null,inputValue:""}))}},n.buttonKeyDownHandlers=at({},n.keyDownHandlers,{" ":function(t){t.preventDefault(),this.toggleMenu({type:12})}}),n.inputKeyDownHandlers=at({},n.keyDownHandlers,{Home:function(t){var e=this,n=this.getState().isOpen;if(n){t.preventDefault();var r=this.getItemCount();if(!(r<=0)&&n){var i=Va(1,0,r,(function(t){return e.getItemNodeFromIndex(t)}),!1);this.setHighlightedIndex(i,{type:7})}}},End:function(t){var e=this,n=this.getState().isOpen;if(n){t.preventDefault();var r=this.getItemCount();if(!(r<=0)&&n){var i=Va(-1,r-1,r,(function(t){return e.getItemNodeFromIndex(t)}),!1);this.setHighlightedIndex(i,{type:8})}}}}),n.getToggleButtonProps=function(t){var e=void 0===t?{}:t,r=e.onClick;e.onPress;var i=e.onKeyDown,o=e.onKeyUp,a=e.onBlur,s=fa(e,Ya),l=n.getState().isOpen,c={onClick:Ma(r,n.buttonHandleClick),onKeyDown:Ma(i,n.buttonHandleKeyDown),onKeyUp:Ma(o,n.buttonHandleKeyUp),onBlur:Ma(a,n.buttonHandleBlur)};return at({type:"button",role:"button","aria-label":l?"close menu":"open menu","aria-haspopup":!0,"data-toggle":!0},s.disabled?{}:c,s)},n.buttonHandleKeyUp=function(t){t.preventDefault()},n.buttonHandleKeyDown=function(t){var e=Ua(t);n.buttonKeyDownHandlers[e]&&n.buttonKeyDownHandlers[e].call(ma(n),t)},n.buttonHandleClick=function(t){t.preventDefault(),n.props.environment.document.activeElement===n.props.environment.document.body&&t.target.focus(),n.internalSetTimeout((function(){return n.toggleMenu({type:13})}))},n.buttonHandleBlur=function(t){var e=t.target;n.internalSetTimeout((function(){n.isMouseDown||null!=n.props.environment.document.activeElement&&n.props.environment.document.activeElement.id===n.inputId||n.props.environment.document.activeElement===e||n.reset({type:14})}))},n.getLabelProps=function(t){return at({htmlFor:n.inputId,id:n.labelId},t)},n.getInputProps=function(t){var e=void 0===t?{}:t,r=e.onKeyDown,i=e.onBlur,o=e.onChange,a=e.onInput;e.onChangeText;var s=fa(e,Xa),l={};var c,u=n.getState(),h=u.inputValue,d=u.isOpen,p=u.highlightedIndex;s.disabled||((c={}).onChange=Ma(o,a,n.inputHandleChange),c.onKeyDown=Ma(r,n.inputHandleKeyDown),c.onBlur=Ma(i,n.inputHandleBlur),l=c);return at({"aria-autocomplete":"list","aria-activedescendant":d&&"number"==typeof p&&p>=0?n.getItemId(p):null,"aria-controls":d?n.menuId:null,"aria-labelledby":n.labelId,autoComplete:"off",value:h,id:n.inputId},l,s)},n.inputHandleKeyDown=function(t){var e=Ua(t);e&&n.inputKeyDownHandlers[e]&&n.inputKeyDownHandlers[e].call(ma(n),t)},n.inputHandleChange=function(t){n.internalSetState({type:11,isOpen:!0,inputValue:t.target.value,highlightedIndex:n.props.defaultHighlightedIndex})},n.inputHandleBlur=function(){n.internalSetTimeout((function(){var t=n.props.environment.document&&!!n.props.environment.document.activeElement&&!!n.props.environment.document.activeElement.dataset&&n.props.environment.document.activeElement.dataset.toggle&&n._rootNode&&n._rootNode.contains(n.props.environment.document.activeElement);n.isMouseDown||t||n.reset({type:10})}))},n.menuRef=function(t){n._menuNode=t},n.getMenuProps=function(t,e){var r,i=void 0===t?{}:t,o=i.refKey,a=void 0===o?"ref":o,s=i.ref,l=fa(i,Ja),c=(void 0===e?{}:e).suppressRefError,u=void 0!==c&&c;return n.getMenuProps.called=!0,n.getMenuProps.refKey=a,n.getMenuProps.suppressRefError=u,at(((r={})[a]=ka(s,n.menuRef),r.role="listbox",r["aria-labelledby"]=l&&l["aria-label"]?null:n.labelId,r.id=n.menuId,r),l)},n.getItemProps=function(t){var e,r=void 0===t?{}:t,i=r.onMouseMove,o=r.onMouseDown,a=r.onClick;r.onPress;var s=r.index,l=r.item,c=void 0===l?void 0:l,u=fa(r,Qa);void 0===s?(n.items.push(c),s=n.items.indexOf(c)):n.items[s]=c;var h=a,d=((e={onMouseMove:Ma(i,(function(){s!==n.getState().highlightedIndex&&(n.setHighlightedIndex(s,{type:2}),n.avoidScrolling=!0,n.internalSetTimeout((function(){return n.avoidScrolling=!1}),250))})),onMouseDown:Ma(o,(function(t){t.preventDefault()}))}).onClick=Ma(h,(function(){n.selectItemAtIndex(s,{type:9})})),e),p=u.disabled?{onMouseDown:d.onMouseDown}:d;return at({id:n.getItemId(s),role:"option","aria-selected":n.getState().highlightedIndex===s},p,u)},n.clearItems=function(){n.items=[]},n.reset=function(t,e){void 0===t&&(t={}),t=Fa(t),n.internalSetState((function(e){var r=e.selectedItem;return at({isOpen:n.props.defaultIsOpen,highlightedIndex:n.props.defaultHighlightedIndex,inputValue:n.props.itemToString(r)},t)}),e)},n.toggleMenu=function(t,e){void 0===t&&(t={}),t=Fa(t),n.internalSetState((function(e){var r=e.isOpen;return at({isOpen:!r},r&&{highlightedIndex:n.props.defaultHighlightedIndex},t)}),(function(){var r=n.getState(),i=r.isOpen,o=r.highlightedIndex;i&&n.getItemCount()>0&&"number"==typeof o&&n.setHighlightedIndex(o,t),Sa(e)()}))},n.openMenu=function(t){n.internalSetState({isOpen:!0},t)},n.closeMenu=function(t){n.internalSetState({isOpen:!1},t)},n.updateStatus=Aa((function(){var t=n.getState(),e=n.items[t.highlightedIndex],r=n.getItemCount(),i=n.props.getA11yStatusMessage(at({itemToString:n.props.itemToString,previousResultCount:n.previousResultCount,resultCount:r,highlightedItem:e},t));n.previousResultCount=r,Wa(i,n.props.environment.document)}),200);var r=n.props,i=r.defaultHighlightedIndex,o=r.initialHighlightedIndex,a=void 0===o?i:o,s=r.defaultIsOpen,l=r.initialIsOpen,c=void 0===l?s:l,u=r.initialInputValue,h=void 0===u?"":u,d=r.initialSelectedItem,p=void 0===d?null:d,f=n.getState({highlightedIndex:a,isOpen:c,inputValue:h,selectedItem:p});return null!=f.selectedItem&&void 0===n.props.initialInputValue&&(f.inputValue=n.props.itemToString(f.selectedItem)),n.state=f,n}Object(ga.a)(e,t);var n=e.prototype;return n.internalClearTimeouts=function(){this.timeoutIds.forEach((function(t){clearTimeout(t)})),this.timeoutIds=[]},n.getState=function(t){return void 0===t&&(t=this.state),za(t,this.props)},n.getItemCount=function(){var t=this.items.length;return null!=this.itemCount?t=this.itemCount:void 0!==this.props.itemCount&&(t=this.props.itemCount),t},n.getItemNodeFromIndex=function(t){return this.props.environment.document.getElementById(this.getItemId(t))},n.scrollHighlightedItemIntoView=function(){var t=this.getItemNodeFromIndex(this.getState().highlightedIndex);this.props.scrollIntoView(t,this._menuNode)},n.moveHighlightedIndex=function(t,e){var n=this,r=this.getItemCount(),i=this.getState().highlightedIndex;if(r>0){var o=Ga(t,i,r,(function(t){return n.getItemNodeFromIndex(t)}));this.setHighlightedIndex(o,e)}},n.getStateAndHelpers=function(){var t=this.getState(),e=t.highlightedIndex,n=t.inputValue,r=t.selectedItem,i=t.isOpen,o=this.props.itemToString,a=this.id,s=this.getRootProps,l=this.getToggleButtonProps,c=this.getLabelProps,u=this.getMenuProps,h=this.getInputProps,d=this.getItemProps,p=this.openMenu,f=this.closeMenu,m=this.toggleMenu,g=this.selectItem,y=this.selectItemAtIndex,v=this.selectHighlightedItem,_=this.setHighlightedIndex,b=this.clearSelection,x=this.clearItems;return{getRootProps:s,getToggleButtonProps:l,getLabelProps:c,getMenuProps:u,getInputProps:h,getItemProps:d,reset:this.reset,openMenu:p,closeMenu:f,toggleMenu:m,selectItem:g,selectItemAtIndex:y,selectHighlightedItem:v,setHighlightedIndex:_,clearSelection:b,clearItems:x,setItemCount:this.setItemCount,unsetItemCount:this.unsetItemCount,setState:this.internalSetState,itemToString:o,id:a,highlightedIndex:e,inputValue:n,isOpen:i,selectedItem:r}},n.componentDidMount=function(){var t=this;var e=function(){t.isMouseDown=!0},n=function(e){t.isMouseDown=!1,!qa(e.target,[t._rootNode,t._menuNode],t.props.environment)&&t.getState().isOpen&&t.reset({type:1},(function(){return t.props.onOuterClick(t.getStateAndHelpers())}))},r=function(){t.isTouchMove=!1},i=function(){t.isTouchMove=!0},o=function(e){var n=qa(e.target,[t._rootNode,t._menuNode],t.props.environment,!1);t.isTouchMove||n||!t.getState().isOpen||t.reset({type:16},(function(){return t.props.onOuterClick(t.getStateAndHelpers())}))},a=this.props.environment;a.addEventListener("mousedown",e),a.addEventListener("mouseup",n),a.addEventListener("touchstart",r),a.addEventListener("touchmove",i),a.addEventListener("touchend",o),this.cleanup=function(){t.internalClearTimeouts(),t.updateStatus.cancel(),a.removeEventListener("mousedown",e),a.removeEventListener("mouseup",n),a.removeEventListener("touchstart",r),a.removeEventListener("touchmove",i),a.removeEventListener("touchend",o)}},n.shouldScroll=function(t,e){var n=(void 0===this.props.highlightedIndex?this.getState():this.props).highlightedIndex,r=(void 0===e.highlightedIndex?t:e).highlightedIndex;return n&&this.getState().isOpen&&!t.isOpen||n!==r},n.componentDidUpdate=function(t,e){Ba(this.props,"selectedItem")&&this.props.selectedItemChanged(t.selectedItem,this.props.selectedItem)&&this.internalSetState({type:15,inputValue:this.props.itemToString(this.props.selectedItem)}),!this.avoidScrolling&&this.shouldScroll(e,t)&&this.scrollHighlightedItemIntoView(),this.updateStatus()},n.componentWillUnmount=function(){this.cleanup()},n.render=function(){var t=Ra(this.props.children,Ta);this.clearItems(),this.getRootProps.called=!1,this.getRootProps.refKey=void 0,this.getRootProps.suppressRefError=void 0,this.getMenuProps.called=!1,this.getMenuProps.refKey=void 0,this.getMenuProps.suppressRefError=void 0,this.getLabelProps.called=!1,this.getInputProps.called=!1;var e=Ra(t(this.getStateAndHelpers()));return e?this.getRootProps.called||this.props.suppressRefError?e:La(e)?Object(l.cloneElement)(e,this.getRootProps(Na(e))):void 0:null},e}(l.Component);return t.defaultProps={defaultHighlightedIndex:null,defaultIsOpen:!1,getA11yStatusMessage:Da,itemToString:function(t){return null==t?"":String(t)},onStateChange:Ta,onInputValueChange:Ta,onUserAction:Ta,onChange:Ta,onSelect:Ta,onOuterClick:Ta,selectedItemChanged:function(t,e){return t!==e},environment:"undefined"==typeof window?{}:window,stateReducer:function(t,e){return e},suppressRefError:!1,scrollIntoView:Oa},t.stateChangeTypes=$a,t}();Aa((function(t,e){Wa(t(),e)}),200),"undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?l.useLayoutEffect:l.useEffect;var es={itemToString:function(t){return t?String(t):""},stateReducer:function(t,e){return e.changes},getA11ySelectionMessage:function(t){var e=t.selectedItem,n=t.itemToString;return e?n(e)+" has been selected.":""},scrollIntoView:Oa,circularNavigation:!1,environment:"undefined"==typeof window?{}:window};va.a.array.isRequired,va.a.func,va.a.func,va.a.func,va.a.bool,va.a.number,va.a.number,va.a.number,va.a.bool,va.a.bool,va.a.bool,va.a.any,va.a.any,va.a.any,va.a.string,va.a.string,va.a.string,va.a.func,va.a.string,va.a.func,va.a.func,va.a.func,va.a.func,va.a.func,va.a.shape({addEventListener:va.a.func,removeEventListener:va.a.func,document:va.a.shape({getElementById:va.a.func,activeElement:va.a.any,body:va.a.any})});Object(Ea.a)(Object(Ea.a)({},es),{getA11yStatusMessage:function(t){var e=t.isOpen,n=t.resultCount,r=t.previousResultCount;return e?n?n!==r?n+" result"+(1===n?" is":"s are")+" available, use up and down arrow keys to navigate. Press Enter or Space Bar keys to select.":"":"No results are available.":""}});va.a.array.isRequired,va.a.func,va.a.func,va.a.func,va.a.bool,va.a.number,va.a.number,va.a.number,va.a.bool,va.a.bool,va.a.bool,va.a.any,va.a.any,va.a.any,va.a.string,va.a.string,va.a.string,va.a.string,va.a.string,va.a.string,va.a.func,va.a.string,va.a.string,va.a.func,va.a.func,va.a.func,va.a.func,va.a.func,va.a.func,va.a.shape({addEventListener:va.a.func,removeEventListener:va.a.func,document:va.a.shape({getElementById:va.a.func,activeElement:va.a.any,body:va.a.any})});at({},es,{getA11yStatusMessage:Da,circularNavigation:!0});va.a.array,va.a.array,va.a.array,va.a.func,va.a.func,va.a.func,va.a.number,va.a.number,va.a.number,va.a.func,va.a.func,va.a.string,va.a.string,va.a.shape({addEventListener:va.a.func,removeEventListener:va.a.func,document:va.a.shape({getElementById:va.a.func,activeElement:va.a.any,body:va.a.any})});function ns(t,e){return t===e}function rs(t){return"function"==typeof t?function(){return t}:t}function is(t,e,n){var r=n&&n.equalityFn||ns,i=function(t){var e=Object(l.useState)(rs(t)),n=e[0],r=e[1];return[n,Object(l.useCallback)((function(t){return r(rs(t))}),[])]}(t),o=i[0],a=i[1],s=function(t,e,n){var r=this,i=Object(l.useRef)(null),o=Object(l.useRef)(0),a=Object(l.useRef)(null),s=Object(l.useRef)([]),c=Object(l.useRef)(),u=Object(l.useRef)(),h=Object(l.useRef)(t),d=Object(l.useRef)(!0);h.current=t;var p=!e&&0!==e&&"undefined"!=typeof window;if("function"!=typeof t)throw new TypeError("Expected a function");e=+e||0;var f=!!(n=n||{}).leading,m=!("trailing"in n)||!!n.trailing,g="maxWait"in n,y=g?Math.max(+n.maxWait||0,e):null;return Object(l.useEffect)((function(){return d.current=!0,function(){d.current=!1}}),[]),Object(l.useMemo)((function(){var t=function(t){var e=s.current,n=c.current;return s.current=c.current=null,o.current=t,u.current=h.current.apply(n,e)},n=function(t,e){p&&cancelAnimationFrame(a.current),a.current=p?requestAnimationFrame(t):setTimeout(t,e)},l=function(t){if(!d.current)return!1;var n=t-i.current,r=t-o.current;return!i.current||n>=e||n<0||g&&r>=y},v=function(e){return a.current=null,m&&s.current?t(e):(s.current=c.current=null,u.current)},_=function(){var t=Date.now();if(l(t))return v(t);if(d.current){var r=t-i.current,a=t-o.current,s=e-r,c=g?Math.min(s,y-a):s;n(_,c)}},b=function(){for(var h=[],p=0;p<arguments.length;p++)h[p]=arguments[p];var m=Date.now(),y=l(m);if(s.current=h,c.current=r,i.current=m,y){if(!a.current&&d.current)return o.current=i.current,n(_,e),f?t(i.current):u.current;if(g)return n(_,e),t(i.current)}return a.current||n(_,e),u.current};return b.cancel=function(){a.current&&(p?cancelAnimationFrame(a.current):clearTimeout(a.current)),o.current=0,s.current=i.current=c.current=a.current=null},b.isPending=function(){return!!a.current},b.flush=function(){return a.current?v(Date.now()):u.current},b}),[f,g,e,y,m,p])}(Object(l.useCallback)((function(t){return a(t)}),[a]),e,n),c=Object(l.useRef)(t);return Object(l.useEffect)((function(){r(c.current,t)||(s(t),c.current=t)}),[t,s,r]),[o,{cancel:s.cancel,isPending:s.isPending,flush:s.flush}]}var os=["theme"],as=["theme"];var ss={name:"kxlq2a",styles:"position:relative;display:block;padding:5px 12px;overflow:hidden;font-weight:normal;line-height:22px;cursor:pointer;transition:background 0.3s ease"},ls={wrapper:function(t){var e=t.theme,n=s()(t,os);return Pt("display:inline-block;margin:0;padding:0;font-variant:tabular-nums;line-height:1.5;list-style:none;box-sizing:border-box;font-size:14px;font-variant:initial;background-color:",e.paperBackground500,";border-radius:",e.borderRadius,"px;outline:none;box-shadow:0 2px 8px rgba(0, 0, 0, 0.15);width:100%;position:absolute;transform:translateY(",n.isOpen?5:0,"px);opacity:",n.isOpen?1:0,";z-index:",n.isOpen?10:null,";transition:opacity .1s linear,transform .1s ease-in-out;","")},menu:function(t){return Pt("max-height:450px;margin:0;padding:4px 0;padding-left:0;overflow:auto;list-style:none;outline:none;",Sr(t),";","")},item:function(t){t.theme,s()(t,as);return ss}},cs=["onSuggestionsFetchRequested","renderSuggestion","getSuggestionValue","onSuggestionSelected","inputProps","defaultIsOpen","isLoading","suggestions","loadingError","style","listCss","menuCss","delay"];function us(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function hs(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?us(Object(n),!0).forEach((function(e){Ft()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):us(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ds=c.a.forwardRef((function(t,e){var n=t.onSuggestionsFetchRequested,r=t.renderSuggestion,i=t.getSuggestionValue,a=t.onSuggestionSelected,u=t.inputProps,h=t.defaultIsOpen,d=t.isLoading,p=t.suggestions,f=t.loadingError,m=t.style,g=t.listCss,y=t.menuCss,v=t.delay,_=void 0===v?300:v,b=(s()(t,cs),Object(l.useContext)(Zt)),x=g||ls.menu,w=y||ls.wrapper,E=is(u.value,_),C=Nt()(E,1)[0];Object(l.useEffect)((function(){"string"==typeof C&&n({value:C})}),[C,n]);var S=function(t){if(null!=t)return i(t)},T=p&&p.length>0;return kt(ts,{defaultIsOpen:h,onChange:function(t){a({item:t,value:S(t)})},defaultHighlightedIndex:0,itemToString:S},(function(t){var n=t.getInputProps,i=t.getItemProps,a=(t.getLabelProps,t.getMenuProps),s=t.isOpen,l=(t.inputValue,t.highlightedIndex),h=t.selectedItem,g=t.getRootProps;return kt("div",{style:hs({position:"relative",display:"inline-block"},m)},kt("div",g({},{suppressRefError:!0}),kt(Fr,n(hs(hs({ref:e},u),{},{onChange:function(t){return u.onChange(t,{newValue:t.target.value})},onKeyDown:function(t){"Escape"===t.key&&(s||(t.nativeEvent.preventDownshiftDefault=!0))}})))),kt("div",{css:w({theme:b,isOpen:s})},s&&kt(c.a.Fragment,null,kt(pa,{active:d||f,error:f}),kt("ul",o()({},a(),{css:x({theme:b})}),!d&&!T&&!f&&kt("li",{css:ls.item({theme:b}),style:{color:"#aaa"}},"No suggestions provided"),!d&&!T&&f&&kt("li",{css:ls.item({theme:b}),style:{color:"#aaa"}},"Failed to load suggestions"),T&&p.map((function(t,e){return kt("li",o()({css:ls.item({theme:b})},i({key:e,index:e,item:t,style:{backgroundColor:l===e?b.paperBackground800:b.paperBackground500,fontWeight:h===t?"bold":"normal"}})),r(t,{debouncedText:C,isHighlighted:l===e}))}))))))}))}));ds.displayName="Autocomplete";var ps=n(188),fs=n.n(ps);var ms={left:"right",right:"left",top:"bottom",bottom:"top"},gs=function(t,e,n,r){var i;return i={border:"0 solid transparent"},Ft()(i,fs()("border-".concat(n)),"".concat(t,"px solid ").concat(r?e:"transparent")),Ft()(i,fs()("border-".concat(ms[n])),"".concat(t,"px solid transparent")),i},ys=function(t){var e=t.theme,n=t.direction,r=void 0===n?"bottom":n,i=t.isActive;return Pt(gs(3,e.primary500,r,i)," padding:10px 10px;flex:0 1 auto;cursor:pointer;&:hover,&:focus{outline:none;background:rgba(0,0,0,.05);}::-moz-focus-inner{border-style:none;}","")},vs=function(t){var e=t.theme,n=t.direction,r=void 0===n?"bottom":n,i=t.isActive;return Pt(gs(3,e.primary500,r,i)," flex:0 1 auto;&:hover,&:focus{outline:none;background:rgba(0,0,0,.05);}a{padding:10px 10px;display:inline-block;color:inherit;text-decoration:none;::-moz-focus-inner{border-style:none;}}","")},_s=function(t){t.theme;return Pt("padding:0;margin:0;list-style:none;display:flex;flex-direction:",t.vertical?"column":"row",";flex-wrap:nowrap;","")},bs=function(t){t.theme;var e=t.vertical;return Pt(e?"height: 1px":"width: 1px",";margin:",e?"0 5px":"5px 0",";flex:0 1 auto;border-",e?"top":"left",":1px solid #ddd;","")},xs={name:"mkkf9p",styles:"flex:1 1 auto"},ws=function(t){t.theme,t.vertical;return xs},Es=n(185),Cs=n.n(Es),Ss=function(){};function Ts(t,e){return void 0!==t[e]}function Os(t){return"default"+t.charAt(0).toUpperCase()+t.substr(1)}function Is(){var t=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=t&&this.setState(t)}function As(t){this.setState(function(e){var n=this.constructor.getDerivedStateFromProps(t,e);return null!=n?n:null}.bind(this))}function Ms(t,e){try{var n=this.props,r=this.state;this.props=t,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}Is.__suppressDeprecationWarning=!0,As.__suppressDeprecationWarning=!0,Ms.__suppressDeprecationWarning=!0;function ks(t,e,n){void 0===n&&(n=[]);var r,i=t.displayName||t.name||"Component",o=!!(r=t)&&("function"!=typeof r||r.prototype&&r.prototype.isReactComponent),a=Object.keys(e),s=a.map(Os);!o&&n.length&&Cs()(!1);var l=function(r){function i(){for(var t,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];(t=r.call.apply(r,[this].concat(o))||this).handlers=Object.create(null),a.forEach((function(n){var r=e[n];t.handlers[r]=function(e){if(t.props[r]){var i;t._notifying=!0;for(var o=arguments.length,a=new Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];(i=t.props)[r].apply(i,[e].concat(a)),t._notifying=!1}t.unmounted||t.setState((function(t){var r,i=t.values;return{values:at(Object.create(null),i,(r={},r[n]=e,r))}}))}})),n.length&&(t.attachRef=function(e){t.inner=e});var l=Object.create(null);return a.forEach((function(e){l[e]=t.props[Os(e)]})),t.state={values:l,prevProps:{}},t}Object(ga.a)(i,r);var o=i.prototype;return o.shouldComponentUpdate=function(){return!this._notifying},i.getDerivedStateFromProps=function(t,e){var n=e.values,r=e.prevProps,i={values:at(Object.create(null),n),prevProps:{}};return a.forEach((function(e){i.prevProps[e]=t[e],!Ts(t,e)&&Ts(r,e)&&(i.values[e]=t[Os(e)])})),i},o.componentWillUnmount=function(){this.unmounted=!0},o.render=function(){var e=this,n=this.props,r=n.innerRef,i=fa(n,["innerRef"]);s.forEach((function(t){delete i[t]}));var o={};return a.forEach((function(t){var n=e.props[t];o[t]=void 0!==n?n:e.state.values[t]})),c.a.createElement(t,at({},i,o,this.handlers,{ref:r||this.attachRef}))},i}(c.a.Component);!function(t){var e=t.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof t.getDerivedStateFromProps&&"function"!=typeof e.getSnapshotBeforeUpdate)return t;var n=null,r=null,i=null;if("function"==typeof e.componentWillMount?n="componentWillMount":"function"==typeof e.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"==typeof e.componentWillReceiveProps?r="componentWillReceiveProps":"function"==typeof e.UNSAFE_componentWillReceiveProps&&(r="UNSAFE_componentWillReceiveProps"),"function"==typeof e.componentWillUpdate?i="componentWillUpdate":"function"==typeof e.UNSAFE_componentWillUpdate&&(i="UNSAFE_componentWillUpdate"),null!==n||null!==r||null!==i){var o=t.displayName||t.name,a="function"==typeof t.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+o+" uses "+a+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==r?"\n  "+r:"")+(null!==i?"\n  "+i:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof t.getDerivedStateFromProps&&(e.componentWillMount=Is,e.componentWillReceiveProps=As),"function"==typeof e.getSnapshotBeforeUpdate){if("function"!=typeof e.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=Ms;var s=e.componentDidUpdate;e.componentDidUpdate=function(t,e,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;s.call(this,t,e,r)}}}(l),l.displayName="Uncontrolled("+i+")",l.propTypes=at({innerRef:function(){}},function(t,e){var n={};return Object.keys(t).forEach((function(t){n[Os(t)]=Ss})),n}(e)),n.forEach((function(t){l.prototype[t]=function(){var e;return(e=this.inner)[t].apply(e,arguments)}}));var u=l;return c.a.forwardRef&&((u=c.a.forwardRef((function(t,e){return c.a.createElement(l,at({},t,{innerRef:e,__source:{fileName:"/Users/jquense/src/uncontrollable/src/uncontrollable.js",lineNumber:128},__self:this}))}))).propTypes=l.propTypes),u.ControlledComponent=t,u.deferControlTo=function(t,n,r){return void 0===n&&(n={}),ks(t,at({},e,n),r)},u}function Ps(t){return"/"===t.charAt(0)}function Ds(t,e){for(var n=e,r=n+1,i=t.length;r<i;n+=1,r+=1)t[n]=t[r];t.pop()}var Rs=function(t,e){void 0===e&&(e="");var n,r=t&&t.split("/")||[],i=e&&e.split("/")||[],o=t&&Ps(t),a=e&&Ps(e),s=o||a;if(t&&Ps(t)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var l=i[i.length-1];n="."===l||".."===l||""===l}else n=!1;for(var c=0,u=i.length;u>=0;u--){var h=i[u];"."===h?Ds(i,u):".."===h?(Ds(i,u),c++):c&&(Ds(i,u),c--)}if(!s)for(;c--;c)i.unshift("..");!s||""===i[0]||i[0]&&Ps(i[0])||i.unshift("");var d=i.join("/");return n&&"/"!==d.substr(-1)&&(d+="/"),d};function Ls(t,e){if(!t)throw new Error("Invariant failed")}function Ns(t){return"/"===t.charAt(0)?t:"/"+t}function js(t){return"/"===t.charAt(0)?t.substr(1):t}function Fs(t,e){return function(t,e){return 0===t.toLowerCase().indexOf(e.toLowerCase())&&-1!=="/?#".indexOf(t.charAt(e.length))}(t,e)?t.substr(e.length):t}function zs(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t}function Bs(t){var e=t.pathname,n=t.search,r=t.hash,i=e||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function Us(t,e,n,r){var i;"string"==typeof t?(i=function(t){var e=t||"/",n="",r="",i=e.indexOf("#");-1!==i&&(r=e.substr(i),e=e.substr(0,i));var o=e.indexOf("?");return-1!==o&&(n=e.substr(o),e=e.substr(0,o)),{pathname:e,search:"?"===n?"":n,hash:"#"===r?"":r}}(t)).state=e:(void 0===(i=at({},t)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==e&&void 0===i.state&&(i.state=e));try{i.pathname=decodeURI(i.pathname)}catch(t){throw t instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):t}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=Rs(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function Gs(){var t=null;var e=[];return{setPrompt:function(e){return t=e,function(){t===e&&(t=null)}},confirmTransitionTo:function(e,n,r,i){if(null!=t){var o="function"==typeof t?t(e,n):t;"string"==typeof o?"function"==typeof r?r(o,i):i(!0):i(!1!==o)}else i(!0)},appendListener:function(t){var n=!0;function r(){n&&t.apply(void 0,arguments)}return e.push(r),function(){n=!1,e=e.filter((function(t){return t!==r}))}},notifyListeners:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.forEach((function(t){return t.apply(void 0,n)}))}}}var Vs=!("undefined"==typeof window||!window.document||!window.document.createElement);function qs(t,e){e(window.confirm(t))}function Hs(){try{return window.history.state||{}}catch(t){return{}}}function Ws(t){void 0===t&&(t={}),Vs||Ls(!1);var e,n=window.history,r=(-1===(e=window.navigator.userAgent).indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history,i=!(-1===window.navigator.userAgent.indexOf("Trident")),o=t,a=o.forceRefresh,s=void 0!==a&&a,l=o.getUserConfirmation,c=void 0===l?qs:l,u=o.keyLength,h=void 0===u?6:u,d=t.basename?zs(Ns(t.basename)):"";function p(t){var e=t||{},n=e.key,r=e.state,i=window.location,o=i.pathname+i.search+i.hash;return d&&(o=Fs(o,d)),Us(o,r,n)}function f(){return Math.random().toString(36).substr(2,h)}var m=Gs();function g(t){at(I,t),I.length=n.length,m.notifyListeners(I.location,I.action)}function y(t){(function(t){return void 0===t.state&&-1===navigator.userAgent.indexOf("CriOS")})(t)||b(p(t.state))}function v(){b(p(Hs()))}var _=!1;function b(t){if(_)_=!1,g();else{m.confirmTransitionTo(t,"POP",c,(function(e){e?g({action:"POP",location:t}):function(t){var e=I.location,n=w.indexOf(e.key);-1===n&&(n=0);var r=w.indexOf(t.key);-1===r&&(r=0);var i=n-r;i&&(_=!0,C(i))}(t)}))}}var x=p(Hs()),w=[x.key];function E(t){return d+Bs(t)}function C(t){n.go(t)}var S=0;function T(t){1===(S+=t)&&1===t?(window.addEventListener("popstate",y),i&&window.addEventListener("hashchange",v)):0===S&&(window.removeEventListener("popstate",y),i&&window.removeEventListener("hashchange",v))}var O=!1;var I={length:n.length,action:"POP",location:x,createHref:E,push:function(t,e){var i=Us(t,e,f(),I.location);m.confirmTransitionTo(i,"PUSH",c,(function(t){if(t){var e=E(i),o=i.key,a=i.state;if(r)if(n.pushState({key:o,state:a},null,e),s)window.location.href=e;else{var l=w.indexOf(I.location.key),c=w.slice(0,l+1);c.push(i.key),w=c,g({action:"PUSH",location:i})}else window.location.href=e}}))},replace:function(t,e){var i=Us(t,e,f(),I.location);m.confirmTransitionTo(i,"REPLACE",c,(function(t){if(t){var e=E(i),o=i.key,a=i.state;if(r)if(n.replaceState({key:o,state:a},null,e),s)window.location.replace(e);else{var l=w.indexOf(I.location.key);-1!==l&&(w[l]=i.key),g({action:"REPLACE",location:i})}else window.location.replace(e)}}))},go:C,goBack:function(){C(-1)},goForward:function(){C(1)},block:function(t){void 0===t&&(t=!1);var e=m.setPrompt(t);return O||(T(1),O=!0),function(){return O&&(O=!1,T(-1)),e()}},listen:function(t){var e=m.appendListener(t);return T(1),function(){T(-1),e()}}};return I}var Zs={hashbang:{encodePath:function(t){return"!"===t.charAt(0)?t:"!/"+js(t)},decodePath:function(t){return"!"===t.charAt(0)?t.substr(1):t}},noslash:{encodePath:js,decodePath:Ns},slash:{encodePath:Ns,decodePath:Ns}};function $s(t){var e=t.indexOf("#");return-1===e?t:t.slice(0,e)}function Ks(){var t=window.location.href,e=t.indexOf("#");return-1===e?"":t.substring(e+1)}function Ys(t){window.location.replace($s(window.location.href)+"#"+t)}function Xs(t){void 0===t&&(t={}),Vs||Ls(!1);var e=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),t),r=n.getUserConfirmation,i=void 0===r?qs:r,o=n.hashType,a=void 0===o?"slash":o,s=t.basename?zs(Ns(t.basename)):"",l=Zs[a],c=l.encodePath,u=l.decodePath;function h(){var t=u(Ks());return s&&(t=Fs(t,s)),Us(t)}var d=Gs();function p(t){at(S,t),S.length=e.length,d.notifyListeners(S.location,S.action)}var f=!1,m=null;function g(){var t,e,n=Ks(),r=c(n);if(n!==r)Ys(r);else{var o=h(),a=S.location;if(!f&&(e=o,(t=a).pathname===e.pathname&&t.search===e.search&&t.hash===e.hash))return;if(m===Bs(o))return;m=null,function(t){if(f)f=!1,p();else{d.confirmTransitionTo(t,"POP",i,(function(e){e?p({action:"POP",location:t}):function(t){var e=S.location,n=b.lastIndexOf(Bs(e));-1===n&&(n=0);var r=b.lastIndexOf(Bs(t));-1===r&&(r=0);var i=n-r;i&&(f=!0,x(i))}(t)}))}}(o)}}var y=Ks(),v=c(y);y!==v&&Ys(v);var _=h(),b=[Bs(_)];function x(t){e.go(t)}var w=0;function E(t){1===(w+=t)&&1===t?window.addEventListener("hashchange",g):0===w&&window.removeEventListener("hashchange",g)}var C=!1;var S={length:e.length,action:"POP",location:_,createHref:function(t){var e=document.querySelector("base"),n="";return e&&e.getAttribute("href")&&(n=$s(window.location.href)),n+"#"+c(s+Bs(t))},push:function(t,e){var n=Us(t,void 0,void 0,S.location);d.confirmTransitionTo(n,"PUSH",i,(function(t){if(t){var e=Bs(n),r=c(s+e);if(Ks()!==r){m=e,function(t){window.location.hash=t}(r);var i=b.lastIndexOf(Bs(S.location)),o=b.slice(0,i+1);o.push(e),b=o,p({action:"PUSH",location:n})}else p()}}))},replace:function(t,e){var n=Us(t,void 0,void 0,S.location);d.confirmTransitionTo(n,"REPLACE",i,(function(t){if(t){var e=Bs(n),r=c(s+e);Ks()!==r&&(m=e,Ys(r));var i=b.indexOf(Bs(S.location));-1!==i&&(b[i]=e),p({action:"REPLACE",location:n})}}))},go:x,goBack:function(){x(-1)},goForward:function(){x(1)},block:function(t){void 0===t&&(t=!1);var e=d.setPrompt(t);return C||(E(1),C=!0),function(){return C&&(C=!1,E(-1)),e()}},listen:function(t){var e=d.appendListener(t);return E(1),function(){E(-1),e()}}};return S}function Js(t,e,n){return Math.min(Math.max(t,e),n)}function Qs(t){void 0===t&&(t={});var e=t,n=e.getUserConfirmation,r=e.initialEntries,i=void 0===r?["/"]:r,o=e.initialIndex,a=void 0===o?0:o,s=e.keyLength,l=void 0===s?6:s,c=Gs();function u(t){at(g,t),g.length=g.entries.length,c.notifyListeners(g.location,g.action)}function h(){return Math.random().toString(36).substr(2,l)}var d=Js(a,0,i.length-1),p=i.map((function(t){return Us(t,void 0,"string"==typeof t?h():t.key||h())})),f=Bs;function m(t){var e=Js(g.index+t,0,g.entries.length-1),r=g.entries[e];c.confirmTransitionTo(r,"POP",n,(function(t){t?u({action:"POP",location:r,index:e}):u()}))}var g={length:p.length,action:"POP",location:p[d],index:d,entries:p,createHref:f,push:function(t,e){var r=Us(t,e,h(),g.location);c.confirmTransitionTo(r,"PUSH",n,(function(t){if(t){var e=g.index+1,n=g.entries.slice(0);n.length>e?n.splice(e,n.length-e,r):n.push(r),u({action:"PUSH",location:r,index:e,entries:n})}}))},replace:function(t,e){var r=Us(t,e,h(),g.location);c.confirmTransitionTo(r,"REPLACE",n,(function(t){t&&(g.entries[g.index]=r,u({action:"REPLACE",location:r}))}))},go:m,goBack:function(){m(-1)},goForward:function(){m(1)},canGo:function(t){var e=g.index+t;return e>=0&&e<g.entries.length},block:function(t){return void 0===t&&(t=!1),c.setPrompt(t)},listen:function(t){return c.appendListener(t)}};return g}var tl=n(242),el=n(189),nl=n.n(el),rl=(n(318),function(t){var e=Object(tl.a)();return e.displayName=t,e}),il=rl("Router-History"),ol=rl("Router"),al=function(t){function e(e){var n;return(n=t.call(this,e)||this).state={location:e.history.location},n._isMounted=!1,n._pendingLocation=null,e.staticContext||(n.unlisten=e.history.listen((function(t){n._isMounted?n.setState({location:t}):n._pendingLocation=t}))),n}Object(ga.a)(e,t),e.computeRootMatch=function(t){return{path:"/",url:"/",params:{},isExact:"/"===t}};var n=e.prototype;return n.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return c.a.createElement(ol.Provider,{value:{history:this.props.history,location:this.state.location,match:e.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},c.a.createElement(il.Provider,{children:this.props.children||null,value:this.props.history}))},e}(c.a.Component);var sl=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).history=Qs(e.props),e}return Object(ga.a)(e,t),e.prototype.render=function(){return c.a.createElement(al,{history:this.history,children:this.props.children})},e}(c.a.Component);c.a.Component;var ll={},cl=0;function ul(t,e){void 0===e&&(e={}),("string"==typeof e||Array.isArray(e))&&(e={path:e});var n=e,r=n.path,i=n.exact,o=void 0!==i&&i,a=n.strict,s=void 0!==a&&a,l=n.sensitive,c=void 0!==l&&l;return[].concat(r).reduce((function(e,n){if(!n&&""!==n)return null;if(e)return e;var r=function(t,e){var n=""+e.end+e.strict+e.sensitive,r=ll[n]||(ll[n]={});if(r[t])return r[t];var i=[],o={regexp:nl()(t,i,e),keys:i};return cl<1e4&&(r[t]=o,cl++),o}(n,{end:o,strict:s,sensitive:c}),i=r.regexp,a=r.keys,l=i.exec(t);if(!l)return null;var u=l[0],h=l.slice(1),d=t===u;return o&&!d?null:{path:n,url:"/"===n&&""===u?"/":u,isExact:d,params:a.reduce((function(t,e,n){return t[e.name]=h[n],t}),{})}}),null)}var hl=function(t){function e(){return t.apply(this,arguments)||this}return Object(ga.a)(e,t),e.prototype.render=function(){var t=this;return c.a.createElement(ol.Consumer,null,(function(e){e||Ls(!1);var n=t.props.location||e.location,r=at({},e,{location:n,match:t.props.computedMatch?t.props.computedMatch:t.props.path?ul(n.pathname,t.props):e.match}),i=t.props,o=i.children,a=i.component,s=i.render;return Array.isArray(o)&&function(t){return 0===c.a.Children.count(t)}(o)&&(o=null),c.a.createElement(ol.Provider,{value:r},r.match?o?"function"==typeof o?o(r):o:a?c.a.createElement(a,r):s?s(r):null:"function"==typeof o?o(r):null)}))},e}(c.a.Component);function dl(t){return"/"===t.charAt(0)?t:"/"+t}function pl(t,e){if(!t)return e;var n=dl(t);return 0!==e.pathname.indexOf(n)?e:at({},e,{pathname:e.pathname.substr(n.length)})}function fl(t){return"string"==typeof t?t:Bs(t)}function ml(t){return function(){Ls(!1)}}function gl(){}c.a.Component;var yl=function(t){function e(){return t.apply(this,arguments)||this}return Object(ga.a)(e,t),e.prototype.render=function(){var t=this;return c.a.createElement(ol.Consumer,null,(function(e){e||Ls(!1);var n,r,i=t.props.location||e.location;return c.a.Children.forEach(t.props.children,(function(t){if(null==r&&c.a.isValidElement(t)){n=t;var o=t.props.path||t.props.from;r=o?ul(i.pathname,at({},t.props,{path:o})):e.match}})),r?c.a.cloneElement(n,{location:i,computedMatch:r}):null}))},e}(c.a.Component);var vl=c.a.useContext;function _l(){return vl(il)}function bl(){return vl(ol).location}function xl(t){var e=bl(),n=vl(ol).match;return t?ul(e.pathname,t):n}var wl=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).history=Ws(e.props),e}return Object(ga.a)(e,t),e.prototype.render=function(){return c.a.createElement(al,{history:this.history,children:this.props.children})},e}(c.a.Component);c.a.Component;var El=function(t,e){return"function"==typeof t?t(e):t},Cl=function(t,e){return"string"==typeof t?Us(t,null,null,e):t},Sl=function(t){return t},Tl=c.a.forwardRef;void 0===Tl&&(Tl=Sl);var Ol=Tl((function(t,e){var n=t.innerRef,r=t.navigate,i=t.onClick,o=fa(t,["innerRef","navigate","onClick"]),a=o.target,s=at({},o,{onClick:function(t){try{i&&i(t)}catch(e){throw t.preventDefault(),e}t.defaultPrevented||0!==t.button||a&&"_self"!==a||function(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}(t)||(t.preventDefault(),r())}});return s.ref=Sl!==Tl&&e||n,c.a.createElement("a",s)}));var Il=Tl((function(t,e){var n=t.component,r=void 0===n?Ol:n,i=t.replace,o=t.to,a=t.innerRef,s=fa(t,["component","replace","to","innerRef"]);return c.a.createElement(ol.Consumer,null,(function(t){t||Ls(!1);var n=t.history,l=Cl(El(o,t.location),t.location),u=l?n.createHref(l):"",h=at({},s,{href:u,navigate:function(){var e=El(o,t.location),r=Bs(t.location)===Bs(Cl(e));(i||r?n.replace:n.push)(e)}});return Sl!==Tl?h.ref=e||a:h.innerRef=a,c.a.createElement(r,h)}))})),Al=function(t){return t},Ml=c.a.forwardRef;void 0===Ml&&(Ml=Al);var kl=Ml((function(t,e){var n=t["aria-current"],r=void 0===n?"page":n,i=t.activeClassName,o=void 0===i?"active":i,a=t.activeStyle,s=t.className,l=t.exact,u=t.isActive,h=t.location,d=t.sensitive,p=t.strict,f=t.style,m=t.to,g=t.innerRef,y=fa(t,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return c.a.createElement(ol.Consumer,null,(function(t){t||Ls(!1);var n=h||t.location,i=Cl(El(m,n),n),v=i.pathname,_=v&&v.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),b=_?ul(n.pathname,{path:_,exact:l,sensitive:d,strict:p}):null,x=!!(u?u(b,n):b),w="function"==typeof s?s(x):s,E="function"==typeof f?f(x):f;x&&(w=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter((function(t){return t})).join(" ")}(w,o),E=at({},E,a));var C=at({"aria-current":x&&r||null,className:w,style:E,to:i},y);return Al!==Ml?C.ref=e||g:C.innerRef=g,c.a.createElement(Il,C)}))})),Pl=["activeId","onChange"],Dl=["vertical"],Rl=["direction","label","to","exact","className"],Ll=["tabId","direction"],Nl=["tabId","lazy"],jl=c.a.createContext({}),Fl=ks((function(t){var e=t.activeId,n=t.onChange,r=s()(t,Pl);return kt(jl.Provider,o()({value:{activeId:e,onChange:n}},r))}),{activeId:"onChange"}),zl=function(t){var e=t.vertical,n=void 0!==e&&e,r=s()(t,Dl),i=Object(l.useContext)(Zt);return kt("ul",o()({css:_s({theme:i,vertical:n})},r))};zl.displayName="TabList";var Bl=function(t){var e=t.tabId,n=t.direction,r=s()(t,Ll),i=Object(l.useContext)(Zt),a=Object(l.useContext)(jl),c=a.activeId===e,u={"aria-selected":!!c,"aria-controls":"".concat(e,"_panel"),role:"button",id:"".concat(e,"_tab"),onClick:function(){return a.onChange(e)}};return kt("li",o()({tabIndex:"0",css:ys({theme:i,isActive:c,direction:n})},u,r))};Bl.displayName="Tab";var Ul=function(t){var e=t.tabId,n=t.lazy,r=s()(t,Nl),i=Object(l.useContext)(jl).activeId===e;return n&&!i?null:kt("div",o()({id:"".concat(e,"_panel"),"aria-labelledby":"".concat(e,"_tab"),hidden:!i},r))};Ul.displayName="TabPanel",Fl.Tab=Bl,Fl.TabList=zl,Fl.TabPanel=Ul,Fl.TapSeperator=function(t){var e=t.vertical,n=t.props,r=Object(l.useContext)(Zt);return kt("li",o()({css:bs({theme:r,vertical:e})},n)," ")},Fl.TapSpacer=function(t){var e=Object(l.useContext)(Zt);return kt("li",o()({css:ws({theme:e})},t))},Fl.RouterTab=function(t){var e=t.direction,n=t.label,r=t.to,i=t.exact,a=t.className,c=s()(t,Rl),u=Object(l.useContext)(Zt),h=xl({path:r,exact:i});return kt("li",{css:vs({theme:u,isActive:h,direction:e}),className:a},kt(Il,o()({to:r},c),n))};var Gl=["shrink","grow","basis","xs"],Vl=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return t?1:0},ql=function(t,e){return Pt("@media (min-width: ",e,"px){flex-basis:",t?100*t/24+"%":null,";}","")},Hl=["as","className","style","wrap","direction","alignItems","justifyContent","halfGutter","gridGutter","shrink","grow","basis","xs","sm","md","lg","xl"],Wl=function(t){return c.a.forwardRef((function(e,n){var r=e.as,i=void 0===r?"div":r,a=e.className,l=void 0===a?"":a,c=e.style,u=void 0===c?{}:c,h=e.wrap,d=e.direction,p=e.alignItems,f=e.justifyContent,m=e.halfGutter,g=e.gridGutter,y=e.shrink,v=e.grow,_=e.basis,b=e.xs,x=e.sm,w=e.md,E=e.lg,C=e.xl,S=s()(e,Hl);return kt(i,o()({ref:n,style:u,className:l},S,{css:t({wrap:h,direction:d,alignItems:p,justifyContent:f,halfGutter:m,gridGutter:g,shrink:y,grow:v,basis:_,xs:b,sm:x,md:w,lg:E,xl:C})}))}))},Zl=Wl((function(t){return Pt("display:flex;flex-direction:",t.direction||null,";flex-wrap:",t.wrap?t.wrap:"wrap",";align-items:",t.alignItems?t.alignItems:null,";margin:",t.halfGutter?-t.halfGutter+"px":null,";justify-content:",t.justifyContent?t.justifyContent:null,";>*{padding:",t.halfGutter?t.halfGutter+"px":null,";}","")})),$l=Wl((function(t){var e=t.shrink,n=t.grow,r=t.basis,i=t.xs,o=s()(t,Gl);return Pt("flex-grow:",Vl(n),";flex-shrink:",Vl(e),";flex-basis:",r?"number"==typeof r?r+"%":r:"auto",";flex-basis:",i?100*i/24+"%":null,";",ql(o.sm,600),";",ql(o.md,700),";",ql(o.lg,800),";",ql(o.xl,1e3),";","")}));function Kl(t){for(var e,n=[[]],r=function(){var t=e.value,r=n.find((function(e){return!e[0]||e[0].groupId===t.groupId}));r?r.push(t):n.push([t])},i=Qt(t);!(e=i()).done;)r();return n}function Yl(t){for(var e,n=[],r=Qt(t);!(e=r()).done;){var i=e.value;n.push.apply(n,i)}return n}function Xl(t){return t.slice().reverse()}function Jl(t,e){return e?t.find((function(t){return!t.disabled&&t.id!==e})):t.find((function(t){return!t.disabled}))}function Ql(t,e){var n;return e||null===e?e:t.currentId||null===t.currentId?t.currentId:null===(n=Jl(t.items||[]))||void 0===n?void 0:n.id}function tc(t,e){if(e)return null==t?void 0:t.find((function(t){return t.id===e&&!t.disabled}))}function ec(t,e){return function(t){return"function"==typeof t}(t)?t(e):t}function nc(t,e){return Boolean(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_PRECEDING)}function rc(t,e){return t.findIndex((function(t){return!(!t.ref.current||!e.ref.current)&&nc(e.ref.current,t.ref.current)}))}function ic(t){for(var e,n=0,r=Qt(t);!(e=r()).done;){var i=e.value.length;i>n&&(n=i)}return n}function oc(t){for(var e=Kl(t),n=ic(e),r=[],i=0;i<n;i+=1)for(var o,a=Qt(e);!(o=a()).done;){var s=o.value;s[i]&&r.push(Yt(Yt({},s[i]),{},{groupId:s[i].groupId?""+i:void 0}))}return r}function ac(t,e,n){for(var r,i=ic(t),o=Qt(t);!(r=o()).done;)for(var a=r.value,s=0;s<i;s+=1){var l=a[s];if(!l||n&&l.disabled){var c=0===s&&n?Jl(a):a[s-1];a[s]=c&&e!==(null==c?void 0:c.id)&&n?c:{id:"__EMPTY_ITEM__",disabled:!0,ref:{current:null},groupId:null==c?void 0:c.groupId}}}return t}var sc={id:null,ref:{current:null}};function lc(t,e){return t.filter((function(t){return t.groupId===e}))}var cc={horizontal:"vertical",vertical:"horizontal"};function uc(t,e,n){return n in t?[].concat(t.slice(0,n),[e],t.slice(n)):[].concat(t,[e])}function hc(t){var e=t.map((function(t,e){return[e,t]})),n=!1;return e.sort((function(t,e){var r=t[0],i=t[1],o=e[0],a=e[1],s=i.ref.current,l=a.ref.current;return s&&l?nc(s,l)?(r>o&&(n=!0),-1):(r<o&&(n=!0),1):0})),n?e.map((function(t){t[0];return t[1]})):t}function dc(t,e){var n=hc(t);t!==n&&e(n)}function pc(t,e){var n=Object(l.useRef)([]);Object(l.useEffect)((function(){for(var r,i=function(t){for(var e,n=t[0],r=t.slice(1),i=null==n||null===(e=n.ref.current)||void 0===e?void 0:e.parentElement,o=function(){var t=i;if(r.every((function(e){return t.contains(e.ref.current)})))return{v:i};i=i.parentElement};i;){var a=o();if("object"==typeof a)return a.v}return Se(i).body}(t),o=new IntersectionObserver((function(){!!n.current.length&&dc(t,e),n.current=t}),{root:i}),a=Qt(t);!(r=a()).done;){var s=r.value;s.ref.current&&o.observe(s.ref.current)}return function(){o.disconnect()}}),[t])}function fc(t,e){"function"==typeof IntersectionObserver?pc(t,e):function(t,e){Object(l.useEffect)((function(){var n=setTimeout((function(){return dc(t,e)}),250);return function(){return clearTimeout(n)}}))}(t,e)}function mc(t,e){var n=t.unstable_virtual,r=t.rtl,i=t.orientation,o=t.items,a=t.groups,s=t.currentId,l=t.loop,c=t.wrap,u=t.pastIds,h=t.shift,d=t.unstable_moves,p=t.unstable_includesBaseElement,f=t.initialVirtual,m=t.initialRTL,g=t.initialOrientation,y=t.initialCurrentId,v=t.initialLoop,_=t.initialWrap,b=t.initialShift,x=t.hasSetCurrentId;switch(e.type){case"registerGroup":var w=e.group;if(0===a.length)return Yt(Yt({},t),{},{groups:[w]});var E=rc(a,w);return Yt(Yt({},t),{},{groups:uc(a,w,E)});case"unregisterGroup":var C=e.id,S=a.filter((function(t){return t.id!==C}));return S.length===a.length?t:Yt(Yt({},t),{},{groups:S});case"registerItem":var T,O=e.item,I=a.find((function(t){var e;return null===(e=t.ref.current)||void 0===e?void 0:e.contains(O.ref.current)})),A=Yt({groupId:null==I?void 0:I.id},O),M=rc(o,A),k=Yt(Yt({},t),{},{items:uc(o,A,M)});return x||d||void 0!==y?k:Yt(Yt({},k),{},{currentId:null===(T=Jl(k.items))||void 0===T?void 0:T.id});case"unregisterItem":var P=e.id,D=o.filter((function(t){return t.id!==P}));if(D.length===o.length)return t;var R=u.filter((function(t){return t!==P})),L=Yt(Yt({},t),{},{pastIds:R,items:D});if(s&&s===P){var N=p?null:Ql(Yt(Yt({},L),{},{currentId:R[0]}));return Yt(Yt({},L),{},{currentId:N})}return L;case"move":var j=e.id;if(void 0===j)return t;var F=u.filter((function(t){return t!==s&&t!==j})),z=s?[s].concat(F):F,B=Yt(Yt({},t),{},{pastIds:z});if(null===j)return Yt(Yt({},B),{},{unstable_moves:d+1,currentId:Ql(B,j)});var U=tc(o,j);return Yt(Yt({},B),{},{unstable_moves:U?d+1:d,currentId:Ql(B,null==U?void 0:U.id)});case"next":if(null==s)return mc(t,Yt(Yt({},e),{},{type:"first"}));var G=r&&"vertical"!==i,V=G?Xl(o):o,q=V.find((function(t){return t.id===s}));if(!q)return mc(t,Yt(Yt({},e),{},{type:"first"}));var H=!!q.groupId,W=V.indexOf(q),Z=V.slice(W+1),$=lc(Z,q.groupId);if(e.allTheWay){var K=Jl(G?lc(V,q.groupId):Xl($));return mc(t,Yt(Yt({},e),{},{type:"move",id:null==K?void 0:K.id}))}var Y=function(t){return t&&cc[t]}(H?i||"horizontal":i),X=l&&l!==Y,J=H&&c&&c!==Y,Q=e.hasNullItem||!H&&X&&p;if(X){var tt=Jl(function(t,e,n){var r=t.findIndex((function(t){return t.id===e}));return[].concat(t.slice(r+1),n?[sc]:[],t.slice(0,r))}(J&&!Q?V:lc(V,q.groupId),s,Q),s);return mc(t,Yt(Yt({},e),{},{type:"move",id:null==tt?void 0:tt.id}))}if(J){var et=Jl(Q?$:Z,s),nt=Q?(null==et?void 0:et.id)||null:null==et?void 0:et.id;return mc(t,Yt(Yt({},e),{},{type:"move",id:nt}))}var rt=Jl($,s);return mc(t,!rt&&Q?Yt(Yt({},e),{},{type:"move",id:null}):Yt(Yt({},e),{},{type:"move",id:null==rt?void 0:rt.id}));case"previous":var it=!!!a.length&&p,ot=mc(Yt(Yt({},t),{},{items:Xl(o)}),Yt(Yt({},e),{},{type:"next",hasNullItem:it}));return Yt(Yt({},ot),{},{items:o});case"down":var at=h&&!e.allTheWay,st=oc(Yl(ac(Kl(o),s,at))),lt=l&&"horizontal"!==l&&p,ct=mc(Yt(Yt({},t),{},{orientation:"vertical",items:st}),Yt(Yt({},e),{},{type:"next",hasNullItem:lt}));return Yt(Yt({},ct),{},{orientation:i,items:o});case"up":var ut=h&&!e.allTheWay,ht=oc(Xl(Yl(ac(Kl(o),s,ut)))),dt=p,pt=mc(Yt(Yt({},t),{},{orientation:"vertical",items:ht}),Yt(Yt({},e),{},{type:"next",hasNullItem:dt}));return Yt(Yt({},pt),{},{orientation:i,items:o});case"first":var ft=Jl(o);return mc(t,Yt(Yt({},e),{},{type:"move",id:null==ft?void 0:ft.id}));case"last":var mt=mc(Yt(Yt({},t),{},{items:Xl(o)}),Yt(Yt({},e),{},{type:"first"}));return Yt(Yt({},mt),{},{items:o});case"sort":return Yt(Yt({},t),{},{items:hc(o),groups:hc(a)});case"setVirtual":return Yt(Yt({},t),{},{unstable_virtual:ec(e.virtual,n)});case"setRTL":return Yt(Yt({},t),{},{rtl:ec(e.rtl,r)});case"setOrientation":return Yt(Yt({},t),{},{orientation:ec(e.orientation,i)});case"setCurrentId":var gt=Ql(Yt(Yt({},t),{},{currentId:ec(e.currentId,s)}));return Yt(Yt({},t),{},{currentId:gt,hasSetCurrentId:!0});case"setLoop":return Yt(Yt({},t),{},{loop:ec(e.loop,l)});case"setWrap":return Yt(Yt({},t),{},{wrap:ec(e.wrap,c)});case"setShift":return Yt(Yt({},t),{},{shift:ec(e.shift,h)});case"setIncludesBaseElement":return Yt(Yt({},t),{},{unstable_includesBaseElement:ec(e.includesBaseElement,p)});case"reset":return Yt(Yt({},t),{},{unstable_virtual:f,rtl:m,orientation:g,currentId:Ql(Yt(Yt({},t),{},{currentId:y})),loop:v,wrap:_,shift:b,unstable_moves:0,pastIds:[]});case"setItems":return Yt(Yt({},t),{},{items:e.items});default:throw new Error}}function gc(t){return Object(l.useCallback)(t,[])}function yc(t){void 0===t&&(t={});var e=zr(t),n=e.unstable_virtual,r=void 0!==n&&n,i=e.rtl,o=void 0!==i&&i,a=e.orientation,s=e.currentId,c=e.loop,u=void 0!==c&&c,h=e.wrap,d=void 0!==h&&h,p=e.shift,f=void 0!==p&&p,m=e.unstable_includesBaseElement,g=Vi(Xt(e,["unstable_virtual","rtl","orientation","currentId","loop","wrap","shift","unstable_includesBaseElement"])),y=Object(l.useReducer)(mc,{unstable_virtual:r,rtl:o,orientation:a,items:[],groups:[],currentId:s,loop:u,wrap:d,shift:f,unstable_moves:0,pastIds:[],unstable_includesBaseElement:null!=m?m:null===s,initialVirtual:r,initialRTL:o,initialOrientation:a,initialCurrentId:s,initialLoop:u,initialWrap:d,initialShift:f}),v=y[0],_=(v.pastIds,v.initialVirtual,v.initialRTL,v.initialOrientation,v.initialCurrentId,v.initialLoop,v.initialWrap,v.initialShift,v.hasSetCurrentId,Xt(v,["pastIds","initialVirtual","initialRTL","initialOrientation","initialCurrentId","initialLoop","initialWrap","initialShift","hasSetCurrentId"])),b=y[1],x=Object(l.useState)(!1),w=x[0],E=x[1],C=function(){var t=Object(l.useRef)(!1);return Ae((function(){return function(){t.current=!0}}),[]),t}(),S=Object(l.useCallback)((function(t){return b({type:"setItems",items:t})}),[]);return fc(_.items,S),Yt(Yt(Yt({},g),_),{},{unstable_hasActiveWidget:w,unstable_setHasActiveWidget:E,registerItem:gc((function(t){C.current||b({type:"registerItem",item:t})})),unregisterItem:gc((function(t){C.current||b({type:"unregisterItem",id:t})})),registerGroup:gc((function(t){C.current||b({type:"registerGroup",group:t})})),unregisterGroup:gc((function(t){C.current||b({type:"unregisterGroup",id:t})})),move:gc((function(t){return b({type:"move",id:t})})),next:gc((function(t){return b({type:"next",allTheWay:t})})),previous:gc((function(t){return b({type:"previous",allTheWay:t})})),up:gc((function(t){return b({type:"up",allTheWay:t})})),down:gc((function(t){return b({type:"down",allTheWay:t})})),first:gc((function(){return b({type:"first"})})),last:gc((function(){return b({type:"last"})})),sort:gc((function(){return b({type:"sort"})})),unstable_setVirtual:gc((function(t){return b({type:"setVirtual",virtual:t})})),setRTL:gc((function(t){return b({type:"setRTL",rtl:t})})),setOrientation:gc((function(t){return b({type:"setOrientation",orientation:t})})),setCurrentId:gc((function(t){return b({type:"setCurrentId",currentId:t})})),setLoop:gc((function(t){return b({type:"setLoop",loop:t})})),setWrap:gc((function(t){return b({type:"setWrap",wrap:t})})),setShift:gc((function(t){return b({type:"setShift",shift:t})})),unstable_setIncludesBaseElement:gc((function(t){return b({type:"setIncludesBaseElement",includesBaseElement:t})})),reset:gc((function(){return b({type:"reset"})}))})}function vc(t){void 0===t&&(t={});var e=Object(l.useContext)(So),n=zr(t),r=n.orientation,i=void 0===r?"vertical":r,o=n.gutter,a=void 0===o?0:o,s=Xt(n,["orientation","gutter"]),c=s.placement||(e&&"vertical"===e.orientation?"right-start":"bottom-start"),u=function(t){void 0===t&&(t={});var e=zr(t),n=e.orientation,r=void 0===n?"horizontal":n,i=e.unstable_values,o=void 0===i?{}:i,a=Xt(e,["orientation","unstable_values"]),s=Object(l.useState)(o),c=s[0],u=s[1],h=yc(Yt(Yt({},a),{},{orientation:r}));return Yt(Yt({},h),{},{unstable_values:c,unstable_setValue:Object(l.useCallback)((function(t,e){u((function(n){var r;return Yt(Yt({},n),{},((r={})[t]="function"==typeof e?e(n):e,r))}))}),[])})}(Yt(Yt({},s),{},{orientation:i})),h=$i(Yt(Yt({},s),{},{placement:c,gutter:a}));return Object(l.useEffect)((function(){h.visible||u.reset()}),[h.visible,u.reset]),Yt(Yt({},u),h)}var _c=[].concat(["baseId","unstable_idCountRef","unstable_virtual","rtl","orientation","items","groups","currentId","loop","wrap","shift","unstable_moves","unstable_hasActiveWidget","unstable_includesBaseElement","unstable_values","setBaseId","registerItem","unregisterItem","registerGroup","unregisterGroup","move","next","previous","up","down","first","last","sort","unstable_setVirtual","setRTL","setOrientation","setCurrentId","setLoop","setWrap","setShift","reset","unstable_setIncludesBaseElement","unstable_setHasActiveWidget","unstable_setValue"],["visible","animated","animating","show","hide","toggle","setVisible","setAnimated","stopAnimation","modal","unstable_disclosureRef","setModal","unstable_referenceRef","unstable_popoverRef","unstable_arrowRef","unstable_popoverStyles","unstable_arrowStyles","unstable_originalPlacement","unstable_update","placement","place"]),bc=_c,xc=bc,wc=xc;[].concat(wc,["name"]);function Ec(t){var e=null==t?void 0:t.find((function(t){return t.current&&!t.current.hidden}));return null==e?void 0:e.current}var Cc=function(){},Sc=ye({as:"button",memo:!0,useHook:_e({name:"MenuButton",compose:so,keys:xc,propsAreEqual:function(t,e){t.unstable_popoverStyles,t.unstable_arrowStyles,t.currentId,t.unstable_moves;var n=Xt(t,["unstable_popoverStyles","unstable_arrowStyles","currentId","unstable_moves"]),r=(e.unstable_popoverStyles,e.unstable_arrowStyles,e.currentId,e.unstable_moves,Xt(e,["unstable_popoverStyles","unstable_arrowStyles","currentId","unstable_moves"]));return so.unstable_propsAreEqual(n,r)},useProps:function(t,e){var n=e.ref,r=e.onClick,i=e.onKeyDown,o=e.onFocus,a=e.onMouseEnter,s=e.onMouseDown,c=Xt(e,["ref","onClick","onKeyDown","onFocus","onMouseEnter","onMouseDown"]),u=Object(l.useContext)(So),h=Object(l.useRef)(null),d=Object(l.useRef)(!1),p=t.placement.split("-")[0],f=!!u,m="menubar"===(null==u?void 0:u.role),g=t.disabled||c["aria-disabled"],y=Me(r),v=Me(i),_=Me(o),b=Me(a),x=Me(s),w=Object(l.useCallback)((function(e){var n,r;if("Escape"===e.key)null===(r=t.hide)||void 0===r||r.call(t);else if(!g){var i,o=t.first&&function(){return setTimeout(t.first)},a=t.last&&function(){return setTimeout(t.last)},s={Enter:o," ":o,ArrowUp:("top"===p||"bottom"===p)&&a,ArrowRight:"right"===p&&o,ArrowDown:("bottom"===p||"top"===p)&&o,ArrowLeft:"left"===p&&o}[e.key];if(s)return e.preventDefault(),e.stopPropagation(),null===(i=t.show)||void 0===i||i.call(t),void s()}null===(n=v.current)||void 0===n||n.call(v,e)}),[g,t.hide,t.first,t.last,p,t.show]),E=Object(l.useCallback)((function(e){var n;if(null===(n=b.current)||void 0===n||n.call(b,e),!e.defaultPrevented&&u){var r=e.currentTarget;m?Ec(u.children)&&r.focus():setTimeout((function(){var e;Re(r)&&(null===(e=t.show)||void 0===e||e.call(t))}),200)}}),[u,m,t.show]),C=Object(l.useCallback)((function(t){var e;d.current=!0,null===(e=x.current)||void 0===e||e.call(x,t)}),[]),S=Object(l.useCallback)((function(e){var n,r;(null===(n=_.current)||void 0===n||n.call(_,e),e.defaultPrevented)||(g||m&&!d.current&&(null===(r=t.show)||void 0===r||r.call(t)))}),[m,g,t.show]),T=Object(l.useCallback)((function(e){var n;if(null===(n=y.current)||void 0===n||n.call(y,e),!e.defaultPrevented){var r,i,o;if(f&&!m)null===(r=t.show)||void 0===r||r.call(t);else if(null===(i=t.toggle)||void 0===i||i.call(t),d.current&&!m&&!t.visible)null===(o=t.move)||void 0===o||o.call(t,null);d.current=!1}}),[f,m,t.show,t.toggle,t.visible,t.move]);return Yt({ref:xe(h,n),"aria-haspopup":"menu",onKeyDown:w,onMouseEnter:E,onMouseDown:C,onFocus:S,onClick:T},c)},useComposeOptions:function(t){return Yt(Yt({},t),{},{toggle:Cc})}})});function Tc(t,e,n){if("function"==typeof Event)return new Event(e,n);var r=Se(t).createEvent("Event");return r.initEvent(e,null==n?void 0:n.bubbles,null==n?void 0:n.cancelable),r}function Oc(t,e,n){return void 0===n&&(n={}),"function"==typeof FocusEvent?new FocusEvent(e,n):Tc(t,e,n)}function Ic(t,e){var n=Oc(t,"blur",e),r=t.dispatchEvent(n),i=ue(ue({},e),{},{bubbles:!0});return t.dispatchEvent(Oc(t,"focusout",i)),r}function Ac(t,e,n){return t.dispatchEvent(function(t,e,n){if(void 0===n&&(n={}),"function"==typeof KeyboardEvent)return new KeyboardEvent(e,n);var r=Se(t).createEvent("KeyboardEvent");return r.initKeyboardEvent(e,n.bubbles,n.cancelable,Te(t),n.key,n.location,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey),r}(t,e,n))}var Mc=["baseId","unstable_idCountRef","setBaseId","unstable_virtual","rtl","orientation","items","groups","currentId","loop","wrap","shift","unstable_moves","unstable_hasActiveWidget","unstable_includesBaseElement","registerItem","unregisterItem","registerGroup","unregisterGroup","move","next","previous","up","down","first","last","sort","unstable_setVirtual","setRTL","setOrientation","setCurrentId","setLoop","setWrap","setShift","reset","unstable_setIncludesBaseElement","unstable_setHasActiveWidget"],kc=Mc;function Pc(t){t.userFocus=!0,t.focus(),t.userFocus=!1}function Dc(t,e){t.userFocus=e}var Rc=Ie&&"msCrypto"in window;function Lc(t,e,n){var r=Me(n);return Object(l.useCallback)((function(n){var i;if(null===(i=r.current)||void 0===i||i.call(r,n),!n.defaultPrevented&&t&&function(t){return!!ke(t)&&(!t.metaKey&&"Tab"!==t.key)}(n)){var o=null==e?void 0:e.ref.current;o&&(Ac(o,n.type,n)||n.preventDefault(),n.currentTarget.contains(o)&&n.stopPropagation())}}),[t,e])}function Nc(t,e){return null==t?void 0:t.some((function(t){return!!e&&t.ref.current===e}))}var jc=_e({name:"Composite",compose:[Ke],keys:Mc,useOptions:function(t){return Yt(Yt({},t),{},{currentId:Ql(t)})},useProps:function(t,e){var n=e.ref,r=e.onFocusCapture,i=e.onFocus,o=e.onBlurCapture,a=e.onKeyDown,s=e.onKeyDownCapture,c=e.onKeyUpCapture,u=Xt(e,["ref","onFocusCapture","onFocus","onBlurCapture","onKeyDown","onKeyDownCapture","onKeyUpCapture"]),h=Object(l.useRef)(null),d=tc(t.items,t.currentId),p=Object(l.useRef)(null),f=Me(r),m=Me(i),g=Me(o),y=Me(a),v=function(t){var e=Me(t),n=Object(l.useReducer)((function(t){return t+1}),0),r=n[0],i=n[1];return Object(l.useEffect)((function(){var t,n=null===(t=e.current)||void 0===t?void 0:t.ref.current;r&&n&&Pc(n)}),[r]),i}(d),_=Rc?function(t){var e=Object(l.useRef)(null);return Object(l.useEffect)((function(){var n=Se(t.current),r=function(t){var n=t.target;e.current=n};return n.addEventListener("focus",r,!0),function(){n.removeEventListener("focus",r,!0)}}),[]),e}(h):void 0;Object(l.useEffect)((function(){var e=h.current;t.unstable_moves&&!d&&(null==e||e.focus())}),[t.unstable_moves,d]);var b=Lc(t.unstable_virtual,d,s),x=Lc(t.unstable_virtual,d,c),w=Object(l.useCallback)((function(e){var n;if(null===(n=f.current)||void 0===n||n.call(f,e),!e.defaultPrevented&&t.unstable_virtual){var r=(null==_?void 0:_.current)||e.relatedTarget,i=Nc(t.items,r);ke(e)&&i&&(e.stopPropagation(),p.current=r)}}),[t.unstable_virtual,t.items]),E=Object(l.useCallback)((function(e){var n;if(null===(n=m.current)||void 0===n||n.call(m,e),!e.defaultPrevented)if(t.unstable_virtual)ke(e)&&v();else if(ke(e)){var r;null===(r=t.setCurrentId)||void 0===r||r.call(t,null)}}),[t.unstable_virtual,t.setCurrentId]),C=Object(l.useCallback)((function(e){var n;if(null===(n=g.current)||void 0===n||n.call(g,e),!e.defaultPrevented&&t.unstable_virtual){var r=(null==d?void 0:d.ref.current)||null,i=xo(e),o=Nc(t.items,i);if(ke(e)&&o)i===r?p.current&&p.current!==i&&Ic(p.current,e):r&&Ic(r,e),e.stopPropagation();else!Nc(t.items,e.target)&&r&&Ic(r,e)}}),[t.unstable_virtual,t.items,d]),S=Object(l.useCallback)((function(e){var n,r;if(null===(n=y.current)||void 0===n||n.call(y,e),!e.defaultPrevented&&null===t.currentId&&ke(e)){var i="horizontal"!==t.orientation,o="vertical"!==t.orientation,a=!(null===(r=t.groups)||void 0===r||!r.length),s={ArrowUp:(a||i)&&function(){if(a){var e,n=Jl(Yl(Xl(Kl(t.items))));if(null!=n&&n.id)null===(e=t.move)||void 0===e||e.call(t,n.id)}else{var r;null===(r=t.last)||void 0===r||r.call(t)}},ArrowRight:(a||o)&&t.first,ArrowDown:(a||i)&&t.first,ArrowLeft:(a||o)&&t.last,Home:t.first,End:t.last,PageUp:t.first,PageDown:t.last}[e.key];s&&(e.preventDefault(),s())}}),[t.currentId,t.orientation,t.groups,t.items,t.move,t.last,t.first]);return Yt({ref:xe(h,n),id:t.baseId,onFocus:E,onFocusCapture:w,onBlurCapture:C,onKeyDownCapture:b,onKeyDown:S,onKeyUpCapture:x,"aria-activedescendant":t.unstable_virtual&&(null==d?void 0:d.id)||void 0},u)},useComposeProps:function(t,e){e=qe(t,e,!0);var n=Ke(t,e,!0);return t.unstable_virtual||null===t.currentId?Yt({tabIndex:0},n):Yt(Yt({},e),{},{ref:n.ref})}});ye({as:"div",useHook:jc,useCreateElement:function(t,e,n){return se(t,e,n)}});var Fc=_e({name:"MenuBar",compose:jc,keys:bc,useProps:function(t,e){var n=e.ref,r=e.wrapElement,i=e.role,o=void 0===i?"menubar":i,a=Xt(e,["ref","wrapElement","role"]),s=Object(l.useRef)(null),c=function(t,e,n){var r="unstable_orphan"in n&&n.unstable_orphan,i=Object(l.useContext)(So),o=Object(l.useState)([]),a=o[0],s=o[1],c=i||{},u=c.addChild,h=c.removeChild,d=Object(l.useCallback)((function(t){return s((function(e){return[].concat(e,[t])}))}),[]),p=Object(l.useCallback)((function(t){return s((function(e){return Co(e,t)}))}),[]);Object(l.useEffect)((function(){if(u&&!r)return u(t),function(){null==h||h(t)}}),[t,u,h,r]);var f=Object(l.useMemo)((function(){return{orientation:n.orientation,next:n.next,previous:n.previous,ref:t,role:e,parent:i,children:a,addChild:d,removeChild:p}}),[n.orientation,n.next,n.previous,t,e,i,a,d,p]);return Object(l.useCallback)((function(t){return Object(l.createElement)(So.Provider,{value:f},t)}),[f])}(s,o,t);!function(t,e,n){var r=e.items,i=void 0===r?[]:r,o=e.move;void 0===n&&(n=500);var a=Object(l.useState)(""),s=a[0],c=a[1];Object(l.useEffect)((function(){if(s){var t=setTimeout((function(){return c("")}),n),e=i.find((function(t){return Boolean(t.ref.current&&t.ref.current.textContent&&t.ref.current.textContent.toLowerCase().startsWith(s))}));return e&&o(e.id),function(){return clearTimeout(t)}}}),[s,i,o,n]),Object(l.useEffect)((function(){var e=t.current;if(e){var n=function(t){var n;if(!(t.key.length>1||t.shiftKey||t.metaKey||t.ctrlKey||t.altKey)){var r=t.target,i=null===(n=r.getAttribute)||void 0===n?void 0:n.call(r,"role"),o=r===e,a=i&&-1!==i.indexOf("menuitem")&&Fe(r,"[role=menu],[role=menubar]")===e;(o||a)&&/^[a-z0-9_-]$/i.test(t.key)&&(t.stopPropagation(),t.preventDefault(),c((function(e){return""+e+t.key})))}};return e.addEventListener("keydown",n),function(){return e.removeEventListener("keydown",n)}}}),[t,c])}(s,t);var u=Object(l.useCallback)((function(t){return t=c(t),r?r(t):t}),[c,r]);return Yt({ref:xe(s,n),role:o,"aria-orientation":t.orientation,wrapElement:u},a)}});ye({as:"div",useHook:Fc,useCreateElement:function(t,e,n){return se(t,e,n)}});var zc=ye({as:"div",useHook:_e({name:"Menu",compose:[Fc,Ko],keys:_c,useOptions:function(t){var e=Object(l.useContext)(So);return Yt(Yt({unstable_autoFocusOnHide:!("menubar"===(null==e?void 0:e.role)),modal:!1},t),{},{unstable_autoFocusOnShow:!1,hideOnEsc:!1})},useProps:function(t,e){for(var n=e.onKeyDown,r=Xt(e,["onKeyDown"]),i=Me(n),o=Object(l.useContext)(So),a=!!o,s=o;s&&"menubar"!==s.role;)s=s.parent;var c,u=s||{},h=u.next,d=u.previous,p="horizontal"===u.orientation,f=(c=t.placement,Object(l.useMemo)((function(){var t;return null==c||null===(t=c.split("-"))||void 0===t?void 0:t[0]}),[c]));return Yt({role:"menu",onKeyDown:Object(l.useCallback)((function(e){var n,r;if(null===(n=i.current)||void 0===n||n.call(i,e),!e.defaultPrevented)if("Escape"===e.key)a||e.stopPropagation(),null===(r=t.hide)||void 0===r||r.call(t);else if(a&&!Le(e)){var o={ArrowRight:p&&"left"!==f?h:"left"===f&&t.hide,ArrowLeft:p&&"right"!==f?d:"right"===f&&t.hide}[e.key];o&&(e.preventDefault(),a&&e.stopPropagation(),o())}}),[a,p,h,d,f,t.hide])},r)}}),useCreateElement:function(t,e,n){return se(t,e,n)}});function Bc(t){try{var e=t instanceof HTMLInputElement&&null!==t.selectionStart,n="TEXTAREA"===t.tagName,r="true"===t.contentEditable;return e||n||r||!1}catch(t){return!1}}var Uc=_e({keys:[].concat(["baseId","unstable_idCountRef","setBaseId"],["id"]),useOptions:function(t,e){var n=Object(l.useContext)(Gi),r=Object(l.useState)((function(){return t.unstable_idCountRef?(t.unstable_idCountRef.current+=1,"-"+t.unstable_idCountRef.current):t.baseId?"-"+n(""):""}))[0],i=Object(l.useMemo)((function(){return t.baseId||n()}),[t.baseId,n]),o=e.id||t.id||""+i+r;return Yt(Yt({},t),{},{id:o})},useProps:function(t,e){return Yt({id:t.id},e)}});ye({as:"div",useHook:Uc});function Gc(t,e){if(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement){var n,r=Object.getPrototypeOf(t),i=null===(n=Object.getOwnPropertyDescriptor(r,"value"))||void 0===n?void 0:n.set;i&&(i.call(t,e),function(t,e,n){t.dispatchEvent(Tc(t,e,n))}(t,"input",{bubbles:!0}))}}function Vc(t){return t.querySelector("[data-composite-item-widget]")}var qc=_e({name:"CompositeItem",compose:[Xe,Uc],keys:kc,propsAreEqual:function(t,e){if(!e.id||t.id!==e.id)return Xe.unstable_propsAreEqual(t,e);var n=t.currentId,r=t.unstable_moves,i=Xt(t,["currentId","unstable_moves"]),o=e.currentId,a=e.unstable_moves,s=Xt(e,["currentId","unstable_moves"]);if(o!==n){if(e.id===o||e.id===n)return!1}else if(r!==a)return!1;return Xe.unstable_propsAreEqual(i,s)},useOptions:function(t){return Yt(Yt({},t),{},{id:t.id,currentId:Ql(t),unstable_clickOnSpace:!t.unstable_hasActiveWidget&&t.unstable_clickOnSpace})},useProps:function(t,e){var n,r=e.ref,i=e.tabIndex,o=void 0===i?0:i,a=e.onMouseDown,s=e.onFocus,c=e.onBlurCapture,u=e.onKeyDown,h=e.onClick,d=Xt(e,["ref","tabIndex","onMouseDown","onFocus","onBlurCapture","onKeyDown","onClick"]),p=Object(l.useRef)(null),f=t.id,m=t.disabled&&!t.focusable,g=t.currentId===f,y=Me(g),v=Object(l.useRef)(!1),_=function(t){return Object(l.useMemo)((function(){var e;return null===(e=t.items)||void 0===e?void 0:e.find((function(e){return t.id&&e.id===t.id}))}),[t.items,t.id])}(t),b=Me(a),x=Me(s),w=Me(c),E=Me(u),C=Me(h),S=!t.unstable_virtual&&!t.unstable_hasActiveWidget&&g||!(null!==(n=t.items)&&void 0!==n&&n.length);Object(l.useEffect)((function(){var e;if(f)return null===(e=t.registerItem)||void 0===e||e.call(t,{id:f,ref:p,disabled:!!m}),function(){var e;null===(e=t.unregisterItem)||void 0===e||e.call(t,f)}}),[f,m,t.registerItem,t.unregisterItem]),Object(l.useEffect)((function(){var e=p.current;e&&t.unstable_moves&&y.current&&Pc(e)}),[t.unstable_moves]);var T=Object(l.useCallback)((function(t){var e;null===(e=b.current)||void 0===e||e.call(b,t),Dc(t.currentTarget,!0)}),[]),O=Object(l.useCallback)((function(e){var n,r,i=!!e.currentTarget.userFocus;if(Dc(e.currentTarget,!1),null===(n=x.current)||void 0===n||n.call(x,e),!e.defaultPrevented&&!Le(e)&&f&&!function(t,e){if(ke(t))return!1;for(var n,r=Qt(e);!(n=r()).done;){if(n.value.ref.current===t.target)return!0}return!1}(e,t.items)&&(null===(r=t.setCurrentId)||void 0===r||r.call(t,f),i&&t.unstable_virtual&&t.baseId&&ke(e))){var o=Se(e.target).getElementById(t.baseId);o&&(v.current=!0,Eo(o))}}),[f,t.items,t.setCurrentId,t.unstable_virtual,t.baseId]),I=Object(l.useCallback)((function(e){var n;null===(n=w.current)||void 0===n||n.call(w,e),e.defaultPrevented||t.unstable_virtual&&v.current&&(v.current=!1,e.preventDefault(),e.stopPropagation())}),[t.unstable_virtual]),A=Object(l.useCallback)((function(e){var n;if(ke(e)){var r="horizontal"!==t.orientation,i="vertical"!==t.orientation,o=!(null==_||!_.groupId),a={ArrowUp:(o||r)&&t.up,ArrowRight:(o||i)&&t.next,ArrowDown:(o||r)&&t.down,ArrowLeft:(o||i)&&t.previous,Home:function(){var n,r;!o||e.ctrlKey?null===(n=t.first)||void 0===n||n.call(t):null===(r=t.previous)||void 0===r||r.call(t,!0)},End:function(){var n,r;!o||e.ctrlKey?null===(n=t.last)||void 0===n||n.call(t):null===(r=t.next)||void 0===r||r.call(t,!0)},PageUp:function(){var e,n;o?null===(e=t.up)||void 0===e||e.call(t,!0):null===(n=t.first)||void 0===n||n.call(t)},PageDown:function(){var e,n;o?null===(e=t.down)||void 0===e||e.call(t,!0):null===(n=t.last)||void 0===n||n.call(t)}}[e.key];if(a)return e.preventDefault(),void a();if(null===(n=E.current)||void 0===n||n.call(E,e),!e.defaultPrevented)if(1===e.key.length&&" "!==e.key){var s=Vc(e.currentTarget);s&&Bc(s)&&(s.focus(),Gc(s,""))}else if("Delete"===e.key||"Backspace"===e.key){var l=Vc(e.currentTarget);l&&Bc(l)&&(e.preventDefault(),Gc(l,""))}}}),[t.orientation,_,t.up,t.next,t.down,t.previous,t.first,t.last]),M=Object(l.useCallback)((function(t){var e;if(null===(e=C.current)||void 0===e||e.call(C,t),!t.defaultPrevented){var n=Vc(t.currentTarget);n&&!Re(n)&&n.focus()}}),[]);return Yt({ref:xe(p,r),id:f,tabIndex:S?o:-1,"aria-selected":!(!t.unstable_virtual||!g)||void 0,onMouseDown:T,onFocus:O,onBlurCapture:I,onKeyDown:A,onClick:M},d)}});ye({as:"button",memo:!0,useHook:qc});function Hc(t,e,n){return Math.abs((t.x*(e.y-n.y)+e.x*(n.y-t.y)+n.x*(t.y-e.y))/2)}function Wc(t,e){var n=Me(e),r=Object(l.useRef)(null),i=Object(l.useRef)(null),o=Object(l.useRef)(null),a=Object(l.useRef)(0),s=Object(l.useRef)(0),c=Object(l.useCallback)((function(e){if(null!=t&&t.children.length){i.current=null,o.current=null;var n=Ec(t.children);if(n){var r=function(t,e){var n=e.getBoundingClientRect(),r=n.top,i=n.right,o=n.bottom,a=n.left,s=a>t.clientX?a:i;return[{x:s,y:r},{x:s,y:o}]}(e,n);i.current=r[0],o.current=r[1]}}}),[null==t?void 0:t.children]),u=Object(l.useCallback)((function(t){var e=a.current!==t.clientX||s.current!==t.clientY;if(t.isTrusted&&!e)return!0;var n=Math.abs(a.current-t.clientX);a.current=t.clientX,s.current=t.clientY;var l,u,h,d,p=function(){return i.current&&o.current};return"mouseleave"!==t.type||p()||c(t),!!p()&&(n&&r.current&&(l={x:t.clientX,y:t.clientY},u=r.current,h=i.current,d=o.current,Hc(u,h,d)===Hc(l,h,d)+Hc(u,l,d)+Hc(u,h,l)))}),[c]);return{onMouseEnter:Object(l.useCallback)((function(e){var i;null===(i=n.current)||void 0===i||i.call(n,e),e.defaultPrevented||"menubar"!==(null==t?void 0:t.role)&&(r.current={x:e.clientX,y:e.clientY},c(e))}),[null==t?void 0:t.role,c]),isMouseInTransitToSubmenu:u}}function Zc(t){var e=t.relatedTarget;return(null==e?void 0:e.nodeType)===Node.ELEMENT_NODE?t.relatedTarget:t.toElement||null}var $c=ye({as:"button",memo:!0,useHook:_e({name:"MenuItem",compose:qc,keys:wc,propsAreEqual:function(t,e){t.unstable_popoverStyles,t.unstable_arrowStyles,t.visible;var n=Xt(t,["unstable_popoverStyles","unstable_arrowStyles","visible"]),r=(e.unstable_popoverStyles,e.unstable_arrowStyles,e.visible,Xt(e,["unstable_popoverStyles","unstable_arrowStyles","visible"]));return qc.unstable_propsAreEqual(n,r)},useProps:function(t,e){var n=e.onMouseEnter,r=e.onMouseMove,i=e.onMouseLeave,o=Xt(e,["onMouseEnter","onMouseMove","onMouseLeave"]),a=Object(l.useContext)(So),s=Me(r),c=Me(i),u=Wc(a,n),h=u.onMouseEnter,d=u.isMouseInTransitToSubmenu;return Yt({role:"menuitem",onMouseEnter:h,onMouseMove:Object(l.useCallback)((function(e){var n,r;null===(n=s.current)||void 0===n||n.call(s,e),e.defaultPrevented||"menubar"!==(null==a?void 0:a.role)&&(d(e)||Re(e.currentTarget)||null===(r=t.move)||void 0===r||r.call(t,e.currentTarget.id))}),[t.move]),onMouseLeave:Object(l.useCallback)((function(e){var n;if(null===(n=c.current)||void 0===n||n.call(c,e),!(e.defaultPrevented||"menubar"===(null==a?void 0:a.role)||function(t){var e=Zc(t);return!!e&&De(t.currentTarget,e)}(e)||function(t,e){if(null==e||!e.length)return!1;var n=Zc(t);if(!n)return!1;var r=Ec(e);return r&&De(r,n)}(e,null==a?void 0:a.children)||function(t,e){var n=Zc(t);return!!n&&(null==e?void 0:e.some((function(t){return t.ref.current&&De(t.ref.current,n)})))}(e,t.items))){var r;if(d(e))return;null===(r=t.move)||void 0===r||r.call(t,null)}}),[null==a?void 0:a.role,null==a?void 0:a.children,t.items,t.move])},o)}})}),Kc=["trigger","placement","items","style"],Yc=["children","onChange","className","style"],Xc=["children"];var Jc=c.a.memo((function(t){var e=t.trigger,n=t.placement,r=t.items,i=t.style,a=s()(t,Kc),u=Object(l.useContext)(Zt),h=vc({placement:n||"rtl"===u.dir?"bottom-start":"bottom-end"});return kt(ea,{style:i},kt(Sc,o()({},h,e.props),(function(t){return c.a.cloneElement(e,t)})),kt(zc,o()({},h,a,{css:nu(u),style:{zIndex:999}}),kt("div",{css:ou({theme:u})},("function"==typeof r?r(h):r).map((function(t,e){return kt($c,o()({},h,t.props,{key:e}),(function(e){return c.a.cloneElement(t,e)}))})))))})),Qc=c.a.forwardRef((function(t,e){var n=t.children,r=t.onChange,i=t.className,a=t.style,c=s()(t,Yc),u=Object(l.useContext)(Zt);return kt("label",{className:i,css:ru(u),ref:e,style:a},kt("div",null,n),kt("div",null,kt(_r,o()({className:"gb-menuOption-inner-switch",onChange:r||null},c))))})),tu=c.a.forwardRef((function(t,e){var n=t.children,r=s()(t,Xc),i=Object(l.useContext)(Zt);return kt("button",o()({ref:e,css:iu(i)},r),kt("span",null,n))})),eu={name:"pim2nj",styles:"&:focus{outline:none;box-shadow:0 0 0 0.125em #00000005;}"},nu=function(t){return eu},ru=function(t){return Pt("padding:8px 8px;display:block;display:flex;width:100%;justify-content:space-between;overflow:hidden;font-size:13px;&>*{margin:0 8px;}&:focus,:focus-within{outline:none;background:",t.darkTheme?"#00000050":"#00000010",";}","")},iu=function(t){return Pt(ru(t),";background:none;border:none;background:none;outline:none;color:",t.color900,";","")},ou=function(t){return Pt("min-width:180px;max-width:100%;background-color:",t.theme.paperBackground100,";z-index:999;outline:0px;border:1px solid rgba(33, 33, 33, 0.15);box-shadow:3px 3px 2px rgba(0, 0, 0, 0.05);","")},au=n(38),su=n.n(au),lu=n(39),cu=n.n(lu),uu=n(21),hu=n.n(uu),du=n(43),pu=n.n(du),fu=n(44),mu=n.n(fu),gu=n(30),yu=n.n(gu);var vu,_u,bu;function xu(t,e,n){if(void 0===n&&(n=Error),!t)throw new n(e)}function wu(t){return t.type===_u.literal}function Eu(t){return t.type===_u.argument}function Cu(t){return t.type===_u.number}function Su(t){return t.type===_u.date}function Tu(t){return t.type===_u.time}function Ou(t){return t.type===_u.select}function Iu(t){return t.type===_u.plural}function Au(t){return t.type===_u.pound}function Mu(t){return t.type===_u.tag}function ku(t){return!(!t||"object"!=typeof t||t.type!==bu.number)}function Pu(t){return!(!t||"object"!=typeof t||t.type!==bu.dateTime)}!function(t){t[t.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",t[t.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",t[t.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",t[t.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",t[t.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",t[t.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",t[t.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",t[t.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",t[t.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",t[t.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",t[t.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",t[t.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",t[t.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",t[t.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",t[t.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",t[t.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",t[t.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",t[t.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",t[t.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",t[t.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",t[t.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",t[t.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",t[t.INVALID_TAG=23]="INVALID_TAG",t[t.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",t[t.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",t[t.UNCLOSED_TAG=27]="UNCLOSED_TAG"}(vu||(vu={})),function(t){t[t.literal=0]="literal",t[t.argument=1]="argument",t[t.number=2]="number",t[t.date=3]="date",t[t.time=4]="time",t[t.select=5]="select",t[t.plural=6]="plural",t[t.pound=7]="pound",t[t.tag=8]="tag"}(_u||(_u={})),function(t){t[t.number=0]="number",t[t.dateTime=1]="dateTime"}(bu||(bu={}));var Du=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,Ru=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function Lu(t){var e={};return t.replace(Ru,(function(t){var n=t.length;switch(t[0]){case"G":e.era=4===n?"long":5===n?"narrow":"short";break;case"y":e.year=2===n?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":e.month=["numeric","2-digit","short","long","narrow"][n-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":e.day=["numeric","2-digit"][n-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":e.weekday=4===n?"short":5===n?"narrow":"short";break;case"e":if(n<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][n-4];break;case"c":if(n<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][n-4];break;case"a":e.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":e.hourCycle="h12",e.hour=["numeric","2-digit"][n-1];break;case"H":e.hourCycle="h23",e.hour=["numeric","2-digit"][n-1];break;case"K":e.hourCycle="h11",e.hour=["numeric","2-digit"][n-1];break;case"k":e.hourCycle="h24",e.hour=["numeric","2-digit"][n-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":e.minute=["numeric","2-digit"][n-1];break;case"s":e.second=["numeric","2-digit"][n-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":e.timeZoneName=n<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""})),e}var Nu=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;var ju,Fu=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,zu=/^(@+)?(\+|#+)?[rs]?$/g,Bu=/(\*)(0+)|(#+)(0+)|(0+)/g,Uu=/^(0+)$/;function Gu(t){var e={};return"r"===t[t.length-1]?e.roundingPriority="morePrecision":"s"===t[t.length-1]&&(e.roundingPriority="lessPrecision"),t.replace(zu,(function(t,n,r){return"string"!=typeof r?(e.minimumSignificantDigits=n.length,e.maximumSignificantDigits=n.length):"+"===r?e.minimumSignificantDigits=n.length:"#"===n[0]?e.maximumSignificantDigits=n.length:(e.minimumSignificantDigits=n.length,e.maximumSignificantDigits=n.length+("string"==typeof r?r.length:0)),""})),e}function Vu(t){switch(t){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function qu(t){var e;if("E"===t[0]&&"E"===t[1]?(e={notation:"engineering"},t=t.slice(2)):"E"===t[0]&&(e={notation:"scientific"},t=t.slice(1)),e){var n=t.slice(0,2);if("+!"===n?(e.signDisplay="always",t=t.slice(2)):"+?"===n&&(e.signDisplay="exceptZero",t=t.slice(2)),!Uu.test(t))throw new Error("Malformed concise eng/scientific notation");e.minimumIntegerDigits=t.length}return e}function Hu(t){var e=Vu(t);return e||{}}function Wu(t){for(var e={},n=0,r=t;n<r.length;n++){var i=r[n];switch(i.stem){case"percent":case"%":e.style="percent";continue;case"%x100":e.style="percent",e.scale=100;continue;case"currency":e.style="currency",e.currency=i.options[0];continue;case"group-off":case",_":e.useGrouping=!1;continue;case"precision-integer":case".":e.maximumFractionDigits=0;continue;case"measure-unit":case"unit":e.style="unit",e.unit=i.options[0].replace(/^(.*?)-/,"");continue;case"compact-short":case"K":e.notation="compact",e.compactDisplay="short";continue;case"compact-long":case"KK":e.notation="compact",e.compactDisplay="long";continue;case"scientific":e=Object(Ea.a)(Object(Ea.a)(Object(Ea.a)({},e),{notation:"scientific"}),i.options.reduce((function(t,e){return Object(Ea.a)(Object(Ea.a)({},t),Hu(e))}),{}));continue;case"engineering":e=Object(Ea.a)(Object(Ea.a)(Object(Ea.a)({},e),{notation:"engineering"}),i.options.reduce((function(t,e){return Object(Ea.a)(Object(Ea.a)({},t),Hu(e))}),{}));continue;case"notation-simple":e.notation="standard";continue;case"unit-width-narrow":e.currencyDisplay="narrowSymbol",e.unitDisplay="narrow";continue;case"unit-width-short":e.currencyDisplay="code",e.unitDisplay="short";continue;case"unit-width-full-name":e.currencyDisplay="name",e.unitDisplay="long";continue;case"unit-width-iso-code":e.currencyDisplay="symbol";continue;case"scale":e.scale=parseFloat(i.options[0]);continue;case"integer-width":if(i.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");i.options[0].replace(Bu,(function(t,n,r,i,o,a){if(n)e.minimumIntegerDigits=r.length;else{if(i&&o)throw new Error("We currently do not support maximum integer digits");if(a)throw new Error("We currently do not support exact integer digits")}return""}));continue}if(Uu.test(i.stem))e.minimumIntegerDigits=i.stem.length;else if(Fu.test(i.stem)){if(i.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");i.stem.replace(Fu,(function(t,n,r,i,o,a){return"*"===r?e.minimumFractionDigits=n.length:i&&"#"===i[0]?e.maximumFractionDigits=i.length:o&&a?(e.minimumFractionDigits=o.length,e.maximumFractionDigits=o.length+a.length):(e.minimumFractionDigits=n.length,e.maximumFractionDigits=n.length),""}));var o=i.options[0];"w"===o?e=Object(Ea.a)(Object(Ea.a)({},e),{trailingZeroDisplay:"stripIfInteger"}):o&&(e=Object(Ea.a)(Object(Ea.a)({},e),Gu(o)))}else if(zu.test(i.stem))e=Object(Ea.a)(Object(Ea.a)({},e),Gu(i.stem));else{var a=Vu(i.stem);a&&(e=Object(Ea.a)(Object(Ea.a)({},e),a));var s=qu(i.stem);s&&(e=Object(Ea.a)(Object(Ea.a)({},e),s))}}return e}var Zu=new RegExp("^".concat(Du.source,"*")),$u=new RegExp("".concat(Du.source,"*$"));function Ku(t,e){return{start:t,end:e}}var Yu=!!String.prototype.startsWith,Xu=!!String.fromCodePoint,Ju=!!Object.fromEntries,Qu=!!String.prototype.codePointAt,th=!!String.prototype.trimStart,eh=!!String.prototype.trimEnd,nh=!!Number.isSafeInteger?Number.isSafeInteger:function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t&&Math.abs(t)<=9007199254740991},rh=!0;try{rh="a"===(null===(ju=hh("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu").exec("a"))||void 0===ju?void 0:ju[0])}catch(t){rh=!1}var ih,oh=Yu?function(t,e,n){return t.startsWith(e,n)}:function(t,e,n){return t.slice(n,n+e.length)===e},ah=Xu?String.fromCodePoint:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n,r="",i=t.length,o=0;i>o;){if((n=t[o++])>1114111)throw RangeError(n+" is not a valid code point");r+=n<65536?String.fromCharCode(n):String.fromCharCode(55296+((n-=65536)>>10),n%1024+56320)}return r},sh=Ju?Object.fromEntries:function(t){for(var e={},n=0,r=t;n<r.length;n++){var i=r[n],o=i[0],a=i[1];e[o]=a}return e},lh=Qu?function(t,e){return t.codePointAt(e)}:function(t,e){var n=t.length;if(!(e<0||e>=n)){var r,i=t.charCodeAt(e);return i<55296||i>56319||e+1===n||(r=t.charCodeAt(e+1))<56320||r>57343?i:r-56320+(i-55296<<10)+65536}},ch=th?function(t){return t.trimStart()}:function(t){return t.replace(Zu,"")},uh=eh?function(t){return t.trimEnd()}:function(t){return t.replace($u,"")};function hh(t,e){return new RegExp(t,e)}if(rh){var dh=hh("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");ih=function(t,e){var n;return dh.lastIndex=e,null!==(n=dh.exec(t)[1])&&void 0!==n?n:""}}else ih=function(t,e){for(var n=[];;){var r=lh(t,e);if(void 0===r||mh(r)||gh(r))break;n.push(r),e+=r>=65536?2:1}return ah.apply(void 0,n)};var ph=function(){function t(t,e){void 0===e&&(e={}),this.message=t,this.position={offset:0,line:1,column:1},this.ignoreTag=!!e.ignoreTag,this.requiresOtherClause=!!e.requiresOtherClause,this.shouldParseSkeletons=!!e.shouldParseSkeletons}return t.prototype.parse=function(){if(0!==this.offset())throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},t.prototype.parseMessage=function(t,e,n){for(var r=[];!this.isEOF();){var i=this.char();if(123===i){if((o=this.parseArgument(t,n)).err)return o;r.push(o.val)}else{if(125===i&&t>0)break;if(35!==i||"plural"!==e&&"selectordinal"!==e){if(60===i&&!this.ignoreTag&&47===this.peek()){if(n)break;return this.error(vu.UNMATCHED_CLOSING_TAG,Ku(this.clonePosition(),this.clonePosition()))}if(60===i&&!this.ignoreTag&&fh(this.peek()||0)){if((o=this.parseTag(t,e)).err)return o;r.push(o.val)}else{var o;if((o=this.parseLiteral(t,e)).err)return o;r.push(o.val)}}else{var a=this.clonePosition();this.bump(),r.push({type:_u.pound,location:Ku(a,this.clonePosition())})}}}return{val:r,err:null}},t.prototype.parseTag=function(t,e){var n=this.clonePosition();this.bump();var r=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:_u.literal,value:"<".concat(r,"/>"),location:Ku(n,this.clonePosition())},err:null};if(this.bumpIf(">")){var i=this.parseMessage(t+1,e,!0);if(i.err)return i;var o=i.val,a=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!fh(this.char()))return this.error(vu.INVALID_TAG,Ku(a,this.clonePosition()));var s=this.clonePosition();return r!==this.parseTagName()?this.error(vu.UNMATCHED_CLOSING_TAG,Ku(s,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:_u.tag,value:r,children:o,location:Ku(n,this.clonePosition())},err:null}:this.error(vu.INVALID_TAG,Ku(a,this.clonePosition())))}return this.error(vu.UNCLOSED_TAG,Ku(n,this.clonePosition()))}return this.error(vu.INVALID_TAG,Ku(n,this.clonePosition()))},t.prototype.parseTagName=function(){var t,e=this.offset();for(this.bump();!this.isEOF()&&(45===(t=this.char())||46===t||t>=48&&t<=57||95===t||t>=97&&t<=122||t>=65&&t<=90||183==t||t>=192&&t<=214||t>=216&&t<=246||t>=248&&t<=893||t>=895&&t<=8191||t>=8204&&t<=8205||t>=8255&&t<=8256||t>=8304&&t<=8591||t>=11264&&t<=12271||t>=12289&&t<=55295||t>=63744&&t<=64975||t>=65008&&t<=65533||t>=65536&&t<=983039);)this.bump();return this.message.slice(e,this.offset())},t.prototype.parseLiteral=function(t,e){for(var n=this.clonePosition(),r="";;){var i=this.tryParseQuote(e);if(i)r+=i;else{var o=this.tryParseUnquoted(t,e);if(o)r+=o;else{var a=this.tryParseLeftAngleBracket();if(!a)break;r+=a}}}var s=Ku(n,this.clonePosition());return{val:{type:_u.literal,value:r,location:s},err:null}},t.prototype.tryParseLeftAngleBracket=function(){return this.isEOF()||60!==this.char()||!this.ignoreTag&&(fh(t=this.peek()||0)||47===t)?null:(this.bump(),"<");var t},t.prototype.tryParseQuote=function(t){if(this.isEOF()||39!==this.char())return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if("plural"===t||"selectordinal"===t)break;return null;default:return null}this.bump();var e=[this.char()];for(this.bump();!this.isEOF();){var n=this.char();if(39===n){if(39!==this.peek()){this.bump();break}e.push(39),this.bump()}else e.push(n);this.bump()}return ah.apply(void 0,e)},t.prototype.tryParseUnquoted=function(t,e){if(this.isEOF())return null;var n=this.char();return 60===n||123===n||35===n&&("plural"===e||"selectordinal"===e)||125===n&&t>0?null:(this.bump(),ah(n))},t.prototype.parseArgument=function(t,e){var n=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(vu.EXPECT_ARGUMENT_CLOSING_BRACE,Ku(n,this.clonePosition()));if(125===this.char())return this.bump(),this.error(vu.EMPTY_ARGUMENT,Ku(n,this.clonePosition()));var r=this.parseIdentifierIfPossible().value;if(!r)return this.error(vu.MALFORMED_ARGUMENT,Ku(n,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(vu.EXPECT_ARGUMENT_CLOSING_BRACE,Ku(n,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:_u.argument,value:r,location:Ku(n,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(vu.EXPECT_ARGUMENT_CLOSING_BRACE,Ku(n,this.clonePosition())):this.parseArgumentOptions(t,e,r,n);default:return this.error(vu.MALFORMED_ARGUMENT,Ku(n,this.clonePosition()))}},t.prototype.parseIdentifierIfPossible=function(){var t=this.clonePosition(),e=this.offset(),n=ih(this.message,e),r=e+n.length;return this.bumpTo(r),{value:n,location:Ku(t,this.clonePosition())}},t.prototype.parseArgumentOptions=function(t,e,n,r){var i,o=this.clonePosition(),a=this.parseIdentifierIfPossible().value,s=this.clonePosition();switch(a){case"":return this.error(vu.EXPECT_ARGUMENT_TYPE,Ku(o,s));case"number":case"date":case"time":this.bumpSpace();var l=null;if(this.bumpIf(",")){this.bumpSpace();var c=this.clonePosition();if((g=this.parseSimpleArgStyleIfPossible()).err)return g;if(0===(d=uh(g.val)).length)return this.error(vu.EXPECT_ARGUMENT_STYLE,Ku(this.clonePosition(),this.clonePosition()));l={style:d,styleLocation:Ku(c,this.clonePosition())}}if((y=this.tryParseArgumentClose(r)).err)return y;var u=Ku(r,this.clonePosition());if(l&&oh(null==l?void 0:l.style,"::",0)){var h=ch(l.style.slice(2));if("number"===a)return(g=this.parseNumberSkeletonFromString(h,l.styleLocation)).err?g:{val:{type:_u.number,value:n,location:u,style:g.val},err:null};if(0===h.length)return this.error(vu.EXPECT_DATE_TIME_SKELETON,u);var d={type:bu.dateTime,pattern:h,location:l.styleLocation,parsedOptions:this.shouldParseSkeletons?Lu(h):{}};return{val:{type:"date"===a?_u.date:_u.time,value:n,location:u,style:d},err:null}}return{val:{type:"number"===a?_u.number:"date"===a?_u.date:_u.time,value:n,location:u,style:null!==(i=null==l?void 0:l.style)&&void 0!==i?i:null},err:null};case"plural":case"selectordinal":case"select":var p=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(vu.EXPECT_SELECT_ARGUMENT_OPTIONS,Ku(p,Object(Ea.a)({},p)));this.bumpSpace();var f=this.parseIdentifierIfPossible(),m=0;if("select"!==a&&"offset"===f.value){if(!this.bumpIf(":"))return this.error(vu.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,Ku(this.clonePosition(),this.clonePosition()));var g;if(this.bumpSpace(),(g=this.tryParseDecimalInteger(vu.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,vu.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE)).err)return g;this.bumpSpace(),f=this.parseIdentifierIfPossible(),m=g.val}var y,v=this.tryParsePluralOrSelectOptions(t,a,e,f);if(v.err)return v;if((y=this.tryParseArgumentClose(r)).err)return y;var _=Ku(r,this.clonePosition());return"select"===a?{val:{type:_u.select,value:n,options:sh(v.val),location:_},err:null}:{val:{type:_u.plural,value:n,options:sh(v.val),offset:m,pluralType:"plural"===a?"cardinal":"ordinal",location:_},err:null};default:return this.error(vu.INVALID_ARGUMENT_TYPE,Ku(o,s))}},t.prototype.tryParseArgumentClose=function(t){return this.isEOF()||125!==this.char()?this.error(vu.EXPECT_ARGUMENT_CLOSING_BRACE,Ku(t,this.clonePosition())):(this.bump(),{val:!0,err:null})},t.prototype.parseSimpleArgStyleIfPossible=function(){for(var t=0,e=this.clonePosition();!this.isEOF();){switch(this.char()){case 39:this.bump();var n=this.clonePosition();if(!this.bumpUntil("'"))return this.error(vu.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,Ku(n,this.clonePosition()));this.bump();break;case 123:t+=1,this.bump();break;case 125:if(!(t>0))return{val:this.message.slice(e.offset,this.offset()),err:null};t-=1;break;default:this.bump()}}return{val:this.message.slice(e.offset,this.offset()),err:null}},t.prototype.parseNumberSkeletonFromString=function(t,e){var n=[];try{n=function(t){if(0===t.length)throw new Error("Number skeleton cannot be empty");for(var e=[],n=0,r=t.split(Nu).filter((function(t){return t.length>0}));n<r.length;n++){var i=r[n].split("/");if(0===i.length)throw new Error("Invalid number skeleton");for(var o=i[0],a=i.slice(1),s=0,l=a;s<l.length;s++){if(0===l[s].length)throw new Error("Invalid number skeleton")}e.push({stem:o,options:a})}return e}(t)}catch(t){return this.error(vu.INVALID_NUMBER_SKELETON,e)}return{val:{type:bu.number,tokens:n,location:e,parsedOptions:this.shouldParseSkeletons?Wu(n):{}},err:null}},t.prototype.tryParsePluralOrSelectOptions=function(t,e,n,r){for(var i,o=!1,a=[],s=new Set,l=r.value,c=r.location;;){if(0===l.length){var u=this.clonePosition();if("select"===e||!this.bumpIf("="))break;var h=this.tryParseDecimalInteger(vu.EXPECT_PLURAL_ARGUMENT_SELECTOR,vu.INVALID_PLURAL_ARGUMENT_SELECTOR);if(h.err)return h;c=Ku(u,this.clonePosition()),l=this.message.slice(u.offset,this.offset())}if(s.has(l))return this.error("select"===e?vu.DUPLICATE_SELECT_ARGUMENT_SELECTOR:vu.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,c);"other"===l&&(o=!0),this.bumpSpace();var d=this.clonePosition();if(!this.bumpIf("{"))return this.error("select"===e?vu.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:vu.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,Ku(this.clonePosition(),this.clonePosition()));var p=this.parseMessage(t+1,e,n);if(p.err)return p;var f=this.tryParseArgumentClose(d);if(f.err)return f;a.push([l,{value:p.val,location:Ku(d,this.clonePosition())}]),s.add(l),this.bumpSpace(),l=(i=this.parseIdentifierIfPossible()).value,c=i.location}return 0===a.length?this.error("select"===e?vu.EXPECT_SELECT_ARGUMENT_SELECTOR:vu.EXPECT_PLURAL_ARGUMENT_SELECTOR,Ku(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!o?this.error(vu.MISSING_OTHER_CLAUSE,Ku(this.clonePosition(),this.clonePosition())):{val:a,err:null}},t.prototype.tryParseDecimalInteger=function(t,e){var n=1,r=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(n=-1);for(var i=!1,o=0;!this.isEOF();){var a=this.char();if(!(a>=48&&a<=57))break;i=!0,o=10*o+(a-48),this.bump()}var s=Ku(r,this.clonePosition());return i?nh(o*=n)?{val:o,err:null}:this.error(e,s):this.error(t,s)},t.prototype.offset=function(){return this.position.offset},t.prototype.isEOF=function(){return this.offset()===this.message.length},t.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},t.prototype.char=function(){var t=this.position.offset;if(t>=this.message.length)throw Error("out of bound");var e=lh(this.message,t);if(void 0===e)throw Error("Offset ".concat(t," is at invalid UTF-16 code unit boundary"));return e},t.prototype.error=function(t,e){return{val:null,err:{kind:t,message:this.message,location:e}}},t.prototype.bump=function(){if(!this.isEOF()){var t=this.char();10===t?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=t<65536?1:2)}},t.prototype.bumpIf=function(t){if(oh(this.message,t,this.offset())){for(var e=0;e<t.length;e++)this.bump();return!0}return!1},t.prototype.bumpUntil=function(t){var e=this.offset(),n=this.message.indexOf(t,e);return n>=0?(this.bumpTo(n),!0):(this.bumpTo(this.message.length),!1)},t.prototype.bumpTo=function(t){if(this.offset()>t)throw Error("targetOffset ".concat(t," must be greater than or equal to the current offset ").concat(this.offset()));for(t=Math.min(t,this.message.length);;){var e=this.offset();if(e===t)break;if(e>t)throw Error("targetOffset ".concat(t," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},t.prototype.bumpSpace=function(){for(;!this.isEOF()&&mh(this.char());)this.bump()},t.prototype.peek=function(){if(this.isEOF())return null;var t=this.char(),e=this.offset(),n=this.message.charCodeAt(e+(t>=65536?2:1));return null!=n?n:null},t}();function fh(t){return t>=97&&t<=122||t>=65&&t<=90}function mh(t){return t>=9&&t<=13||32===t||133===t||t>=8206&&t<=8207||8232===t||8233===t}function gh(t){return t>=33&&t<=35||36===t||t>=37&&t<=39||40===t||41===t||42===t||43===t||44===t||45===t||t>=46&&t<=47||t>=58&&t<=59||t>=60&&t<=62||t>=63&&t<=64||91===t||92===t||93===t||94===t||96===t||123===t||124===t||125===t||126===t||161===t||t>=162&&t<=165||166===t||167===t||169===t||171===t||172===t||174===t||176===t||177===t||182===t||187===t||191===t||215===t||247===t||t>=8208&&t<=8213||t>=8214&&t<=8215||8216===t||8217===t||8218===t||t>=8219&&t<=8220||8221===t||8222===t||8223===t||t>=8224&&t<=8231||t>=8240&&t<=8248||8249===t||8250===t||t>=8251&&t<=8254||t>=8257&&t<=8259||8260===t||8261===t||8262===t||t>=8263&&t<=8273||8274===t||8275===t||t>=8277&&t<=8286||t>=8592&&t<=8596||t>=8597&&t<=8601||t>=8602&&t<=8603||t>=8604&&t<=8607||8608===t||t>=8609&&t<=8610||8611===t||t>=8612&&t<=8613||8614===t||t>=8615&&t<=8621||8622===t||t>=8623&&t<=8653||t>=8654&&t<=8655||t>=8656&&t<=8657||8658===t||8659===t||8660===t||t>=8661&&t<=8691||t>=8692&&t<=8959||t>=8960&&t<=8967||8968===t||8969===t||8970===t||8971===t||t>=8972&&t<=8991||t>=8992&&t<=8993||t>=8994&&t<=9e3||9001===t||9002===t||t>=9003&&t<=9083||9084===t||t>=9085&&t<=9114||t>=9115&&t<=9139||t>=9140&&t<=9179||t>=9180&&t<=9185||t>=9186&&t<=9254||t>=9255&&t<=9279||t>=9280&&t<=9290||t>=9291&&t<=9311||t>=9472&&t<=9654||9655===t||t>=9656&&t<=9664||9665===t||t>=9666&&t<=9719||t>=9720&&t<=9727||t>=9728&&t<=9838||9839===t||t>=9840&&t<=10087||10088===t||10089===t||10090===t||10091===t||10092===t||10093===t||10094===t||10095===t||10096===t||10097===t||10098===t||10099===t||10100===t||10101===t||t>=10132&&t<=10175||t>=10176&&t<=10180||10181===t||10182===t||t>=10183&&t<=10213||10214===t||10215===t||10216===t||10217===t||10218===t||10219===t||10220===t||10221===t||10222===t||10223===t||t>=10224&&t<=10239||t>=10240&&t<=10495||t>=10496&&t<=10626||10627===t||10628===t||10629===t||10630===t||10631===t||10632===t||10633===t||10634===t||10635===t||10636===t||10637===t||10638===t||10639===t||10640===t||10641===t||10642===t||10643===t||10644===t||10645===t||10646===t||10647===t||10648===t||t>=10649&&t<=10711||10712===t||10713===t||10714===t||10715===t||t>=10716&&t<=10747||10748===t||10749===t||t>=10750&&t<=11007||t>=11008&&t<=11055||t>=11056&&t<=11076||t>=11077&&t<=11078||t>=11079&&t<=11084||t>=11085&&t<=11123||t>=11124&&t<=11125||t>=11126&&t<=11157||11158===t||t>=11159&&t<=11263||t>=11776&&t<=11777||11778===t||11779===t||11780===t||11781===t||t>=11782&&t<=11784||11785===t||11786===t||11787===t||11788===t||11789===t||t>=11790&&t<=11798||11799===t||t>=11800&&t<=11801||11802===t||11803===t||11804===t||11805===t||t>=11806&&t<=11807||11808===t||11809===t||11810===t||11811===t||11812===t||11813===t||11814===t||11815===t||11816===t||11817===t||t>=11818&&t<=11822||11823===t||t>=11824&&t<=11833||t>=11834&&t<=11835||t>=11836&&t<=11839||11840===t||11841===t||11842===t||t>=11843&&t<=11855||t>=11856&&t<=11857||11858===t||t>=11859&&t<=11903||t>=12289&&t<=12291||12296===t||12297===t||12298===t||12299===t||12300===t||12301===t||12302===t||12303===t||12304===t||12305===t||t>=12306&&t<=12307||12308===t||12309===t||12310===t||12311===t||12312===t||12313===t||12314===t||12315===t||12316===t||12317===t||t>=12318&&t<=12319||12320===t||12336===t||64830===t||64831===t||t>=65093&&t<=65094}function yh(t,e){void 0===e&&(e={}),e=Object(Ea.a)({shouldParseSkeletons:!0,requiresOtherClause:!0},e);var n=new ph(t,e).parse();if(n.err){var r=SyntaxError(vu[n.err.kind]);throw r.location=n.err.location,r.originalMessage=n.err.message,r}return(null==e?void 0:e.captureLocation)||function t(e){e.forEach((function(e){if(delete e.location,Ou(e)||Iu(e))for(var n in e.options)delete e.options[n].location,t(e.options[n].value);else Cu(e)&&ku(e.style)||(Su(e)||Tu(e))&&Pu(e.style)?delete e.style.location:Mu(e)&&t(e.children)}))}(n.val),n.val}function vh(t,e){var n=e&&e.cache?e.cache:Th,r=e&&e.serializer?e.serializer:Eh;return(e&&e.strategy?e.strategy:wh)(t,{cache:n,serializer:r})}function _h(t,e,n,r){var i,o=null==(i=r)||"number"==typeof i||"boolean"==typeof i?r:n(r),a=e.get(o);return void 0===a&&(a=t.call(this,r),e.set(o,a)),a}function bh(t,e,n){var r=Array.prototype.slice.call(arguments,3),i=n(r),o=e.get(i);return void 0===o&&(o=t.apply(this,r),e.set(i,o)),o}function xh(t,e,n,r,i){return n.bind(e,t,r,i)}function wh(t,e){return xh(t,this,1===t.length?_h:bh,e.cache.create(),e.serializer)}var Eh=function(){return JSON.stringify(arguments)};function Ch(){this.cache=Object.create(null)}Ch.prototype.get=function(t){return this.cache[t]},Ch.prototype.set=function(t,e){this.cache[t]=e};var Sh,Th={create:function(){return new Ch}},Oh={variadic:function(t,e){return xh(t,this,bh,e.cache.create(),e.serializer)},monadic:function(t,e){return xh(t,this,_h,e.cache.create(),e.serializer)}};!function(t){t.MISSING_VALUE="MISSING_VALUE",t.INVALID_VALUE="INVALID_VALUE",t.MISSING_INTL_API="MISSING_INTL_API"}(Sh||(Sh={}));var Ih,Ah=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.code=n,i.originalMessage=r,i}return Object(Ea.b)(e,t),e.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},e}(Error),Mh=function(t){function e(e,n,r,i){return t.call(this,'Invalid values for "'.concat(e,'": "').concat(n,'". Options are "').concat(Object.keys(r).join('", "'),'"'),Sh.INVALID_VALUE,i)||this}return Object(Ea.b)(e,t),e}(Ah),kh=function(t){function e(e,n,r){return t.call(this,'Value for "'.concat(e,'" must be of type ').concat(n),Sh.INVALID_VALUE,r)||this}return Object(Ea.b)(e,t),e}(Ah),Ph=function(t){function e(e,n){return t.call(this,'The intl string context variable "'.concat(e,'" was not provided to the string "').concat(n,'"'),Sh.MISSING_VALUE,n)||this}return Object(Ea.b)(e,t),e}(Ah);function Dh(t){return"function"==typeof t}function Rh(t,e,n,r,i,o,a){if(1===t.length&&wu(t[0]))return[{type:Ih.literal,value:t[0].value}];for(var s=[],l=0,c=t;l<c.length;l++){var u=c[l];if(wu(u))s.push({type:Ih.literal,value:u.value});else if(Au(u))"number"==typeof o&&s.push({type:Ih.literal,value:n.getNumberFormat(e).format(o)});else{var h=u.value;if(!i||!(h in i))throw new Ph(h,a);var d=i[h];if(Eu(u))d&&"string"!=typeof d&&"number"!=typeof d||(d="string"==typeof d||"number"==typeof d?String(d):""),s.push({type:"string"==typeof d?Ih.literal:Ih.object,value:d});else if(Su(u)){var p="string"==typeof u.style?r.date[u.style]:Pu(u.style)?u.style.parsedOptions:void 0;s.push({type:Ih.literal,value:n.getDateTimeFormat(e,p).format(d)})}else if(Tu(u)){p="string"==typeof u.style?r.time[u.style]:Pu(u.style)?u.style.parsedOptions:void 0;s.push({type:Ih.literal,value:n.getDateTimeFormat(e,p).format(d)})}else if(Cu(u)){(p="string"==typeof u.style?r.number[u.style]:ku(u.style)?u.style.parsedOptions:void 0)&&p.scale&&(d*=p.scale||1),s.push({type:Ih.literal,value:n.getNumberFormat(e,p).format(d)})}else{if(Mu(u)){var f=u.children,m=u.value,g=i[m];if(!Dh(g))throw new kh(m,"function",a);var y=g(Rh(f,e,n,r,i,o).map((function(t){return t.value})));Array.isArray(y)||(y=[y]),s.push.apply(s,y.map((function(t){return{type:"string"==typeof t?Ih.literal:Ih.object,value:t}})))}if(Ou(u)){if(!(v=u.options[d]||u.options.other))throw new Mh(u.value,d,Object.keys(u.options),a);s.push.apply(s,Rh(v.value,e,n,r,i))}else if(Iu(u)){var v;if(!(v=u.options["=".concat(d)])){if(!Intl.PluralRules)throw new Ah('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n',Sh.MISSING_INTL_API,a);var _=n.getPluralRules(e,{type:u.pluralType}).select(d-(u.offset||0));v=u.options[_]||u.options.other}if(!v)throw new Mh(u.value,d,Object.keys(u.options),a);s.push.apply(s,Rh(v.value,e,n,r,i,d-(u.offset||0)))}else;}}}return function(t){return t.length<2?t:t.reduce((function(t,e){var n=t[t.length-1];return n&&n.type===Ih.literal&&e.type===Ih.literal?n.value+=e.value:t.push(e),t}),[])}(s)}function Lh(t,e){return e?Object.keys(t).reduce((function(n,r){var i,o;return n[r]=(i=t[r],(o=e[r])?Object(Ea.a)(Object(Ea.a)(Object(Ea.a)({},i||{}),o||{}),Object.keys(i).reduce((function(t,e){return t[e]=Object(Ea.a)(Object(Ea.a)({},i[e]),o[e]||{}),t}),{})):i),n}),Object(Ea.a)({},t)):t}function Nh(t){return{create:function(){return{get:function(e){return t[e]},set:function(e,n){t[e]=n}}}}}!function(t){t[t.literal=0]="literal",t[t.object=1]="object"}(Ih||(Ih={}));var jh,Fh=function(){function t(e,n,r,i){var o,a=this;if(void 0===n&&(n=t.defaultLocale),this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(t){var e=a.formatToParts(t);if(1===e.length)return e[0].value;var n=e.reduce((function(t,e){return t.length&&e.type===Ih.literal&&"string"==typeof t[t.length-1]?t[t.length-1]+=e.value:t.push(e.value),t}),[]);return n.length<=1?n[0]||"":n},this.formatToParts=function(t){return Rh(a.ast,a.locales,a.formatters,a.formats,t,void 0,a.message)},this.resolvedOptions=function(){return{locale:Intl.NumberFormat.supportedLocalesOf(a.locales)[0]}},this.getAst=function(){return a.ast},"string"==typeof e){if(this.message=e,!t.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");this.ast=t.__parse(e,{ignoreTag:null==i?void 0:i.ignoreTag})}else this.ast=e;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=Lh(t.formats,r),this.locales=n,this.formatters=i&&i.formatters||(void 0===(o=this.formatterCache)&&(o={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:vh((function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new((t=Intl.NumberFormat).bind.apply(t,Object(Ea.d)([void 0],e,!1)))}),{cache:Nh(o.number),strategy:Oh.variadic}),getDateTimeFormat:vh((function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new((t=Intl.DateTimeFormat).bind.apply(t,Object(Ea.d)([void 0],e,!1)))}),{cache:Nh(o.dateTime),strategy:Oh.variadic}),getPluralRules:vh((function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new((t=Intl.PluralRules).bind.apply(t,Object(Ea.d)([void 0],e,!1)))}),{cache:Nh(o.pluralRules),strategy:Oh.variadic})})}return Object.defineProperty(t,"defaultLocale",{get:function(){return t.memoizedDefaultLocale||(t.memoizedDefaultLocale=(new Intl.NumberFormat).resolvedOptions().locale),t.memoizedDefaultLocale},enumerable:!1,configurable:!0}),t.memoizedDefaultLocale=null,t.__parse=yh,t.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},t}();!function(t){t.FORMAT_ERROR="FORMAT_ERROR",t.UNSUPPORTED_FORMATTER="UNSUPPORTED_FORMATTER",t.INVALID_CONFIG="INVALID_CONFIG",t.MISSING_DATA="MISSING_DATA",t.MISSING_TRANSLATION="MISSING_TRANSLATION"}(jh||(jh={}));var zh=function(t){function e(n,r,i){var o=this,a=i?i instanceof Error?i:new Error(String(i)):void 0;return(o=t.call(this,"[@formatjs/intl Error ".concat(n,"] ").concat(r," \n").concat(a?"\n".concat(a.message,"\n").concat(a.stack):""))||this).code=n,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(o,e),o}return Object(Ea.b)(e,t),e}(Error),Bh=function(t){function e(e,n){return t.call(this,jh.UNSUPPORTED_FORMATTER,e,n)||this}return Object(Ea.b)(e,t),e}(zh),Uh=function(t){function e(e,n){return t.call(this,jh.INVALID_CONFIG,e,n)||this}return Object(Ea.b)(e,t),e}(zh),Gh=function(t){function e(e,n){return t.call(this,jh.MISSING_DATA,e,n)||this}return Object(Ea.b)(e,t),e}(zh),Vh=function(t){function e(e,n,r){return t.call(this,jh.FORMAT_ERROR,"".concat(e," \nLocale: ").concat(n,"\n"),r)||this}return Object(Ea.b)(e,t),e}(zh),qh=function(t){function e(e,n,r,i){var o=t.call(this,"".concat(e," \nMessageID: ").concat(null==r?void 0:r.id,"\nDefault Message: ").concat(null==r?void 0:r.defaultMessage,"\nDescription: ").concat(null==r?void 0:r.description," \n"),n,i)||this;return o.descriptor=r,o}return Object(Ea.b)(e,t),e}(Vh),Hh=function(t){function e(e,n){var r=t.call(this,jh.MISSING_TRANSLATION,'Missing message: "'.concat(e.id,'" for locale "').concat(n,'", using ').concat(e.defaultMessage?"default message":"id"," as fallback."))||this;return r.descriptor=e,r}return Object(Ea.b)(e,t),e}(zh);function Wh(t,e,n){return void 0===n&&(n={}),e.reduce((function(e,r){return r in t?e[r]=t[r]:r in n&&(e[r]=n[r]),e}),{})}var Zh={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},fallbackOnEmptyString:!0,onError:function(t){0}};function $h(t){return{create:function(){return{get:function(e){return t[e]},set:function(e,n){t[e]=n}}}}}function Kh(t,e,n,r){var i,o=t&&t[e];if(o&&(i=o[n]),i)return i;r(new Bh("No ".concat(e," format named: ").concat(n)))}function Yh(t){xu(t,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}var Xh=Object(Ea.a)(Object(Ea.a)({},Zh),{textComponent:l.Fragment});function Jh(t,e){if(t===e)return!0;if(!t||!e)return!1;var n=Object.keys(t),r=Object.keys(e),i=n.length;if(r.length!==i)return!1;for(var o=0;o<i;o++){var a=n[o];if(t[a]!==e[a]||!Object.prototype.hasOwnProperty.call(e,a))return!1}return!0}var Qh=l.createContext(null),td=Qh.Consumer,ed=Qh.Provider,nd=Qh;function rd(t,e){var n,r=e||{},i=r.intlPropName,o=void 0===i?"intl":i,a=r.forwardRef,s=void 0!==a&&a,c=r.enforceContext,u=void 0===c||c,h=function(e){return l.createElement(td,null,(function(n){var r;u&&Yh(n);var i=((r={})[o]=n,r);return l.createElement(t,Object(Ea.a)({},e,i,{ref:s?e.forwardedRef:null}))}))};return h.displayName="injectIntl(".concat((n=t).displayName||n.name||"Component",")"),h.WrappedComponent=t,s?lt()(l.forwardRef((function(t,e){return l.createElement(h,Object(Ea.a)({},t,{forwardedRef:e}))})),t):lt()(h,t)}function id(){var t=l.useContext(nd);return Yh(t),t}function od(t){var e=id(),n=e.formatMessage,r=e.textComponent,i=void 0===r?l.Fragment:r,o=t.id,a=t.description,s=t.defaultMessage,c=t.values,u=t.children,h=t.tagName,d=void 0===h?i:h,p=n({id:o,description:a,defaultMessage:s},c,{ignoreTag:t.ignoreTag});return"function"==typeof u?u(Array.isArray(p)?p:[p]):d?l.createElement(d,null,l.Children.toArray(p)):l.createElement(l.Fragment,null,p)}od.displayName="FormattedMessage";var ad=l.memo(od,(function(t,e){var n=t.values,r=Object(Ea.c)(t,["values"]),i=e.values,o=Object(Ea.c)(e,["values"]);return Jh(i,n)&&Jh(r,o)}));ad.displayName="MemoizedFormattedMessage";var sd,ld,cd,ud=ad;(ld=sd||(sd={})).formatDate="FormattedDate",ld.formatTime="FormattedTime",ld.formatNumber="FormattedNumber",ld.formatList="FormattedList",ld.formatDisplayName="FormattedDisplayName",function(t){t.formatDate="FormattedDateParts",t.formatTime="FormattedTimeParts",t.formatNumber="FormattedNumberParts",t.formatList="FormattedListParts"}(cd||(cd={}));var hd=function(t){var e=id(),n=t.value,r=t.children,i=Object(Ea.c)(t,["value","children"]);return r(e.formatNumberToParts(n,i))};hd.displayName="FormattedNumberParts";function dd(t){var e=function(e){var n=id(),r=e.value,i=e.children,o=Object(Ea.c)(e,["value","children"]),a="string"==typeof r?new Date(r||0):r;return i("formatDate"===t?n.formatDateToParts(a,o):n.formatTimeToParts(a,o))};return e.displayName=cd[t],e}function pd(t){var e=function(e){var n=id(),r=e.value,i=e.children,o=Object(Ea.c)(e,["value","children"]),a=n[t](r,o);if("function"==typeof i)return i(a);var s=n.textComponent||l.Fragment;return l.createElement(s,null,a)};return e.displayName=sd[t],e}hd.displayName="FormattedNumberParts";var fd=pd("formatDate"),md=(pd("formatTime"),pd("formatNumber")),gd=(pd("formatList"),pd("formatDisplayName"),dd("formatDate"),dd("formatTime"),{currentTooltipId:null,listeners:new Set,subscribe:function(t){var e=this;return this.listeners.add(t),function(){e.listeners.delete(t)}},show:function(t){this.currentTooltipId=t,this.listeners.forEach((function(e){return e(t)}))},hide:function(t){this.currentTooltipId===t&&(this.currentTooltipId=null,this.listeners.forEach((function(t){return t(null)})))}});function yd(t){void 0===t&&(t={});var e=zr(t),n=e.placement,r=void 0===n?"top":n,i=e.unstable_timeout,o=void 0===i?0:i,a=Xt(e,["placement","unstable_timeout"]),s=Object(l.useState)(o),c=s[0],u=s[1],h=Object(l.useRef)(null),d=Object(l.useRef)(null),p=$i(Yt(Yt({},a),{},{placement:r})),f=(p.modal,p.setModal,Xt(p,["modal","setModal"])),m=Object(l.useCallback)((function(){null!==h.current&&window.clearTimeout(h.current),null!==d.current&&window.clearTimeout(d.current)}),[]),g=Object(l.useCallback)((function(){m(),f.hide(),d.current=window.setTimeout((function(){gd.hide(f.baseId)}),c)}),[m,f.hide,c,f.baseId]),y=Object(l.useCallback)((function(){m(),!c||gd.currentTooltipId?(gd.show(f.baseId),f.show()):(gd.show(null),h.current=window.setTimeout((function(){gd.show(f.baseId),f.show()}),c))}),[m,c,f.show,f.baseId]);return Object(l.useEffect)((function(){return gd.subscribe((function(t){t!==f.baseId&&(m(),f.visible&&f.hide())}))}),[f.baseId,m,f.visible,f.hide]),Object(l.useEffect)((function(){return function(){m(),gd.hide(f.baseId)}}),[m,f.baseId]),Yt(Yt({},f),{},{hide:g,show:y,unstable_timeout:c,unstable_setTimeout:u})}var vd=["baseId","unstable_idCountRef","visible","animated","animating","setBaseId","show","hide","toggle","setVisible","setAnimated","stopAnimation","unstable_disclosureRef","unstable_referenceRef","unstable_popoverRef","unstable_arrowRef","unstable_popoverStyles","unstable_arrowStyles","unstable_originalPlacement","unstable_update","placement","place","unstable_timeout","unstable_setTimeout"],_d=[].concat(vd,["unstable_portal"]),bd=ye({as:"div",useHook:_e({name:"TooltipReference",compose:qe,keys:vd,useProps:function(t,e){var n=e.ref,r=e.onFocus,i=e.onBlur,o=e.onMouseEnter,a=e.onMouseLeave,s=Xt(e,["ref","onFocus","onBlur","onMouseEnter","onMouseLeave"]),c=Me(r),u=Me(i),h=Me(o),d=Me(a),p=Object(l.useCallback)((function(e){var n,r;null===(n=c.current)||void 0===n||n.call(c,e),e.defaultPrevented||null===(r=t.show)||void 0===r||r.call(t)}),[t.show]),f=Object(l.useCallback)((function(e){var n,r;null===(n=u.current)||void 0===n||n.call(u,e),e.defaultPrevented||null===(r=t.hide)||void 0===r||r.call(t)}),[t.hide]),m=Object(l.useCallback)((function(e){var n,r;null===(n=h.current)||void 0===n||n.call(h,e),e.defaultPrevented||null===(r=t.show)||void 0===r||r.call(t)}),[t.show]),g=Object(l.useCallback)((function(e){var n,r;null===(n=d.current)||void 0===n||n.call(d,e),e.defaultPrevented||null===(r=t.hide)||void 0===r||r.call(t)}),[t.hide]);return Yt({ref:xe(t.unstable_referenceRef,n),tabIndex:0,onFocus:p,onBlur:f,onMouseEnter:m,onMouseLeave:g,"aria-describedby":t.baseId},s)}})});function xd(t){t.defaultPrevented||"Escape"===t.key&&gd.show(null)}var wd=ye({as:"div",memo:!0,useHook:_e({name:"Tooltip",compose:uo,keys:_d,useOptions:function(t){var e=t.unstable_portal;return Yt({unstable_portal:void 0===e||e},Xt(t,["unstable_portal"]))},useProps:function(t,e){var n=e.ref,r=e.style,i=e.wrapElement,o=Xt(e,["ref","style","wrapElement"]);Object(l.useEffect)((function(){var e;Se(null===(e=t.unstable_popoverRef)||void 0===e?void 0:e.current).addEventListener("keydown",xd)}),[]);var a=Object(l.useCallback)((function(e){return t.unstable_portal&&(e=Object(l.createElement)(fo,null,e)),i?i(e):e}),[t.unstable_portal,i]);return Yt({ref:xe(t.unstable_popoverRef,n),role:"tooltip",style:Yt(Yt({},t.unstable_popoverStyles),{},{pointerEvents:"none"},r),wrapElement:a},o)}})}),Ed=function(t){return Pt(Ir(t)," font-size:12px;background-color:rgba(33, 33, 33, 0.9);padding:4px 8px;border-radius:",t.theme.borderRadius,"px;color:white;z-index:1000;","")},Cd=["children","title","placement"];function Sd(t){var e=t.children,n=t.title,r=t.placement,i=s()(t,Cd),a=yd({placement:r}),u=Object(l.useContext)(Zt);return kt(c.a.Fragment,null,kt(bd,o()({},a,{ref:e.ref},e.props),(function(t){return c.a.cloneElement(e,t)})),kt(wd,o()({},a,i,{css:Ed({theme:u})}),n))}Sd.Content=function(t){var e=Object(l.useContext)(Zt);return kt(wd,o()({},t,{css:Ed({theme:e})}))},Sd.Reference=bd,Sd.useTooltipState=yd;var Td=function(t){return Pt("width:",t.width,";display:inline-block;height:1em;animation:",Mr," 3s linear infinite;","")},Od=["width"],Id=function(t){var e,n=t.width,r=void 0===n?"100%":n,i=s()(t,Od),a=Object(l.useContext)(Zt);return e="random"===r?"".concat(Math.floor(50*Math.random()+50),"%"):"number"==typeof e?"".concat(Math.floor(50*Math.random()+50),"px"):r,kt("span",o()({css:Td({theme:a,width:e})},i)," ")};Id.displayName="Skeleton";var Ad=["noWrap"];var Md=function(t){return Pt("border:1px solid ",t.theme.paperBorderColor,";","")},kd=function(t){return Pt("width:100%;height:calc(100% - 30px);overflow:auto;position:relative;background:",t.theme.paperBackground,";flex:1 1 auto;","")},Pd=function(t){var e=t.theme;return Pt("height:30px;display:flex;flex-direction:row;padding:0 10px;background:",e.paperBackground500,";border-radius:0 0 ",e.borderRadius,"px ",e.borderRadius,"px;border-top:1px solid ",e.paperBorderColor,";","")},Dd={name:"7rew41",styles:"flex:0 0 auto;padding:0 10px;height:30px;line-height:30px;width:30px;padding:0;text-align:center;border:1px solid transparent"},Rd=function(t){t.theme;return Dd},Ld=function(t){return Pt(Rd(t),";&:hover{border-color:",t.theme.paperBorderColor,";}&:active{background:#f0f2f3;}",Ar(t),";","")},Nd=function(t){return Pt("position:relative;min-width:100%;border-collapse:separate;background:",t.theme.background,";border-spacing:0;font-size:85%;& th,td{border-right:1px solid ",t.theme.paperBorderColor,";transition:background-color 200ms ease;border-bottom:1px solid ",t.theme.paperBorderColor,";text-align:left;}& thead th{position:sticky;top:0;border-bottom-width:2px;background:",t.theme.paperBackground500,";color:",t.theme.color600,";padding:8px 12px;}& td{padding:12px;background:",t.theme.paperBackground500,";}& tbody>tr>td:first-of-type{border-right:1px solid ",t.theme.paperBorderColor,";background:",t.theme.paperBackground500,";}",t.stickyColumn?Fd(t):"",";",t.scrolled?zd(t):"",";","")},jd={name:"1fnpr55",styles:"& thead th:first-of-type{left:0;z-index:1;}& tbody>tr>td:first-of-type{position:sticky;left:0;}"},Fd=function(t){return jd},zd=function(t){var e=t.theme;return Pt("& td{background-color:",e.paperBackground600,";}& thead th{background:",e.paperBackground700,";}& thead th:first-of-type{background:",e.paperBackground500,";}","")},Bd=function(t){return Pt(Rd(t),";width:auto;font-size:12px;text-align:center;flex:1 1 auto;","")},Ud={name:"11lls6c",styles:"display:flex;word-break:break-word"},Gd=function(t){return Ud},Vd=function(t){var e=t.noWrap;s()(t,Ad);return Pt(e?"white-space: nowrap;":"",";","")},qd=function(t){return Pt("min-width:20em;",Gd(t),";","")},Hd={name:"1bmnxg7",styles:"white-space:nowrap"},Wd=function(t){return Hd},Zd=function(t){return Pt("td>*{background-color:",t.theme.color100,"55;color:transparent;}","")},$d=function(t){return Pt("background-color:",t.theme["paperBackground"+t.color],";","")},Kd=function(t){return Pt("color:",t.theme["color"+t.color],";","")},Yd={wrapper:Md,occurrenceTable:kd,footer:Pd,footerItem:Ld,table:Nd,stickyColumn:Fd,scrolled:zd,footerText:Bd,wide:qd,tbodyLoading:Zd},Xd=["loading","columnCount","rowCount"],Jd=["children","width","toggle","locked"],Qd=["children","width","noWrap"],tp=["intl","loading","theme","children","first","prev","next","size","from","total","fixedColumn","style"];function ep(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=yu()(t);if(e){var i=yu()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return mu()(this,n)}}var np=function(t){var e=t.loading,n=t.columnCount,r=t.rowCount,i=s()(t,Xd),a=Object(l.useContext)(Zt);return e?c.a.Children.count(i.children)>0?kt("tbody",o()({},i,{css:Zd({theme:a})})):kt("tbody",i,Array(r||10).fill().map((function(t,e){return kt("tr",{key:e},Array(n||5).fill().map((function(t,e){return kt("td",{key:e},kt(Id,null))})))}))):kt("tbody",i)},rp=function(t){var e=t.children,n=t.width,i=t.toggle,o=t.locked,a=s()(t,Jd);return kt("th",a,kt("div",{style:{display:"flex",alignItems:"center",wrap:"no-wrap"},css:r[n]?r[n]():""},kt("div",{style:{flex:"1 1 auto"}},e),i&&kt(Sd,{title:kt("span",null,kt(ud,{id:"search.table.lockColumn",defaultMessage:"Lock column"})),placement:"auto"},kt(pr,{appearance:"text",onClick:i,style:{display:"flex",marginLeft:5}},kt(o?Dn:Pn,null)))))},ip=function(t){var e=t.children,n=t.width,r=t.noWrap,i=s()(t,Qd);return kt("td",i,kt("span",{css:Vd({width:n,noWrap:r})},e))},op=function(t){pu()(n,t);var e=ep(n);function n(t){var r;return su()(this,n),(r=e.call(this,t)).bodyScroll=r.bodyScroll.bind(hu()(r)),r.scrollToTop=r.scrollToTop.bind(hu()(r)),r.myRef=c.a.createRef(),r.state={},r}return cu()(n,[{key:"componentDidUpdate",value:function(t){t.loading!==this.props.loading&&this.scrollToTop()}},{key:"bodyScroll",value:function(){this.setState({scrolled:0!==this.myRef.current.scrollLeft})}},{key:"scrollToTop",value:function(){this.myRef.current.scrollTop=0}},{key:"render",value:function(){var t=this.props,e=t.intl,n=(t.loading,t.theme),r=t.children,i=t.first,a=t.prev,l=t.next,u=t.size,h=t.from,d=t.total,p=t.fixedColumn,f=t.style,m=s()(t,tp),g=1+Math.floor(h/u),y=Math.ceil(d/u);return kt(c.a.Fragment,null,kt("div",o()({css:Md({theme:n}),style:f},m),kt("div",{css:kd({theme:n}),onScroll:this.bodyScroll,ref:this.myRef},kt("table",{css:Nd({theme:n,stickyColumn:p,scrolled:this.state.scrolled&&p})},r)),l&&kt("div",{css:Pd({theme:n})},i&&g>2&&kt(pr,{appearance:"text",css:Ld({theme:n}),direction:"right",tip:e.formatMessage({id:"pagination.first"}),onClick:i},kt(er,null)),a&&g>1&&kt(pr,{appearance:"text",css:Ld({theme:n}),direction:"right",tip:e.formatMessage({id:"pagination.previous"}),onClick:a},kt(Jn,null)),d>0&&kt("span",{css:Bd({theme:n})},kt(ud,{id:"pagination.pageXofY",defaultMessage:"Loading",values:{current:kt(md,{value:g}),total:kt(md,{value:y})}})),l&&g<y&&kt(pr,{appearance:"text",css:Ld({theme:n}),direction:"left",tip:e.formatMessage({id:"pagination.next"}),onClick:l},kt(Qn,null)))))}}]),n}(l.Component);function ap(t){var e=Object(l.useContext)(Zt),n=id();return kt(op,o()({theme:e,intl:n},t))}var sp=["src","w","h"],lp=function(t){var e=t.src,n=t.w,r=void 0===n?"":n,i=t.h,o=void 0===i?"":i;return"https://api.gbif.org/v1/image/unsafe/".concat(r,"x").concat(o,"/").concat(encodeURIComponent(e))},cp=c.a.forwardRef((function(t,e){var n=t.src,r=t.w,i=void 0===r?"":r,a=t.h,l=void 0===a?"":a,c=s()(t,sp);return kt("img",o()({src:lp({src:n,w:i,h:l}),ref:e},c))}));cp.getImageSrc=lp;var up={name:"gpfvns",styles:"display:flex;flex-wrap:wrap;justify-content:flex-start;padding:0;margin:-6px"},hp=function(t){t.theme;var e=t.height;return Pt("height:",void 0===e?150:e,"px;width:100%;background:#88888822;background-size:contain;background-repeat:no-repeat;background-position:center;&:hover{box-shadow:0 0 1px 1px rgba(0, 0, 0, 0.3);}","")},dp={name:"f6v012",styles:"flex:1 1 auto;width:150px;margin:6px;display:block;overflow:hidden;& img{display:none;}"},pp=function(t){t.height;return dp},fp={name:"19a2npw",styles:"font-size:.80em;font-weight:600;padding-top:2px"},mp=function(t){return Pt("flex:100 1 auto;display:flex;height:",t.height||150,"px;align-items:center;color:#888;min-width:100px;padding-left:30px;","")},gp={name:"kyhf4w",styles:"position:fixed;top:0;left:0;right:0;bottom:0;background:#00000010"},yp=function(t){return gp},vp=function(t){return Pt("height:",t.height,"px;width:",1.2*t.height,"px;flex:1 1 auto;margin:6px;animation:",Mr," 3s linear infinite;","")};var _p={name:"bjn8wh",styles:"position:relative"},bp={name:"1ej3ex3",styles:"position:absolute;bottom:20px;right:20px;background:rgba(0,0,0,.8);color:white;padding:0;display:flex"},xp=function(t){t.src;return _p},wp=function(){return bp},Ep=function(t){return Pt("height:100%;width:100%;background:url(",t.src,");background-position:center;background-size:contain;background-repeat:no-repeat;position:relative;text-align:center;",t.blur?"filter: blur(8px)":"",";","")},Cp=["src","thumbnail"],Sp=c.a.forwardRef((function(t,e){var n=t.src,r=t.thumbnail,i=s()(t,Cp),a=Object(l.useContext)(Zt),c=Object(l.useState)(),u=Nt()(c,2),h=u[0],d=u[1],p=Object(l.useState)(r),f=Nt()(p,2),m=f[0],g=f[1],y=Object(l.useRef)(null);Object(l.useEffect)((function(){if(g(r),Image){var t=new Image;t.onload=function(){g(this.src)},t.src=n}}),[n,r]);var v=Object(l.useCallback)((function(t){d(document.fullscreenElement===y.current)}));return Object(l.useEffect)((function(){return y.current.onfullscreenchange=v,function(){y.current.onfullscreenchange=void 0}}),[v]),kt("div",o()({ref:y,css:xp({theme:a})},i),kt("div",{css:Ep({theme:a,src:m,blur:m===r})}),kt("div",{css:wp({theme:a,src:n})},kt(pr,{style:{padding:10},appearance:"text",ref:e,onClick:function(){h?document.exitFullscreen():y.current.requestFullscreen()}},kt(h?nr:rr,null))))}));Sp.displayName="ZoomableImage";var Tp=["closeRequest","item","title","subtitle","details","previous","next","imageSrc"],Op=(Fl.TabList,Fl.Tab,Fl.TabPanel,function(t){t.closeRequest;var e=t.item,n=(t.title,t.subtitle,t.details),r=t.previous,i=t.next,a=t.imageSrc,c=s()(t,Tp),u=Object(l.useState)({src:a(e)}),h=Nt()(u,2),d=(h[0],h[1]);Object(l.useContext)(Zt);return Object(l.useEffect)((function(){function t(t){switch(t.which){case yn:return void r();case vn:return void i();default:return}}return document&&document.addEventListener("keydown",t,!1),function(){document&&document.removeEventListener("keydown",t,!1)}}),[i,r]),Object(l.useEffect)((function(){d({src:a(e)})}),[e,a]),kt(ea,null,kt(Zl,o()({as:"section",direction:"row",wrap:"nowrap"},c,{css:yp()}),kt($l,{shrink:!0,basis:"100%",style:{background:"#00000005"}}),kt(Zl,null,n&&n({item:e,onImageChange:d}))))});Op.displayName="Gallery";var Ip=["height"],Ap=["src","onSelect","height","minWidth","children","style"],Mp=["onSelect","caption","title","subtitle","details","items","loading","loadMore","imageSrc","size"],kp=["children"];function Pp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Dp(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pp(Object(n),!0).forEach((function(e){Ft()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Rp=function(t){var e=t.height,n=void 0===e?150:e,r=s()(t,Ip);return kt("div",o()({css:vp({height:n})},r))},Lp=function(t){var e=t.src,n=t.onSelect,r=t.height,i=void 0===r?150:r,a=t.minWidth,c=t.children,u=t.style,h=s()(t,Ap),d=Object(l.useContext)(Zt),p=Object(l.useState)(1),f=Nt()(p,2),m=f[0],g=f[1],y=Object(l.useState)(!1),v=Nt()(y,2),_=(v[0],v[1]),b=Object(l.useCallback)((function(t){_(!0);var e=t.target.naturalWidth/t.target.naturalHeight;g(e)}),[]),x={width:m*i},w={backgroundImage:"url('".concat(cp.getImageSrc({src:e,h:i}),"')")};return m>3&&(x.width=3*i),m<.3&&(x.width=.3*i),a&&(x.width=Math.max(a,x.width)),kt("div",{css:pp({theme:d,height:i}),style:Dp(Dp({},x),u)},kt(pr,o()({appearance:"text",css:hp({theme:d,height:i}),style:w,onClick:n},h,{title:"View details"}),e&&kt(cp,{src:e,width:i,h:i,onLoad:b,alt:"Occurrence evidence"})),c)},Np=function(t){Object(l.useContext)(Zt);return kt("div",o()({css:fp},t))},jp=function(t){var e=t.onSelect,n=t.caption,r=t.title,i=t.subtitle,a=t.details,u=t.items,h=void 0===u?[]:u,d=t.loading,p=t.loadMore,f=t.imageSrc,m=t.size,g=void 0===m?20:m,y=s()(t,Mp),v=Object(l.useContext)(Zt),_=Hi({animated:!0,modal:!1}),b=Object(l.useState)(),x=Nt()(b,2),w=x[0],E=x[1],C=Object(l.useState)(),S=Nt()(C,2),T=S[0],O=S[1];Object(l.useEffect)((function(){O(h[w])}),[w,h]);var I=Object(l.useCallback)((function(){E(Math.min(h.length-1,w+1))}),[h,w]),A=Object(l.useCallback)((function(){E(Math.max(0,w-1))}),[w]);return kt(c.a.Fragment,null,!e&&kt($o,o()({},_,{tabIndex:0,"aria-label":"Welcome"}),T&&kt(Op,{closeRequest:function(){return _.hide()},item:T,title:r?r(T):"Unknown",subtitle:r?i(T):null,details:a,imageSrc:f,next:I,previous:A})),kt(Fp,y,h.map((function(t,r){return kt(Lp,{height:150,key:r,src:f(t),onSelect:e?function(){return e({item:t})}:function(){E(r),_.show()}},n&&n({item:t,index:r}))})),d?Array(g).fill().map((function(t,e){return kt(Rp,{key:e})})):null,kt("div",{css:mp({theme:v,height:150})},p&&!d&&kt(pr,{appearance:"outline",onClick:p},kt(ud,{id:"search.loadMore",defaultMessage:"Load more"})))))},Fp=function(t){var e=t.children,n=s()(t,kp);Object(l.useContext)(Zt);return kt("div",o()({css:up},n),e,kt("div",{css:mp({height:1})}))};jp.displayName="Gallery";var zp=["size","color"],Bp=["size","color"],Up=["theme"];var Gp={name:"1nuhno9",styles:"padding-top:8px"},Vp=function(t){o()({},t);return Pt("","")},qp=function(t){t.theme,s()(t,Up);return Pt(">div{display:flex;flex-wrap:nowrap;align-items:center;}padding:12px 0 8px 0;list-style:none;list-style-type:none;",Er()," ",xr," &::-webkit-details-marker{display:none;}","")},Hp=function(t){o()({},t);return Gp},Wp=function(t){var e=t.size,n=void 0===e?5:e,r=t.color,i=void 0===r?"#88888855":r;s()(t,zp);return Pt("width:0;height:0;border-left:",n,"px solid transparent;border-right:",n,"px solid transparent;border-top:",n,"px solid ",i,";","")},Zp=function(t){var e=t.size,n=void 0===e?5:e,r=t.color,i=void 0===r?"#88888855":r;s()(t,Bp);return Pt("width:0;height:0;border-left:",n,"px solid transparent;border-right:",n,"px solid transparent;border-bottom:",n,"px solid ",i,";","")},$p=["summary","summaryStyle","open","onToggle","children"];var Kp=ks((function(t){var e=t.summary,n=t.summaryStyle,r=t.open,i=t.onToggle,a=t.children,c=s()(t,$p),u=Object(l.useContext)(Zt);return kt("details",o()({css:Vp({theme:u})},c,{open:r}),kt("summary",{style:n,css:qp({theme:u}),onClick:function(t){t.target.href||(t.preventDefault(),i(!r))}},kt("div",null,kt("div",{style:{flex:"1 1 auto"}},e),kt("div",{style:{flex:"0 0 auto"},css:r?Zp({}):Wp({})}))),kt("div",{css:Hp({theme:u})},a))}),{open:"onToggle"});function Yp(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:800,e=Object(l.useState)(!1),n=Nt()(e,2),r=n[0],i=n[1];return Object(l.useEffect)((function(){function e(){i(window.innerWidth<t)}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),r}Kp.displayName="Accordion";var Xp=["horizontal","dense"],Jp=["horizontal","theme"];function Qp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var tf={name:"10gfs5p",styles:"display:grid;grid-template-columns:minmax(75px, 150px) 1fr;>dt{margin-bottom:12px;&:last-of-type{margin-bottom:0;}}"},ef={name:"e49x6v",styles:">dt{margin-bottom:.1em;}"},nf=function(t){var e=t.horizontal,n=t.dense,r=s()(t,Xp);return Pt(e?(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Qp(Object(n),!0).forEach((function(e){Ft()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}}({},r),tf):ef,";margin-top:0;margin-bottom:0;>*{margin-bottom:",e&&n?4:12,"px;}","")},rf=function(t){var e=t.horizontal,n=t.theme;s()(t,Jp);return Pt("color:",n.color400,";margin-bottom :",e?20:0,"px;word-break:break-word;&:last-of-type{margin-bottom:",e?0:".1em",";}","")},of={name:"1hxhtqb",styles:"margin-left:0;line-height:1.4em;word-break:break-word;&:last-of-type{margin-bottom:0;}"},af=function(t){o()({},t);return of},sf=["as","breakpoint","horizontal","dense"],lf=["as"],cf=["as"];function uf(t){var e=t.as,n=void 0===e?"dl":e,r=t.breakpoint,i=t.horizontal,a=t.dense,c=void 0!==a&&a,u=s()(t,sf),h=Yp(r),d=Object(l.useContext)(Zt);return kt(n,o()({css:nf({theme:d,horizontal:void 0!==i?i:!h,dense:c})},u))}uf.Term=function(t){var e=t.as,n=void 0===e?"dt":e,r=s()(t,lf),i=Object(l.useContext)(Zt);return kt(n,o()({css:rf({theme:i,props:r})},r))},uf.Value=function(t){var e=t.as,n=void 0===e?"dd":e,r=s()(t,cf),i=Object(l.useContext)(Zt);return kt(n,o()({css:af({theme:i})},r))};var hf=function(t){return Pt("position:relative;top:-0.09em;display:inline-block;line-height:1;white-space:nowrap;vertical-align:middle;outline:none;cursor:pointer;input{",Cr,";}& input+span{position:relative;top:0;left:0;display:block;width:1em;height:1em;border:1px solid #d9d9d9;border-radius:100px;transition:all 0.1s;&:after{position:absolute;top:0px;left:0px;display:table;width:100%;height:100%;border:3px solid #1890ff;border-radius:100px;opacity:0;transition:all .2s cubic-bezier(.78,.14,.15,.86);content:' ';}}& input:checked+span{border-color:#1890ff;&:after{opacity:1;}}& input:focus+span{box-shadow:0 0 0 0.125em rgba(50, 115, 220, 0.25);}","")},df=["as","className","style"],pf=c.a.forwardRef((function(t,e){var n=t.as,r=void 0===n?"span":n,i=t.className,a=void 0===i?"":i,c=t.style,u=void 0===c?{}:c,h=s()(t,df),d=Object(l.useContext)(Zt),p=pn(d.prefix,"radio",{},a).classNames;return kt(r,o()({style:u},p,{css:hf({theme:d})}),kt("input",o()({type:"radio",ref:e},h)),kt("span",null))}));pf.displayName="Radio";var ff=["theme"];var mf={name:"1gha2rb",styles:"position:fixed;bottom:0;top:0;right:0;max-width:100%;transform:translateX(100%);overflow:hidden;transition:transform 200ms ease-in-out;&[data-enter]{transform:translateX(0%);}&:focus{outline:none;}"},gf=function(t){o()({},t);return mf},yf=function(t){var e=t.theme;s()(t,ff);return Pt("position:fixed;bottom:0;top:0;right:0;left:0;background:",e.darkTheme?"#00000075":"#00000050",";z-index:",e.drawerZIndex||100,";transition:opacity 50ms ease-in-out;opacity:0;&[data-enter]{opacity:1;}","")},vf=function(t){var e=t.theme;return Pt("display:flex;justify-content:space-between;flex:0 0 auto;background:",e.paperBackground500,";border-top:1px solid ",e.paperBorderColor,";padding:8px 12px;","")},_f=function(t){return Pt("border:1px solid transparent;&:hover{border-color:#88888844;}&:active{background:#88888888;}",Ar(t),";","")},bf=Sn({tag:"svg",attr:{version:"1.1",id:"Capa_1",x:"0px",y:"0px",viewBox:"-202.4 314.1 200.8 201.2",style:"enable-background:new -202.4 314.1 200.8 201.2;"},child:[{tag:"path",attr:{d:"M-35.7,469.5c8.6-10.4,14.7-22.9,17.7-36l14.6,3.3c-3.4,15.4-10.6,30-20.8,42.3L-35.7,469.5z M-40.5,334.9\n\tc-12.6-9.7-27.5-16.3-43-19.1l-2.7,14.8c13.2,2.4,25.9,8.1,36.6,16.3L-40.5,334.9z M-198.2,385.6l14.4,4.4\n\tc3.9-12.9,10.9-24.8,20.3-34.5l-10.8-10.4C-185.3,356.4-193.6,370.5-198.2,385.6z M-168.8,490c11.8,10.6,26.2,18.3,41.5,22.3\n\tl3.8-14.5c-13-3.4-25.2-10-35.3-19L-168.8,490z M-189.7,464l13.1-7.3c-6.6-11.7-10.3-25.1-10.8-38.6l-15,0.6\n\tC-201.9,434.5-197.4,450.2-189.7,464z M-140.7,338.5c12.1-6.2,25.2-9.4,39-9.4v-15c-15.9,0-31.7,3.8-45.8,11L-140.7,338.5z\n\t M-1.7,403.5c-1.8-15.7-7.3-31-16.1-44.3l-12.5,8.3c7.5,11.2,12.2,24.3,13.7,37.6L-1.7,403.5z M-94.2,515.3\n\tc15.8-1.2,31.3-6.2,44.8-14.4l-7.8-12.8c-11.5,7-24.7,11.3-38.1,12.3L-94.2,515.3z"},child:[]},{tag:"g",attr:{},child:[{tag:"circle",attr:{cx:"-119.9",cy:"451.9",r:"27"},child:[]},{tag:"circle",attr:{cx:"-84.2",cy:"377.5",r:"27"},child:[]}]}]}),xf=function(t){return bf(t)},wf=Sn({tag:"svg",attr:{viewBox:"90 239.1 539.7 523.9"},child:[{tag:"path",attr:{d:"M325.5,495.4c0-89.7,43.8-167.4,174.2-167.4C499.6,417.9,440.5,495.4,325.5,495.4"},child:[]},{tag:"path",attr:{d:"M534.3,731c24.4,0,43.2-3.5,62.4-10.5c0-71-42.4-121.8-117.2-158.4c-57.2-28.7-127.7-43.6-192.1-43.6\n\tc28.2-84.6,7.6-189.7-19.7-247.4c-30.3,60.4-49.2,164-20.1,248.3c-57.1,4.2-102.4,29.1-121.6,61.9c-1.4,2.5-4.4,7.8-2.6,8.8\n\tc1.4,0.7,3.6-1.5,4.9-2.7c20.6-19.1,47.9-28.4,74.2-28.4c60.7,0,103.4,50.3,133.7,80.5C401.3,704.3,464.8,731.2,534.3,731"},child:[]}]}),Ef=function(t){return wf(t)},Cf=(Sn({tag:"svg",attr:{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 35.7 35.7",style:"enable-background:new 0 0 35.7 35.7;"},child:[{tag:"circle",attr:{cx:"17.6",cy:"17.7",r:"4.2"},child:[]},{tag:"path",attr:{d:"M3.4,3.6v28.3h28.3V3.6H3.4z M27.6,27.8H7.5V7.7h20.1V27.8z"},child:[]}]}),["dialog","nextItem","previousItem","href","children"]);function Sf(t){var e=t.dialog,n=t.nextItem,r=t.previousItem,i=t.href,a=t.children,u=(s()(t,Cf),Object(l.useContext)(Zt));return Object(l.useEffect)((function(){function t(t){if(e.visible)switch(t.which){case yn:return void(r&&r());case vn:return void(n&&n());default:return}}return document&&document.addEventListener("keydown",t,!1),function(){document&&document.removeEventListener("keydown",t,!1)}}),[n,r,e.visible]),kt(c.a.Fragment,null,kt(yo,o()({},e,{css:yf({theme:u})}),kt($o,o()({},e,{"aria-label":"Details",css:gf()}),e.visible&&kt(ea,{style:{height:"100%",display:"flex",flexDirection:"column"}},kt("div",{style:{flex:"1 1 auto",overflow:"auto"}},a),(r||n)&&kt("div",{css:vf({theme:u})},r&&kt(pr,{css:_f({theme:u}),appearance:"text",direction:"right",tip:"previous (left arrow)",onClick:r},kt(Jn,null)),i&&kt(pr,{as:"a",target:"_blank",href:i,css:_f({theme:u}),appearance:"text",direction:"top",tip:"View on GBIF.org"},kt(Ef,null)),n&&kt(pr,{css:_f({theme:u}),appearance:"text",direction:"left",tip:"next (right arrow)",onClick:n},kt(Qn,null)))))))}var Tf=Or,Of=["as","className"];function If(t){var e=t.as,n=void 0===e?"div":e,r=t.className,i=s()(t,Of),a=Object(l.useContext)(Zt),c=pn(a.prefix,"classification",{},r).classNames;return kt(n,o()({className:c,css:Tf({theme:a})},i))}var Af=["as","taxon","rank","showUnknownRanks"];function Mf(t){t.as;var e=t.taxon,n=t.rank,r=t.showUnknownRanks,i=s()(t,Af),a=(Object(l.useContext)(Zt),(n||e.rank).toUpperCase());return kt(If,o()({as:"span"},i),["kingdom","phylum","class","order","family","genus","species"].map((function(t){if(a!==t.toUpperCase()){if(e[t])return kt("span",{key:t},e[t]);if(r)return kt("span",{key:t,className:"gbif-classification-unknown"},"Unknown ",t)}return null})))}function kf(t){return Sn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M121.844 18.22c-10.248 46.5-5.753 86.598 7.562 121 31.722 35.503 74.78 60.367 119.5 84.405-15.144-14.727-29.5-29.294-41.97-44.188h72.94c5.318-6.197 10.267-12.425 14.812-18.687H192.5c-4.946-7.035-9.397-14.18-13.25-21.5-2.036-3.867-3.926-7.78-5.656-11.75h140.594c2.73-6.087 5.032-12.27 6.875-18.688h-154.22c-3.453-12.16-5.326-25.127-5.218-39.437h164.25c-.176-5.948-.708-12.168-1.656-18.72H162.843c1.202-10.093 3.29-20.866 6.437-32.436h-47.436zm216.03 0c10.033 36.836 9.616 65.44 2.47 90.593h-.156c-3.215 13.34-8.158 25.723-14.375 37.53-15.708 29.833-40.195 56.197-67.094 82.532 12.75 6.806 25.567 13.607 38.25 20.625 26.73-26.167 52.8-54.185 71.03-88.813 20.463-38.87 29.83-85.945 17.375-142.468h-47.5zm-129 253.81c-20.338 21.212-39.452 44.344-53.936 71.69-21.326 40.26-31.11 89.958-19.438 149.467h45.625c-5.036-22.15-6.48-42.845-5.03-62 .458-7.468 1.38-14.606 2.75-21.468H179c1.278-6.435 2.896-12.663 4.813-18.69.024-.07.038-.145.062-.217 3.025-9.47 6.796-18.44 11.188-26.875 14.96-28.73 35.86-51.34 56.5-71.813-14.107-6.74-28.446-13.326-42.688-20.094zm47.595 22.47c14.437 14.55 27.88 29.196 39.186 44.563h-61.812c-4.798 5.982-9.337 12.195-13.53 18.687h87.75c1.445 2.45 2.832 4.94 4.155 7.438 4.388 8.287 8.147 16.85 11.155 25.843H203.5c-2.184 5.98-4.007 12.218-5.47 18.69h130.314c2.428 12.173 3.525 25.21 2.937 39.436H194.19c.137 6.05.58 12.28 1.375 18.688h134.062c-1.072 8.062-2.65 16.496-4.75 25.344h46.813c9.533-48.618 4.736-90.682-8.97-126.407-28.443-31.848-66.276-52.97-106.25-72.28z"}}]})(t)}function Pf(t){return Sn({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111.03 8 0 119.03 0 256s111.03 248 248 248 248-111.03 248-248S384.97 8 248 8zm160 215.5v6.93c0 5.87-3.32 11.24-8.57 13.86l-15.39 7.7a15.485 15.485 0 0 1-15.53-.97l-18.21-12.14a15.52 15.52 0 0 0-13.5-1.81l-2.65.88c-9.7 3.23-13.66 14.79-7.99 23.3l13.24 19.86c2.87 4.31 7.71 6.9 12.89 6.9h8.21c8.56 0 15.5 6.94 15.5 15.5v11.34c0 3.35-1.09 6.62-3.1 9.3l-18.74 24.98c-1.42 1.9-2.39 4.1-2.83 6.43l-4.3 22.83c-.62 3.29-2.29 6.29-4.76 8.56a159.608 159.608 0 0 0-25 29.16l-13.03 19.55a27.756 27.756 0 0 1-23.09 12.36c-10.51 0-20.12-5.94-24.82-15.34a78.902 78.902 0 0 1-8.33-35.29V367.5c0-8.56-6.94-15.5-15.5-15.5h-25.88c-14.49 0-28.38-5.76-38.63-16a54.659 54.659 0 0 1-16-38.63v-14.06c0-17.19 8.1-33.38 21.85-43.7l27.58-20.69a54.663 54.663 0 0 1 32.78-10.93h.89c8.48 0 16.85 1.97 24.43 5.77l14.72 7.36c3.68 1.84 7.93 2.14 11.83.84l47.31-15.77c6.33-2.11 10.6-8.03 10.6-14.7 0-8.56-6.94-15.5-15.5-15.5h-10.09c-4.11 0-8.05-1.63-10.96-4.54l-6.92-6.92a15.493 15.493 0 0 0-10.96-4.54H199.5c-8.56 0-15.5-6.94-15.5-15.5v-4.4c0-7.11 4.84-13.31 11.74-15.04l14.45-3.61c3.74-.94 7-3.23 9.14-6.44l8.08-12.11c2.87-4.31 7.71-6.9 12.89-6.9h24.21c8.56 0 15.5-6.94 15.5-15.5v-21.7C359.23 71.63 422.86 131.02 441.93 208H423.5c-8.56 0-15.5 6.94-15.5 15.5z"}}]})(t)}function Df(t){return Sn({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5.52.359A.5.5 0 0 1 6 0h4a.5.5 0 0 1 .474.658L8.694 6H12.5a.5.5 0 0 1 .395.807l-7 9a.5.5 0 0 1-.873-.454L6.823 9.5H3.5a.5.5 0 0 1-.48-.641l2.5-8.5z"}}]})(t)}function Rf(t){return Sn({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M512 624c93.9 0 170-75.2 170-168V232c0-92.8-76.1-168-170-168s-170 75.2-170 168v224c0 92.8 76.1 168 170 168zm330-170c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 140.3-113.7 254-254 254S258 594.3 258 454c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 168.7 126.6 307.9 290 327.6V884H326.7c-13.7 0-24.7 14.3-24.7 32v36c0 4.4 2.8 8 6.2 8h407.6c3.4 0 6.2-3.6 6.2-8v-36c0-17.7-11-32-24.7-32H548V782.1c165.3-18 294-158 294-328.1z"}}]})(t)}var Lf={name:"1o39hrb",styles:"display:flex;align-items:center;flex:0 0 auto;align-items:flex-start;svg{flex:0 0 auto;height:1.2em;}>span,>div{margin:0 0.75em;}"},Nf=function(t){o()({},t);return Lf},jf=function(t){var e=o()({},t);return Pt("display:flex;flex-wrap:wrap;align-items:center;margin:-.25em -1em;div{",Nf(e)," margin:.25em 1em;}","")},Ff=["isSequenced","isTreament","isSpecimen","isClustered","isSamplingEvent","formattedCoordinates","eventDate","stillImageCount","movingImageCount","soundCount","typeStatus","basisOfRecord","countryCode","locality","issueCount","children","iconsOnly"];function zf(t){var e,n=t.isSequenced,r=t.isTreament,i=t.isSpecimen,a=t.isClustered,c=t.isSamplingEvent,u=t.formattedCoordinates,h=t.eventDate,d=t.stillImageCount,p=t.movingImageCount,f=t.soundCount,m=t.typeStatus,g=t.basisOfRecord,y=t.countryCode,v=t.locality,_=t.issueCount,b=t.children,x=t.iconsOnly,w=s()(t,Ff),E=Object(l.useContext)(Zt),C="NOTATYPE"===m?null:m;return C&&(["HOLOTYPE","LECTOTYPE","NEOTYPE"].includes(C)&&(e={background:"#e2614a",color:"white",padding:"0 8px",borderRadius:2}),["PARATYPE","PARALECTOTYPE","SYNTYPE"].includes(C)&&(e={background:"#f1eb0b",padding:"0 8px",borderRadius:2}),["ALLOTYPE"].includes(C)&&(e={background:"#7edaff",color:"white",padding:"0 8px",borderRadius:2})),kt("div",o()({css:jf({theme:E})},w),b&&kt("div",null,b),h&&kt("div",null,kt(In,null),kt("span",null,kt(fd,{value:h,year:"numeric",month:"long",day:"2-digit"}))),u&&kt("div",null,kt(zn,null),!x&&kt("span",null,u)),y&&kt("div",null,kt(Pf,null),!x&&kt("span",null,kt(ud,{id:"enums.countryCode.".concat(y)}),v)),i&&kt("div",null,kt(kn,null),!x&&kt("span",null,kt(ud,{id:"enums.basisOfRecord.".concat(g)}))),d>0&&kt("div",null,kt(d>1?Yn:Kn,null),!x&&kt("span",null,kt(ud,{id:"counts.nImages",values:{total:d}}))),p>0&&kt("div",null,kt(Fn,null),!x&&kt("span",null,kt(ud,{id:"counts.nVideos",values:{total:p}}))),f>0&&kt("div",null,kt(Rf,null),!x&&kt("span",null,kt(ud,{id:"counts.nAudioFiles",values:{total:f}}))),n&&kt("div",null,kt(kf,null),!x&&kt("span",null,kt(ud,{id:"occurrenceDetails.features.isSequenced"}))),r&&kt("div",null,kt(qn,null),!x&&kt("span",null,kt(ud,{id:"occurrenceDetails.features.isTreatment"}))),C&&kt("div",null,kt(sr,null),!x&&kt("span",{style:e},kt(ud,{id:"enums.typeStatus.".concat(C)}))),c&&kt("div",null,kt($n,null),!x&&kt("span",null,kt(ud,{id:"occurrenceDetails.features.isSamplingEvent"}))),a&&kt("div",null,kt(xf,null),!x&&kt("span",null,kt(ud,{id:"occurrenceDetails.features.isClustered"}))),_>0&&kt("div",null,kt(Df,{style:{color:"orange"}}),!x&&kt("span",null,kt(ud,{id:"counts.nQualityFlags",values:{total:_}}))))}function Bf(t,e){if(Array.prototype.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}function Uf(t,e){for(var n=t.length-1;n>=0;n--)!0===e(t[n])&&t.splice(n,1)}function Gf(t){throw new Error("Unhandled case for value: '"+t+"'")}var Vf=function(){function t(t){void 0===t&&(t={}),this.tagName="",this.attrs={},this.innerHTML="",this.whitespaceRegex=/\s+/,this.tagName=t.tagName||"",this.attrs=t.attrs||{},this.innerHTML=t.innerHtml||t.innerHTML||""}return t.prototype.setTagName=function(t){return this.tagName=t,this},t.prototype.getTagName=function(){return this.tagName||""},t.prototype.setAttr=function(t,e){return this.getAttrs()[t]=e,this},t.prototype.getAttr=function(t){return this.getAttrs()[t]},t.prototype.setAttrs=function(t){return Object.assign(this.getAttrs(),t),this},t.prototype.getAttrs=function(){return this.attrs||(this.attrs={})},t.prototype.setClass=function(t){return this.setAttr("class",t)},t.prototype.addClass=function(t){for(var e,n=this.getClass(),r=this.whitespaceRegex,i=n?n.split(r):[],o=t.split(r);e=o.shift();)-1===Bf(i,e)&&i.push(e);return this.getAttrs().class=i.join(" "),this},t.prototype.removeClass=function(t){for(var e,n=this.getClass(),r=this.whitespaceRegex,i=n?n.split(r):[],o=t.split(r);i.length&&(e=o.shift());){var a=Bf(i,e);-1!==a&&i.splice(a,1)}return this.getAttrs().class=i.join(" "),this},t.prototype.getClass=function(){return this.getAttrs().class||""},t.prototype.hasClass=function(t){return-1!==(" "+this.getClass()+" ").indexOf(" "+t+" ")},t.prototype.setInnerHTML=function(t){return this.innerHTML=t,this},t.prototype.setInnerHtml=function(t){return this.setInnerHTML(t)},t.prototype.getInnerHTML=function(){return this.innerHTML||""},t.prototype.getInnerHtml=function(){return this.getInnerHTML()},t.prototype.toAnchorString=function(){var t=this.getTagName(),e=this.buildAttrsStr();return["<",t,e=e?" "+e:"",">",this.getInnerHtml(),"</",t,">"].join("")},t.prototype.buildAttrsStr=function(){if(!this.attrs)return"";var t=this.getAttrs(),e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n+'="'+t[n]+'"');return e.join(" ")},t}();var qf=function(){function t(t){void 0===t&&(t={}),this.newWindow=!1,this.truncate={},this.className="",this.newWindow=t.newWindow||!1,this.truncate=t.truncate||{},this.className=t.className||""}return t.prototype.build=function(t){return new Vf({tagName:"a",attrs:this.createAttrs(t),innerHtml:this.processAnchorText(t.getAnchorText())})},t.prototype.createAttrs=function(t){var e={href:t.getAnchorHref()},n=this.createCssClass(t);return n&&(e.class=n),this.newWindow&&(e.target="_blank",e.rel="noopener noreferrer"),this.truncate&&this.truncate.length&&this.truncate.length<t.getAnchorText().length&&(e.title=t.getAnchorHref()),e},t.prototype.createCssClass=function(t){var e=this.className;if(e){for(var n=[e],r=t.getCssClassSuffixes(),i=0,o=r.length;i<o;i++)n.push(e+"-"+r[i]);return n.join(" ")}return""},t.prototype.processAnchorText=function(t){return t=this.doTruncate(t)},t.prototype.doTruncate=function(t){var e=this.truncate;if(!e||!e.length)return t;var n=e.length,r=e.location;return"smart"===r?function(t,e,n){var r,i;null==n?(n="&hellip;",i=3,r=8):(i=n.length,r=n.length);var o=function(t){var e="";return t.scheme&&t.host&&(e+=t.scheme+"://"),t.host&&(e+=t.host),t.path&&(e+="/"+t.path),t.query&&(e+="?"+t.query),t.fragment&&(e+="#"+t.fragment),e},a=function(t,e){var r=e/2,i=Math.ceil(r),o=-1*Math.floor(r),a="";return o<0&&(a=t.substr(o)),t.substr(0,i)+n+a};if(t.length<=e)return t;var s=e-i,l=function(t){var e={},n=t,r=n.match(/^([a-z]+):\/\//i);return r&&(e.scheme=r[1],n=n.substr(r[0].length)),(r=n.match(/^(.*?)(?=(\?|#|\/|$))/i))&&(e.host=r[1],n=n.substr(r[0].length)),(r=n.match(/^\/(.*?)(?=(\?|#|$))/i))&&(e.path=r[1],n=n.substr(r[0].length)),(r=n.match(/^\?(.*?)(?=(#|$))/i))&&(e.query=r[1],n=n.substr(r[0].length)),(r=n.match(/^#(.*?)$/i))&&(e.fragment=r[1]),e}(t);if(l.query){var c=l.query.match(/^(.*?)(?=(\?|\#))(.*?)$/i);c&&(l.query=l.query.substr(0,c[1].length),t=o(l))}if(t.length<=e)return t;if(l.host&&(l.host=l.host.replace(/^www\./,""),t=o(l)),t.length<=e)return t;var u="";if(l.host&&(u+=l.host),u.length>=s)return l.host.length==e?(l.host.substr(0,e-i)+n).substr(0,s+r):a(u,s).substr(0,s+r);var h="";if(l.path&&(h+="/"+l.path),l.query&&(h+="?"+l.query),h){if((u+h).length>=s)return(u+h).length==e?(u+h).substr(0,e):(u+a(h,s-u.length)).substr(0,s+r);u+=h}if(l.fragment){var d="#"+l.fragment;if((u+d).length>=s)return(u+d).length==e?(u+d).substr(0,e):(u+a(d,s-u.length)).substr(0,s+r);u+=d}if(l.scheme&&l.host){var p=l.scheme+"://";if((u+p).length<s)return(p+u).substr(0,e)}if(u.length<=e)return u;var f="";return s>0&&(f=u.substr(-1*Math.floor(s/2))),(u.substr(0,Math.ceil(s/2))+n+f).substr(0,s+r)}(t,n):"middle"===r?function(t,e,n){if(t.length<=e)return t;var r,i;null==n?(n="&hellip;",r=8,i=3):(r=n.length,i=n.length);var o=e-i,a="";return o>0&&(a=t.substr(-1*Math.floor(o/2))),(t.substr(0,Math.ceil(o/2))+n+a).substr(0,o+r)}(t,n):function(t,e,n){return function(t,e,n){var r;return t.length>e&&(null==n?(n="&hellip;",r=3):r=n.length,t=t.substring(0,e-r)+n),t}(t,e,n)}(t,n)},t}(),Hf=function(){function t(t){this.__jsduckDummyDocProp=null,this.matchedText="",this.offset=0,this.tagBuilder=t.tagBuilder,this.matchedText=t.matchedText,this.offset=t.offset}return t.prototype.getMatchedText=function(){return this.matchedText},t.prototype.setOffset=function(t){this.offset=t},t.prototype.getOffset=function(){return this.offset},t.prototype.getCssClassSuffixes=function(){return[this.getType()]},t.prototype.buildTag=function(){return this.tagBuilder.build(this)},t}(),Wf=function(t,e){return(Wf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Zf(t,e){function n(){this.constructor=t}Wf(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var $f=function(){return($f=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};var Kf,Yf=function(t){function e(e){var n=t.call(this,e)||this;return n.email="",n.email=e.email,n}return Zf(e,t),e.prototype.getType=function(){return"email"},e.prototype.getEmail=function(){return this.email},e.prototype.getAnchorHref=function(){return"mailto:"+this.email},e.prototype.getAnchorText=function(){return this.email},e}(Hf),Xf=function(t){function e(e){var n=t.call(this,e)||this;return n.serviceName="",n.hashtag="",n.serviceName=e.serviceName,n.hashtag=e.hashtag,n}return Zf(e,t),e.prototype.getType=function(){return"hashtag"},e.prototype.getServiceName=function(){return this.serviceName},e.prototype.getHashtag=function(){return this.hashtag},e.prototype.getAnchorHref=function(){var t=this.serviceName,e=this.hashtag;switch(t){case"twitter":return"https://twitter.com/hashtag/"+e;case"facebook":return"https://www.facebook.com/hashtag/"+e;case"instagram":return"https://instagram.com/explore/tags/"+e;default:throw new Error("Unknown service name to point hashtag to: "+t)}},e.prototype.getAnchorText=function(){return"#"+this.hashtag},e}(Hf),Jf=function(t){function e(e){var n=t.call(this,e)||this;return n.serviceName="twitter",n.mention="",n.mention=e.mention,n.serviceName=e.serviceName,n}return Zf(e,t),e.prototype.getType=function(){return"mention"},e.prototype.getMention=function(){return this.mention},e.prototype.getServiceName=function(){return this.serviceName},e.prototype.getAnchorHref=function(){switch(this.serviceName){case"twitter":return"https://twitter.com/"+this.mention;case"instagram":return"https://instagram.com/"+this.mention;case"soundcloud":return"https://soundcloud.com/"+this.mention;default:throw new Error("Unknown service name to point mention to: "+this.serviceName)}},e.prototype.getAnchorText=function(){return"@"+this.mention},e.prototype.getCssClassSuffixes=function(){var e=t.prototype.getCssClassSuffixes.call(this),n=this.getServiceName();return n&&e.push(n),e},e}(Hf),Qf=function(t){function e(e){var n=t.call(this,e)||this;return n.number="",n.plusSign=!1,n.number=e.number,n.plusSign=e.plusSign,n}return Zf(e,t),e.prototype.getType=function(){return"phone"},e.prototype.getPhoneNumber=function(){return this.number},e.prototype.getNumber=function(){return this.getPhoneNumber()},e.prototype.getAnchorHref=function(){return"tel:"+(this.plusSign?"+":"")+this.number},e.prototype.getAnchorText=function(){return this.matchedText},e}(Hf),tm=function(t){function e(e){var n=t.call(this,e)||this;return n.url="",n.urlMatchType="scheme",n.protocolUrlMatch=!1,n.protocolRelativeMatch=!1,n.stripPrefix={scheme:!0,www:!0},n.stripTrailingSlash=!0,n.decodePercentEncoding=!0,n.schemePrefixRegex=/^(https?:\/\/)?/i,n.wwwPrefixRegex=/^(https?:\/\/)?(www\.)?/i,n.protocolRelativeRegex=/^\/\//,n.protocolPrepended=!1,n.urlMatchType=e.urlMatchType,n.url=e.url,n.protocolUrlMatch=e.protocolUrlMatch,n.protocolRelativeMatch=e.protocolRelativeMatch,n.stripPrefix=e.stripPrefix,n.stripTrailingSlash=e.stripTrailingSlash,n.decodePercentEncoding=e.decodePercentEncoding,n}return Zf(e,t),e.prototype.getType=function(){return"url"},e.prototype.getUrlMatchType=function(){return this.urlMatchType},e.prototype.getUrl=function(){var t=this.url;return this.protocolRelativeMatch||this.protocolUrlMatch||this.protocolPrepended||(t=this.url="http://"+t,this.protocolPrepended=!0),t},e.prototype.getAnchorHref=function(){return this.getUrl().replace(/&amp;/g,"&")},e.prototype.getAnchorText=function(){var t=this.getMatchedText();return this.protocolRelativeMatch&&(t=this.stripProtocolRelativePrefix(t)),this.stripPrefix.scheme&&(t=this.stripSchemePrefix(t)),this.stripPrefix.www&&(t=this.stripWwwPrefix(t)),this.stripTrailingSlash&&(t=this.removeTrailingSlash(t)),this.decodePercentEncoding&&(t=this.removePercentEncoding(t)),t},e.prototype.stripSchemePrefix=function(t){return t.replace(this.schemePrefixRegex,"")},e.prototype.stripWwwPrefix=function(t){return t.replace(this.wwwPrefixRegex,"$1")},e.prototype.stripProtocolRelativePrefix=function(t){return t.replace(this.protocolRelativeRegex,"")},e.prototype.removeTrailingSlash=function(t){return"/"===t.charAt(t.length-1)&&(t=t.slice(0,-1)),t},e.prototype.removePercentEncoding=function(t){var e=t.replace(/%22/gi,"&quot;").replace(/%26/gi,"&amp;").replace(/%27/gi,"&#39;").replace(/%3C/gi,"&lt;").replace(/%3E/gi,"&gt;");try{return decodeURIComponent(e)}catch(t){return e}},e}(Hf),em=function(t){this.__jsduckDummyDocProp=null,this.tagBuilder=t.tagBuilder},nm=/[A-Za-z]/,rm=/[\d]/,im=/[\D]/,om=/\s/,am=/['"]/,sm=/[\x00-\x1F\x7F]/,lm=/A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC/.source,cm=lm+/\u2700-\u27bf\udde6-\uddff\ud800-\udbff\udc00-\udfff\ufe0e\ufe0f\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0\ud83c\udffb-\udfff\u200d\u3299\u3297\u303d\u3030\u24c2\ud83c\udd70-\udd71\udd7e-\udd7f\udd8e\udd91-\udd9a\udde6-\uddff\ude01-\ude02\ude1a\ude2f\ude32-\ude3a\ude50-\ude51\u203c\u2049\u25aa-\u25ab\u25b6\u25c0\u25fb-\u25fe\u00a9\u00ae\u2122\u2139\udc04\u2600-\u26FF\u2b05\u2b06\u2b07\u2b1b\u2b1c\u2b50\u2b55\u231a\u231b\u2328\u23cf\u23e9-\u23f3\u23f8-\u23fa\udccf\u2935\u2934\u2190-\u21ff/.source+/\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D4-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D01-\u0D03\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF5\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F/.source,um=/0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19/.source,hm=cm+um,dm=cm+um,pm="(?:["+um+"]{1,3}\\.){3}["+um+"]{1,3}",fm="["+dm+"](?:["+dm+"\\-]{0,61}["+dm+"])?",mm=function(t){return"(?=("+fm+"))\\"+t},gm=function(t){return"(?:"+mm(t)+"(?:\\."+mm(t+1)+"){0,126}|"+pm+")"},ym=(new RegExp("["+dm+".\\-]*["+dm+"\\-]"),new RegExp("["+dm+"]")),vm=/(?:xn--vermgensberatung-pwb|xn--vermgensberater-ctb|xn--clchc0ea0b2g2a9gcd|xn--w4r85el8fhu5dnra|northwesternmutual|travelersinsurance|vermögensberatung|xn--3oq18vl8pn36a|xn--5su34j936bgsg|xn--bck1b9a5dre4c|xn--mgbai9azgqp6j|xn--mgberp4a5d4ar|xn--xkc2dl3a5ee0h|vermögensberater|xn--fzys8d69uvgm|xn--mgba7c0bbn0a|xn--xkc2al3hye2a|americanexpress|kerryproperties|sandvikcoromant|xn--i1b6b1a6a2e|xn--kcrx77d1x4a|xn--lgbbat1ad8j|xn--mgba3a4f16a|xn--mgbaakc7dvf|xn--mgbc0a9azcg|xn--nqv7fs00ema|afamilycompany|americanfamily|bananarepublic|cancerresearch|cookingchannel|kerrylogistics|weatherchannel|xn--54b7fta0cc|xn--6qq986b3xl|xn--80aqecdr1a|xn--b4w605ferd|xn--fiq228c5hs|xn--h2breg3eve|xn--jlq61u9w7b|xn--mgba3a3ejt|xn--mgbaam7a8h|xn--mgbayh7gpa|xn--mgbb9fbpob|xn--mgbbh1a71e|xn--mgbca7dzdo|xn--mgbi4ecexp|xn--mgbx4cd0ab|xn--rvc1e0am3e|international|lifeinsurance|spreadbetting|travelchannel|wolterskluwer|xn--eckvdtc9d|xn--fpcrj9c3d|xn--fzc2c9e2c|xn--h2brj9c8c|xn--tiq49xqyj|xn--yfro4i67o|xn--ygbi2ammx|construction|lplfinancial|scholarships|versicherung|xn--3e0b707e|xn--45br5cyl|xn--80adxhks|xn--80asehdb|xn--8y0a063a|xn--gckr3f0f|xn--mgb9awbf|xn--mgbab2bd|xn--mgbgu82a|xn--mgbpl2fh|xn--mgbt3dhd|xn--mk1bu44c|xn--ngbc5azd|xn--ngbe9e0a|xn--ogbpf8fl|xn--qcka1pmc|accountants|barclaycard|blackfriday|blockbuster|bridgestone|calvinklein|contractors|creditunion|engineering|enterprises|foodnetwork|investments|kerryhotels|lamborghini|motorcycles|olayangroup|photography|playstation|productions|progressive|redumbrella|rightathome|williamhill|xn--11b4c3d|xn--1ck2e1b|xn--1qqw23a|xn--2scrj9c|xn--3bst00m|xn--3ds443g|xn--3hcrj9c|xn--42c2d9a|xn--45brj9c|xn--55qw42g|xn--6frz82g|xn--80ao21a|xn--9krt00a|xn--cck2b3b|xn--czr694b|xn--d1acj3b|xn--efvy88h|xn--estv75g|xn--fct429k|xn--fjq720a|xn--flw351e|xn--g2xx48c|xn--gecrj9c|xn--gk3at1e|xn--h2brj9c|xn--hxt814e|xn--imr513n|xn--j6w193g|xn--jvr189m|xn--kprw13d|xn--kpry57d|xn--kpu716f|xn--mgbbh1a|xn--mgbtx2b|xn--mix891f|xn--nyqy26a|xn--otu796d|xn--pbt977c|xn--pgbs0dh|xn--q9jyb4c|xn--rhqv96g|xn--rovu88b|xn--s9brj9c|xn--ses554g|xn--t60b56a|xn--vuq861b|xn--w4rs40l|xn--xhq521b|xn--zfr164b|சிங்கப்பூர்|accountant|apartments|associates|basketball|bnpparibas|boehringer|capitalone|consulting|creditcard|cuisinella|eurovision|extraspace|foundation|healthcare|immobilien|industries|management|mitsubishi|nationwide|newholland|nextdirect|onyourside|properties|protection|prudential|realestate|republican|restaurant|schaeffler|swiftcover|tatamotors|technology|telefonica|university|vistaprint|vlaanderen|volkswagen|xn--30rr7y|xn--3pxu8k|xn--45q11c|xn--4gbrim|xn--55qx5d|xn--5tzm5g|xn--80aswg|xn--90a3ac|xn--9dbq2a|xn--9et52u|xn--c2br7g|xn--cg4bki|xn--czrs0t|xn--czru2d|xn--fiq64b|xn--fiqs8s|xn--fiqz9s|xn--io0a7i|xn--kput3i|xn--mxtq1m|xn--o3cw4h|xn--pssy2u|xn--unup4y|xn--wgbh1c|xn--wgbl6a|xn--y9a3aq|accenture|alfaromeo|allfinanz|amsterdam|analytics|aquarelle|barcelona|bloomberg|christmas|community|directory|education|equipment|fairwinds|financial|firestone|fresenius|frontdoor|fujixerox|furniture|goldpoint|hisamitsu|homedepot|homegoods|homesense|honeywell|institute|insurance|kuokgroup|ladbrokes|lancaster|landrover|lifestyle|marketing|marshalls|melbourne|microsoft|panasonic|passagens|pramerica|richardli|scjohnson|shangrila|solutions|statebank|statefarm|stockholm|travelers|vacations|xn--90ais|xn--c1avg|xn--d1alf|xn--e1a4c|xn--fhbei|xn--j1aef|xn--j1amh|xn--l1acc|xn--ngbrx|xn--nqv7f|xn--p1acf|xn--tckwe|xn--vhquv|yodobashi|abudhabi|airforce|allstate|attorney|barclays|barefoot|bargains|baseball|boutique|bradesco|broadway|brussels|budapest|builders|business|capetown|catering|catholic|chrysler|cipriani|cityeats|cleaning|clinique|clothing|commbank|computer|delivery|deloitte|democrat|diamonds|discount|discover|download|engineer|ericsson|esurance|etisalat|everbank|exchange|feedback|fidelity|firmdale|football|frontier|goodyear|grainger|graphics|guardian|hdfcbank|helsinki|holdings|hospital|infiniti|ipiranga|istanbul|jpmorgan|lighting|lundbeck|marriott|maserati|mckinsey|memorial|merckmsd|mortgage|movistar|observer|partners|pharmacy|pictures|plumbing|property|redstone|reliance|saarland|samsclub|security|services|shopping|showtime|softbank|software|stcgroup|supplies|symantec|training|uconnect|vanguard|ventures|verisign|woodside|xn--90ae|xn--node|xn--p1ai|xn--qxam|yokohama|السعودية|abogado|academy|agakhan|alibaba|android|athleta|auction|audible|auspost|avianca|banamex|bauhaus|bentley|bestbuy|booking|brother|bugatti|capital|caravan|careers|cartier|channel|charity|chintai|citadel|clubmed|college|cologne|comcast|company|compare|contact|cooking|corsica|country|coupons|courses|cricket|cruises|dentist|digital|domains|exposed|express|farmers|fashion|ferrari|ferrero|finance|fishing|fitness|flights|florist|flowers|forsale|frogans|fujitsu|gallery|genting|godaddy|grocery|guitars|hamburg|hangout|hitachi|holiday|hosting|hoteles|hotmail|hyundai|iselect|ismaili|jewelry|juniper|kitchen|komatsu|lacaixa|lancome|lanxess|lasalle|latrobe|leclerc|liaison|limited|lincoln|markets|metlife|monster|netbank|netflix|network|neustar|okinawa|oldnavy|organic|origins|philips|pioneer|politie|realtor|recipes|rentals|reviews|rexroth|samsung|sandvik|schmidt|schwarz|science|shiksha|shriram|singles|staples|starhub|storage|support|surgery|systems|temasek|theater|theatre|tickets|tiffany|toshiba|trading|walmart|wanggou|watches|weather|website|wedding|whoswho|windows|winners|xfinity|yamaxun|youtube|zuerich|католик|اتصالات|الجزائر|العليان|پاکستان|كاثوليك|موبايلي|இந்தியா|abarth|abbott|abbvie|active|africa|agency|airbus|airtel|alipay|alsace|alstom|anquan|aramco|author|bayern|beauty|berlin|bharti|blanco|bostik|boston|broker|camera|career|caseih|casino|center|chanel|chrome|church|circle|claims|clinic|coffee|comsec|condos|coupon|credit|cruise|dating|datsun|dealer|degree|dental|design|direct|doctor|dunlop|dupont|durban|emerck|energy|estate|events|expert|family|flickr|futbol|gallup|garden|george|giving|global|google|gratis|health|hermes|hiphop|hockey|hotels|hughes|imamat|insure|intuit|jaguar|joburg|juegos|kaufen|kinder|kindle|kosher|lancia|latino|lawyer|lefrak|living|locker|london|luxury|madrid|maison|makeup|market|mattel|mobile|mobily|monash|mormon|moscow|museum|mutual|nagoya|natura|nissan|nissay|norton|nowruz|office|olayan|online|oracle|orange|otsuka|pfizer|photos|physio|piaget|pictet|quebec|racing|realty|reisen|repair|report|review|rocher|rogers|ryukyu|safety|sakura|sanofi|school|schule|search|secure|select|shouji|soccer|social|stream|studio|supply|suzuki|swatch|sydney|taipei|taobao|target|tattoo|tennis|tienda|tjmaxx|tkmaxx|toyota|travel|unicom|viajes|viking|villas|virgin|vision|voting|voyage|vuelos|walter|warman|webcam|xihuan|yachts|yandex|zappos|москва|онлайн|ابوظبي|ارامكو|الاردن|المغرب|امارات|فلسطين|مليسيا|भारतम्|இலங்கை|ファッション|actor|adult|aetna|amfam|amica|apple|archi|audio|autos|azure|baidu|beats|bible|bingo|black|boats|bosch|build|canon|cards|chase|cheap|cisco|citic|click|cloud|coach|codes|crown|cymru|dabur|dance|deals|delta|dodge|drive|dubai|earth|edeka|email|epost|epson|faith|fedex|final|forex|forum|gallo|games|gifts|gives|glade|glass|globo|gmail|green|gripe|group|gucci|guide|homes|honda|horse|house|hyatt|ikano|intel|irish|iveco|jetzt|koeln|kyoto|lamer|lease|legal|lexus|lilly|linde|lipsy|lixil|loans|locus|lotte|lotto|lupin|macys|mango|media|miami|money|mopar|movie|nadex|nexus|nikon|ninja|nokia|nowtv|omega|osaka|paris|parts|party|phone|photo|pizza|place|poker|praxi|press|prime|promo|quest|radio|rehab|reise|ricoh|rocks|rodeo|rugby|salon|sener|seven|sharp|shell|shoes|skype|sling|smart|smile|solar|space|sport|stada|store|study|style|sucks|swiss|tatar|tires|tirol|tmall|today|tokyo|tools|toray|total|tours|trade|trust|tunes|tushu|ubank|vegas|video|vodka|volvo|wales|watch|weber|weibo|works|world|xerox|yahoo|zippo|ایران|بازار|بھارت|سودان|سورية|همراه|भारोत|संगठन|বাংলা|భారత్|ഭാരതം|嘉里大酒店|aarp|able|adac|aero|aigo|akdn|ally|amex|arab|army|arpa|arte|asda|asia|audi|auto|baby|band|bank|bbva|beer|best|bike|bing|blog|blue|bofa|bond|book|buzz|cafe|call|camp|care|cars|casa|case|cash|cbre|cern|chat|citi|city|club|cool|coop|cyou|data|date|dclk|deal|dell|desi|diet|dish|docs|doha|duck|duns|dvag|erni|fage|fail|fans|farm|fast|fiat|fido|film|fire|fish|flir|food|ford|free|fund|game|gbiz|gent|ggee|gift|gmbh|gold|golf|goog|guge|guru|hair|haus|hdfc|help|here|hgtv|host|hsbc|icbc|ieee|imdb|immo|info|itau|java|jeep|jobs|jprs|kddi|kiwi|kpmg|kred|land|lego|lgbt|lidl|life|like|limo|link|live|loan|loft|love|ltda|luxe|maif|meet|meme|menu|mini|mint|mobi|moda|moto|name|navy|news|next|nico|nike|ollo|open|page|pars|pccw|pics|ping|pink|play|plus|pohl|porn|post|prod|prof|qpon|raid|read|reit|rent|rest|rich|rmit|room|rsvp|ruhr|safe|sale|sarl|save|saxo|scor|scot|seat|seek|sexy|shaw|shia|shop|show|silk|sina|site|skin|sncf|sohu|song|sony|spot|star|surf|talk|taxi|team|tech|teva|tiaa|tips|town|toys|tube|vana|visa|viva|vivo|vote|voto|wang|weir|wien|wiki|wine|work|xbox|yoga|zara|zero|zone|дети|сайт|بارت|بيتك|ڀارت|تونس|شبكة|عراق|عمان|موقع|भारत|ভারত|ভাৰত|ਭਾਰਤ|ભારત|ଭାରତ|ಭಾರತ|ලංකා|グーグル|クラウド|ポイント|大众汽车|组织机构|電訊盈科|香格里拉|aaa|abb|abc|aco|ads|aeg|afl|aig|anz|aol|app|art|aws|axa|bar|bbc|bbt|bcg|bcn|bet|bid|bio|biz|bms|bmw|bnl|bom|boo|bot|box|buy|bzh|cab|cal|cam|car|cat|cba|cbn|cbs|ceb|ceo|cfa|cfd|com|crs|csc|dad|day|dds|dev|dhl|diy|dnp|dog|dot|dtv|dvr|eat|eco|edu|esq|eus|fan|fit|fly|foo|fox|frl|ftr|fun|fyi|gal|gap|gdn|gea|gle|gmo|gmx|goo|gop|got|gov|hbo|hiv|hkt|hot|how|ibm|ice|icu|ifm|inc|ing|ink|int|ist|itv|jcb|jcp|jio|jll|jmp|jnj|jot|joy|kfh|kia|kim|kpn|krd|lat|law|lds|llc|lol|lpl|ltd|man|map|mba|med|men|mil|mit|mlb|mls|mma|moe|moi|mom|mov|msd|mtn|mtr|nab|nba|nec|net|new|nfl|ngo|nhk|now|nra|nrw|ntt|nyc|obi|off|one|ong|onl|ooo|org|ott|ovh|pay|pet|phd|pid|pin|pnc|pro|pru|pub|pwc|qvc|red|ren|ril|rio|rip|run|rwe|sap|sas|sbi|sbs|sca|scb|ses|sew|sex|sfr|ski|sky|soy|srl|srt|stc|tab|tax|tci|tdk|tel|thd|tjx|top|trv|tui|tvs|ubs|uno|uol|ups|vet|vig|vin|vip|wed|win|wme|wow|wtc|wtf|xin|xxx|xyz|you|yun|zip|бел|ком|қаз|мкд|мон|орг|рус|срб|укр|հայ|קום|عرب|قطر|كوم|مصر|कॉम|नेट|คอม|ไทย|ストア|セール|みんな|中文网|天主教|我爱你|新加坡|淡马锡|诺基亚|飞利浦|ac|ad|ae|af|ag|ai|al|am|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw|ελ|бг|ею|рф|გე|닷넷|닷컴|삼성|한국|コム|世界|中信|中国|中國|企业|佛山|信息|健康|八卦|公司|公益|台湾|台灣|商城|商店|商标|嘉里|在线|大拿|娱乐|家電|工行|广东|微博|慈善|手机|手表|招聘|政务|政府|新闻|时尚|書籍|机构|游戏|澳門|点看|珠宝|移动|网址|网店|网站|网络|联通|谷歌|购物|通販|集团|食品|餐厅|香港)/,_m=new RegExp("["+dm+"!#$%&'*+/=?^_`{|}~-]"),bm=new RegExp("^"+vm.source+"$"),xm=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.localPartCharRegex=_m,e.strictTldRegex=bm,e}return Zf(e,t),e.prototype.parseMatches=function(t){for(var e=this.tagBuilder,n=this.localPartCharRegex,r=this.strictTldRegex,i=[],o=t.length,a=new wm,s={m:"a",a:"i",i:"l",l:"t",t:"o",o:":"},l=0,c=0,u=a;l<o;){var h=t.charAt(l);switch(c){case 0:d(h);break;case 1:p(t.charAt(l-1),h);break;case 2:f(h);break;case 3:m(h);break;case 4:g(h);break;case 5:y(h);break;case 6:v(h);break;case 7:_(h);break;default:Gf(c)}l++}return w(),i;function d(t){"m"===t?b(1):n.test(t)&&b()}function p(t,e){":"===t?n.test(e)?(c=2,u=new wm($f($f({},u),{hasMailtoPrefix:!0}))):x():s[t]===e||(n.test(e)?c=2:"."===e?c=3:"@"===e?c=4:x())}function f(t){"."===t?c=3:"@"===t?c=4:n.test(t)||x()}function m(t){"."===t||"@"===t?x():n.test(t)?c=2:x()}function g(t){ym.test(t)?c=5:x()}function y(t){"."===t?c=7:"-"===t?c=6:ym.test(t)||w()}function v(t){"-"===t||"."===t?w():ym.test(t)?c=5:w()}function _(t){"."===t||"-"===t?w():ym.test(t)?(c=5,u=new wm($f($f({},u),{hasDomainDot:!0}))):w()}function b(t){void 0===t&&(t=2),c=t,u=new wm({idx:l})}function x(){c=0,u=a}function w(){if(u.hasDomainDot){var n=t.slice(u.idx,l);/[-.]$/.test(n)&&(n=n.slice(0,-1));var o=u.hasMailtoPrefix?n.slice("mailto:".length):n;(function(t){var e=(t.split(".").pop()||"").toLowerCase();return r.test(e)})(o)&&i.push(new Yf({tagBuilder:e,matchedText:n,offset:u.idx,email:o}))}x()}},e}(em),wm=function(t){void 0===t&&(t={}),this.idx=void 0!==t.idx?t.idx:-1,this.hasMailtoPrefix=!!t.hasMailtoPrefix,this.hasDomainDot=!!t.hasDomainDot},Em=function(){function t(){}return t.isValid=function(t,e){return!(e&&!this.isValidUriScheme(e)||this.urlMatchDoesNotHaveProtocolOrDot(t,e)||this.urlMatchDoesNotHaveAtLeastOneWordChar(t,e)&&!this.isValidIpAddress(t)||this.containsMultipleDots(t))},t.isValidIpAddress=function(t){var e=new RegExp(this.hasFullProtocolRegex.source+this.ipRegex.source);return null!==t.match(e)},t.containsMultipleDots=function(t){var e=t;return this.hasFullProtocolRegex.test(t)&&(e=t.split("://")[1]),e.split("/")[0].indexOf("..")>-1},t.isValidUriScheme=function(t){var e=t.match(this.uriSchemeRegex),n=e&&e[0].toLowerCase();return"javascript:"!==n&&"vbscript:"!==n},t.urlMatchDoesNotHaveProtocolOrDot=function(t,e){return!(!t||e&&this.hasFullProtocolRegex.test(e)||-1!==t.indexOf("."))},t.urlMatchDoesNotHaveAtLeastOneWordChar=function(t,e){return!(!t||!e)&&(!this.hasFullProtocolRegex.test(e)&&!this.hasWordCharAfterProtocolRegex.test(t))},t.hasFullProtocolRegex=/^[A-Za-z][-.+A-Za-z0-9]*:\/\//,t.uriSchemeRegex=/^[A-Za-z][-.+A-Za-z0-9]*:/,t.hasWordCharAfterProtocolRegex=new RegExp(":[^\\s]*?["+lm+"]"),t.ipRegex=/[0-9][0-9]?[0-9]?\.[0-9][0-9]?[0-9]?\.[0-9][0-9]?[0-9]?\.[0-9][0-9]?[0-9]?(:[0-9]*)?\/?$/,t}(),Cm=(Kf=new RegExp("[/?#](?:["+dm+"\\-+&@#/%=~_()|'$*\\[\\]{}?!:,.;^✓]*["+dm+"\\-+&@#/%=~_()|'$*\\[\\]{}✓])?"),new RegExp(["(?:","(",/(?:[A-Za-z][-.+A-Za-z0-9]{0,63}:(?![A-Za-z][-.+A-Za-z0-9]{0,63}:\/\/)(?!\d+\/?)(?:\/\/)?)/.source,gm(2),")","|","(","(//)?",/(?:www\.)/.source,gm(6),")","|","(","(//)?",gm(10)+"\\.",vm.source,"(?![-"+hm+"])",")",")","(?::[0-9]+)?","(?:"+Kf.source+")?"].join(""),"gi")),Sm=new RegExp("["+dm+"]"),Tm=function(t){function e(e){var n=t.call(this,e)||this;return n.stripPrefix={scheme:!0,www:!0},n.stripTrailingSlash=!0,n.decodePercentEncoding=!0,n.matcherRegex=Cm,n.wordCharRegExp=Sm,n.stripPrefix=e.stripPrefix,n.stripTrailingSlash=e.stripTrailingSlash,n.decodePercentEncoding=e.decodePercentEncoding,n}return Zf(e,t),e.prototype.parseMatches=function(t){for(var e,n=this.matcherRegex,r=this.stripPrefix,i=this.stripTrailingSlash,o=this.decodePercentEncoding,a=this.tagBuilder,s=[],l=function(){var n=e[0],l=e[1],u=e[4],h=e[5],d=e[9],p=e.index,f=h||d,m=t.charAt(p-1);if(!Em.isValid(n,l))return"continue";if(p>0&&"@"===m)return"continue";if(p>0&&f&&c.wordCharRegExp.test(m))return"continue";if(/\?$/.test(n)&&(n=n.substr(0,n.length-1)),c.matchHasUnbalancedClosingParen(n))n=n.substr(0,n.length-1);else{var g=c.matchHasInvalidCharAfterTld(n,l);g>-1&&(n=n.substr(0,g))}var y=["http://","https://"].find((function(t){return!!l&&-1!==l.indexOf(t)}));if(y){var v=n.indexOf(y);n=n.substr(v),l=l.substr(v),p+=v}var _=l?"scheme":u?"www":"tld",b=!!l;s.push(new tm({tagBuilder:a,matchedText:n,offset:p,urlMatchType:_,url:n,protocolUrlMatch:b,protocolRelativeMatch:!!f,stripPrefix:r,stripTrailingSlash:i,decodePercentEncoding:o}))},c=this;null!==(e=n.exec(t));)l();return s},e.prototype.matchHasUnbalancedClosingParen=function(t){var e,n=t.charAt(t.length-1);if(")"===n)e="(";else if("]"===n)e="[";else{if("}"!==n)return!1;e="{"}for(var r=0,i=0,o=t.length-1;i<o;i++){var a=t.charAt(i);a===e?r++:a===n&&(r=Math.max(r-1,0))}return 0===r},e.prototype.matchHasInvalidCharAfterTld=function(t,e){if(!t)return-1;var n=0;e&&(n=t.indexOf(":"),t=t.slice(n));var r=new RegExp("^((.?//)?[-."+dm+"]*[-"+dm+"]\\.[-"+dm+"]+)").exec(t);return null===r?-1:(n+=r[1].length,t=t.slice(r[1].length),/^[^-.A-Za-z0-9:\/?#]/.test(t)?n:-1)},e}(em),Om=new RegExp("#[_"+dm+"]{1,139}(?![_"+dm+"])","g"),Im=new RegExp("[^"+dm+"]"),Am=function(t){function e(e){var n=t.call(this,e)||this;return n.serviceName="twitter",n.matcherRegex=Om,n.nonWordCharRegex=Im,n.serviceName=e.serviceName,n}return Zf(e,t),e.prototype.parseMatches=function(t){for(var e,n=this.matcherRegex,r=this.nonWordCharRegex,i=this.serviceName,o=this.tagBuilder,a=[];null!==(e=n.exec(t));){var s=e.index,l=t.charAt(s-1);if(0===s||r.test(l)){var c=e[0],u=e[0].slice(1);a.push(new Xf({tagBuilder:o,matchedText:c,offset:s,serviceName:i,hashtag:u}))}}return a},e}(em),Mm=new RegExp(/(?:(?:(?:(\+)?\d{1,3}[-\040.]?)?\(?\d{3}\)?[-\040.]?\d{3}[-\040.]?\d{4})|(?:(\+)(?:9[976]\d|8[987530]\d|6[987]\d|5[90]\d|42\d|3[875]\d|2[98654321]\d|9[8543210]|8[6421]|6[6543210]|5[87654321]|4[987654310]|3[9643210]|2[70]|7|1)[-\040.]?(?:\d[-\040.]?){6,12}\d+))([,;]+[0-9]+#?)*/.source+"|"+/(0([1-9]{1}-?[1-9]\d{3}|[1-9]{2}-?\d{3}|[1-9]{2}\d{1}-?\d{2}|[1-9]{2}\d{2}-?\d{1})-?\d{4}|0[789]0-?\d{4}-?\d{4}|050-?\d{4}-?\d{4})/.source,"g"),km=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.matcherRegex=Mm,e}return Zf(e,t),e.prototype.parseMatches=function(t){for(var e,n=this.matcherRegex,r=this.tagBuilder,i=[];null!==(e=n.exec(t));){var o=e[0],a=o.replace(/[^0-9,;#]/g,""),s=!(!e[1]&&!e[2]),l=0==e.index?"":t.substr(e.index-1,1),c=t.substr(e.index+o.length,1),u=!l.match(/\d/)&&!c.match(/\d/);this.testMatch(e[3])&&this.testMatch(o)&&u&&i.push(new Qf({tagBuilder:r,matchedText:o,offset:e.index,number:a,plusSign:s}))}return i},e.prototype.testMatch=function(t){return im.test(t)},e}(em),Pm=new RegExp("@[_"+dm+"]{1,50}(?![_"+dm+"])","g"),Dm=new RegExp("@[_."+dm+"]{1,30}(?![_"+dm+"])","g"),Rm=new RegExp("@[-_."+dm+"]{1,50}(?![-_"+dm+"])","g"),Lm=new RegExp("[^"+dm+"]"),Nm=function(t){function e(e){var n=t.call(this,e)||this;return n.serviceName="twitter",n.matcherRegexes={twitter:Pm,instagram:Dm,soundcloud:Rm},n.nonWordCharRegex=Lm,n.serviceName=e.serviceName,n}return Zf(e,t),e.prototype.parseMatches=function(t){var e,n=this.serviceName,r=this.matcherRegexes[this.serviceName],i=this.nonWordCharRegex,o=this.tagBuilder,a=[];if(!r)return a;for(;null!==(e=r.exec(t));){var s=e.index,l=t.charAt(s-1);if(0===s||i.test(l)){var c=e[0].replace(/\.+$/g,""),u=c.slice(1);a.push(new Jf({tagBuilder:o,matchedText:c,offset:s,serviceName:n,mention:u}))}}return a},e}(em);function jm(t,e){for(var n,r=e.onOpenTag,i=e.onCloseTag,o=e.onText,a=e.onComment,s=e.onDoctype,l=new Fm,c=0,u=t.length,h=0,d=0,p=l;c<u;){var f=t.charAt(c);switch(h){case 0:m(f);break;case 1:g(f);break;case 2:v(f);break;case 3:y(f);break;case 4:_(f);break;case 5:b(f);break;case 6:x(f);break;case 7:w(f);break;case 8:E(f);break;case 9:C(f);break;case 10:S(f);break;case 11:T(f);break;case 12:O(f);break;case 13:I(f);break;case 14:A(f);break;case 15:M(f);break;case 16:k(f);break;case 17:P(f);break;case 18:D(f);break;case 19:R(f);break;case 20:L(f);break;default:Gf(h)}c++}function m(t){"<"===t&&j()}function g(t){"!"===t?h=13:"/"===t?(h=2,p=new Fm($f($f({},p),{isClosing:!0}))):"<"===t?j():nm.test(t)?(h=3,p=new Fm($f($f({},p),{isOpening:!0}))):(h=0,p=l)}function y(t){om.test(t)?(p=new Fm($f($f({},p),{name:z()})),h=4):"<"===t?j():"/"===t?(p=new Fm($f($f({},p),{name:z()})),h=12):">"===t?(p=new Fm($f($f({},p),{name:z()})),F()):nm.test(t)||rm.test(t)||":"===t||N()}function v(t){">"===t?N():nm.test(t)?h=3:N()}function _(t){om.test(t)||("/"===t?h=12:">"===t?F():"<"===t?j():"="===t||am.test(t)||sm.test(t)?N():h=5)}function b(t){om.test(t)?h=6:"/"===t?h=12:"="===t?h=7:">"===t?F():"<"===t?j():am.test(t)&&N()}function x(t){om.test(t)||("/"===t?h=12:"="===t?h=7:">"===t?F():"<"===t?j():am.test(t)?N():h=5)}function w(t){om.test(t)||('"'===t?h=8:"'"===t?h=9:/[>=`]/.test(t)?N():"<"===t?j():h=10)}function E(t){'"'===t&&(h=11)}function C(t){"'"===t&&(h=11)}function S(t){om.test(t)?h=4:">"===t?F():"<"===t&&j()}function T(t){om.test(t)?h=4:"/"===t?h=12:">"===t?F():"<"===t?j():(h=4,c--)}function O(t){">"===t?(p=new Fm($f($f({},p),{isClosing:!0})),F()):h=4}function I(e){"--"===t.substr(c,2)?(c+=2,p=new Fm($f($f({},p),{type:"comment"})),h=14):"DOCTYPE"===t.substr(c,7).toUpperCase()?(c+=7,p=new Fm($f($f({},p),{type:"doctype"})),h=20):N()}function A(t){"-"===t?h=15:">"===t?N():h=16}function M(t){"-"===t?h=18:">"===t?N():h=16}function k(t){"-"===t&&(h=17)}function P(t){h="-"===t?18:16}function D(t){">"===t?F():"!"===t?h=19:"-"===t||(h=16)}function R(t){"-"===t?h=17:">"===t?F():h=16}function L(t){">"===t?F():"<"===t&&j()}function N(){h=0,p=l}function j(){h=1,p=new Fm({idx:c})}function F(){var e=t.slice(d,p.idx);e&&o(e,d),"comment"===p.type?a(p.idx):"doctype"===p.type?s(p.idx):(p.isOpening&&r(p.name,p.idx),p.isClosing&&i(p.name,p.idx)),N(),d=c+1}function z(){var e=p.idx+(p.isClosing?2:1);return t.slice(e,c).toLowerCase()}d<c&&(n=t.slice(d,c),o(n,d),d=c+1)}var Fm=function(t){void 0===t&&(t={}),this.idx=void 0!==t.idx?t.idx:-1,this.type=t.type||"tag",this.name=t.name||"",this.isOpening=!!t.isOpening,this.isClosing=!!t.isClosing},zm=function(){function t(e){void 0===e&&(e={}),this.version=t.version,this.urls={},this.email=!0,this.phone=!0,this.hashtag=!1,this.mention=!1,this.newWindow=!0,this.stripPrefix={scheme:!0,www:!0},this.stripTrailingSlash=!0,this.decodePercentEncoding=!0,this.truncate={length:0,location:"end"},this.className="",this.replaceFn=null,this.context=void 0,this.sanitizeHtml=!1,this.matchers=null,this.tagBuilder=null,this.urls=this.normalizeUrlsCfg(e.urls),this.email="boolean"==typeof e.email?e.email:this.email,this.phone="boolean"==typeof e.phone?e.phone:this.phone,this.hashtag=e.hashtag||this.hashtag,this.mention=e.mention||this.mention,this.newWindow="boolean"==typeof e.newWindow?e.newWindow:this.newWindow,this.stripPrefix=this.normalizeStripPrefixCfg(e.stripPrefix),this.stripTrailingSlash="boolean"==typeof e.stripTrailingSlash?e.stripTrailingSlash:this.stripTrailingSlash,this.decodePercentEncoding="boolean"==typeof e.decodePercentEncoding?e.decodePercentEncoding:this.decodePercentEncoding,this.sanitizeHtml=e.sanitizeHtml||!1;var n=this.mention;if(!1!==n&&"twitter"!==n&&"instagram"!==n&&"soundcloud"!==n)throw new Error("invalid `mention` cfg - see docs");var r=this.hashtag;if(!1!==r&&"twitter"!==r&&"facebook"!==r&&"instagram"!==r)throw new Error("invalid `hashtag` cfg - see docs");this.truncate=this.normalizeTruncateCfg(e.truncate),this.className=e.className||this.className,this.replaceFn=e.replaceFn||this.replaceFn,this.context=e.context||this}return t.link=function(e,n){return new t(n).link(e)},t.parse=function(e,n){return new t(n).parse(e)},t.prototype.normalizeUrlsCfg=function(t){return null==t&&(t=!0),"boolean"==typeof t?{schemeMatches:t,wwwMatches:t,tldMatches:t}:{schemeMatches:"boolean"!=typeof t.schemeMatches||t.schemeMatches,wwwMatches:"boolean"!=typeof t.wwwMatches||t.wwwMatches,tldMatches:"boolean"!=typeof t.tldMatches||t.tldMatches}},t.prototype.normalizeStripPrefixCfg=function(t){return null==t&&(t=!0),"boolean"==typeof t?{scheme:t,www:t}:{scheme:"boolean"!=typeof t.scheme||t.scheme,www:"boolean"!=typeof t.www||t.www}},t.prototype.normalizeTruncateCfg=function(t){return"number"==typeof t?{length:t,location:"end"}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&void 0===t[n]&&(t[n]=e[n]);return t}(t||{},{length:Number.POSITIVE_INFINITY,location:"end"})},t.prototype.parse=function(t){var e=this,n=["a","style","script"],r=0,i=[];return jm(t,{onOpenTag:function(t){n.indexOf(t)>=0&&r++},onText:function(t,n){if(0===r){var o=function(t,e){if(!e.global)throw new Error("`splitRegex` must have the 'g' flag set");for(var n,r=[],i=0;n=e.exec(t);)r.push(t.substring(i,n.index)),r.push(n[0]),i=n.index+n[0].length;return r.push(t.substring(i)),r}(t,/(&nbsp;|&#160;|&lt;|&#60;|&gt;|&#62;|&quot;|&#34;|&#39;)/gi),a=n;o.forEach((function(t,n){if(n%2==0){var r=e.parseText(t,a);i.push.apply(i,r)}a+=t.length}))}},onCloseTag:function(t){n.indexOf(t)>=0&&(r=Math.max(r-1,0))},onComment:function(t){},onDoctype:function(t){}}),i=this.compactMatches(i),i=this.removeUnwantedMatches(i)},t.prototype.compactMatches=function(t){t.sort((function(t,e){return t.getOffset()-e.getOffset()}));for(var e=0;e<t.length-1;e++){var n=t[e],r=n.getOffset(),i=n.getMatchedText().length,o=r+i;if(e+1<t.length){if(t[e+1].getOffset()===r){var a=t[e+1].getMatchedText().length>i?e:e+1;t.splice(a,1);continue}t[e+1].getOffset()<o&&t.splice(e+1,1)}}return t},t.prototype.removeUnwantedMatches=function(t){return this.hashtag||Uf(t,(function(t){return"hashtag"===t.getType()})),this.email||Uf(t,(function(t){return"email"===t.getType()})),this.phone||Uf(t,(function(t){return"phone"===t.getType()})),this.mention||Uf(t,(function(t){return"mention"===t.getType()})),this.urls.schemeMatches||Uf(t,(function(t){return"url"===t.getType()&&"scheme"===t.getUrlMatchType()})),this.urls.wwwMatches||Uf(t,(function(t){return"url"===t.getType()&&"www"===t.getUrlMatchType()})),this.urls.tldMatches||Uf(t,(function(t){return"url"===t.getType()&&"tld"===t.getUrlMatchType()})),t},t.prototype.parseText=function(t,e){void 0===e&&(e=0),e=e||0;for(var n=this.getMatchers(),r=[],i=0,o=n.length;i<o;i++){for(var a=n[i].parseMatches(t),s=0,l=a.length;s<l;s++)a[s].setOffset(e+a[s].getOffset());r.push.apply(r,a)}return r},t.prototype.link=function(t){if(!t)return"";this.sanitizeHtml&&(t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;"));for(var e=this.parse(t),n=[],r=0,i=0,o=e.length;i<o;i++){var a=e[i];n.push(t.substring(r,a.getOffset())),n.push(this.createMatchReturnVal(a)),r=a.getOffset()+a.getMatchedText().length}return n.push(t.substring(r)),n.join("")},t.prototype.createMatchReturnVal=function(t){var e;return this.replaceFn&&(e=this.replaceFn.call(this.context,t)),"string"==typeof e?e:!1===e?t.getMatchedText():e instanceof Vf?e.toAnchorString():t.buildTag().toAnchorString()},t.prototype.getMatchers=function(){if(this.matchers)return this.matchers;var t=this.getTagBuilder(),e=[new Am({tagBuilder:t,serviceName:this.hashtag}),new xm({tagBuilder:t}),new km({tagBuilder:t}),new Nm({tagBuilder:t,serviceName:this.mention}),new Tm({tagBuilder:t,stripPrefix:this.stripPrefix,stripTrailingSlash:this.stripTrailingSlash,decodePercentEncoding:this.decodePercentEncoding})];return this.matchers=e},t.prototype.getTagBuilder=function(){var t=this.tagBuilder;return t||(t=this.tagBuilder=new qf({newWindow:this.newWindow,truncate:this.truncate,className:this.className})),t},t.version="3.14.3",t.AnchorTagBuilder=qf,t.HtmlTag=Vf,t.matcher={Email:xm,Hashtag:Am,Matcher:em,Mention:Nm,Phone:km,Url:Tm},t.match={Email:Yf,Hashtag:Xf,Match:Hf,Mention:Jf,Phone:Qf,Url:tm},t}(),Bm=n(148),Um=n.n(Bm),Gm=n(243),Vm=n.n(Gm);var qm={name:"16w7lvv",styles:"display:inline-block;font-size:0.85em;&:hover{text-decoration:none;>span:first-of-type,>div:first-of-type{background-color:var(--primary700);}}>*{padding:0 5px;display:inline-block;border:1px solid #dbe3e7;}>span:first-of-type,>div:first-of-type{transition:all .3s ease;background-color:var(--primary500);border-color:var(--primary600);padding:0 4px;border-radius:var(--borderRadiusPx) 0 0 var(--borderRadiusPx);color:#fff;border-right-width:0;}>*:last-child{padding:0 7px;border-radius:0 var(--borderRadiusPx) var(--borderRadiusPx) 0;border-left-width:0;color:var(--color);text-decoration:none;}"},Hm=["as","className"],Wm=["id"],Zm=c.a.forwardRef((function(t,e){var n=t.as,r=void 0===n?"div":n,i=t.className,a=s()(t,Hm),c=pn(Object(l.useContext)(Zt).prefix,"identifierBadge",{},i).classNames;return kt(r,o()({ref:e},c,{css:qm},a))}));function $m(t){var e=t.id,n=void 0===e?"":e,r=s()(t,Wm),i=n.replace(/^(.*doi.org\/)?(doi:)?(10\.)/,"10.");return kt(Zm,o()({as:"a",href:"https://doi.org/".concat(i)},r),kt("span",null,"DOI"),kt("span",null,i))}var Km={name:"1qel8bw",styles:"text-decoration:none;>img{margin-right:4px;vertical-align:middle;}"},Ym=function(t){var e=t.href;return kt("a",{dir:"ltr",href:e,css:Km},kt("img",{src:"https://www.gbif.org/img/orcid_16x16.png"}),e)};var Xm={name:"1f28o8h",styles:"font-size:12px;text-decoration:none;display:inline-block;>span{border:1px solid #dbe3e7;}>span:first-of-type{transition:all 300ms ease;background:var(--primary500);padding:0 4px;border-radius:5px 0 0 5px;color:white;border-right-width:0;border-color:#218084;}>span:last-of-type{color:#333;background:white;text-decoration:none;padding:0 7px;border-radius:0 5px 5px 0;border-left-width:0;}"},Jm=function(t){var e=t.identifier;return kt("a",{dir:"ltr",href:"http://lsid.info/".concat(e),css:Xm},kt("span",null,"URN:LSID:"),kt("span",null,e.replace("urn:lsid:","")))},Qm=function(t){var e=t.value;return!1===e||!0===e?e?"Yes":"No":null};var tg={name:"dbpu1g",styles:"a{text-decoration:none;}"},eg=["text"],ng=new zm({truncate:{length:64,location:"middle"},stripPrefix:!1,email:!1,phone:!1}),rg=function(t){var e=t.text,n=s()(t,eg);if(!1===e||!0===e)return kt(Qm,o()({value:e},n));if(void 0===e)return null;if("string"!=typeof e)return kt("span",n,e);var r=Um.a.sanitize(e),i=function(t){if("string"!=typeof t||/\s/.test(t.trim()))return null;var e,n=null===(e=t.trim().match(Vm()()))||void 0===e?void 0:e[0];return n?"https://doi.org/"+n:null}(r);if(i)return kt($m,o()({id:i},n));var a=function(t){if("string"!=typeof t||/\s/.test(t.trim()))return null;var e=t.trim();return e.startsWith("orcid.org/")?"https://"+e:e.startsWith("https://orcid.org/")||e.startsWith("http://orcid.org/")?e:null}(r);if(a)return kt(Ym,o()({href:a},n));var l=function(t){if("string"!=typeof t||/\s/.test(t.trim()))return null;var e=t.trim();return e.startsWith("urn:lsid:")?e:null}(r);return l?kt(Jm,o()({identifier:l},n)):kt("div",o()({css:tg,dangerouslySetInnerHTML:{__html:ng.link(r)}},n))};var ig={name:"14xqvxi",styles:"background:#eee;border-radius:2px;height:4px;>div{transition:width 300ms;height:4px;border-radius:2px;background:#68daa8;max-width:100%;}"},og=function(t){o()({},t);return ig},ag=["className","percent"];function sg(t){var e=t.className,n=t.percent,r=s()(t,ag),i=Object(l.useContext)(Zt);pn(i.prefix,"progress",{},e).classNames;return kt("div",o()({css:og({theme:i})},r),kt("div",{style:{width:"".concat(n,"%")}}))}var lg=["type"];var cg={name:"1k5rxc7",styles:"margin:-2px;display:inline-block;>*{margin:2px;display:inline-block;}"},ug=function(t){o()({},t);return cg},hg=function(t){var e=t.type,n=s()(t,lg);return Pt("align-items:center;background-color:#f5f5f5;border-radius:4px;color:#4a4a4a;display:inline-flex;font-size:.85em;justify-content:center;line-height:1.5;padding-left:.75em;padding-right:.75em;white-space:nowrap;",_g[e]?_g[e]({props:n}):null,";","")},dg={name:"1ip6jqu",styles:"background-color:#363636;color:#fff"},pg={name:"1fdzt1u",styles:"background-color:#f5f5f5;color:rgba(0,0,0,.7)"},fg={name:"ubz1br",styles:"background-color:#fff;color:rgba(0,0,0,.7)"},mg={name:"o79qdv",styles:"background-color:#48c774;color:#ffffff"},gg={name:"1n1me5v",styles:"background-color:#3298dc;color:#fff"},yg={name:"1mnj8tj",styles:"background-color:#ffbf4b;color:#5f4515"},vg={name:"ye6ucc",styles:"background-color:#ff6c4b;color:#fff"},_g={error:function(t){return vg},warning:function(t){return yg},info:function(t){return gg},success:function(t){return mg},white:function(t){return fg},light:function(t){return pg},dark:function(t){return dg}},bg=["as","className"],xg=["as","type","outline","className"];function wg(t){var e=t.as,n=void 0===e?"div":e,r=t.className,i=s()(t,bg),a=Object(l.useContext)(Zt),c=pn(a.prefix,"tags",{},r).classNames;return kt(n,o()({css:ug({theme:a})},c,i))}function Eg(t){var e=t.as,n=void 0===e?"span":e,r=t.type,i=void 0===r?"light":r,a=t.outline,c=void 0!==a&&a,u=t.className,h=s()(t,xg),d=Object(l.useContext)(Zt),p=pn(d.prefix,"tag",{type:i,outline:c},u).classNames;return kt(n,o()({css:hg({theme:d,type:i,outline:c})},p,h))}var Cg=["gadm","className"];function Sg(t){var e=t.gadm,n=t.className,r=s()(t,Cg),i=Object(l.useContext)(Zt);if(!e)return kt("span",null,"Unknown");var a=pn(i.prefix,"gadmClassification",{},n).classNames;return kt(If,o()({},a,r),[0,1,2,3,4].map((function(t){var n=e["level".concat(t)];return n?kt("span",{key:t},n.name):null})))}kt(If,null,kt("span",null,"higher"),kt("span",null,"middle"),kt("span",null,"lower"));var Tg={name:"16qcs66",styles:"display:flex;justify-content:start;align-items:center;white-space:nowrap"},Og=function(t){o()({},t);return Tg},Ig={name:"nq5m8v",styles:"margin-left:6px;padding-left:8px"},Ag=["as","prefix","suffix","className"];function Mg(t){var e=t.as,n=void 0===e?"div":e,r=t.prefix,i=t.suffix,a=t.className,u=s()(t,Ag),h=Object(l.useContext)(Zt);pn(h.prefix,"eyebrow",{},a).classNames;return kt(n,o()({css:Og({theme:h})},u),kt("div",null,r),i&&kt(c.a.Fragment,null,kt("div",{css:Ig},i)))}var kg=function(t){o()({},t);return Pt("","")},Pg=["className","children","seed"];function Dg(t){var e=t.className,n=(t.children,t.seed),r=s()(t,Pg),i=Object(l.useContext)(Zt);pn(i.prefix,"jazzIcon",{},e).classNames;return kt("div",o()({css:kg({theme:i})},r,{dangerouslySetInnerHTML:{__html:Rg(n)}}))}function Rg(t,e){e=e||100,"number"!=typeof(t=t||Math.random()*Number.MAX_SAFE_INTEGER)&&(t=Lg(t));var n,r=["#01888C","#FC7500","#034F5D","#F73F01","#FC1960","#C7144C","#F3C100","#1598F2","#2465E1","#F19E02"],i=(n=t,function(){var t=n+=1831565813;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/4294967296});function o(t,n,r){var o=e/2,a=i(),s=2*Math.PI*a,l=e/n*i()+r*e/n,c="translate("+Math.cos(s)*l+" "+Math.sin(s)*l+")"+" "+("rotate("+(360*a+180*i()).toFixed(1)+" "+o+" "+o+")"),u=Ng(t,i);return'<rect x="0" y="0" width="'.concat(e,'" height="').concat(e,'" transform="').concat(c,'" fill="').concat(u,'"></rect>')}return'<div style="border-radius: 100%; overflow: hidden;width: '.concat(e,"px;height: ").concat(e,"px;display: inline-block;background: ").concat(Ng(r,i),';">\n\t\t<svg x="0" y="0" viewBox="0 0 ').concat(e," ").concat(e,'">\n\t\t\t').concat(o(r,3,0),"\n\t\t\t").concat(o(r,3,1),"\n\t\t\t").concat(o(r,3,2),"\n\t\t</svg>\n\t</div>")}var Lg=function(t){var e,n=0;if(0===t.length)return n;for(e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return n};var Ng=function(t,e){var n=Math.floor(t.length*e());return t.splice(n,1)[0]},jg=["as"],Fg=["as"];var zg=function(t){var e=t.as,n=void 0===e?"div":e,r=s()(t,jg),i=Object(l.useContext)(Zt);return kt(n,o()({},r,{css:Xg({theme:i})}))};function Bg(t,e){return function(n){var r=n.as,i=void 0===r?t:r,a=s()(n,Fg),c=Object(l.useContext)(Zt);return kt(i,o()({},a,{css:e(c)}))}}var Ug={name:"mpobiz",styles:"div>p:first-child{margin-top:0;}ol{counter-reset:listitem;list-style:none;}ol>li{position:relative;margin:4px 0;padding-left:32px;}ol>li:before{counter-increment:listitem;content:counter(listitem);background:#e3e8ee;color:#697386;font-size:12px;font-weight:500;line-height:10px;text-align:center;padding:5px 0;height:20px;width:20px;border-radius:10px;position:absolute;left:0;}"},Gg={name:"197zp3p",styles:"font-size:10px;line-height:18px;text-transform:uppercase;letter-spacing:1.2px;font-weight:600"},Vg={name:"1ijbcz8",styles:"font-size:12px;line-height:24px;text-transform:uppercase;letter-spacing:1px;font-weight:500;color:#32536a"},qg=function(t){return Vg},Hg={name:"1dryz4b",styles:"font-size:18px;line-height:24px"},Wg=function(t){return Hg},Zg=function(t){return Pt("font-size:20px;line-height:24px;font-family:",t.headerFontFamily,";","")},$g=function(t){return Pt("font-size:28px;line-height:36px;font-family:",t.headerFontFamily,";","")},Kg=function(t){return Pt("font-size:36px;line-height:48px;font-family:",t.headerFontFamily,";","")},Yg=function(t){return Pt("color:",t.linkColor,";","")},Xg=function(t){var e=t.theme,n=void 0===e?{}:e;return Pt("-webkit-font-smoothing:antialiased;line-height:1.3em;h1,h2,h3,h4,h5,h6{font-weight:500;}h1{",Kg(n),";}h2{",$g(n),";}h3{",Zg(n),";}h4{",Wg(),";}h5{",qg(),";}h6{",Gg,";}",Ug,";ul{padding-inline-start:1em;li{margin-bottom:.5em;}}p{margin-bottom:8px;}","")};zg.H1=Bg("h1",Kg),zg.H2=Bg("h2",$g),zg.H3=Bg("h3",Zg),zg.A=Bg("a",Yg),zg.css={a:Yg,h1:Kg,h2:$g,h3:Zg,h4:Wg,h5:qg};var Jg={name:"1g34e2g",styles:"padding:8px 12px;line-height:1em;display:block;color:inherit;width:100%;text-align:left;text-decoration:none;&.isActive{background:#e0e7ee;font-weight:500;}"},Qg=function(t){o()({},t);return Jg},ty=n(244),ey=n.n(ty);function ny(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ry(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ny(Object(n),!0).forEach((function(e){Ft()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ny(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var iy=function(t){t&&t.scrollIntoView()},oy=function(){var t=bl(),e=_l(),n=Object(l.useState)({}),r=Nt()(n,2),i=r[0],o=r[1],a=Object(l.useState)(t.hash?t.hash.substring(1):null),s=Nt()(a,2),c=s[0],u=s[1],h=Object(l.useState)({}),d=Nt()(h,2),p=d[0],f=d[1];!function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,r=Object(l.useRef)();Object(l.useEffect)((function(){r.current=e}),[e]),Object(l.useEffect)((function(){if(n&&n.addEventListener){var e=function(t){return r.current(t)};return n.addEventListener(t,e),function(){n.removeEventListener(t,e)}}}),[t,n])}("scroll",Object(l.useCallback)((function(n){(window.pageYOffset||document.documentElement.scrollTop)>200?Object.keys(i).forEach((function(n){var r=i[n];if(r){var o=r.getBoundingClientRect();o.top>0&&o.top<150&&"#"+n!==t.hash&&(e.replace(ry(ry({},t),{},{hash:n})),u(n))}})):(e.replace(ry(ry({},t),{},{hash:null})),u(null))}),[i]),document);return[c,p,function(n){t.hash&&n[t.hash.substring(1)]&&iy(n[t.hash.substring(1)]),o(n),f(Object.keys(n).reduce((function(r,i){return r[i]=function(r){r.preventDefault(),e.replace(ry(ry({},t),{},{key:i})),u(i),iy(n[i])},r}),{}))}]},ay=["refs"],sy=function(t){var e=t.refs,n=(s()(t,ay),Object(l.useContext)(Zt)),r=Object(l.useState)({}),i=Nt()(r,2),o=i[0],a=i[1],c=oy(),u=Nt()(c,3),h=u[0],d=u[1],p=u[2];return Object(l.useEffect)((function(){p(e),a(e)}),[e]),kt("ul",null,Object.keys(o).map((function(t){return kt("li",{key:t},kt("a",{href:"#".concat(t),onClick:d[t],className:h===t?"isActive":null,css:Qg({theme:n})},ey.a.startCase(t)))})))},ly=n(60),cy=n.n(ly);function uy(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function hy(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?uy(Object(n),!0).forEach((function(e){Ft()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uy(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var dy=cy.a.CancelToken;var py=hy(hy({},cy.a),{},{get:function(t,e){var n;return(e=e||{}).cancelToken=e.cancelToken||new dy((function(t){n=t})),{promise:cy.a.get(t,e),cancel:n}},post:function(t,e,n){var r;return(n=n||{}).cancelToken=n.cancelToken||new dy((function(t){r=t})),{promise:cy.a.post(t,e,n),cancel:r}}}),fy=["doi"];function my(t){var e=t.doi,n=s()(t,fy),r=Object(l.useState)(),i=Nt()(r,2),a=i[0],c=i[1];return Object(l.useEffect)((function(){if("string"==typeof e){var t=py.get("https://api.altmetric.com/v1/doi/".concat(e));return t.promise.then((function(t){c(t.data)})).catch((function(t){t.__CANCEL__||console.error(t)})),function(){t.cancel()}}}),[e]),"string"!=typeof e?null:e&&a?kt("a",o()({href:a.details_url},n),kt("img",{src:a.images.medium,width:50})):null}var gy=["allowNewLines","allowedTags","allowedAttr","textComponent","isHTML","values"];function yy(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function vy(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?yy(Object(n),!0).forEach((function(e){Ft()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yy(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _y(t){var e=t.allowNewLines,n=t.allowedTags,r=t.allowedAttr,i=t.textComponent,a=t.isHTML,l=t.values,c=void 0===l?{}:l,u=s()(t,gy),h=id().formatMessage;if(a||n){var d=i||"div",p=h(vy(vy({},u),{},{values:c})),f={ALLOWED_TAGS:n||["i","br","a"],ALLOWED_ATTR:r||["href"]},m=Um.a.sanitize(p,f);return kt(d,{dangerouslySetInnerHTML:{__html:m}})}return e&&(c.br=kt("br",null)),kt(ud,o()({},u,{values:c}))}var by="https://www.gbif.org",xy={occurrenceSearch:{url:function(t){var e=t.route,n=t.queryString,r=t.basename;return"".concat(r?"/".concat(r):"").concat(e).concat(n?"?".concat(n):"")},route:"/occurrence/search",isHref:!0},collectionKey:{url:function(t){var e=t.key;return"".concat(by,"/grscicoll/collection/").concat(e)},isHref:!0,route:"/collection/:key"},collectionSearch:{url:function(t){t.queryString;var e=t.basename;return"".concat(e?"/".concat(e):"","/collection/search")},isHref:!0,route:"/collection/search"},collectionSpecimens:{url:function(t){var e=t.key;return"/collection/".concat(e,"/specimens")},isHref:!0},institutionKey:{url:function(t){var e=t.key;return"".concat(by,"/grscicoll/institution/").concat(e)},isHref:!0,route:"/institution/:key"},institutionSearch:{url:function(t){t.queryString;var e=t.basename;return"".concat(e?"/".concat(e):"","/institution/search")},isHref:!0,route:"/institution/search"},datasetKey:{url:function(t){var e=t.key,n=t.gbifOrgLocalePrefix;return"".concat(by).concat(n,"/dataset/").concat(e)},isHref:!0,route:"/dataset/:key"},datasetSearch:{url:function(t){t.queryString;var e=t.basename;return"".concat(e?"/".concat(e):"","/dataset/search")},isHref:!0,route:"/dataset/search"},publisherKey:{url:function(t){var e=t.key;return"".concat(by,"/publisher/").concat(e)},isHref:!0,route:"/publisher/:key"},publisherSearch:{url:function(t){t.queryString;var e=t.basename;return"".concat(e?"/".concat(e):"","/publisher/search")},isHref:!0,route:"/publisher/search"},literatureSearch:{url:function(t){t.queryString;var e=t.basename;return"".concat(e?"/".concat(e):"","/literature/search")},isHref:!0,route:"/literature/search"}},wy=c.a.createContext(xy),Ey=c.a.createContext({en:{gbifLocale:""},es:{gbifLocale:"es",vocabularyLocale:"es"},"en-DK":{vocabularyLocale:"es"}}),Cy=["queryString","type","discreet"],Sy=["id","type","discreet"];var Ty=c.a.forwardRef((function(t,e){var n=t.queryString,r=t.type,i=t.discreet,a=s()(t,Cy),c=Object(l.useContext)(wy),u=c.basename,h=c[r],d=h.url,p=h.isHref,f=d({queryString:n,basename:u,route:h.route}),m=i?My:null;return p?kt("a",o()({href:f,css:m,ref:e},a)):kt(Il,o()({to:f,css:m,ref:e},a))})),Oy=c.a.forwardRef((function(t,e){var n,r=t.id,i=t.type,a=t.discreet,c=s()(t,Sy),u=Object(l.useContext)(Ey),h=Object(l.useContext)(wy),d=h.basename,p=null==u||null===(n=u.localeMap)||void 0===n?void 0:n.gbif_org,f=h[i],m=f.url,g=f.isHref,y=m({key:r,route:f.route,basename:d,gbifOrgLocalePrefix:p?"/".concat(p):""}),v=a?My:null;return g?kt("a",o()({href:y,css:v},c)):kt(Il,o()({to:y,css:v},c))}));function Iy(t){return kt(Oy,o()({type:"publisherKey"},t))}function Ay(t){return kt(Oy,o()({type:"datasetKey"},t))}var My={name:"1r0pe6c",styles:"color:inherit;text-decoration:none;:hover{text-decoration:underline;}"};var ky=function(t){var e=t.theme;return Pt("border-left:3px solid ",t.isActive?e.primary500:"transparent",";display:block;color:inherit;text-decoration:none;padding:12px 12px;white-space:nowrap;::-moz-focus-inner{border-style:none;}&:hover,&:focus{outline:none;background:rgba(0,0,0,.05);}&:focus,:focus-within{outline:none;background:",e.darkTheme?"#00000050":"#00000010",";}","")},Py=function(t){var e=t.theme;return Pt("border-bottom:3px solid ",t.isActive?e.primary500:"transparent",";flex:0 1 auto;white-space:nowrap;&:hover,&:focus{outline:none;background:rgba(0,0,0,.05);}a,span{cursor:pointer;padding:10px 10px;display:inline-block;color:inherit;text-decoration:none;::-moz-focus-inner{border-style:none;}}","")},Dy={name:"1qd1z99",styles:"order:0;visibility:visible;opacity:1"},Ry={name:"m4reme",styles:"order:100;visibility:hidden;pointer-events:none"},Ly={name:"1qvcdag",styles:"display:flex;margin:0;padding:0;list-style:none"},Ny={name:"1ck59u8",styles:"order:99;display:flex;align-items:center"},jy=["label","to","icon","exact","className","data-targetid","data-inmenu","isActive"],Fy=["label","to","icon","exact","className","data-targetid","isActive"],zy=c.a.forwardRef((function(t,e){var n=t.label,r=t.to,i=t.icon,a=t.exact,c=t.className,u=t["data-targetid"],h=t["data-inmenu"],d=t.isActive,p=s()(t,jy),f=Object(l.useContext)(Zt),m=xl({path:r,exact:a}),g=r?Il:"span";return kt("li",{ref:e,"data-targetid":u,"data-inmenu":h,css:Py({theme:f,isActive:m||d}),className:c},kt(g,o()({to:r},p),i,n))})),By=c.a.forwardRef((function(t,e){var n=t.label,r=t.to,i=t.icon,a=t.exact,c=t.className,u=t["data-targetid"],h=t.isActive,d=s()(t,Fy),p=Object(l.useContext)(Zt),f=xl({path:r,exact:a});return kt(r?Il:"span",o()({to:r,ref:e,"data-targetid":u,css:ky({theme:p,isActive:f||h}),className:c},d),i,n)})),Uy=["children","visibilityMap"],Gy=["onClick"];function Vy(t){var e=t.children,n=t.visibilityMap,r=s()(t,Uy),i=Object(l.useMemo)((function(){return Object.values(n).some((function(t){return!1===t}))}),[n]),a=kt(ir,{style:{fontSize:"1.5em"}}),u=!1;return c.a.Children.map(e,(function(t){n[t.props["data-targetid"]]||xl({path:t.props.to,exact:!0})&&(a=t.props.label,u=!0)})),i?kt("li",r,kt(Jc,{"aria-label":"Custom menu",trigger:kt(pr,{isIcon:!0,appearance:u?"primary":"text",truncate:!0,style:{maxWidth:120}},a),items:function(t){return c.a.Children.map(e,(function(e){if(!n[e.props["data-targetid"]]){var r=e.props,i=r.onClick,a=void 0===i?function(){}:i,l=s()(r,Gy);return kt(By,o()({},l,{onClick:function(){a(),t.hide()}}))}return null}))}})):null}var qy=["children"];function Hy(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Wy(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Hy(Object(n),!0).forEach((function(e){Ft()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Hy(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Zy(t){kt("li",t)}function $y(t){var e=t.children,n=s()(t,qy),r=Object(l.useRef)(null),i=Object(l.useState)({}),a=Nt()(i,2),u=a[0],h=a[1],d=function(t){var e={};t.forEach((function(t){var n=t.target.dataset.targetid;t.isIntersecting&&!t.target.dataset.inmenu?e[n]=!0:e[n]=!1})),h((function(t){return Wy(Wy({},t),e)}))};return Object(l.useEffect)((function(){var t=new IntersectionObserver(d,{root:r.current,threshold:1,rootMargin:"0px -100px 0px 0px"});return Array.from(r.current.children).forEach((function(e){e.dataset.targetid&&t.observe(e)})),function(){return t.disconnect()}}),[]),kt("ol",o()({css:Ly,ref:r},n),c.a.Children.map(e,(function(t){return kt(zy,o()({},t.props,{css:u[t.props["data-targetid"]]?Dy:Ry}))})),kt(Vy,{visibilityMap:u,css:Ny},e))}var Ky={name:"1mtmxjr",styles:"display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center"},Yy=function(t){o()({},t);return Ky},Xy=["as","className","availableCatalogues","label"];function Jy(t){var e=t.as,n=void 0===e?"div":e,r=t.className,i=t.availableCatalogues,o=void 0===i?["OCCURRENCE","DATASET","PUBLISHER","LITERATURE","COLLECTION","INSTITUTION"]:i,a=t.label,c=(s()(t,Xy),Object(l.useContext)(Zt)),u=Object(l.useContext)(wy),h=bl(),d=pn(c.prefix,"catalogueSelector",{},r).classNames,p={OCCURRENCE:{link:kt(Ty,{type:"occurrenceSearch",discreet:!0},kt(ud,{id:"catalogues.occurrences"})),route:u.occurrenceSearch.route||"/occurrence/search",translationId:"catalogues.occurrences"},PUBLISHER:{link:kt(Ty,{type:"publisherSearch",discreet:!0},kt(ud,{id:"catalogues.publishers"})),route:u.publisherSearch.route||"/publisher/search",translationId:"catalogues.publishers"},DATASET:{link:kt(Ty,{type:"datasetSearch",discreet:!0},kt(ud,{id:"catalogues.datasets"})),route:u.datasetSearch.route||"/dataset/search",translationId:"catalogues.datasets"},LITERATURE:{link:kt(Ty,{type:"literatureSearch",discreet:!0},kt(ud,{id:"catalogues.literature"})),route:u.literatureSearch.route||"/literature/search",translationId:"catalogues.literature"},COLLECTION:{link:kt(Ty,{type:"collectionSearch",discreet:!0},kt(ud,{id:"catalogues.collections"})),route:u.collectionSearch.route||"/collection/search",translationId:"catalogues.collections"},INSTITUTION:{link:kt(Ty,{type:"institutionSearch",discreet:!0},kt(ud,{id:"catalogues.institutions"})),route:u.institutionSearch.route||"/institution/search",translationId:"catalogues.institutions"}},f=Object.keys(p).find((function(t){return p[t].route===h.pathname})),m=p[f];return kt(n,d,kt(Jc,{placement:"bottom-start","aria-label":"Custom menu",trigger:kt(pr,{appearance:"text"},kt(Xn,null),kt("span",{style:{marginLeft:6}},a||(m?kt(ud,{id:m.translationId}):null))),items:function(t){return o.map((function(t){return kt("div",{key:t,css:ru(c),style:{fontSize:"1em",background:h.pathname===p[t].route?"#eee":null}},p[t].link)}))}}))}var Qy=["as","className","left","catalogueLabel","availableCatalogues","right","children"];function tv(t){var e=t.as,n=void 0===e?"div":e,r=t.className,i=t.left,a=t.catalogueLabel,u=t.availableCatalogues,h=t.right,d=t.children,p=s()(t,Qy),f=Object(l.useContext)(Zt),m=u&&u.length>1,g=i||a||m;if(!g&&!d&&!h)return null;pn(f.prefix,"dataHeader",{},r).classNames;return kt(n,o()({css:Yy({theme:f})},p),g&&kt(c.a.Fragment,null,kt("div",{style:{flex:"0 0 auto",position:"relative",margin:"0 12px",display:"flex",alignItems:"center"}},i||kt(Jy,{label:a,availableCatalogues:u})),d&&kt(ev,null)),kt("div",{style:{flex:"1 1 auto",overflow:"hidden"}},d||kt($y,{"aria-hidden":"true",style:{visibility:"hidden",width:0}},kt(Zy,{label:"Table","data-targetid":"table"}))),h&&kt(c.a.Fragment,null,kt(ev,null),kt("div",{style:{flex:"0 0 auto"}},h)))}function ev(){return kt("div",{style:{flex:"0 0 1px",borderRight:"1px solid #aaa",height:"1.5em",margin:"0 6px"}})}var nv={name:"zasaf2",styles:"padding:0;margin:0;list-style:none;li{border-bottom:1px solid #f0f0f0;margin-bottom:0!important;&:last-of-type{border:none;}}"},rv=function(t){o()({},t);return nv},iv={name:"ka1oxj",styles:"padding:8px 0;h4{font-size:inherit;margin:0;}display:flex;align-items:center;>h4,>div{flex:1 1 33%;padding:0 8px;}a{color:inherit;}.gb-contactListImage{width:48px;height:48px;flex:0 0 auto;border-radius:4px;background-size:contain;background-repeat:no-repeat;background-position:center;padding:0;}.gb-discreet{color:#555;}.gb-expandRow{flex:0 0 auto;}"},ov=function(t){o()({},t);return iv},av=["contacts","className"],sv=["contact"],lv=["field","contact","value"],cv=["field","contact","value"],uv=uf.Term,hv=uf.Value;function dv(t){var e=t.contacts,n=void 0===e?[]:e,r=t.className,i=s()(t,av),a=Object(l.useContext)(Zt);pn(a.prefix,"contactList",{},r).classNames;return kt("ul",o()({css:rv({theme:a})},i),n.map((function(t,e){return kt("li",{key:"".concat(t.key||e)},kt(pv,{contact:t}))})))}function pv(t){var e,n=t.contact,r=(s()(t,sv),Object(l.useContext)(Zt)),i=n.firstName||n.lastName?"".concat(n.firstName||""," ").concat(n.lastName||"").trim():void 0,o=n.roles||(n.type?[n.type]:void 0),a=kt(c.a.Fragment,null,o.map((function(t){return kt(c.a.Fragment,{key:t},kt(ud,{id:"enums.role.".concat(t),defaultMessage:t}),kt("br",null))}))),u=(n.userId||[]).find((function(t){return-1!=t.indexOf("orcid.org")})),h=kt("div",{css:ov({theme:r})},kt("div",null,kt("div",null,kt("h4",null,i||n.organization))),kt("div",{className:"gb-discreet"},o&&a),kt("div",{style:{display:"flex",justifyContent:"flex-end"}},kt("div",null,u&&kt("a",{href:u,style:{marginRight:16,width:16,height:16,display:"inline-block"}},kt("img",{style:{pointerEvents:"none"},src:"https://www.gbif.org/img/orcid_16x16.gif"})),(null==n||null===(e=n.email)||void 0===e?void 0:e.length)>0&&kt("a",{href:"mailto:".concat(n.email[0])},kt(Gn,{style:{pointerEvents:"none"}})))));return kt(Kp,{summary:h},kt("div",{style:{marginLeft:8,marginBottom:32}},kt(uf,null,["organization","position","address","city","province","postalCode"].map((function(t){return kt(fv,{field:t,contact:n,key:t})})),n.country&&kt(fv,{field:"country",contact:n,value:kt(ud,{id:"enums.countryCode.".concat(n.country),defaultMessage:n.country})}),o&&kt(fv,{field:"roles",contact:n,value:a}),["homepage","email","phone","userId"].map((function(t){return kt(mv,{isHyperText:!0,field:t,contact:n,key:t})})))))}function fv(t){var e=t.field,n=t.contact,r=void 0===n?{}:n,i=t.value,a=s()(t,lv);return!i&&Array.isArray(r[e])?kt(mv,o()({field:e,contact:r},a)):i||r[e]?kt(c.a.Fragment,null,kt(uv,null,kt(ud,{id:"contact.".concat(e),defaultMessage:e})),i&&kt(hv,null,i),!i&&kt(hv,null,r[e])):null}function mv(t){var e,n=t.field,r=t.contact,i=void 0===r?{}:r;t.value,s()(t,cv);return i[n]&&0!==(null===(e=i[n])||void 0===e?void 0:e.length)?kt(c.a.Fragment,null,kt(uv,null,kt(ud,{id:"contact.".concat(n),defaultMessage:n})),kt(hv,null,i[n].map((function(t,e){return kt(c.a.Fragment,{key:e},kt(rg,{text:t}),kt("br",null))})))):null}var gv=n(149),yv=["value","className"],vv={"//creativecommons.org/publicdomain/zero/1.0/legalcode":"CC0_1_0","//creativecommons.org/licenses/by/4.0/legalcode":"CC_BY_4_0","//creativecommons.org/licenses/by-nc/4.0/legalcode":"CC_BY_NC_4_0"},_v={CC0_1_0:"//creativecommons.org/publicdomain/zero/1.0/legalcode",CC_BY_4_0:"//creativecommons.org/licenses/by/4.0/legalcode",CC_BY_NC_4_0:"//creativecommons.org/licenses/by-nc/4.0/legalcode"};function bv(t){var e=t.value,n=(t.className,s()(t,yv)),r=(Object(l.useContext)(Zt),e.replace(/http(s)?:/,"")),i=vv[r]||e;-1===gv.indexOf(i)&&(i="UNSUPPORTED");var a=_v[i],c=a?{as:"a",href:a}:{};return kt(Zm,o()({},c,n),kt("span",null,"License"),kt("span",null,kt(ud,{id:"enums.license.".concat(i)})))}var xv=n(91),wv=n.n(xv),Ev=n(245),Cv=n.n(Ev),Sv=n(51),Tv=n.n(Sv);function Ov(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=yu()(t);if(e){var i=yu()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return mu()(this,n)}}var Iv=function(t){pu()(n,t);var e=Ov(n);function n(t){var r,i=t.message,o=t.graphQLErrors,a=t.networkError,s=t.isCanceled;su()(this,n),(r=e.call(this,i)).graphQLErrors=o||[],r.networkError=a||null,r.isCanceled=s||!1;return r.message=i||function(t){var e="";return Tv()(t.graphQLErrors)&&t.graphQLErrors.forEach((function(t){var n=t?t.message:"Error message not found.";e+="GraphQL error: ".concat(n,"\n")})),t.networkError&&(e+="Network error: "+t.networkError.message+"\n"),e=e.replace(/\n$/,"")}(hu()(r)),r}return cu()(n)}(Cv()(Error)),Av=cy.a.CancelToken;function Mv(t){var e=t.data,n=t.errors;return{data:e,error:n?new Iv({graphQLErrors:n}):void 0}}function kv(t){var e,n,r;return{data:void 0,error:new Iv({networkError:{message:(null==t||null===(e=t.response)||void 0===e?void 0:e.statusText)||"Network error",statusCode:null==t||null===(n=t.response)||void 0===n?void 0:n.status,data:null==t||null===(r=t.response)||void 0===r?void 0:r.data}})}}function Pv(t){return{data:null,error:new Iv({message:"Canceled",isCanceled:{message:t}})}}var Dv=function(t,e){var n,r=e.variables,i=e.client,o=null==i?void 0:i.endpoint,a=null==i?void 0:i.headers,s={queryId:wv()(t),strict:!0};return r&&encodeURIComponent(JSON.stringify(r)).length>1e3?s.variablesId=wv()(r):s.variables=r,{promise:new Promise((function(e,i){cy.a.get(o,{params:s,headers:a,cancelToken:new Av((function(t){n=t}))}).then((function(t){return e(Mv(t.data))})).catch((function(i){var s,l,c,u,h=null==i||null===(s=i.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.unknownQueryId,d=null==i||null===(c=i.response)||void 0===c||null===(u=c.data)||void 0===u?void 0:u.unknownVariablesId;cy.a.isCancel(i)?e(Pv(i.message)):h||d?cy.a.post(o,{query:t,variables:r},{headers:a,cancelToken:new Av((function(t){n=t}))}).then((function(t){return e(Mv(t.data))})).catch((function(t){cy.a.isCancel(t)?e(Pv(t.message)):e(kv(t))})):e(kv(i))}))})),cancel:function(t){return n(t||"CANCELED")}}},Rv=function(){function t(e){su()(this,t),this.gql=e.gql,this.v1=e.v1,this.request}return cu()(t,[{key:"query",value:function(t){var e=t.query,n=t.variables;return this.gql?Dv(e,{variables:n,client:this.gql}):console.error("No configuration has been provided to the GraphQLClient")}},{key:"get",value:function(t,e){return py.get(t,e)}},{key:"v1Get",value:function(t,e){return this.get(this.v1.endpoint+t,e)}}]),t}(),Lv=n(24),Nv=new Rv({gql:{endpoint:Lv.GRAPH_API},v1:{endpoint:Lv.API_V1},translations:{endpoint:Lv.TRANSLATIONS}}),jv=c.a.createContext(Nv),Fv=function(){var t=Object(l.useRef)(!1);return Object(l.useEffect)((function(){return function(){t.current=!0}}),[]),t};var zv=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(l.useState)(),r=Nt()(n,2),i=r[0],o=r[1],a=Object(l.useState)(!1),s=Nt()(a,2),c=s[0],u=s[1],h=Object(l.useState)(!1),d=Nt()(h,2),p=d[0],f=d[1],m=Object(l.useState)((function(){return function(){}})),g=Nt()(m,2),y=g[0],v=g[1],_=Fv(),b=Object(l.useContext)(jv),x=(null==e?void 0:e.client)||b;function w(t){t.keepDataWhileLoading||o(),u(!0),f(!1),y("RENEW_REQUEST")}function E(e){w(e);var n=null==e?void 0:e.variables,r=x.query({query:t,variables:n}),i=r.promise,a=r.cancel;v((function(){return a})),i.then((function(t){var e;if(!_.current){var n=t.data,r=t.error;"RENEW_REQUEST"!==(null==r||null===(e=r.isCanceled)||void 0===e?void 0:e.message)&&(f(r),o(n),u(!1))}})).catch((function(t){_.current||(f({error:!0,type:"unknown"}),o(),u(!1))}))}return Object(l.useEffect)((function(){return function(){y()}}),[y]),Object(l.useEffect)((function(){null!=e&&e.lazyLoad||E(e)}),[t,e.lazyLoad,e.ignoreVariableUpdates?void 0:e.variables]),{data:i,loading:c,error:p,load:E,cancel:y||function(){}}},Bv=n(87),Uv=n.n(Bv);var Gv=["query","onMapClick","predicateHash"];function Vv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=yu()(t);if(e){var i=yu()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return mu()(this,n)}}var qv=function(t){pu()(n,t);var e=Vv(n);function n(t){var r;return su()(this,n),(r=e.call(this,t)).addLayer=r.addLayer.bind(hu()(r)),r.updateLayer=r.updateLayer.bind(hu()(r)),r.fitBbox=r.fitBbox.bind(hu()(r)),r.myRef=c.a.createRef(),r.state={},r}return cu()(n,[{key:"componentDidMount",value:function(){var t,e,n,r=this.props.theme.darkTheme?"dark-v9":"light-v9";Uv.a.accessToken=Lv.MAPBOX_KEY,this.map=new Uv.a.Map({container:this.myRef.current,style:"mapbox://styles/mapbox/".concat(r),zoom:sessionStorage.getItem("mapZoom")||(null===(t=this.props.defaultMapSettings)||void 0===t?void 0:t.zoom)||0,center:[sessionStorage.getItem("mapLng")||(null===(e=this.props.defaultMapSettings)||void 0===e?void 0:e.lng)||0,sessionStorage.getItem("mapLat")||(null===(n=this.props.defaultMapSettings)||void 0===n?void 0:n.lat)||0]}),this.map.addControl(new Uv.a.NavigationControl({showCompass:!1}),"top-left"),this.map.on("load",this.addLayer)}},{key:"componentWillUnmount",value:function(){this.map.remove()}},{key:"componentDidUpdate",value:function(t){var e=this;if(t.query!==this.props.query&&this.mapLoaded&&this.updateLayer(),t.bbox!==this.props.bbox&&void 0!==this.props.bbox&&this.fitBbox(this.props.bbox),t.theme!==this.props.theme&&this.mapLoaded){var n=this.props.theme.darkTheme?"dark-v9":"light-v9";this.map.setStyle("mapbox://styles/mapbox/".concat(n)),this.map.on("style.load",(function(){e.updateLayer()}))}}},{key:"updateLayer",value:function(){this.map.getSource("occurrences")?(this.map.removeLayer("occurrences"),this.map.removeSource("occurrences"),this.addLayer()):this.addLayer()}},{key:"fitBbox",value:function(t){var e=t.south,n=t.west,r=t.north,i=t.east;if("number"!=typeof e)return null;this.map.fitBounds([[n,e],[i,r]],{duration:0,padding:100,maxZoom:8})}},{key:"addLayer",value:function(){var t=this,e="".concat(Lv.API_V2,"/map/occurrence/adhoc/{z}/{x}/{y}.mvt?style=scaled.circles&mode=GEO_CENTROID&srs=EPSG%3A3857&squareSize=256&predicateHash=").concat(this.props.predicateHash);this.map.addLayer(function(t){var e=t.tileString,n=t.theme;return{id:"occurrences",type:"circle",source:{type:"vector",tiles:[e]},"source-layer":"occurrence",paint:{"circle-radius":{property:"total",type:"interval",stops:[[0,2],[10,3],[100,5],[1e3,8],[1e4,12]]},"circle-color":{property:"total",type:"interval",stops:[0,10,100,1e3,1e4].map((function(t,e){return[t,n.mapDensityColors[e]]}))},"circle-opacity":{property:"total",type:"interval",stops:[[0,1],[10,.8],[100,.7],[1e3,.6],[1e4,.6]]},"circle-stroke-color":n.mapDensityColors[1],"circle-stroke-width":{property:"total",type:"interval",stops:[[0,1],[10,0]]}}}}({tileString:e,theme:this.props.theme}),"poi-scalerank2");var n=this.map;this.mapLoaded||(n.on("zoomend",(function(){var t=n.getCenter();sessionStorage.setItem("mapZoom",n.getZoom()),sessionStorage.setItem("mapLng",t.lng),sessionStorage.setItem("mapLat",t.lat)})),n.on("moveend",(function(){var t=n.getCenter();sessionStorage.setItem("mapZoom",n.getZoom()),sessionStorage.setItem("mapLng",t.lng),sessionStorage.setItem("mapLat",t.lat)})),n.on("click",(function(e){!e._defaultPrevented&&t.props.onMapClick&&t.props.onMapClick()})),n.on("error",(function(e){var n;400===(null==e||null===(n=e.error)||void 0===n?void 0:n.status)&&t.props.registerPredicate&&t.props.registerPredicate()}))),this.mapLoaded=!0}},{key:"render",value:function(){var t=this.props,e=(t.query,t.onMapClick,t.predicateHash,s()(t,Gv));return kt("div",o()({ref:this.myRef},e))}}]),n}(l.Component),Hv=n(150),Wv=n.n(Hv);var Zv=function(t){var e=t.theme;return Pt("border:1px solid ",e.paperBorderColor,";border-radius:",e.borderRadius,"px;canvas:focus{outline:none;}","")},$v=["query","loading","total","predicateHash","registerPredicate","defaultMapSettings","bbox","style","className"];var Kv=function(t){var e=t.query,n=(t.loading,t.total,t.predicateHash),r=t.registerPredicate,i=t.defaultMapSettings,o=t.bbox,a=t.style,c=t.className,u=(s()(t,$v),Object(l.useContext)(Zt));return kt(qv,{style:a,className:c,defaultMapSettings:i,predicateHash:n,css:Zv({theme:u}),theme:u,query:e,onMapClick:function(t){return showList(!1)},registerPredicate:r,bbox:o})},Yv=["mapSettings","rootPredicate"];function Xv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var Jv="\nquery map($predicate: Predicate){\n  occurrenceSearch(predicate: $predicate) {\n    _meta\n    stats {\n      decimalLatitude {\n        min\n        max\n      }\n    }\n    histogram {\n      decimalLongitude(interval: ".concat(.25,") {\n        bounds\n      }\n    }\n    documents {\n      total\n    }\n    _v1PredicateHash\n  }\n}\n");var Qv=function(t){var e,n,r,i,a,c=t.mapSettings,u=t.rootPredicate,h=(s()(t,Yv),zv(Jv,{lazyLoad:!0})),d=h.data,p=h.error,f=h.loading,m=h.load,g=Object(l.useState)(),y=Nt()(g,2),v=y[0],_=y[1],b=Object(l.useState)(wv()(u)),x=Nt()(b,2),w=x[0];x[1],Object(l.useEffect)((function(){C({rootPredicate:u})}),[w]),Object(l.useEffect)((function(){if(null!=d&&d.occurrenceSearch){var t=null==d?void 0:d.occurrenceSearch,e=t.stats,n=t.histogram,r=e.decimalLatitude,i=n.decimalLongitude.bounds;if(i){var o=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Xv(Object(n),!0).forEach((function(e){Ft()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({south:r.min,north:r.max},i);_(o)}else _()}}),[d]);var E,C=Object(l.useCallback)((function(t){var e={type:"and",predicates:[t.rootPredicate,{type:"equals",key:"hasCoordinate",value:!0}].filter((function(t){return t}))};m({keepDataWhileLoading:!0,variables:{predicate:e}})}),[]),S=Object(l.useCallback)((function(){E||(E=!0,window.setTimeout((function(){return E=!1}),1e4),console.log("load anew"),C({rootPredicate:u}))}),[w]),T={loading:f,error:p,total:null==d||null===(e=d.occurrenceSearch)||void 0===e||null===(n=e.documents)||void 0===n?void 0:n.total,query:(null==d||null===(r=d.occurrenceSearch)||void 0===r||null===(i=r._meta)||void 0===i?void 0:i.query)||{},predicateHash:null==d||null===(a=d.occurrenceSearch)||void 0===a?void 0:a._v1PredicateHash,rootPredicate:u,registerPredicate:S,defaultMapSettings:c,bbox:v};return"undefined"!=typeof window?kt(Kv,o()({},T,{style:{height:500}})):kt("h1",null,"Map placeholder")},t_=["rootPredicate","className"];function e_(t){var e=t.rootPredicate,n=t.className,r=(s()(t,t_),pn(Object(l.useContext)(Zt).prefix,"occurrenceMap",{},n).classNames);return kt(Qv,{classNames:r,rootPredicate:e})}function n_(t,e){if(null==t)return t;if(0===t.length&&(!e||e&&""!==t))return null;var n=t instanceof Array?t[0]:t;return null==n||e||""!==n?n:null}function r_(t){var e=n_(t);return null==e?e:""===e?null:+e}function i_(t){return null==t?t:String(t)}function o_(t){var e=n_(t,!0);return null==e?e:String(e)}function a_(t){var e=function(t){return null==t||t instanceof Array?t:""===t?[]:[t]}(t);return e}var s_={encode:i_,decode:o_},l_={encode:function(t){return null==t?t:String(t)},decode:r_},c_={encode:function(t){return t},decode:a_},u_=n(33),h_=n.n(u_),d_=function(){return(d_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};'{}[],":'.split("").map((function(t){return[t,encodeURIComponent(t)]}));function p_(t,e,n){var r=Object(u_.stringify)(t,n);n&&n.transformSearchString&&(r=n.transformSearchString(r));var i=r.length?"?"+r:"",o=Object(u_.parseUrl)(e.href||"").url+i;return d_(d_({},e),{key:""+Date.now(),href:o,search:i,query:t})}function f_(t,e){for(var n={},r=0,i=Object.keys(e);r<i.length;r++){var o=i[r],a=e[o];t[o]?n[o]=t[o].encode(e[o]):n[o]=null==a?a:String(a)}return n}var m_=Object.prototype.hasOwnProperty;function g_(t,e){return t===e?0!==t||0!==e||1/t==1/e:t!=t&&e!=e}function y_(t,e,n){var r,i;if(g_(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var o=Object.keys(t),a=Object.keys(e);if(o.length!==a.length)return!1;for(var s=0;s<o.length;s++){var l=null!==(i=null===(r=null==n?void 0:n[o[s]])||void 0===r?void 0:r.equals)&&void 0!==i?i:g_;if(!m_.call(e,o[s])||!l(t[o[s]],e[o[s]]))return!1}return!0}function v_(t,e,n){void 0===n&&(n=y_);var r=(null==t.current||null==e)&&t.current===e||!n(t.current,e);l.useEffect((function(){r&&(t.current=e)}),[t,e,r])}function __(t){return"object"==typeof t?"undefined"!=typeof window?t.search:Object(u_.extract)(""+t.pathname+(t.search?t.search:"")):""}function b_(t,e,n,r){switch(void 0===n&&(n="pushIn"),n){case"replace":case"push":return p_(t,e,r);case"replaceIn":case"pushIn":default:return function(t,e,n){var r=Object(u_.parse)(e.search,{parseNumbers:!1});return p_(d_(d_({},r),t),e,n)}(t,e,r)}}var x_=l.createContext({location:{},getLocation:function(){return{}},setLocation:function(){}});function w_(){return l.useContext(x_)}function E_(t){var e=t.history,n=t.location,r=t.children,i=t.stringifyOptions,o=l.useRef(n);l.useEffect((function(){o.current=n}),[n]);var a=l.useCallback((function(){return o.current}),[o]),s=l.useCallback((function(t,n){o.current=b_(t,null==e||null==e.location?o.current:e.location,n,i),e&&function(t,e,n){switch(void 0===n&&(n="pushIn"),n){case"pushIn":case"push":t.push(e);break;case"replaceIn":case"replace":default:t.replace(e)}}(e,o.current,n)}),[e,i]);return l.createElement(x_.Provider,{value:{location:n,getLocation:a,setLocation:s}},r)}var C_,S_,T_,O_=(S_=C_,T_=Object(u_.parse)(S_||""),function(t){return S_!==t&&(S_=t,T_=Object(u_.parse)(S_)),T_});function I_(t,e,n,r,i,o){var a,s=!y_(r.current,n),l=null!==(a=n.equals)&&void 0!==a?a:y_,c=O_(__(t)),u=!y_(i.current,c[e]),h=u?c[e]:i.current;if(!u&&!s&&void 0!==o.current)return o.current;var d=n.decode(h);return(null==o.current||null==d)&&o.current===d||!l(o.current,d)?d:o.current}var A_=function(t,e){void 0===e&&(e=s_);var n=w_(),r=n.location,i=n.getLocation,o=n.setLocation,a=O_(__(r)),s=l.useRef(),c=l.useRef(e),u=l.useRef(),h=I_(r,t,e,c,s,u);v_(s,a[t]),v_(c,e),v_(u,h,e.equals);var d={paramConfig:e,name:t,setLocation:o,getLocation:i},p=l.useRef(d);return p.current=d,[h,l.useCallback((function(t,e){var n,r,i=p.current;if("function"==typeof t){var o=I_(i.getLocation(),i.name,i.paramConfig,c,s,u);u.current=o,r=i.paramConfig.encode(t(o))}else r=i.paramConfig.encode(t);i.setLocation(((n={})[i.name]=r,n),e)}),[])]};function M_(t,e,n,r,i,o){var a=!y_(n.current,e),s=O_(__(t));if(!(r.current!==s)&&!a&&void 0!==i.current)return{encodedValues:i.current,decodedValues:o.current};for(var l=i.current||{},c=o.current||{},u={},h={},d=0,p=Object.keys(e);d<p.length;d++){var f=p[d],m=e[f],g=void 0,y=void 0;!y_(l[f],s[f])||void 0===l[f]&&void 0===c[f]?(g=s[f],y=m.decode(g)):(g=l[f],y=c[f]),u[f]=g,h[f]=y}return{encodedValues:u,decodedValues:!y_(o.current,h,e)?h:o.current}}var k_=function(t){var e=w_(),n=e.location,r=e.getLocation,i=e.setLocation,o=O_(__(n)),a=l.useRef(t),s=l.useRef(o),c=l.useRef(void 0),u=l.useRef({}),h=M_(n,t=y_(t,a.current)?a.current:t,a,s,c,u),d=h.encodedValues,p=h.decodedValues;v_(s,o),v_(a,t),v_(c,d),v_(u,p,(function(e,n){return y_(e,n,t)}));var f={paramConfigMap:t,setLocation:i,getLocation:r},m=l.useRef(f);return m.current=f,[p,l.useCallback((function(t,e){var n,r=m.current;if("function"==typeof t){var i=M_(r.getLocation(),r.paramConfigMap,a,s,c,u).decodedValues;u.current=i,n=f_(r.paramConfigMap,t(i))}else n=f_(r.paramConfigMap,t);r.setLocation(n,e)}),[])]};var P_,D_,R_,L_,N_=function(){return(N_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function j_(t){if(t===R_&&null!=L_)return L_;var e={replace:function(e){t.navigate(e.protocol+"//"+e.host+e.pathname+e.search,{replace:!0})},push:function(e){t.navigate(e.protocol+"//"+e.host+e.pathname+e.search,{replace:!1})},get location(){return t.location}};return R_=t,L_=e,e}function F_(t){var e=void 0===t?{}:t,n=e.history,r=e.location;if("undefined"!=typeof window&&(n||(n=function(t){if(t===P_&&null!=D_)return D_;var e={replace:function(e){t.replaceState(e.state,"",e.protocol+"//"+e.host+e.pathname+e.search)},push:function(e){t.pushState(e.state,"",e.protocol+"//"+e.host+e.pathname+e.search)},get location(){return window.location}};return P_=t,D_=e,e}(window.history)),r||(r=window.location)),!r)throw new Error("\n        Could not read the location. Is the router wired up correctly?\n      ");return{history:n,location:r}}function z_(t){var e=t.children,n=t.ReactRouterRoute,r=t.reachHistory,i=t.history,o=t.location,a=t.stringifyOptions,s=l.useRef(a),c=!y_(s.current,a)?a:s.current;return l.useEffect((function(){s.current=c}),[c]),n?l.createElement(n,null,(function(t){return l.createElement(E_,N_({stringifyOptions:c},F_(t)),e)})):r?l.createElement(E_,N_({stringifyOptions:c},F_({history:j_(r),location:o})),e):l.createElement(E_,N_({stringifyOptions:c},F_({history:i,location:o})),e)}function B_(t,e){return Object.keys(t).reduce((function(n,r){return n[r]=Object(Ea.a)({timeZone:e},t[r]),n}),{})}function U_(t,e){return Object.keys(Object(Ea.a)(Object(Ea.a)({},t),e)).reduce((function(n,r){return n[r]=Object(Ea.a)(Object(Ea.a)({},t[r]||{}),e[r]||{}),n}),{})}function G_(t,e){if(!e)return t;var n=Fh.formats;return Object(Ea.a)(Object(Ea.a)(Object(Ea.a)({},n),t),{date:U_(B_(n.date,e),B_(t.date||{},e)),time:U_(B_(n.time,e),B_(t.time||{},e))})}function V_(t,e,n,r,i){var o=t.locale,a=t.formats,s=t.messages,l=t.defaultLocale,c=t.defaultFormats,u=t.fallbackOnEmptyString,h=t.onError,d=t.timeZone,p=t.defaultRichTextElements;void 0===n&&(n={id:""});var f=n.id,m=n.defaultMessage;xu(!!f,"[@formatjs/intl] An `id` must be provided to format a message. You can either:\n1. Configure your build toolchain with [babel-plugin-formatjs](https://formatjs.io/docs/tooling/babel-plugin)\nor [@formatjs/ts-transformer](https://formatjs.io/docs/tooling/ts-transformer) OR\n2. Configure your `eslint` config to include [eslint-plugin-formatjs](https://formatjs.io/docs/tooling/linter#enforce-id)\nto autofix this issue");var g=String(f),y=s&&Object.prototype.hasOwnProperty.call(s,g)&&s[g];if(Array.isArray(y)&&1===y.length&&y[0].type===_u.literal)return y[0].value;if(!r&&y&&"string"==typeof y&&!p)return y.replace(/'\{(.*?)\}'/gi,"{$1}");if(r=Object(Ea.a)(Object(Ea.a)({},p),r||{}),a=G_(a,d),c=G_(c,d),!y){if(!1===u&&""===y)return y;if((!m||o&&o.toLowerCase()!==l.toLowerCase())&&h(new Hh(n,o)),m)try{return e.getMessageFormat(m,l,c,i).format(r)}catch(t){return h(new qh('Error formatting default message for: "'.concat(g,'", rendering default message verbatim'),o,n,t)),"string"==typeof m?m:g}return g}try{return e.getMessageFormat(y,o,a,Object(Ea.a)({formatters:e},i||{})).format(r)}catch(t){h(new qh('Error formatting message: "'.concat(g,'", using ').concat(m?"default message":"id"," as fallback."),o,n,t))}if(m)try{return e.getMessageFormat(m,l,c,i).format(r)}catch(t){h(new qh('Error formatting the default message for: "'.concat(g,'", rendering message verbatim'),o,n,t))}return"string"==typeof y?y:"string"==typeof m?m:g}var q_=["localeMatcher","style","currency","currencyDisplay","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","currencyDisplay","currencySign","notation","signDisplay","unit","unitDisplay","numberingSystem"];function H_(t,e,n){var r=t.locale,i=t.formats,o=t.onError;void 0===n&&(n={});var a=n.format,s=a&&Kh(i,"number",a,o)||{};return e(r,Wh(n,q_,s))}function W_(t,e,n,r){void 0===r&&(r={});try{return H_(t,e,r).format(n)}catch(e){t.onError(new zh(jh.FORMAT_ERROR,"Error formatting number.",e))}return String(n)}function Z_(t,e,n,r){void 0===r&&(r={});try{return H_(t,e,r).formatToParts(n)}catch(e){t.onError(new zh(jh.FORMAT_ERROR,"Error formatting number.",e))}return[]}var $_=["numeric","style"];function K_(t,e,n,r,i){void 0===i&&(i={}),r||(r="second"),Intl.RelativeTimeFormat||t.onError(new Ah('Intl.RelativeTimeFormat is not available in this environment.\nTry polyfilling it using "@formatjs/intl-relativetimeformat"\n',Sh.MISSING_INTL_API));try{return function(t,e,n){var r=t.locale,i=t.formats,o=t.onError;void 0===n&&(n={});var a=n.format,s=!!a&&Kh(i,"relative",a,o)||{};return e(r,Wh(n,$_,s))}(t,e,i).format(n,r)}catch(e){t.onError(new Vh("Error formatting relative time.",t.locale,e))}return String(n)}var Y_=["localeMatcher","formatMatcher","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName","hourCycle","dateStyle","timeStyle","calendar","numberingSystem"];function X_(t,e,n,r){var i=t.locale,o=t.formats,a=t.onError,s=t.timeZone;void 0===r&&(r={});var l=r.format,c=Object(Ea.a)(Object(Ea.a)({},s&&{timeZone:s}),l&&Kh(o,e,l,a)),u=Wh(r,Y_,c);return"time"!==e||u.hour||u.minute||u.second||u.timeStyle||u.dateStyle||(u=Object(Ea.a)(Object(Ea.a)({},u),{hour:"numeric",minute:"numeric"})),n(i,u)}function J_(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],o=n[1],a=void 0===o?{}:o,s="string"==typeof i?new Date(i||0):i;try{return X_(t,"date",e,a).format(s)}catch(e){t.onError(new zh(jh.FORMAT_ERROR,"Error formatting date.",e))}return String(s)}function Q_(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],o=n[1],a=void 0===o?{}:o,s="string"==typeof i?new Date(i||0):i;try{return X_(t,"time",e,a).format(s)}catch(e){t.onError(new zh(jh.FORMAT_ERROR,"Error formatting time.",e))}return String(s)}function tb(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],o=n[1],a=n[2],s=void 0===a?{}:a,l=t.timeZone,c=t.locale,u=t.onError,h=Wh(s,Y_,l?{timeZone:l}:{});try{return e(c,h).formatRange(i,o)}catch(t){u(new zh(jh.FORMAT_ERROR,"Error formatting date time range.",t))}return String(i)}function eb(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],o=n[1],a=void 0===o?{}:o,s="string"==typeof i?new Date(i||0):i;try{return X_(t,"date",e,a).formatToParts(s)}catch(e){t.onError(new zh(jh.FORMAT_ERROR,"Error formatting date.",e))}return[]}function nb(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n[0],o=n[1],a=void 0===o?{}:o,s="string"==typeof i?new Date(i||0):i;try{return X_(t,"time",e,a).formatToParts(s)}catch(e){t.onError(new zh(jh.FORMAT_ERROR,"Error formatting time.",e))}return[]}var rb=["localeMatcher","type"];function ib(t,e,n,r){var i=t.locale,o=t.onError;void 0===r&&(r={}),Intl.PluralRules||o(new Ah('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n',Sh.MISSING_INTL_API));var a=Wh(r,rb);try{return e(i,a).select(n)}catch(t){o(new Vh("Error formatting plural.",i,t))}return"other"}var ob=["localeMatcher","type","style"],ab=Date.now();function sb(t,e,n,r){void 0===r&&(r={});var i=lb(t,e,n,r).reduce((function(t,e){var n=e.value;return"string"!=typeof n?t.push(n):"string"==typeof t[t.length-1]?t[t.length-1]+=n:t.push(n),t}),[]);return 1===i.length?i[0]:i}function lb(t,e,n,r){var i=t.locale,o=t.onError;void 0===r&&(r={}),Intl.ListFormat||o(new Ah('Intl.ListFormat is not available in this environment.\nTry polyfilling it using "@formatjs/intl-listformat"\n',Sh.MISSING_INTL_API));var a=Wh(r,ob);try{var s={},l=n.map((function(t,e){if("object"==typeof t){var n=function(t){return"".concat(ab,"_").concat(t,"_").concat(ab)}(e);return s[n]=t,n}return String(t)}));return e(i,a).formatToParts(l).map((function(t){return"literal"===t.type?t:Object(Ea.a)(Object(Ea.a)({},t),{value:s[t.value]||t.value})}))}catch(t){o(new zh(jh.FORMAT_ERROR,"Error formatting list.",t))}return n}var cb=["localeMatcher","style","type","fallback"];function ub(t,e,n,r){var i=t.locale,o=t.onError;Intl.DisplayNames||o(new Ah('Intl.DisplayNames is not available in this environment.\nTry polyfilling it using "@formatjs/intl-displaynames"\n',Sh.MISSING_INTL_API));var a=Wh(r,cb);try{return e(i,a).of(n)}catch(t){o(new zh(jh.FORMAT_ERROR,"Error formatting display name.",t))}}function hb(t){var e;t.defaultRichTextElements&&"string"==typeof((e=t.messages||{})?e[Object.keys(e)[0]]:void 0)&&console.warn('[@formatjs/intl] "defaultRichTextElements" was specified but "message" was not pre-compiled. \nPlease consider using "@formatjs/cli" to pre-compile your messages for performance.\nFor more details see https://formatjs.io/docs/getting-started/message-distribution')}function db(t,e){var n=function(t){void 0===t&&(t={dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}});var e=Intl.RelativeTimeFormat,n=Intl.ListFormat,r=Intl.DisplayNames,i=vh((function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new((t=Intl.DateTimeFormat).bind.apply(t,Object(Ea.d)([void 0],e,!1)))}),{cache:$h(t.dateTime),strategy:Oh.variadic}),o=vh((function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new((t=Intl.NumberFormat).bind.apply(t,Object(Ea.d)([void 0],e,!1)))}),{cache:$h(t.number),strategy:Oh.variadic}),a=vh((function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new((t=Intl.PluralRules).bind.apply(t,Object(Ea.d)([void 0],e,!1)))}),{cache:$h(t.pluralRules),strategy:Oh.variadic});return{getDateTimeFormat:i,getNumberFormat:o,getMessageFormat:vh((function(t,e,n,r){return new Fh(t,e,n,Object(Ea.a)({formatters:{getNumberFormat:o,getDateTimeFormat:i,getPluralRules:a}},r||{}))}),{cache:$h(t.message),strategy:Oh.variadic}),getRelativeTimeFormat:vh((function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new(e.bind.apply(e,Object(Ea.d)([void 0],t,!1)))}),{cache:$h(t.relativeTime),strategy:Oh.variadic}),getPluralRules:a,getListFormat:vh((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new(n.bind.apply(n,Object(Ea.d)([void 0],t,!1)))}),{cache:$h(t.list),strategy:Oh.variadic}),getDisplayNames:vh((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new(r.bind.apply(r,Object(Ea.d)([void 0],t,!1)))}),{cache:$h(t.displayNames),strategy:Oh.variadic})}}(e),r=Object(Ea.a)(Object(Ea.a)({},Zh),t),i=r.locale,o=r.defaultLocale,a=r.onError;return i?!Intl.NumberFormat.supportedLocalesOf(i).length&&a?a(new Gh('Missing locale data for locale: "'.concat(i,'" in Intl.NumberFormat. Using default locale: "').concat(o,'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details'))):!Intl.DateTimeFormat.supportedLocalesOf(i).length&&a&&a(new Gh('Missing locale data for locale: "'.concat(i,'" in Intl.DateTimeFormat. Using default locale: "').concat(o,'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details'))):(a&&a(new Uh('"locale" was not configured, using "'.concat(o,'" as fallback. See https://formatjs.io/docs/react-intl/api#intlshape for more details'))),r.locale=r.defaultLocale||"en"),hb(r),Object(Ea.a)(Object(Ea.a)({},r),{formatters:n,formatNumber:W_.bind(null,r,n.getNumberFormat),formatNumberToParts:Z_.bind(null,r,n.getNumberFormat),formatRelativeTime:K_.bind(null,r,n.getRelativeTimeFormat),formatDate:J_.bind(null,r,n.getDateTimeFormat),formatDateToParts:eb.bind(null,r,n.getDateTimeFormat),formatTime:Q_.bind(null,r,n.getDateTimeFormat),formatDateTimeRange:tb.bind(null,r,n.getDateTimeFormat),formatTimeToParts:nb.bind(null,r,n.getDateTimeFormat),formatPlural:ib.bind(null,r,n.getPluralRules),formatMessage:V_.bind(null,r,n),formatList:sb.bind(null,r,n.getListFormat),formatListToParts:lb.bind(null,r,n.getListFormat),formatDisplayName:ub.bind(null,r,n.getDisplayNames)})}function pb(t){return{locale:t.locale,timeZone:t.timeZone,fallbackOnEmptyString:t.fallbackOnEmptyString,formats:t.formats,textComponent:t.textComponent,messages:t.messages,defaultLocale:t.defaultLocale,defaultFormats:t.defaultFormats,onError:t.onError,wrapRichTextChunksInFragment:t.wrapRichTextChunksInFragment,defaultRichTextElements:t.defaultRichTextElements}}function fb(t){return t?Object.keys(t).reduce((function(e,n){var r,i=t[n];return e[n]=Dh(i)?(r=i,function(t){return r(l.Children.toArray(t))}):i,e}),{}):t}var mb=function(t,e,n,r){for(var i=[],o=4;o<arguments.length;o++)i[o-4]=arguments[o];var a=fb(r),s=V_.apply(void 0,Object(Ea.d)([t,e,n,a],i,!1));return Array.isArray(s)?l.Children.toArray(s):s},gb=function(t,e){var n=t.defaultRichTextElements,r=Object(Ea.c)(t,["defaultRichTextElements"]),i=fb(n),o=db(Object(Ea.a)(Object(Ea.a)(Object(Ea.a)({},Xh),r),{defaultRichTextElements:i}),e);return Object(Ea.a)(Object(Ea.a)({},o),{formatMessage:mb.bind(null,{locale:o.locale,timeZone:o.timeZone,formats:o.formats,defaultLocale:o.defaultLocale,defaultFormats:o.defaultFormats,messages:o.messages,onError:o.onError,defaultRichTextElements:i},o.formatters)})},yb=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cache={dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}},e.state={cache:e.cache,intl:gb(pb(e.props),e.cache),prevConfig:pb(e.props)},e}return Object(Ea.b)(e,t),e.getDerivedStateFromProps=function(t,e){var n=e.prevConfig,r=e.cache,i=pb(t);return Jh(n,i)?null:{intl:gb(i,r),prevConfig:i}},e.prototype.render=function(){return Yh(this.state.intl),l.createElement(ed,{value:this.state.intl},this.props.children)},e.displayName="IntlProvider",e.defaultProps=Xh,e}(l.PureComponent),vb=n(190),_b=py.get("".concat(Lv.TRANSLATIONS,"/translations.json"));var bb=function(t){var e=t.locale,n=Object(l.useState)(vb),r=Nt()(n,2),i=r[0],o=r[1],a=Object(l.useState)(),s=Nt()(a,2),c=s[0],u=s[1],h=Object(l.useState)(!1),d=Nt()(h,2),p=d[0],f=d[1],m=Object(l.useState)(!1),g=Nt()(m,2),y=g[0],v=g[1],_=Object(l.useState)((function(){return function(){}})),b=Nt()(_,2),x=b[0],w=b[1];return function(){var t=Object(l.useRef)(!1);Object(l.useEffect)((function(){return function(){t.current=!0}}),[])}(),Object(l.useEffect)((function(){return function(){x()}}),[x]),Object(l.useEffect)((function(){!function(t){var e=t.locale;"en"!==e?(f(!0),v(!1),_b.promise.then((function(t){var n,r,i=t.data;u(null===(n=i[e])||void 0===n?void 0:n.localeMap);var a=null===(r=i[e])||void 0===r?void 0:r.messages;if(a){var s=py.get(a),l=s.promise,c=s.cancel;w((function(){return c})),l.then((function(t){o(t.data),f(!1)})).catch((function(t){o(),f(!1),v(!0)}))}else f(!1),v(!0),console.log("Translation not found")})).catch(console.log)):o(vb)}({locale:e})}),[e]),{messages:i,localeMap:c,loading:p,error:y}},xb=["locale","messages"];function wb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Eb(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?wb(Object(n),!0).forEach((function(e){Ft()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wb(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Cb(t){var e=t.locale,n=t.messages,r=void 0===n?{}:n,i=s()(t,xb),a=bb({locale:e}),l=a.messages,c=a.localeMap;a.loading,a.error;return kt(Ey.Provider,{value:{localeMap:c}},kt(yb,o()({locale:e,messages:Eb(Eb({},l),r)},i)))}var Sb=n(18),Tb=n.n(Sb),Ob=n(246),Ib=n.n(Ob),Ab=(Ht.build(Ut),Ht.build(Rt)),Mb=(Ht.build({name:"a11y",primary:"#333333",fontSize:"17px",background:"#ccc",paperBackground:"#ffffff",color:"#000000",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'}),Ht.build({primary:"#46aa42",fontSize:"16px",background:"#efefef",paperBackground:"#ffffff",color:"#162d3d",fontFamily:'"Lato", "Helvetica Neue", BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica", "Arial", sans-serif',borderRadius:0}),Ht.build({name:"light",dense:!1,primary:"#4c9c2e",linkColor:"#4c9c2e",fontSize:"16px",background:"#efefef",paperBackground:"#ffffff",paperBorderColor:"#e5ebed",color:"#1f3424",darkTheme:!1,fontFamily:'"Helvetica Neue", BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica", "Arial", sans-serif',headerFontFamily:'Georgia, Garamond, BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica", "Arial", sans-serif',borderRadius:4,drawerZIndex:1e3}),Ht.build({name:"dark",dir:"rtl",dense:!0,primary:"#d09a04",fontSize:"14px",background:"#0b0c1b",paperBackground:"#161927",paperBackgroundElevated:"#23273e",paperBorderColor:"#0b0d13",color:"#e3e5ea",darkTheme:!0,fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif',borderRadius:3}),{routeConfig:xy,occurrence:{},dataset:{},literature:{},institution:{},collection:{},publisher:{}}),kb=c.a.createContext(Mb),Pb=["siteConfig"],Db=new Rv({gql:{endpoint:Lv.GRAPH_API},v1:{endpoint:Lv.API_V1}});var Rb=function(t){var e=t.siteConfig,n=void 0===e?{}:e,r=s()(t,Pb),i=n.theme,a=void 0===i?Ab:i,l=n.locale,c=void 0===l?"en":l,u=n.messages,h=n.routes,d=Ib()({},xy,h||{}),p=Tb()(d,"basename"),f=kt(ea,{id:"application",appRoot:!0},kt(wl,o()({},r,{basename:p}),kt(z_,o()({ReactRouterRoute:hl},r))));return kt(kb.Provider,{value:n},kt(jv.Provider,{value:Db},kt(Cb,{locale:c,messages:u},kt(Zt.Provider,{value:a},h&&kt(wy.Provider,{value:d},f),!h&&f))))},Lb=n(41),Nb=n.n(Lb),jb=c.a.createContext({}),Fb=n(45),zb=n.n(Fb),Bb=n(55),Ub=n.n(Bb),Gb=n(31),Vb=n.n(Gb),qb=n(125),Hb=n.n(qb),Wb=n(247),Zb=n.n(Wb),$b=n(76),Kb=n.n($b),Yb=n(92),Xb=n.n(Yb),Jb=n(126),Qb=n.n(Jb);function tx(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ex(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tx(Object(n),!0).forEach((function(e){Ft()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tx(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function nx(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=yu()(t);if(e){var i=yu()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return mu()(this,n)}}var rx=ks(function(t){pu()(n,t);var e=nx(n);function n(){var t;su()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),Ft()(hu()(t),"setFilter",function(){var e=Ub()(Vb.a.mark((function e(n){return Vb.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Qb()(n,t.props.filter)){e.next=2;break}return e.abrupt("return");case 2:return"object"===zb()(n)&&(n=t.cleanUpFilter(Hb()(n)),Object.keys(n).forEach((function(t){void 0===n[t]&&delete n[t]})),Kb()(n.must)&&delete n.must,Kb()(n.must_not)&&delete n.must_not,0===Object.keys(n).length&&(n=void 0)),t.props.onChange(n),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ft()(hu()(t),"setField",function(){var e=Ub()(Vb.a.mark((function e(n,r){var i,o,a,s=arguments;return Vb.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=!(s.length>2&&void 0!==s[2])||s[2],o=t.props.filter?Hb()(t.props.filter):{},a=i?"must":"must_not",t.setFilter(ex(ex({},o),{},Ft()({},a,ex(ex({},o[a]),{},Ft()({},n,r)))));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Ft()(hu()(t),"setFullField",function(){var e=Ub()(Vb.a.mark((function e(n,r,i){var o,a;return Vb.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.props.filter?Hb()(t.props.filter):{},e.next=3,t.setFilter(ex(ex({},o),{},{must:ex(ex({},o.must),{},Ft()({},n,r)),must_not:ex(ex({},o.must_not),{},Ft()({},n,i))}));case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()),Ft()(hu()(t),"negateField",function(){var e=Ub()(Vb.a.mark((function e(n,r){var i,o,a,s,l,c,u;return Vb.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=t.props.filter?Hb()(t.props.filter):{},a=Tb()(o,"must.".concat(n),[]),s=Tb()(o,"must_not.".concat(n),[]),l=[].concat(Nb()(a),Nb()(s)),c=r?"must_not":"must",u=r?"must":"must_not",t.setFilter(ex(ex({},o),{},(i={},Ft()(i,c,ex(ex({},o[c]),{},Ft()({},n,l))),Ft()(i,u,ex(ex({},o[u]),{},Ft()({},n,[]))),i)));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Ft()(hu()(t),"add",function(){var e=Ub()(Vb.a.mark((function e(n,r){var i,o,a,s=arguments;return Vb.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=!(s.length>2&&void 0!==s[2])||s[2],o=i?"must":"must_not",a=(a=Tb()(t.props.filter,"".concat(o,".").concat(n),[])).concat(r),a=Zb()(a,Qb.a),t.setField(n,a,i);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Ft()(hu()(t),"remove",function(){var e=Ub()(Vb.a.mark((function e(n,r){var i,o,a,s=arguments;return Vb.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=!(s.length>2&&void 0!==s[2])||s[2],o=i?"must":"must_not",a=(a=Tb()(t.props.filter,"".concat(o,".").concat(n),[])).filter((function(t){return!Qb()(t,r)})),t.setField(n,a,i);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Ft()(hu()(t),"toggle",function(){var e=Ub()(Vb.a.mark((function e(n,r){var i,o,a=arguments;return Vb.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=!(a.length>2&&void 0!==a[2])||a[2],o=i?"must":"must_not",Tb()(t.props.filter,"".concat(o,".").concat(n),[]).some((function(t){return Qb()(t,r)}))?t.remove(n,r,i):t.add(n,r,i);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Ft()(hu()(t),"cleanUpFilter",(function(t){return{must:Xb()(Tb()(t,"must",{}),(function(t){return!Kb()(t)})),must_not:Xb()(Tb()(t,"must_not",{}),(function(t){return!Kb()(t)}))}})),t}return cu()(n,[{key:"render",value:function(){var t={setField:this.setField,setFullField:this.setFullField,setFilter:this.setFilter,add:this.add,remove:this.remove,toggle:this.toggle,negateField:this.negateField,filter:this.props.filter,filterHash:wv()(this.props.filter||{})};return kt(jb.Provider,{value:t},this.props.children)}}]),n}(c.a.Component),{filter:"onChange"}),ix=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(t){};return function(e){return function(n){return kt(jb.Consumer,null,(function(r){return kt(e,o()({},t(r),n))}))}}};var ox=function(t){var e=t.theme;t.isActive;return Pt("background:",e.paperBackground,";border:1px solid ",e.paperBorderColor,";flex:0 0 auto;margin:10px;border-radius:",e.borderRadius,"px;","")},ax={name:"unv3er",styles:"flex:1 1 auto;margin:10px;margin-top:0;display:flex;flex-direction:column"},sx=function(t){t.theme;return ax},lx={name:"sidtwu",styles:"display:flex;flex-direction:column;height:100%;overflow:auto"},cx=function(t){t.theme;return lx},ux=function(t){return Pt("padding:10px;border-bottom:1px solid ",t.theme.paperBorderColor,";","")},hx=c.a.createContext();var dx=function(t,e){var n=t=t||{},r=n.must,i=n.must_not,o={},a=[];return r&&Object.entries(r).filter((function(t){var e=Nt()(t,2);e[0];return e[1]})).forEach((function(t){var n=Nt()(t,2),r=function(t){var e=t.filterName,n=t.values,r=t.filterConfig,i=t.errors;if(0===(null==n?void 0:n.length))return;var o=r.fields[e]||{},a=("function"==typeof(null==o?void 0:o.transformValue)?n.map(o.transformValue):n).map((function(t){return function(t){var e,n=t.value,r=t.config,i=t.filterName,o=t.errors,a=(null==n?void 0:n.type)||(null==r?void 0:r.defaultType)||"equals";if(!((null==r||null===(e=r.v1)||void 0===e?void 0:e.supportedTypes)||["equals"]).includes(a))return void o.push({errorType:"INVALID_PREDICATE_TYPE",filterName:i,type:a});return"string"==typeof n||"number"==typeof n?n:"object"===zb()(n)&&null!==n?["equals","fuzzy","like","within"].includes(a)?n.value:"range"===a?"".concat(n.value.gte||n.value.gt||"*",",").concat(n.value.lte||n.value.lgt||"*"):void o.push({errorType:"UNKNOWN_PREDICATE_TYPE",filterName:i,type:a}):void o.push({errorType:"UNKNOWN_PREDICATE_VALUE_FORMAT",filterName:i,type:a})}({value:t,config:o,filterName:e,errors:i})})).filter((function(t){return void 0!==t}));o.singleValue&&(a=a[0]);return{name:(null==o?void 0:o.defaultKey)||e,values:a}}({filterName:n[0],values:n[1],filterConfig:e,errors:a});r&&(o[r.name]=r.values)})),i&&Object.entries(i).filter((function(t){var e=Nt()(t,2);e[0];return e[1]})).length>0&&a.push({errorType:"UNSUPPORTED_NEGATED_PREDICATE"}),{v1Filter:o,errors:a.length>0?a:void 0}};function px(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function fx(t){var e=t.filters,n=t.filterConfig;return e?Object.entries(e).map((function(t){var e=Nt()(t,2);return function(t){var e=t.filterName,n=t.values,r=void 0===n?[]:n,i=t.filterConfig.fields[e]||{};if(i.serializer)return i.serializer({filterName:e,values:r,config:i});if(Array.isArray(r)&&0===(null==r?void 0:r.length))return;var o="function"==typeof(null==i?void 0:i.transformValue)?r.map(i.transformValue):r;if("equals"===Tb()(i,"defaultType","equals")&&o.every((function(t){return"string"==typeof t||"number"==typeof t})))return{type:"in",key:i.defaultKey||e,values:o};var a=o.map((function(t){return function(t){var e=t.filterName,n=t.value,r=t.config;if("string"==typeof n||"number"==typeof n)return{type:(null==r?void 0:r.defaultType)||"equals",key:(null==r?void 0:r.defaultKey)||e,value:n};if("object"===zb()(n)&&null!==n)return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?px(Object(n),!0).forEach((function(e){Ft()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):px(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({type:(null==r?void 0:r.defaultType)||"equals",key:(null==r?void 0:r.defaultKey)||e},n);console.warn("Invalid filter provided. It will be ignored. Provided: ",n)}({filterName:e,value:t,config:i})})).filter((function(t){return t}));return 1===a.length?a[0]:{type:"or",predicates:a}}({filterName:e[0],values:e[1],filterConfig:n})})).filter((function(t){return t})):[]}var mx=function(t,e){t=t||{},e.preFilterTransform&&(t=e.preFilterTransform(t));var n=t,r=n.must,i=n.must_not,o=fx({filters:r,filterConfig:e}),a=fx({filters:i,filterConfig:e}).map((function(t){return{type:"not",predicate:t}})),s=o.concat(a);return 1===s.length?s[0]:{type:"and",predicates:s}};function gx(t,e){t=t||{};var n={},r=Object.keys(e.fields).reduce((function(t,n){var r,i=n;return t[(null===(r=e.fields[n])||void 0===r?void 0:r.defaultKey)||n]=i,t}),{});return Object.keys(t).forEach((function(i){var o,a=t[i];if(void 0!==a){var s=r[i]||i,l=Array.isArray(a)?a:[a],c=e.fields[s];((null==c||null===(o=c.v1)||void 0===o?void 0:o.supportedTypes)||["equals"]).includes("range")&&(l=a.map((function(t){var e=t.split(",");if(1===e.length)return{type:"equals",value:e[0]};var n={type:"range",value:{}},r=e[0],i=e[1];return""!==r&&"*"!==r&&(n.value.gte=r),""!==i&&"*"!==i&&(n.value.lte=i),n}))),n[s]=l}})),{must:n}}var yx=["theme"],vx=["isTrackingData","theme"],_x=["theme"];var bx={name:"h15532",styles:"border-radius:4px;border:1px solid #eee;background:white;overflow:hidden;box-shadow:0 2px 3px 3px rgb(0 0 0 / 2%);>div:last-of-type{flex:1 1 auto;padding:12px;}>div:first-of-type{flex:0 0 auto;img{display:block;}}h4{margin:0;}"},xx=function(t){o()({},t);return bx},wx={name:"pje21s",styles:"margin-top:4px;margin-bottom:4px"},Ex=function(t){o()({},t);return wx},Cx={name:"1aj97u",styles:"font-size:13px;margin-top:12px;margin-bottom:12px"},Sx=function(t){o()({},t);return Cx},Tx={name:"wy2uqj",styles:"margin:0 16px;.gbif-header-location{font-size:13px;display:flex;align-items:center;margin-top:8px;}"},Ox=function(t){o()({},t);return Tx},Ix=function(t){var e=t.theme;s()(t,yx);return Pt("position:absolute;border:1px solid #88888811;width:100%;height:100%;top:0;border-radius:100%;background-image:radial-gradient(farthest-corner at 30% 35%, ",e.darkTheme?"#ffffff33":"#ffffffaa"," 0%, #fff0 30%);","")},Ax={name:"iwjav3",styles:"position:relative;width:75px;height:75px"},Mx=function(t){o()({},t);return Ax},kx=function(t){var e=t.isTrackingData,n=t.theme;s()(t,vx);return Pt("position:absolute;top:0;.land{fill:#88888844;}.graticule{stroke:#88888840;fill:transparent;stroke-width:0.3px;}.sphere{fill:#88888822;}.point{fill:",n.color700,";",e?"\n    fill: #ff3800;\n    stroke: #ff38006e;\n    animation: hideshow 1s ease infinite;\n    ":null,";}@keyframes hideshow{0%{stroke-width:2px;}50%{stroke-width:10px;}100%{stroke-width:2px;}}","")},Px=function(t){var e=t.theme;s()(t,_x);return Pt("background:",e.paperBackground500,";position:relative;max-width:100%;","")},Dx=function(t){var e=t.theme;return Pt("border:1px solid ",e.paperBorderColor,";border-width:0 1px;color:",e.darkTheme?e.color600:e.color900,";","")},Rx={name:"jtrtuq",styles:"overflow:auto;flex:1 1 auto;>div{max-width:100%;}"},Lx=function(t){t.theme;return Rx},Nx={name:"14xvobw",styles:">img{margin-right:24px;}>h3{display:inline-block;margin:0;font-size:1.2em;font-weight:700;}"},jx=function(t){t.theme;return Nx},Fx=function(t){var e=t.theme;return Pt("bottom:0;left:0;padding:4px 8px;border-top:1px solid ",e.paperBorderColor,";bottom:0;right:0;font-size:12px;background:",e.paperBackground500,";","")},zx={name:"1oocx5b",styles:"background:#88888811;border:1px solid #88888818;margin-top:12px;>img{display:block;margin:auto;}"},Bx=function(t){t.theme;return zx},Ux={name:"1p1ip2o",styles:"font-size:85%"},Gx={name:"1s1xgis",styles:"summary{background:#f5f5f5;padding-left:16px;padding-right:16px;border-width:1px 0;border:1px solid #eee;border-width:1px 0;}>div{margin:0 16px 32px 16px;}"},Vx={name:"1kwyc3g",styles:"font-size:11px;padding:0 4px;border:1px solid #dedede;background:#f3f3f3;margin:0 4px 4px 0;display:inline-block"},qx=function(t){t.theme;return Vx},Hx=["lat","lon","svg","className","style"];function Wx(t){var e,n=t.lat,r=t.lon,i=t.svg,o=(t.className,t.style,s()(t,Hx),zv(Zx,{lazyLoad:!0})),a=o.data,u=(o.error,o.loading),h=o.load,d=Object(l.useContext)(Zt);return Object(l.useEffect)((function(){void 0!==n&&h({variables:{lat:n,lon:r}})}),[n,r]),kt("div",{css:Mx({theme:d})},!u&&a&&kt(c.a.Fragment,null,kt("div",{css:kx({theme:d}),dangerouslySetInnerHTML:{__html:null==a||null===(e=a.globe)||void 0===e?void 0:e.svg}}),kt("div",{css:Ix({theme:d})}),kt("div",{css:kx({theme:d}),dangerouslySetInnerHTML:{__html:i}})))}var Zx="\nquery globe($lat: Float!, $lon: Float!){\n  globe(cLat: $lat, cLon: $lon) {\n    svg\n  }\n}\n",$x=["data","loading","error","className"];function Kx(t){var e,n,r,i,a,c,u,h,d,p,f,m=t.data,g=(t.loading,t.error,t.className,s()(t,$x)),y=Yp(500),v=Object(l.useContext)(Zt),_=null==m?void 0:m.occurrence;return kt(Zl,o()({wrap:"no-wrap",css:Ox({theme:v})},g),!y&&(null==m||null===(e=m.occurrence)||void 0===e||null===(n=e.volatile)||void 0===n?void 0:n.globe)&&kt($l,{grow:!1,style:{marginRight:18}},kt(Wx,null==m||null===(r=m.occurrence)||void 0===r||null===(i=r.volatile)||void 0===i?void 0:i.globe)),kt($l,{grow:!0},kt("div",{css:jx({theme:v})},kt(Mg,{style:{fontSize:"80%"},prefix:kt(ud,{id:"occurrenceDetails.occurrence"}),suffix:null!=m&&null!==(a=m.occurrence)&&void 0!==a&&a.eventDate?kt(fd,{value:null==m||null===(c=m.occurrence)||void 0===c?void 0:c.eventDate,year:"numeric",month:"long",day:"2-digit"}):kt(ud,{id:"phrases.unknownDate"})}),kt("h3",{dangerouslySetInnerHTML:{__html:null==m||null===(u=m.occurrence)||void 0===u||null===(h=u.gbifClassification)||void 0===h||null===(d=h.usage)||void 0===d?void 0:d.formattedName}})),kt("div",{css:Sx({theme:v})},kt(zf,{css:Ex({theme:v}),eventDate:_.eventDate,countryCode:_.countryCode,locality:_.locality}),kt(zf,{css:Ex({theme:v}),stillImageCount:_.stillImageCount,movingImageCount:_.movingImageCount,soundCount:_.soundCount,typeStatus:null==_||null===(p=_.typeStatus)||void 0===p?void 0:p[0],basisOfRecord:_.basisOfRecord,isSequenced:_.volatile.features.isSequenced,isTreament:_.volatile.features.isTreament,isClustered:_.volatile.features.isClustered,isSamplingEvent:_.volatile.features.isSamplingEvent,issueCount:null==_||null===(f=_.issues)||void 0===f?void 0:f.length}))))}var Yx=n(105),Xx=n.n(Yx),Jx=n(186),Qx=n.n(Jx);function tw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=yu()(t);if(e){var i=yu()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return mu()(this,n)}}var ew=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.isHtmlResponse;return rd(function(e){pu()(i,e);var r=tw(i);function i(t){var e;return su()(this,i),(e=r.call(this,t)).getTitle=e.getTitle.bind(hu()(e)),e.state={},e}return cu()(i,[{key:"componentDidMount",value:function(){this._mounted=!0,this.getTitle()}},{key:"componentWillUnmount",value:function(){this._mounted=!1}},{key:"componentDidUpdate",value:function(t){t.id!==this.props.id&&this.getTitle()}},{key:"getTitle",value:function(){var e,n=this;this.cancelPending&&this.cancelPending();var r=!1,i=t({id:this.props.id,locale:null===(e=this.props.intl)||void 0===e?void 0:e.locale});this.cancelPending=function(){return r=!0},"function"==typeof(null==i?void 0:i.then)?i.then((function(t){r||n._mounted&&n.setState({title:t.title,error:!1})})).catch((function(t){r||n._mounted&&(console.log(t),n.setState({title:"unknown",error:!0}))})):this.setState({title:void 0===i.title?"":i.title})}},{key:"render",value:function(){var t=this.state.error?kt("span",{className:"discreet"},"unknown"):this.state.title;return void 0===t?kt("span",{style:{width:100,display:"inline-block",verticalAlign:"top"}},kt(Id,null)):n?kt("span",{dangerouslySetInnerHTML:{__html:t}}):kt("span",null,t)}}]),i}(l.Component))},nw=n(191),rw=n.n(nw);function iw(t){return function(e){var n=e.id;if("range"===(null==n?void 0:n.type)){var r,i,o,a,s,l=(null==n||null===(r=n.value)||void 0===r?void 0:r.gte)||(null==n||null===(i=n.value)||void 0===i?void 0:i.gt),c=(null==n||null===(o=n.value)||void 0===o?void 0:o.lte)||(null==n||null===(a=n.value)||void 0===a?void 0:a.lt);return s=rw()(l)?"lt":rw()(c)?"gt":"between",kt(ud,{id:"".concat(t,".").concat(s),defaultMessage:"Filter name",values:{from:l,to:c}})}return"equals"===(null==n?void 0:n.type)?kt(ud,{id:"".concat(t,".e"),defaultMessage:"Filter name",values:{from:n.value}}):kt(ud,{id:"invalidValue",defaultMessage:"Invalid value"})}}function ow(t,e,n){return Object.keys(t).reduce((function(r,i){return r[i]=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;switch(e.type){case"TRANSLATION":return function(t){var n=t.id;return kt(ud,{id:e.template(n),defaultMessage:aw(n)})};case"TRANSFORM":return function(t){var n=t.id,r=id();return kt(c.a.Fragment,null,e.transform({id:n,locale:r.locale}))};case"GQL":var i=function(t){var r=t.id;return n.get(n.gql.endpoint,{params:{query:e.query,variables:{id:r}}}).promise.then((function(t){return t.data})).then(e.transform||function(t){return t})},o=ew(i,{isHtmlResponse:e.isHtmlResponse});return o;case"ENDPOINT":var a=function(t){var i=t.id;t.locale;return n.get(e.template({id:i,api:n})).promise.then((function(t){return t.data})).then((function(t){return e.transform?e.transform(t,{localeContext:r}):t}))},s=ew(a);return s;case"CUSTOM_ENDPOINT":var l=ew(e.get);return l;case"NUMBER_RANGE":return iw(e.path);case"CUSTOM":return e.component;default:return function(t){var e=t.id;return"object"===zb()(e)?e.value:e}}}(i,t[i],e,n),r}),{})}function aw(t){return"string"==typeof t?t.charAt(0)+t.slice(1).toLowerCase().replace(/_/g," "):"Unknown"}var sw=["getEnum"],lw=["label"],cw=["term","label","showDetails","hideIssues","hideRemarks"],uw=uf.Term,hw=uf.Value;function dw(t){if(!t.term)return null;var e=t.term.htmlValue,n=Array.isArray(e)?e:[e];return kt(yw,t,n.map((function(t,e){return kt("div",{key:e,dangerouslySetInnerHTML:{__html:t}})})))}function pw(t){if(!t.term)return null;var e=t.term.value,n=Array.isArray(e)?e:[e];return kt(yw,t,n.join(" ● "))}function fw(t){return t.term?kt(yw,t):null}function mw(t){var e=t.getEnum,n=s()(t,sw);if(!n.term)return null;var r=n.term.value,i=Array.isArray(r)?r:[r];return kt(yw,n,i.map((function(t,n){return kt(c.a.Fragment,null,n>0&&" ● ",kt(ud,{key:n,id:e(t),defaultMessage:t}))})))}function gw(t){var e=t.label,n=s()(t,lw);return kt(c.a.Fragment,null,kt(uw,null,kt(ud,{id:e,defaultMessage:e})),kt(hw,n))}function yw(t){var e=t.term,n=t.label,r=t.showDetails,i=t.hideIssues,a=t.hideRemarks,l=s()(t,cw),u=e.simpleName,h=e.verbatim;if(!(e.value||h&&r))return null;var d=n||"occurrenceFieldNames.".concat(u);return kt(c.a.Fragment,null,kt(uw,null,kt(ud,{id:d,defaultMessage:_.startCase(u)})),kt(hw,{style:{position:"relative"}},kt("div",o()({style:{display:"inline-block",paddingRight:8}},l)),kt(_w,o()({},e,{hideRemarks:a,hideIssues:i})),kt(vw,{term:e,showDetails:r,hideRemarks:a})))}function vw(t){var e=t.term,n=t.showDetails;return e.verbatim&&(n||"INFERRED"===e.remarks||"ALTERED"===e.remarks)?kt("div",{title:"Verbatim"},kt("span",{style:{opacity:.6,whiteSpace:"pre-wrap"}},e.verbatim)," ",kt(wg,null,kt(Eg,{type:"light"},kt(ud,{id:"occurrenceDetails.info.original"})),null===e.value&&kt(Eg,{type:"light"},kt(ud,{id:"occurrenceDetails.info.excluded"})))):null}function _w(t){var e=t.issues,n=void 0===e?[]:e,r=t.remarks,i=t.hideRemarks,o="INFERRED"===r,a="ALTERED"===r,s=!i&&(o||a),l=!t.hideIssues&&(null==n?void 0:n.length)>0;return l||s?kt(wg,null,l&&n.map((function(t){return kt(Eg,{type:t.severity.toLowerCase(),key:t.id},kt(ud,{id:"enums.occurrenceIssue.".concat(t.id),defaultMessage:aw(t.id)}))})),!i&&kt(c.a.Fragment,null,o&&kt(Eg,{type:"INFO"},kt(ud,{id:"occurrenceDetails.info.inferred",defaultMessage:"Inferred"})),a&&kt(Eg,{type:"INFO"},kt(ud,{id:"occurrenceDetails.info.altered",defaultMessage:"Altered"})))):null}var bw=["as","includeTerminal","ranks"];function xw(t){t.as;var e=t.includeTerminal,n=void 0!==e&&e,r=t.ranks,i=s()(t,bw);return kt(If,i,r.map((function(t,e,r){var i=r.length;return n||i-1!==e?kt("span",{key:t.rank},t.name):null})))}If.propTypes={as:va.a.element};var ww=["agent"];uf.Term,uf.Value;function Ew(t){var e,n,r,i,o,a,c,u=t.agent,h=(s()(t,ww),Object(l.useContext)(Zt)),d=u.person;return kt(Zl,{css:xx({theme:h}),wrap:"nowrap"},kt("div",null,(null==d||null===(e=d.image)||void 0===e?void 0:e.value)&&kt(cp,{src:null==d||null===(n=d.image)||void 0===n?void 0:n.value,h:80,style:{maxWidth:80}})),kt("div",null,kt("h4",null,null==d||null===(r=d.name)||void 0===r?void 0:r.value),(null==d||null===(i=d.birthDate)||void 0===i?void 0:i.value)&&kt("div",null,kt(fd,{value:null==d||null===(o=d.birthDate)||void 0===o?void 0:o.value,year:"numeric",month:"long",day:"2-digit"}),(null==d||null===(a=d.deathDate)||void 0===a?void 0:a.value)&&kt("span",null," - ",kt(fd,{value:null==d||null===(c=d.deathDate)||void 0===c?void 0:c.value,year:"numeric",month:"long",day:"2-digit"}))),kt("a",{href:u.value},u.value)))}var Cw=["label"],Sw=uf.Term,Tw=uf.Value;function Ow(t){var e=t.occurrence,n=t.showAll,r=t.setActiveImage,i=e.terms.reduce((function(t,e){return t[e.simpleName]=e,t}),{});return kt(c.a.Fragment,null,kt(Aw,{showAll:n,termMap:i,occurrence:e,setActiveImage:r}),kt(Mw,{showAll:n,termMap:i,occurrence:e,setActiveImage:r}),kt(Fw,{showAll:n,termMap:i,occurrence:e,setActiveImage:r}),kt(Lw,{showAll:n,termMap:i,occurrence:e,setActiveImage:r}),kt(kw,{showAll:n,termMap:i,occurrence:e,setActiveImage:r}),kt(Rw,{showAll:n,termMap:i,occurrence:e,setActiveImage:r}),kt(Pw,{showAll:n,termMap:i,occurrence:e,setActiveImage:r}),kt(Dw,{showAll:n,termMap:i,occurrence:e,setActiveImage:r}),kt(Nw,{showAll:n,termMap:i,occurrence:e,setActiveImage:r}),kt(jw,{showAll:n,termMap:i,occurrence:e,setActiveImage:r}),kt(zw,{showAll:n,termMap:i,occurrence:e,setActiveImage:r}),kt(Bw,{showAll:n,termMap:i,occurrence:e,setActiveImage:r}))}function Iw(t){var e=t.label,n=s()(t,Cw);return kt(Kp,o()({summary:kt(ud,{id:e}),defaultOpen:!0,css:Gx},n))}function Aw(t){var e,n,r,i=t.showAll,o=t.termMap,a=t.occurrence,s=t.setActiveImage;return kt(Iw,{label:"occurrenceDetails.groups.summary"},kt(uf,{css:Ux,breakpoint:800},kt(Gw,{showAll:i,termMap:o,occurrence:a,setActiveImage:s}),kt(Zw,{showAll:i,termMap:o,occurrence:a}),kt($w,{showAll:i,termMap:o,occurrence:a}),(null===(e=a.gbifClassification)||void 0===e||null===(n=e.classification)||void 0===n?void 0:n.length)>1&&kt(gw,{label:"occurrenceFieldNames.taxonomicClassification"},kt(xw,{ranks:a.gbifClassification.classification})),(null==a||null===(r=a.gadm)||void 0===r?void 0:r.level0)&&kt(gw,{label:"occurrenceFieldNames.gadmClassification"},kt(Sg,{gadm:a.gadm})),kt(gw,{label:"occurrenceDetails.dataset"},kt(Ay,{id:a.datasetKey},a.datasetTitle)),kt(mw,{term:o.basisOfRecord,showDetails:i,getEnum:function(t){return"enums.basisOfRecord.".concat(t)}}),kt(Kw,{showAll:i,termMap:o,occurrence:a})))}function Mw(t){var e=t.showAll,n=t.termMap,r=t.occurrence;t.setActiveImage;return kt(Iw,{label:"occurrenceDetails.groups.record"},kt(uf,{css:Ux,breakpoint:800},kt(Vw,{showAll:e,termMap:n,occurrence:r}),kt(qw,{showAll:e,termMap:n,occurrence:r}),kt(dw,{term:n.datasetID,showDetails:e}),kt(pw,{term:n.datasetName,showDetails:e}),kt(mw,{term:n.basisOfRecord,showDetails:e,getEnum:function(t){return"enums.basisOfRecord.".concat(t)}}),kt(pw,{term:n.informationWithheld,showDetails:e}),kt(pw,{term:n.dataGeneralizations,showDetails:e}),kt(Uw,{termMap:n})))}function kw(t){var e=t.showAll,n=t.termMap;t.occurrence,t.setActiveImage;return["occurrenceID","catalogNumber","recordNumber","recordedBy","individualCount","organismQuantity","organismQuantityType","sex","lifeStage","reproductiveCondition","behavior","establishmentMeans","occurrenceStatus","preparations","disposition","associatedReferences","associatedSequences","associatedTaxa","otherCatalogNumbers","occurrenceRemarks","degreeOfEstablishment","pathway","associatedMedia"].find((function(t){return n[t]}))?kt(Iw,{label:"occurrenceDetails.groups.occurrence"},kt(uf,{css:Ux,breakpoint:800},kt(dw,{term:n.occurrenceID,showDetails:e}),kt(pw,{term:n.catalogNumber,showDetails:e}),kt(pw,{term:n.recordNumber,showDetails:e}),kt(pw,{term:n.recordedBy,showDetails:e}),kt(pw,{term:n.individualCount,showDetails:e}),kt(pw,{term:n.organismQuantity,showDetails:e}),kt(pw,{term:n.organismQuantityType,showDetails:e}),kt(pw,{term:n.sex,showDetails:e}),kt(pw,{term:n.lifeStage,showDetails:e}),kt(pw,{term:n.reproductiveCondition,showDetails:e}),kt(pw,{term:n.behavior,showDetails:e}),kt(pw,{term:n.establishmentMeans,showDetails:e}),kt(pw,{term:n.degreeOfEstablishment,showDetails:e}),kt(pw,{term:n.pathway,showDetails:e}),kt(mw,{term:n.occurrenceStatus,showDetails:e,getEnum:function(t){return"enums.occurrenceStatus.".concat(t)}}),kt(pw,{term:n.preparations,showDetails:e}),kt(pw,{term:n.disposition,showDetails:e}),kt(dw,{term:n.associatedReferences,showDetails:e}),kt(dw,{term:n.associatedSequences,showDetails:e}),kt(dw,{term:n.associatedTaxa,showDetails:e}),kt(pw,{term:n.otherCatalogNumbers,showDetails:e}),kt(pw,{term:n.occurrenceRemarks,showDetails:e}),kt(dw,{term:n.associatedMedia,showDetails:e}))):null}function Pw(t){var e=t.showAll,n=t.termMap;t.occurrence,t.setActiveImage;return["organismID","organismScope","associatedOccurrences","associatedOrganisms","previousIdentifications","organismRemarks"].find((function(t){return n[t]}))?kt(Iw,{label:"occurrenceDetails.groups.organism"},kt(uf,{css:Ux,breakpoint:800},kt(pw,{term:n.organismID,showDetails:e}),kt(pw,{term:n.organismScope,showDetails:e}),kt(pw,{term:n.associatedOccurrences,showDetails:e}),kt(dw,{term:n.associatedOrganisms,showDetails:e}),kt(pw,{term:n.previousIdentifications,showDetails:e}),kt(pw,{term:n.organismRemarks,showDetails:e}))):null}function Dw(t){var e=t.showAll,n=t.termMap;t.occurrence,t.setActiveImage;return n.materialSampleID?kt(Iw,{label:"occurrenceDetails.groups.materialSample"},kt(uf,{css:Ux,breakpoint:800},kt(pw,{term:n.materialSampleID,showDetails:e}))):null}function Rw(t){var e=t.showAll,n=t.termMap;t.occurrence,t.setActiveImage;return["eventID","parentEventID","fieldNumber","eventDate","eventTime","startDayOfYear","endDayOfYear","year","month","day","verbatimEventDate","habitat","samplingProtocol","samplingEffort","sampleSizeValue","sampleSizeUnit","fieldNotes","eventRemarks"].find((function(t){return n[t]}))?kt(Iw,{label:"occurrenceDetails.groups.event"},kt(uf,{css:Ux,breakpoint:800},kt(pw,{term:n.eventID,showDetails:e}),kt(pw,{term:n.parentEventID,showDetails:e}),kt(pw,{term:n.parentEventID,showDetails:e}),kt(pw,{term:n.eventDate,showDetails:e}),kt(pw,{term:n.eventTime,showDetails:e}),e&&kt(pw,{term:n.startDayOfYear,showDetails:e}),e&&kt(pw,{term:n.endDayOfYear,showDetails:e}),e&&kt(pw,{term:n.year,showDetails:e}),e&&kt(pw,{term:n.month,showDetails:e}),e&&kt(pw,{term:n.day,showDetails:e}),kt(pw,{term:n.verbatimEventDate,showDetails:e}),kt(pw,{term:n.habitat,showDetails:e}),kt(dw,{term:n.samplingProtocol,showDetails:e}),kt(pw,{term:n.samplingEffort,showDetails:e}),kt(pw,{term:n.sampleSizeValue,showDetails:e}),kt(pw,{term:n.sampleSizeUnit,showDetails:e}),kt(pw,{term:n.fieldNotes,showDetails:e}),kt(pw,{term:n.eventRemarks,showDetails:e}))):null}function Lw(t){var e,n=t.showAll,r=t.termMap,i=t.occurrence;t.setActiveImage;return["locationID","higherGeographyID","higherGeography","continent","waterBody","islandGroup","island","countryCode","stateProvince","county","municipality","locality","verbatimLocality","verbatimElevation","verbatimDepth","minimumDistanceAboveSurfaceInMeters","maximumDistanceAboveSurfaceInMeters","locationAccordingTo","locationRemarks","decimalLatitude","decimalLongitude","coordinateUncertaintyInMeters","coordinatePrecision","pointRadiusSpatialFit","verbatimCoordinateSystem","verbatimSRS","verticalDatum","footprintWKT","footprintSRS","footprintSpatialFit","georeferencedBy","georeferencedDate","georeferenceProtocol","georeferenceSources","georeferenceVerificationStatus","georeferenceRemarks","country","minimumElevationInMeters","maximumElevationInMeters","elevation","elevationAccuracy","minimumDepthInMeters","maximumDepthInMeters","minimumDepthInMeters","maximumDepthInMeters","depth","depthAccuracy","geodeticDatum","verbatimCoordinates","verbatimLatitude","verbatimLongitude"].find((function(t){return r[t]}))?kt(Iw,{label:"occurrenceDetails.groups.location"},kt(uf,{css:Ux,breakpoint:800},kt(pw,{term:r.locationID,showDetails:n}),kt(pw,{term:r.higherGeographyID,showDetails:n}),kt(pw,{term:r.higherGeography,showDetails:n}),kt(mw,{term:r.continent,showDetails:n,getEnum:function(t){return"enums.continent.".concat(t)}}),kt(mw,{term:r.countryCode,label:"occurrenceFieldNames.country",showDetails:n,getEnum:function(t){return"enums.countryCode.".concat(t)}}),kt(pw,{term:r.waterBody,showDetails:n}),kt(pw,{term:r.islandGroup,showDetails:n}),kt(pw,{term:r.island,showDetails:n}),kt(pw,{term:r.stateProvince,showDetails:n}),kt(pw,{term:r.county,showDetails:n}),kt(pw,{term:r.municipality,showDetails:n}),kt(pw,{term:r.locality,showDetails:n}),kt(pw,{term:r.verbatimLocality,showDetails:n}),kt(pw,{term:r.minimumDistanceAboveSurfaceInMeters,showDetails:n}),kt(pw,{term:r.maximumDistanceAboveSurfaceInMeters,showDetails:n}),kt(pw,{term:r.locationAccordingTo,showDetails:n}),kt(pw,{term:r.locationRemarks,showDetails:n}),kt(pw,{term:r.decimalLatitude,showDetails:n}),kt(pw,{term:r.decimalLongitude,showDetails:n}),kt(pw,{term:r.coordinateUncertaintyInMeters,showDetails:n}),kt(pw,{term:r.coordinatePrecision,showDetails:n}),kt(pw,{term:r.pointRadiusSpatialFit,showDetails:n}),kt(pw,{term:r.footprintWKT,showDetails:n}),kt(pw,{term:r.footprintSRS,showDetails:n}),kt(pw,{term:r.verticalDatum,showDetails:n}),kt(pw,{term:r.footprintSpatialFit,showDetails:n}),kt(pw,{term:r.verbatimCoordinateSystem,showDetails:n}),kt(pw,{term:r.verbatimSRS,showDetails:n}),kt(pw,{term:r.georeferencedBy,showDetails:n}),kt(pw,{term:r.georeferencedDate,showDetails:n}),kt(dw,{term:r.georeferenceProtocol,showDetails:n}),kt(dw,{term:r.georeferenceSources,showDetails:n}),kt(pw,{term:r.georeferenceVerificationStatus,showDetails:n}),kt(dw,{term:r.georeferenceRemarks,showDetails:n}),kt(pw,{term:r.elevation,showDetails:n}),kt(pw,{term:r.elevationAccuracy,showDetails:n}),kt(pw,{term:r.minimumElevationInMeters,showDetails:n}),kt(pw,{term:r.maximumElevationInMeters,showDetails:n}),kt(pw,{term:r.verbatimElevation,showDetails:n}),kt(pw,{term:r.depth,showDetails:n}),kt(pw,{term:r.depthAccuracy,showDetails:n}),kt(pw,{term:r.minimumDepthInMeters,showDetails:n}),kt(pw,{term:r.maximumDepthInMeters,showDetails:n}),kt(pw,{term:r.verbatimDepth,showDetails:n}),kt(pw,{term:r.geodeticDatum,showDetails:n}),kt(pw,{term:r.verbatimCoordinates,showDetails:n}),kt(pw,{term:r.verbatimLatitude,showDetails:n}),kt(pw,{term:r.verbatimLongitude,showDetails:n}),(null==i||null===(e=i.gadm)||void 0===e?void 0:e.level0)&&kt(gw,{label:"occurrenceFieldNames.gadmClassification"},kt(Sg,{gadm:i.gadm})))):null}function Nw(t){var e=t.showAll,n=t.termMap;t.occurrence,t.setActiveImage;return["geologicalContextID","earliestEonOrLowestEonothem","latestEonOrHighestEonothem","earliestEraOrLowestErathem","latestEraOrHighestErathem","earliestPeriodOrLowestSystem","latestPeriodOrHighestSystem","earliestEpochOrLowestSeries","latestEpochOrHighestSeries","earliestAgeOrLowestStage","latestAgeOrHighestStage","lowestBiostratigraphicZone","highestBiostratigraphicZone","lithostratigraphicTerms","group","formation","member","bed"].find((function(t){return n[t]}))?kt(Iw,{label:"occurrenceDetails.groups.geologicalContext"},kt(uf,{css:Ux,breakpoint:800},kt(pw,{term:n.geologicalContextID,showDetails:e}),kt(pw,{term:n.earliestEonOrLowestEonothem,showDetails:e}),kt(pw,{term:n.latestEonOrHighestEonothem,showDetails:e}),kt(pw,{term:n.earliestEraOrLowestErathem,showDetails:e}),kt(pw,{term:n.latestEraOrHighestErathem,showDetails:e}),kt(pw,{term:n.earliestPeriodOrLowestSystem,showDetails:e}),kt(pw,{term:n.latestPeriodOrHighestSystem,showDetails:e}),kt(pw,{term:n.earliestEpochOrLowestSeries,showDetails:e}),kt(pw,{term:n.latestEpochOrHighestSeries,showDetails:e}),kt(pw,{term:n.earliestAgeOrLowestStage,showDetails:e}),kt(pw,{term:n.latestAgeOrHighestStage,showDetails:e}),kt(pw,{term:n.lowestBiostratigraphicZone,showDetails:e}),kt(pw,{term:n.highestBiostratigraphicZone,showDetails:e}),kt(pw,{term:n.lithostratigraphicTerms,showDetails:e}),kt(pw,{term:n.group,showDetails:e}),kt(pw,{term:n.formation,showDetails:e}),kt(pw,{term:n.member,showDetails:e}),kt(pw,{term:n.bed,showDetails:e}))):null}function jw(t){var e=t.showAll,n=t.termMap,r=t.occurrence;t.setActiveImage;return["identificationID","identificationQualifier","typeStatus","identifiedBy","identifiedByIDs","verbatimIdentification","dateIdentified","identificationReferences","identificationVerificationStatus","identificationRemarks"].find((function(t){return n[t]}))?kt(Iw,{label:"occurrenceDetails.groups.identification"},kt(uf,{css:Ux,breakpoint:800},kt(dw,{term:n.identificationID,showDetails:e}),kt(pw,{term:n.identificationQualifier,showDetails:e}),kt(mw,{term:n.typeStatus,showDetails:e,getEnum:function(t){return"enums.typeStatus.".concat(t)}}),kt(pw,{term:n.identifiedBy,showDetails:e}),kt(Xw,{showAll:e,termMap:n,occurrence:r}),kt(pw,{term:n.verbatimIdentification,showDetails:e}),kt(pw,{term:n.dateIdentified,showDetails:e}),kt(dw,{term:n.identificationReferences,showDetails:e}),kt(pw,{term:n.identificationVerificationStatus,showDetails:e}),kt(dw,{term:n.identificationRemark,showDetails:e}))):null}function Fw(t){var e=t.showAll,n=t.termMap,r=t.occurrence;t.setActiveImage;return["taxonID","scientificNameID","acceptedNameUsageID","parentNameUsageID","originalNameUsageID","nameAccordingToID","namePublishedInID","taxonConceptID","scientificName","acceptedNameUsage","parentNameUsage","originalNameUsage","nameAccordingTo","namePublishedIn","namePublishedInYear","higherClassification","kingdom","phylum","class","order","family","genus","subgenus","specificEpithet","infraspecificEpithet","taxonRank","verbatimTaxonRank","vernacularName","nomenclaturalCode","taxonomicStatus","nomenclaturalStatus","taxonRemarks","scientificNameAuthorship"].find((function(t){return n[t]}))?kt(Iw,{label:"occurrenceDetails.groups.taxon"},kt(uf,{css:Ux,breakpoint:800},kt(dw,{term:n.taxonID,showDetails:e}),kt(dw,{term:n.scientificNameID,showDetails:e}),kt(dw,{term:n.acceptedNameUsageID,showDetails:e}),kt(dw,{term:n.parentNameUsageID,showDetails:e}),kt(dw,{term:n.originalNameUsageID,showDetails:e}),kt(dw,{term:n.nameAccordingToID,showDetails:e}),kt(dw,{term:n.namePublishedInID,showDetails:e}),kt(dw,{term:n.taxonConceptID,showDetails:e}),kt(dw,{term:n.scientificName,showDetails:e}),kt(pw,{term:n.acceptedNameUsage,showDetails:e}),kt($w,{showAll:e,termMap:n,occurrence:r}),kt(pw,{term:n.parentNameUsage,showDetails:e}),kt(pw,{term:n.originalNameUsage,showDetails:e}),kt(pw,{term:n.nameAccordingTo,showDetails:e}),kt(pw,{term:n.namePublishedIn,showDetails:e}),kt(pw,{term:n.namePublishedInYear,showDetails:e}),kt(pw,{term:n.higherClassification,showDetails:e}),kt(pw,{term:n.kingdom,showDetails:e}),kt(pw,{term:n.phylum,showDetails:e}),kt(pw,{term:n.class,showDetails:e}),kt(pw,{term:n.order,showDetails:e}),kt(pw,{term:n.family,showDetails:e}),kt(pw,{term:n.genus,showDetails:e}),kt(pw,{term:n.subgenus,showDetails:e}),kt(pw,{term:n.specificEpithet,showDetails:e}),kt(pw,{term:n.infraspecificEpithet,showDetails:e}),kt(mw,{term:n.taxonRank,showDetails:e,getEnum:function(t){return"enums.taxonRank.".concat(t)}}),kt(pw,{term:n.verbatimTaxonRank,showDetails:e}),kt(pw,{term:n.vernacularName,showDetails:e}),kt(pw,{term:n.nomenclaturalCode,showDetails:e}),kt(mw,{term:n.taxonomicStatus,showDetails:e,getEnum:function(t){return"enums.taxonomicStatus.".concat(t)}}),kt(pw,{term:n.nomenclaturalStatus,showDetails:e}),kt(dw,{term:n.taxonRemarks,showDetails:e}),kt(pw,{term:n.scientificNameAuthorship,showDetails:e}))):null}function zw(t){var e=t.showAll,n=t.termMap;t.occurrence,t.setActiveImage;return kt(Iw,{label:"occurrenceDetails.groups.other"},kt(uf,{css:Ux,breakpoint:800},kt(pw,{term:n.abstract,showDetails:e}),kt(pw,{term:n.accessRights,showDetails:e}),kt(pw,{term:n.accrualMethod,showDetails:e}),kt(pw,{term:n.accrualPeriodicity,showDetails:e}),kt(pw,{term:n.accrualPolicy,showDetails:e}),kt(pw,{term:n.alternative,showDetails:e}),kt(pw,{term:n.audience,showDetails:e}),kt(pw,{term:n.available,showDetails:e}),kt(dw,{term:n.bibliographicCitation,showDetails:e}),kt(pw,{term:n.conformsTo,showDetails:e}),kt(pw,{term:n.contributor,showDetails:e}),kt(pw,{term:n.coverage,showDetails:e}),kt(pw,{term:n.created,showDetails:e}),kt(pw,{term:n.creator,showDetails:e}),kt(pw,{term:n.date,showDetails:e}),kt(pw,{term:n.dateAccepted,showDetails:e}),kt(pw,{term:n.dateCopyrighted,showDetails:e}),kt(pw,{term:n.dateSubmitted,showDetails:e}),kt(pw,{term:n.description,showDetails:e}),kt(pw,{term:n.educationLevel,showDetails:e}),kt(pw,{term:n.extent,showDetails:e}),kt(pw,{term:n.format,showDetails:e}),kt(pw,{term:n.hasFormat,showDetails:e}),kt(pw,{term:n.hasPart,showDetails:e}),kt(pw,{term:n.hasVersion,showDetails:e}),kt(dw,{term:n.identifier,showDetails:e}),kt(pw,{term:n.instructionalMethod,showDetails:e}),kt(pw,{term:n.isFormatOf,showDetails:e}),kt(pw,{term:n.isPartOf,showDetails:e}),kt(dw,{term:n.isReferencedBy,showDetails:e}),kt(dw,{term:n.isReplacedBy,showDetails:e}),kt(dw,{term:n.isRequiredBy,showDetails:e}),kt(dw,{term:n.isVersionOf,showDetails:e}),kt(pw,{term:n.issued,showDetails:e}),kt(pw,{term:n.language,showDetails:e}),kt(mw,{term:n.license,showDetails:e,getEnum:function(t){return"enums.license.".concat(t)}}),kt(pw,{term:n.mediator,showDetails:e}),kt(pw,{term:n.medium,showDetails:e}),kt(pw,{term:n.modified,showDetails:e}),kt(pw,{term:n.provenance,showDetails:e}),kt(dw,{term:n.publisher,showDetails:e}),kt(dw,{term:n.references,showDetails:e}),kt(dw,{term:n.relation,showDetails:e}),kt(dw,{term:n.replaces,showDetails:e}),kt(dw,{term:n.requires,showDetails:e}),kt(pw,{term:n.rights,showDetails:e}),kt(pw,{term:n.rightsHolder,showDetails:e}),kt(dw,{term:n.source,showDetails:e}),kt(pw,{term:n.spatial,showDetails:e}),kt(pw,{term:n.subject,showDetails:e}),kt(pw,{term:n.tableOfContents,showDetails:e}),kt(pw,{term:n.temporal,showDetails:e}),kt(pw,{term:n.title,showDetails:e}),kt(pw,{term:n.type,showDetails:e}),kt(pw,{term:n.valid,showDetails:e}),kt(gw,{label:"occurrenceFieldNames.gbifID"},n.gbifID.value)))}function Bw(t){var e=t.occurrence;return kt(Iw,{label:"phrases.citation"},kt(uf,{css:Ux,breakpoint:800},kt(Sw,null,kt(ud,{id:"phrases.citeAs"})),kt(Tw,null,e.dataset.citation.text," https://gbif.org/occurrence/",e.key)))}function Uw(t){var e,n,r=t.termMap,i=null==r||null===(e=r.dynamicProperties)||void 0===e?void 0:e.value;if(!i)return null;try{var o=JSON.parse(i);n=kt(uf,null,Object.keys(o).map((function(t){return kt(c.a.Fragment,{key:t},kt(Sw,null,t),kt(Tw,null,o[t]))})))}catch(t){n=i}return kt(c.a.Fragment,null,kt(Sw,null,kt(ud,{id:"occurrenceFieldNames.dynamicProperties",defaultMessage:"Dynamic properties"})),kt(Tw,null,n))}function Gw(t){var e=t.occurrence,n=t.setActiveImage;return e.stillImageCount<1?null:kt(c.a.Fragment,null,kt(Sw,null,kt(ud,{id:"occurrenceFieldNames.images",defaultMessage:"Images"})),kt("div",null,kt(Tw,null,kt(Fp,null,e.stillImages.map((function(t,e){return kt(Lp,{key:e,src:t.identifier,height:120,onClick:function(){return n(t)}})}))))))}function Vw(t){var e=t.termMap,n=t.showAll,r=t.occurrence,i=e.institutionCode,o=e.institutionID,a=r.institution;return i||o||a?kt(c.a.Fragment,null,kt(Sw,null,kt(ud,{id:"occurrenceDetails.institution",defaultMessage:"Institution"})),kt("div",null,kt(Tw,null,kt(uf,{horizontal:!1},kt(Hw,{occurrence:r}),kt(pw,{term:e.institutionCode,showDetails:n}),kt(dw,{term:e.institutionID,showDetails:n}),kt(pw,{term:e.ownerInstitutionCode,showDetails:n}))))):null}function qw(t){var e=t.termMap,n=t.showAll,r=t.occurrence,i=e.collectionCode,o=e.collectionID,a=r.collection;return i||o||a?kt(c.a.Fragment,null,kt(Sw,null,kt(ud,{id:"occurrenceDetails.collection",defaultMessage:"Collection"})),kt("div",null,kt(Tw,null,kt(uf,{horizontal:!1},kt(Ww,{occurrence:r}),kt(pw,{term:e.collectionCode,showDetails:n}),kt(dw,{term:e.collectionID,showDetails:n}))))):null}function Hw(t){var e,n,r=t.occurrence;return null!=r&&null!==(e=r.institution)&&void 0!==e&&e.key?kt(gw,{label:"occurrenceDetails.institutionGrSciColl"},kt(Oy,{type:"institutionKey",id:null==r||null===(n=r.institution)||void 0===n?void 0:n.key},r.institution.name)):null}function Ww(t){var e,n,r=t.occurrence;return null!=r&&null!==(e=r.collection)&&void 0!==e&&e.key?kt(gw,{label:"occurrenceDetails.collectionGrSciColl"},kt(Oy,{type:"collectionKey",id:null==r||null===(n=r.collection)||void 0===n?void 0:n.key},r.collection.name)):null}function Zw(t){var e=t.termMap,n=t.showAll,r=t.occurrence;return kt(fw,{term:e.scientificName,showDetails:n},kt("span",{dangerouslySetInnerHTML:{__html:r.gbifClassification.usage.formattedName}}))}function $w(t){var e,n=t.termMap,r=t.showAll,i=t.occurrence;return null!=i&&null!==(e=i.gbifClassification)&&void 0!==e&&e.synonym?kt(fw,{term:n.acceptedScientificName,showDetails:r},kt("span",{dangerouslySetInnerHTML:{__html:i.gbifClassification.acceptedUsage.formattedName}})):null}function Kw(t){var e=t.termMap,n=t.showAll,r=t.occurrence;return Xx()(r.recordedByIDs,r.identifiedByIDs)?kt(Jw,{label:"occurrenceDetails.recordedAndIdentifiedBy",value:r.recordedByIDs}):kt(c.a.Fragment,null,kt(Yw,{showAll:n,termMap:e,occurrence:r}),kt(Xw,{showAll:n,termMap:e,occurrence:r}))}function Yw(t){t.termMap,t.showAll;var e=t.occurrence;return kt(Jw,{label:"occurrenceFieldNames.recordedByID",value:e.recordedByIDs})}function Xw(t){t.termMap,t.showAll;var e=t.occurrence;return kt(Jw,{label:"occurrenceFieldNames.identifiedByID",value:e.identifiedByIDs})}function Jw(t){var e=t.label,n=t.value;return null!=n&&n[0]?kt(gw,{label:e},kt("ul",{style:{listStyle:"none",padding:0,margin:0}},n.map((function(t){return t.person?kt("li",{key:t.value,style:{marginBottom:4}},kt(Ew,{agent:t})):kt("li",{key:t.value},t.value)})))):null}var Qw=["data","activeImage","setActiveImage","className"],tE=uf.Term,eE=uf.Value;function nE(t){var e,n,r,i,o,a=t.data,u=t.activeImage,h=t.setActiveImage,d=(t.className,s()(t,Qw),Object(l.useContext)(Zt));return Object(l.useEffect)((function(){var t,e;null!=a&&null!==(t=a.occurrence)&&void 0!==t&&t.stillImages&&h(null==a||null===(e=a.occurrence)||void 0===e?void 0:e.stillImages[0])}),[a]),null!=a&&null!==(e=a.occurrence)&&void 0!==e&&e.stillImages?kt("div",{style:{padding:"12px 0"}},kt(Kx,{data:a}),u&&kt(c.a.Fragment,null,kt("div",{css:Bx({theme:d})},kt(cp,{src:u.identifier,h:"450",style:{maxWidth:"100%",maxHeight:450}})),kt(Iw,{label:"occurrenceDetails.about",defaultOpen:1===(null==a||null===(n=a.occurrence)||void 0===n||null===(r=n.stillImages)||void 0===r?void 0:r.length)},kt(uf,{css:Ux},["description","type","format","identifier","created","creator","license","publisher","references","rightsholder"].filter((function(t){return!!u[t]})).map((function(t){return kt(c.a.Fragment,{key:t},kt(tE,null,kt(ud,{id:"occurrenceFieldNames.".concat(t)})),kt(eE,null,kt(rg,{text:u[t]})))}))))),(null==a||null===(i=a.occurrence)||void 0===i||null===(o=i.stillImages)||void 0===o?void 0:o.length)>1&&kt(Iw,{label:"occurrenceDetails.morePhotos",defaultOpen:!0},kt(Fp,null,a.occurrence.stillImages.map((function(t,e){return kt(Lp,{onSelect:function(){return h(t)},key:e,src:t.identifier,height:120},t===u?kt("span",{style:{background:"black",color:"white",padding:"5px 5px 2px 5px"}},kt(On,null)):null)})),kt("div",null)))):kt("div",null,"no images to display")}var rE=["data","isSpecimen","loading","fieldGroups","setActiveImage","error","className"];function iE(t){var e=t.data,n=void 0===e?{}:e,r=(t.isSpecimen,t.loading),i=(t.fieldGroups,t.setActiveImage),o=t.error,a=(t.className,s()(t,rE),Object(l.useContext)(Zt)),c=Object(l.useState)(!1),u=Nt()(c,2),h=u[0],d=u[1],p=n.occurrence;return r||!p?kt("h2",null,"Loading"):kt(Zl,{direction:"column",wrap:"nowrap",style:{maxHeight:"100%",overflow:"hidden"}},kt($l,{style:{padding:"12px 0",paddingBottom:50,overflow:"auto"},grow:!0},kt(Kx,{data:n,error:o}),kt(Ow,{occurrence:p,showAll:h,setActiveImage:i})),kt($l,{css:Fx({theme:a}),grow:!1},kt(Zl,{justifyContent:"flex-end",halfGutter:8},kt($l,{grow:!1},kt(ud,{id:"occurrenceDetails.showAllFields"})," ",kt(_r,{checked:h,onChange:function(){return d(!h)},direction:"top",tip:"Shortcut s"})))))}var oE=n(64),aE=n.n(oE);const sE="function"==typeof atob,lE="function"==typeof btoa,cE="function"==typeof Buffer,uE="function"==typeof TextDecoder?new TextDecoder:void 0,hE="function"==typeof TextEncoder?new TextEncoder:void 0,dE=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),pE=(t=>{let e={};return t.forEach((t,n)=>e[t]=n),e})(dE),fE=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,mE=String.fromCharCode.bind(String),gE="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):(t,e=(t=>t))=>new Uint8Array(Array.prototype.slice.call(t,0).map(e)),yE=t=>t.replace(/=/g,"").replace(/[+\/]/g,t=>"+"==t?"-":"_"),vE=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),_E=t=>{let e,n,r,i,o="";const a=t.length%3;for(let a=0;a<t.length;){if((n=t.charCodeAt(a++))>255||(r=t.charCodeAt(a++))>255||(i=t.charCodeAt(a++))>255)throw new TypeError("invalid character found");e=n<<16|r<<8|i,o+=dE[e>>18&63]+dE[e>>12&63]+dE[e>>6&63]+dE[63&e]}return a?o.slice(0,a-3)+"===".substring(a):o},bE=lE?t=>btoa(t):cE?t=>Buffer.from(t,"binary").toString("base64"):_E,xE=cE?t=>Buffer.from(t).toString("base64"):t=>{let e=[];for(let n=0,r=t.length;n<r;n+=4096)e.push(mE.apply(null,t.subarray(n,n+4096)));return bE(e.join(""))},wE=t=>{if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?mE(192|e>>>6)+mE(128|63&e):mE(224|e>>>12&15)+mE(128|e>>>6&63)+mE(128|63&e);var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return mE(240|e>>>18&7)+mE(128|e>>>12&63)+mE(128|e>>>6&63)+mE(128|63&e)},EE=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,CE=t=>t.replace(EE,wE),SE=cE?t=>Buffer.from(t,"utf8").toString("base64"):hE?t=>xE(hE.encode(t)):t=>bE(CE(t)),TE=(t,e=!1)=>e?yE(SE(t)):SE(t),OE=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,IE=t=>{switch(t.length){case 4:var e=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return mE(55296+(e>>>10))+mE(56320+(1023&e));case 3:return mE((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return mE((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},AE=t=>t.replace(OE,IE),ME=t=>{if(t=t.replace(/\s+/g,""),!fE.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(3&t.length));let e,n,r,i="";for(let o=0;o<t.length;)e=pE[t.charAt(o++)]<<18|pE[t.charAt(o++)]<<12|(n=pE[t.charAt(o++)])<<6|(r=pE[t.charAt(o++)]),i+=64===n?mE(e>>16&255):64===r?mE(e>>16&255,e>>8&255):mE(e>>16&255,e>>8&255,255&e);return i},kE=sE?t=>atob(vE(t)):cE?t=>Buffer.from(t,"base64").toString("binary"):ME,PE=cE?t=>gE(Buffer.from(t,"base64")):t=>gE(kE(t),t=>t.charCodeAt(0)),DE=cE?t=>Buffer.from(t,"base64").toString("utf8"):uE?t=>uE.decode(PE(t)):t=>AE(kE(t)),RE=t=>vE(t.replace(/[-_]/g,t=>"-"==t?"+":"/")),LE=t=>DE(RE(t)),NE=TE,jE=LE;var FE={parse:function(t){try{return JSON.parse(t)}catch(e){return t}},stringify:function(t){return"object"===zb()(t)?JSON.stringify(t):t}};var zE=["data","loading","activeImage","setActiveImage","className"],BE=["original","reasons","related"],UE=uf.Term,GE=uf.Value;function VE(t){var e,n,r=t.data,i=(t.loading,t.activeImage,t.setActiveImage,t.className,s()(t,zE),function(t){var e=t.param,n=t.dataType,r=void 0===n?FE:n,i=t.replaceState,o=void 0!==i&&i,a=t.defaultValue,s=t.base64encode,c=void 0!==s&&s,u=(t.stripEmptyKeys,t.initialState),h=Object(l.useState)(),d=Nt()(h,2),p=d[0],f=d[1],m=_l(),g=bl(),y=o?"replace":"push",v=Object(l.useCallback)((function(t){var n=h_.a.parse(g.search),i=h_.a.parse(g.search);if(console.log(g.search),!Xx()(t,n[e])){if(aE()(t)&&(Kb()(t.must)&&delete t.must,Kb()(t.must_not)&&delete t.must_not,Kb()(t)&&(t=void 0)),t){var o=Array.isArray(t)?t.map((function(t){return r.stringify(t)})):r.stringify(t);c&&(o=NE(o)),i[e]=o}else delete i[e];void 0!==a&&t===a&&delete i[e],Xx()(i[e],n[e])||(m[y](g.pathname+"?"+h_.a.stringify(i)),console.log("dep changed in useCallback"))}}),[g,m]);return Object(l.useEffect)((function(){var t=function(t){var n=t.location,i=h_.a.parse(null==n?void 0:n.search)[e];c&&i&&(i=jE(i)),i=r.parse(i);var o=Array.isArray(i)?i.map((function(t){return r.parse(t)})):r.parse(i);void 0===o&&void 0!==a&&(o=a),f(o)};t({location:g});var n=m.listen(t);return u&&v(u),console.log("dep changed in useEffect"),function(){n(),delete h_.a.parse(g.search)[e]}}),[]),[p,v]}({param:"entity"})),o=Nt()(i,1)[0],a=(Object(l.useContext)(Zt),zv(HE,{lazyLoad:!0})),u=a.data,h=(a.error,a.loading),d=a.load;Object(l.useEffect)((function(){void 0!==r&&d({variables:{key:r.occurrence.key}})}),[r]);var p=null==u||null===(e=u.occurrence)||void 0===e||null===(n=e.related)||void 0===n?void 0:n.relatedOccurrences;return r&&!h&&p?kt("div",{style:{padding:"12px 16px"}},kt(Kx,{data:r}),kt("main",{style:{marginTop:24}},p.map((function(t){return t.occurrence?kt(qE,{key:t.occurrence.key,onClick:function(e){return o(t.occurrence.key)},related:t.occurrence,reasons:t.reasons,original:r.occurrence}):kt("div",{style:{padding:30,background:"tomato",color:"white",borderRadius:4}},"This record has since been removed from the dataset.",kt("div",null,kt(uf,{style:{marginTop:12},horizontal:!0,dense:!0},kt(UE,{style:{color:"white"}},"Publisher"),kt(GE,null,t.stub.publishingOrgName),kt(UE,{style:{color:"white"}},"Dataset"),kt(GE,null,t.stub.datasetName),t.stub.catalogNumber&&kt(c.a.Fragment,null,kt(UE,{style:{color:"white"}},"Catalog number"),kt(GE,null,t.stub.catalogNumber)),t.stub.occurrenceID&&kt(c.a.Fragment,null,kt(UE,{style:{color:"white"}},"Occurrence ID"),kt(GE,null,t.stub.occurrenceID)))))})))):kt("div",null,"Loading")}function qE(t){t.original;var e,n,r,i,a,c=t.reasons,u=t.related,h=s()(t,BE),d=Object(l.useContext)(Zt);return kt("article",o()({css:(a={theme:d},Pt("margin-bottom:24px;border:1px solid ",a.theme.paperBorderColor,";box-shadow:0 2px 1px 1px #0000000a;",""))},h),kt(Zl,{wrap:"nowrap",halfGutter:6,style:{padding:12}},kt($l,null,kt("h4",{style:{margin:0},dangerouslySetInnerHTML:{__html:u.gbifClassification.usage.formattedName}}),kt("div",{css:Sx({theme:d})},kt(zf,{css:Ex({theme:d}),eventDate:u.eventDate,countryCode:u.countryCode,locality:u.locality}),kt(zf,{css:Ex({theme:d}),stillImageCount:u.stillImageCount,movingImageCount:u.movingImageCount,soundCount:u.soundCount,typeStatus:u.typeStatus,basisOfRecord:u.basisOfRecord,isSequenced:u.volatile.features.isSequenced,isTreament:u.volatile.features.isTreament,isClustered:u.volatile.features.isClustered,isSamplingEvent:u.volatile.features.isSamplingEvent,issueCount:null===(e=u.issues)||void 0===e?void 0:e.length})),kt("div",null,kt(uf,{style:{fontSize:12},horizontal:!0,dense:!0},kt(UE,null,"Publisher"),kt(GE,null,u.publisherTitle),kt(UE,null,"Dataset"),kt(GE,null,u.datasetTitle)))),kt($l,{grow:!1,shrink:!1},kt("div",null,(null==u||null===(n=u.primaryImage)||void 0===n?void 0:n.identifier)&&kt(cp,{style:{width:150,height:150,display:"block"},src:u.primaryImage.identifier,w:180,h:180}),!(null!=u&&null!==(r=u.primaryImage)&&void 0!==r&&r.identifier)&&u.coordinates&&kt("img",{style:{width:150,height:150,display:"block"},src:"https://api.mapbox.com/styles/v1/mapbox/light-v9/static/pin-s-circle+285A98(".concat(u.coordinates.lon,",").concat(u.coordinates.lat,")/").concat(u.coordinates.lon,",").concat(u.coordinates.lat,",8,0/180x180@2x?access_token=pk.eyJ1IjoiaG9mZnQiLCJhIjoiY2llaGNtaGRiMDAxeHNxbThnNDV6MG95OSJ9.p6Dj5S7iN-Mmxic6Z03BEA")})))),kt("div",{css:(i={theme:d},Pt("font-size:13px;padding:8px 12px;border-top:1px solid ",i.theme.paperBorderColor,";margin-bottom:-4px;",""))},kt(uf,{style:{fontSize:12},horizontal:!0,dense:!0},kt(UE,null,"Similarities"),kt(GE,null,c.map((function(t){return kt("span",{css:qx({theme:d}),key:t},aw(t))}))))))}var HE="\nquery occurrence($key: ID!){\n  occurrence(key: $key) {\n  \trelated {\n      relatedOccurrences {\n        reasons\n        stub {\n          gbifId\n          occurrenceID\n          catalogNumber\n          publishingOrgKey\n          publishingOrgName\n          datasetKey\n          datasetName\n        }\n        occurrence {\n          key\n          basisOfRecord\n          datasetTitle\n          publisherTitle\n          coordinates\n          typeStatus\n          soundCount\n          stillImageCount\n          movingImageCount\n          eventDate\n          primaryImage {\n            identifier\n          }\n          gbifClassification {\n            usage {\n              formattedName\n            }\n          }\n          volatile {\n            features {\n              isSequenced\n              isSamplingEvent\n              isTreament\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",WE=n(111);function ZE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $E(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ZE(Object(n),!0).forEach((function(e){Ft()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZE(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var KE={dataset:{href:function(t){return"https://www.gbif.org/dataset/".concat(t.datasetKey)},key:"datasetKey"},scientificName:{href:function(t){var e,n;return"https://www.gbif.org/species/".concat(null===(e=t.gbifClassification)||void 0===e||null===(n=e.usage)||void 0===n?void 0:n.key)}},acceptedScientificName:{href:function(t){var e,n;return"https://www.gbif.org/species/".concat(null===(e=t.gbifClassification)||void 0===e||null===(n=e.acceptedUsage)||void 0===n?void 0:n.key)}}},YE=Object.keys(WE).reduce((function(t,e){return t[e]="default"===WE[e]?KE[e]:$E($E({},WE[e]),{},{href:function(t){return WE[e].template.replace("$key",t[WE[e].key])}}),t}),{}),XE=c.a.createContext(YE),JE=["onImageChange","onCloseRequest","id","defaultTab","className","style"],QE=Fl.TabList,tC=Fl.Tab,eC=Fl.TabPanel,nC=Fl.TapSeperator;function rC(t){t.onImageChange;var e,n,r,i,o=t.onCloseRequest,a=t.id,u=t.defaultTab,h=(t.className,t.style),d=(s()(t,JE),Object(l.useContext)(XE)),p=Object.keys(d).map((function(t){var e;return null===(e=d[t])||void 0===e?void 0:e.key})).filter((function(t){return!!t})).join("\n"),f=zv(iC(p),{lazyLoad:!0}),m=f.data,g=f.error,y=f.loading,v=f.load,_=Object(l.useState)(u||"details"),b=Nt()(_,2),x=b[0],w=b[1],E=Object(l.useContext)(Zt),C=Object(l.useState)(),S=Nt()(C,2),T=S[0],O=S[1],I=Object(l.useState)(),A=Nt()(I,2),M=A[0],k=A[1];Object(l.useEffect)((function(){void 0!==a&&v({variables:{key:a}})}),[a]),Object(l.useEffect)((function(){var t;y||"images"!==x||null!=m&&null!==(t=m.occurrence)&&void 0!==t&&t.stillImages||w("details"),!y&&null!=m&&m.occurrence&&k(m.occurrence.groups)}),[m,y]);var P=Tb()(m,"occurrence.basisOfRecord","").indexOf("SPECIMEN")>-1;return kt(Fl,{activeId:x,onChange:function(t){return w(t)}},kt(Zl,{wrap:"nowrap",style:h,css:Px({theme:E})},kt($l,{shrink:!1,grow:!1,css:Dx({theme:E})},kt(QE,{"aria-label":"Images",style:{paddingTop:"12px"},vertical:!0},o&&kt(c.a.Fragment,null,kt(tC,{direction:"left",onClick:o},kt(tr,null)),kt(nC,{vertical:!0})),kt(tC,{tabId:"details",direction:"left"},kt(Mn,null)),(null==m||null===(e=m.occurrence)||void 0===e?void 0:e.stillImageCount)>0&&kt(tC,{tabId:"images",direction:"left"},kt(Hn,null)),(null==m||null===(n=m.occurrence)||void 0===n||null===(r=n.volatile)||void 0===r||null===(i=r.features)||void 0===i?void 0:i.isClustered)&&kt(tC,{tabId:"cluster",direction:"left"},kt(xf,null)))),kt($l,{shrink:!1,grow:!1,css:Lx({theme:E})},kt(eC,{tabId:"images"},kt(nE,{activeImage:T,setActiveImage:O,data:m,loading:y,error:g})),kt(eC,{tabId:"details",style:{height:"100%"}},kt(iE,{setActiveImage:function(t){O(t),w("images")},fieldGroups:M,isSpecimen:P,data:m,loading:y,error:g})),kt(eC,{tabId:"cluster"},kt(VE,{data:m,loading:y,error:g})))))}var iC=function(t){return"\nquery occurrence($key: ID!){\n  occurrence(key: $key) {\n    key\n    coordinates\n    countryCode\n    eventDate\n    typeStatus\n    issues\n    ".concat(t||"","\n    institution {\n      name\n      key\n    }\n    collection {\n      name\n      key\n    }\n    volatile {\n      globe(sphere: false, land: false, graticule: false) {\n        svg\n        lat\n        lon\n      }\n      features {\n        isSpecimen\n        isTreament\n        isSequenced\n        isClustered\n        isSamplingEvent\n      }\n    }\n    datasetKey,\n    datasetTitle\n    publishingOrgKey,\n    publisherTitle,\n    dataset {\n      citation {\n        text\n      }\n    }\n    institutionCode\n    recordedByIDs {\n      value\n      person(expand: true) {\n        name\n        birthDate\n        deathDate\n        image\n      }\n    }\n    identifiedByIDs {\n      value\n      person(expand: true) {\n        name\n        birthDate\n        deathDate\n        image\n      }\n    }\n\n    gadm\n\n    stillImageCount\n    movingImageCount\n    soundCount\n    stillImages {\n      type\n      format\n      identifier\n      created\n      creator\n      license\n      publisher\n      references\n      rightsHolder\n      description\n    }\n\n    gbifClassification {\n      kingdom\n      kingdomKey\n      phylum\n      phylumKey\n      class\n      classKey\n      order\n      orderKey\n      family\n      familyKey\n      genus\n      genusKey\n      species\n      speciesKey\n      synonym\n      classification {\n        key\n        rank\n        name\n      }\n      usage {\n        rank\n        formattedName\n        key\n      }\n      acceptedUsage {\n        formattedName\n        key\n      }\n    }\n\n    primaryImage {\n      identifier\n    }\n\n    terms {\n      simpleName\n      verbatim\n      value\n      htmlValue\n      remarks\n      issues\n    }\n  }\n}\n")},oC=["theme"];var aC={name:"jvsac8",styles:".gbif-header-location{font-size:13px;display:flex;align-items:center;margin-top:8px;}"},sC=function(t){o()({},t);return aC},lC={name:"1dfk8o8",styles:"border-left:2px solid orange;margin-left:6px;height:1em;padding-left:6px"},cC=function(t){o()({},t);return lC},uC={name:"1wphcz4",styles:"font-size:11px;margin-bottom:4px"},hC=function(t){o()({},t);return uC},dC=function(t){var e=t.theme;s()(t,oC);return Pt("background:",e.paperBackground500,";position:relative;","")},pC=function(t){var e=t.theme;return Pt("border:1px solid ",e.paperBorderColor,";border-width:0 1px;color:",e.darkTheme?e.color600:e.color900,";","")},fC={name:"jtrtuq",styles:"overflow:auto;flex:1 1 auto;>div{max-width:100%;}"},mC=function(t){t.theme;return fC},gC={name:"9mdwn1",styles:">img{margin-right:24px;}>h3{display:inline-block;margin:0;}"},yC=function(t){t.theme;return gC},vC=["data","loading","error"],_C=uf.Term,bC=uf.Value;function xC(t){var e,n,r=t.data,i=void 0===r?{}:r,o=(t.loading,t.error,s()(t,vC),Object(l.useContext)(Zt),i.dataset);return null!=i&&i.dataset?kt(Kp,{summary:"About",defaultOpen:!0},kt(uf,{style:{fontSize:13,marginBottom:12},horizontal:!0},o.description&&kt(c.a.Fragment,null,kt(_C,null,"Description"),kt(bC,null,kt(rg,{text:o.description}))),(null==o||null===(e=o.temporalCoverages)||void 0===e?void 0:e.length)>0&&kt(c.a.Fragment,null,kt(_C,null,"Temporal scope"),kt(bC,null,o.temporalCoverages.map(EC))),(null==o||null===(n=o.geographicCoverages)||void 0===n?void 0:n.length)>0&&kt(c.a.Fragment,null,kt(_C,null,"Geographic scope"),kt(bC,null,o.geographicCoverages.map(wC))))):null}function wC(t){var e,n;if(null!=t&&null!==(e=t.boundingBox)&&void 0!==e&&e.minLatitude){var r=t.boundingBox,i=r.minLongitude,o=r.minLatitude,a=r.maxLongitude,s=r.maxLatitude;n={type:"Polygon",coordinates:[[[i,o],[a,o],[a,s],[i,s],[i,o]]]}}return kt(uf,null,kt(_C,null,"Description"),kt(bC,null,t.description),n&&kt(c.a.Fragment,null,kt("img",{style:{marginTop:24,maxWidth:"100%"},src:"https://api.mapbox.com/styles/v1/mapbox/light-v10/static/geojson(".concat(encodeURIComponent(JSON.stringify(n)),")/auto/600x300@2x?access_token=pk.eyJ1IjoiaG9mZnQiLCJhIjoiY2llaGNtaGRiMDAxeHNxbThnNDV6MG95OSJ9.p6Dj5S7iN-Mmxic6Z03BEA")}),kt(uf,{horizontal:!0},kt(_C,null,"Latitude"),kt(bC,null,"From ",t.boundingBox.minLatitude," to ",t.boundingBox.maxLatitude),kt(_C,null,"Longitude"),kt(bC,null,"From ",t.boundingBox.minLongitude," to ",t.boundingBox.maxLongitude))))}function EC(t){return kt(uf,null,kt(_C,null,t.type),"range"==t["@type"]&&kt(bC,null,kt(fd,{value:t.start,year:"numeric",month:"long",day:"2-digit"})," - ",kt(fd,{value:t.end,year:"numeric",month:"long",day:"2-digit"})),"single"==t["@type"]&&kt(bC,null,kt(fd,{value:t.date,year:"numeric",month:"long",day:"2-digit"})),"verbatim"==t["@type"]&&kt(bC,null,t.period))}var CC=["url","style"];function SC(t){var e=t.url,n=t.style,r=void 0===n?{maxHeight:"64px",maxWidth:"100px"}:n,i=(s()(t,CC),Object(l.useState)(!0)),o=Nt()(i,2),a=o[0],c=o[1],u=Object(l.useState)(!0),h=Nt()(u,2),d=h[0],p=h[1];return d||!a?kt("img",{style:r,src:e,onLoad:function(){c(!1),p(!1)},onError:function(){c(!0),p(!1)}}):null}var TC=n(248),OC=n.n(TC),IC=["url"];function AC(t){var e=t.url;s()(t,IC);if(!e)return kt(ud,{id:"enums.license.UNSPECIFIED",defaultMessage:"Unspecified"});if(!MC(e))return kt(ud,{id:"enums.license.UNSPECIFIED",defaultMessage:"Unspecified"});switch(e){case"http://creativecommons.org/publicdomain/zero/1.0/legalcode":return kt("a",{href:e},kt(ud,{id:"enums.license.CC0_1_0",defaultMessage:"CC0_1_0"}));case"http://creativecommons.org/licenses/by/4.0/legalcode":return kt("a",{href:e},kt(ud,{id:"enums.license.CC_BY_4_0",defaultMessage:"CC_BY_4_0"}));case"http://creativecommons.org/licenses/by-nc/4.0/legalcode":return kt("a",{href:e},kt(ud,{id:"enums.license.CC_BY_NC_4_0",defaultMessage:"CC_BY_NC_4_0"}));default:return kt(ud,{id:"enums.license.UNSUPPORTED",defaultMessage:"UNSUPPORTED"})}}var MC=function(t){return"string"==typeof t&&OC()({exact:!0}).test(t)},kC=["data","loading","error"],PC=uf.Term,DC=uf.Value;function RC(t){var e,n,r,i,o,a,u,h,d=t.data,p=(t.loading,t.error,s()(t,kC),Object(l.useContext)(Zt)),f=null==d?void 0:d.dataset;return kt(c.a.Fragment,null,kt(Zl,null,kt("div",{css:hC({theme:p})},"Dataset",kt("span",{css:cC({theme:p})},kt(fd,{value:null==f?void 0:f.created,year:"numeric",month:"long",day:"2-digit"})))),kt(Zl,{wrap:"no-wrap",css:sC({theme:p})},kt($l,{grow:!0},kt("div",{css:yC({theme:p})},kt("h3",null,null==d||null===(e=d.dataset)||void 0===e?void 0:e.title)),(null==d||null===(n=d.dataset)||void 0===n?void 0:n.volatileContributors)&&LC(d.dataset,p)),kt($l,null,(null==d||null===(r=d.dataset)||void 0===r?void 0:r.logoUrl)&&kt(SC,{url:d.dataset.logoUrl}))),kt(Zl,null,kt(uf,{style:{fontSize:13,marginBottom:12},horizontal:!0},(null==d||null===(i=d.dataset)||void 0===i?void 0:i.publishingOrganizationKey)&&(null==d||null===(o=d.dataset)||void 0===o?void 0:o.publishingOrganizationTitle)&&kt(c.a.Fragment,null," ",kt(PC,null,kt(ud,{id:"dataset.publishBy",defaultMessage:"Published by"})),kt(DC,null,kt("a",{href:"https://www.gbif.org/publisher/".concat(null==d||null===(a=d.dataset)||void 0===a?void 0:a.publishingOrganizationKey)},null==d||null===(u=d.dataset)||void 0===u?void 0:u.publishingOrganizationTitle))),(null==d||null===(h=d.dataset)||void 0===h?void 0:h.license)&&kt(c.a.Fragment,null," ",kt(PC,null,kt(ud,{id:"license",defaultMessage:"License"})),kt(DC,null,kt(AC,{url:d.dataset.license}))))))}var LC=function(t,e){var n;if(!t)return null;var r=(null===(n=t.volatileContributors)||void 0===n?void 0:n.length)>0?t.volatileContributors.filter((function(t){return t._highlighted})):null;return r&&0!==r.length?kt("p",{style:{fontSize:"14px"}},r.map((function(t){return"".concat(t.firstName?t.firstName+" ":"").concat(t.lastName)})).join(" • ")):null},NC=["data","loading","error"],jC=uf.Term,FC=uf.Value;function zC(t){var e,n=t.data,r=void 0===n?{}:n,i=(t.loading,t.error,s()(t,NC),Object(l.useContext)(Zt),r.dataset);return(null==i||null===(e=i.volatileContributors)||void 0===e?void 0:e.length)>0?kt(Kp,{summary:"Contacts",defaultOpen:!0},i.volatileContributors.map(BC)):null}function BC(t){var e;return kt(uf,{style:{fontSize:13,marginBottom:12},horizontal:!0,key:t.type+t.firstName+t.lastName},kt(jC,null,t.roles&&t.roles.map((function(t){return kt("div",{key:t},kt(ud,{id:"enums.role.".concat(t),defaultMessage:t}))}))),kt(FC,null,(t.firstName||t.lastName)&&kt("div",null,t.firstName," ",t.lastName),t.position&&kt("div",null,t.position),(null==t||null===(e=t.userId)||void 0===e?void 0:e.length)>0&&t.userId.map((function(t){return kt(rg,{text:t,key:t})})),t.organization&&kt("div",null,t.organization),t.address&&kt("div",null,t.address)))}var UC=["data","loading","error"],GC=uf.Term,VC=uf.Value;function qC(t){var e,n=t.data,r=void 0===n?{}:n,i=(t.loading,t.error,s()(t,UC),r.dataset);return(null==i||null===(e=i.bibliographicCitations)||void 0===e?void 0:e.length)>0?kt(Kp,{summary:"Bibliography",defaultOpen:!0},i.bibliographicCitations.map(HC)):null}function HC(t){return kt(uf,{style:{fontSize:13,marginBottom:12},horizontal:!0,key:t.text},kt(GC,null),kt(VC,null,t.text&&kt("div",null,kt(rg,{text:t.text})),t.identifier&&kt("div",null,kt(rg,{text:t.identifier}))))}var WC=["data","loading","error"],ZC=uf.Term,$C=uf.Value;function KC(t){var e,n,r,i,o,a,l,u=t.data,h=void 0===u?{}:u,d=(t.loading,t.error,s()(t,WC),h.dataset);return null!=h&&null!==(e=h.dataset)&&void 0!==e&&e.samplingDescription?kt(Kp,{summary:"Sampling",defaultOpen:!0},kt(uf,{style:{fontSize:13,marginBottom:12},horizontal:!0},(null===(n=d.samplingDescription)||void 0===n?void 0:n.sampling)&&kt(c.a.Fragment,null,kt(ZC,null),kt($C,null,kt(rg,{text:d.samplingDescription.sampling}))),(null===(r=d.samplingDescription)||void 0===r?void 0:r.studyExtent)&&kt(c.a.Fragment,null,kt(ZC,null,kt(ud,{id:"dataset.samplingDescription.studyExtent",defaultMessage:"Study extent"})),kt($C,null,kt(rg,{text:d.samplingDescription.studyExtent}))),(null===(i=d.samplingDescription)||void 0===i?void 0:i.qualityControl)&&kt(c.a.Fragment,null,kt(ZC,null,kt(ud,{id:"dataset.samplingDescription.qualityControl",defaultMessage:"Quality control"})),kt($C,null,kt(rg,{text:d.samplingDescription.qualityControl}))),(null===(o=d.samplingDescription)||void 0===o?void 0:o.methodSteps)&&(null===(a=d.samplingDescription)||void 0===a||null===(l=a.methodSteps)||void 0===l?void 0:l.length)>0&&kt(c.a.Fragment,null,kt(ZC,null,kt(ud,{id:"dataset.samplingDescription.methodSteps",defaultMessage:"Method steps"})),kt($C,null,kt("ol",{style:{padding:"0px",margin:0}},d.samplingDescription.methodSteps.map((function(t,e){return kt("li",{key:t,style:e<d.samplingDescription.methodSteps.length-1?{marginBottom:"12px"}:null},kt(rg,{text:t}))}))))))):null}var YC=["data","loading","error"],XC=uf.Term,JC=uf.Value;function QC(t){var e,n=t.data,r=void 0===n?{}:n,i=(t.loading,t.error,s()(t,YC),r.dataset);return null!=i&&null!==(e=i.citation)&&void 0!==e&&e.text?kt(Kp,{summary:"Citation",defaultOpen:!0},kt(uf,{style:{fontSize:13,marginBottom:12},horizontal:!0},kt(XC,null),kt(JC,null,kt(rg,{text:i.citation.text})))):null}var tS=["onImageChange","onCloseRequest","id","defaultTab","className","style"],eS=Fl.TabList,nS=Fl.Tab,rS=Fl.TabPanel,iS=Fl.TapSeperator;function oS(t){t.onImageChange;var e=t.onCloseRequest,n=t.id,r=t.defaultTab,i=(t.className,t.style),o=(s()(t,tS),zv(aS,{lazyLoad:!0})),a=o.data,u=o.error,h=o.loading,d=o.load,p=Object(l.useState)(r||"details"),f=Nt()(p,2),m=f[0],g=f[1],y=Object(l.useContext)(Zt);return Object(l.useEffect)((function(){void 0!==n&&d({variables:{key:n}})}),[n]),kt(Fl,{activeId:m,onChange:function(t){return g(t)}},kt(Zl,{wrap:"nowrap",style:i,css:dC({theme:y})},kt($l,{shrink:!1,grow:!1,css:pC({theme:y})},kt(eS,{style:{paddingTop:"12px"},vertical:!0},e&&kt(c.a.Fragment,null,kt(nS,{direction:"left",onClick:e},kt(tr,null)),kt(iS,{vertical:!0})),kt(nS,{tabId:"details",direction:"left"},kt(Mn,null)))),kt($l,{shrink:!1,grow:!1,css:mC({theme:y})},kt(rS,{tabId:"details"},kt(Zl,{direction:"column"},kt($l,{style:{padding:"12px 16px",paddingBottom:50},grow:!0},kt(RC,{data:a,error:u}),kt(xC,{data:a,loading:h,error:u}),kt(KC,{data:a}),kt(qC,{data:a}),kt(zC,{data:a}),kt(QC,{data:a})))))))}var aS="\nquery dataset($key: ID!){\n  dataset(key: $key) {\n    title\n    created\n    description\n    temporalCoverages\n    logoUrl\n    publishingOrganizationKey\n    publishingOrganizationTitle\n    volatileContributors {\n      firstName\n      lastName\n      position\n      organization\n      address\n      userId\n      type\n      _highlighted\n      roles\n    }\n    geographicCoverages {\n      description\n      boundingBox {\n        minLatitude\n        maxLatitude\n        minLongitude\n        maxLongitude\n        globalCoverage\n      }\n    }\n    taxonomicCoverages {\n      description\n      coverages {\n        scientificName\n        rank {\n          interpreted\n        }\n      }\n    }\n    bibliographicCitations {\n      identifier\n      text\n    }\n    samplingDescription {\n      studyExtent\n      sampling\n      qualityControl\n      methodSteps\n    } \n    citation {\n      text\n    }\n    license\n  }\n}\n",sS=["BasisOfRecordLabel","id","item","imageSrc","onClick"],lS=["labelMap","onCloseRequest","onClick","data","error","loading"],cS=["theme"],uS=["theme"],hS=["theme"];function dS(t){var e,n,r=t.BasisOfRecordLabel,i=t.id,o=t.item,a=(t.imageSrc,t.onClick),c=void 0===a?function(){}:a,u=(s()(t,sS),Object(l.useContext)(Zt));return kt("div",{css:yS({theme:u}),onClick:function(t){return c({id:i})}},kt(Zl,{wrap:"no-wrap",alignItems:"center"},kt($l,{grow:!0,css:gS({theme:u})},kt("h4",{dangerouslySetInnerHTML:{__html:o.gbifClassification.usage.formattedName}}),o.eventDate&&kt("div",null,kt(fd,{value:o.eventDate,year:"numeric",month:"long",day:"2-digit"})),kt("div",null,kt(r,{id:o.basisOfRecord}))),kt($l,{grow:!1},kt(pr,{className:"gbif-map-listItem-chevreon",appearance:"text",style:{padding:3},onClick:function(t){return c({id:i})}},kt(Qn,null))),(null===(e=o.primaryImage)||void 0===e?void 0:e.identifier)&&kt($l,{grow:!1},kt(cp,{src:null===(n=o.primaryImage)||void 0===n?void 0:n.identifier,w:80,h:80,style:{display:"block",background:u.paperBackground200,width:80,height:80}}))))}var pS=function(t){var e=t.theme;s()(t,cS);return Pt("background:",e.paperBackground500,";overflow:auto;border-radius:",e.borderRadius,"px;border:1px solid ",e.paperBorderColor,";max-height:inherit;flex-wrap:nowrap;header{padding:8px 16px;border-bottom:1px solid ",e.paperBorderColor,";font-size:12px;font-weight:500;}main{overflow:auto;",Sr({theme:e}),";}footer{border-top:1px solid ",e.paperBorderColor,";padding:8px 16px;}","")},fS=function(t){var e=t.theme;s()(t,uS);return Pt("list-style:none;padding:0;margin:0;border-top:1px solid ",e.paperBorderColor,";","")},mS={name:"in1zdj",styles:"padding:8px 16px;font-size:13px;overflow:hidden;h4{margin:0 0 8px 0;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;}"},gS=function(t){o()({},t);return mS},yS=function(t){var e=t.theme;s()(t,hS);return Pt("border-bottom:1px solid ",e.paperBorderColor,";cursor:pointer;:hover{background:",e.paperBackground700,";}.gbif-map-listItem-chevreon{color:",e.color500,";}","")},vS=function(t){var e,n=t.labelMap,r=t.onCloseRequest,i=t.onClick,o=t.data,a=t.error,c=t.loading,u=s()(t,lS),h=Object(l.useContext)(Zt);if(!a&&!c&&!o)return null;var d,p=n.basisOfRecord;if(c)return kt("section",u,kt("div",{css:pS({theme:h})},kt(pa,{active:!0}),kt("div",{css:gS({theme:h})},kt(ud,{id:"phrases.loading"}))));if(a)return kt("section",u,kt("div",{css:pS({theme:h})},kt(pa,{active:!0,error:!0}),kt("div",{css:gS({theme:h})},kt(ud,{id:"phrases.loadError"}))));if(o){var f,m,g=(null==o||null===(f=o.occurrenceSearch)||void 0===f||null===(m=f.documents)||void 0===m?void 0:m.results)||[];d=kt("ul",{css:fS({theme:h})},g.map((function(t,e){return kt("li",{key:t.key},kt(dS,{BasisOfRecordLabel:p,onClick:function(){return i({index:e})},id:t.key,item:t}))})))}return kt("section",u,kt(Zl,{css:pS({theme:h}),direction:"column"},kt($l,{grow:!1,as:"header"},kt(Zl,{alignItems:"center"},kt($l,{grow:!0},kt(ud,{id:"counts.nResults",values:{total:null==o||null===(e=o.occurrenceSearch)||void 0===e?void 0:e.documents.total}})),kt($l,{grow:!1},kt(pr,{appearance:"outline",onClick:r},kt(ud,{id:"phrases.close"}))))),kt($l,{grow:!0,as:"main"},d)))},_S=function(t){var e=t.children,n=t.total,r=t.loading,i=t.message,a=t.props,s=Object(l.useContext)(Zt),c=r||"number"!=typeof n;return kt("div",o()({css:Pt("color:",s.color500,";font-size:12px;margin:0 0 4px 4px;","")},a),c&&kt(Id,{style:{width:100}}),!c&&kt(ud,{id:i||"counts.nResults",values:{total:n}}),e)};var bS=["query","onMapClick","onPointClick","predicateHash","style","className"];function xS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=yu()(t);if(e){var i=yu()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return mu()(this,n)}}var wS=function(t){pu()(n,t);var e=xS(n);function n(t){var r;return su()(this,n),(r=e.call(this,t)).addLayer=r.addLayer.bind(hu()(r)),r.updateLayer=r.updateLayer.bind(hu()(r)),r.onPointClick=r.onPointClick.bind(hu()(r)),r.myRef=c.a.createRef(),r.state={},r}return cu()(n,[{key:"componentDidMount",value:function(){var t,e,n,r=this.props.theme.darkTheme?"dark-v9":"light-v9";Uv.a.accessToken=Lv.MAPBOX_KEY,this.map=new Uv.a.Map({container:this.myRef.current,style:"mapbox://styles/mapbox/".concat(r),zoom:sessionStorage.getItem("mapZoom")||(null===(t=this.props.defaultMapSettings)||void 0===t?void 0:t.zoom)||0,center:[sessionStorage.getItem("mapLng")||(null===(e=this.props.defaultMapSettings)||void 0===e?void 0:e.lng)||0,sessionStorage.getItem("mapLat")||(null===(n=this.props.defaultMapSettings)||void 0===n?void 0:n.lat)||0]}),this.map.addControl(new Uv.a.NavigationControl({showCompass:!1}),"top-left"),this.map.on("load",this.addLayer)}},{key:"componentWillUnmount",value:function(){this.map.remove()}},{key:"componentDidUpdate",value:function(t){var e=this;if(t.query!==this.props.query&&this.mapLoaded&&this.updateLayer(),t.theme!==this.props.theme&&this.mapLoaded){var n=this.props.theme.darkTheme?"dark-v9":"light-v9";this.map.setStyle("mapbox://styles/mapbox/".concat(n)),this.map.on("style.load",(function(){e.updateLayer()}))}}},{key:"updateLayer",value:function(){this.map.getSource("occurrences")?(this.map.removeLayer("occurrences"),this.map.removeSource("occurrences"),this.addLayer()):this.addLayer()}},{key:"onPointClick",value:function(t){this.props.onPointClick(t)}},{key:"addLayer",value:function(){var t=this,e="".concat(Lv.API_V2,"/map/occurrence/adhoc/{z}/{x}/{y}.mvt?style=scaled.circles&mode=GEO_CENTROID&srs=EPSG%3A3857&squareSize=256&predicateHash=").concat(this.props.predicateHash,"&").concat(this.props.q?"&q=".concat(this.props.q," "):"");this.map.addLayer(function(t){var e=t.tileString,n=t.theme;return{id:"occurrences",type:"circle",source:{type:"vector",tiles:[e]},"source-layer":"occurrence",paint:{"circle-radius":{property:"total",type:"interval",stops:[[0,2],[10,3],[100,5],[1e3,8],[1e4,12]]},"circle-color":{property:"total",type:"interval",stops:[0,10,100,1e3,1e4].map((function(t,e){return[t,n.mapDensityColors[e]]}))},"circle-opacity":{property:"total",type:"interval",stops:[[0,1],[10,.8],[100,.7],[1e3,.6],[1e4,.6]]},"circle-stroke-color":n.mapDensityColors[1],"circle-stroke-width":{property:"total",type:"interval",stops:[[0,1],[10,0]]}}}}({tileString:e,theme:this.props.theme}),"poi-scalerank2");var n=this.map;this.mapLoaded||(n.on("zoomend",(function(){var t=n.getCenter();sessionStorage.setItem("mapZoom",n.getZoom()),sessionStorage.setItem("mapLng",t.lng),sessionStorage.setItem("mapLat",t.lat)})),n.on("moveend",(function(){var t=n.getCenter();sessionStorage.setItem("mapZoom",n.getZoom()),sessionStorage.setItem("mapLng",t.lng),sessionStorage.setItem("mapLat",t.lat)})),n.on("mouseenter","occurrences",(function(t){n.getCanvas().style.cursor="pointer"})),n.on("click","occurrences",(function(e){t.onPointClick({geohash:e.features[0].properties.geohash,count:e.features[0].properties.count}),e.preventDefault()})),n.on("mouseleave","occurrences",(function(){n.getCanvas().style.cursor=""})),n.on("click",(function(e){!e._defaultPrevented&&t.props.onMapClick&&t.props.onMapClick()})),n.on("error",(function(e){var n;400===(null==e||null===(n=e.error)||void 0===n?void 0:n.status)&&t.props.registerPredicate&&t.props.registerPredicate()}))),this.mapLoaded=!0}},{key:"render",value:function(){var t=this.props,e=(t.query,t.onMapClick,t.onPointClick,t.predicateHash,t.style),n=t.className;s()(t,bS);return kt("div",{ref:this.myRef,style:e,className:n})}}]),n}(l.Component);function ES(t,e,n,r,i){var o=new e({color:""}),a=new n({color:"",width:1}),s=new t({fill:o}),l=new t({fill:o,stroke:a}),c=new t({stroke:a}),u=new t({text:new i({text:"",fill:o,stroke:a})}),h={};function d(e){var n=h[e];return n||(n=new t({image:new r({src:"https://unpkg.com/@mapbox/maki@4.0.0/icons/"+e+"-15.svg",imgSize:[15,15],crossOrigin:"anonymous"})}),h[e]=n),n}var p=[];return function(t,e){var n=0,r=t.get("layer"),i=t.get("class"),h=t.get("type"),f=t.get("scalerank"),m=t.get("labelrank"),g=t.get("admin_level"),y=t.get("maritime"),v=t.get("disputed"),_=t.get("maki"),b=t.getGeometry().getType();return"landuse"==r&&"park"==i?(o.setColor("#d8e8c8"),p[n++]=s):"landuse"==r&&"cemetery"==i?(o.setColor("#e0e4dd"),p[n++]=s):"landuse"==r&&"hospital"==i?(o.setColor("#fde"),p[n++]=s):"landuse"==r&&"school"==i?(o.setColor("#f0e8f8"),p[n++]=s):"landuse"==r&&"wood"==i?(o.setColor("rgb(233,238,223)"),p[n++]=s):"waterway"==r&&"river"!=i&&"stream"!=i&&"canal"!=i||"waterway"==r&&"river"==i?(a.setColor("#66c4e3"),a.setWidth(1),p[n++]=c):"waterway"!=r||"stream"!=i&&"canal"!=i?"water"==r?(o.setColor("#66c4e3"),p[n++]=s):"aeroway"==r&&"Polygon"==b?(o.setColor("rgb(242,239,235)"),p[n++]=s):"aeroway"==r&&"LineString"==b&&e<=76.43702828517625?(a.setColor("#f0ede9"),a.setWidth(1),p[n++]=c):"building"==r?(o.setColor("#f2eae2"),a.setColor("#dfdbd7"),a.setWidth(1),p[n++]=l):"tunnel"==r&&"motorway_link"==i?(a.setColor("#e9ac77"),a.setWidth(1),p[n++]=c):"tunnel"==r&&"service"==i?(a.setColor("#cfcdca"),a.setWidth(1),p[n++]=c):"tunnel"!=r||"street"!=i&&"street_limited"!=i?"tunnel"==r&&"main"==i&&e<=1222.99245256282||"tunnel"==r&&"motorway"==i?(a.setColor("#e9ac77"),a.setWidth(1),p[n++]=c):"tunnel"==r&&"path"==i?(a.setColor("#cba"),a.setWidth(1),p[n++]=c):"tunnel"==r&&"major_rail"==i?(a.setColor("#bbb"),a.setWidth(2),p[n++]=c):"road"==r&&"motorway_link"==i?(a.setColor("#e9ac77"),a.setWidth(1),p[n++]=c):"road"!=r||"street"!=i&&"street_limited"!=i||"LineString"!=b?"road"==r&&"main"==i&&e<=1222.99245256282||"road"==r&&"motorway"==i&&e<=4891.96981025128?(a.setColor("#e9ac77"),a.setWidth(1),p[n++]=c):"road"==r&&"path"==i?(a.setColor("#cba"),a.setWidth(1),p[n++]=c):"road"==r&&"major_rail"==i?(a.setColor("#bbb"),a.setWidth(2),p[n++]=c):"bridge"==r&&"motorway_link"==i||"bridge"==r&&"motorway"==i?(a.setColor("#e9ac77"),a.setWidth(1),p[n++]=c):"bridge"==r&&"service"==i?(a.setColor("#cfcdca"),a.setWidth(1),p[n++]=c):"bridge"!=r||"street"!=i&&"street_limited"!=i?"bridge"==r&&"main"==i&&e<=1222.99245256282?(a.setColor("#e9ac77"),a.setWidth(1),p[n++]=c):"bridge"==r&&"path"==i?(a.setColor("#cba"),a.setWidth(1),p[n++]=c):"bridge"==r&&"major_rail"==i?(a.setColor("#bbb"),a.setWidth(2),p[n++]=c):"admin"==r&&g>=3&&0===y||"admin"==r&&2==g&&0===v&&0===y||"admin"==r&&2==g&&1===v&&0===y?(a.setColor("#9e9cab"),a.setWidth(1),p[n++]=c):"admin"==r&&g>=3&&1===y||"admin"==r&&2==g&&1===y?(a.setColor("#66c4e3"),a.setWidth(1),p[n++]=c):"country_label"==r&&1===f?(u.getText().setText(t.get("name_en")),u.getText().setFont('bold 11px "Open Sans", "Arial Unicode MS"'),o.setColor("#334"),a.setColor("rgba(255,255,255,0.8)"),a.setWidth(2),p[n++]=u):"country_label"==r&&2===f&&e<=19567.87924100512?(u.getText().setText(t.get("name_en")),u.getText().setFont('bold 10px "Open Sans", "Arial Unicode MS"'),o.setColor("#334"),a.setColor("rgba(255,255,255,0.8)"),a.setWidth(2),p[n++]=u):"country_label"==r&&3===f&&e<=9783.93962050256?(u.getText().setText(t.get("name_en")),u.getText().setFont('bold 9px "Open Sans", "Arial Unicode MS"'),o.setColor("#334"),a.setColor("rgba(255,255,255,0.8)"),a.setWidth(2),p[n++]=u):"country_label"==r&&4===f&&e<=4891.96981025128?(u.getText().setText(t.get("name_en")),u.getText().setFont('bold 8px "Open Sans", "Arial Unicode MS"'),o.setColor("#334"),a.setColor("rgba(255,255,255,0.8)"),a.setWidth(2),p[n++]=u):"marine_label"==r&&1===m&&"Point"==b||"marine_label"==r&&2===m&&"Point"==b?(u.getText().setText(t.get("name_en")),u.getText().setFont('italic 11px "Open Sans", "Arial Unicode MS"'),o.setColor("#74aee9"),a.setColor("rgba(255,255,255,0.8)"),a.setWidth(1),p[n++]=u):"marine_label"==r&&3===m&&"Point"==b?(u.getText().setText(t.get("name_en")),u.getText().setFont('italic 10px "Open Sans", "Arial Unicode MS"'),o.setColor("#74aee9"),a.setColor("rgba(255,255,255,0.8)"),a.setWidth(1),p[n++]=u):"marine_label"==r&&4===m&&"Point"==b?(u.getText().setText(t.get("name_en")),u.getText().setFont('italic 9px "Open Sans", "Arial Unicode MS"'),o.setColor("#74aee9"),a.setColor("rgba(255,255,255,0.8)"),a.setWidth(1),p[n++]=u):"place_label"==r&&"city"==h&&e<=1222.99245256282?(u.getText().setText(t.get("name_en")),u.getText().setFont('11px "Open Sans", "Arial Unicode MS"'),o.setColor("#333"),a.setColor("rgba(255,255,255,0.8)"),a.setWidth(1),p[n++]=u):"place_label"==r&&"town"==h&&e<=305.748113140705?(u.getText().setText(t.get("name_en")),u.getText().setFont('9px "Open Sans", "Arial Unicode MS"'),o.setColor("#333"),a.setColor("rgba(255,255,255,0.8)"),a.setWidth(1),p[n++]=u):"place_label"==r&&"village"==h&&e<=38.21851414258813?(u.getText().setText(t.get("name_en")),u.getText().setFont('8px "Open Sans", "Arial Unicode MS"'),o.setColor("#333"),a.setColor("rgba(255,255,255,0.8)"),a.setWidth(1),p[n++]=u):"place_label"==r&&e<=19.109257071294063&&("hamlet"==h||"suburb"==h||"neighbourhood"==h)?(u.getText().setText(t.get("name_en")),u.getText().setFont('bold 9px "Arial Narrow"'),o.setColor("#633"),a.setColor("rgba(255,255,255,0.8)"),a.setWidth(1),p[n++]=u):("poi_label"==r&&e<=19.109257071294063&&1==f&&"marker"!==_||"poi_label"==r&&e<=9.554628535647032&&2==f&&"marker"!==_||"poi_label"==r&&e<=4.777314267823516&&3==f&&"marker"!==_||"poi_label"==r&&e<=2.388657133911758&&4==f&&"marker"!==_||"poi_label"==r&&e<=1.194328566955879&&f>=5&&"marker"!==_)&&(p[n++]=d(_)):(a.setColor("#cfcdca"),a.setWidth(1),p[n++]=c):(a.setColor("#cfcdca"),a.setWidth(1),p[n++]=c):(a.setColor("#cfcdca"),a.setWidth(1),p[n++]=c):(a.setColor("#66c4e3"),a.setWidth(1),p[n++]=c),p.length=n,p}}var CS=484813681109536e-20,SS=Math.PI/2,TS=.017453292519943295,OS=57.29577951308232,IS=Math.PI/4,AS=2*Math.PI,MS=3.14159265359,kS={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},PS={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},DS=/[\s_\-\/\(\)]/g;function RS(t,e){if(t[e])return t[e];for(var n,r=Object.keys(t),i=e.toLowerCase().replace(DS,""),o=-1;++o<r.length;)if((n=r[o]).toLowerCase().replace(DS,"")===i)return t[n]}var LS=function(t){var e,n,r,i={},o=t.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var n=e.split("=");return n.push(!0),t[n[0].toLowerCase()]=n[1],t}),{}),a={proj:"projName",datum:"datumCode",rf:function(t){i.rf=parseFloat(t)},lat_0:function(t){i.lat0=t*TS},lat_1:function(t){i.lat1=t*TS},lat_2:function(t){i.lat2=t*TS},lat_ts:function(t){i.lat_ts=t*TS},lon_0:function(t){i.long0=t*TS},lon_1:function(t){i.long1=t*TS},lon_2:function(t){i.long2=t*TS},alpha:function(t){i.alpha=parseFloat(t)*TS},gamma:function(t){i.rectified_grid_angle=parseFloat(t)},lonc:function(t){i.longc=t*TS},x_0:function(t){i.x0=parseFloat(t)},y_0:function(t){i.y0=parseFloat(t)},k_0:function(t){i.k0=parseFloat(t)},k:function(t){i.k0=parseFloat(t)},a:function(t){i.a=parseFloat(t)},b:function(t){i.b=parseFloat(t)},r_a:function(){i.R_A=!0},zone:function(t){i.zone=parseInt(t,10)},south:function(){i.utmSouth=!0},towgs84:function(t){i.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){i.to_meter=parseFloat(t)},units:function(t){i.units=t;var e=RS(PS,t);e&&(i.to_meter=e.to_meter)},from_greenwich:function(t){i.from_greenwich=t*TS},pm:function(t){var e=RS(kS,t);i.from_greenwich=(e||parseFloat(t))*TS},nadgrids:function(t){"@null"===t?i.datumCode="none":i.nadgrids=t},axis:function(t){3===t.length&&-1!=="ewnsud".indexOf(t.substr(0,1))&&-1!=="ewnsud".indexOf(t.substr(1,1))&&-1!=="ewnsud".indexOf(t.substr(2,1))&&(i.axis=t)},approx:function(){i.approx=!0}};for(e in o)n=o[e],e in a?"function"==typeof(r=a[e])?r(n):i[r]=n:i[e]=n;return"string"==typeof i.datumCode&&"WGS84"!==i.datumCode&&(i.datumCode=i.datumCode.toLowerCase()),i},NS=function(t){return new GS(t).output()},jS=/\s/,FS=/[A-Za-z]/,zS=/[A-Za-z84_]/,BS=/[,\]]/,US=/[\d\.E\-\+]/;function GS(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function VS(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var r=e?{}:t,i=n.reduce((function(t,e){return qS(e,t),t}),r);e&&(t[e]=i)}function qS(t,e){if(Array.isArray(t)){var n=t.shift();if("PARAMETER"===n&&(n=t.shift()),1===t.length)return Array.isArray(t[0])?(e[n]={},void qS(t[0],e[n])):void(e[n]=t[0]);if(t.length)if("TOWGS84"!==n){if("AXIS"===n)return n in e||(e[n]=[]),void e[n].push(t);var r;switch(Array.isArray(n)||(e[n]={}),n){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[n]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&qS(t[2],e[n]));case"SPHEROID":case"ELLIPSOID":return e[n]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&qS(t[3],e[n]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void VS(e,n,t);default:for(r=-1;++r<t.length;)if(!Array.isArray(t[r]))return qS(t,e[n]);return VS(e,n,t)}}else e[n]=t;else e[n]=!0}else e[t]=!0}GS.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;jS.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case 1:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},GS.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(BS.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},GS.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},GS.prototype.number=function(t){if(!US.test(t)){if(BS.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},GS.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},GS.prototype.keyword=function(t){if(zS.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=1)}if(!BS.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},GS.prototype.neutral=function(t){if(FS.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(US.test(t))return this.word=t,void(this.state=3);if(!BS.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},GS.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function HS(t){return.017453292519943295*t}var WS=function(t){var e=NS(t),n=e.shift(),r=e.shift();e.unshift(["name",r]),e.unshift(["type",n]);var i={};return qS(e,i),function(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",n=0,r=t.AXIS.length;n<r;++n){var i=[t.AXIS[n][0].toLowerCase(),t.AXIS[n][1].toLowerCase()];-1!==i[0].indexOf("north")||("y"===i[0]||"lat"===i[0])&&"north"===i[1]?e+="n":-1!==i[0].indexOf("south")||("y"===i[0]||"lat"===i[0])&&"south"===i[1]?e+="s":-1!==i[0].indexOf("east")||("x"===i[0]||"lon"===i[0])&&"east"===i[1]?e+="e":-1===i[0].indexOf("west")&&("x"!==i[0]&&"lon"!==i[0]||"west"!==i[1])||(e+="w")}2===e.length&&(e+="u"),3===e.length&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var o=t.GEOGCS;function a(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(o=t),o&&(o.DATUM?t.datumCode=o.DATUM.name.toLowerCase():t.datumCode=o.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(t.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=o.DATUM.SPHEROID.a,t.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(t.datum_params=o.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",HS],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",HS],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",HS],["lat0","latitude_of_origin",HS],["lat0","standard_parallel_1",HS],["lat1","standard_parallel_1",HS],["lat2","standard_parallel_2",HS],["azimuth","Azimuth"],["alpha","azimuth",HS],["srsCode","name"]].forEach((function(e){return n=t,i=(r=e)[0],o=r[1],void(!(i in n)&&o in n&&(n[i]=n[o],3===r.length&&(n[i]=r[2](n[i]))));var n,r,i,o})),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=HS(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(i),i};function ZS(t){var e=this;if(2===arguments.length){var n=arguments[1];"string"==typeof n?"+"===n.charAt(0)?ZS[t]=LS(arguments[1]):ZS[t]=WS(arguments[1]):ZS[t]=n}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?ZS.apply(e,t):ZS(t)}));if("string"==typeof t){if(t in ZS)return ZS[t]}else"EPSG"in t?ZS["EPSG:"+t.EPSG]=t:"ESRI"in t?ZS["ESRI:"+t.ESRI]=t:"IAU2000"in t?ZS["IAU2000:"+t.IAU2000]=t:console.log(t);return}}!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(ZS);var $S=ZS;var KS=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var YS=["3857","900913","3785","102113"];var XS=function(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in $S}(t))return $S[t];if(function(t){return KS.some((function(e){return t.indexOf(e)>-1}))}(t)){var e=WS(t);if(function(t){var e=RS(t,"authority");if(e){var n=RS(e,"epsg");return n&&YS.indexOf(n)>-1}}(e))return $S["EPSG:3857"];var n=function(t){var e=RS(t,"extension");if(e)return RS(e,"proj4")}(e);return n?LS(n):e}return function(t){return"+"===t[0]}(t)?LS(t):void 0},JS=function(t,e){var n,r;if(t=t||{},!e)return t;for(r in e)void 0!==(n=e[r])&&(t[r]=n);return t},QS=function(t,e,n){var r=t*e;return n/Math.sqrt(1-r*r)},tT=function(t){return t<0?-1:1},eT=function(t){return Math.abs(t)<=MS?t:t-tT(t)*AS},nT=function(t,e,n){var r=t*n,i=.5*t;return r=Math.pow((1-r)/(1+r),i),Math.tan(.5*(SS-e))/r},rT=function(t,e){for(var n,r,i=.5*t,o=SS-2*Math.atan(e),a=0;a<=15;a++)if(n=t*Math.sin(o),o+=r=SS-2*Math.atan(e*Math.pow((1-n)/(1+n),i))-o,Math.abs(r)<=1e-10)return o;return-9999};function iT(t){return t}var oT=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=QS(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,n,r=t.x,i=t.y;if(i*OS>90&&i*OS<-90&&r*OS>180&&r*OS<-180)return null;if(Math.abs(Math.abs(i)-SS)<=1e-10)return null;if(this.sphere)e=this.x0+this.a*this.k0*eT(r-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(IS+.5*i));else{var o=Math.sin(i),a=nT(this.e,i,o);e=this.x0+this.a*this.k0*eT(r-this.long0),n=this.y0-this.a*this.k0*Math.log(a)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,r=t.x-this.x0,i=t.y-this.y0;if(this.sphere)n=SS-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var o=Math.exp(-i/(this.a*this.k0));if(-9999===(n=rT(this.e,o)))return null}return e=eT(this.long0+r/(this.a*this.k0)),t.x=e,t.y=n,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:iT,inverse:iT,names:["longlat","identity"]}],aT={},sT=[];function lT(t,e){var n=sT.length;return t.names?(sT[n]=t,t.names.forEach((function(t){aT[t.toLowerCase()]=n})),this):(console.log(e),!0)}var cT={start:function(){oT.forEach(lT)},add:lT,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==aT[e]&&sT[aT[e]]?sT[aT[e]]:void 0}},uT={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},hT=uT.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};uT.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var dT={};dT.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},dT.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},dT.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},dT.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},dT.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},dT.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},dT.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},dT.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},dT.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},dT.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},dT.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},dT.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},dT.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},dT.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},dT.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},dT.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},dT.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};var pT=function(t,e,n,r,i,o,a){var s={};return s.datum_type=void 0===t||"none"===t?5:4,e&&(s.datum_params=e.map(parseFloat),0===s.datum_params[0]&&0===s.datum_params[1]&&0===s.datum_params[2]||(s.datum_type=1),s.datum_params.length>3&&(0===s.datum_params[3]&&0===s.datum_params[4]&&0===s.datum_params[5]&&0===s.datum_params[6]||(s.datum_type=2,s.datum_params[3]*=CS,s.datum_params[4]*=CS,s.datum_params[5]*=CS,s.datum_params[6]=s.datum_params[6]/1e6+1))),a&&(s.datum_type=3,s.grids=a),s.a=n,s.b=r,s.es=i,s.ep2=o,s},fT={};function mT(t){if(0===t.length)return null;var e="@"===t[0];return e&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:fT[t]||null,isNull:!1}}function gT(t){return t/3600*Math.PI/180}function yT(t,e,n){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,n)))}function vT(t){return t.map((function(t){return[gT(t.longitudeShift),gT(t.latitudeShift)]}))}function _T(t,e,n){return{name:yT(t,e+8,e+16).trim(),parent:yT(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,n),upperLatitude:t.getFloat64(e+88,n),lowerLongitude:t.getFloat64(e+104,n),upperLongitude:t.getFloat64(e+120,n),latitudeInterval:t.getFloat64(e+136,n),longitudeInterval:t.getFloat64(e+152,n),gridNodeCount:t.getInt32(e+168,n)}}function bT(t,e,n,r){for(var i=e+176,o=[],a=0;a<n.gridNodeCount;a++){var s={latitudeShift:t.getFloat32(i+16*a,r),longitudeShift:t.getFloat32(i+16*a+4,r),latitudeAccuracy:t.getFloat32(i+16*a+8,r),longitudeAccuracy:t.getFloat32(i+16*a+12,r)};o.push(s)}return o}function xT(t,e){if(!(this instanceof xT))return new xT(t);e=e||function(t){if(t)throw t};var n=XS(t);if("object"==typeof n){var r=xT.projections.get(n.projName);if(r){if(n.datumCode&&"none"!==n.datumCode){var i=RS(dT,n.datumCode);i&&(n.datum_params=n.datum_params||(i.towgs84?i.towgs84.split(","):null),n.ellps=i.ellipse,n.datumName=i.datumName?i.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var o,a,s,l,c,u,h,d=function(t,e,n,r,i){if(!t){var o=RS(uT,r);o||(o=hT),t=o.a,e=o.b,n=o.rf}return n&&!e&&(e=(1-1/n)*t),(0===n||Math.abs(t-e)<1e-10)&&(i=!0,e=t),{a:t,b:e,rf:n,sphere:i}}(n.a,n.b,n.rf,n.ellps,n.sphere),p=(o=d.a,a=d.b,d.rf,s=n.R_A,u=((l=o*o)-(c=a*a))/l,h=0,s?(l=(o*=1-u*(.16666666666666666+u*(.04722222222222222+.022156084656084655*u)))*o,u=0):h=Math.sqrt(u),{es:u,e:h,ep2:(l-c)/c}),f=function(t){return void 0===t?null:t.split(",").map(mT)}(n.nadgrids),m=n.datum||pT(n.datumCode,n.datum_params,d.a,d.b,p.es,p.ep2,f);JS(this,n),JS(this,r),this.a=d.a,this.b=d.b,this.rf=d.rf,this.sphere=d.sphere,this.es=p.es,this.e=p.e,this.ep2=p.ep2,this.datum=m,this.init(),e(null,this)}else e(t)}else e(t)}xT.projections=cT,xT.projections.start();var wT=xT;function ET(t,e,n){var r,i,o,a,s=t.x,l=t.y,c=t.z?t.z:0;if(l<-SS&&l>-1.001*SS)l=-SS;else if(l>SS&&l<1.001*SS)l=SS;else{if(l<-SS)return{x:-1/0,y:-1/0,z:t.z};if(l>SS)return{x:1/0,y:1/0,z:t.z}}return s>Math.PI&&(s-=2*Math.PI),i=Math.sin(l),a=Math.cos(l),o=i*i,{x:((r=n/Math.sqrt(1-e*o))+c)*a*Math.cos(s),y:(r+c)*a*Math.sin(s),z:(r*(1-e)+c)*i}}function CT(t,e,n,r){var i,o,a,s,l,c,u,h,d,p,f,m,g,y,v,_=t.x,b=t.y,x=t.z?t.z:0;if(i=Math.sqrt(_*_+b*b),o=Math.sqrt(_*_+b*b+x*x),i/n<1e-12){if(y=0,o/n<1e-12)return SS,v=-r,{x:t.x,y:t.y,z:t.z}}else y=Math.atan2(b,_);a=x/o,h=(s=i/o)*(1-e)*(l=1/Math.sqrt(1-e*(2-e)*s*s)),d=a*l,g=0;do{g++,c=e*(u=n/Math.sqrt(1-e*d*d))/(u+(v=i*h+x*d-u*(1-e*d*d))),m=(f=a*(l=1/Math.sqrt(1-c*(2-c)*s*s)))*h-(p=s*(1-c)*l)*d,h=p,d=f}while(m*m>1e-24&&g<30);return{x:y,y:Math.atan(f/Math.abs(p)),z:v}}function ST(t){return 1===t||2===t}var TT=function(t,e,n){if(function(t,e){return t.datum_type===e.datum_type&&(!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(1===t.datum_type?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:2!==t.datum_type||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]))}(t,e))return n;if(5===t.datum_type||5===e.datum_type)return n;var r=t.a,i=t.es;if(3===t.datum_type){if(0!==OT(t,!1,n))return;r=6378137,i=.0066943799901413165}var o=e.a,a=e.b,s=e.es;if(3===e.datum_type&&(o=6378137,a=6356752.314,s=.0066943799901413165),i===s&&r===o&&!ST(t.datum_type)&&!ST(e.datum_type))return n;if((n=ET(n,i,r),ST(t.datum_type)&&(n=function(t,e,n){if(1===e)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(2===e){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],c=n[6];return{x:c*(t.x-l*t.y+s*t.z)+r,y:c*(l*t.x+t.y-a*t.z)+i,z:c*(-s*t.x+a*t.y+t.z)+o}}}(n,t.datum_type,t.datum_params)),ST(e.datum_type)&&(n=function(t,e,n){if(1===e)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(2===e){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],c=n[6],u=(t.x-r)/c,h=(t.y-i)/c,d=(t.z-o)/c;return{x:u+l*h-s*d,y:-l*u+h+a*d,z:s*u-a*h+d}}}(n,e.datum_type,e.datum_params)),n=CT(n,s,o,a),3===e.datum_type)&&0!==OT(e,!0,n))return;return n};function OT(t,e,n){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;for(var r={x:-n.x,y:n.y},i={x:Number.NaN,y:Number.NaN},o=[],a=0;a<t.grids.length;a++){var s=t.grids[a];if(o.push(s.name),s.isNull){i=r;break}if(s.mandatory,null!==s.grid){var l=s.grid.subgrids[0],c=(Math.abs(l.del[1])+Math.abs(l.del[0]))/1e4,u=l.ll[0]-c,h=l.ll[1]-c,d=l.ll[0]+(l.lim[0]-1)*l.del[0]+c,p=l.ll[1]+(l.lim[1]-1)*l.del[1]+c;if(!(h>r.y||u>r.x||p<r.y||d<r.x||(i=IT(r,e,l),isNaN(i.x))))break}else if(s.mandatory)return console.log("Unable to find mandatory grid '"+s.name+"'"),-1}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*OS+" "+r.y*OS+" tried: '"+o+"'"),-1):(n.x=-i.x,n.y=i.y,0)}function IT(t,e,n){var r={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return r;var i={x:t.x,y:t.y};i.x-=n.ll[0],i.y-=n.ll[1],i.x=eT(i.x-Math.PI)+Math.PI;var o=AT(i,n);if(e){if(isNaN(o.x))return r;o.x=i.x-o.x,o.y=i.y-o.y;var a,s,l=9;do{if(s=AT(o,n),isNaN(s.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}a={x:i.x-(s.x+o.x),y:i.y-(s.y+o.y)},o.x+=a.x,o.y+=a.y}while(l--&&Math.abs(a.x)>1e-12&&Math.abs(a.y)>1e-12);if(l<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=eT(o.x+n.ll[0]),r.y=o.y+n.ll[1]}else isNaN(o.x)||(r.x=t.x+o.x,r.y=t.y+o.y);return r}function AT(t,e){var n,r={x:t.x/e.del[0],y:t.y/e.del[1]},i=Math.floor(r.x),o=Math.floor(r.y),a=r.x-1*i,s=r.y-1*o,l={x:Number.NaN,y:Number.NaN};if(i<0||i>=e.lim[0])return l;if(o<0||o>=e.lim[1])return l;n=o*e.lim[0]+i;var c=e.cvs[n][0],u=e.cvs[n][1];n++;var h=e.cvs[n][0],d=e.cvs[n][1];n+=e.lim[0];var p=e.cvs[n][0],f=e.cvs[n][1];n--;var m=e.cvs[n][0],g=e.cvs[n][1],y=a*s,v=a*(1-s),_=(1-a)*(1-s),b=(1-a)*s;return l.x=_*c+v*h+b*m+y*p,l.y=_*u+v*d+b*g+y*f,l}var MT=function(t,e,n){var r,i,o,a=n.x,s=n.y,l=n.z||0,c={};for(o=0;o<3;o++)if(!e||2!==o||void 0!==n.z)switch(0===o?(r=a,i=-1!=="ew".indexOf(t.axis[o])?"x":"y"):1===o?(r=s,i=-1!=="ns".indexOf(t.axis[o])?"y":"x"):(r=l,i="z"),t.axis[o]){case"e":c[i]=r;break;case"w":c[i]=-r;break;case"n":c[i]=r;break;case"s":c[i]=-r;break;case"u":void 0!==n[i]&&(c.z=r);break;case"d":void 0!==n[i]&&(c.z=-r);break;default:return null}return c},kT=function(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e};function PT(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function DT(t,e,n,r){var i;if(Array.isArray(n)&&(n=kT(n)),function(t){PT(t.x),PT(t.y)}(n),t.datum&&e.datum&&function(t,e){return(1===t.datum.datum_type||2===t.datum.datum_type)&&"WGS84"!==e.datumCode||(1===e.datum.datum_type||2===e.datum.datum_type)&&"WGS84"!==t.datumCode}(t,e)&&(n=DT(t,i=new wT("WGS84"),n,r),t=i),r&&"enu"!==t.axis&&(n=MT(t,!1,n)),"longlat"===t.projName)n={x:n.x*TS,y:n.y*TS,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),!(n=t.inverse(n)))return;if(t.from_greenwich&&(n.x+=t.from_greenwich),n=TT(t.datum,e.datum,n))return e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),"longlat"===e.projName?n={x:n.x*OS,y:n.y*OS,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),r&&"enu"!==e.axis?MT(e,!0,n):n}var RT=wT("WGS84");function LT(t,e,n,r){var i,o,a;return Array.isArray(n)?(i=DT(t,e,n,r)||{x:NaN,y:NaN},n.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name?"number"==typeof i.z?[i.x,i.y,i.z].concat(n.splice(3)):[i.x,i.y,n[2]].concat(n.splice(3)):[i.x,i.y].concat(n.splice(2)):[i.x,i.y]):(o=DT(t,e,n,r),2===(a=Object.keys(n)).length||a.forEach((function(r){if(void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name){if("x"===r||"y"===r||"z"===r)return}else if("x"===r||"y"===r)return;o[r]=n[r]})),o)}function NT(t){return t instanceof wT?t:t.oProj?t.oProj:wT(t)}var jT=function(t,e,n){t=NT(t);var r,i=!1;return void 0===e?(e=t,t=RT,i=!0):(void 0!==e.x||Array.isArray(e))&&(n=e,e=t,t=RT,i=!0),e=NT(e),n?LT(t,e,n):(r={forward:function(n,r){return LT(t,e,n,r)},inverse:function(n,r){return LT(e,t,n,r)}},i&&(r.oProj=e),r)},FT={forward:zT,inverse:function(t){var e=VT(WT(t.toUpperCase()));if(e.lat&&e.lon)return[e.lon,e.lat,e.lon,e.lat];return[e.left,e.bottom,e.right,e.top]},toPoint:BT};function zT(t,e){return e=e||5,function(t,e){var n="00000"+t.easting,r="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(p=t.easting,f=t.northing,m=t.zoneNumber,g=HT(m),y=Math.floor(p/1e5),v=Math.floor(f/1e5)%20,i=y,o=v,a=g,s=a-1,l="AJSAJS".charCodeAt(s),c="AFAFAF".charCodeAt(s),u=l+i-1,h=c+o,d=!1,u>90&&(u=u-90+65-1,d=!0),(73===u||l<73&&u>73||(u>73||l<73)&&d)&&u++,(79===u||l<79&&u>79||(u>79||l<79)&&d)&&73==++u&&u++,u>90&&(u=u-90+65-1),h>86?(h=h-86+65-1,d=!0):d=!1,(73===h||c<73&&h>73||(h>73||c<73)&&d)&&h++,(79===h||c<79&&h>79||(h>79||c<79)&&d)&&73==++h&&h++,h>86&&(h=h-86+65-1),String.fromCharCode(u)+String.fromCharCode(h))+n.substr(n.length-5,e)+r.substr(r.length-5,e);var i,o,a,s,l,c,u,h,d;var p,f,m,g,y,v}(function(t){var e,n,r,i,o,a,s,l=t.lat,c=t.lon,u=6378137,h=UT(l),d=UT(c);s=Math.floor((c+180)/6)+1,180===c&&(s=60);l>=56&&l<64&&c>=3&&c<12&&(s=32);l>=72&&l<84&&(c>=0&&c<9?s=31:c>=9&&c<21?s=33:c>=21&&c<33?s=35:c>=33&&c<42&&(s=37));a=UT(6*(s-1)-180+3),.006739496752268451,e=u/Math.sqrt(1-.00669438*Math.sin(h)*Math.sin(h)),n=Math.tan(h)*Math.tan(h),r=.006739496752268451*Math.cos(h)*Math.cos(h),i=Math.cos(h)*(d-a),o=u*(.9983242984503243*h-.002514607064228144*Math.sin(2*h)+2639046602129982e-21*Math.sin(4*h)-3.418046101696858e-9*Math.sin(6*h));var p=.9996*e*(i+(1-n+r)*i*i*i/6+(5-18*n+n*n+72*r-.39089081163157013)*i*i*i*i*i/120)+5e5,f=.9996*(o+e*Math.tan(h)*(i*i/2+(5-n+9*r+4*r*r)*i*i*i*i/24+(61-58*n+n*n+600*r-2.2240339282485886)*i*i*i*i*i*i/720));l<0&&(f+=1e7);return{northing:Math.round(f),easting:Math.round(p),zoneNumber:s,zoneLetter:qT(l)}}({lat:t[1],lon:t[0]}),e)}function BT(t){var e=VT(WT(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function UT(t){return t*(Math.PI/180)}function GT(t){return t/Math.PI*180}function VT(t){var e=t.northing,n=t.easting,r=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var o,a,s,l,c,u,h,d,p=6378137,f=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),m=n-5e5,g=e;r<"N"&&(g-=1e7),u=6*(i-1)-180+3,d=(h=g/.9996/6367449.145945056)+(3*f/2-27*f*f*f/32)*Math.sin(2*h)+(21*f*f/16-55*f*f*f*f/32)*Math.sin(4*h)+151*f*f*f/96*Math.sin(6*h),o=p/Math.sqrt(1-.00669438*Math.sin(d)*Math.sin(d)),a=Math.tan(d)*Math.tan(d),s=.006739496752268451*Math.cos(d)*Math.cos(d),l=.99330562*p/Math.pow(1-.00669438*Math.sin(d)*Math.sin(d),1.5),c=m/(.9996*o);var y=d-o*Math.tan(d)/l*(c*c/2-(5+3*a+10*s-4*s*s-.06065547077041606)*c*c*c*c/24+(61+90*a+298*s+45*a*a-1.6983531815716497-3*s*s)*c*c*c*c*c*c/720);y=GT(y);var v,_=(c-(1+2*a+s)*c*c*c/6+(5-2*s+28*a-3*s*s+.05391597401814761+24*a*a)*c*c*c*c*c/120)/Math.cos(d);if(_=u+GT(_),t.accuracy){var b=VT({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});v={top:b.lat,right:b.lon,bottom:y,left:_}}else v={lat:y,lon:_};return v}function qT(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function HT(t){var e=t%6;return 0===e&&(e=6),e}function WT(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,n=t.length,r=null,i="",o=0;!/[A-Z]/.test(e=t.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+t;i+=e,o++}var a=parseInt(i,10);if(0===o||o+3>n)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(o++);if(s<="A"||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+t;r=t.substring(o,o+=2);for(var l=HT(a),c=function(t,e){var n="AJSAJS".charCodeAt(e-1),r=1e5,i=!1;for(;n!==t.charCodeAt(0);){if(73===++n&&n++,79===n&&n++,n>90){if(i)throw"Bad character: "+t;n=65,i=!0}r+=1e5}return r}(r.charAt(0),l),u=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var n="AFAFAF".charCodeAt(e-1),r=0,i=!1;for(;n!==t.charCodeAt(0);){if(73===++n&&n++,79===n&&n++,n>86){if(i)throw"Bad character: "+t;n=65,i=!0}r+=1e5}return r}(r.charAt(1),l);u<ZT(s);)u+=2e6;var h=n-o;if(h%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var d,p,f,m=h/2,g=0,y=0;return m>0&&(d=1e5/Math.pow(10,m),p=t.substring(o,o+m),g=parseFloat(p)*d,f=t.substring(o+m),y=parseFloat(f)*d),{easting:g+c,northing:y+u,zoneLetter:s,zoneNumber:a,accuracy:d}}function ZT(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function $T(t,e,n){if(!(this instanceof $T))return new $T(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var r=t.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}$T.fromMGRS=function(t){return new $T(BT(t))},$T.prototype.toMGRS=function(t){return zT([this.x,this.y],t)};var KT=$T,YT=.01068115234375,XT=function(t){var e=[];e[0]=1-t*(.25+t*(.046875+t*(.01953125+t*YT))),e[1]=t*(.75-t*(.046875+t*(.01953125+t*YT)));var n=t*t;return e[2]=n*(.46875-t*(.013020833333333334+.007120768229166667*t)),n*=t,e[3]=n*(.3645833333333333-.005696614583333333*t),e[4]=n*t*.3076171875,e},JT=function(t,e,n,r){return n*=e,e*=e,r[0]*t-n*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))},QT=function(t,e,n){for(var r=1/(1-e),i=t,o=20;o;--o){var a=Math.sin(i),s=1-e*a*a;if(i-=s=(JT(i,a,Math.cos(i),n)-t)*(s*Math.sqrt(s))*r,Math.abs(s)<1e-10)return i}return i};var tO={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=XT(this.es),this.ml0=JT(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,n,r,i=t.x,o=t.y,a=eT(i-this.long0),s=Math.sin(o),l=Math.cos(o);if(this.es){var c=l*a,u=Math.pow(c,2),h=this.ep2*Math.pow(l,2),d=Math.pow(h,2),p=Math.abs(l)>1e-10?Math.tan(o):0,f=Math.pow(p,2),m=Math.pow(f,2);e=1-this.es*Math.pow(s,2),c/=Math.sqrt(e);var g=JT(o,s,l,this.en);n=this.a*(this.k0*c*(1+u/6*(1-f+h+u/20*(5-18*f+m+14*h-58*f*h+u/42*(61+179*m-m*f-479*f)))))+this.x0,r=this.a*(this.k0*(g-this.ml0+s*a*c/2*(1+u/12*(5-f+9*h+4*d+u/30*(61+m-58*f+270*h-330*f*h+u/56*(1385+543*m-m*f-3111*f))))))+this.y0}else{var y=l*Math.sin(a);if(Math.abs(Math.abs(y)-1)<1e-10)return 93;if(n=.5*this.a*this.k0*Math.log((1+y)/(1-y))+this.x0,r=l*Math.cos(a)/Math.sqrt(1-Math.pow(y,2)),(y=Math.abs(r))>=1){if(y-1>1e-10)return 93;r=0}else r=Math.acos(r);o<0&&(r=-r),r=this.a*this.k0*(r-this.lat0)+this.y0}return t.x=n,t.y=r,t},inverse:function(t){var e,n,r,i,o=(t.x-this.x0)*(1/this.a),a=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+a/this.k0,n=QT(e,this.es,this.en),Math.abs(n)<SS){var s=Math.sin(n),l=Math.cos(n),c=Math.abs(l)>1e-10?Math.tan(n):0,u=this.ep2*Math.pow(l,2),h=Math.pow(u,2),d=Math.pow(c,2),p=Math.pow(d,2);e=1-this.es*Math.pow(s,2);var f=o*Math.sqrt(e)/this.k0,m=Math.pow(f,2);r=n-(e*=c)*m/(1-this.es)*.5*(1-m/12*(5+3*d-9*u*d+u-4*h-m/30*(61+90*d-252*u*d+45*p+46*u-m/56*(1385+3633*d+4095*p+1574*p*d)))),i=eT(this.long0+f*(1-m/6*(1+2*d+u-m/20*(5+28*d+24*p+8*u*d+6*u-m/42*(61+662*d+1320*p+720*p*d))))/l)}else r=SS*tT(a),i=0;else{var g=Math.exp(o/this.k0),y=.5*(g-1/g),v=this.lat0+a/this.k0,_=Math.cos(v);e=Math.sqrt((1-Math.pow(_,2))/(1+Math.pow(y,2))),r=Math.asin(e),a<0&&(r=-r),i=0===y&&0===_?0:eT(Math.atan2(y,_)+this.long0)}return t.x=i,t.y=r,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]},eO=function(t){var e=Math.exp(t);return e=(e-1/e)/2},nO=function(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),r=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(r,2))},rO=function(t){var e=Math.abs(t);return e=function(t){var e=1+t,n=e-1;return 0===n?t:t*Math.log(e)/n}(e*(1+e/(nO(1,e)+1))),t<0?-e:e},iO=function(t,e){for(var n,r=2*Math.cos(2*e),i=t.length-1,o=t[i],a=0;--i>=0;)n=r*o-a+t[i],a=o,o=n;return e+n*Math.sin(2*e)},oO=function(t,e,n){for(var r,i,o=Math.sin(e),a=Math.cos(e),s=eO(n),l=function(t){var e=Math.exp(t);return e=(e+1/e)/2}(n),c=2*a*l,u=-2*o*s,h=t.length-1,d=t[h],p=0,f=0,m=0;--h>=0;)r=f,i=p,d=c*(f=d)-r-u*(p=m)+t[h],m=u*f-i+c*p;return[(c=o*l)*d-(u=a*s)*m,c*m+u*d]};var aO={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(tO.init.apply(this),this.forward=tO.forward,this.inverse=tO.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),n*=e,this.cgb[1]=n*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n*=e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),n*=e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(e*(-24832/14175)-2.4)),n*=e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n*=e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),n*=e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n*=e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n*=e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n*=e,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=.6650675310896665*n;var r=iO(this.cbg,this.lat0);this.Zb=-this.Qn*(r+function(t,e){for(var n,r=2*Math.cos(e),i=t.length-1,o=t[i],a=0;--i>=0;)n=r*o-a+t[i],a=o,o=n;return Math.sin(e)*n}(this.gtu,2*r))},forward:function(t){var e=eT(t.x-this.long0),n=t.y;n=iO(this.cbg,n);var r=Math.sin(n),i=Math.cos(n),o=Math.sin(e),a=Math.cos(e);n=Math.atan2(r,a*i),e=Math.atan2(o*i,nO(r,i*a)),e=rO(Math.tan(e));var s,l,c=oO(this.gtu,2*n,2*e);return n+=c[0],e+=c[1],Math.abs(e)<=2.623395162778?(s=this.a*(this.Qn*e)+this.x0,l=this.a*(this.Qn*n+this.Zb)+this.y0):(s=1/0,l=1/0),t.x=s,t.y=l,t},inverse:function(t){var e,n,r=(t.x-this.x0)*(1/this.a),i=(t.y-this.y0)*(1/this.a);if(i=(i-this.Zb)/this.Qn,r/=this.Qn,Math.abs(r)<=2.623395162778){var o=oO(this.utg,2*i,2*r);i+=o[0],r+=o[1],r=Math.atan(eO(r));var a=Math.sin(i),s=Math.cos(i),l=Math.sin(r),c=Math.cos(r);i=Math.atan2(a*c,nO(l,c*s)),r=Math.atan2(l,c*s),e=eT(r+this.long0),n=iO(this.cgb,i)}else e=1/0,n=1/0;return t.x=e,t.y=n,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]};var sO={init:function(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*(eT(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*TS,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,aO.init.apply(this),this.forward=aO.forward,this.inverse=aO.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"},lO=function(t,e){return Math.pow((1-t)/(1+t),e)};var cO={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+IS)/(Math.pow(Math.tan(.5*this.lat0+IS),this.C)*lO(this.e*t,this.ratexp))},forward:function(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+IS),this.C)*lO(this.e*Math.sin(n),this.ratexp))-SS,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,n=t.y,r=Math.pow(Math.tan(.5*n+IS)/this.K,1/this.C),i=20;i>0&&(n=2*Math.atan(r*lO(this.e*Math.sin(t.y),-.5*this.e))-SS,!(Math.abs(n-t.y)<1e-14));--i)t.y=n;return i?(t.x=e,t.y=n,t):null},names:["gauss"]};var uO={init:function(){cO.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,n,r,i;return t.x=eT(t.x-this.long0),cO.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),r=Math.cos(t.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*r),t.x=i*n*Math.sin(t.x),t.y=i*(this.cosc0*e-this.sinc0*n*r),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,n,r,i,o;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,o=Math.sqrt(t.x*t.x+t.y*t.y)){var a=2*Math.atan2(o,this.R2);e=Math.sin(a),n=Math.cos(a),i=Math.asin(n*this.sinc0+t.y*e*this.cosc0/o),r=Math.atan2(t.x*e,o*this.cosc0*n-t.y*this.sinc0*e)}else i=this.phic0,r=0;return t.x=r,t.y=i,cO.inverse.apply(this,[t]),t.x=eT(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};var hO={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=1e-10&&(this.k0=.5*(1+tT(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=1e-10&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=1e-10&&(this.k0=.5*this.cons*QS(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/nT(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=QS(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-SS,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,n,r,i,o,a,s=t.x,l=t.y,c=Math.sin(l),u=Math.cos(l),h=eT(s-this.long0);return Math.abs(Math.abs(s-this.long0)-Math.PI)<=1e-10&&Math.abs(l+this.lat0)<=1e-10?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*c+this.coslat0*u*Math.cos(h)),t.x=this.a*e*u*Math.sin(h)+this.x0,t.y=this.a*e*(this.coslat0*c-this.sinlat0*u*Math.cos(h))+this.y0,t):(n=2*Math.atan(this.ssfn_(l,c,this.e))-SS,i=Math.cos(n),r=Math.sin(n),Math.abs(this.coslat0)<=1e-10?(o=nT(this.e,l*this.con,this.con*c),a=2*this.a*this.k0*o/this.cons,t.x=this.x0+a*Math.sin(s-this.long0),t.y=this.y0-this.con*a*Math.cos(s-this.long0),t):(Math.abs(this.sinlat0)<1e-10?(e=2*this.a*this.k0/(1+i*Math.cos(h)),t.y=e*r):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*r+this.cosX0*i*Math.cos(h))),t.y=e*(this.cosX0*r-this.sinX0*i*Math.cos(h))+this.y0),t.x=e*i*Math.sin(h)+this.x0,t))},inverse:function(t){var e,n,r,i,o;t.x-=this.x0,t.y-=this.y0;var a=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var s=2*Math.atan(a/(2*this.a*this.k0));return e=this.long0,n=this.lat0,a<=1e-10?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(s)*this.sinlat0+t.y*Math.sin(s)*this.coslat0/a),e=Math.abs(this.coslat0)<1e-10?this.lat0>0?eT(this.long0+Math.atan2(t.x,-1*t.y)):eT(this.long0+Math.atan2(t.x,t.y)):eT(this.long0+Math.atan2(t.x*Math.sin(s),a*this.coslat0*Math.cos(s)-t.y*this.sinlat0*Math.sin(s))),t.x=e,t.y=n,t)}if(Math.abs(this.coslat0)<=1e-10){if(a<=1e-10)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,r=a*this.cons/(2*this.a*this.k0),n=this.con*rT(this.e,r),e=this.con*eT(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else i=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a<=1e-10?o=this.X0:(o=Math.asin(Math.cos(i)*this.sinX0+t.y*Math.sin(i)*this.cosX0/a),e=eT(this.long0+Math.atan2(t.x*Math.sin(i),a*this.cosX0*Math.cos(i)-t.y*this.sinX0*Math.sin(i)))),n=-1*rT(this.e,Math.tan(.5*(SS+o)));return t.x=e,t.y=n,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,e,n){return e*=n,Math.tan(.5*(SS+t))*Math.pow((1-e)/(1+e),.5*n)}};var dO={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,r=1/this.rf,i=2*r-Math.pow(r,2),o=this.e=Math.sqrt(i);this.R=this.k0*n*Math.sqrt(1-i)/(1-i*Math.pow(e,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+t/2)),l=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*s+this.alpha*o/2*l},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),r=-this.alpha*(e+n)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(o))),s=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,t.x=this.R*a+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,n=t.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),a=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),s=this.lambda0+a/this.alpha,l=0,c=o,u=-1e3,h=0;Math.abs(c-u)>1e-7;){if(++h>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(c))/2)),u=c,c=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=s,t.y=c,t},names:["somerc"]};var pO={init:function(){var t,e,n,r,i,o,a,s,l,c,u,h,d,p=0,f=0,m=0,g=0,y=0,v=0,_=0;this.no_off=(d="object"==typeof(h=this).PROJECTION?Object.keys(h.PROJECTION)[0]:h.PROJECTION,"no_uoff"in h||"no_off"in h||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(d)),this.no_rot="no_rot"in this;var b=!1;"alpha"in this&&(b=!0);var x=!1;if("rectified_grid_angle"in this&&(x=!0),b&&(_=this.alpha),x&&(p=this.rectified_grid_angle*TS),b||x)f=this.longc;else if(m=this.long1,y=this.lat1,g=this.long2,v=this.lat2,Math.abs(y-v)<=1e-7||(t=Math.abs(y))<=1e-7||Math.abs(t-SS)<=1e-7||Math.abs(Math.abs(this.lat0)-SS)<=1e-7||Math.abs(Math.abs(v)-SS)<=1e-7)throw new Error;var w=1-this.es;e=Math.sqrt(w),Math.abs(this.lat0)>1e-10?(s=Math.sin(this.lat0),n=Math.cos(this.lat0),t=1-this.es*s*s,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/w),this.A=this.B*this.k0*e/t,(i=(r=this.B*e/(n*Math.sqrt(t)))*r-1)<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=r,this.E*=Math.pow(nT(this.e,this.lat0,s),this.B)):(this.B=1/e,this.A=this.k0,this.E=r=i=1),b||x?(b?(u=Math.asin(Math.sin(_)/r),x||(p=_)):(u=p,_=Math.asin(r*Math.sin(u))),this.lam0=f-Math.asin(.5*(i-1/i)*Math.tan(u))/this.B):(o=Math.pow(nT(this.e,y,Math.sin(y)),this.B),a=Math.pow(nT(this.e,v,Math.sin(v)),this.B),i=this.E/o,l=(a-o)/(a+o),c=((c=this.E*this.E)-a*o)/(c+a*o),(t=m-g)<-Math.pi?g-=AS:t>Math.pi&&(g+=AS),this.lam0=eT(.5*(m+g)-Math.atan(c*Math.tan(.5*this.B*(m-g))/l)/this.B),u=Math.atan(2*Math.sin(this.B*eT(m-this.lam0))/(i-1/i)),p=_=Math.asin(r*Math.sin(u))),this.singam=Math.sin(u),this.cosgam=Math.cos(u),this.sinrot=Math.sin(p),this.cosrot=Math.cos(p),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(_))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*u,this.v_pole_n=this.ArB*Math.log(Math.tan(IS-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(IS+i))},forward:function(t){var e,n,r,i,o,a,s,l,c={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-SS)>1e-10){if(e=.5*((o=this.E/Math.pow(nT(this.e,t.y,Math.sin(t.y)),this.B))-(a=1/o)),n=.5*(o+a),i=Math.sin(this.B*t.x),r=(e*this.singam-i*this.cosgam)/n,Math.abs(Math.abs(r)-1)<1e-10)throw new Error;l=.5*this.ArB*Math.log((1-r)/(1+r)),a=Math.cos(this.B*t.x),s=Math.abs(a)<1e-7?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+i*this.singam,a)}else l=t.y>0?this.v_pole_n:this.v_pole_s,s=this.ArB*t.y;return this.no_rot?(c.x=s,c.y=l):(s-=this.u_0,c.x=l*this.cosrot+s*this.sinrot,c.y=s*this.cosrot-l*this.sinrot),c.x=this.a*c.x+this.x0,c.y=this.a*c.y+this.y0,c},inverse:function(t){var e,n,r,i,o,a,s,l={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(n=t.y,e=t.x):(n=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),i=.5*((r=Math.exp(-this.BrA*n))-1/r),o=.5*(r+1/r),s=((a=Math.sin(this.BrA*e))*this.cosgam+i*this.singam)/o,Math.abs(Math.abs(s)-1)<1e-10)l.x=0,l.y=s<0?-SS:SS;else{if(l.y=this.E/Math.sqrt((1+s)/(1-s)),l.y=rT(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(i*this.cosgam-a*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]};var fO={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<1e-10)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),r=QS(this.e,e,n),i=nT(this.e,this.lat1,e),o=Math.sin(this.lat2),a=Math.cos(this.lat2),s=QS(this.e,o,a),l=nT(this.e,this.lat2,o),c=nT(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>1e-10?this.ns=Math.log(r/s)/Math.log(i/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(c,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=1e-10&&(n=tT(n)*(SS-2e-10));var r,i,o=Math.abs(Math.abs(n)-SS);if(o>1e-10)r=nT(this.e,n,Math.sin(n)),i=this.a*this.f0*Math.pow(r,this.ns);else{if((o=n*this.ns)<=0)return null;i=0}var a=this.ns*eT(e-this.long0);return t.x=this.k0*(i*Math.sin(a))+this.x0,t.y=this.k0*(this.rh-i*Math.cos(a))+this.y0,t},inverse:function(t){var e,n,r,i,o,a=(t.x-this.x0)/this.k0,s=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+s*s),n=1):(e=-Math.sqrt(a*a+s*s),n=-1);var l=0;if(0!==e&&(l=Math.atan2(n*a,n*s)),0!==e||this.ns>0){if(n=1/this.ns,r=Math.pow(e/(this.a*this.f0),n),-9999===(i=rT(this.e,r)))return null}else i=-SS;return o=eT(l/this.ns+this.long0),t.x=o,t.y=i,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]};var mO={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,n,r,i,o,a,s,l=t.x,c=t.y,u=eT(l-this.long0);return e=Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(c/2+this.s45),this.alfa)/e)-this.s45),r=-u*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),o=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(i)),a=this.n*o,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),t.y=s*Math.cos(a)/1,t.x=s*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,n,r,i,o,a,s,l=t.x;t.x=t.y,t.y=l,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),i=Math.atan2(t.y,t.x)/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),n=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),t.x=this.long0-n/this.alfa,a=e,s=0;var c=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(s=1),a=t.y,c+=1}while(0===s&&c<15);return c>=15?null:t},names:["Krovak","krovak"]},gO=function(t,e,n,r,i){return t*i-e*Math.sin(2*i)+n*Math.sin(4*i)-r*Math.sin(6*i)},yO=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))},vO=function(t){return.375*t*(1+.25*t*(1+.46875*t))},_O=function(t){return.05859375*t*t*(1+.75*t)},bO=function(t){return t*t*t*(35/3072)},xO=function(t,e,n){var r=e*n;return t/Math.sqrt(1-r*r)},wO=function(t){return Math.abs(t)<SS?t:t-tT(t)*Math.PI},EO=function(t,e,n,r,i){var o,a;o=t/e;for(var s=0;s<15;s++)if(o+=a=(t-(e*o-n*Math.sin(2*o)+r*Math.sin(4*o)-i*Math.sin(6*o)))/(e-2*n*Math.cos(2*o)+4*r*Math.cos(4*o)-6*i*Math.cos(6*o)),Math.abs(a)<=1e-10)return o;return NaN};var CO={init:function(){this.sphere||(this.e0=yO(this.es),this.e1=vO(this.es),this.e2=_O(this.es),this.e3=bO(this.es),this.ml0=this.a*gO(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,n,r=t.x,i=t.y;if(r=eT(r-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(r)),n=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var o=Math.sin(i),a=Math.cos(i),s=xO(this.a,this.e,o),l=Math.tan(i)*Math.tan(i),c=r*Math.cos(i),u=c*c,h=this.es*a*a/(1-this.es);e=s*c*(1-u*l*(1/6-(8-l+8*h)*u/120)),n=this.a*gO(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+s*o/a*u*(.5+(5-l+6*h)*u/24)}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r=t.x/this.a,i=t.y/this.a;if(this.sphere){var o=i+this.lat0;e=Math.asin(Math.sin(o)*Math.cos(r)),n=Math.atan2(Math.tan(r),Math.cos(o))}else{var a=this.ml0/this.a+i,s=EO(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-SS)<=1e-10)return t.x=this.long0,t.y=SS,i<0&&(t.y*=-1),t;var l=xO(this.a,this.e,Math.sin(s)),c=l*l*l/this.a/this.a*(1-this.es),u=Math.pow(Math.tan(s),2),h=r*this.a/l,d=h*h;e=s-l*Math.tan(s)/c*h*h*(.5-(1+3*u)*h*h/24),n=h*(1-d*(u/3+(1+3*u)*u*d/15))/Math.cos(s)}return t.x=eT(n+this.long0),t.y=wO(e),t},names:["Cassini","Cassini_Soldner","cass"]},SO=function(t,e){var n;return t>1e-7?(1-t*t)*(e/(1-(n=t*e)*n)-.5/t*Math.log((1-n)/(1+n))):2*e};var TO={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-SS)<1e-10?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<1e-10?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=SO(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,n=[];return n[0]=.3333333333333333*t,e=t*t,n[0]+=.17222222222222222*e,n[1]=.06388888888888888*e,e*=t,n[0]+=.10257936507936508*e,n[1]+=.0664021164021164*e,n[2]=.016415012942191543*e,n}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=SO(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,n,r,i,o,a,s,l,c,u,h=t.x,d=t.y;if(h=eT(h-this.long0),this.sphere){if(o=Math.sin(d),u=Math.cos(d),r=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+u*r:1+this.sinph0*o+this.cosph0*u*r)<=1e-10)return null;e=(n=Math.sqrt(2/n))*u*Math.sin(h),n*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*u*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(d+this.lat0)<1e-10)return null;n=IS-.5*d,e=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(h),n*=r}}else{switch(s=0,l=0,c=0,r=Math.cos(h),i=Math.sin(h),o=Math.sin(d),a=SO(this.e,o),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(s=a/this.qp,l=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:c=1+this.sinb1*s+this.cosb1*l*r;break;case this.EQUIT:c=1+l*r;break;case this.N_POLE:c=SS+d,a=this.qp-a;break;case this.S_POLE:c=d-SS,a=this.qp+a}if(Math.abs(c)<1e-10)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:c=Math.sqrt(2/c),n=this.mode===this.OBLIQ?this.ymf*c*(this.cosb1*s-this.sinb1*l*r):(c=Math.sqrt(2/(1+l*r)))*s*this.ymf,e=this.xmf*c*l*i;break;case this.N_POLE:case this.S_POLE:a>=0?(e=(c=Math.sqrt(a))*i,n=r*(this.mode===this.S_POLE?c:-c)):e=n=0}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,i,o,a,s,l,c,u,h=t.x/this.a,d=t.y/this.a;if(this.sphere){var p,f=0,m=0;if((n=.5*(p=Math.sqrt(h*h+d*d)))>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(m=Math.sin(n),f=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(p)<=1e-10?0:Math.asin(d*m/p),h*=m,d=f*p;break;case this.OBLIQ:n=Math.abs(p)<=1e-10?this.lat0:Math.asin(f*this.sinph0+d*m*this.cosph0/p),h*=m*this.cosph0,d=(f-Math.sin(n)*this.sinph0)*p;break;case this.N_POLE:d=-d,n=SS-n;break;case this.S_POLE:n-=SS}e=0!==d||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(h,d):0}else{if(s=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(h/=this.dd,d*=this.dd,(a=Math.sqrt(h*h+d*d))<1e-10)return t.x=this.long0,t.y=this.lat0,t;i=2*Math.asin(.5*a/this.rq),r=Math.cos(i),h*=i=Math.sin(i),this.mode===this.OBLIQ?(s=r*this.sinb1+d*i*this.cosb1/a,o=this.qp*s,d=a*this.cosb1*r-d*this.sinb1*i):(s=d*i/a,o=this.qp*s,d=a*r)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(d=-d),!(o=h*h+d*d))return t.x=this.long0,t.y=this.lat0,t;s=1-o/this.qp,this.mode===this.S_POLE&&(s=-s)}e=Math.atan2(h,d),l=Math.asin(s),c=this.apa,u=l+l,n=l+c[0]*Math.sin(u)+c[1]*Math.sin(u+u)+c[2]*Math.sin(u+u+u)}return t.x=eT(this.long0+e),t.y=n,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},OO=function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)};var IO={init:function(){Math.abs(this.lat1+this.lat2)<1e-10||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=QS(this.e3,this.sin_po,this.cos_po),this.qs1=SO(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=QS(this.e3,this.sin_po,this.cos_po),this.qs2=SO(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=SO(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>1e-10?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var r=SO(this.e3,this.sin_phi,this.cos_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,o=this.ns0*eT(e-this.long0),a=i*Math.sin(o)+this.x0,s=this.rh-i*Math.cos(o)+this.y0;return t.x=a,t.y=s,t},inverse:function(t){var e,n,r,i,o,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),r=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),r=-1),i=0,0!==e&&(i=Math.atan2(r*t.x,r*t.y)),r=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-r*r)/(2*this.ns0)):(n=(this.c-r*r)/this.ns0,a=this.phi1z(this.e3,n)),o=eT(i/this.ns0+this.long0),t.x=o,t.y=a,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var n,r,i,o,a=OO(.5*e);if(t<1e-10)return a;for(var s=t*t,l=1;l<=25;l++)if(a+=o=.5*(i=1-(r=t*(n=Math.sin(a)))*r)*i/Math.cos(a)*(e/(1-s)-n/i+.5/t*Math.log((1-r)/(1+r))),Math.abs(o)<=1e-7)return a;return null}};var AO={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,n,r,i,o,a,s,l=t.x,c=t.y;return r=eT(l-this.long0),e=Math.sin(c),n=Math.cos(c),i=Math.cos(r),1,(o=this.sin_p14*e+this.cos_p14*n*i)>0||Math.abs(o)<=1e-10?(a=this.x0+1*this.a*n*Math.sin(r)/o,s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*i)/o):(a=this.x0+this.infinity_dist*n*Math.sin(r),s=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*i)),t.x=a,t.y=s,t},inverse:function(t){var e,n,r,i,o,a;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(i=Math.atan2(e,this.rc),n=Math.sin(i),r=Math.cos(i),a=OO(r*this.sin_p14+t.y*n*this.cos_p14/e),o=Math.atan2(t.x*n,e*this.cos_p14*r-t.y*this.sin_p14*n),o=eT(this.long0+o)):(a=this.phic0,o=0),t.x=o,t.y=a,t},names:["gnom"]};var MO={init:function(){this.sphere||(this.k0=QS(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,n,r=t.x,i=t.y,o=eT(r-this.long0);if(this.sphere)e=this.x0+this.a*o*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var a=SO(this.e,Math.sin(i));e=this.x0+this.a*this.k0*o,n=this.y0+this.a*a*.5/this.k0}return t.x=e,t.y=n,t},inverse:function(t){var e,n;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=eT(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=function(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*SS:SS;for(var r,i,o,a,s=Math.asin(.5*e),l=0;l<30;l++)if(i=Math.sin(s),o=Math.cos(s),a=t*i,s+=r=Math.pow(1-a*a,2)/(2*o)*(e/(1-t*t)-i/(1-a*a)+.5/t*Math.log((1-a)/(1+a))),Math.abs(r)<=1e-10)return s;return NaN}(this.e,2*t.y*this.k0/this.a),e=eT(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t},names:["cea"]};var kO={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,n=t.y,r=eT(e-this.long0),i=wO(n-this.lat0);return t.x=this.x0+this.a*r*this.rc,t.y=this.y0+this.a*i,t},inverse:function(t){var e=t.x,n=t.y;return t.x=eT(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=wO(this.lat0+(n-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]};var PO={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=yO(this.es),this.e1=vO(this.es),this.e2=_O(this.es),this.e3=bO(this.es),this.ml0=this.a*gO(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,n,r,i=t.x,o=t.y,a=eT(i-this.long0);if(r=a*Math.sin(o),this.sphere)Math.abs(o)<=1e-10?(e=this.a*a,n=-1*this.a*this.lat0):(e=this.a*Math.sin(r)/Math.tan(o),n=this.a*(wO(o-this.lat0)+(1-Math.cos(r))/Math.tan(o)));else if(Math.abs(o)<=1e-10)e=this.a*a,n=-1*this.ml0;else{var s=xO(this.a,this.e,Math.sin(o))/Math.tan(o);e=s*Math.sin(r),n=this.a*gO(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+s*(1-Math.cos(r))}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){var e,n,r,i,o,a,s,l,c;if(r=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=1e-10)e=eT(r/this.a+this.long0),n=0;else{var u;for(a=this.lat0+i/this.a,s=r*r/this.a/this.a+a*a,l=a,o=20;o;--o)if(l+=c=-1*(a*(l*(u=Math.tan(l))+1)-l-.5*(l*l+s)*u)/((l-a)/u-1),Math.abs(c)<=1e-10){n=l;break}e=eT(this.long0+Math.asin(r*Math.tan(l)/this.a)/Math.sin(n))}else if(Math.abs(i+this.ml0)<=1e-10)n=0,e=eT(this.long0+r/this.a);else{var h,d,p,f,m;for(a=(this.ml0+i)/this.a,s=r*r/this.a/this.a+a*a,l=a,o=20;o;--o)if(m=this.e*Math.sin(l),h=Math.sqrt(1-m*m)*Math.tan(l),d=this.a*gO(this.e0,this.e1,this.e2,this.e3,l),p=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),l-=c=(a*(h*(f=d/this.a)+1)-f-.5*h*(f*f+s))/(this.es*Math.sin(2*l)*(f*f+s-2*a*f)/(4*h)+(a-f)*(h*p-2/Math.sin(2*l))-p),Math.abs(c)<=1e-10){n=l;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=eT(this.long0+Math.asin(r*h/this.a)/Math.sin(n))}return t.x=e,t.y=n,t},names:["Polyconic","poly"]};var DO={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,n=t.x,r=t.y-this.lat0,i=n-this.long0,o=r/CS*1e-5,a=i,s=1,l=0;for(e=1;e<=10;e++)s*=o,l+=this.A[e]*s;var c,u=l,h=a,d=1,p=0,f=0,m=0;for(e=1;e<=6;e++)c=p*u+d*h,d=d*u-p*h,p=c,f=f+this.B_re[e]*d-this.B_im[e]*p,m=m+this.B_im[e]*d+this.B_re[e]*p;return t.x=m*this.a+this.x0,t.y=f*this.a+this.y0,t},inverse:function(t){var e,n,r=t.x,i=t.y,o=r-this.x0,a=(i-this.y0)/this.a,s=o/this.a,l=1,c=0,u=0,h=0;for(e=1;e<=6;e++)n=c*a+l*s,l=l*a-c*s,c=n,u=u+this.C_re[e]*l-this.C_im[e]*c,h=h+this.C_im[e]*l+this.C_re[e]*c;for(var d=0;d<this.iterations;d++){var p,f=u,m=h,g=a,y=s;for(e=2;e<=6;e++)p=m*u+f*h,f=f*u-m*h,m=p,g+=(e-1)*(this.B_re[e]*f-this.B_im[e]*m),y+=(e-1)*(this.B_im[e]*f+this.B_re[e]*m);f=1,m=0;var v=this.B_re[1],_=this.B_im[1];for(e=2;e<=6;e++)p=m*u+f*h,f=f*u-m*h,m=p,v+=e*(this.B_re[e]*f-this.B_im[e]*m),_+=e*(this.B_im[e]*f+this.B_re[e]*m);var b=v*v+_*_;u=(g*v+y*_)/b,h=(y*v-g*_)/b}var x=u,w=h,E=1,C=0;for(e=1;e<=9;e++)E*=x,C+=this.D[e]*E;var S=this.lat0+C*CS*1e5,T=this.long0+w;return t.x=T,t.y=S,t},names:["New_Zealand_Map_Grid","nzmg"]};var RO={init:function(){},forward:function(t){var e=t.x,n=t.y,r=eT(e-this.long0),i=this.x0+this.a*r,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=i,t.y=o,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=eT(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t},names:["Miller_Cylindrical","mill"]};var LO={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=XT(this.es)},forward:function(t){var e,n,r=t.x,i=t.y;if(r=eT(r-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(i),a=20;a;--a){var s=(this.m*i+Math.sin(i)-o)/(this.m+Math.cos(i));if(i-=s,Math.abs(s)<1e-10)break}else i=1!==this.n?Math.asin(this.n*Math.sin(i)):i;e=this.a*this.C_x*r*(this.m+Math.cos(i)),n=this.a*this.C_y*i}else{var l=Math.sin(i),c=Math.cos(i);n=this.a*JT(i,l,c,this.en),e=this.a*r*c/Math.sqrt(1-this.es*l*l)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,r,i;return t.x-=this.x0,r=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,r/=this.C_x*(this.m+Math.cos(e)),this.m?e=OO((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=OO(Math.sin(e)/this.n)),r=eT(r+this.long0),e=wO(e)):(e=QT(t.y/this.a,this.es,this.en),(i=Math.abs(e))<SS?(i=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)),r=eT(n)):i-1e-10<SS&&(r=this.long0)),t.x=r,t.y=e,t},names:["Sinusoidal","sinu"]};var NO={init:function(){},forward:function(t){for(var e=t.x,n=t.y,r=eT(e-this.long0),i=n,o=Math.PI*Math.sin(n);;){var a=-(i+Math.sin(i)-o)/(1+Math.cos(i));if(i+=a,Math.abs(a)<1e-10)break}i/=2,Math.PI/2-Math.abs(n)<1e-10&&(r=0);var s=.900316316158*this.a*r*Math.cos(i)+this.x0,l=1.4142135623731*this.a*Math.sin(i)+this.y0;return t.x=s,t.y=l,t},inverse:function(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var r=eT(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var i=Math.asin(n);return t.x=r,t.y=i,t},names:["Mollweide","moll"]};var jO={init:function(){Math.abs(this.lat1+this.lat2)<1e-10||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=yO(this.es),this.e1=vO(this.es),this.e2=_O(this.es),this.e3=bO(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=QS(this.e,this.sinphi,this.cosphi),this.ml1=gO(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<1e-10?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=QS(this.e,this.sinphi,this.cosphi),this.ml2=gO(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=gO(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,n=t.x,r=t.y;if(this.sphere)e=this.a*(this.g-r);else{var i=gO(this.e0,this.e1,this.e2,this.e3,r);e=this.a*(this.g-i)}var o=this.ns*eT(n-this.long0),a=this.x0+e*Math.sin(o),s=this.y0+this.rh-e*Math.cos(o);return t.x=a,t.y=s,t},inverse:function(t){var e,n,r,i;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var o=0;if(0!==n&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere)return i=eT(this.long0+o/this.ns),r=wO(this.g-n/this.a),t.x=i,t.y=r,t;var a=this.g-n/this.a;return r=EO(a,this.e0,this.e1,this.e2,this.e3),i=eT(this.long0+o/this.ns),t.x=i,t.y=r,t},names:["Equidistant_Conic","eqdc"]};var FO={init:function(){this.R=this.a},forward:function(t){var e,n,r=t.x,i=t.y,o=eT(r-this.long0);Math.abs(i)<=1e-10&&(e=this.x0+this.R*o,n=this.y0);var a=OO(2*Math.abs(i/Math.PI));(Math.abs(o)<=1e-10||Math.abs(Math.abs(i)-SS)<=1e-10)&&(e=this.x0,n=i>=0?this.y0+Math.PI*this.R*Math.tan(.5*a):this.y0+Math.PI*this.R*-Math.tan(.5*a));var s=.5*Math.abs(Math.PI/o-o/Math.PI),l=s*s,c=Math.sin(a),u=Math.cos(a),h=u/(c+u-1),d=h*h,p=h*(2/c-1),f=p*p,m=Math.PI*this.R*(s*(h-f)+Math.sqrt(l*(h-f)*(h-f)-(f+l)*(d-f)))/(f+l);o<0&&(m=-m),e=this.x0+m;var g=l+h;return m=Math.PI*this.R*(p*g-s*Math.sqrt((f+l)*(l+1)-g*g))/(f+l),n=i>=0?this.y0+m:this.y0-m,t.x=e,t.y=n,t},inverse:function(t){var e,n,r,i,o,a,s,l,c,u,h,d;return t.x-=this.x0,t.y-=this.y0,h=Math.PI*this.R,o=(r=t.x/h)*r+(i=t.y/h)*i,h=3*(i*i/(l=-2*(a=-Math.abs(i)*(1+o))+1+2*i*i+o*o)+(2*(s=a-2*i*i+r*r)*s*s/l/l/l-9*a*s/l/l)/27)/(c=(a-s*s/3/l)/l)/(u=2*Math.sqrt(-c/3)),Math.abs(h)>1&&(h=h>=0?1:-1),d=Math.acos(h)/3,n=t.y>=0?(-u*Math.cos(d+Math.PI/3)-s/3/l)*Math.PI:-(-u*Math.cos(d+Math.PI/3)-s/3/l)*Math.PI,e=Math.abs(r)<1e-10?this.long0:eT(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(r*r-i*i)+o*o))/2/r),t.x=e,t.y=n,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};var zO={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,y,v,_,b,x,w,E=t.x,C=t.y,S=Math.sin(t.y),T=Math.cos(t.y),O=eT(E-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=1e-10?(t.x=this.x0+this.a*(SS-C)*Math.sin(O),t.y=this.y0-this.a*(SS-C)*Math.cos(O),t):Math.abs(this.sin_p12+1)<=1e-10?(t.x=this.x0+this.a*(SS+C)*Math.sin(O),t.y=this.y0+this.a*(SS+C)*Math.cos(O),t):(v=this.sin_p12*S+this.cos_p12*T*Math.cos(O),y=(g=Math.acos(v))?g/Math.sin(g):1,t.x=this.x0+this.a*y*T*Math.sin(O),t.y=this.y0+this.a*y*(this.cos_p12*S-this.sin_p12*T*Math.cos(O)),t):(e=yO(this.es),n=vO(this.es),r=_O(this.es),i=bO(this.es),Math.abs(this.sin_p12-1)<=1e-10?(o=this.a*gO(e,n,r,i,SS),a=this.a*gO(e,n,r,i,C),t.x=this.x0+(o-a)*Math.sin(O),t.y=this.y0-(o-a)*Math.cos(O),t):Math.abs(this.sin_p12+1)<=1e-10?(o=this.a*gO(e,n,r,i,SS),a=this.a*gO(e,n,r,i,C),t.x=this.x0+(o+a)*Math.sin(O),t.y=this.y0+(o+a)*Math.cos(O),t):(s=S/T,l=xO(this.a,this.e,this.sin_p12),c=xO(this.a,this.e,S),u=Math.atan((1-this.es)*s+this.es*l*this.sin_p12/(c*T)),_=0===(h=Math.atan2(Math.sin(O),this.cos_p12*Math.tan(u)-this.sin_p12*Math.cos(O)))?Math.asin(this.cos_p12*Math.sin(u)-this.sin_p12*Math.cos(u)):Math.abs(Math.abs(h)-Math.PI)<=1e-10?-Math.asin(this.cos_p12*Math.sin(u)-this.sin_p12*Math.cos(u)):Math.asin(Math.sin(O)*Math.cos(u)/Math.sin(h)),d=this.e*this.sin_p12/Math.sqrt(1-this.es),g=l*_*(1-(b=_*_)*(m=(p=this.e*this.cos_p12*Math.cos(h)/Math.sqrt(1-this.es))*p)*(1-m)/6+(x=b*_)/8*(f=d*p)*(1-2*m)+(w=x*_)/120*(m*(4-7*m)-3*d*d*(1-7*m))-w*_/48*f),t.x=this.x0+g*Math.sin(h),t.y=this.y0+g*Math.cos(h),t))},inverse:function(t){var e,n,r,i,o,a,s,l,c,u,h,d,p,f,m,g,y,v,_,b,x,w,E;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*SS*this.a)return;return n=e/this.a,r=Math.sin(n),i=Math.cos(n),o=this.long0,Math.abs(e)<=1e-10?a=this.lat0:(a=OO(i*this.sin_p12+t.y*r*this.cos_p12/e),s=Math.abs(this.lat0)-SS,o=Math.abs(s)<=1e-10?this.lat0>=0?eT(this.long0+Math.atan2(t.x,-t.y)):eT(this.long0-Math.atan2(-t.x,t.y)):eT(this.long0+Math.atan2(t.x*r,e*this.cos_p12*i-t.y*this.sin_p12*r))),t.x=o,t.y=a,t}return l=yO(this.es),c=vO(this.es),u=_O(this.es),h=bO(this.es),Math.abs(this.sin_p12-1)<=1e-10?(d=this.a*gO(l,c,u,h,SS),e=Math.sqrt(t.x*t.x+t.y*t.y),a=EO((d-e)/this.a,l,c,u,h),o=eT(this.long0+Math.atan2(t.x,-1*t.y)),t.x=o,t.y=a,t):Math.abs(this.sin_p12+1)<=1e-10?(d=this.a*gO(l,c,u,h,SS),e=Math.sqrt(t.x*t.x+t.y*t.y),a=EO((e-d)/this.a,l,c,u,h),o=eT(this.long0+Math.atan2(t.x,t.y)),t.x=o,t.y=a,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),m=Math.atan2(t.x,t.y),p=xO(this.a,this.e,this.sin_p12),g=Math.cos(m),v=-(y=this.e*this.cos_p12*g)*y/(1-this.es),_=3*this.es*(1-v)*this.sin_p12*this.cos_p12*g/(1-this.es),w=1-v*(x=(b=e/p)-v*(1+v)*Math.pow(b,3)/6-_*(1+3*v)*Math.pow(b,4)/24)*x/2-b*x*x*x/6,f=Math.asin(this.sin_p12*Math.cos(x)+this.cos_p12*Math.sin(x)*g),o=eT(this.long0+Math.asin(Math.sin(m)*Math.sin(x)/Math.cos(f))),E=Math.sin(f),a=Math.atan2((E-this.es*w*this.sin_p12)*Math.tan(f),E*(1-this.es)),t.x=o,t.y=a,t)},names:["Azimuthal_Equidistant","aeqd"]};var BO={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,n,r,i,o,a,s,l=t.x,c=t.y;return r=eT(l-this.long0),e=Math.sin(c),n=Math.cos(c),i=Math.cos(r),1,((o=this.sin_p14*e+this.cos_p14*n*i)>0||Math.abs(o)<=1e-10)&&(a=1*this.a*n*Math.sin(r),s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*i)),t.x=a,t.y=s,t},inverse:function(t){var e,n,r,i,o,a,s;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),n=OO(e/this.a),r=Math.sin(n),i=Math.cos(n),a=this.long0,Math.abs(e)<=1e-10?(s=this.lat0,t.x=a,t.y=s,t):(s=OO(i*this.sin_p14+t.y*r*this.cos_p14/e),o=Math.abs(this.lat0)-SS,Math.abs(o)<=1e-10?(a=this.lat0>=0?eT(this.long0+Math.atan2(t.x,-t.y)):eT(this.long0-Math.atan2(-t.x,t.y)),t.x=a,t.y=s,t):(a=eT(this.long0+Math.atan2(t.x*r,e*this.cos_p14*i-t.y*this.sin_p14*r)),t.x=a,t.y=s,t))},names:["ortho"]},UO=1,GO=2,VO=3,qO=4,HO=5,WO=6,ZO=1,$O=2,KO=3,YO=4;function XO(t,e,n,r){var i;return t<1e-10?(r.value=ZO,i=0):(i=Math.atan2(e,n),Math.abs(i)<=IS?r.value=ZO:i>IS&&i<=SS+IS?(r.value=$O,i-=SS):i>SS+IS||i<=-(SS+IS)?(r.value=KO,i=i>=0?i-MS:i+MS):(r.value=YO,i+=SS)),i}function JO(t,e){var n=t+e;return n<-MS?n+=AS:n>+MS&&(n-=AS),n}var QO={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=SS-IS/2?this.face=HO:this.lat0<=-(SS-IS/2)?this.face=WO:Math.abs(this.long0)<=IS?this.face=UO:Math.abs(this.long0)<=SS+IS?this.face=this.long0>0?GO:qO:this.face=VO,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,n,r,i,o,a,s={x:0,y:0},l={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,n=t.x,this.face===HO)i=SS-e,n>=IS&&n<=SS+IS?(l.value=ZO,r=n-SS):n>SS+IS||n<=-(SS+IS)?(l.value=$O,r=n>0?n-MS:n+MS):n>-(SS+IS)&&n<=-IS?(l.value=KO,r=n+SS):(l.value=YO,r=n);else if(this.face===WO)i=SS+e,n>=IS&&n<=SS+IS?(l.value=ZO,r=-n+SS):n<IS&&n>=-IS?(l.value=$O,r=-n):n<-IS&&n>=-(SS+IS)?(l.value=KO,r=-n-SS):(l.value=YO,r=n>0?-n+MS:-n-MS);else{var c,u,h,d,p,f;this.face===GO?n=JO(n,+SS):this.face===VO?n=JO(n,+MS):this.face===qO&&(n=JO(n,-SS)),d=Math.sin(e),p=Math.cos(e),f=Math.sin(n),c=p*Math.cos(n),u=p*f,h=d,this.face===UO?r=XO(i=Math.acos(c),h,u,l):this.face===GO?r=XO(i=Math.acos(u),h,-c,l):this.face===VO?r=XO(i=Math.acos(-c),h,-u,l):this.face===qO?r=XO(i=Math.acos(-u),h,c,l):(i=r=0,l.value=ZO)}return a=Math.atan(12/MS*(r+Math.acos(Math.sin(r)*Math.cos(IS))-SS)),o=Math.sqrt((1-Math.cos(i))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(r))))),l.value===$O?a+=SS:l.value===KO?a+=MS:l.value===YO&&(a+=1.5*MS),s.x=o*Math.cos(a),s.y=o*Math.sin(a),s.x=s.x*this.a+this.x0,s.y=s.y*this.a+this.y0,t.x=s.x,t.y=s.y,t},inverse:function(t){var e,n,r,i,o,a,s,l,c,u,h,d,p={lam:0,phi:0},f={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,n=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?f.value=ZO:t.y>=0&&t.y>=Math.abs(t.x)?(f.value=$O,e-=SS):t.x<0&&-t.x>=Math.abs(t.y)?(f.value=KO,e=e<0?e+MS:e-MS):(f.value=YO,e+=SS),c=MS/12*Math.tan(e),o=Math.sin(c)/(Math.cos(c)-1/Math.sqrt(2)),a=Math.atan(o),(s=1-(r=Math.cos(e))*r*(i=Math.tan(n))*i*(1-Math.cos(Math.atan(1/Math.cos(a)))))<-1?s=-1:s>1&&(s=1),this.face===HO)l=Math.acos(s),p.phi=SS-l,f.value===ZO?p.lam=a+SS:f.value===$O?p.lam=a<0?a+MS:a-MS:f.value===KO?p.lam=a-SS:p.lam=a;else if(this.face===WO)l=Math.acos(s),p.phi=l-SS,f.value===ZO?p.lam=-a+SS:f.value===$O?p.lam=-a:f.value===KO?p.lam=-a-SS:p.lam=a<0?-a-MS:-a+MS;else{var m,g,y;c=(m=s)*m,g=(c+=(y=c>=1?0:Math.sqrt(1-c)*Math.sin(a))*y)>=1?0:Math.sqrt(1-c),f.value===$O?(c=g,g=-y,y=c):f.value===KO?(g=-g,y=-y):f.value===YO&&(c=g,g=y,y=-c),this.face===GO?(c=m,m=-g,g=c):this.face===VO?(m=-m,g=-g):this.face===qO&&(c=m,m=g,g=-c),p.phi=Math.acos(-y)-SS,p.lam=Math.atan2(g,m),this.face===GO?p.lam=JO(p.lam,-SS):this.face===VO?p.lam=JO(p.lam,-MS):this.face===qO&&(p.lam=JO(p.lam,+SS))}return 0!==this.es&&(u=p.phi<0?1:0,h=Math.tan(p.phi),d=this.b/Math.sqrt(h*h+this.one_minus_f_squared),p.phi=Math.atan(Math.sqrt(this.a*this.a-d*d)/(this.one_minus_f*d)),u&&(p.phi=-p.phi)),p.lam+=this.long0,t.x=p.lam,t.y=p.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},tI=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],eI=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],nI=OS/5,rI=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))};var iI={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=eT(t.x-this.long0),n=Math.abs(t.y),r=Math.floor(n*nI);r<0?r=0:r>=18&&(r=17);var i={x:rI(tI[r],n=OS*(n-.08726646259971647*r))*e,y:rI(eI[r],n)};return t.y<0&&(i.y=-i.y),i.x=i.x*this.a*.8487+this.x0,i.y=i.y*this.a*1.3523+this.y0,i},inverse:function(t){var e={x:(t.x-this.x0)/(.8487*this.a),y:Math.abs(t.y-this.y0)/(1.3523*this.a)};if(e.y>=1)e.x/=tI[18][0],e.y=t.y<0?-SS:SS;else{var n=Math.floor(18*e.y);for(n<0?n=0:n>=18&&(n=17);;)if(eI[n][0]>e.y)--n;else{if(!(eI[n+1][0]<=e.y))break;++n}var r=eI[n],i=5*(e.y-r[0])/(eI[n+1][0]-r[0]);i=function(t,e,n,r){for(var i=e;r;--r){var o=t(i);if(i-=o,Math.abs(o)<n)break}return i}((function(t){return(rI(r,t)-e.y)/function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])}(r,t)}),i,1e-10,100),e.x/=rI(tI[n],i),e.y=(5*n+i)*TS,t.y<0&&(e.y=-e.y)}return e.x=eT(e.x+this.long0),e},names:["Robinson","robin"]};var oI={init:function(){this.name="geocent"},forward:function(t){return ET(t,this.es,this.a)},inverse:function(t){return CT(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]},aI=0,sI=1,lI=2,cI=3,uI={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};var hI={init:function(){if(Object.keys(uI).forEach(function(t){if(void 0===this[t])this[t]=uI[t].def;else{if(uI[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);uI[t].num&&(this[t]=parseFloat(this[t]))}uI[t].degrees&&(this[t]=this[t]*TS)}.bind(this)),Math.abs(Math.abs(this.lat0)-SS)<1e-10?this.mode=this.lat0<0?sI:aI:Math.abs(this.lat0)<1e-10?this.mode=lI:(this.mode=cI,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function(t){t.x-=this.long0;var e,n,r,i,o=Math.sin(t.y),a=Math.cos(t.y),s=Math.cos(t.x);switch(this.mode){case cI:n=this.sinph0*o+this.cosph0*a*s;break;case lI:n=a*s;break;case sI:n=-o;break;case aI:n=o}switch(e=(n=this.pn1/(this.p-n))*a*Math.sin(t.x),this.mode){case cI:n*=this.cosph0*o-this.sinph0*a*s;break;case lI:n*=o;break;case aI:n*=-a*s;break;case sI:n*=a*s}return i=1/((r=n*this.cg+e*this.sg)*this.sw*this.h1+this.cw),e=(e*this.cg-n*this.sg)*this.cw*i,n=r*i,t.x=e*this.a,t.y=n*this.a,t},inverse:function(t){t.x/=this.a,t.y/=this.a;var e,n,r,i={x:t.x,y:t.y};r=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*r,n=this.pn1*t.y*this.cw*r,t.x=e*this.cg+n*this.sg,t.y=n*this.cg-e*this.sg;var o=nO(t.x,t.y);if(Math.abs(o)<1e-10)i.x=0,i.y=t.y;else{var a,s;switch(s=1-o*o*this.pfact,s=(this.p-Math.sqrt(s))/(this.pn1/o+o/this.pn1),a=Math.sqrt(1-s*s),this.mode){case cI:i.y=Math.asin(a*this.sinph0+t.y*s*this.cosph0/o),t.y=(a-this.sinph0*Math.sin(i.y))*o,t.x*=s*this.cosph0;break;case lI:i.y=Math.asin(t.y*s/o),t.y=a*o,t.x*=s;break;case aI:i.y=Math.asin(a),t.y=-t.y;break;case sI:i.y=-Math.asin(a)}i.x=Math.atan2(t.x,t.y)}return t.x=i.x+this.long0,t.y=i.y,t},names:["Tilted_Perspective","tpers"]};var dI,pI={init:function(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(t){var e,n,r,i,o=t.x,a=t.y;if(o-=this.long0,"ellipse"===this.shape){a=Math.atan(this.radius_p2*Math.tan(a));var s=this.radius_p/nO(this.radius_p*Math.cos(a),Math.sin(a));if(n=s*Math.cos(o)*Math.cos(a),r=s*Math.sin(o)*Math.cos(a),i=s*Math.sin(a),(this.radius_g-n)*n-r*r-i*i*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(r/nO(i,e)),t.y=this.radius_g_1*Math.atan(i/e)):(t.x=this.radius_g_1*Math.atan(r/e),t.y=this.radius_g_1*Math.atan(i/nO(r,e)))}else"sphere"===this.shape&&(e=Math.cos(a),n=Math.cos(o)*e,r=Math.sin(o)*e,i=Math.sin(a),e=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(r/nO(i,e)),t.y=this.radius_g_1*Math.atan(i/e)):(t.x=this.radius_g_1*Math.atan(r/e),t.y=this.radius_g_1*Math.atan(i/nO(r,e))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function(t){var e,n,r,i,o=-1,a=0,s=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),a=Math.tan(t.x/this.radius_g_1)*nO(1,s)):(a=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*nO(1,a));var l=s/this.radius_p;if(e=a*a+l*l+o*o,(r=(n=2*this.radius_g*o)*n-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;i=(-n-Math.sqrt(r))/(2*e),o=this.radius_g+i*o,a*=i,s*=i,t.x=Math.atan2(a,o),t.y=Math.atan(s*Math.cos(t.x)/o),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),a=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+s*s)):(a=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+a*a)),e=a*a+s*s+o*o,(r=(n=2*this.radius_g*o)*n-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;i=(-n-Math.sqrt(r))/(2*e),o=this.radius_g+i*o,a*=i,s*=i,t.x=Math.atan2(a,o),t.y=Math.atan(s*Math.cos(t.x)/o)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]};jT.defaultDatum="WGS84",jT.Proj=wT,jT.WGS84=new jT.Proj("WGS84"),jT.Point=KT,jT.toPoint=kT,jT.defs=$S,jT.nadgrid=function(t,e){var n=new DataView(e),r=function(t){var e=t.getInt32(8,!1);if(11===e)return!1;11!==(e=t.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian");return!0}(n),i=function(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:yT(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}(n,r);i.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var o={header:i,subgrids:function(t,e,n){for(var r=[],i=0;i<e.nSubgrids;i++){var o=_T(t,176,n),a=bT(t,176,o,n),s=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),l=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);r.push({ll:[gT(o.lowerLongitude),gT(o.lowerLatitude)],del:[gT(o.longitudeInterval),gT(o.latitudeInterval)],lim:[s,l],count:o.gridNodeCount,cvs:vT(a)})}return r}(n,i,r)};return fT[t]=o,o},jT.transform=DT,jT.mgrs=FT,jT.version="__VERSION__",(dI=jT).Proj.projections.add(tO),dI.Proj.projections.add(aO),dI.Proj.projections.add(sO),dI.Proj.projections.add(uO),dI.Proj.projections.add(hO),dI.Proj.projections.add(dO),dI.Proj.projections.add(pO),dI.Proj.projections.add(fO),dI.Proj.projections.add(mO),dI.Proj.projections.add(CO),dI.Proj.projections.add(TO),dI.Proj.projections.add(IO),dI.Proj.projections.add(AO),dI.Proj.projections.add(MO),dI.Proj.projections.add(kO),dI.Proj.projections.add(PO),dI.Proj.projections.add(DO),dI.Proj.projections.add(RO),dI.Proj.projections.add(LO),dI.Proj.projections.add(NO),dI.Proj.projections.add(jO),dI.Proj.projections.add(FO),dI.Proj.projections.add(zO),dI.Proj.projections.add(BO),dI.Proj.projections.add(QO),dI.Proj.projections.add(iI),dI.Proj.projections.add(oI),dI.Proj.projections.add(hI),dI.Proj.projections.add(pI);var fI=jT,mI={EPSG_4326:{name:"PLATE_CAREE",url:Lv.BASEMAPS+"/4326/omt/{z}/{x}/{y}.pbf?",srs:"EPSG:4326"},EPSG_3857:{name:"MERCATOR",url:Lv.BASEMAPS+"/3857/omt/{z}/{x}/{y}.pbf?",srs:"EPSG:3857"},EPSG_3575:{name:"ARCTIC",url:Lv.BASEMAPS+"/3575/omt/{z}/{x}/{y}.pbf?",srs:"EPSG:3575"},EPSG_3031:{name:"ANTARCTIC",url:Lv.BASEMAPS+"/3031/omt/{z}/{x}/{y}.pbf?",srs:"EPSG:3031"}},gI=n(192),yI=n(194),vI=n(108),_I=n(127),bI=["#fed976","#fd8d3ccc","#fd8d3cbb","#f03b2088","#bd002688"],xI=[new gI.b({image:new yI.a({fill:new vI.a({color:bI[0]}),stroke:new _I.a({color:bI[1],width:1}),radius:2}),fill:new vI.a({color:bI[0]})}),new gI.b({image:new yI.a({fill:new vI.a({color:bI[1]}),radius:3}),fill:new vI.a({color:bI[1]})}),new gI.b({image:new yI.a({fill:new vI.a({color:bI[2]}),radius:5}),fill:new vI.a({color:bI[2]})}),new gI.b({image:new yI.a({fill:new vI.a({color:bI[3]}),radius:8}),fill:new vI.a({color:bI[3]})}),new gI.b({image:new yI.a({fill:new vI.a({color:bI[4]}),radius:12}),fill:new vI.a({color:bI[4]})})],wI=function(t,e){var n=function(t){return t<=10?0:t<=100?1:t<=1e3?2:t<=1e4?3:4}(t.get("total"));return xI[n]},EI=n(473),CI=n(469),SI=n(470),TI=n(471),OI=n(97),II=n(472),AI=n(75),MI=n(28),kI=n(12),PI=n(72);var DI=n(82),RI=n(63);fI.defs("EPSG:4326","+proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),fI.defs("EPSG:3575","+proj=laea +lat_0=90 +lon_0=10 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs"),fI.defs("EPSG:3031","+proj=stere +lat_0=-90 +lat_ts=-71 +lon_0=0 +k=1 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs"),function(t){var e,n,r=Object.keys(t.defs),i=r.length;for(e=0;e<i;++e){var o=r[e];if(!Object(kI.k)(o)){var a=t.defs(o),s=a.units;s||"longlat"!==a.projName||(s=MI.b.DEGREES),Object(kI.d)(new AI.a({code:o,axisOrientation:a.axis,metersPerUnit:a.to_meter,units:s}))}}for(e=0;e<i;++e){var l=r[e],c=Object(kI.k)(l);for(n=0;n<i;++n){var u=r[n],h=Object(kI.k)(u);if(!Object(PI.c)(l,u))if(t.defs[l]===t.defs[u])Object(kI.c)([c,h]);else{var d=t(l,u);Object(kI.b)(c,h,Object(kI.f)(c,h,d.forward),Object(kI.f)(h,c,d.inverse))}}}}(fI);var LI=6371007.2*Math.sqrt(2),NI=parseInt(window.devicePixelRatio)||1;function jI(t,e,n,r){(n=n||{}).srs=e.srs;var i=n.progress;delete n.progress;var o=new TI.a({format:new II.a,projection:e.projection,tileGrid:e.tileGrid,tilePixelRatio:NI,url:t+h_.a.stringify(n),wrapX:e.wrapX,maxZoom:14});return i&&(o.on("tileloadstart",(function(){i.addLoading()})),o.on("tileloadend",(function(){i.addLoaded()})),o.on("tileloaderror",(function(){i.addLoaded()}))),new SI.a({extent:e.extent,source:o,useInterimTilesOnError:!1,visible:!0,name:r,style:ES(gI.b,vI.a,_I.a,EI.a,CI.a)})}function FI(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"occurrences";(n=n||{}).srs=e.srs;var i=n.progress;delete n.progress;var o=n.onError;delete n.onError;var a=new TI.a({format:new II.a,projection:e.projection,tileGrid:e.tileGrid,tilePixelRatio:NI,url:t+h_.a.stringify(n),wrapX:e.wrapX,maxZoom:18});return i&&(a.on("tileloadstart",(function(){i.addLoading()})),a.on("tileloadend",(function(){i.addLoaded()})),a.on("tileloaderror",(function(){i.addLoaded()}))),o&&a.on("tileloaderror",(function(t){o()})),new SI.a({extent:e.extent,source:a,useInterimTilesOnError:!1,visible:!0,name:r,style:wI})}var zI,BI={EPSG_4326:(zI=Array(19).fill().map((function(t,e){return 180/512/Math.pow(2,e)})),{name:"EPSG_4326",wrapX:!0,srs:"EPSG:4326",projection:"EPSG:4326",epsg:4326,tileGrid:new OI.a({extent:kI.k("EPSG:4326").getExtent(),minZoom:0,maxZoom:18,resolutions:zI,tileSize:512}),resolutions:zI,fitExtent:[-179,-1,179,1],getView:function(t,e,n){return t=t||0,e=e||0,n=n||0,new RI.a({maxZoom:18,minZoom:0,center:[e,t],zoom:n,projection:"EPSG:4326"})},getBaseLayer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return jI(mI.EPSG_4326.url,this,t,"baseLayer")},getOccurrenceLayer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return jI(Lv.API_V2+"/map/occurrence/density/{z}/{x}/{y}.mvt?",this,t)},getAdhocLayer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return FI(Lv.API_V2+"/map/occurrence/adhoc/{z}/{x}/{y}.mvt?",this,t)}}),EPSG_3575:function(){var t=[-LI,-LI,LI,LI];kI.k("EPSG:3575").setExtent(t);var e=Array.from(new Array(19),(function(t,e){return LI/(512*Math.pow(2,e-1))}));return{name:"EPSG_3575",wrapX:!1,srs:"EPSG:3575",projection:"EPSG:3575",epsg:3575,tileGrid:new OI.a({extent:t,origin:[-LI,LI],minZoom:0,maxZoom:18,resolutions:e,tileSize:512}),resolutions:e,fitExtent:t,getView:function(t,e,n){return new RI.a({center:kI.h([0,89],"EPSG:3575"),projection:kI.k("EPSG:3575"),zoom:n||0,maxResolution:LI/512*2})},getBaseLayer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return jI(mI.EPSG_3575.url,this,t,"baseLayer")},getOccurrenceLayer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return jI(Lv.API_V2+"/map/occurrence/density/{z}/{x}/{y}.mvt?",this,t)},getAdhocLayer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return FI(Lv.API_V2+"/map/occurrence/adhoc/{z}/{x}/{y}.mvt?",this,t)}}}(),EPSG_3031:function(){var t=12367396.2185,e=[-t,-t,t,t];kI.k("EPSG:3031").setExtent(e);var n=Array.from(new Array(19),(function(e,n){return t/(512*Math.pow(2,n-1))}));return{name:"EPSG_3031",wrapX:!1,srs:"EPSG:3031",projection:"EPSG:3031",epsg:3031,tileGrid:new OI.a({extent:e,origin:[-t,t],minZoom:0,maxZoom:18,resolutions:n,tileSize:512}),resolutions:n,fitExtent:e,getView:function(e,n,r){return new RI.a({center:kI.h([0,-89],"EPSG:3031"),projection:kI.k("EPSG:3031"),zoom:r||0,maxResolution:t/512*2})},getBaseLayer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return jI(mI.EPSG_3031.url,this,t,"baseLayer")},getOccurrenceLayer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return jI(Lv.API_V2+"/map/occurrence/density/{z}/{x}/{y}.mvt?",this,t)},getAdhocLayer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return FI(Lv.API_V2+"/map/occurrence/adhoc/{z}/{x}/{y}.mvt?",this,t)}}}(),EPSG_3857:{name:"EPSG_3857",wrapX:!0,srs:"EPSG:3857",epsg:3857,tileGrid:Object(DI.b)({minZoom:0,maxZoom:18,tileSize:512}),fitExtent:kI.p([-90,-75,90,75],"EPSG:4326","EPSG:3857"),getView:function(t,e,n){return t=t||0,e=e||0,n=n||0,new RI.a({maxZoom:18,minZoom:0,center:[e,t],zoom:n,projection:"EPSG:3857"})},getBaseLayer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return jI(mI.EPSG_3857.url,this,t,"baseLayer")},getOccurrenceLayer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return jI(Lv.API_V2+"/map/occurrence/density/{z}/{x}/{y}.mvt?",this,t)},getAdhocLayer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return FI(Lv.API_V2+"/map/occurrence/adhoc/{z}/{x}/{y}.mvt?",this,t)}}},UI=(new gI.b({image:new yI.a({radius:5,fill:new vI.a({color:"orange"})})}),n(267)),GI=n(165),VI=n(164),qI=["query","onMapClick","onPointClick","predicateHash"];function HI(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=yu()(t);if(e){var i=yu()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return mu()(this,n)}}var WI=VI.a({altShiftDragRotate:!1,pinchRotate:!1,mouseWheelZoom:!0}),ZI=function(t){pu()(n,t);var e=HI(n);function n(t){var r;return su()(this,n),(r=e.call(this,t)).addLayer=r.addLayer.bind(hu()(r)),r.updateLayer=r.updateLayer.bind(hu()(r)),r.onPointClick=r.onPointClick.bind(hu()(r)),r.myRef=c.a.createRef(),r.state={},r}return cu()(n,[{key:"componentDidMount",value:function(){var t=BI[this.props.projection||"EPSG_3031"],e=t.getBaseLayer();this.map=new UI.a({target:this.myRef.current,layers:[e],view:t.getView(0,0,1),controls:Object(GI.a)({zoom:!1,attribution:!1}),interactions:WI}),this.mapLoaded=!0,this.addLayer()}},{key:"componentWillUnmount",value:function(){this.map.setTarget(null)}},{key:"componentDidUpdate",value:function(t){var e,n;(t.query!==this.props.query&&this.mapLoaded&&this.updateLayer(),t.projection!==this.props.projection&&this.mapLoaded&&this.updateProjection(),t.view!==this.props.view&&this.mapLoaded&&this.updateProjection(),t.latestEvent!==this.props.latestEvent&&this.mapLoaded)&&("ZOOM_IN"===(null===(e=this.props.latestEvent)||void 0===e?void 0:e.type)?this.zoomIn():"ZOOM_OUT"===(null===(n=this.props.latestEvent)||void 0===n?void 0:n.type)&&this.zoomOut())}},{key:"zoomIn",value:function(){var t=this.map.getView();t.setZoom(t.getZoom()+1)}},{key:"zoomOut",value:function(){var t=this.map.getView();t.setZoom(t.getZoom()-1)}},{key:"removeLayer",value:function(t){var e=this;this.map.getLayers().getArray().filter((function(e){return e.get("name")===t})).forEach((function(t){return e.map.removeLayer(t)}))}},{key:"updateProjection",value:function(){this.map.getLayers().clear();var t=BI[this.props.projection||"EPSG_3031"],e=t.getBaseLayer();this.map.setView(t.getView(0,0,1)),t.fitExtent&&this.map.getView().fit(t.fitExtent,{constrainResolution:!1,maxZoom:12,minZoom:0}),this.map.addLayer(e),this.addLayer()}},{key:"updateLayer",value:function(){var t=this;this.map.getLayers().getArray().filter((function(t){return"occurrences"===t.get("name")})).forEach((function(e){return t.map.removeLayer(e)})),this.addLayer()}},{key:"onPointClick",value:function(t){this.props.onPointClick(t)}},{key:"addLayer",value:function(){var t=this,e=BI[this.props.projection||"EPSG_3031"].getAdhocLayer({style:"scaled.circles",mode:"GEO_CENTROID",squareSize:512,predicateHash:this.props.predicateHash,onError:function(e){t.props.registerPredicate&&t.props.registerPredicate()}});this.map.addLayer(e);var n=this.map;n.on("moveend",(function(t){var e=n.getView().getState(),r=e.center,i=e.zoom;sessionStorage.setItem("mapZoom",i),sessionStorage.setItem("mapLng",r[0]),sessionStorage.setItem("mapLat",r[1])}));var r=this.onPointClick,i=this.props.onMapClick;n.on("singleclick",(function(t){e.getFeatures(t.pixel).then((function(t){var e=t.length?t[0]:void 0;if(e){var n=e.properties_;r({geohash:n.geohash,count:n.total})}else i&&i()}))})),n.on("pointermove",(function(t){var e=n.getEventPixel(t.originalEvent),r=n.hasFeatureAtPixel(e,{layerFilter:function(t){return"occurrences"===t.values_.name}});n.getViewport().style.cursor=r?"pointer":""}))}},{key:"render",value:function(){var t=this.props,e=(t.query,t.onMapClick,t.onPointClick,t.predicateHash,s()(t,qI));return kt("div",o()({ref:this.myRef},e))}}]),n}(l.Component);var $I={name:"1ur9udb",styles:"flex:1 1 100%;display:flex;height:100%;max-height:100vh;flex-direction:column;position:relative"},KI=function(t){t.theme;return $I},YI=function(t){var e=t.theme;return Pt("flex:1 1 100%;border:1px solid ",e.paperBorderColor,";border-radius:",e.borderRadius,"px;display:flex;flex-direction:column;height:100%;canvas:focus{outline:none;}","")},XI={name:"iz8ie5",styles:"z-index:10;margin:12px;position:absolute;left:0;top:0;width:350px;max-width:100%;height:auto;max-height:calc(100% - 24px);display:flex;flex-direction:column"},JI=["labelMap","query","q","pointData","pointError","pointLoading","loading","total","predicateHash","registerPredicate","loadPointData","defaultMapSettings"];var QI=function(t){var e,n,r=t.labelMap,i=t.query,o=t.q,a=t.pointData,u=t.pointError,h=t.pointLoading,d=t.loading,p=t.total,f=t.predicateHash,m=t.registerPredicate,g=t.loadPointData,y=t.defaultMapSettings,v=(s()(t,JI),Hi({animated:!0,modal:!1})),_=Object(l.useContext)(Zt),b=Object(l.useState)("EPSG_3857"),x=Nt()(b,2),w=x[0],E=x[1],C=Object(l.useState)(),S=Nt()(C,2),T=S[0],O=S[1],I=Object(l.useState)(),A=Nt()(I,2),M=A[0],k=(A[1],Object(l.useState)()),P=Nt()(k,2),D=P[0],R=P[1],L=Object(l.useState)(),N=Nt()(L,2),j=N[0],F=N[1],z=Object(l.useState)(!1),B=Nt()(z,2),U=B[0],G=B[1],V=(null==a||null===(e=a.occurrenceSearch)||void 0===e||null===(n=e.documents)||void 0===n?void 0:n.results)||[],q=Object(l.useState)({component:ZI}),H=Nt()(q,2),W=H[0],Z=H[1];Object(l.useEffect)((function(){F(V[D])}),[D,V]);var $,K,Y=Object(l.useCallback)((function(){R(Math.min(V.length-1,D+1))}),[V,D]),X=Object(l.useCallback)((function(){R(Math.max(0,D-1))}),[V,D]);return kt(c.a.Fragment,null,kt(Sf,{href:"https://www.gbif.org/occurrence/".concat(null==j?void 0:j.key),dialog:v,nextItem:Y,previousItem:X},kt(rC,{id:null==j?void 0:j.key,defaultTab:"details",style:{maxWidth:"100%",width:700,height:"100%"},onCloseRequest:function(){return v.setVisible(!1)}})),kt("div",{css:KI({theme:_})},kt(_S,{message:"counts.nResultsWithCoordinates",loading:d,total:p}),kt("div",{style:{position:"relative",height:"100%",flex:"1 1 auto",display:"flex",flexDirection:"column"}},U&&kt(vS,{onCloseRequest:function(t){return G(!1)},labelMap:r,onClick:function(t){var e=t.index;v.show(),R(e)},data:a,error:u,loading:h,css:(K={},Wv()(K),XI)}),kt("div",{css:($={theme:_},Pt("display:flex;position:absolute;background:white;z-index:100;border:1px solid #ddd;margin:12px;right:0;align-items:center;>button,>div>button{padding:6px;flex:1 1 auto;font-size:24px;color:",$.theme.color800,";}",""))},kt(pr,{appearance:"text",onClick:function(){return Z({component:wS})}},"test"),kt(pr,{appearance:"text",onClick:function(){return O({type:"ZOOM_IN"})}},kt(Ln,null)),kt(pr,{appearance:"text",onClick:function(){return O({type:"ZOOM_OUT"})}},kt(Nn,null)),kt(Jc,{style:{display:"inline-block"},"aria-label":"Custom menu",trigger:kt(pr,{appearance:"text"},kt(or,null)),items:function(t){return[kt(tu,{key:"About",onClick:function(){E("EPSG_3031"),t.hide()}},"Antarctic"),kt(tu,{key:"About",onClick:function(){E("EPSG_3575"),t.hide()}},"Arctic"),kt(tu,{key:"About",onClick:function(){E("EPSG_3857"),t.hide()}},"Mercator"),kt(tu,{key:"About",onClick:function(){E("EPSG_4326"),t.hide()}},"Plate Carrée")]}})),kt(W.component,{latestEvent:T,view:M,projection:w,defaultMapSettings:y,predicateHash:f,q:o,css:YI({theme:_}),theme:_,query:i,onMapClick:function(t){return G(!1)},onPointClick:function(t){G(!0),g(t)},registerPredicate:m}))))};const tA="0123456789bcdefghjkmnpqrstuvwxyz";class eA{static encode(t,e,n){if(void 0===n){for(let n=1;n<=12;n++){const r=eA.encode(t,e,n),i=eA.decode(r);if(i.lat==t&&i.lon==e)return r}n=12}if(t=Number(t),e=Number(e),n=Number(n),isNaN(t)||isNaN(e)||isNaN(n))throw new Error("Invalid geohash");let r=0,i=0,o=!0,a="",s=-90,l=90,c=-180,u=180;for(;a.length<n;){if(o){const t=(c+u)/2;e>=t?(r=2*r+1,c=t):(r*=2,u=t)}else{const e=(s+l)/2;t>=e?(r=2*r+1,s=e):(r*=2,l=e)}o=!o,5==++i&&(a+=tA.charAt(r),i=0,r=0)}return a}static decode(t){const e=eA.bounds(t),n=e.sw.lat,r=e.sw.lon,i=e.ne.lat,o=e.ne.lon;let a=(n+i)/2,s=(r+o)/2;return a=a.toFixed(Math.floor(2-Math.log(i-n)/Math.LN10)),s=s.toFixed(Math.floor(2-Math.log(o-r)/Math.LN10)),{lat:Number(a),lon:Number(s)}}static bounds(t){if(0==t.length)throw new Error("Invalid geohash");t=t.toLowerCase();let e=!0,n=-90,r=90,i=-180,o=180;for(let a=0;a<t.length;a++){const s=t.charAt(a),l=tA.indexOf(s);if(-1==l)throw new Error("Invalid geohash");for(let t=4;t>=0;t--){const a=l>>t&1;if(e){const t=(i+o)/2;1==a?i=t:o=t}else{const t=(n+r)/2;1==a?n=t:r=t}e=!e}}return{sw:{lat:n,lon:i},ne:{lat:r,lon:o}}}static adjacent(t,e){if(t=t.toLowerCase(),e=e.toLowerCase(),0==t.length)throw new Error("Invalid geohash");if(-1=="nsew".indexOf(e))throw new Error("Invalid direction");const n=t.slice(-1);let r=t.slice(0,-1);const i=t.length%2;return-1!={n:["prxz","bcfguvyz"],s:["028b","0145hjnp"],e:["bcfguvyz","prxz"],w:["0145hjnp","028b"]}[e][i].indexOf(n)&&""!=r&&(r=eA.adjacent(r,e)),r+tA.charAt({n:["p0r21436x8zb9dcf5h7kjnmqesgutwvy","bc01fg45238967deuvhjyznpkmstqrwx"],s:["14365h7k9dcfesgujnmqp0r2twvyx8zb","238967debc01fg45kmstqrwxuvhjyznp"],e:["bc01fg45238967deuvhjyznpkmstqrwx","p0r21436x8zb9dcf5h7kjnmqesgutwvy"],w:["238967debc01fg45kmstqrwxuvhjyznp","14365h7k9dcfesgujnmqp0r2twvyx8zb"]}[e][i].indexOf(n))}static neighbours(t){return{n:eA.adjacent(t,"n"),ne:eA.adjacent(eA.adjacent(t,"n"),"e"),e:eA.adjacent(t,"e"),se:eA.adjacent(eA.adjacent(t,"s"),"e"),s:eA.adjacent(t,"s"),sw:eA.adjacent(eA.adjacent(t,"s"),"w"),w:eA.adjacent(t,"w"),nw:eA.adjacent(eA.adjacent(t,"n"),"w")}}}var nA=eA;var rA=function(){var t,e,n,r,i,o,a,s,c=Object(l.useContext)(jb),u=Object(l.useContext)(hx),h=u.labelMap,d=u.rootPredicate,p=u.predicateConfig,f=u.more,m=zv("\nquery map($predicate: Predicate){\n  occurrenceSearch(predicate: $predicate) {\n    _meta\n    documents {\n      total\n    }\n    _v1PredicateHash\n  }\n}\n",{lazyLoad:!0}),g=m.data,y=m.error,v=m.loading,_=m.load,b=zv("\nquery point($predicate: Predicate){\n  occurrenceSearch(predicate: $predicate) {\n    documents {\n      total\n      results {\n        key\n        basisOfRecord\n        eventDate\n        gbifClassification{\n          usage {\n            rank\n            formattedName\n          }\n        }\n        primaryImage {\n          identifier\n        }\n      }\n    }\n  }\n}\n",{lazyLoad:!0}),x=b.data,w=b.error,E=b.loading,C=b.load;Object(l.useEffect)((function(){T({filter:c.filter,predicateConfig:p,rootPredicate:d})}),[c.filterHash,d,p]);var S,T=Object(l.useCallback)((function(t){var e=t.filter,n=t.predicateConfig,r={type:"and",predicates:[t.rootPredicate,mx(e,n),{type:"equals",key:"hasCoordinate",value:!0}].filter((function(t){return t}))};_({keepDataWhileLoading:!0,variables:{predicate:r}})}),[]),O=Object(l.useCallback)((function(){S||(S=!0,window.setTimeout((function(){return S=!1}),1e4),T({filter:c.filter,predicateConfig:p,rootPredicate:d}))}),[c.filterHash,d,p]),I=Object(l.useCallback)((function(t){var e=t.geohash,n=nA.bounds(e),r=n.ne.lat,i=n.sw.lat,o=n.sw.lon,a=n.ne.lon,s="POLYGON"+"((W S,E S,E N,W N,W S))".replace(/N/g,r).replace(/S/g,i).replace(/W/g,o).replace(/E/g,a),l={type:"and",predicates:[d,mx(c.filter,p),{type:"within",key:"geometry",value:s}].filter((function(t){return t}))};C({variables:{predicate:l}})}),[c.filterHash,d]),A=null===(t=c.filter)||void 0===t||null===(e=t.must)||void 0===e||null===(n=e.q)||void 0===n?void 0:n[0],M={loading:v,error:y,total:null==g||null===(r=g.occurrenceSearch)||void 0===r||null===(i=r.documents)||void 0===i?void 0:i.total,query:(null==g||null===(o=g.occurrenceSearch)||void 0===o||null===(a=o._meta)||void 0===a?void 0:a.query)||{},predicateHash:null==g||null===(s=g.occurrenceSearch)||void 0===s?void 0:s._v1PredicateHash,rootPredicate:d,predicateConfig:p,loadPointData:I,registerPredicate:O,pointData:x,pointLoading:E,pointError:w,labelMap:h,q:A,defaultMapSettings:null==f?void 0:f.mapSettings};return"undefined"!=typeof window?kt(QI,M):kt("h1",null,"Map placeholder")};var iA=function(t,e){var n,r=(n=Object(l.useRef)(!0)).current?(n.current=!1,!0):n.current;Object(l.useEffect)((function(){if(!r)return t()}),e)};var oA={name:"fks3ly",styles:"display:flex;flex-direction:column;@media (min-height: 700px){height:100px;flex:1 1 auto;}"},aA=function(t){var e,n,r=t.first,i=t.prev,a=t.next,s=t.size,u=t.from,h=t.data,d=t.total,p=t.loading,f=t.columns,m=void 0===f?[]:f,g=A_("entity",l_),y=Nt()(g,2),v=y[0],_=y[1],b=Object(l.useContext)(hx),x=b.filters,w=b.labelMap,E=Object(l.useState)(!0),C=Nt()(E,2),S=C[0],T=C[1],O=Hi({animated:!0,modal:!1}),I=(null==h||null===(e=h.occurrenceSearch)||void 0===e||null===(n=e.documents)||void 0===n?void 0:n.results)||[];Object(l.useEffect)((function(){v?O.show():O.hide()}),[v]),iA((function(){O.visible||_()}),[O.visible]);var A=Object(l.useCallback)((function(){var t=I.findIndex((function(t){return t.key===v})),e=Math.min(I.length-1,t+1);I[e]&&_(I[e].key)}),[v,I]),M=Object(l.useCallback)((function(){var t=I.findIndex((function(t){return t.key===v})),e=Math.max(0,t-1);I[e]&&_(I[e].key)}),[v,I]),k=S,P=m.map((function(t,e){var n,r=0===e?{locked:k,toggle:function(){return T(!S)}}:null,i=t.filterKey?null===(n=x[t.filterKey])||void 0===n?void 0:n.Popover:null;return kt(rp,o()({key:t.trKey,width:t.width},r),kt(Zl,{wrap:"nowrap"},kt($l,{grow:!1,style:{whiteSpace:"nowrap"}},kt(ud,{id:t.trKey})),i&&kt($l,null,kt(i,{modal:!0,placement:"auto"},kt(pr,{appearance:"text",style:{display:"flex"}},kt(Bn,null))))))}));return kt(c.a.Fragment,null,O.visible&&kt(Sf,{href:"https://www.gbif.org/occurrence/".concat(v),dialog:O,nextItem:A,previousItem:M},kt(rC,{id:v,defaultTab:"details",style:{maxWidth:"100%",width:700,height:"100%"},onCloseRequest:function(){return O.setVisible(!1)}})),kt("div",{style:{flex:"1 1 100%",display:"flex",height:"100%",maxHeight:"100vh",flexDirection:"column"}},kt(_S,{loading:p,total:d}),kt(ap,{fixedColumn:k,first:r,prev:i,next:a,size:s,from:u,total:d,loading:p,css:oA},kt("thead",null,kt("tr",null,P)),kt(np,{rowCount:s,columnCount:7,loading:p},sA({columns:m,labelMap:w,data:h,setActiveKey:_,dialog:O})))))},sA=function(t){var e,n,r=t.columns,i=t.labelMap,o=t.data,a=t.setActiveKey;t.dialog;return((null==o||null===(e=o.occurrenceSearch)||void 0===e||null===(n=e.documents)||void 0===n?void 0:n.results)||[]).map((function(t,e){var n=r.map((function(e,n){var r=Tb()(t,e.value.key),o=r;if(e.value.formatter)o=e.value.formatter(r,t);else if(e.value.labelHandle){var a=i[e.value.labelHandle];o=kt(a,{id:r})}return kt(ip,{key:e.trKey,noWrap:e.noWrap},o)}));return kt("tr",{key:t.key,onClick:function(){a(t.key)}},n)}))},lA=n(251),cA=n.n(lA);var uA=function(){var t,e,n=A_("from",l_),r=Nt()(n,2),i=r[0],o=void 0===i?0:i,a=r[1],s=Object(l.useState)([]),u=Nt()(s,2),h=u[0],d=u[1],p=Object(l.useContext)(jb),f=Object(l.useContext)(hx),m=f.rootPredicate,g=f.predicateConfig,y=f.tableConfig,v=f.defaultTableColumns,_=zv("\nquery table($predicate: Predicate, $size: Int = 20, $from: Int = 0){\n  occurrenceSearch(predicate: $predicate, size: $size, from: $from) {\n    documents(size: $size, from: $from) {\n      total\n      size\n      from\n      results {\n        key\n        gbifClassification{\n          usage {\n            rank\n            formattedName\n          }\n        }\n        year\n\t\t\t\tbasisOfRecord\n        datasetTitle\n        publisherTitle\n        countryCode\n        formattedCoordinates\n        catalogNumber\n        recordedBy\n        identifiedBy\n        recordNumber\n        preparations\n        institutionCode\n        collectionCode\n        locality\n\n        stillImageCount\n        movingImageCount\n        soundCount\n        typeStatus\n        issues\n        \n        volatile {\n          features {\n            isTreament\n            isSequenced\n            isClustered\n            isSamplingEvent\n          }\n        }\n      }\n    }\n  }\n}\n",{lazyLoad:!0}),b=_.data,x=(_.error,_.loading),w=_.load;Object(l.useEffect)((function(){var t={type:"and",predicates:[m,mx(p.filter,g)].filter((function(t){return t}))};w({keepDataWhileLoading:!0,variables:{predicate:t,size:50,from:o}})}),[p.filterHash,m,o]),Object(l.useEffect)((function(){return function(){a()}}),[]),iA((function(){}),[p.filterHash]);var E=Object(l.useCallback)((function(){a(Math.max(0,o+50))})),C=Object(l.useCallback)((function(){a(Math.max(0,o-50))})),S=Object(l.useCallback)((function(){a(0)}));return Object(l.useEffect)((function(){var t=["scientificName"].concat(Nb()(v||y.defaultColumns)),e=cA()(y.columns,"name"),n=t.map((function(t){return e[t]})).filter((function(t){return t}));d(n)}),[y,v]),kt(c.a.Fragment,null,kt(aA,{loading:x,data:b,next:E,prev:C,first:S,size:50,from:o,total:null==b||null===(t=b.occurrenceSearch)||void 0===t||null===(e=t.documents)||void 0===e?void 0:e.total,columns:h}))};var hA=function(t){var e=t.theme;return Pt("background:",e.paperBackground500,";border:1px solid ",e.paperBorderColor,";border-radius:",e.borderRadius,"px;padding:12px;","")},dA={name:"pjnpkg",styles:"height:100%;min-height:150px;min-width:100px"},pA=function(t){t.theme;return dA},fA=function(t){t.first,t.prev;var e=t.next,n=t.size,r=t.from,i=t.data,o=t.total,a=t.loading,s=t.error,u=Object(l.useContext)(Zt),h=Object(l.useState)(),d=Nt()(h,2),p=d[0],f=d[1],m=Object(l.useState)(),g=Nt()(m,2),y=g[0],v=g[1],_=Hi({animated:!0,modal:!1}),b=i;Object(l.useEffect)((function(){v(b[p])}),[p,b]);var x=Object(l.useCallback)((function(){f(Math.min(b.length-1,p+1))}),[b,p]),w=Object(l.useCallback)((function(){f(Math.max(0,p-1))}),[p]);if(0===o)return kt("div",null,kt("h2",null,"No content"),s&&kt("p",null,"Backend failure"));var E=o?o-r:20;Math.min(Math.max(E,0),n);return s&&!o?kt("h2",null,"Error"):kt(c.a.Fragment,null,kt(Sf,{href:"https://www.gbif.org/occurrence/".concat(null==y?void 0:y.key),dialog:_,nextItem:x,previousItem:w},kt(rC,{id:null==y?void 0:y.key,defaultTab:"images",style:{maxWidth:"100%",width:700,height:"100%"},onCloseRequest:function(){return _.setVisible(!1)}})),kt(_S,{message:"counts.nResultsWithImages",loading:a,total:o}),kt("div",{css:hA({theme:u})},kt(Fp,null,b.map((function(t,e){return kt(Lp,{height:150,key:t.key,minWidth:100,src:t.primaryImage.identifier,onSelect:function(){f(e),_.show()}},kt(Np,null,kt("div",{style:{marginBottom:2},dangerouslySetInnerHTML:{__html:t.gbifClassification.usage.formattedName}}),kt(zf,{css:(n={theme:u},Pt("font-size:11px;color:",n.theme.color500,";","")),typeStatus:t.typeStatus,basisOfRecord:t.basisOfRecord,eventDate:t.eventDate,isSequenced:t.volatile.features.isSequenced,isTreament:t.volatile.features.isTreament,isClustered:t.volatile.features.isClustered,isSamplingEvent:t.volatile.features.isSamplingEvent,countryCode:t.countryCode})));var n})),a?Array(n).fill().map((function(t,e){return kt(Rp,{key:e})})):null,kt("div",null,r+n<o&&!a&&kt(pr,{css:pA({theme:u}),appearance:"outline",onClick:e},kt(ud,{id:"search.loadMore",defaultMessage:"Load more"}))))))};var mA=function(){var t,e,n=Object(l.useState)(0),r=Nt()(n,2),i=r[0],o=r[1],a=Object(l.useContext)(jb),s=Object(l.useContext)(hx),u=s.rootPredicate,h=s.predicateConfig,d=zv("\nquery gallery($predicate: Predicate, $size: Int = 20, $from: Int = 0){\n  occurrenceSearch(predicate: $predicate, size: $size, from: $from) {\n    documents(size: $size, from: $from) {\n      total\n      size\n      from\n      results {\n        key\n        countryCode\n        locality\n        basisOfRecord\n        typeStatus\n        eventDate\n        gbifClassification{\n          usage {\n            formattedName\n          }\n        }\n        primaryImage {\n          identifier\n        }\n        formattedCoordinates\n        volatile {\n          features {\n            isSpecimen\n            isTreament\n            isSequenced\n            isClustered\n            isSamplingEvent\n          }\n        }\n      }\n    }\n  }\n}\n",{lazyLoad:!0}),p=d.data,f=d.error,m=d.loading,g=d.load,y=Object(l.useState)([]),v=Nt()(y,2),_=v[0],b=v[1];Object(l.useEffect)((function(){var t,e;b([].concat(Nb()(_),Nb()((null==p||null===(t=p.occurrenceSearch)||void 0===t||null===(e=t.documents)||void 0===e?void 0:e.results)||[])))}),[p]),Object(l.useEffect)((function(){var t={type:"and",predicates:[u,mx(a.filter,h),{type:"equals",key:"mediaType",value:"StillImage"}].filter((function(t){return t}))};g({keepDataWhileLoading:!0,variables:{predicate:t,size:50,from:i}})}),[i,a.filterHash,u]),Object(l.useEffect)((function(){o(0),b([])}),[a.filterHash,u]);var x=Object(l.useCallback)((function(){o(Math.max(0,i+50))})),w=Object(l.useCallback)((function(){o(Math.max(0,i-50))})),E=Object(l.useCallback)((function(){o(0)}));return kt(c.a.Fragment,null,kt(fA,{error:f,loading:m,data:_,total:null==p||null===(t=p.occurrenceSearch)||void 0===t||null===(e=t.documents)||void 0===e?void 0:e.total,next:x,prev:w,first:E,size:50,from:i}))};var gA={name:"mqzxz1",styles:"background:white;border:1px solid #eee;border-radius:3px"},yA=function(t){return Pt(function(t){t.theme;return gA}({theme:t.theme})," position:relative;padding:10px 20px;font-size:14px;margin-bottom:8px;","")},vA=function(t){t.theme;return Pt("position:absolute;bottom:0;left:0;right:0;top:0;",Er(),";","")},_A={name:"1t6lby3",styles:"display:flex;flex-direction:row;align-items:center;margin:5px 0;span{font-size:80%;color:#999;}"},bA=function(t){t.theme;return _A},xA=["largest","item","indicator","theme","setActive","index","dialog"],wA=function(t){t.more,t.size;var e,n,r,i,o,a,s=t.data,u=(t.total,t.loading),h=(Object(l.useContext)(hx).labelMap,Object(l.useState)()),d=Nt()(h,2),p=d[0],f=d[1],m=Object(l.useState)(),g=Nt()(m,2),y=g[0],v=g[1],_=Hi({animated:!0,modal:!1}),b=(null==s||null===(e=s.occurrenceSearch)||void 0===e||null===(n=e.facet)||void 0===n?void 0:n.datasetKey)||[],x=null==s||null===(r=s.occurrenceSearch)||void 0===r||null===(i=r.cardinality)||void 0===i?void 0:i.datasetKey;Object(l.useEffect)((function(){v(b[p])}),[p,b]);var w=Object(l.useCallback)((function(){f(Math.min(b.length-1,p+1))}),[b,p]),E=Object(l.useCallback)((function(){f(Math.max(0,p-1))}),[p]);return kt(c.a.Fragment,null,kt(Sf,{href:"https://www.gbif.org/dataset/".concat(null==y||null===(o=y.dataset)||void 0===o?void 0:o.key),dialog:_,nextItem:w,previousItem:E},kt(oS,{id:null==y||null===(a=y.dataset)||void 0===a?void 0:a.key,defaultTab:"details",style:{maxWidth:"100%",width:700,height:"100%"},onCloseRequest:function(){return _.setVisible(!1)}})),kt("div",null,kt(_S,{loading:u,total:x}),kt("div",null,kt("ul",{style:{padding:0,margin:0}},b.length>0&&b.map((function(t,e){return kt("li",null,kt(EA,{setActive:f,index:e,dialog:_,key:t.key,item:t,largest:b[0].count}))}))))))};function EA(t){var e=t.largest,n=t.item,r=(t.indicator,t.theme),i=t.setActive,o=t.index,a=t.dialog;s()(t,xA);return kt("div",{css:yA({theme:r})},kt("a",{css:vA({theme:r}),href:"https://www.gbif.org/dataset/".concat(n.dataset.key),onClick:function(t){t.ctrlKey||t.shiftKey||t.metaKey||t.button&&1==t.button||(i(o),a.show(),t.preventDefault())}}),kt("div",{css:bA({theme:r})},kt("div",{style:{flex:"1 1 auto"}},n.dataset.title),kt("span",null,kt(md,{value:n.count}))),kt(sg,{percent:100*n.count/e}))}var CA=function(){var t=Object(l.useState)(200),e=Nt()(t,2),n=e[0],r=e[1],i=Object(l.useContext)(jb),o=Object(l.useContext)(hx),a=o.rootPredicate,s=o.predicateConfig,u=zv("\nquery table($predicate: Predicate, $size: Int = 100){\n  occurrenceSearch(predicate: $predicate, size: 0, from: 0) {\n    cardinality {\n      datasetKey\n    }\n    facet {\n      datasetKey(size: $size) {\n        count\n        dataset {\n          key\n          title\n          description\n          license\n        }\n      }\n    }\n  }\n}\n",{lazyLoad:!0}),h=u.data,d=(u.error,u.loading),p=u.load;Object(l.useEffect)((function(){var t={type:"and",predicates:[a,mx(i.filter,s)].filter((function(t){return t}))};p({keepDataWhileLoading:!0,variables:{predicate:t,size:n}})}),[i.filterHash,a]),Object(l.useEffect)((function(){r(100)}),[i.filterHash]);var f=Object(l.useCallback)((function(){r(n+100)}));return kt(c.a.Fragment,null,kt(wA,{loading:d,data:h,more:f,size:n}))};var SA={name:"p8m6wo",styles:"background:white;padding:24px;border-radius:8px;max-width:100%;width:300px;text-align:center"},TA=function(t){o()({},t);return SA},OA={name:"1ee42c1",styles:"margin:12px 0"},IA=function(t){o()({},t);return OA},AA={name:"1uto9dc",styles:"color:#888;font-size:14px;margin:12px 0 24px 0;p{margin-bottom:12px;}"},MA=function(t){o()({},t);return AA},kA={name:"1i83uzg",styles:"width:50px;height:50px;margin:0 auto 12px auto;display:block;border:2px solid #cecfd8;color:#cecfd8;border-radius:50%;display:flex;justify-content:center;align-items:center;svg{height:40px;width:40px;}"};var PA=function(){var t,e,n,r,i,o,a,s=Object(l.useContext)(Zt),u=Object(l.useContext)(Ey),h=Object(l.useContext)(jb),d=Object(l.useContext)(hx),p=d.rootPredicate,f=d.predicateConfig,m=zv("\nquery($predicate: Predicate){\n  occurrenceSearch(predicate: $predicate, size: 0) {\n    _downloadPredicate\n  }\n}\n",{lazyLoad:!0}),g=m.data,y=(m.error,m.loading),v=m.load,_=null==u||null===(t=u.localeMap)||void 0===t?void 0:t.gbif_org;Object(l.useEffect)((function(){var t={type:"and",predicates:[p,mx(h.filter,f)].filter((function(t){return t}))};v({keepDataWhileLoading:!0,variables:{predicate:t}})}),[h.filterHash,p]);var b=null==g||null===(e=g.occurrenceSearch)||void 0===e||null===(n=e._downloadPredicate)||void 0===n?void 0:n.predicate,x=null==g||null===(r=g.occurrenceSearch)||void 0===r||null===(i=r._downloadPredicate)||void 0===i?void 0:i.err,w=null==h||null===(o=h.filter)||void 0===o||null===(a=o.must)||void 0===a?void 0:a.q,E=w&&w.length>0;return kt("div",{css:TA({theme:s}),style:{margin:"24px auto"}},kt("div",{css:kA},kt(Wn,null)),E&&kt(c.a.Fragment,null,kt("h4",{css:IA({theme:s})},kt(_y,{id:"download.unsupported.title"})),kt("div",{css:MA({theme:s})},kt(_y,{id:"download.unsupported.description"})),kt(pr,{disabled:y,onClick:function(t){return h.setField("q")},appearance:"primaryOutline"},kt(_y,{id:"download.unsupported.remove"}))),!E&&kt(c.a.Fragment,null,x&&kt(c.a.Fragment,null,kt("h4",{css:IA({theme:s})},kt(_y,{id:"download.unsupported.title"})),kt("div",{css:MA({theme:s})},kt("p",null,kt(_y,{id:"download.unsupported.error"})),x.message)),!x&&b&&kt(c.a.Fragment,null,kt("h4",{css:IA({theme:s})},kt(_y,{id:"download.download"})),kt("div",{css:MA({theme:s})},kt(_y,{allowNewLines:!0,id:"download.redirectNotice",values:{p:function(t){return kt("p",null,t)},br:function(t){return kt(c.a.Fragment,null,kt("br",null),t)},icon:kt("svg",null)}})),kt(pr,{as:"a",href:"".concat(Lv.GBIF_ORG,"/").concat(_?"".concat(_,"/"):"","occurrence/download/request?predicate=").concat(encodeURIComponent(JSON.stringify(b)),"#create"),disabled:y,appearance:"primary"},kt(_y,{id:"download.continueToGBIF"})))))},DA=n(160),RA=n.n(DA);let LA=(t=21)=>{let e="",n=crypto.getRandomValues(new Uint8Array(t));for(;t--;){let r=63&n[t];e+=r<36?r.toString(36):r<62?(r-26).toString(36).toUpperCase():r<63?"_":"-"}return e};var NA=["content","placement","modal","children","className","style"];function jA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function FA(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?jA(Object(n),!0).forEach((function(e){Ft()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jA(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var zA=function(t){var e=t.content,n=t.placement,r=t.modal,i=t.children,o=t.className,a=t.style,u=(s()(t,NA),c.a.useState(LA)),h=Nt()(u,1)[0],d=Object(l.useContext)(jb),p=Object(l.useState)(d.filter),f=Nt()(p,2),m=f[0],g=f[1],y=c.a.Children.only(i);Object(l.useEffect)((function(){g(d.filter)}),[d.filter]);var v=Object(l.useCallback)((function(t){var e=t.filter,n=t.hide;d.setFilter(e),n()}),[d]),_=Object(l.useCallback)((function(t){(0,t.hide)()}),[]),b=Object(l.useCallback)((function(t){g(t)}),[]);return kt(la,{onClickOutside:function(t){d.setFilter(m),t.hide()},style:FA({width:"22em",maxWidth:"100%"},a),"aria-labelledby":h,placement:n,trigger:y,modal:r,className:o},c.a.cloneElement(e,{onApply:v,onCancel:_,onFilterChange:b,labelledById:h,initFilter:d.filter}))},BA=["children","menuItems","labelledById"],UA=function(t){return Pt("border-bottom:1px solid ",t.theme.paperBorderColor,";padding:1.2em 1.5em;flex:0 0 auto;","")},GA=function(t){var e=t.children,n=t.menuItems,r=t.labelledById,i=s()(t,BA),a=Object(l.useContext)(Zt);return kt(Zl,o()({as:"section"},i,{css:UA({theme:a}),alignItems:"center"}),kt($l,{"aria-labelledby":r},e),n&&kt($l,{grow:!1},kt(Jc,{"aria-label":"Custom menu",trigger:kt(pr,{appearance:"text"},kt(or,{style:{fontSize:24,color:a.color800}})),items:n})))},VA=["onApply","onCancel","onBack","showBack","formId"];var qA={name:"1qq5h8y",styles:"padding:.8em 1em;flex:0 0 auto"},HA=function(t){return qA},WA=function(t){var e=t.onApply,n=t.onCancel,r=t.onBack,i=t.showBack,a=void 0!==i&&i,c=t.formId,u=s()(t,VA),h=Object(l.useContext)(Zt);return kt(Zl,o()({},u,{css:HA(h)}),kt($l,null,a&&kt(pr,{appearance:"ghost",onClick:r},kt(ud,{id:"filterSupport.back"})),!a&&kt(pr,{appearance:"ghost",onClick:n},kt(ud,{id:"filterSupport.cancel"}))),kt($l,{grow:!1},!a&&kt(pr,{type:"submit",form:c,onClick:e},kt(ud,{id:"filterSupport.apply"}))))};function ZA(t){var e=Object(l.useContext)(Zt);return kt("div",o()({},t,{css:Pt("display:flex;flex-direction:column;max-height:inherit;background:",e.paperBackground200,";","")}))}var $A=function(t){var e=t.theme;return Pt("background:linear-gradient(",e.paperBackground500," 30%, ",e.paperBackground500,"00),linear-gradient(",e.paperBackground500,"00, ",e.paperBackground500," 70%) 0 100%,linear-gradient(to bottom, ",e.paperBorderColor," 1px, transparent 1px 100%),linear-gradient(to bottom, transparent calc(100% - 1px), ",e.paperBorderColor," calc(100% - 1px) 100%);background-repeat:no-repeat;background-color:",e.paperBackground500,";background-size:100% 10px,100% 10px,100% 20px,100% 100%;background-attachment:local,local,scroll,scroll;","")};function KA(t){var e=Object(l.useContext)(Zt);return kt("div",o()({},t,{css:Pt($A({theme:e}),"padding:.5em 1.5em;flex:1 1 auto;overflow:auto;scrollbar-width:thin;max-height:350px;",Sr({theme:e}),";","")}))}var YA={name:"13wbhe6",styles:"padding-top:20px;padding-bottom:20px"};function XA(t){return kt(KA,o()({},t,{css:YA}))}var JA=ks((function(t){var e=t.children,n=t.title,r=t.aboutText,i=t.labelledById,o=t.hasHelpTexts,a=t.supportsExist,s=t.filterName,u=t.formId,h=t.filter,d=t.onFilterChange,p=t.aboutVisible,f=t.onAboutChange,m=t.helpVisible,g=t.onHelpChange,y=t.isExistenceFilter,v=t.onExistenceChange,_=t.isNegated,b=t.style,x=_?"must_not":"must";return Object(l.useEffect)((function(){var t="isNotNull"===Tb()(h,"must.".concat(s,"[0].type")),e="isNotNull"===Tb()(h,"must_not.".concat(s,"[0].type"));v(!(y||!t&&!e))}),[]),kt(rx,{filter:h,onChange:function(t){return d(t)}},kt(jb.Consumer,null,(function(t){var l=t.setField,h=t.negateField,d=t.setFullField,_=t.toggle,w=t.filter,E=Tb()(w,"".concat(x,".").concat(s),[]).map((function(t){return"object"===zb()(t)?mn(t):t})),C=new Set(E),S={count:C.size,onClear:function(){return d(s,[],[])}},T={formId:u,showBack:p,onBack:function(){return f(!1)}},O=r||o||a?function(t){return[].concat(Nb()(r?[kt(tu,{key:"About",onClick:function(){f(!0),t.hide()}},kt(ud,{id:"filterSupport.aboutThisFilter",defaultMessage:"About this filter"}))]:[]),Nb()(o?[kt(Qc,{key:"Help",disabled:p,style:{opacity:p?.5:1},checked:!!m,onChange:function(){return g(!m)}},kt(ud,{id:"filterSupport.showHelp",defaultMessage:"Show help text"}))]:[]),Nb()(a?[kt(Qc,{key:"Exists",disabled:p,style:{opacity:p?.5:1},checked:!!y,onChange:function(){y&&d(s,[],[]),v(!y),t.hide()}},kt(ud,{id:"filterSupport.existence",defaultMessage:"Filter for existence"}))]:[]))}:void 0;return kt(ZA,{style:b},kt(GA,{menuItems:O,labelledById:i},n),!p&&kt(c.a.Fragment,null,e({formId:u,summaryProps:S,footerProps:T,helpVisible:m,setField:l,setFullField:d,toggle:_,filter:w,selectedItems:E,checkedMap:C,isExistenceFilter:y,negateField:h})),p&&kt(c.a.Fragment,null,kt(zg,{as:XA},r),kt(WA,T)))})))}),{aboutVisible:"onAboutChange",helpVisible:"onHelpChange",isExistenceFilter:"onExistenceChange",filter:"onFilterChange"}),QA=["count","onClear"];var tM={name:"1c03pjv",styles:"font-size:.85em;color:#999;font-weight:400;margin:.5em 1.5em"},eM=function(t){return tM},nM=function(t){var e=t.count,n=t.onClear,r=s()(t,QA),i=Object(l.useContext)(Zt);return kt("div",o()({},r,{css:eM(i)}),kt(Zl,{as:"div"},kt($l,null,kt(ud,{id:"counts.nSelected",values:{total:e}})),e>0&&kt($l,{grow:!1},kt(pr,{appearance:"text",onClick:n},"Clear"))))},rM=["count","onClear","checked","onChange","children"],iM=function(t){return Pt("font-size:.85em;color:#999;font-weight:400;border-bottom:1px solid ",t.paperBorderColor,";>div{margin:.5em 1.5em;}","")},oM=function(t){t.count,t.onClear;var e=t.checked,n=t.onChange,r=t.children,i=s()(t,rM),a=Object(l.useContext)(Zt);return kt("div",o()({},i,{css:iM(a)}),kt(Zl,{as:"div"},kt($l,{grow:!0}),kt($l,{grow:!1},r," ",kt(_r,{checked:e,onChange:n}))))};function aM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=yu()(t);if(e){var i=yu()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return mu()(this,n)}}var sM=function(t){pu()(n,t);var e=aM(n);function n(){var t;return su()(this,n),t=e.call(this),Ft()(hu()(t),"onChange",(function(e,n){var r=n.newValue;t.setState({value:r})})),Ft()(hu()(t),"onSuggestionsFetchRequested",function(){var e=Ub()(Vb.a.mark((function e(n){var r,i,o,a,s,l,c,u;return Vb.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.value,null!==(r=t.suggestions)&&void 0!==r&&r.cancel&&(t.suggestions.cancel(),null!==(o=t.suggestions)&&void 0!==o&&null!==(a=o.promise)&&void 0!==a&&a.cancel&&t.suggestions.promise.cancel()),t.props.allowEmptyQueries||""!==i){e.next=4;break}return e.abrupt("return");case 4:t.setState({loading:!0,error:void 0}),s=!1,l=t.props.getSuggestions({q:i,localeContext:t.context}),c=l.promise,u=l.cancel,t.suggestions={promise:c,cancel:function(){u&&u(),s=!0}},t.suggestions.promise.then((function(e){s||t.setState({suggestions:e.data,error:void 0,loading:!1})})).catch((function(e){s||t.setState({suggestions:[],error:"Unable to load results",loading:!1})}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ft()(hu()(t),"onSuggestionsClearRequested",(function(){t.setState({suggestions:[]})})),Ft()(hu()(t),"onSuggestionSelected",(function(e){var n=e.item,r=e.value;t.props.onSuggestionSelected&&t.props.onSuggestionSelected({item:n,value:r}),t.setState({item:n})})),t.state={value:"",suggestions:[]},t}return cu()(n,[{key:"render",value:function(){var t=this.state,e=t.value,n=t.suggestions,r=t.loading,i=t.error,o=this.props,a=o.intl,s=o.render,l=o.getValue,u=o.placeholder||"search.placeholders.default",h={placeholder:a.formatMessage({id:u}),value:e,onChange:this.onChange,onKeyPress:this.props.onKeyPress};return kt(c.a.Fragment,null,kt(ds,{style:{margin:"10px"},suggestions:n,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,getSuggestionValue:l,renderSuggestion:s,inputProps:h,onSuggestionSelected:this.onSuggestionSelected,isLoading:r,ref:this.props.focusRef,menuCss:this.props.menuCss,delay:this.props.delay,loadingError:i&&""!==e}))}}]),n}(c.a.Component);Ft()(sM,"contextType",Ey);var lM=rd(sM),cM=["helpVisible"],uM=["isRadio","label","tabIndex","checked","onChange","helpText","helpVisible","loading"];function hM(t){var e=t.helpVisible,n=s()(t,cM);return kt("div",o()({css:fM({}),style:{display:"flex",wrap:"nowrap"}},n),kt(Id,{width:"1em",style:{flex:"0 0 auto"}}),kt("div",{style:{marginLeft:10,flex:"1 1 auto"}},kt(Id,{width:"random"}),e&&kt(Id,{width:"50%"})))}var dM=c.a.forwardRef((function(t,e){var n=t.isRadio,r=t.label,i=t.tabIndex,o=t.checked,a=t.onChange,l=t.helpText,c=t.helpVisible,u=t.loading,h=(s()(t,uM),{});return kt("label",{css:fM(h),style:{display:"flex",wrap:"nowrap"}},kt("div",null,n&&kt(pf,{disabled:u,ref:e,tabIndex:i,checked:o,onChange:a,style:{flex:"0 0 auto"}}),!n&&kt(Lr,{disabled:u,ref:e,tabIndex:i,checked:o,onChange:a,style:{flex:"0 0 auto"}})),kt("div",{style:{flex:"1 1 auto",marginLeft:10,wordBreak:"break-word"}},kt("div",null,kt("span",{css:gM({theme:h,loading:u})},r)),c&&l&&kt("div",{style:{marginTop:4,fontSize:"0.85em",color:"#aaa"}},kt("span",{css:gM({theme:h,loading:u})},l))))}));dM.displayName="FilterOption";var pM={name:"sc26ll",styles:"padding:6px 0;&:last-child{margin-bottom:0;}"},fM=function(t){return pM},mM={name:"jqdeln",styles:"background-color:#88888822;color:transparent"},gM=function(t){if(t.loading)return mM},yM=["footerProps","setFullField","filterHandle","onApply","onCancel","filter","hide"],vM=function(t){var e=t.footerProps,n=t.setFullField,r=t.filterHandle,i=t.onApply,a=t.onCancel,u=t.filter,h=t.hide,d=(s()(t,yM),Tb()(u,"must.".concat(r,"[0]")));return Object(l.useEffect)((function(){"isNotNull"===Tb()(u,"must_not.".concat(r,"[0].type"))?n(r,[],[{type:"isNotNull"}]):n(r,[{type:"isNotNull"}],[])}),[]),kt(c.a.Fragment,null,kt(KA,null,kt(dM,{isRadio:!0,checked:!!d,onChange:function(){n(r,[{type:"isNotNull"}],[])},label:kt(ud,{id:"filterSupport.nullOrNot.isNotNull"})}),kt(dM,{isRadio:!0,checked:!d,onChange:function(){n(r,[],[{type:"isNotNull"}])},label:kt(ud,{id:"filterSupport.nullOrNot.isNull"})})),kt(WA,o()({},e,{onApply:function(){return i({filter:u,hide:h})},onCancel:function(){return a({filter:u,hide:h})}})))};function _M(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=yu()(t);if(e){var i=yu()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return mu()(this,n)}}var bM=rd(function(t){pu()(n,t);var e=_M(n);function n(t){var r;return su()(this,n),r=e.call(this),Ft()(hu()(r),"onSuggestionsFetchRequested",(function(t){var e=t.value;r.setState({suggestions:r.props.getSuggestions({q:e})})})),Ft()(hu()(r),"onSuggestionsClearRequested",(function(){r.setState({suggestions:[]})})),Ft()(hu()(r),"onSuggestionSelected",(function(t){var e=t.item,n=t.value;r.onSuggestionsClearRequested(),r.props.onSuggestionSelected&&r.props.onSuggestionSelected({item:e,value:n})})),r.state={suggestions:t.initSuggestions},r}return cu()(n,[{key:"render",value:function(){var t=this.state.suggestions,e=this.props,n=e.intl,r=e.defaultIsOpen,i=e.render,o=e.getValue,a=e.placeholder,s=e.onChange,l=e.value,u=e.initSuggestions,h=(e.onKeyPress,""===l?u:t),d={placeholder:a||n.formatMessage({id:"search.placeholders.default"}),value:l,onChange:s};return kt(c.a.Fragment,null,kt(ds,{style:{margin:"10px"},suggestions:h,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,getSuggestionValue:o,renderSuggestion:i,inputProps:d,onSuggestionSelected:this.onSuggestionSelected,isLoading:!1,ref:this.props.focusRef,menuCss:this.props.menuCss,delay:this.props.delay,defaultIsOpen:r}))}}]),n}(c.a.Component)),xM=["focusRef"],wM=["config"];function EM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function CM(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?EM(Object(n),!0).forEach((function(e){Ft()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EM(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var SM=function(t){var e=t.focusRef,n=s()(t,xM),r=c.a.useRef(),i=(Object(l.useContext)(Zt),id().formatMessage,Object(l.useContext)(hx).filters),a=Object(l.useState)(),u=Nt()(a,2),h=u[0],d=u[1],p=Object(l.useState)((function(){return Object.keys(i).map((function(t){return{filterHandle:t,displayName:i[t].displayName}}))})),f=Nt()(p,1)[0],m=Object(l.useState)((function(){return function(t){var e=t.options;return{placeholder:"Search for filters",getSuggestions:function(t){var n=t.q;return e.filter((function(t){return 0===t.displayName.toLowerCase().indexOf(n.toLowerCase())||t.displayName.toLowerCase().indexOf(n.toLowerCase())>=0&&n.length>1})).map((function(t){return CM(CM({},t),{},{key:t.filterHandle})}))},getValue:function(t){return t.displayName},render:function(t){return kt("div",null,t.displayName)},delay:10}}({options:f})})),g=Nt()(m,1)[0];Tb.a;var y=Object(l.useState)(""),v=Nt()(y,2),_=v[0],b=v[1];return c.a.useEffect((function(){h&&r&&r.current&&r.current.focus()}),[h]),kt(c.a.Fragment,null,!h&&kt(ZA,null,kt(c.a.Fragment,null,kt(bM,{defaultIsOpen:!0,value:_,initSuggestions:f,getSuggestions:g.getSuggestions,onChange:function(t,e){var n=e.newValue;return b(n)},focusRef:e,render:g.render,getValue:g.getValue,onSuggestionSelected:function(t){var e=t.item;t.value;b(""),d((function(){return i[e.filterHandle].Content}))},delay:10}))),h&&kt(h,o()({},n,{focusRef:r})))};function TM(t){t.config;var e=s()(t,wM);return kt(zA,o()({},e,{content:kt(SM,null)}))}function OM(t){return kt(TM,{modal:!0},kt(pr,{appearance:"primaryOutline"},kt(ud,{id:"pagination.moreFilters"})))}var IM=["className","config","filter"];var AM,MM={name:"1dhou5a",styles:"display:flex;flex-direction:row;flex-wrap:wrap;margin-bottom:-4px;>div{max-width:100%;margin-right:4px;margin-bottom:4px;}"},kM=function(t){return MM},PM=ix((function(t){return{filter:t.filter}}))((function(t){var e,n,r=t.className,i=void 0===r?"":r,a=t.config,c=t.filter,u=s()(t,IM),h=Object(l.useContext)(Zt),d=h.prefix||"gbif",p=(e=c,n=a.defaultVisibleFilters,RA()(n,Object.keys(Tb()(e,"must",{})),Object.keys(Tb()(e,"must_not",{})))).map((function(t){return a.filters[t]}));return kt("div",o()({className:"".concat(i," ").concat(d,"-").concat("filterBar"),css:Pt(kM(h),";","")},u),p.map((function(t,e){return t?kt(t.Button,{key:e}):null})),Object.keys(a.filters).length!==a.defaultVisibleFilters.length&&kt("div",null,kt(OM,null)))})),DM=["className","config","tabs"],RM=(Fl.TabList,Fl.Tab,Fl.TabPanel,Fl.TapSeperator,ix((function(t){return{test:t.test}}))((function(t){var e=t.className,n=void 0===e?"":e,r=t.config,i=t.tabs,a=void 0===i?["TABLE","GALLERY","MAP"]:i,c=s()(t,DM),u=A_("view",s_),h=Nt()(u,2),d=h[0],p=void 0===d?a[0]||"TABLE":d,f=h[1],m=Object(l.useContext)(Zt),g=m.prefix||"gbif",y={TABLE:kt(Zy,{key:"table",label:kt(ud,{id:"search.tabs.table",defaultMessage:"Table"}),"data-targetid":"table",onClick:function(t){return f("TABLE")},isActive:"TABLE"===p}),MAP:kt(Zy,{key:"map",label:kt(ud,{id:"search.tabs.map",defaultMessage:"Map"}),"data-targetid":"map",onClick:function(t){return f("MAP")},isActive:"MAP"===p}),GALLERY:kt(Zy,{key:"gallery",label:kt(ud,{id:"search.tabs.gallery",defaultMessage:"Gallery"}),"data-targetid":"gallery",onClick:function(t){return f("GALLERY")},isActive:"GALLERY"===p}),DATASETS:kt(Zy,{key:"datasets",label:kt(ud,{id:"search.tabs.datasets",defaultMessage:"Datasets"}),"data-targetid":"dataset",onClick:function(t){return f("DATASETS")},isActive:"DATASETS"===p})};return kt("div",o()({className:"".concat(n," ").concat(g,"-").concat("occurrenceSearchLayout"),css:cx({theme:m})},c),kt("div",{css:ox({theme:m})},kt("div",{css:ux({theme:m})},kt(PM,{config:r})),kt("div",null,kt($y,{style:{marginLeft:10}},a.map((function(t){return y[t]})),kt(Zy,{label:"Download","data-targetid":"download",onClick:function(t){return f("DOWNLOAD")},isActive:"DOWNLOAD"===p})))),kt("div",{css:sx({theme:m})},"TABLE"===p&&kt(uA,null),"MAP"===p&&kt(rA,null),"GALLERY"===p&&kt(mA,null),"DATASETS"===p&&kt(CA,null),"DOWNLOAD"===p&&kt(PA,null)))}))),LM=["className","config","tabs"],NM=(Fl.TabList,Fl.Tab,Fl.TabPanel,Fl.TapSeperator,ix((function(t){return{test:t.test}}))((function(t){var e=t.className,n=void 0===e?"":e,r=t.config,i=t.tabs,a=void 0===i?["TABLE","GALLERY","MAP"]:i,c=s()(t,LM),u=A_("view",s_),h=Nt()(u,2),d=h[0],p=void 0===d?a[0]||"TABLE":d,f=h[1],m=Object(l.useContext)(Zt),g=m.prefix||"gbif",y={TABLE:kt(Zy,{key:"table",label:kt(ud,{id:"search.tabs.table",defaultMessage:"Table"}),"data-targetid":"table",onClick:function(t){return f("TABLE")},isActive:"TABLE"===p}),MAP:kt(Zy,{key:"map",label:kt(ud,{id:"search.tabs.map",defaultMessage:"Map"}),"data-targetid":"map",onClick:function(t){return f("MAP")},isActive:"MAP"===p}),GALLERY:kt(Zy,{key:"gallery",label:kt(ud,{id:"search.tabs.gallery",defaultMessage:"Gallery"}),"data-targetid":"gallery",onClick:function(t){return f("GALLERY")},isActive:"GALLERY"===p}),DATASETS:kt(Zy,{key:"datasets",label:kt(ud,{id:"search.tabs.datasets",defaultMessage:"Datasets"}),"data-targetid":"dataset",onClick:function(t){return f("DATASETS")},isActive:"DATASETS"===p})};return kt("div",o()({className:"".concat(n," ").concat(g,"-").concat("occurrenceSearchLayout"),css:cx({theme:m})},c),kt("div",{css:ox({theme:m}),style:{margin:"0 0 10px 0",borderRadius:0}},kt(tv,{style:{borderBottom:"1px solid #ddd"},availableCatalogues:r.availableCatalogues},kt($y,{style:{marginLeft:10}},a.map((function(t){return y[t]})),kt(Zy,{label:kt(ud,{id:"search.tabs.download",defaultMessage:"Download"}),"data-targetid":"download",onClick:function(t){return f("DOWNLOAD")},isActive:"DOWNLOAD"===p}))),kt("div",{css:ux({theme:m})},kt(PM,{config:r}))),kt("div",{css:sx({theme:m})},"TABLE"===p&&kt(uA,null),"MAP"===p&&kt(rA,null),"GALLERY"===p&&kt(mA,null),"DATASETS"===p&&kt(CA,null),"DOWNLOAD"===p&&kt(PA,null)))}))),jM=(AM={basisOfRecord:{type:"TRANSLATION",template:function(t){return"enums.basisOfRecord.".concat(t)}},typeStatus:{type:"TRANSLATION",template:function(t){return"enums.typeStatus.".concat(t)}},institutionCode:{type:"TRANSLATION",template:function(t){return t}},mediaType:{type:"TRANSLATION",template:function(t){return"enums.mediaType.".concat(t)}},occurrenceIssue:{type:"TRANSLATION",template:function(t){return"enums.occurrenceIssue.".concat(t)}},countryCode:{type:"TRANSLATION",template:function(t){return"enums.countryCode.".concat(t)}},number:{type:"TRANSFORM",transform:function(t){var e=t.id,n=t.locale;return e.toLocaleString(n)}},taxonKey:{type:"GQL",query:"query label($id: ID!){\n      taxon(key: $id) {\n        formattedName\n      }\n    }",transform:function(t){return{title:t.data.taxon.formattedName}},isHtmlResponse:!0},q:{type:"TRANSFORM",transform:function(t){var e=t.id;t.locale;return'"'.concat(e,'"')}},canonicalName:{type:"GQL",query:"query label($id: ID!){\n      taxon(key: $id) {\n        canonicalName\n      }\n    }",transform:function(t){return{title:t.data.taxon.canonicalName}}},publisherKey:{type:"ENDPOINT",template:function(t){var e=t.id,n=t.api;return"".concat(n.v1.endpoint,"/organization/").concat(e)},transform:function(t){return{title:t.title}}},hostingOrganizationKey:{type:"ENDPOINT",template:function(t){var e=t.id,n=t.api;return"".concat(n.v1.endpoint,"/organization/").concat(e)},transform:function(t){return{title:t.title}}},datasetKey:{type:"GQL",query:"query label($id: ID!){\n      dataset(key: $id) {\n        title\n      }\n    }",transform:function(t){return t.data.dataset}},year:{type:"CUSTOM",component:iw("intervals.compactTime")},coordinateUncertainty:{type:"CUSTOM",component:iw("intervals.compactMeters")},depth:{type:"CUSTOM",component:iw("intervals.compactMeters")},organismQuantity:{type:"CUSTOM",component:iw("intervals.compact")},sampleSizeValue:{type:"CUSTOM",component:iw("intervals.compact")},relativeOrganismQuantity:{type:"CUSTOM",component:iw("intervals.compact")},month:{type:"TRANSLATION",template:function(t){return"enums.month.".concat(t)}},continent:{type:"TRANSLATION",template:function(t){return"enums.continent.".concat(t)}},protocol:{type:"TRANSLATION",template:function(t){return"enums.protocol.".concat(t)}},literatureType:{type:"TRANSLATION",template:function(t){return"enums.literatureType.".concat(t)}},establishmentMeans:{type:"TRANSLATION",template:function(t){return"enums.establishmentMeans.".concat(t)}},establishmentMeansVocabulary:{type:"ENDPOINT",template:function(t){var e=t.id,n=t.api;return"".concat(n.v1.endpoint,"/vocabularies/EstablishmentMeans/concepts/").concat(e)},transform:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.localeContext,i=(null==r||null===(e=r.localeMap)||void 0===e?void 0:e.vocabulary)||"en";return{title:t.label[i]||t.label.en}}},catalogNumber:{type:"TRANSLATION",template:function(t){return t}},recordNumber:{type:"TRANSLATION",template:function(t){return t}},elevation:{type:"CUSTOM",component:iw("intervals.compactMeters")},occurrenceStatus:{type:"TRANSLATION",template:function(t){return"enums.occurrenceStatus.".concat(t)}},gadmGid:{type:"ENDPOINT",template:function(t){var e=t.id,n=t.api;return"".concat(n.v1.endpoint,"/geocode/gadm/").concat(e)},transform:function(t){return{title:t.name}}},isInCluster:{type:"TRANSLATION",template:function(t){return"enums.isInCluster.".concat(t)}},datasetType:{type:"TRANSLATION",template:function(t){return"enums.datasetType.".concat(t)}},datasetSubtype:{type:"TRANSLATION",template:function(t){return"enums.datasetSubtype.".concat(t)}},institutionKey:{type:"GQL",query:"query label($id: String!){\n      institution(key: $id) {\n        name\n      }\n    }",transform:function(t){return{title:t.data.institution.name}}},networkKey:{type:"ENDPOINT",template:function(t){var e=t.id,n=t.api;return"".concat(n.v1.endpoint,"/network/").concat(e)},transform:function(t){return{title:t.title}}}},Ft()(AM,"literatureType",{type:"TRANSLATION",template:function(t){return"enums.literatureType.".concat(t)}}),Ft()(AM,"dwcaExtension",{type:"TRANSLATION",template:function(t){return"enums.dwcaExtension.".concat(t)}}),AM),FM=n(252),zM=n.n(FM),BM={CASE_SENSITIVE_EQUAL:7,EQUAL:6,STARTS_WITH:5,WORD_STARTS_WITH:4,CONTAINS:3,ACRONYM:2,MATCHES:1,NO_MATCH:0};GM.rankings=BM;var UM=function(t,e){return String(t.rankedValue).localeCompare(String(e.rankedValue))};function GM(t,e,n){void 0===n&&(n={});var r=n,i=r.keys,o=r.threshold,a=void 0===o?BM.MATCHES:o,s=r.baseSort,l=void 0===s?UM:s,c=r.sorter;return(void 0===c?function(t){return t.sort((function(t,e){return function(t,e,n){var r=t.rank,i=t.keyIndex,o=e.rank,a=e.keyIndex;return r===o?i===a?n(t,e):i<a?-1:1:r>o?-1:1}(t,e,l)}))}:c)(t.reduce((function(t,r,o){var s=function(t,e,n,r){if(!e){return{rankedValue:t,rank:VM(t,n,r),keyIndex:-1,keyThreshold:r.threshold}}return function(t,e){for(var n=[],r=0,i=e.length;r<i;r++)for(var o=e[r],a=ZM(o),s=HM(t,o),l=0,c=s.length;l<c;l++)n.push({itemValue:s[l],attributes:a});return n}(t,e).reduce((function(t,e,i){var o=t.rank,a=t.rankedValue,s=t.keyIndex,l=t.keyThreshold,c=e.itemValue,u=e.attributes,h=VM(c,n,r),d=a,p=u.minRanking,f=u.maxRanking,m=u.threshold;return h<p&&h>=BM.MATCHES?h=p:h>f&&(h=f),h>o&&(o=h,s=i,l=m,d=c),{rankedValue:d,rank:o,keyIndex:s,keyThreshold:l}}),{rankedValue:t,rank:BM.NO_MATCH,keyIndex:-1,keyThreshold:r.threshold})}(r,i,e,n),l=s.rank,c=s.keyThreshold;l>=(void 0===c?a:c)&&t.push(at({},s,{item:r,index:o}));return t}),[])).map((function(t){return t.item}))}function VM(t,e,n){return t=qM(t,n),(e=qM(e,n)).length>t.length?BM.NO_MATCH:t===e?BM.CASE_SENSITIVE_EQUAL:(t=t.toLowerCase())===(e=e.toLowerCase())?BM.EQUAL:t.startsWith(e)?BM.STARTS_WITH:t.includes(" "+e)?BM.WORD_STARTS_WITH:t.includes(e)?BM.CONTAINS:1===e.length?BM.NO_MATCH:(r=t,i="",r.split(" ").forEach((function(t){t.split("-").forEach((function(t){i+=t.substr(0,1)}))})),i).includes(e)?BM.ACRONYM:function(t,e){var n=0,r=0;function i(t,e,r){for(var i=r,o=e.length;i<o;i++){if(e[i]===t)return n+=1,i+1}return-1}var o=i(e[0],t,0);if(o<0)return BM.NO_MATCH;r=o;for(var a=1,s=e.length;a<s;a++){var l=e[a];if(!((r=i(l,t,r))>-1))return BM.NO_MATCH}return function(t){var r=1/t,i=n/e.length;return BM.MATCHES+i*r}(r-o)}(t,e);var r,i}function qM(t,e){return t=""+t,e.keepDiacritics||(t=zM()(t)),t}function HM(t,e){var n;if("object"==typeof e&&(e=e.key),"function"==typeof e)n=e(t);else if(null==t)n=null;else if(Object.hasOwnProperty.call(t,e))n=t[e];else{if(e.includes("."))return function(t,e){for(var n=t.split("."),r=[e],i=0,o=n.length;i<o;i++){for(var a=n[i],s=[],l=0,c=r.length;l<c;l++){var u=r[l];if(null!=u)if(Object.hasOwnProperty.call(u,a)){var h=u[a];null!=h&&s.push(h)}else"*"===a&&(s=s.concat(u))}r=s}if(Array.isArray(r[0])){var d=[];return d.concat.apply(d,r)}return r}(e,t);n=null}return null==n?[]:Array.isArray(n)?n:[String(n)]}var WM={maxRanking:1/0,minRanking:-1/0};function ZM(t){return"string"==typeof t?WM:at({},WM,t)}var $M=n(253);function KM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function YM(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?KM(Object(n),!0).forEach((function(e){Ft()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KM(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var XM={whiteSpace:"nowrap",textOverflow:"ellipsis",width:"100%",overflow:"hidden"};function JM(t){var e=t.context,n=t.suggestStyle,r=t.rootPredicate,i=e.client,o=e.formatMessage,a=$M.map((function(t){return{title:o({id:"enums.countryCode.".concat(t)}),key:t}}));return{countryCode:{placeholder:"search.placeholders.default",getSuggestions:function(t){var e=t.q;return{cancel:function(){return null},promise:Ub()(Vb.a.mark((function t(){return Vb.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{data:GM(a,e,{keys:["title","key"]})});case 1:case"end":return t.stop()}}),t)})))()}},getValue:function(t){return t.title},render:function(t){return kt("div",{style:{}},kt("div",{style:n},t.title))}},institutionCode:{placeholder:"search.placeholders.default",getSuggestions:function(t){var e=t.q,n=i.v1Get("/occurrence/search/institutionCode?limit=8&q=".concat(e)),r=n.promise,o=n.cancel;return{promise:r.then((function(t){return{data:t.data.map((function(t){return{key:t,title:t}}))}})),cancel:o}},getValue:function(t){return t.title},render:function(t){return kt("div",{style:n},t.title)}},establishmentMeans:{placeholder:"search.placeholders.default",getSuggestions:function(t){var e,n=t.q,r=t.localeContext,o=(null==r||null===(e=r.localeMap)||void 0===e?void 0:e.vocabulary)||"en",a=i.v1Get("/vocabularies/EstablishmentMeans/concepts?limit=100&q=".concat(n,"&locale=").concat(o)),s=a.promise,l=a.cancel;return{promise:s.then((function(t){return{data:t.data.results.map((function(t){return{key:t.name,title:t.label[o]||t.label.en}}))}})),cancel:l}},getValue:function(t){return t.title},render:function(t){return kt("div",{style:n},t.title)}},catalogNumber:{placeholder:"search.placeholders.default",getSuggestions:function(t){var e=t.q,n=i.v1Get("/occurrence/search/catalogNumber?limit=8&q=".concat(e)),r=n.promise,o=n.cancel;return{promise:r.then((function(t){return{data:t.data.map((function(t){return{key:t,title:t}}))}})),cancel:o}},getValue:function(t){return t.title},render:function(t){return kt("div",{style:n},t.title)}},datasetKey:{placeholder:"search.placeholders.default",getSuggestions:function(t){var e=t.q;return i.v1Get("/dataset/suggest?limit=8&q=".concat(e))},getValue:function(t){return t.title},render:function(t){return kt("div",{style:{}},kt("div",{style:n},t.title))}},datasetKeyFromOccurrenceIndex:{placeholder:"search.placeholders.default",getSuggestions:function(t){var e=t.q,n=t.size,o=void 0===n?100:n,a={type:"like",key:"datasetTitle",value:"*".concat(e.replace(/\s/,"*"),"*")},s=a;r&&(s={type:"and",predicates:[r,a]});var l={size:o,predicate:s},c=i.query({query:"\n          query keywordSearch($predicate: Predicate, $size: Int){\n            occurrenceSearch(predicate: $predicate) {\n              facet {\n                datasetKey(size: $size) {\n                  key\n                  count\n                  dataset {\n                    title\n                  }\n                }\n              }\n            }\n          }\n          ",variables:l}),u=c.promise,h=c.cancel;return{promise:u.then((function(t){var e,n,r;return{data:null===(e=t.data)||void 0===e||null===(n=e.occurrenceSearch)||void 0===n||null===(r=n.facet)||void 0===r?void 0:r.datasetKey.map((function(t){return YM(YM({},t),{},{title:t.dataset.title})})),rawData:t.data}})),cancel:h}},getValue:function(t){return t.title},render:function(t){return kt("div",{style:n},t.title)}},publisherKey:{placeholder:"search.placeholders.default",getSuggestions:function(t){var e=t.q;return i.v1Get("/organization/suggest?limit=8&q=".concat(e))},getValue:function(t){return t.title},render:function(t){return kt("div",{style:{maxWidth:"100%"}},kt("div",{style:n},t.title))}},publisherKeyFromOccurrenceIndex:{placeholder:"search.placeholders.default",getSuggestions:function(t){var e=t.q,n=t.size,o=void 0===n?100:n,a={type:"like",key:"publisherTitle",value:"*".concat(e.replace(/\s/,"*"),"*")},s=a;r&&(s={type:"and",predicates:[r,a]});var l={size:o,predicate:s},c=i.query({query:"\n          query keywordSearch($predicate: Predicate, $size: Int){\n            occurrenceSearch(predicate: $predicate) {\n              facet {\n                publishingOrg(size: $size) {\n                  key\n                  publisher {\n                    title\n                  }\n                }\n              }\n            }\n          }\n          ",variables:l}),u=c.promise,h=c.cancel;return{promise:u.then((function(t){var e,n,r;return{data:null===(e=t.data)||void 0===e||null===(n=e.occurrenceSearch)||void 0===n||null===(r=n.facet)||void 0===r?void 0:r.publishingOrg.map((function(t){return YM(YM({},t),{},{title:t.publisher.title})})),rawData:t.data}})),cancel:h}},getValue:function(t){return t.title},render:function(t){return kt("div",{style:n},t.title)}},taxonKey:{placeholder:"search.placeholders.default",getSuggestions:function(t){var e=t.q;return i.v1Get("/species/suggest?datasetKey=".concat("d7dddbf4-2cf0-4f39-9b2a-bb099caae36c","&limit=20&q=").concat(e))},getValue:function(t){return t.scientificName},render:function(t){var e=["kingdom","phylum","class","order","family","genus","species"].map((function(e,n){return t[e]&&e!==t.rank.toLowerCase()?kt("span",{key:e},t[e]):null}));return kt("div",{style:{maxWidth:"100%"}},kt("div",{style:n},"ACCEPTED"!==t.status&&kt(Sd,{title:kt("span",null,kt(ud,{id:"enums.taxonomicStatus.".concat(t.status)}))},kt("span",{style:{display:"inline-block",marginRight:8,width:8,height:8,borderRadius:4,background:"orange"}})),t.scientificName),kt("div",{style:{color:"#aaa",fontSize:"0.85em"}},kt(If,null,e)))}},recordedBy:{placeholder:"search.placeholders.default",getSuggestions:function(t){var e=t.q,n=i.v1Get("/occurrence/search/recordedBy?limit=8&q=".concat(e)),r=n.promise,o=n.cancel;return{promise:r.then((function(t){return{data:t.data.map((function(t){return{key:t,title:t}}))}})),cancel:o}},getValue:function(t){return t.title},render:function(t){return kt("div",{style:n},t.title)}},recordedByWildcard:{placeholder:"search.placeholders.default",getSuggestions:function(t){var e=t.q,n=t.size,o={type:"like",key:"recordedBy",value:e},a=o;r&&(a={type:"and",predicates:[r,o]});var s={size:void 0===n?100:n,predicate:a,include:include},l=i.query({query:"\n          query keywordSearch($predicate: Predicate, $size: Int){\n            occurrenceSearch(predicate: $predicate) {\n              facet {\n                recordedBy(size: $size) {\n                  key\n                  count\n                }\n              }\n            }\n          }\n          ",variables:s}),c=l.promise,u=l.cancel;return{promise:c.then((function(t){var e,n,r;return{data:null===(e=t.data)||void 0===e||null===(n=e.occurrenceSearch)||void 0===n||null===(r=n.facet)||void 0===r?void 0:r.recordedBy.map((function(t){return YM(YM({},t),{},{title:t.key})})),rawData:t.data}})),cancel:u}},getValue:function(t){return t.title},render:function(t){return kt("div",{style:n},t.title,kt("div",{style:{fontSize:"0.85em",color:"#aaa"}},t.count," results"))}},recordNumber:{placeholder:"search.placeholders.default",getSuggestions:function(t){var e=t.q,n=i.v1Get("/occurrence/search/recordNumber?limit=8&q=".concat(e)),r=n.promise,o=n.cancel;return{promise:r.then((function(t){return{data:t.data.map((function(t){return{key:t,title:t}}))}})),cancel:o}},getValue:function(t){return t.title},render:function(t){return kt("div",{style:n},t.title)}},gadmGid:{placeholder:"search.placeholders.default",getSuggestions:function(t){var e=t.q,n=i.v1Get("/geocode/gadm/search?limit=100&q=".concat(e)),r=n.promise,o=n.cancel;return{promise:r.then((function(t){return{data:t.data.results.map((function(t){return YM({title:t.name,key:t.id},t)}))}})),cancel:o}},getValue:function(t){return t.title},render:function(t){var e;return kt("div",{style:{maxWidth:"100%"}},kt("div",{style:n},t.title),(null==t||null===(e=t.higherRegions)||void 0===e?void 0:e.length)>0&&kt(If,{style:{opacity:.8}},t.higherRegions.map((function(t){return kt("span",null,t.name)}))))}},institutionKey:{placeholder:"search.placeholders.default",getSuggestions:function(t){var e=t.q,n=i.v1Get("/grscicoll/institution/suggest?limit=8&q=".concat(e)),r=n.promise,o=n.cancel;return{promise:r.then((function(t){return{data:t.data.map((function(t){return YM({title:t.name},t)}))}})),cancel:o}},getValue:function(t){return t.title},render:function(t){return kt("div",{style:n},t.title,kt("div",null,"Code: ",t.code))}},networkKey:{placeholder:"search.placeholders.default",getSuggestions:function(t){var e=t.q;return i.v1Get("/network/suggest?limit=20&q=".concat(e))},getValue:function(t){return t.title},render:function(t){return kt("div",{style:{maxWidth:"100%"}},kt("div",{style:n},t.title))}}}}var QM=["mustOptions","mustNotOptions","filterHandle","translations","DisplayName","loading"],tk=c.a.forwardRef((function(t,e){var n,r,i=t.mustOptions,a=void 0===i?[]:i,u=t.mustNotOptions,h=void 0===u?[]:u,d=t.filterHandle,p=t.translations,f=void 0===p?{}:p,m=t.DisplayName,g=void 0===m?function(t){var e=t.id;return kt(c.a.Fragment,null,e)}:m,y=t.loading,v=s()(t,QM),_=Object(l.useContext)(jb),b=f.count,x=void 0===b?"filters.".concat(d,".count"):b,w=f.isNotNull,E=(void 0===w&&"filters.".concat(d,".isNotNull"),f.isNull),C=(void 0===E&&"filters.".concat(d,".isNull"),f.name),S=void 0===C?"filters.".concat(d,".name"):C,T=Object(l.useCallback)((function(){_.setFullField(d,[],[])}),[_,d]),O=h.length>0,I=a.concat(h);return 0===I.length?r=kt(ud,{id:S}):a.length>0&&h.length>0?(r=kt("span",null,"Complex filter"),O=!1):"isNotNull"===(null===(n=I[0])||void 0===n?void 0:n.type)?(O=!1,r=h.length>0?kt(c.a.Fragment,null,kt(ud,{id:S})," : ",kt(ud,{id:"filterSupport.nullOrNot.isNull"})):kt(c.a.Fragment,null,kt(ud,{id:S})," : ",kt(ud,{id:"filterSupport.nullOrNot.isNotNull"}))):1===I.length?r=kt(c.a.Fragment,null,kt(ud,{id:S})," : ",kt(g,{id:I[0]})):I.length>1&&(r=kt(ud,{id:x,defaultMessage:x,values:{num:I.length}})),kt(mr,o()({loading:y,isActive:I.length>0,onClearRequest:T,ref:e,isNegated:O},v),r)}));tk.displayName="TriggerButton";var ek=["filterHandle","LabelFromID","config","translations"],nk=function(t){var e=t.config,n=t.translations,r=t.labelledById,i=t.LabelFromID,a=t.hide,s=t.onApply,u=t.onCancel,h=t.onFilterChange,d=t.focusRef,p=t.filterHandle,f=t.initFilter,m=c.a.useState(LA),g=Nt()(m,1)[0],y=Tb()(f,"must.".concat(p),[]),v=Object(l.useState)(y.filter((function(t){return"isNotNull"!==t.type}))),_=Nt()(v,2),b=_[0],x=_[1],w=e.suggestConfig,E=e.singleSelect,C=e.LabelFromID||i,S=n.description&&kt(ud,{id:n.description||"filters.".concat(p,".description"),defaultMessage:n.description});return kt(JA,{labelledById:r,onApply:s,onCancel:u,title:kt(ud,{id:(null==n?void 0:n.name)||"filters.".concat(p,".name"),defaultMessage:null==n?void 0:n.name}),aboutText:S,supportsExist:e.supportsExist,onFilterChange:h,filterName:p,formId:g,defaultFilter:f},(function(t){var n,r=t.filter,i=t.toggle,l=t.setFullField,h=t.checkedMap,f=t.formId,m=t.summaryProps,g=t.footerProps;return t.isExistenceFilter?kt(vM,{footerProps:g,setFullField:l,onApply:s,onCancel:u,filter:r,hide:a,filterHandle:p}):kt(c.a.Fragment,null,kt(lM,o()({},w,{allowEmptyQueries:null==e||null===(n=e.specific)||void 0===n?void 0:n.allowEmptyQueries,focusRef:d,onKeyPress:function(t){return t.which===_n?s({filter:r,hide:a}):null},onSuggestionSelected:function(t){var e=t.item;if(e){var n=RA()(b,[e.key]);x(n),E?(x([e.key]),l(p,[e.key],[]).then((function(t){return s({filter:t,hide:a})})).catch((function(t){return console.log(t)}))):i(p,e.key)}}})),0===b.length&&e.showAboutAsDefault&&void 0!==S&&kt(zg,{as:XA},S),b.length>0&&kt(c.a.Fragment,null,kt(nM,o()({},m,{style:{marginTop:0}})),kt(KA,null,kt("form",{id:f,onSubmit:function(t){return t.preventDefault()}},b.map((function(t){return kt(dM,{key:t,helpVisible:!0,label:kt(C,{id:t}),checked:h.has(t),onChange:function(){return i(p,t)}})})))),kt(WA,o()({},g,{onApply:function(){return s({filter:r,hide:a})},onCancel:function(){return u({filter:r,hide:a})}}))))}))};function rk(t){var e=t.filterHandle,n=t.LabelFromID,r=t.config,i=t.translations,a=void 0===i?{}:i,l=s()(t,ek);return kt(zA,o()({},l,{content:kt(nk,{filterHandle:e,translations:a,LabelFromID:n,config:r})}))}var ik=n(124),ok=n.n(ik);var ak=["filterHandle","LabelFromID","translations","config"],sk=function(t){var e=t.config,n=void 0===e?{}:e,r=t.translations,i=t.labelledById,a=t.LabelFromID,s=t.hide,u=t.onApply,h=t.onCancel,d=t.onFilterChange,p=t.focusRef,f=t.filterHandle,m=t.initFilter,g=id().formatMessage,y=n.upperBound,v=void 0===y?"lte":y,_=n.lowerBound,b=void 0===_?"gte":_,x=n.placeholder,w=void 0===x?"E.g. 100,200":x,E=c.a.useState(LA),C=Nt()(E,1)[0],S=Tb()(m,"must.".concat(f),[]),T=Object(l.useState)(S.filter((function(t){return"isNotNull"!==t.type}))),O=Nt()(T,2),I=O[0],A=O[1],M=Object(l.useState)(""),k=Nt()(M,2),P=k[0],D=k[1],R=g({id:w});return kt(JA,{labelledById:i,title:kt(ud,{id:(null==r?void 0:r.name)||"filters.".concat(f,".name"),defaultMessage:null==r?void 0:r.name}),aboutText:r.description&&kt(ud,{id:r.description||"filters.".concat(f,".description"),defaultMessage:r.description}),onFilterChange:d,supportsExist:n.supportsExist,filterName:f,formId:C,defaultFilter:m},(function(t){var e=t.filter,r=t.toggle,i=t.setFullField,l=t.checkedMap,d=t.formId,m=t.summaryProps,g=t.footerProps;return t.isExistenceFilter?kt(vM,{footerProps:g,setFullField:i,onApply:u,onCancel:h,filter:e,hide:s,filterHandle:f}):kt(c.a.Fragment,null,kt("div",{style:{margin:"10px",zIndex:10,display:"inline-block",position:"relative"}},kt(Fr,{ref:p,value:P,onChange:function(t){var e=t.target.value;n.regex?null!==t.target.value.match(n.regex)&&D(e):D(e)},placeholder:R,onKeyPress:function(t){var n=t.target.value;if(t.which===_n)if(""===n)u({filter:e,hide:s});else{var i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"gte",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"lte",r=t.indexOf(",")>-1?",":null;if(r||(r=t.indexOf("-")>0?"-":null),"string"==typeof t&&r){var i,o=t.split(r),a=o.map((function(t){return t.trim()})).map((function(t){return"*"===t||""===t?void 0:t}));return{type:"range",value:(i={},Ft()(i,n,a[0]),Ft()(i,e,a[1]),i)}}return{type:"equals",value:t}}(n,v,b);D("");var o=ok()([i],I,mn);A(o),r(f,i)}}})),I.length>0&&kt(c.a.Fragment,null,kt(nM,o()({},m,{style:{marginTop:0}})),kt(KA,null,kt("form",{id:d,onSubmit:function(t){return t.preventDefault()}},I.map((function(t){var e;return e="equals"===t.type?kt(ud,{id:"intervals.description.e",defaultMessage:"Filter name",values:{is:t.value}}):kt(c.a.Fragment,null,(null==t?void 0:t.value)&&(null==t?void 0:t.value[b])&&kt(ud,{id:"intervals.description.".concat(b),defaultMessage:"Filter name",values:{from:null==t?void 0:t.value[b]}}),(null==t?void 0:t.value)&&(null==t?void 0:t.value[v])&&(null==t?void 0:t.value[b])&&kt(c.a.Fragment,null,". "),(null==t?void 0:t.value)&&(null==t?void 0:t.value[v])&&kt(ud,{id:"intervals.description.".concat(v),defaultMessage:"Filter name",values:{to:null==t?void 0:t.value[v]}})),kt(dM,{key:mn(t),helpVisible:!0,label:kt(a,{id:t}),helpText:e,checked:l.has(mn(t)),onChange:function(){return r(f,t)}})})))),kt(WA,o()({},g,{onApply:function(){return u({filter:e,hide:s})},onCancel:function(){return h({filter:e,hide:s})}}))))}))};function lk(t){var e=t.filterHandle,n=t.LabelFromID,r=t.translations,i=void 0===r?{}:r,a=t.config,l=s()(t,ak);return kt(zA,o()({},l,{content:kt(sk,{filterHandle:e,LabelFromID:n,translations:i,config:a})}))}var ck=["filterHandle","LabelFromID","translations","config"],uk=function(t){var e=t.config,n=t.translations,r=t.LabelFromID,i=t.hide,a=t.labelledById,s=t.onApply,u=t.onCancel,h=t.onFilterChange,d=t.focusRef,p=t.filterHandle,f=t.initFilter,m=Object(l.useState)(LA),g=Nt()(m,1)[0],y=e.options,v=Tb()(f,"must_not.".concat(p),[]).length,_=Object(l.useState)(v>0&&e.supportsNegation),b=Nt()(_,2),x=b[0],w=b[1];return kt(JA,{labelledById:a,onApply:s,onCancel:u,title:kt(ud,{id:(null==n?void 0:n.name)||"filters.".concat(p,".name"),defaultMessage:null==n?void 0:n.name}),hasHelpTexts:e.hasOptionDescriptions,supportsExist:e.supportsExist,aboutText:n.description&&kt(ud,{id:n.description||"filters.".concat(p,".description"),defaultMessage:n.description}),isNegated:x,onFilterChange:h,filterName:p,formId:g,defaultFilter:f,defaultHelpVisible:e.showOptionHelp},(function(t){var n=t.helpVisible,a=t.negateField,l=t.toggle,h=t.setFullField,f=t.filter,m=t.checkedMap,g=t.formId,v=t.summaryProps,_=t.footerProps;return t.isExistenceFilter?kt(vM,{footerProps:_,setFullField:h,onApply:s,onCancel:u,filter:f,hide:i,filterHandle:p}):kt(c.a.Fragment,null,e.supportsNegation&&kt(oM,{checked:x,onChange:function(t){a(p,!x),w(!x)}},kt(ud,{id:"filterSupport.excludeSelected",defaultMessage:"Exclude selected"})),kt(nM,v),kt(KA,{onKeyPress:function(t){t.shiftKey&&t.which===_n&&s({filter:f,hide:i})}},kt("form",{id:g,onSubmit:function(t){return t.preventDefault()}},y.map((function(t,i){return kt(dM,{isRadio:e.isRadio,innerRef:0===i?d:null,key:t.key,helpVisible:n,helpText:t.desc,label:kt(r,{id:t.key}),checked:m.has(t.key),onChange:function(){e.isRadio?h(p,[t.key],!x):l(p,t.key,!x)}})})))),kt(WA,o()({},_,{onApply:function(){return s({filter:f,hide:i})},onCancel:function(){return u({filter:f,hide:i})}})))}))};function hk(t){var e=t.filterHandle,n=t.LabelFromID,r=t.translations,i=void 0===r?{}:r,a=t.config,l=s()(t,ck);return kt(zA,o()({},l,{content:kt(uk,{filterHandle:e,LabelFromID:n,translations:i,config:a})}))}var dk=["filterHandle","LabelFromID","translations","config"];var pk=function(t){var e=t.config,n=void 0===e?{}:e,r=t.translations,i=t.hide,a=t.onApply,s=t.onCancel,u=t.onFilterChange,h=t.focusRef,d=t.filterHandle,p=t.initFilter,f=n.placeholder,m=void 0===f?"Input text":f,g=c.a.useState(LA),y=Nt()(g,1)[0],v=Object(l.useState)([]),_=Nt()(v,2),b=_[0],x=_[1],w=Object(l.useState)(""),E=Nt()(w,2),C=E[0],S=E[1],T=Tb()(p,"must_not.".concat(d),[]).length,O=Object(l.useState)(T>0&&n.supportsNegation),I=Nt()(O,2),A=I[0],M=I[1],k=Object(l.useState)(!1),P=Nt()(k,2),D=P[0],R=P[1];Object(l.useEffect)((function(){var t=Tb()(p,"must.".concat(d),[]),e=Tb()(p,"must_not.".concat(d),[]),n=t.filter((function(t){return"isNotNull"===t.type})),r=e.filter((function(t){return"isNotNull"===t.type})),i=[t,e,n,r].reduce((function(t,e){return t+=e.length>0?1:0}),0);R(i>1),i<2&&x(t.length>0?t:e)}),[p]),D&&console.log("Complexity above what filter supports. Show dump of filter instead.");var L=n.singleSelect,N=n.restrictWildcards?/^(?![\*\?]).*/g:void 0;return kt(JA,{labelledById:!1,title:kt(ud,{id:(null==r?void 0:r.name)||"filters.".concat(d,".name"),defaultMessage:null==r?void 0:r.name}),aboutText:r.description&&kt(ud,{id:r.description||"filters.".concat(d,".description"),defaultMessage:r.description}),onFilterChange:u,supportsExist:n.supportsExist,filterName:d,isNegated:A,formId:y,defaultFilter:p},(function(t){var e=t.filter,r=t.negateField,l=t.toggle,u=t.setFullField,p=t.checkedMap,f=t.formId,g=t.summaryProps,y=t.footerProps,v=t.isExistenceFilter;return v?kt(vM,{footerProps:y,setFullField:u,onApply:a,onCancel:s,filter:e,hide:i,filterHandle:d}):kt(c.a.Fragment,null,kt("div",{css:mk},kt(Fr,{ref:h,value:C,onChange:function(t){var e=t.target.value;N?null!==e.match(N)&&S(e):S(e)},placeholder:m,onKeyPress:function(t){var n=t.target.value;if(t.which===_n)if(""===n)a({filter:e,hide:i});else if(L){x([n]);var r=A?[d,[],[n]]:[d,[n],[]];u.apply(void 0,r).then((function(t){return a({filter:t,hide:i})})).catch((function(t){return console.log(t)}))}else{S("");var o=Nb()(new Set([n].concat(Nb()(b))));x(o),l(d,n,!A)}}})),void 0!==v&&n.supportsNegation&&kt(oM,{checked:A,onChange:function(t){r(d,!A),M(!A)}},kt(ud,{id:"filterSupport.excludeSelected",defaultMessage:"Exclude selected"})),b.length>0&&void 0!==v&&kt(c.a.Fragment,null,kt(nM,g),kt(KA,null,kt("form",{id:f,onSubmit:function(t){return t.preventDefault()}},b.map((function(t){return kt(dM,{key:t,helpVisible:!1,label:t,checked:p.has(t),onChange:function(){return l(d,t,!A)}})})))),kt(WA,o()({},y,{onApply:function(){return a({filter:e,hide:i})},onCancel:function(){return s({filter:e,hide:i})}}))))}))};function fk(t){var e=t.filterHandle,n=t.LabelFromID,r=t.translations,i=void 0===r?{}:r,a=t.config,l=s()(t,dk);return kt(zA,o()({},l,{content:kt(pk,{filterHandle:e,LabelFromID:n,translations:i,config:a})}))}var mk={name:"1ru3akj",styles:"margin:10px;z-index:10;display:inline-block;position:relative;&+div{margin-top:0;>div{margin-top:0;}}"},gk=["filterHandle","LabelFromID","translations","config"],yk=function(t){var e,n=t.config,r=t.translations,i=t.LabelFromID,o=t.hide,a=t.labelledById,s=t.onApply,l=t.onCancel,u=t.onFilterChange,h=t.focusRef,d=t.filterHandle,p=t.initFilter,f=c.a.useState(LA),m=Nt()(f,1)[0];if(n.dontWrapInStdFilter){var g={formId:m,config:n,LabelFromID:i,translations:r,hide:o,labelledById:a,onApply:s,onCancel:l,onFilterChange:u,focusRef:h,filterHandle:d,initFilter:p,standardComponents:{SummaryBar:nM,FilterBody:KA,Footer:WA,Suggest:lM,Option:dM},FilterState:rx,FilterContext:jb};return kt(n.component,g)}return kt(JA,(e={labelledById:a,onApply:s,onCancel:l,title:kt(ud,{id:(null==r?void 0:r.name)||"filters.".concat(d,".name"),defaultMessage:null==r?void 0:r.name}),hasHelpTexts:n.hasOptionDescriptions,supportsExist:n.supportsExist,aboutText:r.description&&kt(ud,{id:r.description||"filters.".concat(d,".description"),defaultMessage:r.description})},Ft()(e,"supportsExist",n.supportsExist),Ft()(e,"onFilterChange",u),Ft()(e,"filterName",d),Ft()(e,"formId",m),Ft()(e,"defaultFilter",p),Ft()(e,"defaultHelpVisible",n.showOptionHelp),e),(function(t){var e=t.filter,r=t.toggle,a=t.setFullField,c=t.checkedMap,u=t.formId,p=t.summaryProps,f=t.footerProps,m=t.isExistenceFilter;if(m)return kt(vM,{footerProps:f,setFullField:a,onApply:s,onCancel:l,filter:e,hide:o,filterHandle:d});var g={filter:e,toggle:r,setFullField:a,checkedMap:c,formId:u,summaryProps:p,footerProps:f,isExistenceFilter:m,filterHandle:d,onApply:s,onCancel:l,hide:o,focusRef:h,LabelFromID:i,standardComponents:{SummaryBar:nM,FilterBody:KA,Footer:WA,Suggest:lM,Option:dM}};return kt(n.component,g)}))};function vk(t){var e,n=t.filterHandle,r=t.LabelFromID,i=t.translations,a=void 0===i?{}:i,l=t.config,c=s()(t,gk);return kt(zA,o()({},c,{content:kt(yk,(e={filterHandle:n,LabelFromID:r,translations:a},Ft()(e,"translations",a),Ft()(e,"config",l),e))}))}var _k=["filterHandle","LabelFromID","translations","config"];var bk=function(t){var e=t.config,n=(t.radio,t.hide),r=t.labelledById,i=t.onApply,a=t.onCancel,s=t.onFilterChange,u=t.focusRef,h=t.filterHandle,d=t.initFilter,p=c.a.useState(LA),f=Nt()(p,1)[0],m=Object(l.useState)(),g=Nt()(m,2),y=g[0],v=g[1];return c.a.useEffect((function(){e.getVocabulary({lang:"eng"}).then((function(t){return v(t)})).catch((function(t){return console.error(t)}))}),[d,h,e.getVocabulary]),kt(JA,{labelledById:r,onApply:i,onCancel:a,title:null==y?void 0:y.label,aboutText:null==y?void 0:y.definition,hasHelpTexts:null==y?void 0:y.hasConceptDefinitions,onFilterChange:s,filterName:h,formId:f,defaultFilter:d},(function(t){var e=t.helpVisible,r=(t.setField,t.toggle),s=t.filter,l=t.checkedMap,d=t.formId,p=t.summaryProps,f=t.footerProps;return kt(c.a.Fragment,null,kt(nM,p),kt(KA,null,kt("form",{id:d,onSubmit:function(t){return t.preventDefault()}},(null==y?void 0:y.concepts)&&y.concepts.map((function(t,n){return kt(dM,{innerRef:0===n?u:null,key:t.name,helpVisible:e,helpText:t.definition,label:t.label,checked:l.has(t.name),onChange:function(){return r(h,t.name)}})})))),kt(WA,o()({},f,{onApply:function(){return i({filter:s,hide:n})},onCancel:function(){return a({filter:s,hide:n})}})))}))};function xk(t){var e=t.filterHandle,n=(t.LabelFromID,t.translations,t.config),r=s()(t,_k);return kt(zA,o()({},r,{content:kt(bk,{filterHandle:e,config:n})}))}var wk=["filterHandle","LabelFromID","translations","config"],Ek=function(t){var e,n,r=t.config,i=void 0===r?{}:r,a=t.translations,s=t.hide,u=t.onApply,h=t.onCancel,d=t.onFilterChange,p=t.focusRef,f=t.filterHandle,m=t.initFilter,g=zv(i.query,{lazyLoad:!0}),y=g.data,v=(g.error,g.loading),_=g.load,b=Object(l.useState)(25),x=Nt()(b,2),w=x[0],E=x[1],C=Object(l.useState)(""),S=Nt()(C,2),T=S[0],O=S[1],I=i.queryKey,A=i.placeholder,M=void 0===A?"Input text":A,k=c.a.useState(LA),P=Nt()(k,1)[0],D=Tb()(m,"must.".concat(f),[]),R=Object(l.useState)(D.filter((function(t){return"isNotNull"!==t.type}))),L=Nt()(R,2),N=L[0],j=L[1],F=Object(l.useState)(""),z=Nt()(F,2),B=z[0],U=z[1],G=Object(l.useState)(""),V=Nt()(G,2),q=V[0],H=V[1],W=Object(l.useContext)(hx);Object(l.useEffect)((function(){if(void 0!==P){var t=[];null!=W&&W.rootPredicate&&t.push(W.rootPredicate),T&&""!==T&&t.push({type:"like",key:I,value:"".concat(T)});var e=T.replace(/\*/g,".*").replace(/\?/,".").replace(/([\?\+\|\{\}\[\]\(\)\"\\])/g,(function(t,e){return"\\"+e})).toLowerCase();_({keepDataWhileLoading:w>25,variables:{size:w,include:e,predicate:{type:"and",predicates:t}}})}}),[w,T]);var Z=Object(l.useCallback)((function(){E(w+50)}),[w]),$=Object(l.useCallback)((function(t){E(25),O(t),H(!0)}),[]),K=null==y||null===(e=y.occurrenceSearch)||void 0===e||null===(n=e.facet)||void 0===n?void 0:n[I],Y=i.restrictWildcards?/^(?![\*\?]).*/g:void 0;return kt(JA,{labelledById:!1,title:kt(ud,{id:(null==a?void 0:a.name)||"filters.".concat(f,".name"),defaultMessage:null==a?void 0:a.name}),aboutText:a.description&&kt(ud,{id:a.description||"filters.".concat(f,".description"),defaultMessage:a.description}),onFilterChange:d,supportsExist:i.supportsExist,filterName:f,formId:P,defaultFilter:m},(function(t){var e,n,r=t.filter,a=t.toggle,l=t.setFullField,d=t.checkedMap,m=t.formId,g=t.summaryProps,_=t.footerProps,b=t.isExistenceFilter;if(b)return kt(vM,{footerProps:_,setFullField:l,onApply:u,onCancel:h,filter:r,hide:s,filterHandle:f});var x=null==y||null===(e=y.occurrenceSearch)||void 0===e||null===(n=e.cardinality)||void 0===n?void 0:n[I],E=x?(null==K?void 0:K.length)<=x:(null==K?void 0:K.length)===w;return kt(c.a.Fragment,null,kt("div",{style:{zIndex:10,display:"inline-block",position:"relative"}},kt("div",{style:{margin:"10px 10px 0 10px",display:"flex"}},kt(Fr,{ref:p,value:B,onChange:function(t){var e=t.target.value;Y?null!==e.match(Y)&&U(e):U(e)},placeholder:M,onKeyPress:function(t){t.target.value;t.which===_n&&$(B)}}),kt(pr,{onClick:function(){return $(B)}},kt(Rn,null)))),void 0!==b&&kt(c.a.Fragment,null,kt(oM,{style:{marginBottom:4},checked:q,onChange:function(t){q||$(B),H(!q)}},kt(ud,{id:"filterSupport.showSuggestions",defaultMessage:"Show suggestions"})),kt(nM,o()({},g,{style:{marginTop:0}})),kt(KA,{style:{paddingTop:0}},kt("form",{id:m,onSubmit:function(t){return t.preventDefault()}},q&&kt(c.a.Fragment,null,v&&!K&&kt(c.a.Fragment,null,kt(hM,{helpVisible:!0}),kt(hM,{helpVisible:!0}),kt(hM,{helpVisible:!0})),K&&kt(c.a.Fragment,null,!i.disallowLikeFilters&&""!==T&&kt("div",{style:{borderBottom:"1px solid #eee",marginBottom:12,paddingBottom:12}},kt(dM,{key:T,loading:v,helpVisible:!0,helpText:kt(ud,{id:"filterSupport.useWildcardPattern",defaultMessage:"Search for the pattern"}),label:T,checked:d.has(mn({type:"like",value:T})),onChange:function(){var t={type:"like",value:T};a(f,t);var e=ok()(N,[t],mn);j(e)}})),K.map((function(t){return kt(dM,{key:t.key,loading:v,helpVisible:!0,helpText:kt(ud,{id:"counts.nRecordsTotal",defaultMessage:"{total} records in total",values:{total:t.count}}),label:t.key,checked:d.has(t.key),onChange:function(){a(f,t.key);var e=ok()(N,[t.key],mn);j(e)}})})),E&&kt("div",{style:{fontSize:12,marginLeft:24,marginTop:12}},kt(pr,{appearance:"primaryOutline",onClick:Z},kt(ud,{id:"search.loadMore",defaultMessage:"More"}))))),!q&&kt(c.a.Fragment,null,0===N.length&&kt("div",{style:{margin:"12px 0",opacity:.7}},kt(ud,{id:"filterSupport.wildcardHelp",defaultMessage:"More"})),N.map((function(t){return kt(dM,{key:mn(t),helpVisible:!1,label:"string"==typeof t?t:t.value,checked:d.has("string"==typeof t?t:mn(t)),onChange:function(){return a(f,t)}})}))))),N.length>0&&kt(WA,o()({},_,{onApply:function(){return u({filter:r,hide:s})},onCancel:function(){return h({filter:r,hide:s})}}))))}))};function Ck(t){var e=t.filterHandle,n=t.LabelFromID,r=t.translations,i=void 0===r?{}:r,a=t.config,l=s()(t,wk);return kt(zA,o()({},l,{content:kt(Ek,{filterHandle:e,LabelFromID:n,translations:i,config:a})}))}function Sk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Tk(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Sk(Object(n),!0).forEach((function(e){Ft()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sk(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ok(t,e){var n=e.translations,r=e.filterHandle,i=e.LabelFromID;return function(e){var a=Object(l.useContext)(jb);return kt(t,{modal:!0},kt(tk,o()({},e,{translations:n,filterHandle:r,DisplayName:i,mustOptions:Tb()(a.filter,"must.".concat(r),[]),mustNotOptions:Tb()(a.filter,"must_not.".concat(r),[])})))}}function Ik(t){var e=t.labelMap,n=t.suggestConfigMap,r=t.filterWidgetConfig,i=t.context;return Object.entries(r).reduce((function(t,r){var a,s,l,c,u=Nt()(r,2),h=u[0],d=u[1],p=d.type,f=d.config,m={widgetHandle:h,config:f,labelMap:e,suggestConfigMap:n,context:i};"SUGGEST"===p?c=function(t){var e=t.widgetHandle,n=t.config,r=t.labelMap,i=t.suggestConfigMap,a=(t.context,r[n.std.id2labelHandle||e]||function(t){var e=t.id;return"object"===zb()(e)?e.value:e}),s={filterHandle:n.std.filterHandle||e,translations:n.std.translations,config:Tk(Tk({suggestConfig:i[n.specific.suggestHandle||e],LabelFromID:a},n.specific),n),LabelFromID:a},l=function(t){return kt(rk,o()({},s,t))};return{Button:Ok(l,s),Popover:l,Content:function(t){return kt(nk,o()({},s,t))},LabelFromID:n.LabelFromID}}(m):"NUMBER_RANGE"===p?c=function(t){var e=t.widgetHandle,n=t.config,r=t.labelMap,i=(t.context,r[n.std.id2labelHandle||e]),a={filterHandle:n.std.filterHandle||e,translations:n.std.translations,config:n.specific,LabelFromID:i},s=function(t){return kt(lk,o()({},a,t))};return{Button:Ok(s,a),Popover:s,Content:function(t){return kt(sk,o()({},a,t))},LabelFromID:i}}(m):"ENUM"===p?c=function(t){var e=t.widgetHandle,n=t.config,r=t.labelMap,i={filterHandle:n.std.filterHandle||e,translations:n.std.translations,config:Tk(Tk({},n.specific),{},{options:n.specific.hasOptionDescriptions?n.specific.options:n.specific.options.map((function(t){return{key:t}}))}),LabelFromID:r[n.std.id2labelHandle||e]||function(t){var r=t.id;return kt(ud,{id:"enums.".concat(n.std.filterHandle||e,".").concat(r),defaultMessage:aw(r)})}},a=function(t){return kt(hk,o()({},i,t))};return{Button:Ok(a,i),Popover:a,Content:function(t){return kt(uk,o()({},i,t))},LabelFromID:n.LabelFromID}}(m):"SIMPLE_TEXT"===p?c=function(t){var e=t.widgetHandle,n=t.config,r={filterHandle:n.std.filterHandle||e,translations:n.std.translations,config:n.specific,LabelFromID:function(t){return t.id}},i=function(t){return kt(fk,o()({},r,t))};return{Button:Ok(i,r),Popover:i,Content:function(t){return kt(pk,o()({},r,t))},LabelFromID:n.LabelFromID}}(m):"CUSTOM_STANDARD"===p?c=function(t){var e=t.widgetHandle,n=t.config,r=t.labelMap,i={filterHandle:n.std.filterHandle||e,translations:n.std.translations,config:{component:n.specific.component,dontWrapInStdFilter:n.specific.dontWrapInStdFilter,hasOptionDescriptions:n.specific.hasOptionDescriptions,supportsExist:n.specific.supportsExist},LabelFromID:r[n.std.id2labelHandle||e]||n.std.id2label},a=function(t){return kt(vk,o()({},i,t))};return{Button:Ok(a,i),Popover:a,Content:function(t){return kt(yk,o()({},i,t))},LabelFromID:n.LabelFromID}}(m):"VOCAB"===p?c=function(t){var e=t.widgetHandle,n=t.config,r=t.labelMap,i=t.suggestConfigMap,a=(t.context,{filterHandle:n.std.filterHandle||e,translations:n.std.translations,config:Tk(Tk({suggestConfig:i[n.specific.suggestHandle||e],LabelFromID:r[n.specific.id2labelHandle]},n.specific),n),LabelFromID:r[n.std.id2labelHandle||e]||function(t){return t.id}}),s=function(t){return kt(xk,o()({},a,t))};return{Button:Ok(s,a),Popover:s,Content:function(t){return kt(bk,o()({},a,t))},LabelFromID:n.LabelFromID}}(m):"KEYWORD_SEARCH"===p&&(c=function(t){var e=t.labelMap,n=t.suggestConfigMap,r=t.widgetHandle,i=t.config,a=e[i.std.id2labelHandle||r]||function(t){var e=t.id;return"object"===zb()(e)?e.value:e},s={filterHandle:i.std.filterHandle||r,translations:i.std.translations,config:Tk({suggestConfig:n[i.specific.suggestHandle||r]},i.specific),LabelFromID:a},l=function(t){return kt(Ck,o()({},s,t))};return{Button:Ok(l,s),Popover:l,Content:function(t){return kt(Ek,o()({},s,t))},LabelFromID:a}}(m));var g=(null===(a=f.std)||void 0===a||null===(s=a.translations)||void 0===s?void 0:s.name)||"filters.".concat((null==f||null===(l=f.std)||void 0===l?void 0:l.filterHandle)||h,".name");return t[h]=Tk(Tk({},c),{},{displayName:i.formatMessage({id:g})}),t}),{})}var Ak=n(254),Mk=n(255),kk=n(256),Pk=n(257),Dk=n(258),Rk=n(259),Lk=n(260),Nk=n(261),jk=n(262),Fk=n(263),zk=n(264),Bk=n(265),Uk=n(266),Gk=["standardComponents","summaryProps","filterHandle","setFullField","toggle","focusRef","footerProps","onApply","filter","onCancel","hide"],Vk={taxonKey:{type:"SUGGEST",config:{std:{filterHandle:"taxonKey",id2labelHandle:"canonicalName",translations:{count:"filters.taxonKey.count",name:"filters.taxonKey.name",description:"filters.taxonKey.description"}},specific:{suggestHandle:"taxonKey",id2labelHandle:"taxonKey"}}},country:{type:"SUGGEST",config:{std:{id2labelHandle:"countryCode",translations:{count:"filters.occurrenceCountry.count",name:"filters.occurrenceCountry.name",description:"filters.occurrenceCountry.description"}},specific:{suggestHandle:"countryCode"}}},countrySingle:{type:"SUGGEST",config:{std:{id2labelHandle:"countryCode",translations:{count:"filters.occurrenceCountry.count",name:"filters.occurrenceCountry.name",description:"filters.occurrenceCountry.description"}},specific:{suggestHandle:"countryCode",singleSelect:!0}}},countriesOfCoverage:{type:"SUGGEST",config:{std:{id2labelHandle:"countryCode",translations:{count:"filters.countriesOfCoverage.count",name:"filters.countriesOfCoverage.name",description:"filters.countriesOfCoverage.description"}},specific:{suggestHandle:"countryCode"}}},countriesOfResearcher:{type:"SUGGEST",config:{std:{id2labelHandle:"countryCode",translations:{count:"filters.countriesOfResearcher.count",name:"filters.countriesOfResearcher.name",description:"filters.countriesOfResearcher.description"}},specific:{suggestHandle:"countryCode"}}},publishingCountryCode:{type:"SUGGEST",config:{std:{id2labelHandle:"countryCode",translations:{count:"filters.publishingCountryCode.count",name:"filters.publishingCountryCode.name",description:"filters.publishingCountryCode.description"}},specific:{suggestHandle:"countryCode"}}},datasetKey:{type:"SUGGEST",config:{std:{translations:{count:"filters.datasetKey.count",name:"filters.datasetKey.name",description:"filters.datasetKey.description"}},specific:{suggestHandle:"datasetKeyFromOccurrenceIndex",allowEmptyQueries:!0}}},publisherKey:{type:"SUGGEST",config:{std:{translations:{count:"filters.publisherKey.count",name:"filters.publisherKey.name",description:"filters.publisherKey.description"}},specific:{suggestHandle:"publisherKeyFromOccurrenceIndex",allowEmptyQueries:!0}}},institutionCode:{type:"SUGGEST",config:{std:{translations:{count:"filters.institutionCode.count",name:"filters.institutionCode.name",description:"filters.institutionCode.description"}},specific:{suggestHandle:"institutionCode"}}},catalogNumber:{type:"KEYWORD_SEARCH",config:{std:{filterHandle:"catalogNumber",id2labelHandle:"catalogNumber",translations:{count:"filters.catalogNumber.count",name:"filters.catalogNumber.name",description:"filters.catalogNumber.description"}},specific:{id2labelHandle:"catalogNumber",placeholder:"Search for a catalog number",supportsExist:!0,query:"\n          query keywordSearch($predicate: Predicate, $size: Int){\n            occurrenceSearch(predicate: $predicate) {\n              cardinality {\n                catalogNumber\n              }\n              facet {\n                catalogNumber(size: $size) {\n                  key\n                  count\n                }\n              }\n            }\n          }\n        ",queryKey:"catalogNumber"}}},hostingOrganizationKey:{type:"SUGGEST",config:{std:{id2labelHandle:"publisherKey",translations:{count:"filters.hostingOrganizationKey.count",name:"filters.hostingOrganizationKey.name",description:"filters.hostingOrganizationKey.description"}},specific:{suggestHandle:"publisherKey",id2labelHandle:"publisherKey"}}},year:{type:"NUMBER_RANGE",config:{std:{filterHandle:"year",id2labelHandle:"year",translations:{count:"filters.year.count",name:"filters.year.name",description:"filters.year.description"}},specific:{placeholder:"search.placeholders.range",supportsExist:!0,regex:/^((-)?[0-9]{0,4})(,)?((-)?[0-9]{0,4})$/}}},basisOfRecord:{type:"ENUM",config:{std:{filterHandle:"basisOfRecord",id2labelHandle:"basisOfRecord",translations:{count:"filters.basisOfRecord.count",name:"filters.basisOfRecord.name",description:"filters.basisOfRecord.description"}},specific:{options:Ak}}},typeStatus:{type:"ENUM",config:{std:{filterHandle:"typeStatus",id2labelHandle:"typeStatus",translations:{count:"filters.typeStatus.count",name:"filters.typeStatus.name",description:"filters.typeStatus.description"}},specific:{options:Pk}}},occurrenceIssue:{type:"ENUM",config:{std:{filterHandle:"occurrenceIssue",id2labelHandle:"occurrenceIssue",translations:{count:"filters.occurrenceIssue.count",name:"filters.occurrenceIssue.name",description:"filters.occurrenceIssue.description"}},specific:{options:kk,supportsNegation:!0,supportsExist:!0}}},mediaType:{type:"ENUM",config:{std:{filterHandle:"mediaType",id2labelHandle:"mediaType",translations:{count:"filters.mediaType.count",name:"filters.mediaType.name",description:"filters.mediaType.description"}},specific:{options:Mk}}},sampleSizeUnit:{type:"KEYWORD_SEARCH",config:{std:{filterHandle:"sampleSizeUnit",translations:{count:"filters.sampleSizeUnit.count",name:"filters.sampleSizeUnit.name",description:"filters.sampleSizeUnit.description"}},specific:{placeholder:"Units of sample size",disallowLikeFilters:!0,query:"\n          query keywordSearch($predicate: Predicate, $size: Int){\n            occurrenceSearch(predicate: $predicate) {\n              cardinality {\n                sampleSizeUnit\n              }\n              facet {\n                sampleSizeUnit(size: $size) {\n                  key\n                  count\n                }\n              }\n            }\n          }\n        ",queryKey:"sampleSizeUnit"}}},license:{type:"ENUM",config:{std:{filterHandle:"license",id2labelHandle:"license",translations:{count:"filters.license.count",name:"filters.license.name",description:"filters.license.description"}},specific:{options:gv}}},coordinateUncertainty:{type:"NUMBER_RANGE",config:{std:{filterHandle:"coordinateUncertainty",id2labelHandle:"coordinateUncertainty",translations:{count:"filters.coordinateUncertainty.count",name:"filters.coordinateUncertainty.name",description:"filters.coordinateUncertainty.description"}},specific:{placeholder:"search.placeholders.range",regex:/^((-)?[0-9]{0,4})(,)?((-)?[0-9]{0,4})$/}}},depth:{type:"NUMBER_RANGE",config:{std:{filterHandle:"depth",id2labelHandle:"depth",translations:{count:"filters.depth.count",name:"filters.depth.name",description:"filters.depth.description"}},specific:{placeholder:"search.placeholders.range",regex:/^((-)?[0-9]{0,4})(,)?((-)?[0-9]{0,4})$/}}},organismQuantity:{type:"NUMBER_RANGE",config:{std:{filterHandle:"organismQuantity",id2labelHandle:"organismQuantity",translations:{count:"filters.organismQuantity.count",name:"filters.organismQuantity.name",description:"filters.organismQuantity.description"}},specific:{placeholder:"search.placeholders.range",regex:/^((-)?[0-9]{0,4})(,)?((-)?[0-9]{0,4})$/}}},sampleSizeValue:{type:"NUMBER_RANGE",config:{std:{filterHandle:"sampleSizeValue",id2labelHandle:"sampleSizeValue",translations:{count:"filters.sampleSizeValue.count",name:"filters.sampleSizeValue.name",description:"filters.sampleSizeValue.description"}},specific:{placeholder:"search.placeholders.range",regex:/^((-)?[0-9]{0,4})(,)?((-)?[0-9]{0,4})$/}}},relativeOrganismQuantity:{type:"NUMBER_RANGE",config:{std:{filterHandle:"relativeOrganismQuantity",id2labelHandle:"relativeOrganismQuantity",translations:{count:"filters.relativeOrganismQuantity.count",name:"filters.relativeOrganismQuantity.name",description:"filters.relativeOrganismQuantity.description"}},specific:{placeholder:"search.placeholders.range",regex:/^[0-9,\.]{0,10}$/}}},month:{type:"ENUM",config:{std:{filterHandle:"month",id2labelHandle:"month",translations:{count:"filters.month.count",name:"filters.month.name",description:"filters.month.description"}},specific:{options:Dk,supportsExist:!0}}},continent:{type:"ENUM",config:{std:{filterHandle:"continent",id2labelHandle:"continent",translations:{count:"filters.continent.count",name:"filters.continent.name",description:"filters.continent.description"}},specific:{options:Rk}}},protocol:{type:"ENUM",config:{std:{filterHandle:"protocol",id2labelHandle:"protocol",translations:{count:"filters.protocol.count",name:"filters.protocol.name",description:"filters.protocol.description"}},specific:{options:Lk}}},establishmentMeans:{type:"SUGGEST",config:{std:{filterHandle:"establishmentMeans",id2labelHandle:"establishmentMeansVocabulary",translations:{count:"filters.establishmentMeans.count",name:"filters.establishmentMeans.name",description:"filters.establishmentMeans.description"}},specific:{options:Nk,suggestHandle:"establishmentMeans",id2labelHandle:"establishmentMeansVocabulary",allowEmptyQueries:!0}}},recordedBy:{type:"KEYWORD_SEARCH",config:{std:{filterHandle:"recordedBy",id2labelHandle:"recordedBy",translations:{count:"filters.recordedBy.count",name:"filters.recordedBy.name",description:"filters.recordedBy.description"}},specific:{id2labelHandle:"recordedBy",placeholder:"Search by recorded by",supportsExist:!0,query:"\n          query keywordSearch($predicate: Predicate, $size: Int, $include: String){\n            occurrenceSearch(predicate: $predicate) {\n              facet {\n                recordedBy(size: $size, include: $include) {\n                  key\n                  count\n                }\n              }\n            }\n          }\n        ",queryKey:"recordedBy"}}},recordNumber:{type:"SUGGEST",config:{std:{filterHandle:"recordNumber",id2labelHandle:"recordNumber",translations:{count:"filters.recordNumber.count",name:"filters.recordNumber.name",description:"filters.recordNumber.description"}},specific:{suggestHandle:"recordNumber",id2labelHandle:"recordNumber",supportsExist:!0}}},collectionCode:{type:"SIMPLE_TEXT",config:{std:{filterHandle:"collectionCode",id2labelHandle:"collectionCode",translations:{count:"filters.collectionCode.count",name:"filters.collectionCode.name",description:"filters.collectionCode.description"}},specific:{placeholder:"Search by collection code"}}},recordedById:{type:"SIMPLE_TEXT",config:{std:{filterHandle:"recordedById",id2labelHandle:"recordedById",translations:{count:"filters.recordedById.count",name:"filters.recordedById.name",description:"filters.recordedById.description"}},specific:{supportsExist:!0,placeholder:"Example: https://orcid.org/0000-1111-2222-3333"}}},identifiedById:{type:"SIMPLE_TEXT",config:{std:{filterHandle:"identifiedById",id2labelHandle:"identifiedById",translations:{count:"filters.identifiedById.count",name:"filters.identifiedById.name",description:"filters.identifiedById.description"}},specific:{supportsExist:!0,placeholder:"Example: https://orcid.org/0000-1111-2222-3333"}}},occurrenceId:{type:"SIMPLE_TEXT",config:{std:{filterHandle:"occurrenceId",id2labelHandle:"occurrenceId",translations:{count:"filters.occurrenceId.count",name:"filters.occurrenceId.name",description:"filters.occurrenceId.description"}},specific:{supportsNegation:!0,placeholder:"Search by Occurrence identifier"}}},organismId:{type:"SIMPLE_TEXT",config:{std:{filterHandle:"organismId",id2labelHandle:"organismId",translations:{count:"filters.organismId.count",name:"filters.organismId.name",description:"filters.organismId.description"}},specific:{supportsExist:!0,placeholder:"Search by Organism identifier"}}},locality:{type:"KEYWORD_SEARCH",config:{std:{filterHandle:"locality",id2labelHandle:"locality",translations:{count:"filters.locality.count",name:"filters.locality.name",description:"filters.locality.description"}},specific:{placeholder:"Search by locality",query:"\n          query keywordSearch($predicate: Predicate, $size: Int){\n            occurrenceSearch(predicate: $predicate) {\n              cardinality {\n                locality\n              }\n              facet {\n                locality(size: $size) {\n                  key\n                  count\n                }\n              }\n            }\n          }\n        ",queryKey:"locality"}}},waterBody:{type:"KEYWORD_SEARCH",config:{std:{filterHandle:"waterBody",id2labelHandle:"waterBody",translations:{count:"filters.waterBody.count",name:"filters.waterBody.name",description:"filters.waterBody.description"}},specific:{placeholder:"Search by water body",query:"\n          query keywordSearch($predicate: Predicate, $size: Int){\n            occurrenceSearch(predicate: $predicate) {\n              cardinality {\n                waterBody\n              }\n              facet {\n                waterBody(size: $size) {\n                  key\n                  count\n                }\n              }\n            }\n          }\n        ",queryKey:"waterBody"}}},stateProvince:{type:"KEYWORD_SEARCH",config:{std:{filterHandle:"stateProvince",id2labelHandle:"stateProvince",translations:{count:"filters.stateProvince.count",name:"filters.stateProvince.name",description:"filters.stateProvince.description"}},specific:{placeholder:"Search by state province",query:"\n          query keywordSearch($predicate: Predicate, $size: Int){\n            occurrenceSearch(predicate: $predicate) {\n              cardinality {\n                stateProvince\n              }\n              facet {\n                stateProvince(size: $size) {\n                  key\n                  count\n                }\n              }\n            }\n          }\n        ",queryKey:"stateProvince"}}},eventId:{type:"SIMPLE_TEXT",config:{std:{filterHandle:"eventId",id2labelHandle:"eventId",translations:{count:"filters.eventId.count",name:"filters.eventId.name",description:"filters.eventId.description"}},specific:{placeholder:"Search by Event identifier",supportsExist:!0}}},samplingProtocol:{type:"KEYWORD_SEARCH",config:{std:{filterHandle:"samplingProtocol",id2labelHandle:"samplingProtocol",translations:{count:"filters.samplingProtocol.count",name:"filters.samplingProtocol.name",description:"filters.samplingProtocol.description"}},specific:{placeholder:"Search by sampling protocol",query:"\n          query keywordSearch($predicate: Predicate, $size: Int){\n            occurrenceSearch(predicate: $predicate) {\n              cardinality {\n                samplingProtocol\n              }\n              facet {\n                samplingProtocol(size: $size) {\n                  key\n                  count\n                }\n              }\n            }\n          }\n        ",queryKey:"samplingProtocol"}}},elevation:{type:"NUMBER_RANGE",config:{std:{filterHandle:"elevation",id2labelHandle:"elevation",translations:{count:"filters.elevation.count",name:"filters.elevation.name",description:"filters.elevation.description"}},specific:{placeholder:"search.placeholders.range",regex:/^[0-9,\.]{0,10}$/}}},occurrenceStatus:{type:"ENUM",config:{std:{filterHandle:"occurrenceStatus",id2labelHandle:"occurrenceStatus",translations:{count:"filters.occurrenceStatus.count",name:"filters.occurrenceStatus.name",description:"filters.occurrenceStatus.description"}},specific:{options:jk}}},gadmGid:{type:"SUGGEST",config:{std:{filterHandle:"gadmGid",id2labelHandle:"gadmGid",translations:{count:"filters.gadmGid.count",name:"filters.gadmGid.name",description:"filters.gadmGid.description"}},specific:{suggestHandle:"gadmGid",id2labelHandle:"gadmGid",showAboutAsDefault:!0,supportsExist:!0}}},identifiedBy:{type:"KEYWORD_SEARCH",config:{std:{filterHandle:"identifiedBy",id2labelHandle:"identifiedBy",translations:{count:"filters.identifiedBy.count",name:"filters.identifiedBy.name",description:"filters.identifiedBy.description"}},specific:{placeholder:"Search by identified by",supportsExist:!0,query:"\n          query keywordSearch($predicate: Predicate, $size: Int){\n            occurrenceSearch(predicate: $predicate) {\n              cardinality {\n                identifiedBy\n              }\n              facet {\n                identifiedBy(size: $size) {\n                  key\n                  count\n                }\n              }\n            }\n          }\n        ",queryKey:"identifiedBy"}}},isInCluster:{type:"ENUM",config:{std:{filterHandle:"isInCluster",id2labelHandle:"isInCluster",translations:{count:"filters.isInCluster.count",name:"filters.isInCluster.name",description:"filters.isInCluster.description"}},specific:{options:["true","false"],isRadio:!0}}},datasetType:{type:"ENUM",config:{std:{filterHandle:"datasetType",id2labelHandle:"datasetType",translations:{count:"filters.datasetType.count",name:"filters.datasetType.name",description:"filters.datasetType.description"}},specific:{options:Fk}}},datasetSubtype:{type:"ENUM",config:{std:{filterHandle:"datasetSubtype",id2labelHandle:"datasetSubtype",translations:{count:"filters.datasetSubtype.count",name:"filters.datasetSubtype.name",description:"filters.datasetSubtype.description"}},specific:{options:zk}}},institutionKey:{type:"SUGGEST",config:{std:{filterHandle:"institutionKey",id2labelHandle:"institutionKey",translations:{count:"filters.institutionKey.count",name:"filters.institutionKey.name",description:"filters.institutionKey.description"}},specific:{suggestHandle:"institutionKey",id2labelHandle:"institutionKey"}}},name:{type:"SIMPLE_TEXT",config:{std:{filterHandle:"name",id2labelHandle:"name",translations:{count:"filters.name.count",name:"filters.name.name",description:"filters.name.description"}},specific:{placeholder:"Search by institution name",singleSelect:!0}}},city:{type:"SIMPLE_TEXT",config:{std:{filterHandle:"city",id2labelHandle:"city",translations:{count:"filters.city.count",name:"filters.city.name",description:"filters.city.description"}},specific:{placeholder:"Search by institution city",singleSelect:!0}}},code:{type:"SIMPLE_TEXT",config:{std:{filterHandle:"code",id2labelHandle:"code",translations:{count:"filters.code.count",name:"filters.code.name",description:"filters.code.description"}},specific:{placeholder:"Search by institution code",singleSelect:!0}}},verbatimScientificName:{type:"KEYWORD_SEARCH",config:{std:{filterHandle:"verbatimScientificName",id2labelHandle:"verbatimScientificName",translations:{count:"filters.verbatimScientificName.count",name:"filters.verbatimScientificName.name",description:"filters.verbatimScientificName.description"}},specific:{placeholder:"Example: Felis concolor",query:"\n          query keywordSearch($predicate: Predicate, $size: Int){\n            occurrenceSearch(predicate: $predicate) {\n              cardinality {\n                verbatimScientificName\n              }\n              facet {\n                verbatimScientificName(size: $size) {\n                  key\n                  count\n                }\n              }\n            }\n          }\n        ",queryKey:"verbatimScientificName"}}},networkKey:{type:"SUGGEST",config:{std:{filterHandle:"networkKey",id2labelHandle:"networkKey",translations:{count:"filters.networkKey.count",name:"filters.networkKey.name",description:"filters.networkKey.description"}},specific:{suggestHandle:"networkKey",id2labelHandle:"networkKey"}}},literatureType:{type:"ENUM",config:{std:{filterHandle:"literatureType",id2labelHandle:"literatureType",translations:{count:"filters.literatureType.count",name:"filters.literatureType.name",description:"filters.literatureType.description"}},specific:{options:Bk}}},dwcaExtension:{type:"ENUM",config:{std:{filterHandle:"dwcaExtension",id2labelHandle:"dwcaExtension",translations:{count:"filters.dwcaExtension.count",name:"filters.dwcaExtension.name",description:"filters.dwcaExtension.description"}},specific:{options:Uk}}},q:{type:"CUSTOM_STANDARD",config:{std:{filterHandle:"q",translations:{count:"filters.q.count",name:"filters.q.name",description:"filters.q.description"}},specific:{description:"filters.q.description",component:function(t){var e,n,r=t.standardComponents,i=(t.summaryProps,t.filterHandle,t.setFullField),a=(t.toggle,t.focusRef),l=t.footerProps,u=t.onApply,h=t.filter,d=t.onCancel,p=t.hide,f=(s()(t,Gk),r.Footer);r.SummaryBar,r.FilterBody;return kt(c.a.Fragment,null,kt("div",{style:{margin:"10px"}},kt(Fr,{ref:a,value:null!=h&&null!==(e=h.must)&&void 0!==e&&null!==(n=e.q)&&void 0!==n&&n.length?h.must.q[0]:"",onChange:function(t){i("q",[t.target.value])},onKeyPress:function(t){return 13===t.which?u({filter:h,hide:p}):null}})),kt(f,o()({},l,{onApply:function(){return u({filter:h,hide:p})},onCancel:function(){return d({filter:h,hide:p})}})))}}}}},qk=["taxonKey","country","publishingCountryCode","datasetKey","publisherKey","institutionCode","catalogNumber","hostingOrganizationKey","year","basisOfRecord","typeStatus","occurrenceIssue","mediaType","sampleSizeUnit","license","coordinateUncertainty","depth","organismQuantity","sampleSizeValue","relativeOrganismQuantity","month","continent","protocol","establishmentMeans","recordedBy","recordNumber","collectionCode","recordedById","identifiedById","occurrenceId","organismId","locality","waterBody","stateProvince","eventId","samplingProtocol","elevation","occurrenceStatus","gadmGid","identifiedBy","isInCluster","institutionKey","q","verbatimScientificName","dwcaExtension"].sort(),Hk={filters:qk,included:qk,highlighted:["occurrenceStatus","taxonKey","year","country","occurrenceIssue"]};function Wk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Zk(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Wk(Object(n),!0).forEach((function(e){Ft()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wk(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var $k={preFilterTransform:function(t){var e,n=null==t||null===(e=t.must_not)||void 0===e?void 0:e.occurrenceIssue;return n&&n.every((function(t){return"string"==typeof t}))?{must:Zk({},t.must),must_not:Zk({},t.must_not)}:t},fields:{q:{defaultType:"fuzzy",v1:{supportedTypes:["fuzzy"]}},coordinateUncertainty:{defaultKey:"coordinateUncertaintyInMeters",v1:{supportedTypes:["range","equals"]}},sampleSizeValue:{v1:{supportedTypes:["range","equals"]}},relativeOrganismQuantity:{v1:{supportedTypes:["range","equals"]}},elevation:{v1:{supportedTypes:["range","equals"]}},publisherKey:{defaultKey:"publishingOrg"},publishingCountryCode:{defaultKey:"publishingCountry"},occurrenceIssue:{defaultKey:"issue"},hostKey:{defaultKey:"hostingOrganizationKey"},notIssues:{serializer:function(t){return{type:"and",predicates:t.values.map((function(t){return{type:"equals",key:"notIssues",value:t}}))}}},geometry:{defaultType:"within"},basisOfRecord:{defaultNegationKey:"not_basisOfRecord"},year:{defaultType:"range",v1:{supportedTypes:["range","equals"]}},depth:{defaultType:"range",v1:{supportedTypes:["range","equals"]}},organismQuantity:{defaultType:"range",v1:{supportedTypes:["range","equals"]}}}};qk.forEach((function(t){$k.fields[t]=$k.fields[t]||{}}));var Kk=$k,Yk={encode:function(t){return t?NE(JSON.stringify(t)):void 0},decode:function(t){try{var e=t?jE(t):t;return JSON.parse(e)}catch(t){return}}};function Xk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Jk(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Xk(Object(n),!0).forEach((function(e){Ft()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xk(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Qk(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.predicateConfig,n=Object(l.useState)({}),r=Nt()(n,2),i=r[0],o=r[1],a=Object(l.useState)({}),s=Nt()(a,2),c=s[0],u=s[1],h=Object(l.useState)({}),d=Nt()(h,2),p=d[0],f=d[1],m=k_(i),g=Nt()(m,2),y=g[0],v=g[1];Object(l.useEffect)((function(){var t=Object.keys(e.fields).reduce((function(t,n){return t[e.fields[n].defaultKey||n]=void 0,t}),{});t.filter=void 0,f(t);var n=Object.keys(e.fields).reduce((function(t,n){return t[e.fields[n].defaultKey||n]=c_,t}),{});n.filter=Yk,o(n)}),[e]);var _=Object(l.useCallback)((function(t){var n=dx(t,e),r=n.v1Filter,i=n.errors;v(i?Jk(Jk({},p),{},{filter:t}):Jk(Jk({},p),r))}),[e,p]);return Object(l.useEffect)((function(){var t;t=y.filter?y.filter:gx(y,e),u(t)}),[y]),[c,_]}var tP=n(161),eP=n.n(tP),nP=n(162),rP=n.n(nP),iP={defaultColumns:["features","country","coordinates","year","basisOfRecord","dataset","publisher"],columns:[{name:"scientificName",trKey:"filters.taxonKey.name",filterKey:"taxonKey",value:{key:"gbifClassification.usage.formattedName",formatter:function(t,e){return kt("span",{dangerouslySetInnerHTML:{__html:t}})}},width:"wide"},{name:"features",trKey:"tableHeaders.features",value:{key:"features",formatter:function(t,e){var n;return kt(zf,{iconsOnly:!0,stillImageCount:e.stillImageCount,movingImageCount:e.movingImageCount,soundCount:e.soundCount,typeStatus:e.typeStatus,isSequenced:e.volatile.features.isSequenced,isTreament:e.volatile.features.isTreament,isClustered:e.volatile.features.isClustered,isSamplingEvent:e.volatile.features.isSamplingEvent,issueCount:null==e||null===(n=e.issues)||void 0===n?void 0:n.length})}}},{name:"country",trKey:"filters.occurrenceCountry.name",filterKey:"country",value:{key:"countryCode",labelHandle:"countryCode"}},{name:"coordinates",trKey:"filters.coordinates.name",value:{key:"formattedCoordinates"},noWrap:!0},{name:"year",trKey:"filters.year.name",filterKey:"year",value:{key:"year"}},{name:"basisOfRecord",trKey:"filters.basisOfRecord.name",filterKey:"basisOfRecord",value:{key:"basisOfRecord",labelHandle:"basisOfRecord"}},{name:"dataset",trKey:"filters.datasetKey.name",filterKey:"datasetKey",value:{key:"datasetTitle"},width:"wide"},{name:"publisher",trKey:"filters.publisherKey.name",filterKey:"publisherKey",value:{key:"publisherTitle"},width:"wide"},{name:"catalogNumber",trKey:"filters.catalogNumber.name",filterKey:"catalogNumber",value:{key:"catalogNumber"},width:"wide"},{name:"recordedBy",trKey:"filters.recordedBy.name",filterKey:"recordedBy",value:{key:"recordedBy"},width:"wide"},{name:"identifiedBy",trKey:"filters.identifiedBy.name",filterKey:"identifiedBy",value:{key:"identifiedBy"},width:"wide"},{name:"recordNumber",trKey:"filters.recordNumber.name",filterKey:"recordNumber",value:{key:"recordNumber"}},{name:"typeStatus",trKey:"filters.typeStatus.name",filterKey:"typeStatus",value:{key:"typeStatus",labelHandle:"typeStatus"}},{name:"preparations",trKey:"occurrenceFieldNames.preparations",value:{key:"preparations"}},{name:"collectionCode",trKey:"occurrenceFieldNames.collectionCode",value:{key:"collectionCode"}},{name:"institutionCode",trKey:"occurrenceFieldNames.institutionCode",value:{key:"institutionCode"}},{name:"locality",trKey:"occurrenceFieldNames.locality",value:{key:"locality"}}]},oP=["config","pageLayout"];function aP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function sP(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?aP(Object(n),!0).forEach((function(e){Ft()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aP(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var lP=function(t){var e=t.config,n=void 0===e?{}:e,r=t.pageLayout,i=s()(t,oP),a=Object(l.useContext)(Zt),c=Object(l.useContext)(Ey),u=Qk({predicateConfig:Kk}),h=Nt()(u,2),d=h[0],p=h[1],f=r?NM:RM,m=Object(l.useContext)(jv),g=id(),y=Object(l.useMemo)((function(){return function(t,e){var n=t.labelConfig,r=t.getSuggestConfig,i=t.filterWidgetConfig,o=t.customConfig,a=o.labels,s=void 0===a?{}:a,l=o.getSuggests,c=void 0===l?function(){return{}}:l,u=o.filters,h=void 0===u?{}:u,d=(o.adapters,sP(sP({},n),s)),p=sP(sP({},i),h),f=r({context:e,suggestStyle:XM,rootPredicate:o.rootPredicate}),m=c({client:e.client,suggestStyle:XM}),g=sP(sP({},f),m),y=ow(d,e.client,e.localeSettings),v=Ik({filterWidgetConfig:p,labelMap:y,suggestConfigMap:g,context:e}),_=rP.a.apply(void 0,[o.includedFilters||Hk.included].concat(Nb()(o.excludedFilters||[]))),b=o.highlightedFilters||Hk.highlighted;return{labelMap:y,suggestConfigMap:f,filters:Xb()(eP()(v,_),(function(t){return!!t})),defaultVisibleFilters:b,rootPredicate:o.rootPredicate,predicateConfig:Kk,availableCatalogues:o.availableCatalogues,tableConfig:iP,defaultTableColumns:o.defaultTableColumns,more:o}}({labelConfig:jM,getSuggestConfig:JM,filterWidgetConfig:Vk,customConfig:n},{client:m,formatMessage:g.formatMessage,localeSettings:c})}),[m,g,c]);return kt(ea,{dir:a.dir},kt(hx.Provider,{value:y},kt(rx,{filter:d||{},onChange:p},kt(f,o()({config:y},i,{tabs:n.occurrenceSearchTabs})))))},cP=["siteConfig"];function uP(t){var e=Object(l.useContext)(wy).occurrenceSearch.route;return kt(yl,null,kt(hl,{path:e,render:function(e){var n;return kt(lP,o()({pageLayout:!0,config:null==t||null===(n=t.siteConfig)||void 0===n?void 0:n.occurrence},t,e))}}))}var hP=function(t){var e=t.siteConfig,n=s()(t,cP);return kt(Rb,{siteConfig:e},kt(uP,o()({},n,{siteConfig:e})))},dP=function(t){var e=t.children,n=t.total,r=t.loading,i=t.message,a=t.props,s=Object(l.useContext)(Zt),c=r||"number"!=typeof n;return kt("div",o()({css:Pt("color:",s.color500,";font-size:12px;margin:0 0 4px 4px;","")},a),c&&kt(Id,{style:{width:100}}),!c&&kt(ud,{id:i||"counts.nResults",values:{total:n}}),e)},pP={columns:[{trKey:"Not specified",value:{key:"key",labelHandle:"key"}}]},fP=function(t){var e=t.first,n=t.prev,r=t.next,i=t.size,o=t.from,a=t.results,s=t.total,c=t.loading,u=t.defaultTableConfig,h=void 0===u?pP:u,d=t.hideLock,p=Object(l.useContext)(hx),f=p.filters,m=p.tableConfig,g=void 0===m?h:m,y=p.labelMap,v=Object(l.useState)(!d),_=Nt()(v,2),b=_[0],x=(_[1],b),w=g.columns.map((function(t,e){var n,r=t.filterKey?null===(n=f[t.filterKey])||void 0===n?void 0:n.Popover:null;return kt(rp,{key:t.trKey,width:t.width},kt(Zl,{wrap:"nowrap"},kt($l,{grow:!1,style:{whiteSpace:"nowrap"}},kt(ud,{id:t.trKey})),r&&kt($l,null,kt(r,{modal:!0,placement:"auto"},kt(pr,{appearance:"text",style:{display:"flex"}},kt(Bn,null))))))}));return kt("div",{style:{flex:"1 1 100%",display:"flex",height:"100%",maxHeight:"100vh",flexDirection:"column"}},kt(dP,{loading:c,total:s}),kt(ap,{fixedColumn:x,first:e,prev:n,next:r,size:i,from:o,total:s,loading:c,style:{flex:"1 1 auto",height:100,display:"flex",flexDirection:"column"}},kt("thead",null,kt("tr",null,w)),kt(np,{rowCount:i,columnCount:7,loading:c},mP({tableConfig:g,labelMap:y,results:a}))))},mP=function(t){var e=t.tableConfig,n=t.labelMap,r=t.results;return(void 0===r?[]:r).map((function(t,r){var i=e.columns.map((function(e,r){var i=Tb()(t,e.value.key),o=i;if(i||!0!==e.value.hideFalsy){if(e.value.formatter)o=e.value.formatter(i,t);else if(e.value.labelHandle){var a=n[e.value.labelHandle];o=a?kt(a,{id:i}):i}}else o="";return kt(ip,{noWrap:e.noWrap,key:e.trKey,style:e.value.rightAlign?{textAlign:"right"}:{}},o)}));return kt("tr",{key:t.key||t.id||r},i)}))},gP=["graphQuery","resultKey","offsetName","defaultTableConfig"];function yP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function vP(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?yP(Object(n),!0).forEach((function(e){Ft()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yP(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var _P=function(t){var e,n,r,i,a,u,h=t.graphQuery,d=t.resultKey,p=(t.offsetName,t.defaultTableConfig),f=s()(t,gP),m=A_("from",l_),g=Nt()(m,2),y=g[0],v=void 0===y?0:y,_=g[1],b=Object(l.useContext)(jb),x=Object(l.useContext)(hx),w=x.rootPredicate,E=x.predicateConfig,C=zv(h,{lazyLoad:!0}),S=C.data,T=C.error,O=C.loading,I=C.load;Object(l.useEffect)((function(){var t=dx(b.filter,E),e=t.v1Filter,n=(t.error,vP(vP({},e),w));I({keepDataWhileLoading:!0,variables:vP(vP({},n),{},{limit:25,offset:v})})}),[b.filterHash,w,v]),iA((function(){_(void 0)}),[b.filterHash]);var A=Object(l.useCallback)((function(){_(Math.max(0,v+25))})),M=Object(l.useCallback)((function(){var t=Math.max(0,v-25);_(0!==t?t:void 0)})),k=Object(l.useCallback)((function(){_(void 0)}));if(T)return kt("div",null,"Failed to fetch data");var P=(null==S||null===(e=S[d])||void 0===e||null===(n=e.documents)||void 0===n?void 0:n.results)||(null==S||null===(r=S[d])||void 0===r?void 0:r.results),D=(null==S||null===(i=S[d])||void 0===i||null===(a=i.documents)||void 0===a?void 0:a.count)||(null==S||null===(u=S[d])||void 0===u?void 0:u.count);return kt(c.a.Fragment,null,kt(fP,o()({},f,{loading:O,results:P,next:A,prev:M,first:k,size:25,from:v,total:D,defaultTableConfig:p})))},bP={columns:[{trKey:"tableHeaders.title",value:{key:"name",formatter:function(t,e){return kt(Oy,{type:"collectionKey",discreet:!0,id:e.key},t)}},width:"wide"},{trKey:"filters.code.name",value:{filterKey:"code",key:"code",hideFalsy:!0}},{trKey:"filters.country.name",value:{filterKey:"country",key:"key",formatter:function(t,e){var n,r,i=(null===(n=e.address)||void 0===n?void 0:n.country)||(null===(r=e.mailingAddress)||void 0===r?void 0:r.country);return i?kt(ud,{id:"enums.countryCode.".concat(i)}):null},hideFalsy:!0}},{trKey:"filters.city.name",value:{filterKey:"city",key:"key",formatter:function(t,e){var n,r;return(null===(n=e.address)||void 0===n?void 0:n.city)||(null===(r=e.mailingAddress)||void 0===r?void 0:r.city)},hideFalsy:!0}},{trKey:"tableHeaders.occurrences",value:{key:"occurrenceCount",formatter:function(t,e){return kt(md,{value:t})},hideFalsy:!0,rightAlign:!0}},{trKey:"active",value:{key:"active",formatter:function(t,e){return t?"yes":"no"}}}]};var xP=function(){return Object(l.useContext)(wy),kt(_P,{graphQuery:"\nquery list($institution: [GUID], $code: String, $q: String, $offset: Int, $limit: Int, $country: Country, $fuzzyName: String, $city: String, $name: String, $active: Boolean){\n  collectionSearch(institution: $institution, code: $code, q: $q, limit: $limit, offset: $offset, country: $country, fuzzyName: $fuzzyName, city: $city, name: $name, active: $active) {\n    count\n    offset\n    limit\n    results {\n      key\n      name\n      code\n      active\n      occurrenceCount\n      address {\n        city\n        country\n      }\n      mailingAddress {\n        city\n        country\n      }\n    }\n  }\n}\n",resultKey:"collectionSearch",defaultTableConfig:bP})},wP=["q","institutionKey","city","country","code"].sort(),EP={filters:wP,included:wP,highlighted:["q","institutionKey","city","country","code"]},CP={fields:{country:{singleValue:!0},institutionKey:{defaultKey:"institution",singleValue:!0},q:{singleValue:!0},name:{singleValue:!0},fuzzyName:{singleValue:!0},city:{singleValue:!0},code:{singleValue:!0}}};wP.forEach((function(t){CP.fields[t]=CP.fields[t]||{}}));var SP=CP,TP=["className","config","Table","style"],OP=(Fl.TabList,Fl.Tab,Fl.TabPanel,ix((function(t){return{test:t.test}}))((function(t){var e=t.className,n=void 0===e?"":e,r=t.config,i=t.Table,o=t.style,a=(s()(t,TP),Object(l.useState)("list")),c=Nt()(a,2),u=c[0],h=c[1],d=Object(l.useContext)(Zt),p=d.prefix||"gbif";return kt("div",{className:"".concat(n," ").concat(p,"-").concat("searchLayout"),css:cx({theme:d}),style:o},kt(Fl,{activeId:u,onChange:h},kt("div",{css:ox({theme:d})},kt("div",{css:ux({theme:d})},kt(PM,{config:r}))),kt("div",{css:sx({theme:d})},kt(i,null))))}))),IP=["className","config","Table"],AP=(Fl.TabList,Fl.Tab,Fl.TabPanel,ix((function(t){return{test:t.test}}))((function(t){var e=t.className,n=void 0===e?"":e,r=t.config,i=t.Table,a=s()(t,IP),c=Object(l.useState)("list"),u=Nt()(c,2),h=u[0],d=u[1],p=Object(l.useContext)(Zt),f=p.prefix||"gbif";return kt("div",o()({className:"".concat(n," ").concat(f,"-").concat("searchLayout"),css:cx({theme:p})},a),kt(Fl,{activeId:h,onChange:d},kt("div",{css:ox({theme:p}),style:{margin:"0 0 10px 0",borderRadius:0}},kt(tv,{availableCatalogues:r.availableCatalogues,style:{borderBottom:"1px solid #ddd"}}),kt("div",{css:ux({theme:p})},kt(PM,{config:r}))),kt("div",{css:sx({theme:p})},kt(i,null))))})));function MP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function kP(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?MP(Object(n),!0).forEach((function(e){Ft()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MP(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var PP=["config","predicateConfig","defaultFilterConfig","Table","pageLayout"];var DP=function(t){var e=t.config,n=void 0===e?{}:e,r=t.predicateConfig,i=t.defaultFilterConfig,a=t.Table,c=t.pageLayout,u=s()(t,PP),h=Object(l.useContext)(Zt),d=Object(l.useContext)(Ey),p=Qk({predicateConfig:r}),f=Nt()(p,3),m=f[0],g=f[1],y=(f[2],Object(l.useContext)(jv)),v=id(),_=Object(l.useMemo)((function(){return function(t,e){var n=t.customConfig,r=t.predicateConfig,i=t.defaultFilterConfig,o=n.labels,a=void 0===o?{}:o,s=n.getSuggests,l=void 0===s?function(){return{}}:s,c=n.filters,u=void 0===c?{}:c,h=(n.adapters,kP(kP({},jM),a)),d=kP(kP({},Vk),u),p=JM({context:e,suggestStyle:XM}),f=l({client:e.client,suggestStyle:XM}),m=kP(kP({},p),f),g=ow(h,e.client,e.localeSettings),y=Ik({filterWidgetConfig:d,labelMap:g,suggestConfigMap:m,context:e}),v=rP.a.apply(void 0,[n.includedFilters||i.included].concat(Nb()(n.excludedFilters||[]))),_=n.highlightedFilters||i.highlighted,b=Qx()(_,v);return{labelMap:g,suggestConfigMap:p,filters:Xb()(eP()(y,v),(function(t){return!!t})),defaultVisibleFilters:b,rootPredicate:n.rootFilter,availableCatalogues:n.availableCatalogues,predicateConfig:r}}({customConfig:n,predicateConfig:r,defaultFilterConfig:i},{client:y,formatMessage:v.formatMessage,localeSettings:d})}),[y,v]),b=c?AP:OP;return kt(ea,{dir:h.dir},kt(hx.Provider,{value:_},kt(rx,{filter:m,onChange:g},kt(b,o()({config:_,Table:a},u)))))};function RP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function LP(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?RP(Object(n),!0).forEach((function(e){Ft()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RP(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var NP=function(t){return kt(DP,LP(LP({},t),{},{predicateConfig:SP,defaultFilterConfig:EP,Table:xP}))},jP=["siteConfig"];function FP(t){var e=Object(l.useContext)(wy).collectionSearch.route;return kt(yl,null,kt(hl,{path:e,render:function(e){var n;return kt(NP,o()({pageLayout:!0,config:null==t||null===(n=t.siteConfig)||void 0===n?void 0:n.collection},t,e))}}))}var zP=function(t){var e=t.siteConfig,n=s()(t,jP);return kt(Rb,{siteConfig:e},kt(FP,o()({},n,{siteConfig:e})))},BP={columns:[{trKey:"title",value:{key:"name",formatter:function(t,e){return kt(Oy,{type:"institutionKey",discreet:!0,id:e.key},t)}},width:"wide"},{trKey:"filters.code.name",value:{filterKey:"code",key:"code",hideFalsy:!0}},{trKey:"filters.country.name",value:{filterKey:"country",key:"key",formatter:function(t,e){var n,r,i=(null===(n=e.address)||void 0===n?void 0:n.country)||(null===(r=e.mailingAddress)||void 0===r?void 0:r.country);return i?kt(ud,{id:"enums.countryCode.".concat(i)}):null},hideFalsy:!0}},{trKey:"filters.city.name",value:{filterKey:"city",key:"key",formatter:function(t,e){var n,r;return(null===(n=e.address)||void 0===n?void 0:n.city)||(null===(r=e.mailingAddress)||void 0===r?void 0:r.city)},hideFalsy:!0}},{trKey:"tableHeaders.numberSpecimens",value:{key:"numberSpecimens",formatter:function(t,e){return kt(md,{value:t})},hideFalsy:!0,rightAlign:!0}},{trKey:"tableHeaders.gbifNumberSpecimens",value:{key:"occurrenceCount",formatter:function(t,e){return kt(md,{value:t})},hideFalsy:!0,rightAlign:!0}},{trKey:"active",value:{key:"active",formatter:function(t,e){return t?"yes":"no"}}}]};var UP=function(){return kt(_P,{graphQuery:"\nquery list($code: String, $q: String, $offset: Int, $limit: Int, $country: Country, $fuzzyName: String, $city: String, $name: String, $active: Boolean){\n  institutionSearch(code: $code, q: $q, limit: $limit, offset: $offset, country: $country, fuzzyName: $fuzzyName, city: $city, name: $name, active: $active) {\n    count\n    offset\n    limit\n    results {\n      key\n      name\n      code\n      active\n      occurrenceCount\n      numberSpecimens\n      address {\n        city\n        country\n      }\n      mailingAddress {\n        city\n        country\n      }\n    }\n  }\n}\n",resultKey:"institutionSearch",defaultTableConfig:BP})},GP=["q","code","city","country","name"].sort(),VP={filters:GP,included:GP,highlighted:["q","code","city","country"]},qP={fields:{country:{singleValue:!0},q:{singleValue:!0},name:{singleValue:!0},fuzzyName:{singleValue:!0},city:{singleValue:!0},code:{singleValue:!0}}};GP.forEach((function(t){qP.fields[t]=qP.fields[t]||{}}));var HP=qP;function WP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ZP(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?WP(Object(n),!0).forEach((function(e){Ft()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WP(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var $P=function(t){return kt(DP,ZP(ZP({},t),{},{predicateConfig:HP,defaultFilterConfig:VP,Table:UP}))},KP=["siteConfig"];function YP(t){var e=Object(l.useContext)(wy).institutionSearch.route;return kt(yl,null,kt(hl,{path:e,render:function(e){var n;return kt($P,o()({pageLayout:!0,config:null==t||null===(n=t.siteConfig)||void 0===n?void 0:n.institution},t,e))}}))}var XP=function(t){var e=t.siteConfig,n=s()(t,KP);return kt(Rb,{siteConfig:e},kt(YP,o()({},n,{siteConfig:e})))};var JP={columns:[{trKey:"tableHeaders.titleAndAbstract",value:{key:"title",formatter:function(t,e){var n,r=(null===(n=e.abstract)||void 0===n?void 0:n.length)>200?"".concat(e.abstract.substr(0,200),"..."):e.abstract,i=function(t){var e,n;return null!=t&&null!==(e=t.identifiers)&&void 0!==e&&e.doi?"https://doi.org/".concat(t.identifiers.doi):null==t||null===(n=t.websites)||void 0===n?void 0:n[0]}(e);return kt("div",null,kt("div",null,i?kt("a",{href:i,style:{color:"inherit",textDecoration:"none"}},t," ",kt(Un,null)):t),kt("div",{style:{color:"#aaa"}},r))}},width:"wide"},{trKey:"filters.literatureType.name",value:{key:"literatureType",labelHandle:"literatureType",hideFalsy:!0}},{trKey:"filters.year.name",value:{filterKey:"year",key:"year",hideFalsy:!0}}]};var QP=function(){return kt(_P,{graphQuery:"\nquery list($predicate: Predicate, $publisher:[String], $source: [String], $doi: [String], $gbifDownloadKey: [ID], $openAccess: Boolean, $peerReview: Boolean, $publishingOrganizationKey: [ID], $topics: [String], $relevance: [String], $year: [String], $literatureType: [String], $countriesOfCoverage: [Country], $countriesOfResearcher: [Country], $gbifDatasetKey: [ID], $q: String, $offset: Int, $limit: Int, ){\n  literatureSearch(predicate:$predicate, \n    gbifDatasetKey: $gbifDatasetKey, \n    q: $q, \n    countriesOfResearcher: $countriesOfResearcher, \n    countriesOfCoverage: $countriesOfCoverage, \n    literatureType: $literatureType, \n    year: $year, \n    relevance: $relevance, \n    topics: $topics, \n    publishingOrganizationKey: $publishingOrganizationKey, \n    peerReview: $peerReview, \n    openAccess: $openAccess, \n    gbifDownloadKey: $gbifDownloadKey, \n    doi: $doi, \n    source: $source, \n    publisher: $publisher\n    limit: $limit, \n    offset: $offset\n    ) {\n    documents {\n      count\n      offset\n      limit\n      results {\n        title\n        abstract\n        authors {\n          firstName\n          lastName\n        }\n        literatureType\n        year\n        identifiers {\n          doi\n        }\n        websites\n      }\n    }\n  }\n}\n",resultKey:"literatureSearch",defaultTableConfig:JP})},tD=["q","year","countriesOfResearcher","countriesOfCoverage","datasetKey","publisherKey","literatureType"].sort(),eD={filters:tD,included:tD,highlighted:["q","year","countriesOfResearcher","datasetKey"]},nD={fields:{countriesOfResearcher:{defaultKey:"countriesOfResearcher"},countriesOfCoverage:{defaultKey:"countriesOfCoverage"},datasetKey:{defaultKey:"gbifDatasetKey"},publisherKey:{defaultKey:"publishingOrganizationKey"},year:{v1:{supportedTypes:["range","equals"]}},q:{singleValue:!0}}};tD.forEach((function(t){nD.fields[t]=nD.fields[t]||{}}));var rD=nD;function iD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function oD(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?iD(Object(n),!0).forEach((function(e){Ft()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iD(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var aD=function(t){return kt(DP,oD(oD({},t),{},{predicateConfig:rD,defaultFilterConfig:eD,Table:QP}))},sD=["siteConfig"];function lD(t){var e=Object(l.useContext)(wy).literatureSearch.route;return kt(yl,null,kt(hl,{path:e,render:function(e){var n;return kt(aD,o()({pageLayout:!0,config:null==t||null===(n=t.siteConfig)||void 0===n?void 0:n.literature},t,e))}}))}var cD=function(t){var e=t.siteConfig,n=s()(t,sD);return kt(Rb,{siteConfig:e},kt(lD,o()({},n,{siteConfig:e})))},uD={columns:[{trKey:"tableHeaders.title",value:{key:"title",formatter:function(t,e){return kt(Ay,{discreet:!0,id:e.key},t)}},width:"wide"},{trKey:"filters.publisherKey.name",filterKey:"publisherKey",value:{key:"publishingOrganizationKey",formatter:function(t,e){return e.publishingOrganizationTitle}},width:"wide"},{trKey:"filters.datasetType.name",filterKey:"datasetType",value:{key:"type",labelHandle:"datasetType"}},{trKey:"tableHeaders.citations",value:{key:"literatureCount",formatter:function(t,e){return kt(md,{value:t})},hideFalsy:!0,rightAlign:!0}},{trKey:"tableHeaders.occurrences",value:{key:"occurrenceCount",formatter:function(t,e){return kt(md,{value:t})},hideFalsy:!0,rightAlign:!0}}]};var hD=function(){return Object(l.useContext)(wy),kt(_P,{graphQuery:"\nquery list($endorsingNodeKey: [ID], $networkKey: [ID], $publishingOrg: [ID], $hostingOrg: [ID], $publishingCountry: [Country], $q: String, $offset: Int, $limit: Int, $type: [DatasetType], $subtype: [DatasetSubtype]){\n  datasetSearch(endorsingNodeKey:$endorsingNodeKey, networkKey:$networkKey, publishingOrg:$publishingOrg, hostingOrg: $hostingOrg, publishingCountry: $publishingCountry, q: $q, limit: $limit, offset: $offset, type: $type, subtype: $subtype) {\n    count\n    offset\n    limit\n    results {\n      key\n      title\n      publishingOrganizationTitle\n      publishingOrganizationKey\n      type\n      subtype\n      recordCount\n      occurrenceCount\n      literatureCount\n    }\n  }\n}\n",resultKey:"datasetSearch",defaultTableConfig:uD})},dD=["q","datasetType","license","publisherKey","hostingOrganizationKey","publishingCountryCode","hostingCountry","networkKey"].sort(),pD={filters:dD,included:["q","datasetType","license","publisherKey","hostingOrganizationKey","publishingCountryCode","hostingCountry"],highlighted:["q","datasetType","publisherKey","license"]},fD={fields:{publisherKey:{defaultKey:"publishingOrg"},hostingOrganizationKey:{defaultKey:"hostingOrg"},publishingCountryCode:{defaultKey:"publishingCountry"},q:{singleValue:!0},datasetType:{defaultKey:"type"},datasetSubtype:{defaultKey:"subtype"}}};dD.forEach((function(t){fD.fields[t]=fD.fields[t]||{}}));var mD=fD;function gD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function yD(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?gD(Object(n),!0).forEach((function(e){Ft()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gD(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var vD=function(t){return kt(DP,yD(yD({},t),{},{predicateConfig:mD,defaultFilterConfig:pD,Table:hD}))},_D=["siteConfig"];function bD(t){var e=Object(l.useContext)(wy).datasetSearch.route;return kt(yl,null,kt(hl,{path:e,render:function(e){var n;return kt(vD,o()({pageLayout:!0,config:null==t||null===(n=t.siteConfig)||void 0===n?void 0:n.dataset},t,e))}}))}var xD=function(t){var e=t.siteConfig,n=s()(t,_D);return kt(Rb,{siteConfig:e},kt(bD,o()({},n,{siteConfig:e})))},wD=["presentationComponent","presentationProps","graphQuery","resultKey","offsetName","defaultTableConfig"];function ED(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function CD(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ED(Object(n),!0).forEach((function(e){Ft()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ED(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var SD=function(t){var e,n=t.presentationComponent,r=void 0===n?fP:n,i=(t.presentationProps,t.graphQuery),a=t.resultKey,u=(t.offsetName,t.defaultTableConfig),h=s()(t,wD),d=A_("from",l_),p=Nt()(d,2),f=p[0],m=void 0===f?0:f,g=p[1],y=Object(l.useContext)(jb),v=Object(l.useContext)(hx),_=v.rootPredicate,b=v.predicateConfig,x=zv(i,{lazyLoad:!0}),w=x.data,E=(x.error,x.loading),C=x.load;Object(l.useEffect)((function(){var t=dx(y.filter,b),e=t.v1Filter,n=(t.error,CD(CD({},e),_));C({keepDataWhileLoading:!0,variables:CD(CD({},n),{},{limit:20,offset:m})})}),[y.filterHash,_,m]),iA((function(){g(void 0)}),[y.filterHash]);var S=Object(l.useCallback)((function(){g(Math.max(0,m+20))})),T=Object(l.useCallback)((function(){var t=Math.max(0,m-20);g(0!==t?t:void 0)})),O=Object(l.useCallback)((function(){g(void 0)}));return kt(c.a.Fragment,null,kt(r,o()({},h,{loading:E,results:null==w?void 0:w[a].results,next:S,prev:T,first:O,size:20,from:m,total:null==w||null===(e=w[a])||void 0===e?void 0:e.count,defaultTableConfig:u})))},TD={columns:[{trKey:"filters.publisherKey.name",value:{key:"title",formatter:function(t,e){return kt(Iy,{discreet:!0,id:e.key},t)}},width:"wide",filterKey:"q"},{trKey:"filters.publishingCountryCode.name",value:{key:"country",labelHandle:"countryCode",hideFalsy:!0},filterKey:"country"},{trKey:"tableHeaders.pubDatasets",value:{key:"numPublishedDatasets",formatter:function(t,e){return kt(md,{value:t})},hideFalsy:!0,rightAlign:!0}},{trKey:"tableHeaders.hostedDatasets",value:{key:"hostedDataset.count",formatter:function(t,e){return kt(md,{value:t})},hideFalsy:!0,rightAlign:!0}},{trKey:"tableHeaders.registered",value:{key:"created",formatter:function(t,e){return kt(fd,{value:t,year:"numeric",month:"long",day:"2-digit"})},hideFalsy:!0},noWrap:!0}]};var OD=function(){return Object(l.useContext)(wy),kt(SD,{presentationComponent:fP,graphQuery:"\nquery list($networkKey: ID, $country: Country, $q: String, $offset: Int, $limit: Int){\n  organizationSearch(networkKey: $networkKey, isEndorsed: true, q: $q, limit: $limit, offset: $offset, country: $country) {\n    count\n    offset\n    limit\n    results {\n      key\n      title\n      country\n      numPublishedDatasets\n      hostedDataset {\n        count\n      }\n      created\n    }\n  }\n}\n",resultKey:"organizationSearch",defaultTableConfig:TD,hideLock:!0})},ID=["q","countrySingle","networkKey"].sort(),AD=["q","countrySingle"],MD={filters:ID,included:AD,highlighted:AD},kD={fields:{countrySingle:{singleValue:!0,defaultKey:"country"},q:{singleValue:!0},networkKey:{singleValue:!0}}};ID.forEach((function(t){kD.fields[t]=kD.fields[t]||{}}));var PD=kD;function DD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function RD(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?DD(Object(n),!0).forEach((function(e){Ft()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DD(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var LD=function(t){return kt(DP,RD(RD({},t),{},{predicateConfig:PD,defaultFilterConfig:MD,Table:OD}))},ND=["siteConfig"];function jD(t){var e=Object(l.useContext)(wy).publisherSearch.route;return kt(yl,null,kt(hl,{path:e,render:function(e){var n;return kt(LD,o()({pageLayout:!0,config:null==t||null===(n=t.siteConfig)||void 0===n?void 0:n.publisher},t,e))}}))}var FD=function(t){var e=t.siteConfig,n=s()(t,ND);return kt(Rb,{siteConfig:e},kt(jD,o()({},n,{siteConfig:e})))};var zD={name:"1cy8rru",styles:"background:white;padding:24px"},BD=function(t){o()({},t);return zD},UD=["data","loading","error","collection","className"],GD=uf.Term,VD=uf.Value;function qD(t){var e=t.data,n=void 0===e?{}:e,r=(t.loading,t.error,t.collection),i=(t.className,s()(t,UD),Object(l.useContext)(Zt)),o=Object(l.useContext)(wy);n.occurrence;return kt(c.a.Fragment,null,kt("div",{css:BD({theme:i}),style:{marginTop:24,marginBottom:24}},kt(uf,{style:{fontSize:14,marginBottom:12},horizontal:!0},HD(r,"name"),HD(r,"description"),HD(r,"code"),HD(r,"homePage"),HD(r,"active"),HD(r,"personalCollection"),HD(r,"catalogUrl"),HD(r,"accessionStatus"),HD(r,"institutionName"),HD(r,"institutionCode"),r.institution&&kt(c.a.Fragment,null,kt(GD,null,kt("span",{style:{paddingRight:8}},"Institution")),kt(VD,null,kt("a",{href:o.institutionKey.url({key:r.institution.key})},r.institution.name))),HD(r,"notes")),kt(Kp,{summary:"Content",defaultOpen:!0,style:{marginBottom:24}},kt(uf,{style:{fontSize:14,marginBottom:12},horizontal:!0},HD(r,"contentTypes"),HD(r,"preservationTypes"),HD(r,"taxonomicCoverage"),HD(r,"geography"),WD(r,"incorporatedCollections"),WD(r,"importantCollectors"))),kt(Kp,{summary:"Contact",defaultOpen:!0,style:{marginBottom:24}},kt(uf,{style:{fontSize:14,marginBottom:12},horizontal:!0},HD(r.address,"address"),HD(r.address,"country"),HD(r.address,"postalCode")))))}function HD(t,e){return kt(c.a.Fragment,null,kt(GD,null,kt("span",{style:{paddingRight:8}},e)),kt(VD,null,null!=t&&t[e]?t[e]:kt("span",{style:{color:"#aaa"}},"Not provided")))}function WD(t,e){return kt(c.a.Fragment,null,kt(GD,null,kt("span",{style:{paddingRight:8}},e)),t[e]&&t[e].length>0&&kt("div",null,t[e].map((function(t){return kt(VD,null,t)}))),!t[e]||0===t[e].length&&kt(VD,null,kt("span",{style:{color:"#aaa"}},"Not provided")))}var ZD=["theme"];var $D={name:"104q5j8",styles:"display:flex;margin:0 12px"},KD=function(t){o()({},t);return $D},YD={name:"kv5zkl",styles:"padding:8px 12px;line-height:1em;display:block;color:inherit;text-decoration:none;&.isActive{background:#e0e7ee;font-weight:500;}"},XD=function(t){o()({},t);return YD},JD={name:"8vuc0z",styles:"display:flex;margin-bottom:24px;margin-left:0;width:100%;input{margin-right:12px;height:auto;}"},QD=function(t){o()({},t);return JD},tR={name:"yjzycu",styles:"flex:0 0 280px;padding:24px 12px;margin:0;font-size:14px;ul{list-style:none;padding:0;margin:0;}"},eR=function(t){o()({},t);return tR},nR={name:"1gyac2f",styles:"background:#65808a;color:white;padding:12px 24px;border-radius:4px;margin-bottom:12px"},rR=function(t){o()({},t);return nR},iR={name:"10h7o7i",styles:"flex:1 1 100%"},oR=function(t){o()({},t);return iR},aR={name:"1fsgsda",styles:"margin-bottom:18px;font-size:85%;color:#888"},sR=function(t){o()({},t);return aR},lR=function(t){var e=t.theme;s()(t,ZD);return Pt("flex:1 1 auto;margin:12px;a{color:",e.primary500,";text-decoration:none;}h4{margin:0;font-weight:bold;}","")},cR={name:"1ssixu",styles:"flex:0 0 220px;display:flex;font-size:14px;text-align:right;flex-direction:column;>div{flex:1 1 auto;}background:#f8f8f8;padding:12px"},uR=function(t){o()({},t);return cR},hR={name:"kdj9w5",styles:"background:white;margin-bottom:12px;display:flex;flex-wrap:nowrap;border:1px solid #eee"},dR=function(t){o()({},t);return hR},pR=["noData"];var fR=function(t){var e=t.noData;s()(t,pR);return Pt("color:",e?"#888":null,";","")},mR={name:"13h0mpt",styles:"background:#88888847;color:#00000085;padding:2px 5px;font-size:10px;border-radius:4px;margin:0 4px;font-weight:bold"},gR=function(t){o()({},t);return mR},yR={name:"6kfe4y",styles:"background:white;padding:1rem 1rem 0 1rem;h1{margin-top:0;margin-bottom:.25em;font-size:2rem;font-weight:700;}a{color:#1393D8;}"},vR=function(t){o()({},t);return yR},_R={name:"66mye2",styles:"margin-top:2.5rem;margin-bottom:1.5rem;>div{margin-bottom:8px;}"},bR=function(t){o()({},t);return _R},xR={name:"iswyxu",styles:"margin:0 auto;width:1000px;max-width:100%"},wR=function(t){o()({},t);return xR},ER=function(t){var e=t.size,n=t.search,r=t.loadMore,i=t.loading,o=t.data,a=(t.error,Object(l.useContext)(wy)),s=_l(),u=a.collectionSpecimens.url({key:"42844cb6-421e-4bcf-bdeb-c56039bee08c"});console.log(u);var h=Object(l.useState)(""),d=Nt()(h,2),p=d[0],f=d[1],m=Object(l.useContext)(Zt);if(i&&!o)return kt("div",null,"loading");var g=o.occurrenceSearch.facet.recordedBy.map((function(t){return{key:t.key,name:t.key,collected:t.count,identified:t.occurrencesIdentifiedBy.documents.total}})),y=p.length>0&&0===g.length&&!i,v=[kt(rp,{key:"name"},kt(Sd,{title:kt("div",null,"Strings as they appear in dwcA 'recordedBy'.")},kt("div",null,"Collected by ",kt(An,null)))),kt(rp,{key:"collected",style:{textAlign:"right"}},"Records collected"),kt(rp,{key:"identifed",style:{textAlign:"right"}},"Records identified")];return kt(c.a.Fragment,null,kt("div",{style:{flex:"1 1 100%"}},kt("div",null,kt("div",{css:rR({theme:m})},kt(An,null))),kt("div",{css:rR({theme:m})},'These are the strings as they appear on the digitized records in the field "recordedBy". That means that one row can represent multiple people and that the same person can appear under multiple spellings. The names are ordered by number of records collected.'),kt("div",{css:QD},kt(Fr,{value:p,onChange:function(t){return f(t.target.value)}}),kt(pr,{onClick:function(t){return n(p)}},"Search")),y&&kt("div",null,"No results for '",p,"'"),!y&&kt(c.a.Fragment,null,kt(ap,{loading:i},kt("thead",null,kt("tr",null,v)),kt(np,{rowCount:10,columnCount:7,loading:i},CR({items:g,columns:["name","collected","identified"],url:u,history:s}))),(i||e===g.length)&&kt(pr,{loading:i,style:{marginTop:12},onClick:r},"Load more"))))},CR=function(t){var e=t.items,n=t.history;return e.map((function(t,e){var r=encodeURIComponent(btoa(JSON.stringify({must:{recordedBy:[t.name]}}))),i=[kt(ip,{key:"name"},t.name),kt(ip,{key:"collected",style:{textAlign:"right"}},kt("a",{onClick:function(){return n.push("../../specimens?filter=".concat(r))}},kt(md,{value:t.collected}))),kt(ip,{key:"identified",style:{textAlign:"right"}},kt(md,{value:t.identified}))];return kt("tr",{key:t.key},i)}))},SR=["id","defaultTab"];function TR(t){var e=t.id,n=(t.defaultTab,s()(t,SR),zv(OR,{lazyLoad:!0})),r=n.data,i=n.error,o=n.loading,a=n.load,c=Object(l.useState)(10),u=Nt()(c,2),h=u[0],d=u[1],p=Object(l.useState)(),f=Nt()(p,2),m=f[0],g=f[1];Object(l.useEffect)((function(){if(void 0!==e){var t=[{type:"equals",key:"collectionKey",value:e}];m&&""!==m&&t.push({type:"like",key:"recordedBy",value:"*".concat(m,"*")}),a({keepDataWhileLoading:!0,variables:{key:e,size:h,predicate:{type:"and",predicates:t}}})}}),[e,h,m]);var y=Object(l.useCallback)((function(){d(h+50)}),[h]),v=Object(l.useCallback)((function(t){d(10),g(t)}),[]);return kt(ER,{loadMore:y,size:h,search:v,data:r,error:i,loading:o||!r,id:e})}var OR="\nquery collectors($predicate: Predicate, $size: Int){\n  occurrenceSearch(predicate: $predicate) {\n    facet {\n      recordedBy(size: $size) {\n        key\n        count\n        occurrencesIdentifiedBy {\n          documents {\n            total\n          }\n        }\n      }\n    }\n  }\n}\n",IR=n(163),AR=n.n(IR),MR=["collection","recordedByCardinality","className"];function kR(t){var e,n,r=t.collection,i=t.recordedByCardinality,o=(t.className,s()(t,MR),xl()),a=o.url,c=o.path,u=Object(l.useContext)(Zt);return kt("div",{css:KD({theme:u})},kt("nav",{css:eR({theme:u})},kt("ul",null,kt("li",null,kt(kl,{to:a,exact:!0,activeClassName:"isActive",css:XD({theme:u})},"Staff",kt("span",{css:gR()},null===(e=r.contacts)||void 0===e?void 0:e.length))),kt("li",null,kt(kl,{to:bn(a,"/agents"),activeClassName:"isActive",css:XD({theme:u})},"Collectors and identifiers",kt("span",{css:gR()},i))))),kt("div",{style:{width:"100%",margin:24}},kt(yl,null,kt(hl,{path:bn(c,"/agents")},kt(TR,{id:r.key})),kt(hl,{path:c},0===(null==r||null===(n=r.contacts)||void 0===n?void 0:n.length)&&kt("div",null,"There is no staff associated with this record. You can change that. ",kt("a",{herf:""},"Learn more")),kt("div",{css:oR({theme:u})},AR()(r.contacts,"position").map((function(t){return kt("article",{css:dR({theme:u})},kt("div",{css:lR({theme:u})},kt("a",{href:"staff/".concat(t.key)},kt("h4",null,t.firstName," ",t.lastName)),kt("div",{css:sR({theme:u})},t.position),t.researchPursuits&&kt("div",null,"Research pursuits: ",t.researchPursuits)),kt("div",{css:uR({theme:u})},kt("div",null,t.email&&kt("div",null,t.email),t.phone&&kt("div",null,t.phone),t.fax&&kt("div",null,t.fax))))})))))))}var PR=["id","data","error","loading"],DR=Fl.TabList,RR=Fl.RouterTab;function LR(t){var e,n,r,i=t.id,o=t.data,a=t.error,u=t.loading,h=(s()(t,PR),xl()),d=h.url,p=h.path,f=Object(l.useContext)(Zt);if(u)return kt("div",null,"loading");var m=o.collection,g=o.occurrenceSearch,y=null==g||null===(e=g.cardinality)||void 0===e?void 0:e.recordedBy;if(a||!m)return kt("div",null,"Failed to retrieve item");var v={rootPredicate:{type:"equals",value:i,key:"collectionKey"},excludedFilters:["collectionCode","collectionKey","institutionKey","institutionCode","hostingOrganizationKey","protocol","publishingCountryCode"],occurrenceSearchTabs:["TABLE","GALLERY","MAP"],highlightedFilters:["taxonKey","verbatimScientificName","catalogNumber","recordedBy","identifiedBy","typeStatus"]},_=!(null!=m&&null!==(n=m.contacts)&&void 0!==n&&n.length||y);return kt(c.a.Fragment,null,kt(tv,{style:{borderBottom:"1px solid #ddd",background:"white"},left:kt(Ty,{type:"collectionSearch",discreet:!0,style:{display:"flex",alignItems:"center"}},kt(Jn,null)," ",kt(ud,{id:"catalogues.collections"}))}),kt("div",{css:vR({theme:f})},kt("div",{css:wR({theme:f})},kt(Mg,{prefix:"Collection code",suffix:m.code}),kt("h1",null,m.name),m.institution&&kt("div",null,"From ",kt("a",{href:"/institution/".concat(m.institution.key)},m.institution.name)),kt("div",{css:bR},g.documents.total>0&&kt("div",{css:Nf({theme:f})},kt(zn,null),kt("span",null,kt(md,{value:g.documents.total})," digitized specimens")),m.taxonomicCoverage&&kt("div",{css:Nf({theme:f})},kt(sr,null),kt("span",null,m.taxonomicCoverage)),m.contacts.length>0&&kt("div",{css:Nf({theme:f})},kt(ar,null),m.contacts.length<5&&kt("span",null,m.contacts.map((function(t){return"".concat(t.firstName?t.firstName:""," ").concat(t.lastName?t.lastName:"")})).join(" • ")),m.contacts.length>=5&&kt("span",null,m.contacts.length," staff members"))),kt(DR,{style:{marginTop:"12px",borderTop:"1px solid #ddd"}},kt(RR,{to:d,exact:!0,label:"About"}),kt(RR,{to:bn(d,"people"),css:fR({theme:f,noData:_}),label:"People"}),kt(RR,{to:bn(d,"specimens"),css:fR({theme:f,noData:0===(null==g||null===(r=g.documents)||void 0===r?void 0:r.total)}),label:"Digitized specimens"})))),kt("section",null,kt(yl,null,kt(hl,{path:bn(p,"people")},kt("div",{css:wR({theme:f})},kt(kR,{collection:m,recordedByCardinality:y}))),kt(hl,{path:bn(p,"specimens")},kt(lP,{config:v,style:{margin:"auto",maxWidth:1e3,minHeight:"calc(90vh)"}}),";"),kt(hl,{path:p},kt("div",{css:wR({theme:f})},kt(qD,{collection:m}))))))}function NR(t){var e,n=t.children;try{xl();e=!0}catch(t){console.log("No router context found, so creating a MemoryRouter for the component"),e=!1}return e?kt(c.a.Fragment,null,n):kt(sl,{initialEntries:["/"]},n)}var jR=["id"];function FR(t){var e=t.id,n=(s()(t,jR),zv(zR,{lazyLoad:!0})),r=n.data,i=n.error,o=n.loading,a=n.load;Object(l.useContext)(Zt);return Object(l.useEffect)((function(){void 0!==e&&a({variables:{key:e,predicate:{type:"equals",key:"collectionKey",value:e}}})}),[e]),kt(NR,null,kt(LR,{data:r,error:i,loading:o||!r,id:e}))}var zR="\nquery collection($key: String!, $predicate: Predicate){\n  occurrenceSearch(predicate: $predicate) {\n    documents(size: 0) {\n      total\n    }\n    cardinality {\n      recordedBy\n    }\n  }\n  collection(key: $key) {\n    key\n    code\n    name\n    description\n    contentTypes\n    active\n    personalCollection\n    email\n    phone\n    homepage\n    catalogUrl\n    preservationTypes\n    accessionStatus\n    institutionKey\n    notes\n    identifiers {\n      key\n      type\n      identifier\n    }\n    contacts {\n      key\n      firstName\n      lastName\n      position\n      areaResponsibility\n      researchPursuits\n      phone\n      email\n      fax\n    }\n    numberSpecimens\n    taxonomicCoverage\n    geography\n    incorporatedCollections\n    importantCollectors\n    collectionSummary\n    alternativeCodes {\n      code\n      description\n    }\n    # occurrenceMappings\n    institution {\n      code\n      name\n      key\n    }\n    \n    mailingAddress {\n      address\n      city\n      province\n      postalCode\n      country\n    }\n    address {\n      address\n      city\n      province\n      postalCode\n      country\n    }\n  }\n}\n";var BR=function(t){var e=Object(l.useContext)(wy).collectionKey.route;return kt(Rb,t,kt(yl,null,kt(hl,{path:e,render:function(e){return kt(FR,o()({id:e.match.params.key},t,e))}})))};var UR={name:"1cy8rru",styles:"background:white;padding:24px"},GR=function(t){o()({},t);return UR},VR=["data","loading","error","institution","className"],qR=uf.Term,HR=uf.Value;function WR(t){t.data,t.loading,t.error;var e=t.institution,n=(t.className,s()(t,VR),Object(l.useContext)(Zt));return console.log(e),kt(c.a.Fragment,null,kt("div",{css:GR({theme:n}),style:{marginTop:24,marginBottom:24}},kt(uf,{style:{fontSize:14,marginBottom:12},horizontal:!0},ZR(e,"name"),ZR(e,"description"),ZR(e,"code"),ZR(e,"alternativeCodes"),ZR(e,"type"),ZR(e,"active"),ZR(e,"homepage"),ZR(e,"phone"),ZR(e,"email"),ZR(e,"catalogUrl"),ZR(e,"apiUrl"),ZR(e,"institutionalGovernance"),ZR(e,"disciplines"),ZR(e,"latitude"),ZR(e,"longitude"),ZR(e,"additionalNames"),ZR(e,"foundingDate"),ZR(e,"geographicDescription"),ZR(e,"taxonomicDescription"),ZR(e,"numberSpecimens"),ZR(e,"herbariumRecord"),ZR(e,"logoUrl")),kt(Kp,{summary:"Content",defaultOpen:!0,style:{marginBottom:24}},kt(uf,{style:{fontSize:14,marginBottom:12},horizontal:!0},ZR(e,"contentTypes"),ZR(e,"preservationTypes"),ZR(e,"taxonomicCoverage"),ZR(e,"geography"),$R(e,"incorporatedCollections"),$R(e,"importantCollectors"))),kt(Kp,{summary:"Contact",defaultOpen:!0,style:{marginBottom:24}},kt(uf,{style:{fontSize:14,marginBottom:12},horizontal:!0},ZR(e.address,"address"),ZR(e.address,"country"),ZR(e.address,"postalCode")))))}function ZR(t,e){return kt(c.a.Fragment,null,kt(qR,null,kt("span",{style:{paddingRight:8}},e)),kt(HR,null,void 0!==(null==t?void 0:t[e])&&"null"!=typeof(null==t?void 0:t[e])?t[e]:kt("span",{style:{color:"#aaa"}},"Not provided")))}function $R(t,e){return kt(c.a.Fragment,null,kt(qR,null,kt("span",{style:{paddingRight:8}},e)),t[e]&&t[e].length>0&&kt("div",null,t[e].map((function(t){return kt(HR,null,t)}))),!t[e]||0===t[e].length&&kt(HR,null,kt("span",{style:{color:"#aaa"}},"Not provided")))}var KR={name:"104q5j8",styles:"display:flex;margin:0 12px"},YR=function(t){o()({},t);return KR},XR={name:"10h7o7i",styles:"flex:1 1 100%"},JR=function(t){o()({},t);return XR},QR={name:"1fsgsda",styles:"margin-bottom:18px;font-size:85%;color:#888"},tL=function(t){o()({},t);return QR},eL={name:"1vvtxux",styles:"flex:1 1 auto;margin:12px;h4{margin:0;}"},nL=function(t){o()({},t);return eL},rL={name:"1pvn578",styles:"flex:0 0 220px;display:flex;text-align:center;flex-direction:column;>div{flex:1 1 auto;}background:#eee;padding:12px"},iL=function(t){o()({},t);return rL},oL={name:"172dxbw",styles:"margin:12px;flex:0 0 auto"},aL=function(t){o()({},t);return oL},sL={name:"n2p14l",styles:"background:white;margin:12px;display:flex;flex-wrap:nowrap;border:1px solid #eee"},lL=function(t){o()({},t);return sL},cL=["institution","className"];function uL(t){var e=t.institution,n=(t.className,s()(t,cL),xl().path,Object(l.useContext)(Zt));return kt("div",{css:YR({theme:n})},kt("div",{style:{width:"100%",marginBottom:24}},kt("div",{css:JR({theme:n})},AR()(e.contacts,"position").map((function(t){return kt("article",{css:lL({theme:n})},kt("div",{css:aL({theme:n})},kt(Dg,{seed:t.email||t.key})),kt("div",{css:nL({theme:n})},kt("h4",null,t.firstName," ",t.lastName),kt("div",{css:tL({theme:n})},t.position),t.researchPursuits&&kt("div",null,"Research pursuits: ",t.researchPursuits)),kt("div",{css:iL({theme:n})},kt("div",null,t.email&&kt("div",null,t.email),t.phone&&kt("div",null,t.phone),t.fax&&kt("div",null,t.fax)),kt(pr,{as:"a",href:"/staff/123"},"See profile")))})))))}var hL={name:"6kfe4y",styles:"background:white;padding:1rem 1rem 0 1rem;h1{margin-top:0;margin-bottom:.25em;font-size:2rem;font-weight:700;}a{color:#1393D8;}"},dL=function(t){o()({},t);return hL},pL={name:"66mye2",styles:"margin-top:2.5rem;margin-bottom:1.5rem;>div{margin-bottom:8px;}"},fL=function(t){o()({},t);return pL},mL={name:"iswyxu",styles:"margin:0 auto;width:1000px;max-width:100%"},gL=function(t){o()({},t);return mL},yL=["id","data","error","loading"],vL=Fl.TabList,_L=Fl.RouterTab;function bL(t){var e=t.id,n=t.data,r=t.error,i=t.loading,o=(s()(t,yL),xl()),a=o.path,u=o.url,h=Object(l.useContext)(Zt);if(i)return kt("div",null,"loading");var d=n.institution,p=n.occurrenceSearch;if(r||!d)return kt("div",null,"Failed to retrieve item");var f={rootPredicate:{type:"equals",value:e,key:"institutionKey"},excludedFilters:["institutionCode","institutionKey","institutionKey","institutionCode","hostingOrganizationKey","protocol","publishingCountryCode"],occurrenceSearchTabs:["TABLE","GALLERY","MAP"],highlightedFilters:["taxonKey","catalogNumber","recordedBy","identifiedBy","typeStatus"]};return kt(c.a.Fragment,null,kt("div",{css:dL({theme:h})},kt("div",{css:gL({theme:h})},kt(Mg,{prefix:"Institution code",suffix:d.code}),kt("h1",null,d.name),kt("div",{css:fL},kt("div",{css:Nf({theme:h})},kt(zn,null),kt("span",null,kt(md,{value:p.documents.total})," specimens")),d.contacts.length>0&&kt("div",{css:Nf({theme:h})},kt(ar,null),d.contacts.length<5&&kt("span",null,d.contacts.map((function(t){return"".concat(t.firstName?t.firstName:""," ").concat(t.lastName?t.lastName:"")})).join(" • ")),d.contacts.length>=5&&kt("span",null,d.contacts.length," staff members"))),kt(vL,{style:{marginTop:"12px",borderTop:"1px solid #ddd"}},kt(_L,{to:u,exact:!0,label:"About"}),kt(_L,{to:bn(u,"/people"),label:"People"}),kt(_L,{to:bn(u,"/specimens"),label:"Digitized specimens"})))),kt("section",null,kt(yl,null,kt(hl,{path:bn(a,"/people")},kt("div",{css:gL({theme:h})},kt(uL,{institution:d}))),kt(hl,{path:bn(a,"/specimens")},kt(lP,{config:f,style:{margin:"auto",maxWidth:1e3,minHeight:"calc(90vh)"}}),";"),kt(hl,{path:a},kt("div",{css:gL({theme:h})},kt(WR,{institution:d}))))))}var xL=["id"];function wL(t){var e,n=t.children;try{xl();e=!0}catch(t){console.log("No router context found, so creating a MemoryRouter for the component"),e=!1}return e?kt(c.a.Fragment,null,n):kt(sl,{initialEntries:["/"]},n)}function EL(t){var e=t.id,n=(s()(t,xL),zv(CL,{lazyLoad:!0})),r=n.data,i=n.error,o=n.loading,a=n.load;Object(l.useContext)(Zt);return Object(l.useEffect)((function(){void 0!==e&&a({variables:{key:e,predicate:{type:"equals",key:"institutionKey",value:e}}})}),[e]),kt(wL,null,kt(bL,{data:r,error:i,loading:o||!r,id:e}))}var CL="\nquery institution($key: String!, $predicate: Predicate){\n  occurrenceSearch(predicate: $predicate) {\n    documents(size: 0) {\n      total\n    }\n    cardinality {\n      recordedBy\n    }\n  }\n  institution(key: $key) {\n    key\n    code\n    name\n    description\n    active\n    email\n    phone\n    homepage\n    catalogUrl\n    alternativeCodes {\n      code\n      description\n    }\n    type\n    apiUrl\n    institutionalGovernance\n    disciplines\n    latitude\n    longitude\n    additionalNames\n    foundingDate\n    geographicDescription\n    taxonomicDescription\n    numberSpecimens\n    indexHerbariorumRecord\n    logoUrl\n\n    identifiers {\n      identifier\n    }\n    contacts {\n      key\n      firstName\n      lastName\n      position\n      areaResponsibility\n      researchPursuits\n      phone\n      email\n      fax\n    }\n    numberSpecimens\n    \n    mailingAddress {\n      address\n      city\n      province\n      postalCode\n      country\n    }\n    address {\n      address\n      city\n      province\n      postalCode\n      country\n    }\n  }\n}\n";var SL=function(t){var e=Object(l.useContext)(wy).institutionKey.route;return kt(Rb,t,kt(yl,null,kt(hl,{path:e,render:function(e){return kt(EL,o()({id:e.match.params.key},t,e))}})))};var TL={name:"16h4zzf",styles:"background:white;padding:24px 48px;margin:12px 0"},OL=function(t){o()({},t);return TL},IL={name:"zjik7",styles:"display:flex"},AL=function(t){o()({},t);return IL},ML={name:"154ddyn",styles:"background:white;margin-bottom:12px;border-radius:4px;overflow:hidden;padding:4px;ul{list-style:none;padding:0;margin:0;}"},kL=function(t){o()({},t);return ML},PL={name:"69vnwp",styles:"color:#888;margin-left:4px"},DL=function(t){o()({},t);return PL},RL={name:"ikop4y",styles:"margin:3px;padding:1px 3px;border:1px solid #ddd;display:inline-block;background:#efefef"},LL=function(t){o()({},t);return RL},NL={name:"v80hby",styles:"flex:0 0 250px;padding-top:12px;margin:0;font-size:14px;position:sticky;top:0;align-self:flex-start;height:100%"},jL=function(t){o()({},t);return NL},FL={name:"1xbk6p4",styles:"background:white;border-radius:4px;margin-bottom:8px;margin-right:12px"},zL={name:"6u75bj",styles:"padding:12px;display:flex"},BL={name:"qggz2r",styles:"flex:0 0 auto;div{padding:8px 0;text-align:center;background:var(--primary500);color:white;font-weight:900;border-radius:50%;width:25px;height:25px;line-height:25px;padding:0;text-align:center;padding-top:2px;}"},UL={name:"r1qpl1",styles:"height:4px;border-radius:2px;background:#ddd;>div{background:var(--primary500);height:4px;border-radius:2px;}margin-bottom:12px"},GL={name:"1a7qdqi",styles:"img{width:100%;border-radius:4px 4px 0 0;}"},VL={name:"1gtkkjd",styles:"padding-left:12px;flex:1 1 auto;a{color:inherit;text-decoration:none;}h5{font-size:13px;margin:0;}p{font-size:13px;color:#888;margin:0;margin-top:8px;}"},qL=Pt("height:","300","px;overflow:hidden;position:relative;margin:0 -6px;>a{position:absolute;margin:12px;bottom:0;right:0;}>div{display:flex;overflow-x:auto;height:","300100","px;padding-bottom:100px;}img{display:block;height:","300","px;margin:0 6px;}",""),HL=["bibliographicCitations"];uf.Term,uf.Value;function WL(t){var e=t.bibliographicCitations,n=void 0===e?[]:e,r=(s()(t,HL),Object(l.useState)(5)),i=Nt()(r,2),o=i[0],a=i[1],u=n.length<10?n:n.slice(0,o),h=n.length>u.length;return kt(c.a.Fragment,null,kt("ul",null,u.map((function(t,e){return kt(ZL,{key:e,citation:t})}))),h&&kt(pr,{onClick:function(){return a(500)}},"Show all"))}function ZL(t){var e=t.citation,n=e.identifier?e.identifier.match(/^http(s)?:\/\/.+/):null;return kt("li",null,e.text&&kt("div",null,kt(rg,{text:e.text})),e.identifier&&n&&kt("a",{href:e.identifier},kt(ud,{id:"dataset.viewArticle"})),e.identifier&&!n&&kt(c.a.Fragment,null,kt("span",{style:{color:"#888"}},"Identifier: "),kt("span",null,e.identifier)))}var $L=["data","loading","error"];uf.Term,uf.Value;function KL(t){var e,n=t.data,r=void 0===n?{}:n,i=(t.loading,t.error,s()(t,$L),r.dataset),o=i.doi;return null!=i&&null!==(e=i.citation)&&void 0!==e&&e.text?kt(c.a.Fragment,null,kt(rg,{text:i.citation.text}),o&&kt("div",{style:{marginTop:"1em"}},kt(pr,{as:"a",href:"https://data.crosscite.org/application/x-research-info-systems/".concat(o),look:"primaryOutline",style:{marginRight:"1em"}},"RIS"),kt(pr,{as:"a",href:"https://data.crosscite.org/application/x-bibtex/".concat(o),look:"primaryOutline"},"BibTex"))):null}uf.Term,uf.Value;uf.Term,uf.Value;uf.Term,uf.Value;var YL=["dataset"],XL=uf.Term,JL=uf.Value;function QL(t){var e,n,r,i,o,a,l=t.dataset;s()(t,YL);return kt(uf,{style:{marginBottom:12},horizontal:!0},(null===(e=l.samplingDescription)||void 0===e?void 0:e.sampling)&&kt(c.a.Fragment,null,kt(XL,null,kt(ud,{id:"dataset.sampling",defaultMessage:"Sampling"})),kt(JL,null,kt(rg,{text:l.samplingDescription.sampling}))),(null===(n=l.samplingDescription)||void 0===n?void 0:n.studyExtent)&&kt(c.a.Fragment,null,kt(XL,null,kt(ud,{id:"dataset.studyExtent",defaultMessage:"Study extent"})),kt(JL,null,kt(rg,{text:l.samplingDescription.studyExtent}))),(null===(r=l.samplingDescription)||void 0===r?void 0:r.qualityControl)&&kt(c.a.Fragment,null,kt(XL,null,kt(ud,{id:"dataset.qualityControl",defaultMessage:"Quality control"})),kt(JL,null,kt(rg,{text:l.samplingDescription.qualityControl}))),(null===(i=l.samplingDescription)||void 0===i?void 0:i.methodSteps)&&(null===(o=l.samplingDescription)||void 0===o||null===(a=o.methodSteps)||void 0===a?void 0:a.length)>0&&kt(c.a.Fragment,null,kt(XL,null,kt(ud,{id:"dataset.methodSteps",defaultMessage:"Method steps"})),kt(JL,null,kt("ol",{style:{padding:"0px",margin:0}},l.samplingDescription.methodSteps.map((function(t,e){return kt("li",{key:t,style:e<l.samplingDescription.methodSteps.length-1?{marginBottom:"12px"}:null},kt(rg,{text:t}))}))))))}var tN=["temporalCoverages"],eN=uf.Term,nN=uf.Value;function rN(t){var e=t.temporalCoverages;s()(t,tN);return kt(c.a.Fragment,null,kt(uf,{horizontal:!0},e.map((function(t,e){return kt(oN,{period:t,key:e})}))))}function iN(t){var e=t.value;return kt(fd,{value:e,year:"numeric",month:"long",day:"2-digit"})}function oN(t){var e=t.period;return kt(c.a.Fragment,null,kt(eN,null,e["@type"]),"range"==e["@type"]&&kt(nN,null,kt(iN,{value:e.start})," - ",kt(iN,{value:e.end})),"single"==e["@type"]&&kt(nN,null,kt(iN,{value:e.date})),"verbatim"==e["@type"]&&kt(nN,null,e.period))}var aN=["geographicCoverages"],sN=uf.Term,lN=uf.Value;function cN(t){var e=t.geographicCoverages;s()(t,aN);return kt(c.a.Fragment,null,e.map((function(t,e){return kt(uN,{coverage:t,key:e})})))}function uN(t){var e,n,r,i,o,a=t.coverage;if((null==a||null===(e=a.boundingBox)||void 0===e?void 0:e.minLatitude)>-85&&(null==a||null===(n=a.boundingBox)||void 0===n?void 0:n.maxLatitude)<85){var s=a.boundingBox,l=s.minLongitude,u=s.minLatitude,h=s.maxLongitude,d=s.maxLatitude;i={type:"Polygon",coordinates:[[[l,u],[h,u],[h,d],[l,d],[l,u]]]}}return o=null!=a&&null!==(r=a.boundingBox)&&void 0!==r&&r.minLatitude?kt(uf,{horizontal:!0},kt(sN,null,"Latitude"),kt(lN,null,"From ",a.boundingBox.minLatitude," to"," ",a.boundingBox.maxLatitude),kt(sN,null,"Longitude"),kt(lN,null,"From ",a.boundingBox.minLongitude," to"," ",a.boundingBox.maxLongitude)):null,kt(uf,null,kt(sN,null,"Description"),kt(lN,null,kt(rg,{text:a.description})),i&&kt(c.a.Fragment,null,kt(sN,null),kt(lN,{style:{width:"100%"}},kt("img",{style:{marginTop:24,maxWidth:"100%"},src:"https://api.mapbox.com/styles/v1/mapbox/light-v10/static/geojson(".concat(encodeURIComponent(JSON.stringify(i)),")/auto/600x300@2x?access_token=pk.eyJ1IjoiaG9mZnQiLCJhIjoiY2llaGNtaGRiMDAxeHNxbThnNDV6MG95OSJ9.p6Dj5S7iN-Mmxic6Z03BEA")}),o)),!i&&kt(c.a.Fragment,null,kt(sN,null,"Bounding box"),kt(lN,null,o)))}var hN=["dataset","taxonomicCoverages"],dN=uf.Term,pN=uf.Value;function fN(t){t.dataset;var e=t.taxonomicCoverages;s()(t,hN);return kt(c.a.Fragment,null,e.map((function(t,e){return kt(mN,{coverage:t,key:e})})))}function mN(t){var e=t.coverage,n=(Object(l.useContext)(Zt),Object(l.useState)(5)),r=Nt()(n,2),i=r[0],o=r[1],a=e.coverages.length<10?e.coverages:e.coverages.slice(0,i),s=e.coverages.length>a.length;return kt(uf,{horizontal:!0},kt(dN,null,"Description"),kt(pN,null,kt(rg,{text:e.description})),kt(dN,null,"Coverage"),kt(pN,null,a.map((function(t,n){return kt(gN,{key:n,item:t,lastItem:e.coverages[n-1]})})),s&&kt(c.a.Fragment,null,kt("br",null),kt(pr,{onClick:function(){return o(500)}},"Show all"))))}function gN(t){var e,n,r=t.item,i=t.lastItem;return kt(c.a.Fragment,null,i&&(null==i||null===(e=i.rank)||void 0===e?void 0:e.interpreted)!==(null==r||null===(n=r.rank)||void 0===n?void 0:n.interpreted)&&kt("br",null),kt("span",{css:LL},kt("span",null,r.scientificName),kt("span",{css:DL},r.commonName)))}uf.Term,uf.Value;var yN=["dataset"],vN=uf.Term,_N=uf.Value;function bN(t){var e=t.dataset,n=void 0===e?{}:e,r=(s()(t,yN),n.machineTags),i=void 0===r?[]:r,o=n.doi,a=n.endpoints,l=void 0===a?[]:a,u=n.identifiers,h=void 0===u?[]:u,d=n.created,p=n.modified,f=n.pubDate,m=n.installation,g=m.organization,y=l.filter((function(t){return t.url})),v=h.filter((function(t){return["DOI","URL","LSID","FTP","UNKNOWN"].indexOf(t.type)>-1})),_=i.find((function(t){return"orphans.gbif.org"===t.namespace&&"status"===name})),b=_?_.value:void 0;return kt("div",{style:{paddingBottom:12,marginBottom:12}},kt(uf,{style:{marginBottom:12},horizontal:!0},d&&kt(c.a.Fragment,null,kt(vN,null,kt(ud,{id:"dataset.registry.registrationDate"})),kt(_N,null,kt(fd,{value:d,year:"numeric",month:"long",day:"2-digit"}))),p&&kt(c.a.Fragment,null,kt(vN,null,kt(ud,{id:"dataset.registry.metdataLastModified"})),kt(_N,null,kt(fd,{value:p,year:"numeric",month:"long",day:"2-digit"}))),f&&kt(c.a.Fragment,null,kt(vN,null,kt(ud,{id:"dataset.registry.pubDate"})),kt(_N,null,kt(fd,{value:f,year:"numeric",month:"long",day:"2-digit"}))),g&&kt(c.a.Fragment,null,kt(vN,null,kt(ud,{id:"dataset.registry.hostedBy"})),kt(_N,null,null==g?void 0:g.title)),m&&kt(c.a.Fragment,null,kt(vN,null,kt(ud,{id:"dataset.registry.installation"})),kt(_N,null,null==m?void 0:m.title)),y.length>0&&kt(c.a.Fragment,null,kt(vN,null,kt(ud,{id:"dataset.registry.endpoints"})),kt(_N,null,kt(uf,{breakpoint:800,horizontal:!1},y.map((function(t){return kt(c.a.Fragment,{key:t.key},kt(vN,null,kt(ud,{id:"enums.endpointType.".concat(t.type)})),kt(_N,null,kt("a",null,t.url," ",t.type)))}))))),b&&kt(c.a.Fragment,null,kt(vN,null,kt(ud,{id:"dataset.registry.hostingStatus"})),kt(_N,null,kt(ud,{id:"dataset.registry.".concat(b)}))),kt(vN,null,kt(ud,{id:"dataset.registry.preferredIdentifier"})),kt(_N,null,o),v.length>0&&kt(c.a.Fragment,null,kt(vN,null,kt(ud,{id:"dataset.registry.alternativeIdentifier"})),kt(_N,null,kt(uf,{breakpoint:800,horizontal:!1},v.map((function(t){return kt(c.a.Fragment,{key:t.key},kt(_N,null,kt(rg,{text:t.identifier})))})))))),kt("p",null,kt("a",{href:"https://registry.gbif.org/dataset/".concat(n.key,"/ingestion-history")},kt(ud,{id:"dataset.registry.registrationDetails"}))))}var xN=["images"];function wN(t){var e,n,r=t.images,i=void 0===r?[]:r,a=s()(t,xN);return(null==i||null===(e=i.documents)||void 0===e?void 0:e.total)>0?kt("div",o()({css:qL},a),kt("div",null,i.documents.results.map((function(t){return kt("div",{key:t.key},kt(cp,{src:t.stillImages[0].identifier,height:300}))}))),kt(Sd,{title:kt("span",null,"Records with images"),placement:"auto"},kt(pr,{look:"primary",as:"a",href:"/"},kt(Kn,{style:{marginRight:8}})," ",kt(md,{value:null==i||null===(n=i.documents)||void 0===n?void 0:n.total})))):null}var EN=["data","insights","loading","error","tocState","className"];uf.Term,uf.Value;function CN(t){var e,n,r,i,o,a,u,h,d,p,f,m,g,y,v,_,b,x,w,E,C,S,T,O,I,A=t.data,M=void 0===A?{}:A,k=t.insights,P=(t.loading,t.error,t.tocState,t.className,s()(t,EN),Yp(1200)),D=xl(),R=D.url,L=(D.path,Object(l.useContext)(Zt)),N=(Object(l.useContext)(wy),Object(l.useState)({})),j=Nt()(N,2),F=j[0],z=(j[1],M.dataset),B=M.occurrenceSearch,U=M.literatureSearch,G=(null==z||null===(e=z.gridded)||void 0===e||null===(n=e[0])||void 0===n?void 0:n.percent)>.5,V=((null==k||null===(r=k.data)||void 0===r||null===(i=r.unfiltered)||void 0===i||null===(o=i.facet)||void 0===o?void 0:o.dwcaExtension)||[]).find((function(t){return"http://rs.gbif.org/terms/1.0/DNADerivedData"===t.key})),q=null==k||null===(a=k.data)||void 0===a||null===(u=a.withCoordinates)||void 0===u||null===(h=u.documents)||void 0===h?void 0:h.total,H=null==k||null===(d=k.data)||void 0===d||null===(p=d.withYear)||void 0===p||null===(f=p.documents)||void 0===f?void 0:f.total,W=(null==B||null===(m=B.documents)||void 0===m?void 0:m.total)-(null==k||null===(g=k.data)||void 0===g||null===(y=g.withTaxonMatch)||void 0===y||null===(v=y.documents)||void 0===v?void 0:v.total),Z=null==B||null===(_=B.documents)||void 0===_?void 0:_.total,$=SN(q/Z),K=SN(H/Z),Y=SN(W/Z),X=null==k||null===(b=k.data)||void 0===b||null===(x=b.unfiltered)||void 0===x||null===(w=x.cardinality)||void 0===w?void 0:w.eventId,J="SAMPLING_EVENT_DATASET"===z.type||X>1&&X/Z<.99;return kt(c.a.Fragment,null,kt("div",{css:AL({theme:L})},!P&&kt("div",{css:jL({theme:L})},kt("nav",{css:kL({theme:L})},kt(sy,{refs:F}))),kt("div",{style:{width:"100%",marginLeft:12,overflow:"hidden"}},kt(e_,{rootPredicate:{type:"equals",key:"datasetKey",value:z.key}}),z.description&&kt(zg,{css:OL({theme:L})},kt("h2",{ref:function(t){F.description=t}},"Description"),kt(rg,{text:z.description})),kt(wN,{images:null==k||null===(E=k.data)||void 0===E?void 0:E.images}),z.purpose&&kt(zg,{css:OL({theme:L})},kt("h2",{ref:function(t){F.purpose=t}},"Purpose"),kt(rg,{text:z.purpose})),(null==z||null===(C=z.geographicCoverages)||void 0===C?void 0:C.length)>0&&kt(zg,{css:OL({theme:L})},kt("h2",{ref:function(t){F["geographic-scope"]=t}},"Geographic scope"),kt(cN,{geographicCoverages:z.geographicCoverages})),(null==z||null===(S=z.temporalCoverages)||void 0===S?void 0:S.length)>0&&kt(zg,{css:OL({theme:L})},kt("h2",{ref:function(t){F["temporal-scope"]=t}},"Temporal scope"),kt(rN,{temporalCoverages:z.temporalCoverages})),(null==z||null===(T=z.taxonomicCoverages)||void 0===T?void 0:T.length)>0&&kt(zg,{css:OL({theme:L})},kt("h2",{ref:function(t){F["taxonomic-scope"]=t}},"Taxonomic scope"),kt(fN,{taxonomicCoverages:z.taxonomicCoverages})),z.samplingDescription&&kt(zg,{css:OL({theme:L})},kt("h2",{ref:function(t){F.methodology=t}},"Methodology"),kt(QL,{dataset:z})),z.additionalInfo&&kt(zg,{css:OL({theme:L})},kt("h2",{ref:function(t){F["additional-info"]=t}},"Additional info"),kt(rg,{text:z.additionalInfo})),(null==z?void 0:z.volatileContributors)&&kt(zg,{css:OL({theme:L})},kt("h2",{ref:function(t){F.contacts=t}},"Contacts"),kt(dv,{contacts:z.volatileContributors,style:{paddingInlineStart:0}})),(null==z||null===(O=z.bibliographicCitations)||void 0===O?void 0:O.length)>0&&kt(zg,{css:OL({theme:L})},kt("h2",{ref:function(t){F["bibliographic-citations"]=t}},"Bibliographic citations"),kt(WL,{bibliographicCitations:null==z?void 0:z.bibliographicCitations})),kt(zg,{css:OL({theme:L})},kt("h2",{ref:function(t){F.registration=t}},"Registration"),kt(bN,{dataset:z})),(null==z?void 0:z.citation)&&kt(zg,{css:OL({theme:L})},kt("h2",{ref:function(t){F.citation=t}},"Citation"),kt(KL,{data:M}))),kt("div",{css:jL({theme:L}),style:{margin:"0 0 0 12px",position:"relative"}},kt("div",null,kt("div",{css:FL},kt("div",{css:zL},kt("div",{css:BL},kt("div",null,kt(Vn,null))),kt("div",{css:VL},kt("h5",null,kt(Il,{to:bn(R,"citations")},kt(md,{value:U.documents.count})," citations"))))),kt("div",{css:FL},kt("div",{css:GL},kt("div",{css:zL},kt("div",{css:VL},kt("h5",null,kt(md,{value:null==B||null===(I=B.documents)||void 0===I?void 0:I.total})," occurrences"),kt("p",null,$,"% with coordinates"),kt("div",{css:UL},kt("div",{style:{width:"".concat($,"%")}})),kt("p",null,K,"% with year"),kt("div",{css:UL},kt("div",{style:{width:"".concat(K,"%")}})),kt("p",null,Y,"% with taxon match"),kt("div",{css:UL},kt("div",{style:{width:"".concat(Y,"%")}}))))),V&&kt("div",{css:zL},kt("div",{css:BL},kt("div",null,kt(kf,null))),kt("div",{css:VL},kt("h5",null,"Includes DNA"),kt("p",null,"Lorem ipsum sfhkjh sfhlksduf bksk sdkh sdfg "))),J&&kt("div",{css:zL},kt("div",{css:BL},kt("div",null,kt($n,null))),kt("div",{css:VL},kt("h5",null,"Contains sampling events"),kt("p",null,"Lorem ipsum sfhkjh sfhlksduf bksk sdkh sdfg "))),G&&kt("div",{css:zL},kt("div",{css:BL},kt("div",null,kt($n,null))),kt("div",{css:VL},kt("h5",null,"Gridded data"),kt("p",null,"This dataset looks like it is gridded."))))))))}function SN(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=0;return isFinite(t)?((t*=100)>101?n=t.toFixed():t>100.1?n=t.toFixed(1):t>100?n=100.1:100==t?n=100:t>=99.9?n=99.9:t>99?n=t.toFixed(1):t>=1?n=t.toFixed():t>=.01?n=t.toFixed(2):t<.01&&0!=t&&(n=.01),n>e&&(n=e),n):t}var TN={name:"16h4zzf",styles:"background:white;padding:24px 48px;margin:12px 0"},ON=function(t){o()({},t);return TN},IN={name:"zjik7",styles:"display:flex"},AN=function(t){o()({},t);return IN},MN={name:"154ddyn",styles:"background:white;margin-bottom:12px;border-radius:4px;overflow:hidden;padding:4px;ul{list-style:none;padding:0;margin:0;}"},kN=function(t){o()({},t);return MN},PN={name:"v80hby",styles:"flex:0 0 250px;padding-top:12px;margin:0;font-size:14px;position:sticky;top:0;align-self:flex-start;height:100%"},DN=function(t){o()({},t);return PN},RN=["data","loading","error","tocState","className"];function LN(t){var e=t.data,n=void 0===e?{}:e,r=(t.loading,t.error,t.tocState,t.className,s()(t,RN),Object(l.useContext)(Zt)),i=Object(l.useState)({}),o=Nt()(i,2),a=o[0],u=(o[1],n.dataset.project);return u?kt(c.a.Fragment,null,kt("div",{css:AN({theme:r})},kt("div",{css:DN({theme:r})},kt("nav",{css:kN({theme:r})},kt(sy,{refs:a}))),kt("div",{style:{width:"100%",marginLeft:12}},(u.abstract||u.title)&&kt(zg,{css:ON({theme:r})},kt("h2",{ref:function(t){a.abstract=t}},u.title),kt(rg,{text:u.abstract})),u.studyAreaDescription&&kt(zg,{css:ON({theme:r})},kt("h2",{ref:function(t){a.studyAreaDescription=t}},"studyAreaDescription"),kt(rg,{text:u.studyAreaDescription})),u.designDescription&&kt(zg,{css:ON({theme:r})},kt("h2",{ref:function(t){a.designDescription=t}},"designDescription"),kt(rg,{text:u.designDescription})),u.funding&&kt(zg,{css:ON({theme:r})},kt("h2",{ref:function(t){a.funding=t}},"funding"),kt(rg,{text:u.funding})),(null==u?void 0:u.contacts)&&kt(zg,{css:ON({theme:r})},kt("h2",{ref:function(t){a.contacts=t}},"Contacts"),kt(dv,{contacts:u.contacts,style:{paddingInlineStart:0}}))))):kt("div",null,"This dataset does not state any relation to a project")}var NN={name:"cpyc7r",styles:"background:var(--paperBackground);padding:2rem 1rem 0 1rem"},jN=function(t){o()({},t);return NN},FN={name:"9v6ty9",styles:"margin-top:1.5rem;margin-bottom:1.5rem;>div{margin-bottom:8px;}"},zN=function(t){o()({},t);return FN},BN={name:"lxew06",styles:"display:flex;margin-top:.5em"},UN={name:"mkkf9p",styles:"flex:1 1 auto"},GN={name:"1ju08nc",styles:"padding:0 6px;align-items:center;display:flex;>button{padding:7px;font-size:18px;}>gbif-button-text{color:#555;}"},VN={name:"zn1n19",styles:"margin:0 auto;width:1350px;max-width:100%"},qN=function(t){o()({},t);return VN},HN=["dataset","className"];function WN(t){var e=t.dataset,n=(t.className,s()(t,HN),xl()),r=(n.url,n.path,Object(l.useContext)(Zt),{rootFilter:{gbifDatasetKey:[e.key]},excludedFilters:["datasetKey"]});return kt("div",null,kt(aD,{config:r,style:{margin:"auto",maxWidth:"100%",minHeight:"calc(90vh)"}}))}var ZN=["highlighted"];var $N={name:"p3cyll",styles:"display:flex;justify-content:space-evenly;margin:24px 0"},KN=function(t){o()({},t);return $N},YN=function(t){var e=t.highlighted;s()(t,ZN);return Pt("background:white;width:250px;max-width:100%;background:white;padding:24px;margin:12px;border-radius:8px;box-shadow:0 0 3px 3px rgba(0,0,0,.05);font-size:14px;h4{font-size:16px;font-weight:bold;margin:0 0 24px 0;}>div{margin-bottom:12px;}",e?XN:"",";","")},XN={name:"ieew9t",styles:"transform:scale(1.025);border-color:#9ecaed;box-shadow:0 0 10px #9ecaed"};var JN=["dataset","className"];function QN(t){t.dataset,t.className,s()(t,JN);var e=Object(l.useContext)(Zt);return kt("div",{css:KN({theme:e})},kt("div",null,kt("div",{css:YN({theme:e})},kt("h4",null,"GBIF annotated metadata"),kt("div",null,"The annotated EML file contains information lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."),kt(pr,{appeance:"outline"},"EML"))),kt("div",null,kt("div",{css:YN({theme:e,highlighted:!0})},kt("h4",null,"GBIF annotated occurrence archive"),kt("div",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."),kt(pr,null,"Interpreted occurrences"))),kt("div",null,kt("div",{css:YN({theme:e})},kt("h4",null,"Source archive"),kt("div",null,"The source archive is the data as published to GBIF. It contains information lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."),kt(pr,{appeance:"outline"},"source archive"))))}var tj=["theme"],ej=function(t){var e=t.theme;s()(t,tj);return Pt("color:",e.color,";margin-top:0;","")},nj=zg.H1;function rj(t){var e=Object(l.useContext)(Zt);return kt(nj,o()({css:ej({theme:e})},t))}var ij=["id","data","insights","error","loading"],oj=Fl.TabList,aj=Fl.RouterTab;zg.H1;function sj(t){var e,n=t.id,r=t.data,i=t.insights,o=t.error,a=t.loading,u=(s()(t,ij),Yp(800)),h=xl(),d=h.url,p=h.path,f=Object(l.useContext)(Zt);if(a)return kt("div",null,"loading");var m=r.dataset,g=r.literatureSearch,y=r.occurrenceSearch,v=(r.siteOccurrences,r.taxonSearch);if(o||!m)return kt("div",null,"Failed to retrieve item");var _={rootPredicate:{type:"equals",value:n,key:"datasetKey"},excludedFilters:["datasetCode","datasetKey","institutionKey","institutionCode","hostingOrganizationKey","protocol","publishingCountryCode"],occurrenceSearchTabs:["TABLE","GALLERY","MAP"],highlightedFilters:["taxonKey","catalogNumber","recordedBy","identifiedBy","typeStatus"]};return kt(c.a.Fragment,null,kt(tv,{left:kt(Ty,{type:"datasetSearch",discreet:!0},kt(Zn,null),kt(ud,{id:"catalogues.datasets"})),style:{borderBottom:"1px solid ".concat(f.paperBorderColor),background:"white"},right:kt("div",{css:GN},!u&&kt($m,{id:m.doi}),kt(pr,{look:"text"},kt(Vn,null)),kt(pr,{look:"text"},kt(lr,null)),kt(pr,{look:"text"},kt(cr,null)))}),kt("div",{css:jN({theme:f})},kt("div",{css:qN({theme:f})},kt(Mg,{prefix:kt(ud,{id:"dataset.longType.".concat(m.type)}),suffix:kt(ud,{id:"dataset.registeredDate",values:{DATE:kt(fd,{value:m.created,year:"numeric",month:"long",day:"2-digit"})}})}),kt("div",{css:BN},kt("div",{css:UN},kt(rj,null,m.title),kt(Zl,{wrap:"nowrap"},kt($l,{grow:!0},(null==m?void 0:m.contactsCitation.length)>0&&kt("div",{css:Nf({theme:f})},kt(ar,null),kt("div",null,kt("ol",{css:kr},null==m?void 0:m.contactsCitation.map((function(t){return kt("li",{key:t.key},t.abbreviatedName)}))))),kt("div",{style:{marginTop:".5em"}},"Published by ",kt(Oy,{css:zg.css.a(f),type:"publisherKey",id:m.publishingOrganizationKey},m.publishingOrganizationTitle)),kt("div",{css:zN},kt("div",{css:jf()},kt("div",{css:Nf({theme:f})},kt(bv,{value:m.license})),u&&kt("div",{css:Nf({theme:f})},kt($m,{id:m.doi})),m.homepage&&kt("div",{css:Nf({theme:f})},kt(Un,null),kt("span",null,kt(lj,{href:m.homepage}))),y.documents.total>0&&kt("div",{css:Nf({theme:f})},kt(zn,null),kt("span",null,kt(md,{value:y.documents.total})," occurrences")),v.count>0&&kt("div",{css:Nf({theme:f})},kt(jn,null),kt("span",null,kt(md,{value:v.count})," accepted names")))))))),kt(oj,{style:{marginTop:"12px",borderTop:"1px solid #ddd"}},kt(aj,{to:d,exact:!0,label:"About"}),m.project&&kt(aj,{to:bn(d,"project"),label:"Project"}),(null===(e=g.documents)||void 0===e?void 0:e.count)>0&&kt(aj,{to:bn(d,"citations"),label:"Citations"}),kt(aj,{to:bn(d,"download"),label:"Download"})))),kt("section",null,kt(yl,null,kt(hl,{path:bn(p,"citations")},kt("div",{css:qN({theme:f})},kt(WN,{dataset:m}))),kt(hl,{path:bn(p,"download")},kt("div",{css:qN({theme:f})},kt(QN,{dataset:m}))),kt(hl,{path:bn(p,"specimens")},kt(lP,{config:_,style:{margin:"auto",maxWidth:1e3,minHeight:"calc(90vh)"}})),kt(hl,{path:bn(p,"project")},kt("div",{css:qN({theme:f})},kt(LN,{data:r}))),kt(hl,{path:p},kt("div",{css:qN({theme:f})},kt(CN,{data:r,insights:i}))))))}function lj(t){var e=t.href;try{var n=new URL(e).hostname;return kt("a",{href:e,css:Pr},n)}catch(t){return kt("span",null,"invalid")}}var cj=["id"];function uj(t){var e,n=t.children;try{xl();e=!0}catch(t){console.log("No router context found, so creating a MemoryRouter for the component"),e=!1}return e?kt(c.a.Fragment,null,n):kt(sl,{initialEntries:["/"]},n)}function hj(t){var e,n=t.id,r=(s()(t,cj),zv(pj,{lazyLoad:!0})),i=r.data,o=r.error,a=r.loading,c=r.load,u=zv(dj,{lazyLoad:!0}),h=u.data,d=u.error,p=u.loading,f=u.load,m=(Object(l.useContext)(Zt),Object(l.useContext)(kb)),g=null==m||null===(e=m.occurrence)||void 0===e?void 0:e.rootPredicate;return Object(l.useEffect)((function(){if(void 0!==n){var t={type:"equals",key:"datasetKey",value:n},e=[t];g&&e.push(g),c({variables:{key:n,predicate:t,sitePredicate:{type:"and",predicates:e}}}),f({variables:{key:n,datasetPredicate:t,imagePredicate:{type:"and",predicates:[t,{type:"equals",key:"mediaType",value:"StillImage"}]},coordinatePredicate:{type:"and",predicates:[t,{type:"equals",key:"hasCoordinate",value:"true"},{type:"equals",key:"hasGeospatialIssue",value:"false"}]},taxonPredicate:{type:"and",predicates:[t,{type:"equals",key:"issue",value:"TAXON_MATCH_NONE"}]},yearPredicate:{type:"and",predicates:[t,{type:"isNotNull",key:"year"}]},eventPredicate:{type:"and",predicates:[t,{type:"isNotNull",key:"eventId"}]}}})}}),[n]),kt(uj,null,kt(sj,{data:i,error:o,loading:a||!i,id:n,insights:{data:h,loading:p,error:d}}))}var dj="\nquery ($datasetPredicate: Predicate, $imagePredicate: Predicate, $coordinatePredicate: Predicate, $taxonPredicate: Predicate, $yearPredicate: Predicate, $eventPredicate: Predicate){\n  unfiltered: occurrenceSearch(predicate: $datasetPredicate) {\n    cardinality {\n      eventId\n    }\n    facet {\n      dwcaExtension {\n        key\n        count\n      }\n    }\n  }\n  images: occurrenceSearch(predicate: $imagePredicate) {\n    documents(size: 10) {\n      total\n      results {\n        key\n        stillImages {\n          identifier\n        }\n      }\n    }\n  }\n  withCoordinates: occurrenceSearch(predicate: $coordinatePredicate) {\n    documents(size: 10) {\n      total\n    }\n  }\n  withTaxonMatch: occurrenceSearch(predicate: $taxonPredicate) {\n    documents(size: 10) {\n      total\n    }\n  }\n  withYear: occurrenceSearch(predicate: $yearPredicate) {\n    documents(size: 10) {\n      total\n    }\n  }\n  withEventId: occurrenceSearch(predicate: $eventPredicate) {\n    documents(size: 10) {\n      total\n    }\n  }\n}\n",pj="\nquery dataset($key: ID!, $predicate: Predicate, $sitePredicate: Predicate){\n  occurrenceSearch(predicate: $predicate) {\n    documents(size: 0) {\n      total\n    }\n  }\n  siteOccurrences: occurrenceSearch(predicate: $sitePredicate) {\n    documents(size: 0) {\n      total\n    }\n  }\n  literatureSearch(gbifDatasetKey: [$key]) {\n    documents {\n      count\n    }\n  }\n  taxonSearch(datasetKey: [$key], origin: [SOURCE], status: [ACCEPTED]){\n    count\n  }\n  dataset(key: $key) {\n    key\n    type\n    title\n    created\n    modified\n    pubDate\n    description\n    purpose\n    temporalCoverages\n    logoUrl\n    publishingOrganizationKey\n    publishingOrganizationTitle\n    homepage\n    additionalInfo\n    installation {\n      key\n      title\n      organization {\n        key\n        title\n      }\n    }\n    volatileContributors {\n      key\n      firstName\n      lastName\n      position\n      organization\n      address\n      userId\n      email\n      phone\n      type\n      _highlighted\n      roles\n    }\n    contactsCitation {\n      key\n      abbreviatedName\n      firstName\n      lastName\n      userId\n      roles\n    }\n    geographicCoverages {\n      description\n      boundingBox {\n        minLatitude\n        maxLatitude\n        minLongitude\n        maxLongitude\n        globalCoverage\n      }\n    }\n    taxonomicCoverages {\n      description\n      coverages {\n        scientificName\n        commonName\n        rank {\n          interpreted\n        }\n      }\n    }\n    bibliographicCitations {\n      identifier\n      text\n    }\n    samplingDescription {\n      studyExtent\n      sampling\n      qualityControl\n      methodSteps\n    }\n    dataDescriptions {\n      charset\n      name\n      format\n      formatVersion\n      url\n    }\n    citation {\n      text\n    }\n    license\n    project {\n      title\n      abstract\n      studyAreaDescription\n      designDescription\n      funding\n      contacts {\n        firstName\n        lastName\n\n        organization\n        position\n        roles\n        type\n\n        address\n        city\n        postalCode\n        province\n        country\n        \n        homepage\n        email\n        phone\n        userId\n      }\n      identifier\n    }\n    endpoints {\n      key\n      type\n      url\n    }\n    identifiers {\n      key\n      type\n      identifier\n    }\n    doi\n    machineTags {\n      namespace\n    }\n    gridded {\n      percent\n    }\n  }\n}\n",fj=["siteConfig"];function mj(t){var e=Object(l.useContext)(wy).datasetKey.route;return kt(yl,null,kt(hl,{path:e,render:function(e){return kt(hj,o()({id:e.match.params.key},t,e))}}))}var gj=function(t){var e=t.siteConfig,n=s()(t,fj);return kt(Rb,{siteConfig:e},kt(mj,n))}},,,,,,,,,,,function(t,e,n){"use strict";var r=n(108),i=n(157),o=n(32),a=function(){function t(t){var e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=Object(o.c)(void 0!==e.scale?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new r.a({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:i.a.POINT,this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding}return t.prototype.clone=function(){var e=this.getScale();return new t({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()})},t.prototype.getOverflow=function(){return this.overflow_},t.prototype.getFont=function(){return this.font_},t.prototype.getMaxAngle=function(){return this.maxAngle_},t.prototype.getPlacement=function(){return this.placement_},t.prototype.getOffsetX=function(){return this.offsetX_},t.prototype.getOffsetY=function(){return this.offsetY_},t.prototype.getFill=function(){return this.fill_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getScaleArray=function(){return this.scaleArray_},t.prototype.getStroke=function(){return this.stroke_},t.prototype.getText=function(){return this.text_},t.prototype.getTextAlign=function(){return this.textAlign_},t.prototype.getTextBaseline=function(){return this.textBaseline_},t.prototype.getBackgroundFill=function(){return this.backgroundFill_},t.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},t.prototype.getPadding=function(){return this.padding_},t.prototype.setOverflow=function(t){this.overflow_=t},t.prototype.setFont=function(t){this.font_=t},t.prototype.setMaxAngle=function(t){this.maxAngle_=t},t.prototype.setOffsetX=function(t){this.offsetX_=t},t.prototype.setOffsetY=function(t){this.offsetY_=t},t.prototype.setPlacement=function(t){this.placement_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setFill=function(t){this.fill_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t,this.scaleArray_=Object(o.c)(void 0!==t?t:1)},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.setText=function(t){this.text_=t},t.prototype.setTextAlign=function(t){this.textAlign_=t},t.prototype.setTextBaseline=function(t){this.textBaseline_=t},t.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},t.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},t.prototype.setPadding=function(t){this.padding_=t},t}();e.a=a},function(t,e,n){"use strict";var r,i=n(67),o=n(250),a=n.n(o),s=n(20),l=n(192),c=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u="renderOrder",h=function(t){function e(e){var n=this,r=e||{},i=Object(s.a)({},r);return delete i.style,delete i.renderBuffer,delete i.updateWhileAnimating,delete i.updateWhileInteracting,(n=t.call(this,i)||this).declutter_=void 0!==r.declutter&&r.declutter,n.renderBuffer_=void 0!==r.renderBuffer?r.renderBuffer:100,n.style_=null,n.styleFunction_=void 0,n.setStyle(r.style),n.updateWhileAnimating_=void 0!==r.updateWhileAnimating&&r.updateWhileAnimating,n.updateWhileInteracting_=void 0!==r.updateWhileInteracting&&r.updateWhileInteracting,n}return c(e,t),e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(u)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.renderDeclutter=function(t){t.declutterTree||(t.declutterTree=new a.a(9)),this.getRenderer().renderDeclutter(t)},e.prototype.setRenderOrder=function(t){this.set(u,t)},e.prototype.setStyle=function(t){this.style_=void 0!==t?t:l.a,this.styleFunction_=null===t?void 0:Object(l.c)(this.style_),this.changed()},e}(i.a),d={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},p=[d.FILL],f=[d.STROKE],m=[d.BEGIN_PATH],g=[d.CLOSE_PATH],y=d,v=n(7),_=n(40),b=function(){function t(){}return t.prototype.drawCustom=function(t,e,n,r){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,e){},t.prototype.drawFeature=function(t,e){},t.prototype.drawGeometryCollection=function(t,e){},t.prototype.drawLineString=function(t,e){},t.prototype.drawMultiLineString=function(t,e){},t.prototype.drawMultiPoint=function(t,e){},t.prototype.drawMultiPolygon=function(t,e){},t.prototype.drawPoint=function(t,e){},t.prototype.drawPolygon=function(t,e){},t.prototype.drawText=function(t,e){},t.prototype.setFillStrokeStyle=function(t,e){},t.prototype.setImageStyle=function(t,e){},t.prototype.setTextStyle=function(t,e){},t}(),x=n(59),w=n(4),E=n(11),C=n(19),S=n(36),T=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),O=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.tolerance=e,o.maxExtent=n,o.pixelRatio=i,o.maxLineWidth=0,o.resolution=r,o.beginGeometryInstruction1_=null,o.beginGeometryInstruction2_=null,o.bufferedMaxExtent_=null,o.instructions=[],o.coordinates=[],o.tmpCoordinate_=[],o.hitDetectionInstructions=[],o.state={},o}return T(e,t),e.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))},e.prototype.appendFlatPointCoordinates=function(t,e){for(var n=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,i=this.coordinates,o=i.length,a=0,s=t.length;a<s;a+=e)r[0]=t[a],r[1]=t[a+1],Object(w.f)(n,r)&&(i[o++]=r[0],i[o++]=r[1]);return o},e.prototype.appendFlatLineCoordinates=function(t,e,n,r,i,o){var a=this.coordinates,s=a.length,l=this.getBufferedMaxExtent();o&&(e+=r);var c,u,h,d=t[e],p=t[e+1],f=this.tmpCoordinate_,m=!0;for(c=e+r;c<n;c+=r)f[0]=t[c],f[1]=t[c+1],(h=Object(w.i)(l,f))!==u?(m&&(a[s++]=d,a[s++]=p,m=!1),a[s++]=f[0],a[s++]=f[1]):h===_.a.INTERSECTING?(a[s++]=f[0],a[s++]=f[1],m=!1):m=!0,d=f[0],p=f[1],u=h;return(i&&m||c===e+r)&&(a[s++]=d,a[s++]=p),s},e.prototype.drawCustomCoordinates_=function(t,e,n,r,i){for(var o=0,a=n.length;o<a;++o){var s=n[o],l=this.appendFlatLineCoordinates(t,e,s,r,!1,!1);i.push(l),e=s}return e},e.prototype.drawCustom=function(t,e,n,r){this.beginGeometry(t,e);var i,o,a,s,l,c=t.getType(),u=t.getStride(),h=this.coordinates.length;switch(c){case v.a.MULTI_POLYGON:i=t.getOrientedFlatCoordinates(),s=[];var d=t.getEndss();l=0;for(var p=0,f=d.length;p<f;++p){var m=[];l=this.drawCustomCoordinates_(i,l,d[p],u,m),s.push(m)}this.instructions.push([y.CUSTOM,h,s,t,n,S.c]),this.hitDetectionInstructions.push([y.CUSTOM,h,s,t,r||n,S.c]);break;case v.a.POLYGON:case v.a.MULTI_LINE_STRING:a=[],i=c==v.a.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),l=this.drawCustomCoordinates_(i,0,t.getEnds(),u,a),this.instructions.push([y.CUSTOM,h,a,t,n,S.b]),this.hitDetectionInstructions.push([y.CUSTOM,h,a,t,r||n,S.b]);break;case v.a.LINE_STRING:case v.a.CIRCLE:i=t.getFlatCoordinates(),o=this.appendFlatLineCoordinates(i,0,i.length,u,!1,!1),this.instructions.push([y.CUSTOM,h,o,t,n,S.a]),this.hitDetectionInstructions.push([y.CUSTOM,h,o,t,r||n,S.a]);break;case v.a.MULTI_POINT:i=t.getFlatCoordinates(),(o=this.appendFlatPointCoordinates(i,u))>h&&(this.instructions.push([y.CUSTOM,h,o,t,n,S.a]),this.hitDetectionInstructions.push([y.CUSTOM,h,o,t,r||n,S.a]));break;case v.a.POINT:i=t.getFlatCoordinates(),this.coordinates.push(i[0],i[1]),o=this.coordinates.length,this.instructions.push([y.CUSTOM,h,o,t,n]),this.hitDetectionInstructions.push([y.CUSTOM,h,o,t,r||n])}this.endGeometry(e)},e.prototype.beginGeometry=function(t,e){this.beginGeometryInstruction1_=[y.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[y.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},e.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var n,r,i=e.length,o=-1;for(t=0;t<i;++t)(r=(n=e[t])[0])==y.END_GEOMETRY?o=t:r==y.BEGIN_GEOMETRY&&(n[2]=t,Object(C.g)(this.hitDetectionInstructions,o,t),o=-1)},e.prototype.setFillStrokeStyle=function(t,e){var n=this.state;if(t){var r=t.getColor();n.fillStyle=Object(x.a)(r||E.b)}else n.fillStyle=void 0;if(e){var i=e.getColor();n.strokeStyle=Object(x.a)(i||E.k);var o=e.getLineCap();n.lineCap=void 0!==o?o:E.d;var a=e.getLineDash();n.lineDash=a?a.slice():E.e;var s=e.getLineDashOffset();n.lineDashOffset=s||E.f;var l=e.getLineJoin();n.lineJoin=void 0!==l?l:E.g;var c=e.getWidth();n.lineWidth=void 0!==c?c:E.h;var u=e.getMiterLimit();n.miterLimit=void 0!==u?u:E.i,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0},e.prototype.createFill=function(t){var e=t.fillStyle,n=[y.SET_FILL_STYLE,e];return"string"!=typeof e&&n.push(!0),n},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[y.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,e){var n=t.fillStyle;"string"==typeof n&&t.currentFillStyle==n||(void 0!==n&&this.instructions.push(e.call(this,t)),t.currentFillStyle=n)},e.prototype.updateStrokeStyle=function(t,e){var n=t.strokeStyle,r=t.lineCap,i=t.lineDash,o=t.lineDashOffset,a=t.lineJoin,s=t.lineWidth,l=t.miterLimit;(t.currentStrokeStyle!=n||t.currentLineCap!=r||i!=t.currentLineDash&&!Object(C.b)(t.currentLineDash,i)||t.currentLineDashOffset!=o||t.currentLineJoin!=a||t.currentLineWidth!=s||t.currentMiterLimit!=l)&&(void 0!==n&&e.call(this,t),t.currentStrokeStyle=n,t.currentLineCap=r,t.currentLineDash=i,t.currentLineDashOffset=o,t.currentLineJoin=a,t.currentLineWidth=s,t.currentMiterLimit=l)},e.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var e=[y.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Object(w.d)(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;Object(w.c)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(b),I=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),A=function(t){function e(e,n,r,i){var o=t.call(this,e,n,r,i)||this;return o.hitDetectionImage_=null,o.image_=null,o.imagePixelRatio_=void 0,o.anchorX_=void 0,o.anchorY_=void 0,o.height_=void 0,o.opacity_=void 0,o.originX_=void 0,o.originY_=void 0,o.rotateWithView_=void 0,o.rotation_=void 0,o.scale_=void 0,o.width_=void 0,o.declutterImageWithText_=void 0,o}return I(e,t),e.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var n=t.getFlatCoordinates(),r=t.getStride(),i=this.coordinates.length,o=this.appendFlatPointCoordinates(n,r);this.instructions.push([y.DRAW_IMAGE,i,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([y.DRAW_IMAGE,i,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(e)}},e.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var n=t.getFlatCoordinates(),r=t.getStride(),i=this.coordinates.length,o=this.appendFlatPointCoordinates(n,r);this.instructions.push([y.DRAW_IMAGE,i,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([y.DRAW_IMAGE,i,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(e)}},e.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,t.prototype.finish.call(this)},e.prototype.setImageStyle=function(t,e){var n=t.getAnchor(),r=t.getSize(),i=t.getHitDetectionImage(),o=t.getImage(this.pixelRatio),a=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=i,this.image_=o,this.height_=r[1],this.opacity_=t.getOpacity(),this.originX_=a[0]*this.imagePixelRatio_,this.originY_=a[1]*this.imagePixelRatio_,this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=r[0],this.declutterImageWithText_=e},e}(O),M=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),k=function(t){function e(e,n,r,i){return t.call(this,e,n,r,i)||this}return M(e,t),e.prototype.drawFlatCoordinates_=function(t,e,n,r){var i=this.coordinates.length,o=this.appendFlatLineCoordinates(t,e,n,r,!1,!1),a=[y.MOVE_TO_LINE_TO,i,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),n},e.prototype.drawLineString=function(t,e){var n=this.state,r=n.strokeStyle,i=n.lineWidth;if(void 0!==r&&void 0!==i){this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([y.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,E.e,E.f],m);var o=t.getFlatCoordinates(),a=t.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(f),this.endGeometry(e)}},e.prototype.drawMultiLineString=function(t,e){var n=this.state,r=n.strokeStyle,i=n.lineWidth;if(void 0!==r&&void 0!==i){this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([y.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],m);for(var o=t.getEnds(),a=t.getFlatCoordinates(),s=t.getStride(),l=0,c=0,u=o.length;c<u;++c)l=this.drawFlatCoordinates_(a,l,o[c],s);this.hitDetectionInstructions.push(f),this.endGeometry(e)}},e.prototype.finish=function(){var e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(f),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this)},e.prototype.applyStroke=function(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(f),e.lastStroke=this.coordinates.length),e.lastStroke=0,t.prototype.applyStroke.call(this,e),this.instructions.push(m)},e}(O),P=n(66),D=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),R=function(t){function e(e,n,r,i){return t.call(this,e,n,r,i)||this}return D(e,t),e.prototype.drawFlatCoordinatess_=function(t,e,n,r){var i=this.state,o=void 0!==i.fillStyle,a=void 0!==i.strokeStyle,s=n.length;this.instructions.push(m),this.hitDetectionInstructions.push(m);for(var l=0;l<s;++l){var c=n[l],u=this.coordinates.length,h=this.appendFlatLineCoordinates(t,e,c,r,!0,!a),d=[y.MOVE_TO_LINE_TO,u,h];this.instructions.push(d),this.hitDetectionInstructions.push(d),a&&(this.instructions.push(g),this.hitDetectionInstructions.push(g)),e=c}return o&&(this.instructions.push(p),this.hitDetectionInstructions.push(p)),a&&(this.instructions.push(f),this.hitDetectionInstructions.push(f)),e},e.prototype.drawCircle=function(t,e){var n=this.state,r=n.fillStyle,i=n.strokeStyle;if(void 0!==r||void 0!==i){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([y.SET_FILL_STYLE,E.b]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([y.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);var o=t.getFlatCoordinates(),a=t.getStride(),s=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);var l=[y.CIRCLE,s];this.instructions.push(m,l),this.hitDetectionInstructions.push(m,l),void 0!==n.fillStyle&&(this.instructions.push(p),this.hitDetectionInstructions.push(p)),void 0!==n.strokeStyle&&(this.instructions.push(f),this.hitDetectionInstructions.push(f)),this.endGeometry(e)}},e.prototype.drawPolygon=function(t,e){var n=this.state,r=n.fillStyle,i=n.strokeStyle;if(void 0!==r||void 0!==i){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([y.SET_FILL_STYLE,E.b]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([y.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);var o=t.getEnds(),a=t.getOrientedFlatCoordinates(),s=t.getStride();this.drawFlatCoordinatess_(a,0,o,s),this.endGeometry(e)}},e.prototype.drawMultiPolygon=function(t,e){var n=this.state,r=n.fillStyle,i=n.strokeStyle;if(void 0!==r||void 0!==i){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([y.SET_FILL_STYLE,E.b]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([y.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);for(var o=t.getEndss(),a=t.getOrientedFlatCoordinates(),s=t.getStride(),l=0,c=0,u=o.length;c<u;++c)l=this.drawFlatCoordinatess_(a,l,o[c],s);this.endGeometry(e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var e=this.tolerance;if(0!==e)for(var n=this.coordinates,r=0,i=n.length;r<i;++r)n[r]=Object(P.e)(n[r],e);return t.prototype.finish.call(this)},e.prototype.setFillStrokeStyles_=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},e}(O),L=n(157),N=n(9);function j(t,e,n,r,i){var o,a,s,l,c,u,h,d,p,f=n,m=n,g=0,y=0,v=n;for(o=n;o<r;o+=i){var _=e[o],b=e[o+1];void 0!==l&&(d=_-l,p=b-c,s=Math.sqrt(d*d+p*p),void 0!==u&&(y+=a,Math.acos((u*d+h*p)/(a*s))>t&&(y>g&&(g=y,f=v,m=o),y=0,v=o-i)),a=s,u=d,h=p),l=_,c=b}return(y+=s)>g?[v,o]:[f,m]}var F=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),z={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},B={Circle:R,Default:O,Image:A,LineString:k,Polygon:R,Text:function(t){function e(e,n,r,i){var o=t.call(this,e,n,r,i)||this;return o.labels_=null,o.text_="",o.textOffsetX_=0,o.textOffsetY_=0,o.textRotateWithView_=void 0,o.textRotation_=0,o.textFillState_=null,o.fillStates={},o.textStrokeState_=null,o.strokeStates={},o.textState_={},o.textStates={},o.textKey_="",o.fillKey_="",o.strokeKey_="",o.declutterImageWithText_=void 0,o}return F(e,t),e.prototype.finish=function(){var e=t.prototype.finish.call(this);return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e},e.prototype.drawText=function(t,e){var n=this.textFillState_,r=this.textStrokeState_,i=this.textState_;if(""!==this.text_&&i&&(n||r)){var o=this.coordinates,a=o.length,s=t.getType(),l=null,c=t.getStride();if(i.placement!==L.a.LINE||s!=v.a.LINE_STRING&&s!=v.a.MULTI_LINE_STRING&&s!=v.a.POLYGON&&s!=v.a.MULTI_POLYGON){var u=i.overflow?null:[];switch(s){case v.a.POINT:case v.a.MULTI_POINT:l=t.getFlatCoordinates();break;case v.a.LINE_STRING:l=t.getFlatMidpoint();break;case v.a.CIRCLE:l=t.getCenter();break;case v.a.MULTI_LINE_STRING:l=t.getFlatMidpoints(),c=2;break;case v.a.POLYGON:l=t.getFlatInteriorPoint(),i.overflow||u.push(l[2]/this.resolution),c=3;break;case v.a.MULTI_POLYGON:var h=t.getFlatInteriorPoints();l=[];for(T=0,O=h.length;T<O;T+=3)i.overflow||u.push(h[T+2]/this.resolution),l.push(h[T],h[T+1]);if(0===l.length)return;c=2}if((R=this.appendFlatPointCoordinates(l,c))===a)return;if(u&&(R-a)/2!=l.length/c){var d=a/2;u=u.filter((function(t,e){var n=o[2*(d+e)]===l[e*c]&&o[2*(d+e)+1]===l[e*c+1];return n||--d,n}))}this.saveTextStates_(),(i.backgroundFill||i.backgroundStroke)&&(this.setFillStrokeStyle(i.backgroundFill,i.backgroundStroke),i.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),i.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);var p=i.padding;if(p!=E.j&&(i.scale[0]<0||i.scale[1]<0)){var f=i.padding[0],m=i.padding[1],g=i.padding[2],_=i.padding[3];i.scale[0]<0&&(m=-m,_=-_),i.scale[1]<0&&(f=-f,g=-g),p=[f,m,g,_]}var b=this.pixelRatio;this.instructions.push([y.DRAW_IMAGE,a,R,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterImageWithText_,p==E.j?E.j:p.map((function(t){return t*b})),!!i.backgroundFill,!!i.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,u]);var x=1/b;this.hitDetectionInstructions.push([y.DRAW_IMAGE,a,R,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[x,x],NaN,this.declutterImageWithText_,p,!!i.backgroundFill,!!i.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,u]),this.endGeometry(e)}else{if(!Object(w.C)(this.getBufferedMaxExtent(),t.getExtent()))return;var C=void 0;if(l=t.getFlatCoordinates(),s==v.a.LINE_STRING)C=[l.length];else if(s==v.a.MULTI_LINE_STRING)C=t.getEnds();else if(s==v.a.POLYGON)C=t.getEnds().slice(0,1);else if(s==v.a.MULTI_POLYGON){var S=t.getEndss();C=[];for(var T=0,O=S.length;T<O;++T)C.push(S[T][0])}this.beginGeometry(t,e);for(var I=i.textAlign,A=0,M=void 0,k=0,P=C.length;k<P;++k){if(null==I){var D=j(i.maxAngle,l,A,C[k],c);A=D[0],M=D[1]}else M=C[k];for(var T=A;T<M;T+=c)o.push(l[T],l[T+1]);var R=o.length;A=C[k],this.drawChars_(a,R),a=R}this.endGeometry(e)}}},e.prototype.saveTextStates_=function(){var t=this.textStrokeState_,e=this.textState_,n=this.textFillState_,r=this.strokeKey_;t&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var i=this.textKey_;i in this.textStates||(this.textStates[i]={font:e.font,textAlign:e.textAlign||E.l,textBaseline:e.textBaseline||E.m,scale:e.scale});var o=this.fillKey_;n&&(o in this.fillStates||(this.fillStates[o]={fillStyle:n.fillStyle}))},e.prototype.drawChars_=function(t,e){var n=this.textStrokeState_,r=this.textState_,i=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();var s=this.pixelRatio,l=z[r.textBaseline],c=this.textOffsetY_*s,u=this.text_,h=n?n.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([y.DRAW_CHARS,t,e,l,r.overflow,a,r.maxAngle,s,c,i,h*s,u,o,1]),this.hitDetectionInstructions.push([y.DRAW_CHARS,t,e,l,r.overflow,a,r.maxAngle,1,c,i,h,u,o,1/s])},e.prototype.setTextStyle=function(t,e){var n,r,i;if(t){var o=t.getFill();o?((r=this.textFillState_)||(r={},this.textFillState_=r),r.fillStyle=Object(x.a)(o.getColor()||E.b)):(r=null,this.textFillState_=r);var a=t.getStroke();if(a){(i=this.textStrokeState_)||(i={},this.textStrokeState_=i);var s=a.getLineDash(),l=a.getLineDashOffset(),c=a.getWidth(),u=a.getMiterLimit();i.lineCap=a.getLineCap()||E.d,i.lineDash=s?s.slice():E.e,i.lineDashOffset=void 0===l?E.f:l,i.lineJoin=a.getLineJoin()||E.g,i.lineWidth=void 0===c?E.h:c,i.miterLimit=void 0===u?E.i:u,i.strokeStyle=Object(x.a)(a.getColor()||E.k)}else i=null,this.textStrokeState_=i;n=this.textState_;var h=t.getFont()||E.c;Object(E.r)(h);var d=t.getScaleArray();n.overflow=t.getOverflow(),n.font=h,n.maxAngle=t.getMaxAngle(),n.placement=t.getPlacement(),n.textAlign=t.getTextAlign(),n.textBaseline=t.getTextBaseline()||E.m,n.backgroundFill=t.getBackgroundFill(),n.backgroundStroke=t.getBackgroundStroke(),n.padding=t.getPadding()||E.j,n.scale=void 0===d?[1,1]:d;var p=t.getOffsetX(),f=t.getOffsetY(),m=t.getRotateWithView(),g=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===p?0:p,this.textOffsetY_=void 0===f?0:f,this.textRotateWithView_=void 0!==m&&m,this.textRotation_=void 0===g?0:g,this.strokeKey_=i?("string"==typeof i.strokeStyle?i.strokeStyle:Object(N.c)(i.strokeStyle))+i.lineCap+i.lineDashOffset+"|"+i.lineWidth+i.lineJoin+i.miterLimit+"["+i.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.textBaseline||"?"),this.fillKey_=r?"string"==typeof r.fillStyle?r.fillStyle:"|"+Object(N.c)(r.fillStyle):""}else this.text_="";this.declutterImageWithText_=e},e}(O)},U=function(){function t(t,e,n,r){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=r,this.resolution_=n,this.buildersByZIndex_={}}return t.prototype.finish=function(){var t={};for(var e in this.buildersByZIndex_){t[e]=t[e]||{};var n=this.buildersByZIndex_[e];for(var r in n){var i=n[r].finish();t[e][r]=i}}return t},t.prototype.getBuilder=function(t,e){var n=void 0!==t?t.toString():"0",r=this.buildersByZIndex_[n];void 0===r&&(r={},this.buildersByZIndex_[n]=r);var i=r[e];void 0===i&&(i=new(0,B[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[e]=i);return i},t}(),G="Circle",V="Default",q="Image",H="LineString",W="Polygon",Z="Text",$=n(34),K=n(13),Y=n(10),X=n(42);function J(t,e,n,r,i,o,a,s,l,c,u,h){var d=t[e],p=t[e+1],f=0,m=0,g=0,y=0;function v(){f=d,m=p,d=t[e+=r],p=t[e+1],y+=g,g=Math.sqrt((d-f)*(d-f)+(p-m)*(p-m))}do{v()}while(e<n-r&&y+g<o);for(var _=0===g?0:(o-y)/g,b=Object(Y.e)(f,d,_),x=Object(Y.e)(m,p,_),w=e-r,E=y,C=o+s*l(c,i,u);e<n-r&&y+g<C;)v();_=0===g?0:(C-y)/g;var S,T=Object(Y.e)(f,d,_),O=Object(Y.e)(m,p,_);if(h){var I=[b,x,T,O];Object(X.a)(I,0,4,2,h,I,I),S=I[0]>I[2]}else S=b>T;var A,M=Math.PI,k=[],P=w+r===e;if(g=0,y=E,d=t[e=w],p=t[e+1],P){v(),A=Math.atan2(p-m,d-f),S&&(A+=A>0?-M:M);var D=(T+b)/2,R=(O+x)/2;return k[0]=[D,R,(C-o)/2,A,i],k}for(var L=0,N=i.length;L<N;){v();var j=Math.atan2(p-m,d-f);if(S&&(j+=j>0?-M:M),void 0!==A){var F=j-A;if(F+=F>M?-2*M:F<-M?2*M:0,Math.abs(F)>a)return null}A=j;for(var z=L,B=0;L<N;++L){var U=s*l(c,i[S?N-L-1:L],u);if(e+r<n&&y+g<o+B+U/2)break;B+=U}if(L!==z){var G=S?i.substring(N-z,N-L):i.substring(z,L);_=0===g?0:(o+B/2-y)/g;D=Object(Y.e)(f,d,_),R=Object(Y.e)(m,p,_);k.push([D,R,B/2,j,G]),o+=B}}return k}var Q=n(156),tt=Object(w.j)(),et=[],nt=[],rt=[],it=[];function ot(t){return t[3].declutterBox}var at=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function st(t,e){return"start"!==e&&"end"!==e||at.test(t)||(e="start"===e?"left":"right"),z[e]}var lt=function(){function t(t,e,n,r){this.overlaps=n,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=Object(K.c)(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}return t.prototype.createLabel=function(t,e,n,r){var i=t+e+n+r;if(this.labels_[i])return this.labels_[i];var o=r?this.strokeStates[r]:null,a=n?this.fillStates[n]:null,s=this.textStates[e],l=this.pixelRatio,c=[s.scale[0]*l,s.scale[1]*l],u=st(t,s.textAlign||E.l),h=r&&o.lineWidth?o.lineWidth:0,d=t.split("\n"),p=d.length,f=[],m=Object(E.q)(s.font,d,f),g=Object(E.p)(s.font),y=m+h,v=[],_=(y+2)*c[0],b=(g*p+h)*c[1],x={width:_<0?Math.floor(_):Math.ceil(_),height:b<0?Math.floor(b):Math.ceil(b),contextInstructions:v};(1==c[0]&&1==c[1]||v.push("scale",c),v.push("font",s.font),r)&&(v.push("strokeStyle",o.strokeStyle),v.push("lineWidth",h),v.push("lineCap",o.lineCap),v.push("lineJoin",o.lineJoin),v.push("miterLimit",o.miterLimit),($.g?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(v.push("setLineDash",[o.lineDash]),v.push("lineDashOffset",o.lineDashOffset)));n&&v.push("fillStyle",a.fillStyle),v.push("textBaseline","middle"),v.push("textAlign","center");var w,C=.5-u,S=u*y+C*h;if(r)for(w=0;w<p;++w)v.push("strokeText",[d[w],S+C*f[w],.5*(h+g)+w*g]);if(n)for(w=0;w<p;++w)v.push("fillText",[d[w],S+C*f[w],.5*(h+g)+w*g]);return this.labels_[i]=x,x},t.prototype.replayTextBackground_=function(t,e,n,r,i,o,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,n),t.lineTo.apply(t,r),t.lineTo.apply(t,i),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())},t.prototype.calculateImageOrLabelDimensions_=function(t,e,n,r,i,o,a,s,l,c,u,h,d,p,f,m){var g,y=n-(a*=h[0]),v=r-(s*=h[1]),_=i+l>t?t-l:i,b=o+c>e?e-c:o,x=p[3]+_*h[0]+p[1],E=p[0]+b*h[1]+p[2],C=y-p[3],S=v-p[0];return(f||0!==u)&&(et[0]=C,it[0]=C,et[1]=S,nt[1]=S,nt[0]=C+x,rt[0]=nt[0],rt[1]=S+E,it[1]=rt[1]),0!==u?(g=Object(K.b)(Object(K.c)(),n,r,1,1,u,-n,-r),Object(K.a)(g,et),Object(K.a)(g,nt),Object(K.a)(g,rt),Object(K.a)(g,it),Object(w.k)(Math.min(et[0],nt[0],rt[0],it[0]),Math.min(et[1],nt[1],rt[1],it[1]),Math.max(et[0],nt[0],rt[0],it[0]),Math.max(et[1],nt[1],rt[1],it[1]),tt)):Object(w.k)(Math.min(C,C+x),Math.min(S,S+E),Math.max(C,C+x),Math.max(S,S+E),tt),d&&(y=Math.round(y),v=Math.round(v)),{drawImageX:y,drawImageY:v,drawImageW:_,drawImageH:b,originX:l,originY:c,declutterBox:{minX:tt[0],minY:tt[1],maxX:tt[2],maxY:tt[3],value:m},canvasTransform:g,scale:h}},t.prototype.replayImageOrLabel_=function(t,e,n,r,i,o,a){var s=!(!o&&!a),l=r.declutterBox,c=t.canvas,u=a?a[2]*r.scale[0]/2:0;return l.minX-u<=c.width/e&&l.maxX+u>=0&&l.minY-u<=c.height/e&&l.maxY+u>=0&&(s&&this.replayTextBackground_(t,et,nt,rt,it,o,a),Object(E.n)(t,r.canvasTransform,i,n,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0},t.prototype.fill_=function(t){if(this.alignFill_){var e=Object(K.a)(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;t.save(),t.translate(e[0]%n,e[1]%n),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()},t.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.setLineDash&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},t.prototype.drawLabelWithPointPlacement_=function(t,e,n,r){var i=this.textStates[e],o=this.createLabel(t,e,r,n),a=this.strokeStates[n],s=this.pixelRatio,l=st(t,i.textAlign||E.l),c=z[i.textBaseline||E.m],u=a&&a.lineWidth?a.lineWidth:0;return{label:o,anchorX:l*(o.width/s-2*i.scale[0])+2*(.5-l)*u,anchorY:c*o.height/s+2*(.5-c)*u}},t.prototype.execute_=function(t,e,n,r,i,o,a,s){var l;this.pixelCoordinates_&&Object(C.b)(n,this.renderedTransform_)?l=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),l=Object(X.c)(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),Object(K.h)(this.renderedTransform_,n));for(var c,u,h,d,p,f,m,g,v,_,b,x,S,T,O,I,A=0,M=r.length,k=0,P=0,D=0,R=null,L=null,N=this.coordinateCache_,j=this.viewRotation_,F=Math.round(1e12*Math.atan2(-n[1],n[0]))/1e12,B={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:j},U=this.instructions!=r||this.overlaps?0:200;A<M;){var G=r[A];switch(G[0]){case y.BEGIN_GEOMETRY:S=G[1],I=G[3],S.getGeometry()?void 0===a||Object(w.C)(a,I.getExtent())?++A:A=G[2]+1:A=G[2];break;case y.BEGIN_PATH:P>U&&(this.fill_(t),P=0),D>U&&(t.stroke(),D=0),P||D||(t.beginPath(),d=NaN,p=NaN),++A;break;case y.CIRCLE:var V=l[k=G[1]],q=l[k+1],H=l[k+2]-V,W=l[k+3]-q,Z=Math.sqrt(H*H+W*W);t.moveTo(V+Z,q),t.arc(V,q,Z,0,2*Math.PI,!0),++A;break;case y.CLOSE_PATH:t.closePath(),++A;break;case y.CUSTOM:k=G[1],c=G[2];var $=G[3],Y=G[4],tt=6==G.length?G[5]:void 0;B.geometry=$,B.feature=S,A in N||(N[A]=[]);var et=N[A];tt?tt(l,k,c,2,et):(et[0]=l[k],et[1]=l[k+1],et.length=2),Y(et,B),++A;break;case y.DRAW_IMAGE:k=G[1],c=G[2],g=G[3],u=G[4],h=G[5];var nt=G[6],rt=G[7],it=G[8],at=G[9],st=G[10],lt=G[11],ct=G[12],ut=G[13],ht=G[14];if(!g&&G.length>=19){v=G[18],_=G[19],b=G[20],x=G[21];var dt=this.drawLabelWithPointPlacement_(v,_,b,x);g=dt.label,G[3]=g;var pt=G[22];u=(dt.anchorX-pt)*this.pixelRatio,G[4]=u;var ft=G[23];h=(dt.anchorY-ft)*this.pixelRatio,G[5]=h,nt=g.height,G[6]=nt,ut=g.width,G[13]=ut}var mt=void 0;G.length>24&&(mt=G[24]);var gt=void 0,yt=void 0,vt=void 0;G.length>16?(gt=G[15],yt=G[16],vt=G[17]):(gt=E.j,yt=!1,vt=!1),st&&F?lt+=j:st||F||(lt-=j);for(var _t=0;k<c;k+=2)if(!(mt&&mt[_t++]<ut/this.pixelRatio)){var bt=[t,e,g,Zt=this.calculateImageOrLabelDimensions_(g.width,g.height,l[k],l[k+1],ut,nt,u,h,it,at,lt,ct,i,gt,yt||vt,S),rt,yt?R:null,vt?L:null],xt=void 0,wt=void 0;if(s&&ht){var Et=c-k;if(!ht[Et]){ht[Et]=bt;continue}if(xt=ht[Et],delete ht[Et],wt=ot(xt),s.collides(wt))continue}s&&s.collides(Zt.declutterBox)||(xt&&(s&&s.insert(wt),this.replayImageOrLabel_.apply(this,xt)),s&&s.insert(Zt.declutterBox),this.replayImageOrLabel_.apply(this,bt))}++A;break;case y.DRAW_CHARS:var Ct=G[1],St=G[2],Tt=G[3],Ot=G[4];x=G[5];var It=G[6],At=G[7],Mt=G[8];b=G[9];var kt=G[10];v=G[11],_=G[12];var Pt=[G[13],G[13]],Dt=this.textStates[_],Rt=Dt.font,Lt=[Dt.scale[0]*At,Dt.scale[1]*At],Nt=void 0;Rt in this.widths_?Nt=this.widths_[Rt]:(Nt={},this.widths_[Rt]=Nt);var jt=Object(Q.a)(l,Ct,St,2),Ft=Math.abs(Lt[0])*Object(E.o)(Rt,v,Nt);if(Ot||Ft<=jt){var zt=this.textStates[_].textAlign,Bt=J(l,Ct,St,2,v,(jt-Ft)*z[zt],It,Math.abs(Lt[0]),E.o,Rt,Nt,F?0:this.viewRotation_);t:if(Bt){var Ut=[],Gt=void 0,Vt=void 0,qt=void 0,Ht=void 0,Wt=void 0;if(b)for(Gt=0,Vt=Bt.length;Gt<Vt;++Gt){qt=(Wt=Bt[Gt])[4],Ht=this.createLabel(qt,_,"",b),u=Wt[2]+(Lt[0]<0?-kt:kt),h=Tt*Ht.height+2*(.5-Tt)*kt*Lt[1]/Lt[0]-Mt;var Zt=this.calculateImageOrLabelDimensions_(Ht.width,Ht.height,Wt[0],Wt[1],Ht.width,Ht.height,u,h,0,0,Wt[3],Pt,!1,E.j,!1,S);if(s&&s.collides(Zt.declutterBox))break t;Ut.push([t,e,Ht,Zt,1,null,null])}if(x)for(Gt=0,Vt=Bt.length;Gt<Vt;++Gt){qt=(Wt=Bt[Gt])[4],Ht=this.createLabel(qt,_,x,""),u=Wt[2],h=Tt*Ht.height-Mt;Zt=this.calculateImageOrLabelDimensions_(Ht.width,Ht.height,Wt[0],Wt[1],Ht.width,Ht.height,u,h,0,0,Wt[3],Pt,!1,E.j,!1,S);if(s&&s.collides(Zt.declutterBox))break t;Ut.push([t,e,Ht,Zt,1,null,null])}s&&s.load(Ut.map(ot));for(var $t=0,Kt=Ut.length;$t<Kt;++$t)this.replayImageOrLabel_.apply(this,Ut[$t])}}++A;break;case y.END_GEOMETRY:if(void 0!==o){var Yt=o(S=G[1],I);if(Yt)return Yt}++A;break;case y.FILL:U?P++:this.fill_(t),++A;break;case y.MOVE_TO_LINE_TO:for(k=G[1],c=G[2],T=l[k],m=(O=l[k+1])+.5|0,(f=T+.5|0)===d&&m===p||(t.moveTo(T,O),d=f,p=m),k+=2;k<c;k+=2)f=(T=l[k])+.5|0,m=(O=l[k+1])+.5|0,k!=c-2&&f===d&&m===p||(t.lineTo(T,O),d=f,p=m);++A;break;case y.SET_FILL_STYLE:R=G,this.alignFill_=G[2],P&&(this.fill_(t),P=0,D&&(t.stroke(),D=0)),t.fillStyle=G[1],++A;break;case y.SET_STROKE_STYLE:L=G,D&&(t.stroke(),D=0),this.setStrokeStyle_(t,G),++A;break;case y.STROKE:U?D++:t.stroke(),++A;break;default:++A}}P&&this.fill_(t),D&&t.stroke()},t.prototype.execute=function(t,e,n,r,i,o){this.viewRotation_=r,this.execute_(t,e,n,this.instructions,i,void 0,void 0,o)},t.prototype.executeHitDetection=function(t,e,n,r,i){return this.viewRotation_=n,this.execute_(t,1,e,this.hitDetectionInstructions,!0,r,i)},t}(),ct=n(29),ut=[W,G,H,q,Z,V],ht=function(){function t(t,e,n,r,i,o){this.maxExtent_=t,this.overlaps_=r,this.pixelRatio_=n,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Object(K.c)(),this.createExecutors_(i)}return t.prototype.clip=function(t,e){var n=this.getClipCoords(e);t.beginPath(),t.moveTo(n[0],n[1]),t.lineTo(n[2],n[3]),t.lineTo(n[4],n[5]),t.lineTo(n[6],n[7]),t.clip()},t.prototype.createExecutors_=function(t){for(var e in t){var n=this.executorsByZIndex_[e];void 0===n&&(n={},this.executorsByZIndex_[e]=n);var r=t[e];for(var i in r){var o=r[i];n[i]=new lt(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}},t.prototype.hasExecutors=function(t){for(var e in this.executorsByZIndex_)for(var n=this.executorsByZIndex_[e],r=0,i=t.length;r<i;++r)if(t[r]in n)return!0;return!1},t.prototype.forEachFeatureAtCoordinate=function(t,e,n,r,i,o){var a=2*(r=Math.round(r))+1,s=Object(K.b)(this.hitDetectionTransform_,r+.5,r+.5,1/e,-1/e,-n,-t[0],-t[1]),l=!this.hitDetectionContext_;l&&(this.hitDetectionContext_=Object(ct.a)(a,a));var c,u=this.hitDetectionContext_;u.canvas.width!==a||u.canvas.height!==a?(u.canvas.width=a,u.canvas.height=a):l||u.clearRect(0,0,a,a),void 0!==this.renderBuffer_&&(c=Object(w.j)(),Object(w.p)(c,t),Object(w.c)(c,e*(this.renderBuffer_+r),c));var h,d=function(t){if(void 0!==dt[t])return dt[t];for(var e=2*t+1,n=t*t,r=new Array(n+1),i=0;i<=t;++i)for(var o=0;o<=t;++o){var a=i*i+o*o;if(a>n)break;var s=r[a];s||(s=[],r[a]=s),s.push(4*((t+i)*e+(t+o))+3),i>0&&s.push(4*((t-i)*e+(t+o))+3),o>0&&(s.push(4*((t+i)*e+(t-o))+3),i>0&&s.push(4*((t-i)*e+(t-o))+3))}for(var l=[],c=(i=0,r.length);i<c;++i)r[i]&&l.push.apply(l,r[i]);return dt[t]=l,l}(r);function p(t,e){for(var n=u.getImageData(0,0,a,a).data,s=0,l=d.length;s<l;s++)if(n[d[s]]>0){if(!o||h!==q&&h!==Z||-1!==o.indexOf(t)){var c=(d[s]-3)/4,p=r-c%a,f=r-(c/a|0),m=i(t,e,p*p+f*f);if(m)return m}u.clearRect(0,0,a,a);break}}var f,m,g,y,v,_=Object.keys(this.executorsByZIndex_).map(Number);for(_.sort(C.f),f=_.length-1;f>=0;--f){var b=_[f].toString();for(g=this.executorsByZIndex_[b],m=ut.length-1;m>=0;--m)if(void 0!==(y=g[h=ut[m]])&&(v=y.executeHitDetection(u,s,n,p,c)))return v}},t.prototype.getClipCoords=function(t){var e=this.maxExtent_;if(!e)return null;var n=e[0],r=e[1],i=e[2],o=e[3],a=[n,r,n,o,i,o,i,r];return Object(X.c)(a,0,8,2,t,a),a},t.prototype.isEmpty=function(){return Object(s.d)(this.executorsByZIndex_)},t.prototype.execute=function(t,e,n,r,i,o,a){var s=Object.keys(this.executorsByZIndex_).map(Number);s.sort(C.f),this.maxExtent_&&(t.save(),this.clip(t,n));var l,c,u,h,d,p,f=o||ut;for(a&&s.reverse(),l=0,c=s.length;l<c;++l){var m=s[l].toString();for(d=this.executorsByZIndex_[m],u=0,h=f.length;u<h;++u){void 0!==(p=d[f[u]])&&p.execute(t,e,n,r,i,a)}}this.maxExtent_&&t.restore()},t}(),dt={};var pt=ht,ft=n(14),mt=n(25),gt=n(152),yt=n(69),vt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_t=function(t){function e(e){var n=t.call(this)||this;return n.boundHandleImageChange_=n.handleImageChange_.bind(n),n.layer_=e,n.declutterExecutorGroup=null,n}return vt(e,t),e.prototype.getFeatures=function(t){return Object(N.b)()},e.prototype.prepareFrame=function(t){return Object(N.b)()},e.prototype.renderFrame=function(t,e){return Object(N.b)()},e.prototype.loadedTileCallback=function(t,e,n){t[e]||(t[e]={}),t[e][n.tileCoord.toString()]=n},e.prototype.createLoadedTileFinder=function(t,e,n){return function(r,i){var o=this.loadedTileCallback.bind(this,n,r);return t.forEachLoadedTile(e,r,i,o)}.bind(this)},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,r,i){},e.prototype.getDataAtPixel=function(t,e,n){return null},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleFontsChanged=function(){},e.prototype.handleImageChange_=function(t){t.target.getState()===mt.a.LOADED&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(t){var e=t.getState();return e!=mt.a.LOADED&&e!=mt.a.ERROR&&t.addEventListener(ft.a.CHANGE,this.boundHandleImageChange_),e==mt.a.IDLE&&(t.load(),e=t.getState()),e==mt.a.LOADED},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==yt.a.READY&&t.changed()},e}(gt.a),bt=n(158),xt=n(70),wt=n(62),Et=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ct=function(t){function e(e){var n=t.call(this,e)||this;return n.container=null,n.renderedResolution,n.tempTransform=Object(K.c)(),n.pixelTransform=Object(K.c)(),n.inversePixelTransform=Object(K.c)(),n.context=null,n.containerReused=!1,n.pixelContext_=null,n}return Et(e,t),e.prototype.getBackground=function(t){var e=this.getLayer().getBackground();return"function"==typeof e&&(e=e(t.viewState.resolution)),e||void 0},e.prototype.useContainer=function(t,e,n,r){var i,o,a=this.getLayer().getClassName();t&&t.className===a&&""===t.style.opacity&&1===n&&(!r||t.style.backgroundColor&&Object(C.b)(Object(wt.a)(t.style.backgroundColor),Object(wt.a)(r)))&&((l=t.firstElementChild)instanceof HTMLCanvasElement&&(o=l.getContext("2d")));if(o&&o.canvas.style.transform===e?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(i=document.createElement("div")).className=a;var s=i.style;s.position="absolute",s.width="100%",s.height="100%",r&&(s.backgroundColor=r);var l=(o=Object(ct.a)()).canvas;i.appendChild(l),(s=l.style).position="absolute",s.left="0",s.transformOrigin="top left",this.container=i,this.context=o}},e.prototype.clipUnrotated=function(t,e,n){var r=Object(w.z)(n),i=Object(w.A)(n),o=Object(w.t)(n),a=Object(w.s)(n);Object(K.a)(e.coordinateToPixelTransform,r),Object(K.a)(e.coordinateToPixelTransform,i),Object(K.a)(e.coordinateToPixelTransform,o),Object(K.a)(e.coordinateToPixelTransform,a);var s=this.inversePixelTransform;Object(K.a)(s,r),Object(K.a)(s,i),Object(K.a)(s,o),Object(K.a)(s,a),t.save(),t.beginPath(),t.moveTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()},e.prototype.dispatchRenderEvent_=function(t,e,n){var r=this.getLayer();if(r.hasListener(t)){var i=new bt.a(t,this.inversePixelTransform,n,e);r.dispatchEvent(i)}},e.prototype.preRender=function(t,e){this.dispatchRenderEvent_(xt.a.PRERENDER,t,e)},e.prototype.postRender=function(t,e){this.dispatchRenderEvent_(xt.a.POSTRENDER,t,e)},e.prototype.getRenderTransform=function(t,e,n,r,i,o,a){var s=i/2,l=o/2,c=r/e,u=-c,h=-t[0]+a,d=-t[1];return Object(K.b)(this.tempTransform,s,l,c,u,-n,h,d)},e.prototype.getDataAtPixel=function(t,e,n){var r=Object(K.a)(this.inversePixelTransform,t.slice()),i=this.context,o=this.getLayer().getExtent();if(o){var a=Object(K.a)(e.pixelToCoordinateTransform,t.slice());if(!Object(w.f)(o,a))return null}var s,l=Math.round(r[0]),c=Math.round(r[1]),u=this.pixelContext_;if(!u){var h=document.createElement("canvas");h.width=1,h.height=1,u=h.getContext("2d"),this.pixelContext_=u}u.clearRect(0,0,1,1);try{u.drawImage(i.canvas,l,c,1,1,0,0,1,1),s=u.getImageData(0,0,1,1).data}catch(t){return"SecurityError"===t.name?(this.pixelContext_=null,new Uint8Array):s}return 0===s[3]?null:s},e}(_t),St=n(79),Tt=n(17),Ot={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1},It={imageSmoothingEnabled:!0,msImageSmoothingEnabled:!0},At=n(35),Mt=n(12),kt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pt=function(t){function e(e){var n=t.call(this,e)||this;return n.extentChanged=!0,n.renderedExtent_=null,n.renderedPixelRatio,n.renderedProjection=null,n.renderedRevision,n.renderedTiles=[],n.newTiles_=!1,n.tmpExtent=Object(w.j)(),n.tmpTileRange_=new St.b(0,0,0,0),n}return kt(e,t),e.prototype.isDrawableTile=function(t){var e=this.getLayer(),n=t.getState(),r=e.getUseInterimTilesOnError();return n==Tt.a.LOADED||n==Tt.a.EMPTY||n==Tt.a.ERROR&&!r},e.prototype.getTile=function(t,e,n,r){var i=r.pixelRatio,o=r.viewState.projection,a=this.getLayer(),s=a.getSource().getTile(t,e,n,i,o);return s.getState()==Tt.a.ERROR&&(a.getUseInterimTilesOnError()?a.getPreload()>0&&(this.newTiles_=!0):s.setState(Tt.a.LOADED)),this.isDrawableTile(s)||(s=s.getInterimTile()),s},e.prototype.loadedTileCallback=function(e,n,r){return!!this.isDrawableTile(r)&&t.prototype.loadedTileCallback.call(this,e,n,r)},e.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},e.prototype.renderFrame=function(t,e){var n=t.layerStatesArray[t.layerIndex],r=t.viewState,i=r.projection,o=r.resolution,a=r.center,l=r.rotation,c=t.pixelRatio,u=this.getLayer(),h=u.getSource(),d=h.getRevision(),p=h.getTileGridForProjection(i),f=p.getZForResolution(o,h.zDirection),m=p.getResolution(f),g=t.extent,y=n.extent&&Object(Mt.j)(n.extent,i);y&&(g=Object(w.y)(g,Object(Mt.j)(n.extent,i)));var v=h.getTilePixelRatio(c),_=Math.round(t.size[0]*v),b=Math.round(t.size[1]*v);if(l){var x=Math.round(Math.sqrt(_*_+b*b));_=x,b=x}var E=m*_/2/v,S=m*b/2/v,T=[a[0]-E,a[1]-S,a[0]+E,a[1]+S],O=p.getTileRangeForExtentAndZ(g,f),I={};I[f]={};var A=this.createLoadedTileFinder(h,i,I),M=this.tmpExtent,k=this.tmpTileRange_;this.newTiles_=!1;for(var P=O.minX;P<=O.maxX;++P)for(var D=O.minY;D<=O.maxY;++D){var R=this.getTile(f,P,D,t);if(this.isDrawableTile(R)){var L=Object(N.c)(this);if(R.getState()==Tt.a.LOADED){I[f][R.tileCoord.toString()]=R;var j=R.inTransition(L);this.newTiles_||!j&&-1!==this.renderedTiles.indexOf(R)||(this.newTiles_=!0)}if(1===R.getAlpha(L,t.time))continue}var F=p.getTileCoordChildTileRange(R.tileCoord,k,M),z=!1;F&&(z=A(f+1,F)),z||p.forEachTileCoordParentTileRange(R.tileCoord,A,k,M)}var B=m/o;Object(K.b)(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/v,1/v,l,-_/2,-b/2);var U=Object(K.i)(this.pixelTransform);this.useContainer(e,U,n.opacity,this.getBackground(t));var G=this.context,V=G.canvas;Object(K.d)(this.inversePixelTransform,this.pixelTransform),Object(K.b)(this.tempTransform,_/2,b/2,B,B,0,-_/2,-b/2),V.width!=_||V.height!=b?(V.width=_,V.height=b):this.containerReused||G.clearRect(0,0,_,b),y&&this.clipUnrotated(G,t,y),h.getInterpolate()||Object(s.a)(G,Ot),this.preRender(G,t),this.renderedTiles.length=0;var q,H,W,Z=Object.keys(I).map(Number);Z.sort(C.f),1!==n.opacity||this.containerReused&&!h.getOpaque(t.viewState.projection)?(q=[],H=[]):Z=Z.reverse();for(var $=Z.length-1;$>=0;--$){var Y=Z[$],X=h.getTilePixelSize(Y,c,i),J=p.getResolution(Y)/m,Q=X[0]*J*B,tt=X[1]*J*B,et=p.getTileCoordForCoordAndZ(Object(w.z)(T),Y),nt=p.getTileCoordExtent(et),rt=Object(K.a)(this.tempTransform,[v*(nt[0]-T[0])/m,v*(T[3]-nt[3])/m]),it=v*h.getGutterForProjection(i),ot=I[Y];for(var at in ot){var st=(R=ot[at]).tileCoord,lt=et[1]-st[1],ct=Math.round(rt[0]-(lt-1)*Q),ut=et[2]-st[2],ht=Math.round(rt[1]-(ut-1)*tt),dt=ct-(P=Math.round(rt[0]-lt*Q)),pt=ht-(D=Math.round(rt[1]-ut*tt)),ft=f===Y;if(!(j=ft&&1!==R.getAlpha(Object(N.c)(this),t.time)))if(q){G.save(),W=[P,D,P+dt,D,P+dt,D+pt,P,D+pt];for(var mt=0,gt=q.length;mt<gt;++mt)if(f!==Y&&Y<H[mt]){var yt=q[mt];G.beginPath(),G.moveTo(W[0],W[1]),G.lineTo(W[2],W[3]),G.lineTo(W[4],W[5]),G.lineTo(W[6],W[7]),G.moveTo(yt[6],yt[7]),G.lineTo(yt[4],yt[5]),G.lineTo(yt[2],yt[3]),G.lineTo(yt[0],yt[1]),G.clip()}q.push(W),H.push(Y)}else G.clearRect(P,D,dt,pt);this.drawTileImage(R,t,P,D,dt,pt,it,ft),q&&!j?(G.restore(),this.renderedTiles.unshift(R)):this.renderedTiles.push(R),this.updateUsedTiles(t.usedTiles,h,R)}}this.renderedRevision=d,this.renderedResolution=m,this.extentChanged=!this.renderedExtent_||!Object(w.o)(this.renderedExtent_,T),this.renderedExtent_=T,this.renderedPixelRatio=c,this.renderedProjection=i,this.manageTilePyramid(t,h,p,c,i,g,f,u.getPreload()),this.scheduleExpireCache(t,h),this.postRender(G,t),n.extent&&G.restore(),Object(s.a)(G,It),U!==V.style.transform&&(V.style.transform=U);var vt=Object(At.e)(n.opacity),_t=this.container;return vt!==_t.style.opacity&&(_t.style.opacity=vt),this.container},e.prototype.drawTileImage=function(t,e,n,r,i,o,a,s){var l=this.getTileImage(t);if(l){var c=Object(N.c)(this),u=s?t.getAlpha(c,e.time):1,h=u!==this.context.globalAlpha;h&&(this.context.save(),this.context.globalAlpha=u),this.context.drawImage(l,a,a,l.width-2*a,l.height-2*a,n,r,i,o),h&&this.context.restore(),1!==u?e.animate=!0:s&&t.endTransition(c)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getTileImage=function(t){return t.getImage()},e.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var n=function(t,e,n){var r=Object(N.c)(t);r in n.usedTiles&&t.expireCache(n.viewState.projection,n.usedTiles[r])}.bind(null,e);t.postRenderFunctions.push(n)}},e.prototype.updateUsedTiles=function(t,e,n){var r=Object(N.c)(e);r in t||(t[r]={}),t[r][n.getKey()]=!0},e.prototype.manageTilePyramid=function(t,e,n,r,i,o,a,s,l){var c=Object(N.c)(e);c in t.wantedTiles||(t.wantedTiles[c]={});var u,h,d,p,f,m,g=t.wantedTiles[c],y=t.tileQueue,v=0;for(m=n.getMinZoom();m<=a;++m)for(h=n.getTileRangeForExtentAndZ(o,m,h),d=n.getResolution(m),p=h.minX;p<=h.maxX;++p)for(f=h.minY;f<=h.maxY;++f)a-m<=s?(++v,(u=e.getTile(m,p,f,r,i)).getState()==Tt.a.IDLE&&(g[u.getKey()]=!0,y.isKeyQueued(u.getKey())||y.enqueue([u,c,n.getTileCoordCenter(u.tileCoord),d])),void 0!==l&&l(u)):e.useTile(m,p,f,i);e.updateCacheSize(v,i)},e}(Ct);Pt.prototype.getLayer;var Dt=Pt,Rt="image",Lt="hybrid",Nt="vector",jt=n(37),Ft=n(53),zt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bt=function(t){function e(e,n,r,i,o,a,s){var l=t.call(this)||this;return l.context_=e,l.pixelRatio_=n,l.extent_=r,l.transform_=i,l.viewRotation_=o,l.squaredTolerance_=a,l.userTransform_=s,l.contextFillState_=null,l.contextStrokeState_=null,l.contextTextState_=null,l.fillState_=null,l.strokeState_=null,l.image_=null,l.imageAnchorX_=0,l.imageAnchorY_=0,l.imageHeight_=0,l.imageOpacity_=0,l.imageOriginX_=0,l.imageOriginY_=0,l.imageRotateWithView_=!1,l.imageRotation_=0,l.imageScale_=[0,0],l.imageWidth_=0,l.text_="",l.textOffsetX_=0,l.textOffsetY_=0,l.textRotateWithView_=!1,l.textRotation_=0,l.textScale_=[0,0],l.textFillState_=null,l.textStrokeState_=null,l.textState_=null,l.pixelCoordinates_=[],l.tmpLocalTransform_=Object(K.c)(),l}return zt(e,t),e.prototype.drawImages_=function(t,e,n,r){if(this.image_){var i=Object(X.c)(t,e,n,r,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,s=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=s*this.imageOpacity_);var l=this.imageRotation_;this.imageRotateWithView_&&(l+=this.viewRotation_);for(var c=0,u=i.length;c<u;c+=2){var h=i[c]-this.imageAnchorX_,d=i[c+1]-this.imageAnchorY_;if(0!==l||1!=this.imageScale_[0]||1!=this.imageScale_[1]){var p=h+this.imageAnchorX_,f=d+this.imageAnchorY_;Object(K.b)(a,p,f,1,1,l,-p,-f),o.setTransform.apply(o,a),o.translate(p,f),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,h,d,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(o.globalAlpha=s)}},e.prototype.drawText_=function(t,e,n,r){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var i=Object(X.c)(t,e,n,r,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.textRotation_;for(this.textRotateWithView_&&(a+=this.viewRotation_);e<n;e+=r){var s=i[e]+this.textOffsetX_,l=i[e+1]+this.textOffsetY_;if(0!==a||1!=this.textScale_[0]||1!=this.textScale_[1]){var c=Object(K.b)(this.tmpLocalTransform_,s,l,1,1,a,-s,-l);o.setTransform.apply(o,c),o.translate(s,l),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&o.strokeText(this.text_,s,l),this.textFillState_&&o.fillText(this.text_,s,l)}}},e.prototype.moveToLineTo_=function(t,e,n,r,i){var o=this.context_,a=Object(X.c)(t,e,n,r,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);var s=a.length;i&&(s-=2);for(var l=2;l<s;l+=2)o.lineTo(a[l],a[l+1]);return i&&o.closePath(),n},e.prototype.drawRings_=function(t,e,n,r){for(var i=0,o=n.length;i<o;++i)e=this.moveToLineTo_(t,e,n[i],r,!0);return e},e.prototype.drawCircle=function(t){if(Object(w.C)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=Object(Ft.b)(t,this.transform_,this.pixelCoordinates_),n=e[2]-e[0],r=e[3]-e[1],i=Math.sqrt(n*n+r*r),o=this.context_;o.beginPath(),o.arc(e[0],e[1],i,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.setTransform=function(t){this.transform_=t},e.prototype.drawGeometry=function(t){switch(t.getType()){case v.a.POINT:this.drawPoint(t);break;case v.a.LINE_STRING:this.drawLineString(t);break;case v.a.POLYGON:this.drawPolygon(t);break;case v.a.MULTI_POINT:this.drawMultiPoint(t);break;case v.a.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case v.a.MULTI_POLYGON:this.drawMultiPolygon(t);break;case v.a.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case v.a.CIRCLE:this.drawCircle(t)}},e.prototype.drawFeature=function(t,e){var n=e.getGeometryFunction()(t);n&&Object(w.C)(this.extent_,n.getExtent())&&(this.setStyle(e),this.drawGeometry(n))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),n=0,r=e.length;n<r;++n)this.drawGeometry(e[n])},e.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)},e.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)},e.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Object(w.C)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,n=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(n,0,n.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var r=t.getFlatMidpoint();this.drawText_(r,0,2,2)}}},e.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getExtent();if(Object(w.C)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var n=this.context_,r=t.getFlatCoordinates(),i=0,o=t.getEnds(),a=t.getStride();n.beginPath();for(var s=0,l=o.length;s<l;++s)i=this.moveToLineTo_(r,i,o[s],a,!1);n.stroke()}if(""!==this.text_){var c=t.getFlatMidpoints();this.drawText_(c,0,c.length,2)}}},e.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Object(w.C)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var n=t.getFlatInteriorPoint();this.drawText_(n,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Object(w.C)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,n=t.getOrientedFlatCoordinates(),r=0,i=t.getEndss(),o=t.getStride();e.beginPath();for(var a=0,s=i.length;a<s;++a){var l=i[a];r=this.drawRings_(n,r,l,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var c=t.getFlatInteriorPoints();this.drawText_(c,0,c.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,n=this.contextFillState_;n?n.fillStyle!=t.fillStyle&&(n.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=t.lineCap&&(n.lineCap=t.lineCap,e.lineCap=t.lineCap),e.setLineDash&&(Object(C.b)(n.lineDash,t.lineDash)||e.setLineDash(n.lineDash=t.lineDash),n.lineDashOffset!=t.lineDashOffset&&(n.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset)),n.lineJoin!=t.lineJoin&&(n.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),n.lineWidth!=t.lineWidth&&(n.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),n.miterLimit!=t.miterLimit&&(n.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),n.strokeStyle!=t.strokeStyle&&(n.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,n=this.contextTextState_,r=t.textAlign?t.textAlign:E.l;n?(n.font!=t.font&&(n.font=t.font,e.font=t.font),n.textAlign!=r&&(n.textAlign=r,e.textAlign=r),n.textBaseline!=t.textBaseline&&(n.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=r,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:r,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){var n=this;if(t){var r=t.getColor();this.fillState_={fillStyle:Object(x.a)(r||E.b)}}else this.fillState_=null;if(e){var i=e.getColor(),o=e.getLineCap(),a=e.getLineDash(),s=e.getLineDashOffset(),l=e.getLineJoin(),c=e.getWidth(),u=e.getMiterLimit(),h=a||E.e;this.strokeState_={lineCap:void 0!==o?o:E.d,lineDash:1===this.pixelRatio_?h:h.map((function(t){return t*n.pixelRatio_})),lineDashOffset:(s||E.f)*this.pixelRatio_,lineJoin:void 0!==l?l:E.g,lineWidth:(void 0!==c?c:E.h)*this.pixelRatio_,miterLimit:void 0!==u?u:E.i,strokeStyle:Object(x.a)(i||E.k)}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){var e;if(t&&(e=t.getSize())){var n=t.getAnchor(),r=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=n[0]*this.pixelRatio_,this.imageAnchorY_=n[1]*this.pixelRatio_,this.imageHeight_=e[1]*this.pixelRatio_,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScaleArray(),this.imageWidth_=e[0]*this.pixelRatio_}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var n=e.getColor();this.textFillState_={fillStyle:Object(x.a)(n||E.b)}}else this.textFillState_=null;var r=t.getStroke();if(r){var i=r.getColor(),o=r.getLineCap(),a=r.getLineDash(),s=r.getLineDashOffset(),l=r.getLineJoin(),c=r.getWidth(),u=r.getMiterLimit();this.textStrokeState_={lineCap:void 0!==o?o:E.d,lineDash:a||E.e,lineDashOffset:s||E.f,lineJoin:void 0!==l?l:E.g,lineWidth:void 0!==c?c:E.h,miterLimit:void 0!==u?u:E.i,strokeStyle:Object(x.a)(i||E.k)}}else this.textStrokeState_=null;var h=t.getFont(),d=t.getOffsetX(),p=t.getOffsetY(),f=t.getRotateWithView(),m=t.getRotation(),g=t.getScaleArray(),y=t.getText(),v=t.getTextAlign(),_=t.getTextBaseline();this.textState_={font:void 0!==h?h:E.c,textAlign:void 0!==v?v:E.l,textBaseline:void 0!==_?_:E.m},this.text_=void 0!==y?y:"",this.textOffsetX_=void 0!==d?this.pixelRatio_*d:0,this.textOffsetY_=void 0!==p?this.pixelRatio_*p:0,this.textRotateWithView_=void 0!==f&&f,this.textRotation_=void 0!==m?m:0,this.textScale_=[this.pixelRatio_*g[0],this.pixelRatio_*g[1]]}else this.text_=""},e}(b),Ut=n(80),Gt=n(473);var Vt={Point:function(t,e,n,r,i){var o,a=n.getImage(),s=n.getText();i&&(t=i,o=a&&s&&s.getText()?{}:void 0);if(a){if(a.getImageState()!=mt.a.LOADED)return;var l=t.getBuilder(n.getZIndex(),q);l.setImageStyle(a,o),l.drawPoint(e,r)}if(s&&s.getText()){var c=t.getBuilder(n.getZIndex(),Z);c.setTextStyle(s,o),c.drawText(e,r)}},LineString:function(t,e,n,r,i){var o=n.getStroke();if(o){var a=t.getBuilder(n.getZIndex(),H);a.setFillStrokeStyle(null,o),a.drawLineString(e,r)}var s=n.getText();if(s&&s.getText()){var l=(i||t).getBuilder(n.getZIndex(),Z);l.setTextStyle(s),l.drawText(e,r)}},Polygon:function(t,e,n,r,i){var o=n.getFill(),a=n.getStroke();if(o||a){var s=t.getBuilder(n.getZIndex(),W);s.setFillStrokeStyle(o,a),s.drawPolygon(e,r)}var l=n.getText();if(l&&l.getText()){var c=(i||t).getBuilder(n.getZIndex(),Z);c.setTextStyle(l),c.drawText(e,r)}},MultiPoint:function(t,e,n,r,i){var o,a=n.getImage(),s=n.getText();i&&(t=i,o=a&&s&&s.getText()?{}:void 0);if(a){if(a.getImageState()!=mt.a.LOADED)return;var l=t.getBuilder(n.getZIndex(),q);l.setImageStyle(a,o),l.drawMultiPoint(e,r)}if(s&&s.getText()){var c=(i||t).getBuilder(n.getZIndex(),Z);c.setTextStyle(s,o),c.drawText(e,r)}},MultiLineString:function(t,e,n,r,i){var o=n.getStroke();if(o){var a=t.getBuilder(n.getZIndex(),H);a.setFillStrokeStyle(null,o),a.drawMultiLineString(e,r)}var s=n.getText();if(s&&s.getText()){var l=(i||t).getBuilder(n.getZIndex(),Z);l.setTextStyle(s),l.drawText(e,r)}},MultiPolygon:function(t,e,n,r,i){var o=n.getFill(),a=n.getStroke();if(a||o){var s=t.getBuilder(n.getZIndex(),W);s.setFillStrokeStyle(o,a),s.drawMultiPolygon(e,r)}var l=n.getText();if(l&&l.getText()){var c=(i||t).getBuilder(n.getZIndex(),Z);c.setTextStyle(l),c.drawText(e,r)}},GeometryCollection:function(t,e,n,r,i){var o,a,s=e.getGeometriesArray();for(o=0,a=s.length;o<a;++o){(0,Vt[s[o].getType()])(t,s[o],n,r,i)}},Circle:function(t,e,n,r,i){var o=n.getFill(),a=n.getStroke();if(o||a){var s=t.getBuilder(n.getZIndex(),G);s.setFillStrokeStyle(o,a),s.drawCircle(e,r)}var l=n.getText();if(l&&l.getText()){var c=(i||t).getBuilder(n.getZIndex(),Z);c.setTextStyle(l),c.drawText(e,r)}}};function qt(t,e){var n=function(t,e){return.5*t/e}(t,e);return n*n}function Ht(t,e,n,r,i,o,a){var s=!1,l=n.getImage();if(l){var c=l.getImageState();c==mt.a.LOADED||c==mt.a.ERROR?l.unlistenImageChange(i):(c==mt.a.IDLE&&l.load(),c=l.getImageState(),l.listenImageChange(i),s=!0)}return function(t,e,n,r,i,o){var a=n.getGeometryFunction()(e);if(!a)return;var s=a.simplifyTransformed(r,i);if(n.getRenderer())!function t(e,n,r,i){if(n.getType()==v.a.GEOMETRY_COLLECTION){for(var o=n.getGeometries(),a=0,s=o.length;a<s;++a)t(e,o[a],r,i);return}e.getBuilder(r.getZIndex(),V).drawCustom(n,i,r.getRenderer(),r.getHitDetectionRenderer())}(t,s,n,e);else{(0,Vt[s.getType()])(t,s,n,e,o)}}(t,e,n,r,o,a),s}var Wt=n(32),Zt=n(47),$t=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Kt={image:[W,G,H,q,Z],hybrid:[W,H],vector:[]},Yt={hybrid:[q,Z,V],vector:[W,G,H,q,Z,V]},Xt=function(t){function e(e){var n=t.call(this,e)||this;return n.boundHandleStyleImageChange_=n.handleStyleImageChange_.bind(n),n.dirty_=!1,n.renderedLayerRevision_,n.renderedPixelToCoordinateTransform_=null,n.renderedRotation_,n.tmpTransform_=Object(K.c)(),n}return $t(e,t),e.prototype.prepareTile=function(t,e,n){var r,i=t.getState();return i!==Tt.a.LOADED&&i!==Tt.a.ERROR||(this.updateExecutorGroup_(t,e,n),this.tileImageNeedsRender_(t)&&(r=!0)),r},e.prototype.getTile=function(e,n,r,i){var o=i.pixelRatio,a=i.viewState,s=a.resolution,l=a.projection,c=this.getLayer(),u=c.getSource().getTile(e,n,r,o,l),h=i.viewHints,d=!(h[jt.a.ANIMATING]||h[jt.a.INTERACTING]);return!d&&u.wantedResolution||(u.wantedResolution=s),this.prepareTile(u,o,l)&&(d||Date.now()-i.time<8)&&c.getRenderMode()!==Nt&&this.renderTileImage_(u,i),t.prototype.getTile.call(this,e,n,r,i)},e.prototype.isDrawableTile=function(e){var n=this.getLayer();return t.prototype.isDrawableTile.call(this,e)&&(n.getRenderMode()===Nt?Object(N.c)(n)in e.executorGroups:e.hasContext(n))},e.prototype.getTileImage=function(t){return t.getImage(this.getLayer())},e.prototype.prepareFrame=function(e){var n=this.getLayer().getRevision();return this.renderedLayerRevision_!=n&&(this.renderedTiles.length=0),this.renderedLayerRevision_=n,t.prototype.prepareFrame.call(this,e)},e.prototype.updateExecutorGroup_=function(t,e,n){var r=this.getLayer(),i=r.getRevision(),o=r.getRenderOrder()||null,a=t.wantedResolution,s=t.getReplayState(r);if(s.dirty||s.renderedResolution!==a||s.renderedRevision!=i||s.renderedRenderOrder!=o){var l=r.getSource(),c=r.getDeclutter(),u=l.getTileGrid(),h=l.getTileGridForProjection(n).getTileCoordExtent(t.wrappedTileCoord),d=l.getSourceTiles(e,n,t),p=Object(N.c)(r);delete t.hitDetectionImageData[p],t.executorGroups[p]=[],c&&(t.declutterExecutorGroups[p]=[]);for(var f=function(n,i){var f=d[n];if(f.getState()!=Tt.a.LOADED)return"continue";var g=f.tileCoord,y=u.getTileCoordExtent(g),v=Object(w.y)(h,y),_=Object(w.c)(v,r.getRenderBuffer()*a,m.tmpExtent),b=Object(w.o)(y,v)?null:_;s.dirty=!1;var x=new U(0,_,a,e),E=c?new U(0,v,a,e):void 0,C=qt(a,e),S=function(t){var e,n=t.getStyleFunction()||r.getStyleFunction();if(n&&(e=n(t,a)),e){var i=this.renderFeature(t,C,e,x,E);this.dirty_=this.dirty_||i,s.dirty=s.dirty||i}},T=f.getFeatures();o&&o!==s.renderedRenderOrder&&T.sort(o);for(var O=0,I=T.length;O<I;++O){var A=T[O];b&&!Object(w.C)(b,A.getGeometry().getExtent())||S.call(m,A)}var M=x.finish(),k=r.getRenderMode()!==Nt&&c&&1===d.length?null:v,P=new pt(k,a,e,l.getOverlaps(),M,r.getRenderBuffer());if(t.executorGroups[p].push(P),E){var D=new pt(null,a,e,l.getOverlaps(),E.finish(),r.getRenderBuffer());t.declutterExecutorGroups[p].push(D)}},m=this,g=0,y=d.length;g<y;++g)f(g);s.renderedRevision=i,s.renderedRenderOrder=o,s.renderedResolution=a}},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,r,i){var o=e.viewState.resolution,a=e.viewState.rotation;n=null==n?0:n;var s=this.getLayer(),l=s.getSource().getTileGridForProjection(e.viewState.projection),c=Object(w.b)([t]);Object(w.c)(c,o*n,c);for(var u,h={},d=function(t,e,n){var o=t.getId();void 0===o&&(o=Object(N.c)(t));var a=h[o];if(a){if(!0!==a&&n<a.distanceSq){if(0===n)return h[o]=!0,i.splice(i.lastIndexOf(a),1),r(t,s,e);a.geometry=e,a.distanceSq=n}}else{if(0===n)return h[o]=!0,r(t,s,e);i.push(h[o]={feature:t,layer:s,geometry:e,distanceSq:n,callback:r})}},p=this.renderedTiles,f=function(r,i){var h=p[r],f=l.getTileCoordExtent(h.wrappedTileCoord);if(!Object(w.C)(f,c))return"continue";var m=Object(N.c)(s),g=[h.executorGroups[m]],y=h.declutterExecutorGroups[m];y&&g.push(y),g.some((function(r){for(var i=r===y?e.declutterTree.all().map((function(t){return t.value})):null,s=0,l=r.length;s<l;++s){var c=r[s];if(u=c.forEachFeatureAtCoordinate(t,o,a,n,d,i))return!0}}))},m=0,g=p.length;!u&&m<g;++m)f(m);return u},e.prototype.getFeatures=function(t){return new Promise(function(e,n){for(var r,i=this.getLayer(),o=Object(N.c)(i),a=i.getSource(),s=this.renderedProjection,l=s.getExtent(),c=this.renderedResolution,u=a.getTileGridForProjection(s),h=Object(K.a)(this.renderedPixelToCoordinateTransform_,t.slice()),d=u.getTileCoordForCoordAndResolution(h,c),p=0,f=this.renderedTiles.length;p<f;++p)if(d.toString()===this.renderedTiles[p].tileCoord.toString()){if((r=this.renderedTiles[p]).getState()===Tt.a.LOADED){var m=u.getTileCoordExtent(r.tileCoord);a.getWrapX()&&s.canWrapX()&&!Object(w.g)(l,m)&&Object(Zt.f)(h,s);break}r=void 0}if(!r||r.loadingSourceTiles>0)e([]);else{var g=u.getTileCoordExtent(r.wrappedTileCoord),y=Object(w.z)(g),_=[(h[0]-y[0])/c,(y[1]-h[1])/c],b=r.getSourceTiles().reduce((function(t,e){return t.concat(e.getFeatures())}),[]),x=r.hitDetectionImageData[o];if(!x&&!this.animatingOrInteracting_){var E=Object(Wt.c)(u.getTileSize(u.getZForResolution(c))),S=this.renderedRotation_;x=function(t,e,n,r,i,o,a){var s=.5*t[0],l=.5*t[1],c=Object(ct.a)(s,l);c.imageSmoothingEnabled=!1;for(var u=c.canvas,h=new Bt(c,.5,i,null,a),d=n.length,p=Math.floor(16777215/d),f={},m=1;m<=d;++m){var g=n[m-1],y=g.getStyleFunction()||r;if(r){var _=y(g,o);if(_){Array.isArray(_)||(_=[_]);for(var b="#"+("000000"+(m*p).toString(16)).slice(-6),x=0,E=_.length;x<E;++x){var S=_[x],T=S.getGeometryFunction()(g);if(T&&Object(w.C)(i,T.getExtent())){var O=S.clone(),I=O.getFill();I&&I.setColor(b);var A=O.getStroke();A&&(A.setColor(b),A.setLineDash(null)),O.setText(void 0);var M=S.getImage();if(M&&0!==M.getOpacity()){var k=M.getImageSize();if(!k)continue;var P=Object(ct.a)(k[0],k[1],void 0,{alpha:!1}),D=P.canvas;P.fillStyle=b,P.fillRect(0,0,D.width,D.height),O.setImage(new Gt.a({img:D,imgSize:k,anchor:M.getAnchor(),anchorXUnits:Ut.a.PIXELS,anchorYUnits:Ut.a.PIXELS,offset:M.getOrigin(),opacity:1,size:M.getSize(),scale:M.getScale(),rotation:M.getRotation(),rotateWithView:M.getRotateWithView()}))}var R=O.getZIndex()||0;(j=f[R])||(j={},f[R]=j,j[v.a.POLYGON]=[],j[v.a.CIRCLE]=[],j[v.a.LINE_STRING]=[],j[v.a.POINT]=[]),j[T.getType().replace("Multi","")].push(T,O)}}}}}for(var L=Object.keys(f).map(Number).sort(C.f),N=(m=0,L.length);m<N;++m){var j=f[L[m]];for(var F in j){var z=j[F];for(x=0,E=z.length;x<E;x+=2){h.setStyle(z[x+1]);for(var B=0,U=e.length;B<U;++B)h.setTransform(e[B]),h.drawGeometry(z[x])}}}return c.getImageData(0,0,u.width,u.height)}(E,[this.getRenderTransform(u.getTileCoordCenter(r.wrappedTileCoord),c,0,.5,.5*E[0],.5*E[1],0)],b,i.getStyleFunction(),u.getTileCoordExtent(r.wrappedTileCoord),r.getReplayState(i).renderedResolution,S),r.hitDetectionImageData[o]=x}e(function(t,e,n){var r=[];if(n){var i=Math.floor(.5*Math.round(t[0])),o=Math.floor(.5*Math.round(t[1])),a=4*(Object(Y.b)(i,0,n.width-1)+Object(Y.b)(o,0,n.height-1)*n.width),s=n.data[a],l=n.data[a+1],c=n.data[a+2]+256*(l+256*s),u=Math.floor(16777215/e.length);c&&c%u==0&&r.push(e[c/u-1])}return r}(_,b,x))}}.bind(this))},e.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&void 0!==this.renderedLayerRevision_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.renderDeclutter=function(t){var e=this.context,n=e.globalAlpha;e.globalAlpha=this.getLayer().getOpacity();for(var r=t.viewHints,i=!(r[jt.a.ANIMATING]||r[jt.a.INTERACTING]),o=this.renderedTiles,a=0,s=o.length;a<s;++a){var l=o[a],c=l.declutterExecutorGroups[Object(N.c)(this.getLayer())];if(c)for(var u=c.length-1;u>=0;--u)c[u].execute(this.context,1,this.getTileRenderTransform(l,t),t.viewState.rotation,i,void 0,t.declutterTree)}e.globalAlpha=n},e.prototype.getTileRenderTransform=function(t,e){var n=e.pixelRatio,r=e.viewState,i=r.center,o=r.resolution,a=r.rotation,s=e.size,l=Math.round(s[0]*n),c=Math.round(s[1]*n),u=this.getLayer().getSource().getTileGridForProjection(e.viewState.projection),h=t.tileCoord,d=u.getTileCoordExtent(t.wrappedTileCoord),p=u.getTileCoordExtent(h,this.tmpExtent)[0]-d[0];return Object(K.e)(Object(K.g)(this.inversePixelTransform.slice(),1/n,1/n),this.getRenderTransform(i,o,a,n,l,c,p))},e.prototype.renderFrame=function(e,n){var r=e.viewHints,i=!(r[jt.a.ANIMATING]||r[jt.a.INTERACTING]);t.prototype.renderFrame.call(this,e,n),this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice(),this.renderedRotation_=e.viewState.rotation;var o=this.getLayer(),a=o.getRenderMode(),s=this.context,l=s.globalAlpha;s.globalAlpha=o.getOpacity();for(var c=Yt[a],u=e.viewState.rotation,h=this.renderedTiles,d=[],p=[],f=h.length-1;f>=0;--f)for(var m=h[f],g=this.getTileRenderTransform(m,e),y=m.executorGroups[Object(N.c)(o)],v=!1,_=0,b=y.length;_<b;++_){var x=y[_];if(x.hasExecutors(c)){var w=m.tileCoord[0],E=void 0;if(!v&&(E=x.getClipCoords(g))){s.save();for(var C=0,S=d.length;C<S;++C){var T=d[C];w<p[C]&&(s.beginPath(),s.moveTo(E[0],E[1]),s.lineTo(E[2],E[3]),s.lineTo(E[4],E[5]),s.lineTo(E[6],E[7]),s.moveTo(T[6],T[7]),s.lineTo(T[4],T[5]),s.lineTo(T[2],T[3]),s.lineTo(T[0],T[1]),s.clip())}}x.execute(s,1,g,u,i,c),!v&&E&&(s.restore(),d.push(E),p.push(w),v=!0)}}return s.globalAlpha=l,this.container},e.prototype.renderFeature=function(t,e,n,r,i){if(!n)return!1;var o=!1;if(Array.isArray(n))for(var a=0,s=n.length;a<s;++a)o=Ht(r,t,n[a],e,this.boundHandleStyleImageChange_,void 0,i)||o;else o=Ht(r,t,n,e,this.boundHandleStyleImageChange_,void 0,i);return o},e.prototype.tileImageNeedsRender_=function(t){var e=this.getLayer();if(e.getRenderMode()===Nt)return!1;var n=t.getReplayState(e),r=e.getRevision(),i=t.wantedResolution;return n.renderedTileResolution!==i||n.renderedTileRevision!==r},e.prototype.renderTileImage_=function(t,e){var n=this.getLayer(),r=t.getReplayState(n),i=n.getRevision(),o=t.executorGroups[Object(N.c)(n)];r.renderedTileRevision=i;var a=t.wrappedTileCoord,s=a[0],l=n.getSource(),c=e.pixelRatio,u=e.viewState.projection,h=l.getTileGridForProjection(u),d=h.getResolution(t.tileCoord[0]),p=e.pixelRatio/t.wantedResolution*d,f=h.getResolution(s),m=t.getContext(n);c=Math.round(Math.max(c,p/c));var g=l.getTilePixelSize(s,c,u);m.canvas.width=g[0],m.canvas.height=g[1];var y=c/p;if(1!==y){var v=Object(K.f)(this.tmpTransform_);Object(K.g)(v,y,y),m.setTransform.apply(m,v)}var _=h.getTileCoordExtent(a,this.tmpExtent),b=p/f,x=Object(K.f)(this.tmpTransform_);Object(K.g)(x,b,-b),Object(K.j)(x,-_[0],-_[3]);for(var w=0,E=o.length;w<E;++w){o[w].execute(m,y,x,0,!0,Kt[n.getRenderMode()])}r.renderedTileResolution=t.wantedResolution},e}(Dt),Jt="preload",Qt="useInterimTilesOnError",te=n(16),ee=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ne=function(t){function e(e){var n=this,r=e||{},i=Object(s.a)({},r);delete i.preload,delete i.useInterimTilesOnError,(n=t.call(this,i)||this).on,n.once,n.un,r.renderMode===Rt&&(console.warn('renderMode: "image" is deprecated. Option ignored.'),r.renderMode=void 0);var o=r.renderMode||Lt;return Object(te.a)(o==Lt||o==Nt,28),n.renderMode_=o,n.setPreload(r.preload?r.preload:0),n.setUseInterimTilesOnError(void 0===r.useInterimTilesOnError||r.useInterimTilesOnError),n.getBackground,n.setBackground,n}return ee(e,t),e.prototype.createRenderer=function(){return new Xt(this)},e.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},e.prototype.getRenderMode=function(){return this.renderMode_},e.prototype.getPreload=function(){return this.get(Jt)},e.prototype.getUseInterimTilesOnError=function(){return this.get(Qt)},e.prototype.setPreload=function(t){this.set(Jt,t)},e.prototype.setUseInterimTilesOnError=function(t){this.set(Qt,t)},e}(h);e.a=ne},function(t,e,n){"use strict";var r,i=n(14),o=n(65),a=n(17),s=n(9),l=n(48),c=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(t){function e(e,n,r){var i=t.call(this)||this,o=r||{};return i.tileCoord=e,i.state=n,i.interimTile=null,i.key="",i.transition_=void 0===o.transition?250:o.transition,i.transitionStarts_={},i.interpolate=!!o.interpolate,i}return c(e,t),e.prototype.changed=function(){this.dispatchEvent(i.a.CHANGE)},e.prototype.release=function(){},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==a.a.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(t.getState()==a.a.LOADED){t.interimTile=null;break}t.getState()==a.a.LOADING?e=t:t.getState()==a.a.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){if(this.state!==a.a.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},e.prototype.load=function(){Object(s.b)()},e.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var n=this.transitionStarts_[t];if(n){if(-1===n)return 1}else n=e,this.transitionStarts_[t]=n;var r=e-n+1e3/60;return r>=this.transition_?1:Object(l.a)(r/this.transition_)},e.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(o.a),h=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),d=function(t){function e(e,n,r,i,o,a){var s=t.call(this,e,n,a)||this;return s.extent=null,s.format_=i,s.features_=null,s.loader_,s.projection=null,s.resolution,s.tileLoadFunction_=o,s.url_=r,s.key=r,s}return h(e,t),e.prototype.getFormat=function(){return this.format_},e.prototype.getFeatures=function(){return this.features_},e.prototype.load=function(){this.state==a.a.IDLE&&(this.setState(a.a.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))},e.prototype.onLoad=function(t,e){this.setFeatures(t)},e.prototype.onError=function(){this.setState(a.a.ERROR)},e.prototype.setFeatures=function(t){this.features_=t,this.setState(a.a.LOADED)},e.prototype.setLoader=function(t){this.loader_=t},e}(u),p=n(16),f=function(){function t(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},t.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},t.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},t.prototype.forEach=function(t){for(var e=this.oldest_;e;)t(e.value_,e.key_,this),e=e.newer},t.prototype.get=function(t,e){var n=this.entries_[t];return Object(p.a)(void 0!==n,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_},t.prototype.remove=function(t){var e=this.entries_[t];return Object(p.a)(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},t.prototype.getCount=function(){return this.count_},t.prototype.getKeys=function(){var t,e=new Array(this.count_),n=0;for(t=this.newest_;t;t=t.older)e[n++]=t.key_;return e},t.prototype.getValues=function(){var t,e=new Array(this.count_),n=0;for(t=this.newest_;t;t=t.older)e[n++]=t.value_;return e},t.prototype.peekLast=function(){return this.oldest_.value_},t.prototype.peekLastKey=function(){return this.oldest_.key_},t.prototype.peekFirstKey=function(){return this.newest_.key_},t.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},t.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},t.prototype.set=function(t,e){Object(p.a)(!(t in this.entries_),16);var n={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_},t.prototype.setSize=function(t){this.highWaterMark=t},t}(),m=n(49),g=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return g(e,t),e.prototype.expireCache=function(t){for(;this.canExpireCache();){if(this.peekLast().getKey()in t)break;this.pop().release()}},e.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=this.peekFirstKey(),e=Object(m.b)(t)[0];this.forEach(function(t){t.tileCoord[0]!==e&&(this.remove(Object(m.d)(t.tileCoord)),t.release())}.bind(this))}},e}(f),v="tileloadstart",_="tileloadend",b="tileloaderror",x=n(52),w=n(46),E=n(69),C=n(12),S=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function T(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}var O=function(t){function e(e){var n=t.call(this)||this;n.projection=Object(C.k)(e.projection),n.attributions_=T(e.attributions),n.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,n.loading=!1,n.state_=void 0!==e.state?e.state:E.a.READY,n.wrapX_=void 0!==e.wrapX&&e.wrapX,n.interpolate_=!!e.interpolate,n.viewResolver=null,n.viewRejector=null;var r=n;return n.viewPromise_=new Promise((function(t,e){r.viewResolver=t,r.viewRejector=e})),n}return S(e,t),e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection},e.prototype.getResolutions=function(){return Object(s.b)()},e.prototype.getView=function(){return this.viewPromise_},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.getInterpolate=function(){return this.interpolate_},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=T(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(w.a),I=n(82),A=n(32),M=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),k=function(t){function e(e){var n=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate})||this;n.on,n.once,n.un,n.opaque_=void 0!==e.opaque&&e.opaque,n.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,n.tileGrid=void 0!==e.tileGrid?e.tileGrid:null;var r=e.tileGrid;return r&&Object(A.c)(r.getTileSize(r.getMinZoom()),[256,256]),n.tileCache=new y(e.cacheSize||0),n.tmpSize=[0,0],n.key_=e.key||"",n.tileOptions={transition:e.transition,interpolate:e.interpolate},n.zDirection=e.zDirection?e.zDirection:0,n}return M(e,t),e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var n=this.getTileCacheForProjection(t);n&&n.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,n,r){var i=this.getTileCacheForProjection(t);if(!i)return!1;for(var o,s,l,c=!0,u=n.minX;u<=n.maxX;++u)for(var h=n.minY;h<=n.maxY;++h)s=Object(m.e)(e,u,h),l=!1,i.containsKey(s)&&(l=(o=i.get(s)).getState()===a.a.LOADED)&&(l=!1!==r(o)),l||(c=!1);return c},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,e,n,r,i){return Object(s.b)()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:Object(I.d)(t)},e.prototype.getTileCacheForProjection=function(t){return Object(p.a)(Object(C.g)(this.getProjection(),t),68),this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,e,n){var r=this.getTileGridForProjection(n),i=this.getTilePixelRatio(e),o=Object(A.c)(r.getTileSize(t),this.tmpSize);return 1==i?o:Object(A.b)(o,i,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var n=void 0!==e?e:this.getProjection(),r=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(t=Object(I.e)(r,t,n)),Object(m.g)(t,r)?t:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},e.prototype.updateCacheSize=function(t,e){var n=this.getTileCacheForProjection(e);t>n.highWaterMark&&(n.highWaterMark=t)},e.prototype.useTile=function(t,e,n,r){},e}(O),P=function(t){function e(e,n){var r=t.call(this,e)||this;return r.tile=n,r}return M(e,t),e}(x.a),D=k,R=n(10);function L(t,e){var n=/\{z\}/g,r=/\{x\}/g,i=/\{y\}/g,o=/\{-y\}/g;return function(a,s,l){return a?t.replace(n,a[0].toString()).replace(r,a[1].toString()).replace(i,a[2].toString()).replace(o,(function(){var t=a[0],n=e.getFullTileRange(t);return Object(p.a)(n,55),(n.getHeight()-a[2]-1).toString()})):void 0}}function N(t,e){for(var n=t.length,r=new Array(n),i=0;i<n;++i)r[i]=L(t[i],e);return function(t){if(1===t.length)return t[0];return function(e,n,r){if(e){var i=Object(m.f)(e),o=Object(R.f)(i,t.length);return t[o](e,n,r)}}}(r)}var j=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),F=function(t){function e(n){var r=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,opaque:n.opaque,projection:n.projection,state:n.state,tileGrid:n.tileGrid,tilePixelRatio:n.tilePixelRatio,wrapX:n.wrapX,transition:n.transition,interpolate:n.interpolate,key:n.key,attributionsCollapsible:n.attributionsCollapsible,zDirection:n.zDirection})||this;return r.generateTileUrlFunction_=r.tileUrlFunction===e.prototype.tileUrlFunction,r.tileLoadFunction=n.tileLoadFunction,n.tileUrlFunction&&(r.tileUrlFunction=n.tileUrlFunction),r.urls=null,n.urls?r.setUrls(n.urls):n.url&&r.setUrl(n.url),r.tileLoadingKeys_={},r}return j(e,t),e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var e,n=t.target,r=Object(s.c)(n),i=n.getState();i==a.a.LOADING?(this.tileLoadingKeys_[r]=!0,e=v):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],e=i==a.a.ERROR?b:i==a.a.LOADED?_:void 0),null!=e&&this.dispatchEvent(new P(e,n))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},e.prototype.setUrl=function(t){var e=function(t){var e=[],n=/\{([a-z])-([a-z])\}/.exec(t);if(n){var r=n[1].charCodeAt(0),i=n[2].charCodeAt(0),o=void 0;for(o=r;o<=i;++o)e.push(t.replace(n[0],String.fromCharCode(o)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t)){for(var a=parseInt(n[2],10),s=parseInt(n[1],10);s<=a;s++)e.push(t.replace(n[0],s.toString()));return e}return e.push(t),e}(t);this.urls=e,this.setUrls(e)},e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(N(t,this.tileGrid),e):this.setKey(e)},e.prototype.tileUrlFunction=function(t,e,n){},e.prototype.useTile=function(t,e,n){var r=Object(m.e)(t,e,n);this.tileCache.containsKey(r)&&this.tileCache.get(r)},e}(D),z=n(29),B=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),U=[],G=function(t){function e(e,n,r,i){var o=t.call(this,e,n,{transition:0})||this;return o.context_={},o.executorGroups={},o.declutterExecutorGroups={},o.loadingSourceTiles=0,o.hitDetectionImageData={},o.replayState_={},o.sourceTiles=[],o.errorTileKeys={},o.wantedResolution,o.getSourceTiles=i.bind(void 0,o),o.wrappedTileCoord=r,o}return B(e,t),e.prototype.getContext=function(t){var e=Object(s.c)(t);return e in this.context_||(this.context_[e]=Object(z.a)(1,1,U)),this.context_[e]},e.prototype.hasContext=function(t){return Object(s.c)(t)in this.context_},e.prototype.getImage=function(t){return this.hasContext(t)?this.getContext(t).canvas:null},e.prototype.getReplayState=function(t){var e=Object(s.c)(t);return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[e]},e.prototype.load=function(){this.getSourceTiles()},e.prototype.release=function(){for(var e in this.context_)U.push(this.context_[e].canvas),delete this.context_[e];t.prototype.release.call(this)},e}(u),V=n(4),q=n(20),H=n(88),W=(n(27),!1);function Z(t,e,n,r,i,o,a){var s=new XMLHttpRequest;s.open("GET","function"==typeof t?t(n,r,i):t,!0),e.getType()==H.a.ARRAY_BUFFER&&(s.responseType="arraybuffer"),s.withCredentials=W,s.onload=function(t){if(!s.status||s.status>=200&&s.status<300){var r=e.getType(),l=void 0;r==H.a.JSON||r==H.a.TEXT?l=s.responseText:r==H.a.XML?(l=s.responseXML)||(l=(new DOMParser).parseFromString(s.responseText,"application/xml")):r==H.a.ARRAY_BUFFER&&(l=s.response),l?o(e.readFeatures(l,{extent:n,featureProjection:i}),e.readProjection(l)):a()}else a()},s.onerror=a,s.send()}var $=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),K=function(t){function e(e){var n=this,r=e.projection||"EPSG:3857",i=e.extent||Object(I.c)(r),o=e.tileGrid||Object(I.b)({extent:i,maxResolution:e.maxResolution,maxZoom:void 0!==e.maxZoom?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});return(n=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,opaque:!1,projection:r,state:e.state,tileGrid:o,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Y,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:void 0===e.zDirection?1:e.zDirection})||this).format_=e.format?e.format:null,n.sourceTileCache=new y(n.tileCache.highWaterMark),n.overlaps_=null==e.overlaps||e.overlaps,n.tileClass=e.tileClass?e.tileClass:d,n.tileGrids_={},n}return $(e,t),e.prototype.getFeaturesInExtent=function(t){var e=[],n=this.tileCache;if(0===n.getCount())return e;var r=Object(m.b)(n.peekFirstKey())[0],i=this.tileGrid;return n.forEach((function(n){if(n.tileCoord[0]===r&&n.getState()===a.a.LOADED)for(var o=n.getSourceTiles(),s=0,l=o.length;s<l;++s){var c=o[s],u=c.tileCoord;if(Object(V.C)(t,i.getTileCoordExtent(u))){var h=c.getFeatures();if(h)for(var d=0,p=h.length;d<p;++d){var f=h[d],m=f.getGeometry();Object(V.C)(t,m.getExtent())&&e.push(f)}}}})),e},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.clear=function(){this.tileCache.clear(),this.sourceTileCache.clear()},e.prototype.expireCache=function(e,n){var r=this.getTileCacheForProjection(e),i=Object.keys(n).reduce((function(t,e){var n=Object(m.c)(e);if(r.containsKey(n))for(var i=r.get(n).sourceTiles,o=0,a=i.length;o<a;++o)t[i[o].getKey()]=!0;return t}),{});t.prototype.expireCache.call(this,e,n),this.sourceTileCache.expireCache(i)},e.prototype.getSourceTiles=function(t,e,n){var r=this;if(n.getState()===a.a.IDLE){n.setState(a.a.LOADING);var o=n.wrappedTileCoord,s=this.getTileGridForProjection(e),l=s.getTileCoordExtent(o),c=o[0],u=s.getResolution(c);Object(V.c)(l,-u,l);var h=this.tileGrid,d=h.getExtent();d&&Object(V.y)(l,d,l);var p=h.getZForResolution(u,1);h.forEachTileCoord(l,p,(function(o){var s=r.tileUrlFunction(o,t,e),l=r.sourceTileCache.containsKey(s)?r.sourceTileCache.get(s):new r.tileClass(o,s?a.a.IDLE:a.a.EMPTY,s,r.format_,r.tileLoadFunction);n.sourceTiles.push(l);var c=l.getState();if(c<a.a.LOADED){var u=function(t){r.handleTileChange(t);var e=l.getState();if(e===a.a.LOADED||e===a.a.ERROR){var o=l.getKey();o in n.errorTileKeys?l.getState()===a.a.LOADED&&delete n.errorTileKeys[o]:n.loadingSourceTiles--,e===a.a.ERROR?n.errorTileKeys[o]=!0:l.removeEventListener(i.a.CHANGE,u),0===n.loadingSourceTiles&&n.setState(Object(q.d)(n.errorTileKeys)?a.a.LOADED:a.a.ERROR)}};l.addEventListener(i.a.CHANGE,u),n.loadingSourceTiles++}c===a.a.IDLE&&(l.extent=h.getTileCoordExtent(o),l.projection=e,l.resolution=h.getResolution(o[0]),r.sourceTileCache.set(s,l),l.load())})),n.loadingSourceTiles||n.setState(n.sourceTiles.some((function(t){return t.getState()===a.a.ERROR}))?a.a.ERROR:a.a.LOADED)}return n.sourceTiles},e.prototype.getTile=function(t,e,n,r,i){var o,s=Object(m.e)(t,e,n),l=this.getKey();if(this.tileCache.containsKey(s)&&(o=this.tileCache.get(s)).key===l)return o;var c=[t,e,n],u=this.getTileCoordForTileUrlFunction(c,i),h=this.getTileGrid().getExtent(),d=this.getTileGridForProjection(i);if(u&&h){var p=d.getTileCoordExtent(u);Object(V.c)(p,-d.getResolution(t),p),Object(V.C)(h,p)||(u=null)}var f=!0;if(null!==u){var g=this.tileGrid,y=d.getResolution(t),v=g.getZForResolution(y,1),_=d.getTileCoordExtent(u);Object(V.c)(_,-y,_),g.forEachTileCoord(_,v,function(t){f=f&&!this.tileUrlFunction(t,r,i)}.bind(this))}var b=new G(c,f?a.a.EMPTY:a.a.IDLE,u,this.getSourceTiles.bind(this,r,i));return b.key=l,o?(b.interimTile=o,b.refreshInterimChain(),this.tileCache.replace(s,b)):this.tileCache.set(s,b),b},e.prototype.getTileGridForProjection=function(t){var e=t.getCode(),n=this.tileGrids_[e];if(!n){var r=this.tileGrid;n=Object(I.a)(t,void 0,r?r.getTileSize(r.getMinZoom()):void 0),this.tileGrids_[e]=n}return n},e.prototype.getTilePixelRatio=function(t){return t},e.prototype.getTilePixelSize=function(t,e,n){var r=this.getTileGridForProjection(n),i=Object(A.c)(r.getTileSize(t),this.tmpSize);return[Math.round(i[0]*e),Math.round(i[1]*e)]},e.prototype.updateCacheSize=function(e,n){t.prototype.updateCacheSize.call(this,2*e,n),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(n).highWaterMark},e}(F);e.a=K;function Y(t,e){t.setLoader((function(n,r,i){Z(e,t.getFormat(),n,r,i,t.onLoad.bind(t),t.onError.bind(t))}))}},function(t,e,n){"use strict";var r=n(28),i=n(9),o=n(20),a=n(12),s=function(){function t(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}return t.prototype.getReadOptions=function(t,e){var n;if(e){var i=e.dataProjection?Object(a.k)(e.dataProjection):this.readProjection(t);e.extent&&i&&i.getUnits()===r.b.TILE_PIXELS&&(i=Object(a.k)(i)).setWorldExtent(e.extent),n={dataProjection:i,featureProjection:e.featureProjection}}return this.adaptOptions(n)},t.prototype.adaptOptions=function(t){return Object(o.a)({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},t.prototype.getType=function(){return Object(i.b)()},t.prototype.readFeature=function(t,e){return Object(i.b)()},t.prototype.readFeatures=function(t,e){return Object(i.b)()},t.prototype.readGeometry=function(t,e){return Object(i.b)()},t.prototype.readProjection=function(t){return Object(i.b)()},t.prototype.writeFeature=function(t,e){return Object(i.b)()},t.prototype.writeFeatures=function(t,e){return Object(i.b)()},t.prototype.writeGeometry=function(t,e){return Object(i.b)()},t}();var l,c=n(88),u=n(22),h=n(7),d=n(53),p=n(54),f=n(4),m=n(58),g=n(66),y=n(19),v=n(154),_=n(36),b=n(83),x=n(86),w=n(156),E=(l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),C=function(t){function e(e,n){var r=t.call(this)||this;return r.flatMidpoint_=null,r.flatMidpointRevision_=-1,r.maxDelta_=-1,r.maxDeltaRevision_=-1,void 0===n||Array.isArray(e[0])?r.setCoordinates(e,n):r.setFlatCoordinates(n,e),r}return E(e,t),e.prototype.appendCoordinate=function(t){this.flatCoordinates?Object(y.c)(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,r){return r<Object(f.e)(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(p.e)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(p.d)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,n,r))},e.prototype.forEachSegment=function(t){return Object(v.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){if(this.layout!=u.a.XYM&&this.layout!=u.a.XYZM)return null;var n=void 0!==e&&e;return Object(b.b)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n)},e.prototype.getCoordinates=function(){return Object(_.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return Object(b.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)},e.prototype.getLength=function(){return Object(w.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[];return n.length=Object(g.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,u.a.XY)},e.prototype.getType=function(){return h.a.LINE_STRING},e.prototype.intersectsExtent=function(t){return Object(x.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(m.b)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(d.a),S=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),T=function(t){function e(e,n,r){var i=t.call(this)||this;if(i.ends_=[],i.maxDelta_=-1,i.maxDeltaRevision_=-1,Array.isArray(e[0]))i.setCoordinates(e,n);else if(void 0!==n&&r)i.setFlatCoordinates(n,e),i.ends_=r;else{for(var o=i.getLayout(),a=e,s=[],l=[],c=0,u=a.length;c<u;++c){var h=a[c];0===c&&(o=h.getLayout()),Object(y.c)(s,h.getFlatCoordinates()),l.push(s.length)}i.setFlatCoordinates(o,s),i.ends_=l}return i}return S(e,t),e.prototype.appendLineString=function(t){this.flatCoordinates?Object(y.c)(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,r){return r<Object(f.e)(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(p.a)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(p.b)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,n,r))},e.prototype.getCoordinateAtM=function(t,e,n){if(this.layout!=u.a.XYM&&this.layout!=u.a.XYZM||0===this.flatCoordinates.length)return null;var r=void 0!==e&&e,i=void 0!==n&&n;return Object(b.c)(this.flatCoordinates,0,this.ends_,this.stride,t,r,i)},e.prototype.getCoordinates=function(){return Object(_.b)(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new C(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,n=this.layout,r=[],i=0,o=0,a=e.length;o<a;++o){var s=e[o],l=new C(t.slice(i,s),n);r.push(l),i=s}return r},e.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,n=0,r=this.ends_,i=this.stride,o=0,a=r.length;o<a;++o){var s=r[o],l=Object(b.a)(e,n,s,i,.5);Object(y.c)(t,l),n=s}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],r=[];return n.length=Object(g.b)(this.flatCoordinates,0,this.ends_,this.stride,t,n,0,r),new e(n,u.a.XY,r)},e.prototype.getType=function(){return h.a.MULTI_LINE_STRING},e.prototype.intersectsExtent=function(t){return Object(x.b)(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=Object(m.c)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()},e}(d.a),O=n(95),I=n(10),A=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),M=function(t){function e(e,n){var r=t.call(this)||this;return n&&!Array.isArray(e[0])?r.setFlatCoordinates(n,e):r.setCoordinates(e,n),r}return A(e,t),e.prototype.appendPoint=function(t){this.flatCoordinates?Object(y.c)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,r){if(r<Object(f.e)(this.getExtent(),t,e))return r;for(var i=this.flatCoordinates,o=this.stride,a=0,s=i.length;a<s;a+=o){var l=Object(I.g)(t,e,i[a],i[a+1]);if(l<r){r=l;for(var c=0;c<o;++c)n[c]=i[a+c];n.length=o}}return r},e.prototype.getCoordinates=function(){return Object(_.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new O.a(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,n=this.stride,r=[],i=0,o=t.length;i<o;i+=n){var a=new O.a(t.slice(i,i+n),e);r.push(a)}return r},e.prototype.getType=function(){return h.a.MULTI_POINT},e.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,n=this.stride,r=0,i=e.length;r<i;r+=n){var o=e[r],a=e[r+1];if(Object(f.h)(t,o,a))return!0}return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(m.b)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(d.a),k=n(71),P=n(94),D=n(78),R=n(107),L=n(155),N=n(68),j=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),F=function(t){function e(e,n,r){var i=t.call(this)||this;if(i.endss_=[],i.flatInteriorPointsRevision_=-1,i.flatInteriorPoints_=null,i.maxDelta_=-1,i.maxDeltaRevision_=-1,i.orientedRevision_=-1,i.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){for(var o=i.getLayout(),a=e,s=[],l=[],c=0,u=a.length;c<u;++c){var h=a[c];0===c&&(o=h.getLayout());for(var d=s.length,p=h.getEnds(),f=0,m=p.length;f<m;++f)p[f]+=d;Object(y.c)(s,h.getFlatCoordinates()),l.push(p)}n=o,e=s,r=l}return void 0!==n&&r?(i.setFlatCoordinates(n,e),i.endss_=r):i.setCoordinates(e,n),i}return j(e,t),e.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var n=this.flatCoordinates.length;Object(y.c)(this.flatCoordinates,t.getFlatCoordinates());for(var r=0,i=(e=t.getEnds().slice()).length;r<i;++r)e[r]+=n}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,n=new Array(t),r=0;r<t;++r)n[r]=this.endss_[r].slice();var i=new e(this.flatCoordinates.slice(),this.layout,n);return i.applyProperties(this),i},e.prototype.closestPointXY=function(t,e,n,r){return r<Object(f.e)(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(p.f)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(p.c)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,n,r))},e.prototype.containsXY=function(t,e){return Object(N.d)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},e.prototype.getArea=function(){return Object(R.c)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),Object(D.e)(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,Object(_.c)(e,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=Object(L.a)(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Object(P.b)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new M(this.getFlatInteriorPoints().slice(),u.a.XYM)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Object(D.c)(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Object(D.e)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],r=[];return n.length=Object(g.d)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),n,0,r),new e(n,u.a.XY,r)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var n=this.endss_[t-1];e=n[n.length-1]}var r=this.endss_[t].slice(),i=r[r.length-1];if(0!==e)for(var o=0,a=r.length;o<a;++o)r[o]-=e;return new k.a(this.flatCoordinates.slice(e,i),this.layout,r)},e.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,n=this.endss_,r=[],i=0,o=0,a=n.length;o<a;++o){var s=n[o].slice(),l=s[s.length-1];if(0!==i)for(var c=0,u=s.length;c<u;++c)s[c]-=i;var h=new k.a(e.slice(i,l),t,s);r.push(h),i=l}return r},e.prototype.getType=function(){return h.a.MULTI_POLYGON},e.prototype.intersectsExtent=function(t){return Object(x.d)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var n=Object(m.d)(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===n.length)this.flatCoordinates.length=0;else{var r=n[n.length-1];this.flatCoordinates.length=0===r.length?0:r[r.length-1]}this.changed()},e}(d.a),z=n(249),B=n.n(z),U=n(75),G=n(193),V=n(16),q=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),H=function(t){function e(e){var n=t.call(this)||this,i=e||{};return n.dataProjection=new U.a({code:"",units:r.b.TILE_PIXELS}),n.featureClass_=i.featureClass?i.featureClass:G.a,n.geometryName_=i.geometryName,n.layerName_=i.layerName?i.layerName:"layer",n.layers_=i.layers?i.layers:null,n.idProperty_=i.idProperty,n.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"],n}return q(e,t),e.prototype.readRawGeometry_=function(t,e,n,r){t.pos=e.geometry;for(var i=t.readVarint()+t.pos,o=1,a=0,s=0,l=0,c=0,u=0;t.pos<i;){if(!a){var h=t.readVarint();o=7&h,a=h>>3}a--,1===o||2===o?(s+=t.readSVarint(),l+=t.readSVarint(),1===o&&c>u&&(r.push(c),u=c),n.push(s,l),c+=2):7===o?c>u&&(n.push(n[u],n[u+1]),c+=2):Object(V.a)(!1,59)}c>u&&(r.push(c),u=c)},e.prototype.createFeature_=function(t,e,n){var r,i=e.type;if(0===i)return null;var o,s=e.properties;this.idProperty_?(o=s[this.idProperty_],delete s[this.idProperty_]):o=e.id,s[this.layerName_]=e.layer.name;var l=[],c=[];this.readRawGeometry_(t,e,l,c);var d=function(t,e){var n;1===t?n=1===e?h.a.POINT:h.a.MULTI_POINT:2===t?n=1===e?h.a.LINE_STRING:h.a.MULTI_LINE_STRING:3===t&&(n=h.a.POLYGON);return n}(i,c.length);if(this.featureClass_===G.a)(r=new this.featureClass_(d,l,c,s,o)).transform(n.dataProjection);else{var p=void 0;if(d==h.a.POLYGON){for(var f=[],m=0,g=0,y=0,v=c.length;y<v;++y){var _=c[y];if(Object(D.a)(l,m,_,2)){if(0===f.length)continue;f[f.length-1].push(c[g])}else f.push(c.slice(g,y+1));g=y+1,m=_}p=f.length>1?new F(l,u.a.XY,f):new k.a(l,u.a.XY,c)}else p=d===h.a.POINT?new O.a(l,u.a.XY):d===h.a.LINE_STRING?new C(l,u.a.XY):d===h.a.POLYGON?new k.a(l,u.a.XY,c):d===h.a.MULTI_POINT?new M(l,u.a.XY):d===h.a.MULTI_LINE_STRING?new T(l,u.a.XY,c):null;r=new(0,this.featureClass_),this.geometryName_&&r.setGeometryName(this.geometryName_);var b=function(t,e,n){var r,i=n?Object(a.k)(n.featureProjection):null,o=n?Object(a.k)(n.dataProjection):null;if(r=i&&o&&!Object(a.g)(i,o)?(e?t.clone():t).transform(e?i:o,e?o:i):t,e&&n&&void 0!==n.decimals){var s=Math.pow(10,n.decimals);r===t&&(r=t.clone()),r.applyTransform((function(t){for(var e=0,n=t.length;e<n;++e)t[e]=Math.round(t[e]*s)/s;return t}))}return r}(p,!1,n);r.setGeometry(b),r.setId(o),r.setProperties(s,!0)}return r},e.prototype.getType=function(){return c.a.ARRAY_BUFFER},e.prototype.readFeatures=function(t,e){var n=this.layers_,r=this.adaptOptions(e),i=Object(a.k)(r.dataProjection);i.setWorldExtent(r.extent),r.dataProjection=i;var o=new B.a(t),s=o.readFields(W,{}),l=[];for(var c in s)if(!n||-1!=n.indexOf(c)){var u=s[c],h=u?[0,0,u.extent,u.extent]:null;i.setExtent(h);for(var d=0,p=u.length;d<p;++d){var f=K(o,u,d),m=this.createFeature_(o,f,r);null!==m&&l.push(m)}}return l},e.prototype.readProjection=function(t){return this.dataProjection},e.prototype.setLayers=function(t){this.layers_=t},e}(s);function W(t,e,n){if(3===t){var r={keys:[],values:[],features:[]},i=n.readVarint()+n.pos;n.readFields(Z,r,i),r.length=r.features.length,r.length&&(e[r.name]=r)}}function Z(t,e,n){if(15===t)e.version=n.readVarint();else if(1===t)e.name=n.readString();else if(5===t)e.extent=n.readVarint();else if(2===t)e.features.push(n.pos);else if(3===t)e.keys.push(n.readString());else if(4===t){for(var r=null,i=n.readVarint()+n.pos;n.pos<i;)r=1===(t=n.readVarint()>>3)?n.readString():2===t?n.readFloat():3===t?n.readDouble():4===t?n.readVarint64():5===t?n.readVarint():6===t?n.readSVarint():7===t?n.readBoolean():null;e.values.push(r)}}function $(t,e,n){if(1==t)e.id=n.readVarint();else if(2==t)for(var r=n.readVarint()+n.pos;n.pos<r;){var i=e.layer.keys[n.readVarint()],o=e.layer.values[n.readVarint()];e.properties[i]=o}else 3==t?e.type=n.readVarint():4==t&&(e.geometry=n.pos)}function K(t,e,n){t.pos=e.features[n];var r=t.readVarint()+t.pos,i={layer:e,type:0,properties:{}};return t.readFields($,i,r),i}e.a=H},function(t,e,n){"use strict";var r,i=n(14),o=n(80),a="bottom-left",s="bottom-right",l="top-left",c="top-right",u=n(25),h=n(153),d=n(62),p=n(16),f=n(65),m=n(29),g=n(109),y=n(9),v=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),_=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.extent=e,o.pixelRatio_=r,o.resolution=n,o.state=i,o}return v(e,t),e.prototype.changed=function(){this.dispatchEvent(i.a.CHANGE)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return Object(y.b)()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){Object(y.b)()},e}(f.a),b=n(34),x=n(4),w=n(15),E=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function C(t,e,n){var r=t,o=!0,a=!1,s=!1,l=[Object(w.b)(r,i.a.LOAD,(function(){s=!0,a||e()}))];return r.src&&b.c?(a=!0,r.decode().then((function(){o&&e()})).catch((function(t){o&&(s?e():n())}))):l.push(Object(w.b)(r,i.a.ERROR,n)),function(){o=!1,l.forEach(w.c)}}!function(t){function e(e,n,r,i,o,a){var s=t.call(this,e,n,r,u.a.IDLE)||this;return s.src_=i,s.image_=new Image,null!==o&&(s.image_.crossOrigin=o),s.unlisten_=null,s.state=u.a.IDLE,s.imageLoadFunction_=a,s}E(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=u.a.ERROR,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=Object(x.x)(this.extent)/this.image_.height),this.state=u.a.LOADED,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state!=u.a.IDLE&&this.state!=u.a.ERROR||(this.state=u.a.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=C(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t,this.resolution=Object(x.x)(this.extent)/this.image_.height},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}(_);var S=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),T=null,O=function(t){function e(e,n,r,i,o,a){var s=t.call(this)||this;return s.hitDetectionImage_=null,s.image_=e||new Image,null!==i&&(s.image_.crossOrigin=i),s.canvas_={},s.color_=a,s.unlisten_=null,s.imageState_=o,s.size_=r,s.src_=n,s.tainted_,s}return S(e,t),e.prototype.isTainted_=function(){if(void 0===this.tainted_&&this.imageState_===u.a.LOADED){T||(T=Object(m.a)(1,1)),T.drawImage(this.image_,0,0);try{T.getImageData(0,0,1,1),this.tainted_=!1}catch(t){T=null,this.tainted_=!0}}return!0===this.tainted_},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(i.a.CHANGE)},e.prototype.handleImageError_=function(){this.imageState_=u.a.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=u.a.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_},e.prototype.getPixelRatio=function(t){return this.replaceColor_(t),this.canvas_[t]?t:1},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var t=this.size_[0],e=this.size_[1],n=Object(m.a)(t,e);n.fillRect(0,0,t,e),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==u.a.IDLE){this.imageState_=u.a.LOADING;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=C(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},e.prototype.replaceColor_=function(t){if(this.color_&&!this.canvas_[t]&&this.imageState_===u.a.LOADED){var e=document.createElement("canvas");this.canvas_[t]=e,e.width=Math.ceil(this.image_.width*t),e.height=Math.ceil(this.image_.height*t);var n=e.getContext("2d");if(n.scale(t,t),n.drawImage(this.image_,0,0),n.globalCompositeOperation="multiply","multiply"===n.globalCompositeOperation||this.isTainted_())n.fillStyle=Object(d.b)(this.color_),n.fillRect(0,0,e.width/t,e.height/t),n.globalCompositeOperation="destination-in",n.drawImage(this.image_,0,0);else{for(var r=n.getImageData(0,0,e.width,e.height),i=r.data,o=this.color_[0]/255,a=this.color_[1]/255,s=this.color_[2]/255,l=this.color_[3],c=0,h=i.length;c<h;c+=4)i[c]*=o,i[c+1]*=a,i[c+2]*=s,i[c+3]*=l;n.putImageData(r,0,0)}}},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(f.a);var I=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),A=function(t){function e(e){var n=this,r=e||{},i=void 0!==r.opacity?r.opacity:1,a=void 0!==r.rotation?r.rotation:0,s=void 0!==r.scale?r.scale:1,c=void 0!==r.rotateWithView&&r.rotateWithView;(n=t.call(this,{opacity:i,rotation:a,scale:s,displacement:void 0!==r.displacement?r.displacement:[0,0],rotateWithView:c})||this).anchor_=void 0!==r.anchor?r.anchor:[.5,.5],n.normalizedAnchor_=null,n.anchorOrigin_=void 0!==r.anchorOrigin?r.anchorOrigin:l,n.anchorXUnits_=void 0!==r.anchorXUnits?r.anchorXUnits:o.a.FRACTION,n.anchorYUnits_=void 0!==r.anchorYUnits?r.anchorYUnits:o.a.FRACTION,n.crossOrigin_=void 0!==r.crossOrigin?r.crossOrigin:null;var h=void 0!==r.img?r.img:null,f=void 0!==r.imgSize?r.imgSize:null,m=r.src;Object(p.a)(!(void 0!==m&&h),4),Object(p.a)(!h||h&&f,5),void 0!==m&&0!==m.length||!h||(m=h.src||Object(y.c)(h)),Object(p.a)(void 0!==m&&m.length>0,6);var v=void 0!==r.src?u.a.IDLE:u.a.LOADED;return n.color_=void 0!==r.color?Object(d.a)(r.color):null,n.iconImage_=function(t,e,n,r,i,o){var a=g.a.get(e,r,o);return a||(a=new O(t,e,n,r,i,o),g.a.set(e,r,o,a)),a}(h,m,f,n.crossOrigin_,v,n.color_),n.offset_=void 0!==r.offset?r.offset:[0,0],n.offsetOrigin_=void 0!==r.offsetOrigin?r.offsetOrigin:l,n.origin_=null,n.size_=void 0!==r.size?r.size:null,n}return I(e,t),e.prototype.clone=function(){var t=this.getScale();return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},e.prototype.getAnchor=function(){var t=this.normalizedAnchor_;if(!t){t=this.anchor_;var e=this.getSize();if(this.anchorXUnits_==o.a.FRACTION||this.anchorYUnits_==o.a.FRACTION){if(!e)return null;t=this.anchor_.slice(),this.anchorXUnits_==o.a.FRACTION&&(t[0]*=e[0]),this.anchorYUnits_==o.a.FRACTION&&(t[1]*=e[1])}if(this.anchorOrigin_!=l){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=c&&this.anchorOrigin_!=s||(t[0]=-t[0]+e[0]),this.anchorOrigin_!=a&&this.anchorOrigin_!=s||(t[1]=-t[1]+e[1])}this.normalizedAnchor_=t}var n=this.getDisplacement();return[t[0]-n[0],t[1]+n[1]]},e.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(t){return this.iconImage_.getImage(t)},e.prototype.getPixelRatio=function(t){return this.iconImage_.getPixelRatio(t)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(){return this.iconImage_.getHitDetectionImage()},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if(this.offsetOrigin_!=l){var e=this.getSize(),n=this.iconImage_.getSize();if(!e||!n)return null;t=t.slice(),this.offsetOrigin_!=c&&this.offsetOrigin_!=s||(t[0]=n[0]-e[0]-t[0]),this.offsetOrigin_!=a&&this.offsetOrigin_!=s||(t[1]=n[1]-e[1]-t[1])}return this.origin_=t,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(t){this.iconImage_.addEventListener(i.a.CHANGE,t)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(t){this.iconImage_.removeEventListener(i.a.CHANGE,t)},e}(h.a);e.a=A}]);
//# sourceMappingURL=gbif-react-components.js.map